globals
//globals from FrameLibrary:
constant boolean LIBRARY_FrameLibrary=true
//endglobals from FrameLibrary
//globals from MaxSpeed:
constant boolean LIBRARY_MaxSpeed=true
constant boolean MaxSpeed___USE_TABLE= true
constant boolean MaxSpeed___NEW_TABLE= true
         // Vexorian's Table or Bribe's (NEW)
constant boolean MaxSpeed___TEST_MODE= false
constant real MaxSpeed___PERIOD= 0.03125
        //  private constant real MAX_SPEED = 2088.0
constant real MaxSpeed___MAX_SPEED= 1400.0
         // 最大速度限定，超出视为传送。
constant real MaxSpeed___MIN_SPEED= 500.0
         // 判定的最小距离，此项过小或速度过大会使原地打转几率增加，超出则没有加速效果。
        // 测试最大为500刚出头，与522还有些差距
//endglobals from MaxSpeed
//globals from ShowEffect:
constant boolean LIBRARY_ShowEffect=true
force showEffectForce= CreateForce()
constant string BLANK= ""
//endglobals from ShowEffect
//globals from UniMissileSystem3D:
constant boolean LIBRARY_UniMissileSystem3D=true
real array UniMissileSystem3D__SP
real array UniMissileSystem3D__RA
real array UniMissileSystem3D__DM
real array UniMissileSystem3D__DI
real array UniMissileSystem3D__AN
real array UniMissileSystem3D__ANZ
real array UniMissileSystem3D__HE
real array UniMissileSystem3D__HEMax
real array UniMissileSystem3D__SH
real array UniMissileSystem3D__US
real array UniMissileSystem3D__MX
real array UniMissileSystem3D__MY
real array UniMissileSystem3D__MZ
real array UniMissileSystem3D__ARC
real array UniMissileSystem3D__HP
real array UniMissileSystem3D__OF
real array UniMissileSystem3D__OS
real array UniMissileSystem3D__TIM
real array UniMissileSystem3D__LT
real array UniMissileSystem3D__SZ
real array UniMissileSystem3D__RI
real array UniMissileSystem3D__R01
real array UniMissileSystem3D__R02
real array UniMissileSystem3D__MGra
real array UniMissileSystem3D__LOC
real array UniMissileSystem3D__OH
real UniMissileSystem3D__Gravity=0.40
unit array UniMissileSystem3D__MU
unit array UniMissileSystem3D__MT
unit UniMissileSystem3D__DamageUnit
string array UniMissileSystem3D__EF
effect array UniMissileSystem3D__EFL
real array UniMissileSystem3D__ACC
real array UniMissileSystem3D__MaxS
real array UniMissileSystem3D__SPX
real array UniMissileSystem3D__SPY
real array UniMissileSystem3D__LastX
real array UniMissileSystem3D__LastY
real array UniMissileSystem3D__MKs
integer array UniMissileSystem3D__IN
integer UniMissileSystem3D__Top=- 1
real UniMissileSystem3D__TIMOut=0.03
group UniMissileSystem3D__DamageGroup
timer UniMissileSystem3D__TIMr
location UniMissileSystem3D__HeroLoc
location array UniMissileSystem3D__MLoc
player array UniMissileSystem3D__LastOwner
boolean MissileTimerPause=false
real UniMissileSystem3D__map_max_X
real UniMissileSystem3D__map_max_Y
real UniMissileSystem3D__map_min_X
real UniMissileSystem3D__map_min_Y
//endglobals from UniMissileSystem3D
//globals from YDTriggerSaveLoadSystem:
constant boolean LIBRARY_YDTriggerSaveLoadSystem=true
hashtable YDHT
hashtable YDLOC
//endglobals from YDTriggerSaveLoadSystem
//globals from YDWEAbilityState:
constant boolean LIBRARY_YDWEAbilityState=true
constant integer YDWEAbilityState__ABILITY_STATE_COOLDOWN= 1
constant integer YDWEAbilityState__ABILITY_DATA_TARGS= 100
constant integer YDWEAbilityState__ABILITY_DATA_CAST= 101
constant integer YDWEAbilityState__ABILITY_DATA_DUR= 102
constant integer YDWEAbilityState__ABILITY_DATA_HERODUR= 103
constant integer YDWEAbilityState__ABILITY_DATA_COST= 104
constant integer YDWEAbilityState__ABILITY_DATA_COOL= 105
constant integer YDWEAbilityState__ABILITY_DATA_AREA= 106
constant integer YDWEAbilityState__ABILITY_DATA_RNG= 107
constant integer YDWEAbilityState__ABILITY_DATA_DATA_A= 108
constant integer YDWEAbilityState__ABILITY_DATA_DATA_B= 109
constant integer YDWEAbilityState__ABILITY_DATA_DATA_C= 110
constant integer YDWEAbilityState__ABILITY_DATA_DATA_D= 111
constant integer YDWEAbilityState__ABILITY_DATA_DATA_E= 112
constant integer YDWEAbilityState__ABILITY_DATA_DATA_F= 113
constant integer YDWEAbilityState__ABILITY_DATA_DATA_G= 114
constant integer YDWEAbilityState__ABILITY_DATA_DATA_H= 115
constant integer YDWEAbilityState__ABILITY_DATA_DATA_I= 116
constant integer YDWEAbilityState__ABILITY_DATA_UNITID= 117

constant integer YDWEAbilityState__ABILITY_DATA_HOTKET= 200
constant integer YDWEAbilityState__ABILITY_DATA_UNHOTKET= 201
constant integer YDWEAbilityState__ABILITY_DATA_RESEARCH_HOTKEY= 202
constant integer YDWEAbilityState__ABILITY_DATA_NAME= 203
constant integer YDWEAbilityState__ABILITY_DATA_ART= 204
constant integer YDWEAbilityState__ABILITY_DATA_TARGET_ART= 205
constant integer YDWEAbilityState__ABILITY_DATA_CASTER_ART= 206
constant integer YDWEAbilityState__ABILITY_DATA_EFFECT_ART= 207
constant integer YDWEAbilityState__ABILITY_DATA_AREAEFFECT_ART= 208
constant integer YDWEAbilityState__ABILITY_DATA_MISSILE_ART= 209
constant integer YDWEAbilityState__ABILITY_DATA_SPECIAL_ART= 210
constant integer YDWEAbilityState__ABILITY_DATA_LIGHTNING_EFFECT= 211
constant integer YDWEAbilityState__ABILITY_DATA_BUFF_TIP= 212
constant integer YDWEAbilityState__ABILITY_DATA_BUFF_UBERTIP= 213
constant integer YDWEAbilityState__ABILITY_DATA_RESEARCH_TIP= 214
constant integer YDWEAbilityState__ABILITY_DATA_TIP= 215
constant integer YDWEAbilityState__ABILITY_DATA_UNTIP= 216
constant integer YDWEAbilityState__ABILITY_DATA_RESEARCH_UBERTIP= 217
constant integer YDWEAbilityState__ABILITY_DATA_UBERTIP= 218
constant integer YDWEAbilityState__ABILITY_DATA_UNUBERTIP= 219
constant integer YDWEAbilityState__ABILITY_DATA_UNART= 220
//endglobals from YDWEAbilityState
//globals from YDWEBase:
constant boolean LIBRARY_YDWEBase=true
//ȫ�ֹ�ϣ�� 
string bj_AllString=".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
//全局系统变量
unit bj_lastAbilityCastingUnit=null
unit bj_lastAbilityTargetUnit=null
unit bj_lastPoolAbstractedUnit=null
unitpool bj_lastCreatedUnitPool=null
item bj_lastPoolAbstractedItem=null
itempool bj_lastCreatedItemPool=null
attacktype bj_lastSetAttackType= ATTACK_TYPE_NORMAL
damagetype bj_lastSetDamageType= DAMAGE_TYPE_NORMAL
weapontype bj_lastSetWeaponType= WEAPON_TYPE_WHOKNOWS
real yd_MapMaxX= 0
real yd_MapMinX= 0
real yd_MapMaxY= 0
real yd_MapMinY= 0
string array YDWEBase__yd_PlayerColor
trigger array YDWEBase__AbilityCastingOverEventQueue
integer array YDWEBase__AbilityCastingOverEventType
integer YDWEBase__AbilityCastingOverEventNumber= 0
//endglobals from YDWEBase
//globals from YDWEBitwise:
constant boolean LIBRARY_YDWEBitwise=true
integer array YDWEBitwise__C2
constant string YDWEBitwise__hexstr= "0123456789ABCDEF"
//endglobals from YDWEBitwise
//globals from YDWEGeneralBounsSystem:
constant boolean LIBRARY_YDWEGeneralBounsSystem=true
integer array YDWEGeneralBounsSystem__ABILITY_COUNT
integer array YDWEGeneralBounsSystem__ABILITY_NUM
integer array YDWEGeneralBounsSystem__BonusAbilitys
integer array YDWEGeneralBounsSystem__PowersOf2
integer YDWEGeneralBounsSystem__PRELOAD_DUMMY_UNIT= 'hpea'
integer array YDWEGeneralBounsSystem__YDWEBONUS_MyChar
boolean YDWEGeneralBounsSystem__PRELOAD_ABILITYS= true
constant integer YDWEGeneralBounsSystem__BONUS_TYPES= 4
integer array YDWEGeneralBounsSystem__MaxBonus
integer array YDWEGeneralBounsSystem__MinBonus
unit array YDWEGeneralBounsSystem__Units
integer YDWEGeneralBounsSystem__UnitCount= 0
//endglobals from YDWEGeneralBounsSystem
//globals from YDWEGetUnitsInRangeOfLocMatchingNull:
constant boolean LIBRARY_YDWEGetUnitsInRangeOfLocMatchingNull=true
group yd_NullTempGroup
//endglobals from YDWEGetUnitsInRangeOfLocMatchingNull
//globals from YDWELogarithm:
constant boolean LIBRARY_YDWELogarithm=true
real array YDWELogarithm__base
//endglobals from YDWELogarithm
//globals from YDWEPolledWaitNull:
constant boolean LIBRARY_YDWEPolledWaitNull=true
//endglobals from YDWEPolledWaitNull
//globals from YDWEStringHash:
constant boolean LIBRARY_YDWEStringHash=true
//endglobals from YDWEStringHash
//globals from YDWESync:
constant boolean LIBRARY_YDWESync=true
gamecache YDWESync__m_gc
boolean YDWESync__m_mutex_state= false
//endglobals from YDWESync
//globals from YDWETriggerEvent:
constant boolean LIBRARY_YDWETriggerEvent=true
trigger yd_DamageEventTrigger= null
trigger array YDWETriggerEvent__DamageEventQueue
integer YDWETriggerEvent__DamageEventNumber= 0
	
item bj_lastMovedItemInItemSlot= null
	
trigger YDWETriggerEvent__MoveItemEventTrigger= null
trigger array YDWETriggerEvent__MoveItemEventQueue
integer YDWETriggerEvent__MoveItemEventNumber= 0
//endglobals from YDWETriggerEvent
//globals from YDWETriggerRegisterLeaveRectSimpleNull:
constant boolean LIBRARY_YDWETriggerRegisterLeaveRectSimpleNull=true
region yd_NullTempRegion
//endglobals from YDWETriggerRegisterLeaveRectSimpleNull
//globals from YDWEUnitHasItemOfTypeBJNull:
constant boolean LIBRARY_YDWEUnitHasItemOfTypeBJNull=true
//endglobals from YDWEUnitHasItemOfTypeBJNull
//globals from Deputy:
constant boolean LIBRARY_Deputy=true
//endglobals from Deputy
//globals from YDWECreateEwsp:
constant boolean LIBRARY_YDWECreateEwsp=true
//endglobals from YDWECreateEwsp
//globals from YDWEJumpTimer:
constant boolean LIBRARY_YDWEJumpTimer=true
//��Ծϵͳ���ȼ�
integer MoveMoreLevel_JumpTimer=3
//endglobals from YDWEJumpTimer
//globals from YDWELocalVariable:
constant boolean LIBRARY_YDWELocalVariable=true
//endglobals from YDWELocalVariable
//globals from YDWEPreloadSL:
constant boolean LIBRARY_YDWEPreloadSL=true
    ///
    /// ÿ�����ռ�õĿռ�[500*id, 500*(id-1))
    /// �±�Խ��û�н��м�飬�ƺ�û�����Ҫ��˭Ҫ���ó���500...��ȥ����- -
    /// 
integer array YDWEPreloadSL__Code
integer array YDWEPreloadSL__CodeHI
integer array YDWEPreloadSL__CodeLO
boolean bj_lastLoadPreloadSLResult
string array udg_YDWE_PreloadSL_List
string udg_YDWE_PreloadSL_CurrentDir= ""
//endglobals from YDWEPreloadSL
//globals from YDWEStringFormula:
constant boolean LIBRARY_YDWEStringFormula=true
item bj_lastCombinedItem=null
trigger array YDWEStringFormula__ItemCombineEventQueue
integer YDWEStringFormula__ItemCombineEventNumber= 0
constant integer YDWEStringFormula__MAX_INSTANCES= 8100
constant integer YDWEStringFormula__SEGMENT_LENGTH= 4
integer YDWEStringFormula__FormulaData= 0
//endglobals from YDWEStringFormula
//globals from YDWETimerPattern:
constant boolean LIBRARY_YDWETimerPattern=true
boolexpr YDWETimerPattern__Bexpr= null
rect YDWETimerPattern__Area= null
integer YDWETimerPattern__tmp_data
location YDWETimerPattern__yd_loc= Location(0.0, 0.0)
//endglobals from YDWETimerPattern
//globals from YDWETimerSystem:
constant boolean LIBRARY_YDWETimerSystem=true
integer YDWETimerSystem__CurrentTime
integer YDWETimerSystem__CurrentIndex
integer YDWETimerSystem__TaskListHead
integer YDWETimerSystem__TaskListIdleHead
integer YDWETimerSystem__TaskListIdleMax
integer array YDWETimerSystem__TaskListIdle
integer array YDWETimerSystem__TaskListNext
integer array YDWETimerSystem__TaskListTime
trigger array YDWETimerSystem__TaskListProc
trigger YDWETimerSystem__fnRemoveUnit
trigger YDWETimerSystem__fnDestroyTimer
trigger YDWETimerSystem__fnRemoveItem
trigger YDWETimerSystem__fnDestroyEffect
trigger YDWETimerSystem__fnDestroyLightning
trigger YDWETimerSystem__fnRunTrigger
timer YDWETimerSystem__Timer
integer YDWETimerSystem__TimerHandle
integer YDWETimerSystem__TimerSystem_RunIndex= 0
//endglobals from YDWETimerSystem
//globals from WuQiQiHeSystem:
constant boolean LIBRARY_WuQiQiHeSystem=true
//endglobals from WuQiQiHeSystem
    // User-defined
group udg_UG_ResidualImage= null
unit udg_A_Unit= null
unit udg_A_Unit2= null
unit array udg_A_PlayerHero
unit array udg_Player_Hero
unit array udg_Unit_B
group udg_A_UG= null
location udg_A_Piont= null
location udg_A_Piont2= null
real udg_A_Angle= 0
real udg_A_Ang= 0
real udg_A_Ang_2= 0
real udg_A_hurt= 0
real udg_A_num= 0
real udg_x= 0
real udg_y= 0
player array udg_Player
integer udg_A_Int= 0
integer udg_Number_player= 0
integer array udg_MeiJuJiFen
integer array udg_kurongsharen
boolean array udg_HuanZhuangCD
trigger udg_youLingChuan= null
    // Generated
trigger gg_trg_ShiJiaZhiXiang= null
trigger gg_trg_YuJiaMiCheng= null
trigger gg_trg_japi______u= null
trigger gg_trg_firstOccur= null
trigger gg_trg____________________007= null
trigger gg_trg____________________001= null
trigger gg_trg____________________004= null
trigger gg_trg____________________006= null
trigger gg_trg____________________005= null
trigger gg_trg____________________002= null
trigger gg_trg____________________003= null
trigger gg_trg___________________u= null
trigger gg_trg_____________u= null
trigger gg_trg_ChangeClothes= null
trigger gg_trg_QinLongKongHe= null
trigger gg_trg_YaoWangShenPian= null
trigger gg_trg_KuRongShenGong= null
trigger gg_trg_KuRongShenGong_2= null
trigger gg_trg_KuRongShenGong_3= null
trigger gg_trg_ShuiShangPiao= null
trigger gg_trg_SH= null
trigger gg_trg_AM_1= null
trigger gg_trg_AM_2= null
unit gg_unit_N008_0054= null
unit gg_unit_N007_0055= null
unit gg_unit_n00M_0131= null
unit gg_unit_N00U_0092= null
unit gg_unit_o00K_0126= null
unit gg_unit_o02D_0069= null
unit gg_unit_nvl2_0005= null
unit gg_unit_N00I_0116= null
unit gg_unit_N00B_0086= null
unit gg_unit_n00E_0066= null
unit gg_unit_n00N_0132= null
unit gg_unit_N00F_0085= null
unit gg_unit_N00P_0084= null
unit gg_unit_N012_0095= null
constant integer FRAME_ID= - 29734415
integer GUI
	
constant integer MAX_WU_GONG_NUM= 56
constant integer MAX_BAN_LV_NUM= 14
constant integer LIAN_DAN= 1
constant integer DUAN_ZAO= 2
constant integer BING_QI= 3
constant integer JIAN_DING= 4
constant integer LIAN_QI= 5
constant integer XUN_BAO= 6
constant integer YA_HUAN= 7
constant integer JING_WU= 8
constant integer MAX_DEPUTY= 8

	
constant integer QIAN_ZHU_SHOU= 'A0BL'
constant integer WU_DU_ZHOU= 'A0DU'
constant integer YU_SHE_SHU= 'A0DT'
constant integer BU_TIAN_JING= 'A0DS'
constant integer WAN_CHU_SHI_XIN= 'A0DR'

constant integer LUO_YING_ZHANG= 'A0EE'
constant integer LUO_YING_JIAN= 'A0EG'
constant integer XUAN_FENG_TUI= 'A0EI'
constant integer BI_BO_XIN_JING= 'A0EK'
constant integer QI_MEN_SHU_SHU= 'A0EL'

constant integer ZAO_LEI_PI= 'A0EP'
constant integer BA_MIAN_LING_LONG= 'A0EQ'
constant integer FAN_SHOU_QIAN_ZHU= 'A0ES'
constant integer QIAN_KUN_YI_ZHI= 'A0ET'
constant integer DA_GONG_GAO_CHENG= 'A0ER'

	// 雪山武功
constant integer XUE_SHAN_JIAN_FA= 'A0EX'
constant integer FENG_SHA_MANG_MANG= 'A0EY'
constant integer JIN_WU_DAO_FA= 'A0EZ'
constant integer XUE_HUA_LIU_CHU= 'A0F0'
constant integer WU_WANG_SHEN_GONG= 'A0F1'

	// 汝阳王府武功
constant integer TOU_KAN_TOU_XUE= 'A0F4'
constant integer XUAN_MING_SHEN_ZHANG= 'A0F6'
constant integer JIA_YI_SHEN_GONG= 'A0F5'

	// 嵩山派武功
constant integer SONG_SHAN_JIAN_FA= 'A0BF'
constant integer ZI_WU_SHI_ER_JIAN= 'A0FA'
constant integer HAN_BING_SHEN_ZHANG= 'A0FC'
constant integer DA_SONG_YANG_SHEN_ZHANG= 'A0FE'
constant integer WU_MING_NEI_GONG= 'A0FD'

constant integer SHUANG_SHOU= 'A07U'
constant integer KUI_HUA= 'A07T'
constant integer HUA_GU= 'A06L'
constant integer XI_XING= 'A07R'
constant integer HUA_GONG= 'A07R'
constant integer TAN_ZHI= 'A06H'
constant integer BI_HAI= 'A018'
constant integer JIU_YIN= 'A07S'
constant integer JIU_ZHAO= 'A07N'
constant integer QIAN_KUN= 'A07W'
constant integer QI_SHANG_QUAN= 'A07M'
constant integer JIU_YANG= 'A0DN'
constant integer LIAN_CHENG_JIAN_FA= 'A06J'

constant integer DA_GOU= 'A07L'
constant integer BI_XIE_JIAN_FA= 'A07J'
constant integer ZI_CHUANG_WU_XUE= 'A036'

constant integer LONG_XIANG= 'S002'
constant integer XIAO_WU_XIANG= 'A083'
constant integer XI_SUI_JING= 'A080'
constant integer BEI_MING_SHEN_GONG= 'A082'

constant integer MIAO_SHOU_KONG_KONG= 'A03O'
constant integer GUI_XI_GONG= 'A0CE'
constant integer SHEN_XING_BAI_BIAN= 'A03N'
constant integer HAN_BING_ZHEN_QI= 'A03L'

constant integer POISONED_BUFF= 'BEsh'
constant integer DEEP_POISONED_BUFF= 'B01J'

constant integer ITEM_SHE_ZHANG= 'I09B'
constant integer ITEM_YU_XIAO= 'I09D'
constant integer ITEM_HAN_SHA= 'I0AE'
constant integer ITEM_YE_LUO= 'I0EU'
constant integer ITEM_HAN_PO_JIAN= 'I0F6'

	
string priKey
integer array tiezhang_flag
integer array tangmen_flag
integer array ruyang_flag
integer array talent_flag
integer array wudu_flag
integer array taohua_flag
integer array mall_addition
integer array level_award
integer array map_award_status
integer array wukong_flag
integer array panda_flag
integer array neihua_flag
// A 永久性道具 B 计时性道具
string PROPERTY_TALENT= "AR98FE7J3P"
string PROPERTY_TIEZHANG= "A198FYU9ME"
string PROPERTY_TANGMEN= "AR87S95C34"
string PROPERTY_RUYANG= "ARUYANG123"
string PROPERTY_WUDU= "AWUDU12345"
string PROPERTY_TAOHUA= "ATAOHUA123"
string PROPERTY_WUKONG= "ARWUKONG59"
string PROPERTY_PANDA= "ARPANDA072"
string PROPERTY_NEIHUA= "ANEIHUA123"
string PROPERTY_PASSPORT_S1= "APASSPORT1"

string PROPERTY_DOUBLE_POINT= "BC98FNY5L9"
string PROPERTY_LEVEL_AWARD= "BYOUARES13"

constant integer DENOMINATION_NUMBER= 26
integer array interAbilityCount
integer array alreadyInternalizedCount
boolean moshiFlag= false
integer nanduFlag= 0
boolean tiaoZhanFlag= false
integer tiaoZhanIndex= 0
boolean is_victory= false
constant string VERSION= "1.6.70"
timer shiWanTimer= null
timerdialog shiWanTimerDialog= null
constant integer interButtonKey= $AABBCC
constant integer interAbilityKey= $AABBDD
dialog array interDialog
dialog wuhun= DialogCreate()
dialog chuansong= DialogCreate()
button array wuhun1
button array chuansong1
integer array duanZao_level
effect array udg_JTX
boolean ceshi= false
real ceshizongshanghai
real curMaxDamage= 0
integer damage_jf= 0
timer jiuyangTimer1= null
timer jiuyangTimer2= null
timer jiuyangTimer3= null
quest defeatStealer= null
quest defeatSeeker= null
integer array xunwu
integer array yangshou
integer array udg_yangshou
integer array bigTalent
integer array yitianflag
integer array quanZhenFlag
integer array muRongOnlyFlag
integer array hengShanOnlyFlag
integer array huaShanOnlyFlag
integer array hengshan2OnlyFlag
integer array taiShanOnlyFlag
integer array shenLongOnlyFlag
integer array openDenoms
integer array openDenomIds
dialog array openDenomDialog
constant integer openDenomButtonKey= $86556
integer array dahanTask
integer array nimoxingTask
boolean array readyToClear
integer array udg_talent
constant integer MAX_TALENT_NUM= 7
    // 天赋树相关等级
    // 攻击天赋 三围->暴击->特攻
    // 攻击天赋-特攻
integer array talent_special_attack
    // 攻击天赋-暴击倍数
integer array talent_critical_attack
    // 攻击天赋-三围
integer array talent_three_attribute
    // 防御天赋 护甲->回血->伤害吸收上限
    // 防御天赋-护甲
integer array talent_armor
    //  防御天赋-伤害吸收上限
integer array talent_damage_absorption
    // 防御天赋-回血
integer array talent_recover_hp
    // 资源天赋 金币->声望->木材/六围
    // 资源天赋-金币
integer array talent_gold
    // 资源天赋-木材
integer array talent_lumber
    // 资源天赋-声望
integer array talent_reputation
    // 资源天赋-六围
integer array talent_six_attribute
    // 总天赋点数
integer array talentTotalPoint
   
constant integer MAX_INT= 2147483647
boolean array showHint
integer passed_time= 0
integer next_endless_time= 3600
integer endless_count= 0
timer endless_timer
unit pickingUnit= null
integer array wukongSkillCd
    // S1通行证经验
integer array passportExpS1
    // S1通行证等级
integer array passportLevelS1
    // S1通行证1-10级开关（二进制）
integer array passportSwitchS1
    // 决战币
integer array passportCoin
    // 蜜蜂皮肤
integer array beeSkinFlag
    // 1号翅膀
integer array wing1Flag
    // 2号翅膀
integer array wing2Flag
    // 3号翅膀
integer array wing3Flag
    // 魁岚皮肤-宠物
integer array kuiLanSkinFlag
    // 空瑶皮肤-英雄
integer array kongYaoSkinFlag
    // 启萧皮肤-英雄
integer array qiXiaoSkinFlag
constant string PASSPORT_EXP_S1= "passportExpS1"
constant string COIN= "coinR"
constant string PASSPORT_SWITCH_S1= "passportSwitchS1R"
     // 天赋加点存档
constant string TALENT_SAVE= "TALENT_SAVER"
integer array zwidget
integer array zbutton
integer array plusWidget
integer array plusButton
	
integer array checkboxWidget
integer array checkboxButton
integer avatar
integer avatarBack
integer closeBtn
integer heroDiscription
integer bibo_image
integer bibo_text
	
integer helpWidget
integer helpButton
integer helpAttrWidget
integer helpAttrButton
integer helpKungfuWidget
integer helpKungfuButton
integer helpCommandWidget
integer helpCommandButton
integer tutorial
integer attribute
integer command
integer closeTutorialWidget
integer closeTutorialButton
integer closeAttributeWidget
integer closeAttributeButton
integer closeCommandWidget
integer closeCommandButton

integer passportWidget
integer passportButton
integer passport
integer closePassportWidget
integer closePassportButton
integer array passportAwardWidget
integer array passportAwardButton
integer array passportTickWidget
integer passportHelpMeWidget
integer passportHelpMeButton
string array passportAwardWidgetString

integer talentWidget
integer talentButton
integer talentTree
integer closeTalentWidget
integer closeTalentButton
integer array talentItemWidget
integer array talentItemButton
integer array talentLevelWidget
integer talentCoinIcon
integer talentCoinText
integer talentResetWidget
integer talentResetButton
string array talentName
string array talentThreeAttributeDesc
string array talentCriticalAttackDesc
string array talentSpecialAttackDesc
string array talentArmorDesc
string array talentDamageAbsorptionDesc
string array talentRecoverHpDesc
string array talentGoldDesc
string array talentLumberDesc
string array talentReputationDesc
string array talentSixAttributeDesc

integer levelWidget
integer levelButton
integer closeLevelWidget
integer closeLevelButton
integer levelPopup

integer qimen_widget
integer qimen_button
integer qimen_text

integer interAbilityPanel
integer array interAbilityWidget
integer array interAbilityLock
integer array interAbilityButton
integer closeInterWidget
integer closeInterButton

string array attrStr
	// UI设置对齐锚点的常量 DzFrameSetPoint achor定义，从0开始
constant integer TOPLEFT= 0
constant integer TOP= 1
constant integer TOPRIGHT= 2
constant integer LEFT= 3
constant integer CENTER= 4
constant integer RIGHT= 5
constant integer BOTTOMLEFT= 6
constant integer BOTTOM= 7
constant integer BOTTOMRIGHT= 8
	
	//DzFrameSetScript  注册ui事件的事件ID
constant integer NONE= 0
constant integer FRAME_EVENT_PRESSED= 1
constant integer FRAME_MOUSE_ENTER= 2
constant integer FRAME_MOUSE_LEAVE= 3
constant integer FRAME_MOUSE_UP= 4
constant integer FRAME_MOUSE_DOWN= 5
constant integer FRAME_MOUSE_WHEEL= 6
constant integer FRAME_FOCUS_ENTER= FRAME_MOUSE_ENTER
constant integer FRAME_FOCUS_LEAVE= FRAME_MOUSE_LEAVE
constant integer FRAME_CHECKBOX_CHECKED= 7
constant integer FRAME_CHECKBOX_UNCHECKED= 8
constant integer FRAME_EDITBOX_TEXT_CHANGED= 9
constant integer FRAME_POPUPMENU_ITEM_CHANGE_START= 10
constant integer FRAME_POPUPMENU_ITEM_CHANGED= 11
constant integer FRAME_MOUSE_DOUBLECLICK= 12
constant integer FRAME_SPRITE_ANIM_UPDATE= 13
	// 最多允许的内化技能数量
constant integer MAX_INTER_ABILITY_COUNT= 6
    // 英雄死亡五次 复活时间减少2秒
integer array heroDeathCounter
integer NormalSeconds= 31536000
integer LeapSeconds= 31622400

integer BJTIME= 28800
integer BASE2015_SEC= 1451606400
integer BASE2015_WEEKDAY= 4

integer array NORMALMON
integer activityPointAddition= 0

boolean udg_bIsInit= false
integer udg_ServerTime= 0
string array WEEKSTR
integer udg_Year= 0
integer udg_Mon= 0
integer udg_Day= 0
integer udg_Hour= 0
integer udg_Min= 0
integer udg_Sec= 0
integer udg_Week= 0
//===============najitest===============
integer unitnumber_lh=0
integer createdunitnumber_lh=0
string StringList_naji
string array Sdummy_naji
trigger array Ttest_naji
player Ptest_naji
integer Ihandle_naji
integer Ibm_naji
integer Itrigger_naji
integer Iquest_naji
integer Iweather_naji
boolean Bfog_naji
boolean Bpause_naji
boolean Bxy_naji
boolean Bid_naji
boolean Bir_naji
boolean array Bcamera_naji
boolean Bpn_naji
boolean Bddm_naji
dialog array Dnaji_naji
button array Button_naji
real Rhandle_naji
real Rdummy_naji
real array Rcamera_naji
region Rworld_naji
group array Gcd_naji
group Guw_naji
group Gms_naji
quest array Q_naji
timer Tcamera_naji
texttag array Tbm_naji
weathereffect array Weather_naji
	//===============najitest===============
integer array tiebucishu
boolean array isproducing
trigger gg_trg_Number14_0= null
trigger gg_trg_Number14_1= null
effect udg_zhemeieff= null
integer array beiMingShaGuai
unit shenghuoling_1
unit shenghuoling_2
unit shenghuoling_3
boolean ling1zhuan
boolean ling2zhuan
boolean ling3zhuan
unit udg_xiantiandanwei
real array biYuAddition
integer array liuHeFlag
integer array selected_attr
constant integer BI_BO_POINT= $FEDC

integer array bibo_kill
boolean array tide_rising
integer array wuwang_status
integer array touKanCounter
integer array touKanIds
boolean array touKanInUse
integer array xuanMingCounter
dialog array ruyangDialog
constant integer ruyangButtonKey= $66556
timer array touKanTimer
integer array wumingBaseCount
integer array wumingCount
integer array wumingStr
integer array wumingAgi
integer array wumingInt
integer array tiaozhanduixiang
integer array menpaiwuqi
boolean array udg_tiaoxuedao
boolean array udg_tiaodugu
boolean array udg_tiaodamo
boolean array udg_tiaozhangsanfeng
dialog tiaozhanwho= DialogCreate()
button b_dugu= null
button b_xuedaozu= null
button b_ronglianlaozu= null
button b_zhucong= null
button b_damozushi= null
button b_sanfeng= null
button b_cancel= null
unit udg_tiaozhanguai= null
integer array zizhiwugong
string array lh_texiao
integer array wuxuedian
integer array dapei
boolean array zizhibool
boolean array jiawuxue
real array udg_shenxingpoyin
unit array udg_shenxingfuzhu
unit array udg_miaoshoufuzhu
real array guixihuixie
integer array shopweapon
integer itemScore= 0
integer antiqueIndex= 0
constant integer antiqueKey= $98988
unit array vipbanlv
item yd_NullTempItem
unit w= null
unit z= null
unit A= null
unitpool B= null
item C= null
itempool D= null
	
unit udg_sixiangdanwei= null
unit udg_xuezhandanwei= null
unit udg_fanweidanwei= null
unit udg_fomiedanwei= null
unit udg_yechadanwei= null
unit udg_miejuedanwei= null
integer array wugongshu
integer array udg_zhemei
	
integer array chief
integer array title0
integer array title1
integer array deputy
integer array master
integer array qimen_status

integer array ateDenom
integer array ateTianShu
boolean array qiankunCd

	// 多通速17门派数组，每位玩家的通关门派
string array manySuccess
	// 单通速17门派数组，每位玩家的通关门派
string array singleSuccess
string initMpSaveStr= "0000000000000000000000000"
string fullMpSaveStr= "1111111111111111111111111"
	
	// 是否第一次难度为最高
boolean topDegreeFlag= false
	// 多通难7奖励额外双倍积分，和商城的叠加
integer array extraDoubleJf
	// 多通奖励移速100
integer array extraSpeed
	
integer array jfQiWu
integer array jfQiWuLimit

	// 战斗力数组，每位玩家的战斗力
integer array udg_zdl
	// 积分数组
integer array udg_jf
	// 每局可用积分80分
integer jf_max= 80
	// 每局已用积分
integer array jf_useMax
	// 通关次数数组
integer array udg_success
	// 当前局获取到的战斗力
integer get_zdl= 0
	// 存档是否已保存
boolean array saveFlag
	// 在线玩家数量
integer udg_wanjiashu= 0
	// 是否是测试版
boolean testVersion= false
	// 奖励的武功伤害
real array bonus_wugong
	// 奖励的爆伤
real array bonus_baoshang
	// 最高伤害，打测试桩
real array max_damage
	// 卖技能书的少林高僧
unit array udg_sellSkillBook
	
integer udg_tiebushancengshu= 0
integer udg_nandu= 0
	
boolean udg_shifoufomie= false
boolean udg_teshushijian= false
boolean udg_yanglao= false
	// 返璞归真模式
boolean udg_fpgz= false
boolean udg_yunyangxianshen= false
boolean udg_sutong= false
boolean array showDamage
boolean array showEffect
dialog udg_index= null
button udg_index0= null
button udg_index1= null
button udg_index2= null
button udg_index3= null
button udg_index4= null
dialog udg_nan= null
button udg_nan0= null
button udg_nan1= null
button udg_nan2= null
button udg_nan3= null
button udg_nan4= null
button udg_nan5= null
button udg_nan7= null
button udg_nan8= null
	// 挑战模式dialog
dialog udg_tiaoZhan= null
button udg_tiaoZhan0= null
button udg_tiaoZhan1= null
button udg_tiaoZhan2= null
button udg_tiaoZhan3= null
button udg_tiaoZhan4= null

integer udg_gudongA= 0
integer udg_gudongB= 0
integer udg_gudongC= 0
integer udg_gudongD= 0
integer array udg_xinggeA
integer array udg_xinggeB
integer array udg_vip
integer array udg_changevip
integer array udg_elevenvip
	// 是否是测试人员
boolean array udg_isTest
	// 是否开启测试码开关，全局存档，后台可以控制
string admin= "0"
// 通知内容，后台控制开局对用户输出内容
string info= ""
	// 积分倍数，全局存档
string jfBeishu= "1"
integer array udg_jianghu
integer array udg_juexue
integer array udg_juenei
integer array udg_canzhang
integer array udg_qiwu
integer array udg_dan
integer array udg_weapon
integer array aidacishu
integer array udg_wuqishu
integer array udg_yifushu
trigger array K
integer array L
integer M= 0
integer O= 16
integer array P
integer array Q
integer array S
integer array T
integer U= 1752196449
integer array V
boolean W= true
integer array X
integer array Y
integer array udg_shuxing
force Z
item d4
group e4
group udg_shanghaidanweizu= null
trigger f4= null
trigger array g4
integer h4= 0
item i4= null
trigger array k4
integer m4= 0
region nn4
constant timer o4= CreateTimer()
integer p4
integer q4
integer r4
integer s4
integer t4
integer array u4
integer array v4
integer array w4
trigger array x4
integer array qiuhun
integer array xidujuexue
integer array zhaoyangguo
integer array linganran
integer array touxiao
integer array bihai
trigger y4
trigger z4
trigger A4
trigger a4
trigger B4
trigger b4
timer C4
integer c4
integer D4= 0
integer array juexuelingwu
real array udg_baojishanghai
real array udg_baojilv
real array shanghaihuifu
real array shaguaihufui
real array shengminghuifu
real array falihuifu
real array udg_lilianxishu
location udg_loc1= null
unit array K4
unit array L4
boolean array udg_hashero
boolean array udg_baoji
boolean array udg_yiwang
unit array udg_hero
	// 江湖等级
integer array jianghuLevel
integer O4= 0
unit array P4
location Q4= null
dialog array R4
button array S4
button array T4
button array U4
button array V4
button array W4
button array X4
integer array Y4
integer array wuxing
integer array jingmai
integer array gengu
integer array fuyuan
integer array danpo
integer array yishu
integer array special_attack
group i7= null
integer array udg_runamen
integer k7= 0
location array m7
integer nn7= 0
integer o7= 0
integer udg_counter1= 0
integer array q7
unit array r7
integer s7= 0
integer udg_boshu= 0
integer array u7
location array v7
group w7= null
integer x7= 0
integer array y7
timerdialog array z7
timer array A7
boolean ShiFouShuaGuai= false
integer B7= 0
unit array b7
unit array C7
integer c7= 0
real array D7
effect array E7
integer array F7
integer array G7
integer H7= 0
integer array I7
button array l7
button array J7
button array J78
button array J79
button array J710
button array J711
dialog array K7
dialog udg_menpaineigong
integer array L7
integer MM7= 0
integer N7= 0
integer array O7
integer array P7
integer array wolfSkinCount
integer array wolfSkinFlag
timer array udg_revivetimer
timerdialog array R7
integer array S7
real T7= 0
real U7= 0
real array udg_MaxDamage
string array udg_menpainame
integer array denomFirst
integer array denomSecond
integer array denomThird
integer array d8
integer array e8
integer array shengwang
integer array g8
integer array h8
integer array i8
integer array j8
unit array k8
unit array udg_boss
boolean array m8
boolean array o8
unit array p8
integer array q8
unit array r8
player s8= null
boolean t8= false
integer array yongdanshu
dialog array v8
button array w8
button array x8
button array y8
button array z8
button array A8
button array a8
button array B8
boolean array b8
boolean array C8
boolean array c8
dialog array D8
integer E8= 0
boolean array F8
boolean array XNKL
boolean array daxia
boolean array G8
boolean array H8
boolean array I8
boolean array l8
integer array J8
integer array K8
integer array xiuxing
integer array MM8
integer array N8
integer array O8
integer array denomFifth
integer array denomFourth
integer array R8
integer array S8
integer array udg_blgg
integer array udg_blwx
integer array udg_bljm
integer array udg_blfy
integer array udg_bldp
integer array udg_blys
integer array udg_jdds
integer array udg_ldds
integer array udg_xbds
integer array udg_bqds
integer array udg_dzds
integer array udg_jwjs
boolean array Z8
boolean array d9
boolean array e9
timer array f9
timerdialog array g9
boolean array h9
integer array i9
group xianglongGroup= null
group k9= null
real m9= 0
real n9= 0
location array o9
integer p9= 0
unit array q9
group r9= null
group s9= null
location array t9
integer u9= 0
boolean array v9
boolean array w9
boolean array x9
boolean array y9
integer array z9
integer array A9
item array a9
location array B9
unit array b9
unit C9= null
location c9= null
unit D9= null
lightning array E9
integer F9= 0
integer array G9
integer array H9
integer array I9
integer array l9
unit array J9
unit array qiankun2hao
unit array qiankun3hao
real array udg_shanghaijiacheng
real array udg_shanghaixishou
real array max_damage_absorb
integer array MM9
real array udg_jueneishxs
real array udg_jueneishjc
integer array udg_jueneiminjie
integer array udg_jueneijxlw
real array udg_jueneibaojilv
integer S9= 0
boolean array T9
integer array LLguaiA
integer array LLguaiE
integer array LLguaiB
integer array LLguaiC
integer array LLguaiD
integer array LLguaiF
integer array LLguaiG
timer array Z9
timerdialog array dd
boolean array ed
timer array fd
timerdialog array gd
boolean hd= false
integer array jd
integer array kd
integer array gudong
integer array nd
integer array od
integer array pd
integer array qd
integer array rd
integer array ud
effect array vd
integer array wugongxiuwei
integer array xd
integer array yd
integer zd= 0
boolean array Ad
integer ad= 0
boolean array Bd
unit array bd
integer array Cd
boolean array cd
integer array Dd
integer array Ed
group array Fd
real array Gd
timer array Hd
integer array Id
integer array ld
integer array Jd
integer array JYd
integer array Kd
integer array Ld
integer array Md
integer array Nd
integer array Od
integer array Pd
integer array Qd
boolean array Rd
integer array Sd
integer array Td
integer array Ud
integer array Vd
integer array Wd
integer array jiuazi
integer Xd= 0
integer Yd= 0
integer Zd= 0
boolean de= false
texttag array ee
integer array shoujiajf
boolean array ge
boolean array he
integer ie= 0
dialog array je
button array ke
button array me
button array ne
button array oe
button array pe
button array qe
button array re
button array rre
button array re9
button array re10
button array re11
button array se
integer array te
integer ue= 5
integer array ve
integer array xe
integer array ye
integer array ze
integer array Ae
integer ae= 0
integer array YaoCao
integer array ShiPin
integer array ZhuangBei
integer array mapLevelReward
integer array ce
boolean array De
boolean array Ee
group Fe= null
rect udg_jail= null
rect udg_yizhan= null
rect udg_xuanmenpai= null
rect udg_tiaozhanqu= null
rect Ge= null
rect He= null
rect Ie= null
rect le= null
rect Je= null
rect Ke= null
rect Le= null
rect Me= null
rect Ne= null
rect Oe= null
rect Pe= null
rect botong= null
rect Qe= null
rect Re= null
rect Se= null
rect Te= null
rect Ue= null
rect Ve= null
rect We= null
rect Xe= null
rect Ye= null
rect Ze= null
rect df= null
rect lh_r= null
rect ef= null
rect ff= null
rect gf= null
rect hf= null
rect jf= null
rect kf= null
rect mf= null
rect nf= null
rect of= null
rect pf= null
rect qf= null
rect rf= null
rect sf= null
rect tf= null
rect uf= null
rect vf= null
rect wf= null
rect xf= null
rect yf= null
rect zf= null
rect Af= null
rect af= null
rect Bf= null
rect bf= null
rect Cf= null
rect cf= null
rect Df= null
rect Ef= null
rect Ff= null
rect Gf= null
rect Hf= null
rect If= null
rect lf= null
rect Jf= null
rect Kf= null
rect Lf= null
rect Mf= null
rect Nf= null
rect Of= null
rect Pf= null
rect Qf= null
rect Rf= null
rect Sf= null
rect Tf= null
rect Uf= null
rect Vf= null
rect Wf= null
rect Xf= null
rect Yf= null
rect Zf= null
rect dg= null
rect eg= null
rect fg= null
rect gg= null
rect hg= null
rect ig= null
rect jg= null
rect kg= null
rect mg= null
rect ng= null
rect og= null
rect pg= null
rect qg= null
rect rg= null
rect sg= null
rect tg= null
rect ug= null
rect vg= null
rect wg= null
rect xg= null
rect yg= null
rect zg= null
rect Ag= null
rect ag= null
rect Bg= null
rect bg= null
rect Cg= null
rect cg= null
rect Dg= null
rect Eg= null
rect Fg= null
rect Gg= null
rect Hg= null
rect Ig= null
rect lg= null
rect Jg= null
rect Kg= null
rect Lg= null
rect Mg= null
rect Ng= null
rect Og= null
rect Pg= null
rect Qg= null
rect Rg= null
rect Sg= null
rect Ug= null
rect Vg= null
rect Wg= null
rect Xg= null
rect Yg= null
rect Zg= null
rect dh= null
rect eh= null
rect fh= null
rect gh= null
rect hh= null
rect udg_liuqiu= null
rect jh= null
rect kh= null
rect mh= null
rect nh= null
rect oh= null
rect ph= null
rect qh= null
rect rh= null
rect sh= null
rect th= null
rect uh= null
rect vh= null
sound wh= null
string xh= "Sound\\Music\\mp3Music\\ArthasTheme.mp3"
string yh= "war3mapImported\\wulindahui3.mp3"
string zh= "Sound\\Music\\mp3Music\\War2IntroMusic.mp3"
sound ah= null
sound Bh= null
sound bh= null
sound Ch= null
sound Dh= null
sound Eh= null
sound Fh= null
sound Gh= null
sound Hh= null
sound Ih= null
trigger lh= null
trigger Jh= null
trigger Kh= null
trigger Mh= null
trigger Nh= null
trigger Oh= null
trigger Ph= null
trigger Qh= null
trigger Rh= null
trigger Th= null
trigger Uh= null
trigger Vh= null
trigger Wh= null
trigger Xh= null
trigger Yh= null
trigger Zh= null
trigger di= null
trigger ei= null
trigger fi= null
trigger gi= null
trigger hi= null
trigger ii= null
trigger ji= null
trigger ki= null
trigger mi= null
trigger ni= null
trigger oi= null
trigger pi= null
trigger ri= null
trigger si= null
trigger ti= null
trigger ui= null
trigger vi= null
trigger wi= null
trigger xi= null
trigger yi= null
trigger zi= null
trigger Ai= null
trigger ai= null
trigger Bi= null
trigger bi= null
trigger Ci= null
trigger ci= null
trigger Di= null
trigger Ei= null
trigger Fi= null
trigger Gi= null
trigger Hi= null
trigger Ii= null
trigger li= null
trigger Ji= null
trigger Ki= null
trigger Li= null
trigger Mi= null
trigger Ni= null
trigger Oi= null
trigger Pi= null
trigger Qi= null
trigger Ri= null
trigger Si= null
trigger Ti= null
trigger Ui= null
trigger Vi= null
trigger Wi= null
trigger Xi= null
trigger Yi= null
trigger Zi= null
trigger dj= null
trigger ej= null
trigger fj= null
trigger gj= null
trigger hj= null
trigger ij= null
trigger jj= null
trigger kj= null
trigger mj= null
trigger nj= null
trigger oj= null
trigger pj= null
trigger qj= null
trigger rj= null
trigger sj= null
trigger tj= null
trigger uj= null
trigger vj= null
trigger wj= null
trigger xj= null
trigger yj= null
trigger zj= null
trigger Aj= null
trigger aj= null
trigger Bj= null
trigger bj= null
trigger Cj= null
trigger cj= null
trigger Dj= null
trigger Ej= null
trigger Fj= null
trigger Gj= null
trigger Hj= null
trigger Ij= null
trigger lj= null
trigger Jj= null
trigger Kj= null
trigger Lj= null
trigger Mj= null
trigger Nj= null
trigger Oj= null
trigger Pj= null
trigger Qj= null
trigger Rj= null
trigger Sj= null
trigger Tj= null
trigger Uj= null
trigger Vj= null
trigger Wj= null
trigger Xj= null
trigger Yj= null
trigger Zj= null
trigger dk= null
trigger ek= null
trigger fk= null
trigger gk= null
trigger hk= null
trigger ik= null
trigger jk= null
trigger kk= null
trigger mk= null
trigger nk= null
trigger ok= null
trigger pk= null
trigger qk= null
trigger rk= null
trigger sk= null
trigger tk= null
trigger uk= null
trigger vk= null
trigger wk= null
trigger xk= null
trigger yk= null
trigger zk= null
trigger Ak= null
trigger ak= null
trigger Bk= null
trigger bk= null
trigger Ck= null
trigger ck= null
trigger Dk= null
trigger Ek= null
trigger Fk= null
trigger Gk= null
trigger Hk= null
trigger Ik= null
trigger lk= null
trigger Jk= null
trigger Kk= null
trigger Lk= null
trigger Mk= null
trigger Nk= null
trigger Ok= null
trigger Pk= null
trigger Qk= null
trigger Rk= null
trigger Sk= null
trigger Tk= null
trigger Uk= null
trigger Vk= null
trigger Wk= null
trigger Xk= null
trigger Yk= null
trigger Zk= null
trigger dm= null
trigger em= null
trigger fm= null
trigger gm= null
trigger hm= null
trigger im= null
trigger jm= null
trigger km= null
trigger mm= null
trigger nm= null
trigger om= null
trigger pm= null
trigger qm= null
trigger rm= null
trigger sm= null
trigger um= null
trigger vm= null
trigger wm= null
trigger xm= null
trigger ym= null
trigger zm= null
trigger Am= null
trigger am= null
trigger Bm= null
trigger bm= null
trigger Cm= null
trigger cm= null
trigger Dm= null
trigger Em= null
trigger Fm= null
trigger Gm= null
trigger Hm= null
trigger Im= null
trigger lm= null
trigger Jm= null
trigger Km= null
trigger Lm= null
trigger Mm= null
trigger Nm= null
trigger Om= null
trigger Pm= null
trigger Qm= null
trigger Rm= null
trigger Sm= null
trigger Tm= null
trigger Um= null
trigger Vm= null
trigger Wm= null
trigger Xm= null
trigger Ym= null
trigger Zm= null
trigger dn= null
trigger en= null
trigger fn= null
trigger gn= null
trigger hn= null
trigger in= null
trigger jn= null
trigger kn= null
trigger mn= null
trigger nn= null
trigger on= null
trigger pn= null
trigger qn= null
trigger sn= null
trigger tn= null
trigger un= null
trigger vn= null
trigger wn= null
trigger xn= null
trigger yn= null
trigger zn= null
trigger An= null
trigger an= null
trigger Bn= null
trigger bn= null
trigger Cn= null
trigger cn= null
trigger Dn= null
trigger En= null
trigger Fn= null
trigger Gn= null
trigger Hn= null
trigger In= null
trigger Jn= null
trigger Kn= null
trigger Ln= null
trigger Mn= null
trigger Nn= null
trigger On= null
trigger Pn= null
trigger Qn= null
trigger Rn= null
trigger Sn= null
trigger Tn= null
trigger Un= null
trigger Vn= null
trigger Wn= null
trigger Xn= null
trigger Yn= null
trigger Zn= null
trigger do= null
trigger eo= null
trigger fo= null
trigger go= null
trigger ho= null
trigger io= null
trigger jo= null
trigger ko= null
trigger mo= null
trigger no= null
trigger oo= null
trigger po= null
trigger qo= null
trigger ro= null
trigger so= null
trigger to= null
trigger uo= null
trigger vo= null
trigger wo= null
trigger xo= null
trigger yo= null
trigger zo= null
trigger Ao= null
trigger ao= null
trigger Bo= null
trigger bo= null
trigger Co= null
trigger co= null
trigger Do= null
trigger Eo= null
trigger Fo= null
trigger Go= null
trigger Ho= null
trigger Io= null
trigger lo= null
trigger Jo= null
trigger Ko= null
trigger Lo= null
trigger Mo= null
trigger No= null
trigger Oo= null
trigger Po= null
trigger Qo= null
trigger Ro= null
trigger So= null
trigger To= null
trigger Uo= null
trigger Vo= null
trigger Wo= null
trigger Yo= null
trigger Zo= null
trigger dp= null
trigger ep= null
trigger fp= null
trigger gp= null
trigger hp= null
trigger jp= null
trigger kp= null
trigger mp= null
trigger np= null
trigger op= null
trigger pp= null
trigger qp= null
trigger sp= null
trigger tp= null
trigger vp= null
trigger wp= null
trigger xp= null
trigger yp= null
trigger zp= null
trigger Ap= null
trigger ap= null
trigger Bp= null
trigger bp= null
trigger Cp= null
trigger cp= null
trigger Dp= null
trigger Ep= null
trigger Fp= null
trigger Gp= null
trigger Hp= null
trigger Ip= null
trigger lp= null
trigger Jp= null
trigger Kp= null
trigger Lp= null
trigger Mp= null
trigger Np= null
trigger Op= null
trigger Pp= null
trigger Qp= null
trigger Rp= null
trigger Sp= null
trigger Tp= null
trigger Up= null
trigger Vp= null
trigger Wp= null
trigger Xp= null
trigger Yp= null
trigger Zp= null
trigger dq= null
trigger eq= null
trigger fq= null
trigger gq= null
trigger hq= null
trigger iq= null
trigger jq= null
trigger kq= null
trigger mq= null
trigger nq= null
trigger oq= null
trigger pq= null
trigger qq= null
trigger rq= null
trigger sq= null
trigger tq= null
trigger uq= null
trigger vq= null
trigger xq= null
trigger Cq= null
trigger cq= null
trigger Dq= null
trigger Eq= null
trigger Fq= null
trigger Gq= null
trigger Hq= null
trigger Iq= null
trigger lq= null
trigger Jq= null
trigger Kq= null
trigger Lq= null
trigger Mq= null
trigger Nq= null
trigger Oq= null
trigger Pq= null
trigger Qq= null
trigger Rq= null
trigger Sq= null
trigger Tq= null
trigger Uq= null
trigger Wq= null
trigger Xq= null
trigger Yq= null
trigger Zq= null
trigger dr= null
trigger er= null
trigger fr= null
trigger gr= null
trigger hr= null
trigger ir= null
trigger jr= null
trigger kr= null
trigger mr= null
trigger nr= null
trigger pr= null
trigger qr= null
trigger rr= null
trigger sr= null
trigger tr= null
trigger ur= null
trigger vr= null
trigger wr= null
trigger xr= null
trigger yr= null
trigger zr= null
trigger Ar= null
trigger ar= null
trigger Br= null
trigger br= null
trigger Cr= null
trigger cr= null
trigger Dr= null
trigger Er= null
trigger Fr= null
trigger Gr= null
trigger Hr= null
trigger Ir= null
trigger lr= null
trigger Jr= null
trigger Kr= null
trigger Lr= null
trigger Mr= null
trigger Nr= null
trigger Pr= null
trigger Qr= null
trigger Rr= null
trigger Sr= null
trigger Tr= null
trigger Ur= null
trigger Vr= null
trigger Wr= null
trigger Xr= null
trigger Yr= null
trigger Zr= null
trigger ds= null
trigger es= null
trigger fs= null
trigger gs= null
trigger hs= null
trigger is= null
trigger js= null
trigger ks= null
trigger ms= null
trigger ns= null
trigger os= null
trigger ps= null
trigger qs= null
trigger rs= null
trigger ss= null
trigger ts= null
trigger vs= null
trigger cs= null
trigger Ds= null
trigger Es= null
trigger Fs= null
trigger Gs= null
trigger Hs= null
trigger Is= null
trigger ls= null
trigger Js= null
trigger Ks= null
unit Ls= null
unit udg_ZhengPaiWL= null
unit GU_DONG_SHANG_REN= null
unit BAO_SHI_SHANG_REN= null
unit PING_YI_ZHI= null
unit SHI_PO_TIAN= null
unit Ns= null
unit Os= null
unit Ps= null
unit Qs= null
unit Rs= null
unit tianXiaMenPai2= null
unit tianXiaMenPai3= null
unit LanXin= null
unit XuanJin= null
unit kongYao= null
unit qiXiao= null
unit Ss= null
unit Ts= null
unit Us= null
unit Vs= null
unit Ws= null
unit Xs= null
unit Ys= null
unit Zs= null
unit ft= null
unit gt= null
unit ht= null
unit jt= null
unit kt= null
unit nt= null
unit ot= null
unit ut= null
unit vt= null
unit xt= null
unit yt= null
unit zt= null
unit At= null
unit Bt= null
unit Ct= null
unit ct= null
unit Dt= null
unit Et= null
unit Ft= null
destructable Gt= null
trigger Ht= null
trigger It= null
trigger Jt= null
integer Kt= 0
integer Lt= 0
integer array Mt
integer array Nt
integer Ot= 0
unit array Pt
unit array Qt
real array Rt
real array St
real array Tt
real array Ut
real array Vt
real array Wt
real array Xt
real array Yt
real array Zt
real fu= .0
real gu= .0
boolexpr ju= null

trigger l__library_init

//JASSHelper struct globals:
constant integer si__Frame=1
integer si__Frame_F=0
integer si__Frame_I=0
integer array si__Frame_V
hashtable s__Frame_HT= InitHashtable()
integer s__Frame_num= 0
integer array s__Frame_id
boolean array s__Frame_isShow
boolean array s__Frame_isEnable
boolean array s__Frame_hover
constant integer si__ImageButton=2
integer si__ImageButton_F=0
integer si__ImageButton_I=0
integer array si__ImageButton_V
integer array s__ImageButton_image
integer array s__ImageButton_button
constant integer si__ModSpeed=3
timer s__ModSpeed_tm= CreateTimer()
integer s__ModSpeed_instanceMaxCount= 0
integer array s__ModSpeed_prev
integer array s__ModSpeed_next
unit array s__ModSpeed_u
real array s__ModSpeed_lastX
real array s__ModSpeed_lastY
real array s__ModSpeed_speed
boolean array s__ModSpeed_lead
real s__ModSpeed_x
real s__ModSpeed_y
real s__ModSpeed_dx
real s__ModSpeed_dy
real s__ModSpeed_dist
real s__ModSpeed_rate
constant integer si__YDWEStringFormula__Inventory=4
integer si__YDWEStringFormula__Inventory_F=0
integer si__YDWEStringFormula__Inventory_I=0
integer array si__YDWEStringFormula__Inventory_V
constant integer si__YDWEStringFormula__StringTable=5
constant integer si__YDWEStringFormula__ItemIdMatrix=6
integer s__YDWEStringFormula__ItemIdMatrix_Data
integer s__YDWEStringFormula__ItemIdMatrix_Total= 1
integer array s__YDWEStringFormula__ItemIdMatrix_itemId
string array s__YDWEStringFormula__ItemIdMatrix_keyStr
integer array s__YDWEStringFormula__ItemIdMatrix_keyLen
constant integer si__YDWEStringFormula__FormulaMatrix=7
integer s__YDWEStringFormula__FormulaMatrix_Data
integer s__YDWEStringFormula__FormulaMatrix_Total= 1
string array s__YDWEStringFormula__FormulaMatrix_formula
integer array s__YDWEStringFormula__FormulaMatrix_segmLen
string array s__YDWEStringFormula__FormulaMatrix_model
string array s__YDWEStringFormula__FormulaMatrix_message
integer array s__YDWEStringFormula__FormulaMatrix_chance
boolean array s__YDWEStringFormula__FormulaMatrix_delete
constant integer si__YDWEStringFormula__Sorting=8
integer si__YDWEStringFormula__Sorting_F=0
integer si__YDWEStringFormula__Sorting_I=0
integer array si__YDWEStringFormula__Sorting_V
integer array s___YDWEStringFormula__Sorting_stack
constant integer s___YDWEStringFormula__Sorting_stack_size=8
integer array s__YDWEStringFormula__Sorting_stack
integer array s___YDWEStringFormula__Sorting_count
constant integer s___YDWEStringFormula__Sorting_count_size=8
integer array s__YDWEStringFormula__Sorting_count
integer array s__YDWEStringFormula__Sorting_total
string array s__YDWEStringFormula__Sorting_char
constant integer si__YDWETimerPattern__YDVector3=11
integer si__YDWETimerPattern__YDVector3_F=0
integer si__YDWETimerPattern__YDVector3_I=0
integer array si__YDWETimerPattern__YDVector3_V
real array s__YDWETimerPattern__YDVector3_x
real array s__YDWETimerPattern__YDVector3_y
real array s__YDWETimerPattern__YDVector3_z
constant integer si__YDWETimerPattern__Thread=12
integer si__YDWETimerPattern__Thread_F=0
integer si__YDWETimerPattern__Thread_I=0
integer array si__YDWETimerPattern__Thread_V
integer array s__YDWETimerPattern__Thread_des
integer array s__YDWETimerPattern__Thread_pos
integer array s__YDWETimerPattern__Thread_vel
unit array s__YDWETimerPattern__Thread_caster
unit array s__YDWETimerPattern__Thread_source
unit array s__YDWETimerPattern__Thread_target
unit array s__YDWETimerPattern__Thread_obj
real array s__YDWETimerPattern__Thread_ac
real array s__YDWETimerPattern__Thread_bc
real array s__YDWETimerPattern__Thread_dist
real array s__YDWETimerPattern__Thread_step
real array s__YDWETimerPattern__Thread_amount
integer array s__YDWETimerPattern__Thread_switch
integer array s__YDWETimerPattern__Thread_follow
integer array s__YDWETimerPattern__Thread_unitid
integer array s__YDWETimerPattern__Thread_skills
integer array s__YDWETimerPattern__Thread_order
integer array s__YDWETimerPattern__Thread_level
string array s__YDWETimerPattern__Thread_dsfx
string array s__YDWETimerPattern__Thread_gsfx
string array s__YDWETimerPattern__Thread_wsfx
string array s__YDWETimerPattern__Thread_part
boolean array s__YDWETimerPattern__Thread_recycle
boolean array s__YDWETimerPattern__Thread_killdest
boolean array s__YDWETimerPattern__Thread_volume
group array s__YDWETimerPattern__Thread_g
timer array s__YDWETimerPattern__Thread_t
constant integer si__YDWETimerPattern__Parabola=13
constant integer si__YDWETimerPattern__Linear=14
constant integer si__YDWETimerPattern__Deceleration=15
constant integer si__DaPei=16
integer si__DaPei_F=0
integer si__DaPei_I=0
integer array si__DaPei_V
integer array s__DaPei_wugongid
integer array s__DaPei_dapeixiaoguo
real array s__DaPei_shxishu
real array s__DaPei_r
constant integer si__ZiZhiWuGong=17
integer si__ZiZhiWuGong_F=0
integer si__ZiZhiWuGong_I=0
integer array si__ZiZhiWuGong_V
integer array s__ZiZhiWuGong_xishu
integer array s__ZiZhiWuGong_range
integer array s__ZiZhiWuGong_texiao
integer array s__ZiZhiWuGong_dapeishu
integer array s__ZiZhiWuGong_scrate
string array s__ZiZhiWuGong_name
constant integer si__ShopWeapon=18
integer si__ShopWeapon_F=0
integer si__ShopWeapon_I=0
integer array si__ShopWeapon_V
integer array s__ShopWeapon_min_xiuxing
integer array s__ShopWeapon_id
boolean array s__ShopWeapon_zhuanshu
integer array si__YDWEStringFormula__Inventory_type
trigger array st__YDWEStringFormula__Inventory_onDestroy
integer array si__YDWETimerPattern__Thread_type
trigger array st__YDWETimerPattern__Thread_onDestroy
trigger st__Frame_onDestroy
trigger st__YDWEStringFormula__Sorting_onDestroy
trigger st__DaPei_onDestroy
trigger st__DaPei_XiaoGuoShuoMing
trigger st__ZiZhiWuGong_create
trigger st__ZiZhiWuGong_onDestroy
trigger st__ShopWeapon_onDestroy
trigger st__ShopWeapon_PickUpWeapon
trigger array st___prototype4
integer f__arg_integer1
integer f__arg_integer2
integer f__arg_integer3
integer f__arg_integer4
integer f__arg_integer5
unit f__arg_unit1
item f__arg_item1
real f__arg_real1
integer f__arg_this
string f__result_string
integer f__result_integer

endglobals
	native EXGetUnitAbility takes unit u, integer abilcode returns ability
	native EXGetUnitAbilityByIndex takes unit u, integer index returns ability
	native EXGetAbilityId takes ability abil returns integer
	native EXGetAbilityState takes ability abil, integer state_type returns real
	native EXSetAbilityState takes ability abil, integer state_type, real value returns boolean
	native EXGetAbilityDataReal takes ability abil, integer level, integer data_type returns real
	native EXSetAbilityDataReal takes ability abil, integer level, integer data_type, real value returns boolean
	native EXGetAbilityDataInteger takes ability abil, integer level, integer data_type returns integer
	native EXSetAbilityDataInteger takes ability abil, integer level, integer data_type, integer value returns boolean
	native EXGetAbilityDataString takes ability abil, integer level, integer data_type returns string
	native EXSetAbilityDataString takes ability abil, integer level, integer data_type, string value returns boolean
	native EXSetAbilityAEmeDataA takes ability abil, integer unitid returns boolean
	native EXGetItemDataString takes integer itemcode, integer data_type returns string
	native EXSetItemDataString takes integer itemcode, integer data_type, string value returns boolean
native DzGetMouseTerrainX takes nothing returns real
native DzGetMouseTerrainY takes nothing returns real
native DzGetMouseTerrainZ takes nothing returns real
native DzIsMouseOverUI takes nothing returns boolean
native DzGetMouseX takes nothing returns integer
native DzGetMouseY takes nothing returns integer
native DzGetMouseXRelative takes nothing returns integer
native DzGetMouseYRelative takes nothing returns integer
native DzSetMousePos takes integer x, integer y returns nothing
native DzTriggerRegisterMouseEvent takes trigger trig, integer btn, integer status, boolean sync, string func returns nothing
native DzTriggerRegisterMouseEventByCode takes trigger trig, integer btn, integer status, boolean sync, code funcHandle returns nothing
native DzTriggerRegisterKeyEvent takes trigger trig, integer key, integer status, boolean sync, string func returns nothing
native DzTriggerRegisterKeyEventByCode takes trigger trig, integer key, integer status, boolean sync, code funcHandle returns nothing
native DzTriggerRegisterMouseWheelEvent takes trigger trig, boolean sync, string func returns nothing
native DzTriggerRegisterMouseWheelEventByCode takes trigger trig, boolean sync, code funcHandle returns nothing
native DzTriggerRegisterMouseMoveEvent takes trigger trig, boolean sync, string func returns nothing
native DzTriggerRegisterMouseMoveEventByCode takes trigger trig, boolean sync, code funcHandle returns nothing
native DzGetTriggerKey takes nothing returns integer
native DzGetWheelDelta takes nothing returns integer
native DzIsKeyDown takes integer iKey returns boolean
native DzGetTriggerKeyPlayer takes nothing returns player
native DzGetWindowWidth takes nothing returns integer
native DzGetWindowHeight takes nothing returns integer
native DzGetWindowX takes nothing returns integer
native DzGetWindowY takes nothing returns integer
native DzTriggerRegisterWindowResizeEvent takes trigger trig, boolean sync, string func returns nothing
native DzTriggerRegisterWindowResizeEventByCode takes trigger trig, boolean sync, code funcHandle returns nothing
native DzIsWindowActive takes nothing returns boolean
native DzDestructablePosition takes destructable d, real x, real y returns nothing
native DzSetUnitPosition takes unit whichUnit, real x, real y returns nothing
native DzExecuteFunc takes string funcName returns nothing
native DzGetUnitUnderMouse takes nothing returns unit
native DzSetUnitTexture takes unit whichUnit, string path, integer texId returns nothing
native DzSetMemory takes integer address, real value returns nothing
native DzSetUnitID takes unit whichUnit, integer id returns nothing
native DzSetUnitModel takes unit whichUnit, string path returns nothing
native DzSetWar3MapMap takes string map returns nothing
native DzGetLocale takes nothing returns string
native DzGetUnitNeededXP takes unit whichUnit, integer level returns integer
native DzTriggerRegisterSyncData takes trigger trig, string prefix, boolean server returns nothing
native DzSyncData takes string prefix, string data returns nothing
native DzGetTriggerSyncData takes nothing returns string
native DzGetTriggerSyncPlayer takes nothing returns player
native DzFrameHideInterface takes nothing returns nothing
native DzFrameEditBlackBorders takes real upperHeight, real bottomHeight returns nothing
native DzFrameGetPortrait takes nothing returns integer
native DzFrameGetMinimap takes nothing returns integer
native DzFrameGetCommandBarButton takes integer row, integer column returns integer
native DzFrameGetHeroBarButton takes integer buttonId returns integer
native DzFrameGetHeroHPBar takes integer buttonId returns integer
native DzFrameGetHeroManaBar takes integer buttonId returns integer
native DzFrameGetItemBarButton takes integer buttonId returns integer
native DzFrameGetMinimapButton takes integer buttonId returns integer
native DzFrameGetUpperButtonBarButton takes integer buttonId returns integer
native DzFrameGetTooltip takes nothing returns integer 
native DzFrameGetChatMessage takes nothing returns integer 
native DzFrameGetUnitMessage takes nothing returns integer 
native DzFrameGetTopMessage takes nothing returns integer 
native DzGetColor takes integer r, integer g, integer b, integer a returns integer
native DzFrameSetUpdateCallback takes string func returns nothing
native DzFrameSetUpdateCallbackByCode takes code funcHandle returns nothing
native DzFrameShow takes integer frame, boolean enable returns nothing
native DzCreateFrame takes string frame, integer parent, integer id returns integer
native DzCreateSimpleFrame takes string frame, integer parent, integer id returns integer
native DzDestroyFrame takes integer frame returns nothing
native DzLoadToc takes string fileName returns nothing
native DzFrameSetPoint takes integer frame, integer point, integer relativeFrame, integer relativePoint, real x, real y returns nothing
native DzFrameSetAbsolutePoint takes integer frame, integer point, real x, real y returns nothing
native DzFrameClearAllPoints takes integer frame returns nothing
native DzFrameSetEnable takes integer name, boolean enable returns nothing
native DzFrameSetScript takes integer frame, integer eventId, string func, boolean sync returns nothing
native DzFrameSetScriptByCode takes integer frame, integer eventId, code funcHandle, boolean sync returns nothing
native DzGetTriggerUIEventPlayer takes nothing returns player
native DzGetTriggerUIEventFrame takes nothing returns integer
native DzFrameFindByName takes string name, integer id returns integer
native DzSimpleFrameFindByName takes string name, integer id returns integer
native DzSimpleFontStringFindByName takes string name, integer id returns integer
native DzSimpleTextureFindByName takes string name, integer id returns integer
native DzGetGameUI takes nothing returns integer
native DzClickFrame takes integer frame returns nothing
native DzSetCustomFovFix takes real value returns nothing
native DzEnableWideScreen takes boolean enable returns nothing
native DzFrameSetText takes integer frame, string text returns nothing
native DzFrameGetText takes integer frame returns string
native DzFrameSetTextSizeLimit takes integer frame, integer size returns nothing
native DzFrameGetTextSizeLimit takes integer frame returns integer
native DzFrameSetTextColor takes integer frame, integer color returns nothing
native DzGetMouseFocus takes nothing returns integer
native DzFrameSetAllPoints takes integer frame, integer relativeFrame returns boolean
native DzFrameSetFocus takes integer frame, boolean enable returns boolean
native DzFrameSetModel takes integer frame, string modelFile, integer modelType, integer flag returns nothing
native DzFrameGetEnable takes integer frame returns boolean
native DzFrameSetAlpha takes integer frame, integer alpha returns nothing
native DzFrameGetAlpha takes integer frame returns integer
native DzFrameSetAnimate takes integer frame, integer animId, boolean autocast returns nothing
native DzFrameSetAnimateOffset takes integer frame, real offset returns nothing
native DzFrameSetTexture takes integer frame, string texture, integer flag returns nothing
native DzFrameSetScale takes integer frame, real scale returns nothing
native DzFrameSetTooltip takes integer frame, integer tooltip returns nothing
native DzFrameCageMouse takes integer frame, boolean enable returns nothing
native DzFrameGetValue takes integer frame returns real
native DzFrameSetMinMaxValue takes integer frame, real minValue, real maxValue returns nothing
native DzFrameSetStepValue takes integer frame, real step returns nothing
native DzFrameSetValue takes integer frame, real value returns nothing
native DzFrameSetSize takes integer frame, real w, real h returns nothing
native DzCreateFrameByTagName takes string frameType, string name, integer parent, string template, integer id returns integer
native DzFrameSetVertexColor takes integer frame, integer color returns nothing
native DzOriginalUIAutoResetPoint takes boolean enable returns nothing
native DzFrameSetPriority takes integer frame, integer priority returns nothing
native DzFrameSetParent takes integer frame, integer parent returns nothing
native DzFrameGetHeight takes integer frame returns real
native DzFrameSetFont takes integer frame, string fileName, real height, integer flag returns nothing
native DzFrameGetParent takes integer frame returns integer
native DzFrameSetTextAlignment takes integer frame, integer align returns nothing
native DzFrameGetName takes integer frame returns string
native EXSetUnitArrayString takes integer uid, integer id,integer n,string name returns boolean
native EXSetUnitInteger takes integer uid, integer id,integer n returns boolean
native DzAPI_Map_SaveServerValue takes player whichPlayer, string key, string value returns boolean
native DzAPI_Map_GetServerValue takes player whichPlayer, string key returns string
native DzAPI_Map_Ladder_SetStat takes player whichPlayer, string key, string value returns nothing
native DzAPI_Map_IsRPGLadder takes nothing returns boolean
native DzAPI_Map_GetGameStartTime takes nothing returns integer
native DzAPI_Map_Stat_SetStat takes player whichPlayer, string key, string value returns nothing
native DzAPI_Map_GetMatchType takes nothing returns integer
native DzAPI_Map_Ladder_SetPlayerStat takes player whichPlayer, string key, string value returns nothing
native DzAPI_Map_GetServerValueErrorCode takes player whichPlayer returns integer
native DzAPI_Map_GetLadderLevel takes player whichPlayer returns integer
native DzAPI_Map_IsRedVIP takes player whichPlayer returns boolean
native DzAPI_Map_IsBlueVIP takes player whichPlayer returns boolean
native DzAPI_Map_GetLadderRank takes player whichPlayer returns integer
native DzAPI_Map_GetMapLevelRank takes player whichPlayer returns integer
native DzAPI_Map_GetGuildName takes player whichPlayer returns string
native DzAPI_Map_GetGuildRole takes player whichPlayer returns integer
native DzAPI_Map_IsRPGLobby takes nothing returns boolean
native DzAPI_Map_GetMapLevel takes player whichPlayer returns integer
native DzAPI_Map_MissionComplete takes player whichPlayer, string key, string value returns nothing
native DzAPI_Map_GetActivityData takes nothing returns string
native DzAPI_Map_GetMapConfig takes string key returns string
native DzAPI_Map_HasMallItem takes player whichPlayer, string key returns boolean
native DzAPI_Map_SavePublicArchive takes player whichPlayer, string key, string value returns boolean
native DzAPI_Map_GetPublicArchive takes player whichPlayer, string key returns string
native DzAPI_Map_UseConsumablesItem takes player whichPlayer, string key returns nothing
native DzAPI_Map_OrpgTrigger takes player whichPlayer, string key returns nothing
native DzAPI_Map_GetServerArchiveDrop takes player whichPlayer, string key returns string
native DzAPI_Map_GetServerArchiveEquip takes player whichPlayer, string key returns integer
native RequestExtraIntegerData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns integer
native RequestExtraBooleanData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns boolean
native RequestExtraStringData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns string
native RequestExtraRealData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns real
native DzAPI_Map_GetPlatformVIP takes player whichPlayer returns integer
native EXGetEventDamageData takes integer edd_type returns integer
native EXSetEventDamage takes real amount returns boolean
native EXGetEffectX takes effect e returns real
native EXGetEffectY takes effect e returns real
native EXGetEffectZ takes effect e returns real
native EXSetEffectXY takes effect e, real x, real y returns nothing
native EXSetEffectZ takes effect e, real z returns nothing
native EXGetEffectSize takes effect e returns real
native EXSetEffectSize takes effect e, real size returns nothing
native EXEffectMatRotateX takes effect e, real angle returns nothing
native EXEffectMatRotateY takes effect e, real angle returns nothing
native EXEffectMatRotateZ takes effect e, real angle returns nothing
native EXEffectMatScale takes effect e, real x, real y, real z returns nothing
native EXEffectMatReset takes effect e returns nothing
native EXSetEffectSpeed takes effect e, real speed returns nothing
native EXExecuteScript takes string script returns string


//Generated method caller for Frame.onDestroy
function sc__Frame_onDestroy takes integer this returns nothing
            if s__Frame_id[this] != 0 then
                call DzDestroyFrame(s__Frame_id[this])
            endif
            set s__Frame_id[this]=0
endfunction

//Generated allocator of Frame
function s__Frame__allocate takes nothing returns integer
 local integer this=si__Frame_F
    if (this!=0) then
        set si__Frame_F=si__Frame_V[this]
    else
        set si__Frame_I=si__Frame_I+1
        set this=si__Frame_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__Frame_id[this]= 0
   set s__Frame_isShow[this]= true
   set s__Frame_isEnable[this]= true
   set s__Frame_hover[this]= false
    set si__Frame_V[this]=-1
 return this
endfunction

//Generated destructor of Frame
function sc__Frame_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Frame_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__Frame_onDestroy)
    set si__Frame_V[this]=si__Frame_F
    set si__Frame_F=this
endfunction

//Generated method caller for ShopWeapon.onDestroy
function sc__ShopWeapon_onDestroy takes integer this returns nothing
		set s__ShopWeapon_min_xiuxing[this]=0
		set s__ShopWeapon_id[this]=0
endfunction

//Generated method caller for ShopWeapon.PickUpWeapon
function sc__ShopWeapon_PickUpWeapon takes integer this,unit u,item it returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    set f__arg_item1=it
    call TriggerEvaluate(st__ShopWeapon_PickUpWeapon)
endfunction

//Generated allocator of ShopWeapon
function s__ShopWeapon__allocate takes nothing returns integer
 local integer this=si__ShopWeapon_F
    if (this!=0) then
        set si__ShopWeapon_F=si__ShopWeapon_V[this]
    else
        set si__ShopWeapon_I=si__ShopWeapon_I+1
        set this=si__ShopWeapon_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__ShopWeapon_zhuanshu[this]= false
    set si__ShopWeapon_V[this]=-1
 return this
endfunction

//Generated destructor of ShopWeapon
function sc__ShopWeapon_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__ShopWeapon_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__ShopWeapon_onDestroy)
    set si__ShopWeapon_V[this]=si__ShopWeapon_F
    set si__ShopWeapon_F=this
endfunction

//Generated method caller for ZiZhiWuGong.create
function sc__ZiZhiWuGong_create takes integer xishu,integer range,integer texiao,integer dapeishu,integer scrate returns integer
    set f__arg_integer1=xishu
    set f__arg_integer2=range
    set f__arg_integer3=texiao
    set f__arg_integer4=dapeishu
    set f__arg_integer5=scrate
    call TriggerEvaluate(st__ZiZhiWuGong_create)
 return f__result_integer
endfunction

//Generated method caller for ZiZhiWuGong.onDestroy
function sc__ZiZhiWuGong_onDestroy takes integer this returns nothing
		set s__ZiZhiWuGong_xishu[this]=0
		set s__ZiZhiWuGong_range[this]=0
		set s__ZiZhiWuGong_texiao[this]=0
		set s__ZiZhiWuGong_dapeishu[this]=0
		set s__ZiZhiWuGong_scrate[this]=0
endfunction

//Generated allocator of ZiZhiWuGong
function s__ZiZhiWuGong__allocate takes nothing returns integer
 local integer this=si__ZiZhiWuGong_F
    if (this!=0) then
        set si__ZiZhiWuGong_F=si__ZiZhiWuGong_V[this]
    else
        set si__ZiZhiWuGong_I=si__ZiZhiWuGong_I+1
        set this=si__ZiZhiWuGong_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__ZiZhiWuGong_name[this]= "自创武功"
    set si__ZiZhiWuGong_V[this]=-1
 return this
endfunction

//Generated destructor of ZiZhiWuGong
function sc__ZiZhiWuGong_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__ZiZhiWuGong_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__ZiZhiWuGong_onDestroy)
    set si__ZiZhiWuGong_V[this]=si__ZiZhiWuGong_F
    set si__ZiZhiWuGong_F=this
endfunction

//Generated method caller for DaPei.onDestroy
function sc__DaPei_onDestroy takes integer this returns nothing
		set s__DaPei_wugongid[this]=0
		set s__DaPei_dapeixiaoguo[this]=0
		set s__DaPei_shxishu[this]=0
endfunction

//Generated method caller for DaPei.XiaoGuoShuoMing
function sc__DaPei_XiaoGuoShuoMing takes integer this returns string
  local string s= ""
		set s=s + "+" + GetAbilityName(s__DaPei_wugongid[this]) + "："
		if s__DaPei_dapeixiaoguo[this] != 2 then
			set s=s + "伤害+" + I2S(R2I(s__DaPei_r[this] * 100)) + "%"
		else
			if R2I(s__DaPei_r[this]) == 1 then
				set s=s + "几率造成内伤"
			elseif R2I(s__DaPei_r[this]) == 2 then
				set s=s + "几率造成走火入魔"
			elseif R2I(s__DaPei_r[this]) == 3 then
				set s=s + "几率造成流血"
			elseif R2I(s__DaPei_r[this]) == 4 then
				set s=s + "几率造成混乱"
			elseif R2I(s__DaPei_r[this]) == 5 then
				set s=s + "几率造成昏迷"
			elseif R2I(s__DaPei_r[this]) == 6 then
				set s=s + "几率造成重伤"
			elseif R2I(s__DaPei_r[this]) == 7 then
				set s=s + "几率造成血流不止"
			elseif R2I(s__DaPei_r[this]) == 8 then
				set s=s + "几率造成麻痹"
			elseif R2I(s__DaPei_r[this]) == 9 then
				set s=s + "几率造成破防"
			elseif R2I(s__DaPei_r[this]) == 10 then
				set s=s + "几率造成神经错乱"
			elseif R2I(s__DaPei_r[this]) == 11 then
				set s=s + "几率造成封穴"
			elseif R2I(s__DaPei_r[this]) == 12 then
				set s=s + "几率造成穴位全封"
			elseif R2I(s__DaPei_r[this]) == 13 then
				set s=s + "几率造成中毒"
			endif
		endif
		return s
endfunction

//Generated allocator of DaPei
function s__DaPei__allocate takes nothing returns integer
 local integer this=si__DaPei_F
    if (this!=0) then
        set si__DaPei_F=si__DaPei_V[this]
    else
        set si__DaPei_I=si__DaPei_I+1
        set this=si__DaPei_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__DaPei_shxishu[this]= 0.
    set si__DaPei_V[this]=-1
 return this
endfunction

//Generated destructor of DaPei
function sc__DaPei_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__DaPei_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__DaPei_onDestroy)
    set si__DaPei_V[this]=si__DaPei_F
    set si__DaPei_F=this
endfunction

//Generated allocator of ImageButton
function s__ImageButton__allocate takes nothing returns integer
 local integer this=si__ImageButton_F
    if (this!=0) then
        set si__ImageButton_F=si__ImageButton_V[this]
    else
        set si__ImageButton_I=si__ImageButton_I+1
        set this=si__ImageButton_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__ImageButton_V[this]=-1
 return this
endfunction

//Generated destructor of ImageButton
function s__ImageButton_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__ImageButton_V[this]!=-1) then
        return
    endif
    set si__ImageButton_V[this]=si__ImageButton_F
    set si__ImageButton_F=this
endfunction

//Generated method caller for YDWEStringFormula__Inventory.onDestroy
function sc__YDWEStringFormula__Inventory_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__YDWEStringFormula__Inventory_onDestroy[4])
endfunction

//Generated allocator of YDWEStringFormula__Inventory
function s__YDWEStringFormula__Inventory__allocate takes nothing returns integer
 local integer this=si__YDWEStringFormula__Inventory_F
    if (this!=0) then
        set si__YDWEStringFormula__Inventory_F=si__YDWEStringFormula__Inventory_V[this]
    else
        set si__YDWEStringFormula__Inventory_I=si__YDWEStringFormula__Inventory_I+1
        set this=si__YDWEStringFormula__Inventory_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__YDWEStringFormula__Inventory_type[this]=4
    set si__YDWEStringFormula__Inventory_V[this]=-1
 return this
endfunction

//Generated destructor of YDWEStringFormula__Inventory
function sc__YDWEStringFormula__Inventory_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__YDWEStringFormula__Inventory_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__YDWEStringFormula__Inventory_onDestroy[si__YDWEStringFormula__Inventory_type[this]])
    set si__YDWEStringFormula__Inventory_V[this]=si__YDWEStringFormula__Inventory_F
    set si__YDWEStringFormula__Inventory_F=this
endfunction

//Generated method caller for YDWETimerPattern__Thread.onDestroy
function sc__YDWETimerPattern__Thread_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__YDWETimerPattern__Thread_onDestroy[12])
endfunction

//Generated allocator of YDWETimerPattern__Thread
function s__YDWETimerPattern__Thread__allocate takes nothing returns integer
 local integer this=si__YDWETimerPattern__Thread_F
    if (this!=0) then
        set si__YDWETimerPattern__Thread_F=si__YDWETimerPattern__Thread_V[this]
    else
        set si__YDWETimerPattern__Thread_I=si__YDWETimerPattern__Thread_I+1
        set this=si__YDWETimerPattern__Thread_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__YDWETimerPattern__Thread_type[this]=12
    set si__YDWETimerPattern__Thread_V[this]=-1
 return this
endfunction

//Generated destructor of YDWETimerPattern__Thread
function sc__YDWETimerPattern__Thread_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__YDWETimerPattern__Thread_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__YDWETimerPattern__Thread_onDestroy[si__YDWETimerPattern__Thread_type[this]])
    set si__YDWETimerPattern__Thread_V[this]=si__YDWETimerPattern__Thread_F
    set si__YDWETimerPattern__Thread_F=this
endfunction

//Generated allocator of YDWETimerPattern__YDVector3
function s__YDWETimerPattern__YDVector3__allocate takes nothing returns integer
 local integer this=si__YDWETimerPattern__YDVector3_F
    if (this!=0) then
        set si__YDWETimerPattern__YDVector3_F=si__YDWETimerPattern__YDVector3_V[this]
    else
        set si__YDWETimerPattern__YDVector3_I=si__YDWETimerPattern__YDVector3_I+1
        set this=si__YDWETimerPattern__YDVector3_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__YDWETimerPattern__YDVector3_V[this]=-1
 return this
endfunction

//Generated destructor of YDWETimerPattern__YDVector3
function s__YDWETimerPattern__YDVector3_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__YDWETimerPattern__YDVector3_V[this]!=-1) then
        return
    endif
    set si__YDWETimerPattern__YDVector3_V[this]=si__YDWETimerPattern__YDVector3_F
    set si__YDWETimerPattern__YDVector3_F=this
endfunction

//Generated method caller for YDWEStringFormula__Sorting.onDestroy
function sc__YDWEStringFormula__Sorting_onDestroy takes integer this returns nothing
            local integer i= 0
            loop
                exitwhen i == s___YDWEStringFormula__Sorting_stack_size
                set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]=0
                set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=0
                set i=i + 1
            endloop
            set s__YDWEStringFormula__Sorting_char[this]=""
endfunction

//Generated allocator of YDWEStringFormula__Sorting
function s__YDWEStringFormula__Sorting__allocate takes nothing returns integer
 local integer this=si__YDWEStringFormula__Sorting_F
    if (this!=0) then
        set si__YDWEStringFormula__Sorting_F=si__YDWEStringFormula__Sorting_V[this]
    else
        set si__YDWEStringFormula__Sorting_I=si__YDWEStringFormula__Sorting_I+1
        set this=si__YDWEStringFormula__Sorting_I
    endif
    if (this>1022) then
        return 0
    endif
    set s__YDWEStringFormula__Sorting_stack[this]=(this-1)*8
    set s__YDWEStringFormula__Sorting_count[this]=(this-1)*8
   set s__YDWEStringFormula__Sorting_total[this]= 7
    set si__YDWEStringFormula__Sorting_V[this]=-1
 return this
endfunction

//Generated destructor of YDWEStringFormula__Sorting
function sc__YDWEStringFormula__Sorting_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__YDWEStringFormula__Sorting_V[this]!=-1) then
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__YDWEStringFormula__Sorting_onDestroy)
    set si__YDWEStringFormula__Sorting_V[this]=si__YDWEStringFormula__Sorting_F
    set si__YDWEStringFormula__Sorting_F=this
endfunction

//Generated allocator of YDWEStringFormula__StringTable
function s__YDWEStringFormula__StringTable__allocate takes nothing returns integer
 local integer this=s__YDWEStringFormula__Inventory__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__YDWEStringFormula__Inventory_type[this]=5
    set kthis=this

 return this
endfunction


//Generated allocator of YDWETimerPattern__Deceleration
function s__YDWETimerPattern__Deceleration__allocate takes nothing returns integer
 local integer this=s__YDWETimerPattern__Thread__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__YDWETimerPattern__Thread_type[this]=15
    set kthis=this

 return this
endfunction


//Generated allocator of YDWETimerPattern__Parabola
function s__YDWETimerPattern__Parabola__allocate takes nothing returns integer
 local integer this=s__YDWETimerPattern__Thread__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__YDWETimerPattern__Thread_type[this]=13
    set kthis=this

 return this
endfunction


//Generated allocator of YDWETimerPattern__Linear
function s__YDWETimerPattern__Linear__allocate takes nothing returns integer
 local integer this=s__YDWETimerPattern__Thread__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__YDWETimerPattern__Thread_type[this]=14
    set kthis=this

 return this
endfunction

function sc___prototype4_execute takes integer i,unit a1,real a2 returns nothing
    set f__arg_unit1=a1
    set f__arg_real1=a2

    call TriggerExecute(st___prototype4[i])
endfunction
function sc___prototype4_evaluate takes integer i,unit a1,real a2 returns nothing
    set f__arg_unit1=a1
    set f__arg_real1=a2

    call TriggerEvaluate(st___prototype4[i])

endfunction
function h__SetUnitMoveSpeed takes unit a0, real a1 returns nothing
    //hook: SetUnitMoveSpeedEx
    call sc___prototype4_evaluate(1,a0,a1)
call SetUnitMoveSpeed(a0,a1)
endfunction

//library FrameLibrary:
        function s__Frame_numadd takes integer this returns nothing
            set s__Frame_num=s__Frame_num + 1
        endfunction
        function s__Frame_getFrame takes integer id returns integer
            local integer f= LoadInteger(s__Frame_HT, FRAME_ID, id)
            if f == 0 then
                set f=s__Frame__allocate()
                set s__Frame_id[f]=id
                call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            endif
            return f
        endfunction
        function s__Frame_new takes string name,integer parent returns integer
            local integer f= s__Frame__allocate()
            set s__Frame_id[f]=DzCreateFrame(name, s__Frame_id[parent], 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newImage0 takes integer parent returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BACKDROP", "Frame_Image" + I2S(s__Frame_num), s__Frame_id[parent], "ImageTemplate", 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newImage1 takes integer parent,string path,real l__w,real h returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BACKDROP", "Frame_Image" + I2S(s__Frame_num), s__Frame_id[parent], "ImageTemplate", 0)
            if path != null then
                call DzFrameSetTexture(s__Frame_id[f], path, 0)
            endif
            call DzFrameSetSize(s__Frame_id[f], l__w, h)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newSprite takes integer parent,string path returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("SPRITE", "Frame_Sprite" + I2S(s__Frame_num), s__Frame_id[parent], "sprite", 0)
            call DzFrameSetModel(s__Frame_id[f], path, 0, 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newTips0 takes integer parent,string path returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BACKDROP", "Frame_Image" + I2S(s__Frame_num), s__Frame_id[parent], path, 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newTips takes integer parent,string path,real l__w,real h returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BACKDROP", "Frame_Image" + I2S(s__Frame_num), s__Frame_id[parent], path, 0)
            call DzFrameSetSize(s__Frame_id[f], l__w, h)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newText0 takes integer parent,string l__ff returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("TEXT", "Frame_Text" + I2S(s__Frame_num), s__Frame_id[parent], l__ff, 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newText1 takes integer parent,string str,string l__ff returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("TEXT", "Frame_Text" + I2S(s__Frame_num), s__Frame_id[parent], l__ff, 0)
            call DzFrameSetText(s__Frame_id[f], str)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newTextButton takes integer parent returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("GLUETEXTBUTTON", "Frame_Button" + I2S(s__Frame_num), s__Frame_id[parent], "template", 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newButton0 takes integer parent returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BUTTON", "Frame_Button" + I2S(s__Frame_num), s__Frame_id[parent], "ButtonTemplate", 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newButton1 takes integer parent,real l__w,real h returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BUTTON", "Frame_Button" + I2S(s__Frame_num), s__Frame_id[parent], "ButtonTemplate", 0)
            call DzFrameSetSize(s__Frame_id[f], l__w, h)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newButtonEmpty0 takes integer parent returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BUTTON", "Frame_ButtonEmpty" + I2S(s__Frame_num), s__Frame_id[parent], "ButtonTemplateEmpty", 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
function s__Frame_newButtonEmpty1 takes integer parent,real l__w,real h returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BUTTON", "Frame_ButtonEmpty" + I2S(s__Frame_num), s__Frame_id[parent], "ButtonTemplateEmpty", 0)
            call DzFrameSetSize(s__Frame_id[f], l__w, h)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_newCloseButton takes integer parent returns integer
            local integer f= s__Frame__allocate()
            call s__Frame_numadd(f)
            set s__Frame_id[f]=DzCreateFrameByTagName("BUTTON", "Frame_ButtonEmpty" + I2S(s__Frame_num), s__Frame_id[parent], "icon1", 0)
            call SaveInteger(s__Frame_HT, FRAME_ID, s__Frame_id[f], f)
            return f
        endfunction
        function s__Frame_setScale takes integer this,real r returns nothing
            call DzFrameSetScale(s__Frame_id[this], r)
        endfunction
        function s__Frame_setColor takes integer this,integer c returns nothing
            call DzFrameSetTextColor(s__Frame_id[this], c)
        endfunction
function s__Frame_setSize takes integer this,real l__w,real h returns nothing
            call DzFrameSetSize(s__Frame_id[this], l__w, h)
        endfunction
        function s__Frame_setTexture takes integer this,string path returns nothing
            call DzFrameSetTexture(s__Frame_id[this], path, 0)
        endfunction
        function s__Frame_setText takes integer this,string str returns nothing
            call DzFrameSetText(s__Frame_id[this], str)
        endfunction
        function s__Frame_setPoint takes integer this,integer a,integer tar,integer b,real x,real y returns nothing
            call DzFrameSetPoint(s__Frame_id[this], a, s__Frame_id[tar], b, x, y)
        endfunction
        function s__Frame_setPriority takes integer this,integer prior returns nothing
            call DzFrameSetPriority(s__Frame_id[this], prior)
        endfunction
        function s__Frame_setColor255 takes integer this,integer r,integer g,integer b returns nothing
            call DzFrameSetTextColor(s__Frame_id[this], DzGetColor(255, r, g, b))
        endfunction
        function s__Frame_setAllPoints takes integer this,integer tar returns nothing
            call DzFrameSetAllPoints(s__Frame_id[this], s__Frame_id[tar])
        endfunction
        function s__Frame_clearAllPoints takes integer this returns nothing
            call DzFrameClearAllPoints(s__Frame_id[this])
        endfunction
        function s__Frame_regEvent takes integer this,integer i,code func returns nothing
            call DzFrameSetScriptByCode(s__Frame_id[this], i, func, false)
        endfunction
        function s__Frame_regWheelEvent takes integer this,code func returns nothing
            call DzFrameSetScriptByCode(s__Frame_id[this], 6, func, false)
        endfunction
        function s__Frame_regClickEvent takes integer this,code func returns nothing
            call DzFrameSetScriptByCode(s__Frame_id[this], 1, func, false)
        endfunction
        function s__Frame_hide takes integer this returns nothing
            call DzFrameShow(s__Frame_id[this], false)
            set s__Frame_isShow[this]=false
        endfunction
        function s__Frame_show takes integer this returns nothing
            call DzFrameShow(s__Frame_id[this], true)
            set s__Frame_isShow[this]=true
        endfunction
        function s__Frame_toggle takes integer this returns nothing
            if s__Frame_isShow[this] then
                call DzFrameShow(s__Frame_id[this], false)
                set s__Frame_isShow[this]=false
            else
                call DzFrameShow(s__Frame_id[this], true)
                set s__Frame_isShow[this]=true
            endif
        endfunction
        function s__Frame_toggerHover takes integer this,string path0,string path1 returns nothing
            if s__Frame_hover[this] then
                set s__Frame_hover[this]=false
                call DzFrameSetTexture(s__Frame_id[this], path0, 0)
            else
                set s__Frame_hover[this]=true
                call DzFrameSetTexture(s__Frame_id[this], path1, 0)
            endif
        endfunction
        function s__Frame_enable takes integer this returns nothing
            call DzFrameSetEnable(s__Frame_id[this], true)
            set s__Frame_isEnable[this]=true
        endfunction
        function s__Frame_disable takes integer this returns nothing
            call DzFrameSetEnable(s__Frame_id[this], false)
            set s__Frame_isEnable[this]=false
        endfunction
        function s__Frame_setAlpha takes integer this,integer a returns nothing
            call DzFrameSetAlpha(s__Frame_id[this], a)
        endfunction
        function s__Frame_onDestroy takes integer this returns nothing
            if s__Frame_id[this] != 0 then
                call DzDestroyFrame(s__Frame_id[this])
            endif
            set s__Frame_id[this]=0
        endfunction

//Generated destructor of Frame
function s__Frame_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Frame_V[this]!=-1) then
        return
    endif
    call s__Frame_onDestroy(this)
    set si__Frame_V[this]=si__Frame_F
    set si__Frame_F=this
endfunction
    
    function onButtonPressed takes nothing returns nothing
    endfunction
    function toggleImage takes nothing returns nothing
        
    endfunction
function s__ImageButton_create takes integer imageWidget,real l__w,real h returns integer
            local integer ib= s__ImageButton__allocate()
            set s__ImageButton_image[ib]=imageWidget
            set s__ImageButton_button[ib]=s__Frame_newTextButton(s__ImageButton_image[ib])
            call DzFrameSetAllPoints(s__Frame_id[(s__ImageButton_button[ib])], s__Frame_id[(s__ImageButton_image[ib])]) // INLINED!!
            call DzFrameSetScriptByCode(s__Frame_id[(s__ImageButton_button[ib])], (FRAME_EVENT_PRESSED ), ( function onButtonPressed), false) // INLINED!!
            call DzFrameSetScriptByCode(s__Frame_id[(s__ImageButton_button[ib])], (FRAME_MOUSE_ENTER ), ( function toggleImage), false) // INLINED!!
            call DzFrameSetScriptByCode(s__Frame_id[(s__ImageButton_button[ib])], (FRAME_MOUSE_LEAVE ), ( function toggleImage), false) // INLINED!!
            return ib
        endfunction
    function FrameLibrary__init takes nothing returns nothing
        // local integer f = DzFrameGetTooltip()
        // local real size = 0.75
        set GUI=s__Frame_getFrame(DzGetGameUI())
        //call openBoardButton.setText("任务")
        //call DzFrameClearAllPoints(f)
        //call DzFrameSetPoint(f, 7, DzGetGameUI(), 7, 0, .14)
    endfunction

//library FrameLibrary ends
//library MaxSpeed:
         //private:
         //temp variables







//Implemented from module Init:





         function s__ModSpeed_destroy takes integer this returns nothing
             set s__ModSpeed_speed[this]=0.
             if ( s__ModSpeed_next[this] != 0 ) then
                 set s__ModSpeed_prev[s__ModSpeed_next[this]]=s__ModSpeed_prev[this]
             endif
             set s__ModSpeed_next[s__ModSpeed_prev[this]]=s__ModSpeed_next[this]
             set s__ModSpeed_prev[this]=s__ModSpeed_prev[(0)]
             set s__ModSpeed_prev[(0)]=this
             if ( s__ModSpeed_next[(0)] == 0 ) then
                 call PauseTimer(s__ModSpeed_tm)



             endif







         endfunction
        function s__ModSpeed__get_moveFilter takes integer this returns boolean
             return GetUnitAbilityLevel(s__ModSpeed_u[this], 'BSTN') < 1 and GetUnitAbilityLevel(s__ModSpeed_u[this], 'BPSE') < 1 and GetUnitMoveSpeed(s__ModSpeed_u[this]) > 521.0 and not IsUnitPaused(s__ModSpeed_u[this]) and not s__ModSpeed_lead[this]
         endfunction
         function s__ModSpeed_move takes integer this returns nothing
             if ( not s__ModSpeed__get_moveFilter(this) ) then
                 return
             endif
             set s__ModSpeed_x=GetUnitX(s__ModSpeed_u[this])
             set s__ModSpeed_y=GetUnitY(s__ModSpeed_u[this])
             set s__ModSpeed_dx=s__ModSpeed_x - s__ModSpeed_lastX[this]
             set s__ModSpeed_dy=s__ModSpeed_y - s__ModSpeed_lastY[this]
             set s__ModSpeed_lastX[this]=s__ModSpeed_x
             set s__ModSpeed_lastY[this]=s__ModSpeed_y
             set s__ModSpeed_dist=SquareRoot(s__ModSpeed_dx * s__ModSpeed_dx + s__ModSpeed_dy * s__ModSpeed_dy) / MaxSpeed___PERIOD
             if ( s__ModSpeed_dist >= MaxSpeed___MIN_SPEED and s__ModSpeed_dist <= MaxSpeed___MAX_SPEED ) then
                 set s__ModSpeed_rate=( s__ModSpeed_speed[this] - 522. ) / s__ModSpeed_dist
                 set s__ModSpeed_lastX[this]=s__ModSpeed_x + s__ModSpeed_dx * s__ModSpeed_rate
                 set s__ModSpeed_lastY[this]=s__ModSpeed_y + s__ModSpeed_dy * s__ModSpeed_rate
                 call SetUnitX(s__ModSpeed_u[this], s__ModSpeed_lastX[this])
                 call SetUnitY(s__ModSpeed_u[this], s__ModSpeed_lastY[this])



             endif
         endfunction
         function s__ModSpeed_iterate takes nothing returns nothing
             local integer this= (0)
             loop
                 set this=s__ModSpeed_next[this]
                 exitwhen ( this == 0 )
                 if ( GetWidgetLife(s__ModSpeed_u[this]) < 0.405 ) then
                     call s__ModSpeed_destroy(this)
                 else
                     call s__ModSpeed_move(this)
                 endif
             endloop
         endfunction
         //public:
         function s__ModSpeed_getInstance takes unit u returns integer
             local integer this= (0)











                 loop
                     set this=s__ModSpeed_next[this]
                     exitwhen this == 0
                     if s__ModSpeed_u[this] == u then
                         return this
                     endif
                 endloop

             return (0)
         endfunction
         function s__ModSpeed_setUnitLed takes unit u,boolean b returns nothing
             local integer this= s__ModSpeed_getInstance(u)
             if ( this > 0 ) then
                 set s__ModSpeed_lead[this]=b
             endif
         endfunction
         function s__ModSpeed_getSpeed takes unit u returns real
             local integer this= s__ModSpeed_getInstance(u)
             if ( this > 0 and GetUnitMoveSpeed(u) > 521.0 ) then
                 return s__ModSpeed_speed[this]
             endif
             return GetUnitMoveSpeed(u)
         endfunction
         function s__ModSpeed_setSpeed takes unit u,real amount returns nothing
             local integer this
             if ( u == null or GetWidgetLife(u) < 0.405 ) then
                 return
             endif
             set this=s__ModSpeed_getInstance(u)
             if ( amount < 523. ) then
                 if ( this > 0 ) then
                     call s__ModSpeed_destroy(this)
                 endif
                 return
             elseif ( this == 0 ) then
                 if ( s__ModSpeed_prev[(0)] == 0 ) then
                     set s__ModSpeed_instanceMaxCount=s__ModSpeed_instanceMaxCount + 1
                     set this=s__ModSpeed_instanceMaxCount
                 else
                     set this=s__ModSpeed_prev[(0)]
                     set s__ModSpeed_prev[(0)]=s__ModSpeed_prev[s__ModSpeed_prev[(0)]]
                 endif
                 if ( s__ModSpeed_next[(0)] == 0 ) then
                     call TimerStart(s__ModSpeed_tm, MaxSpeed___PERIOD, true, function s__ModSpeed_iterate)



                 else
                     set s__ModSpeed_prev[s__ModSpeed_next[(0)]]=this
                 endif
                 set s__ModSpeed_next[this]=s__ModSpeed_next[(0)]
                 set s__ModSpeed_next[(0)]=this
                 set s__ModSpeed_prev[this]=(0)
                 set s__ModSpeed_u[this]=u







             endif
             set amount=RMinBJ(amount, MaxSpeed___MAX_SPEED)
             set s__ModSpeed_lastX[this]=GetUnitX(u)
             set s__ModSpeed_lastY[this]=GetUnitY(u)
             set s__ModSpeed_speed[this]=amount
         endfunction
     //interface:
     function SetUnitLed takes unit u,boolean b returns nothing
         call s__ModSpeed_setUnitLed(u , b)
     endfunction
     function GetUnitMoveSpeedEx takes unit u returns real
         return s__ModSpeed_getSpeed(u)
     endfunction
     function SetUnitMoveSpeedEx takes unit u,real speed returns nothing
         call s__ModSpeed_setSpeed(u , speed)
     endfunction
//processed hook:      hook SetUnitMoveSpeed SetUnitMoveSpeedEx

//library MaxSpeed ends
//library ShowEffect:
    
    function initShowEffect takes nothing returns nothing
        local integer LoopA= 0
        loop
            exitwhen LoopA > 11
            call ForceAddPlayer(showEffectForce, Player(LoopA))
            set LoopA=LoopA + 1
        endloop
	endfunction

//library ShowEffect ends
//library UniMissileSystem3D:
// 计算两点间的距离
function UniMissileSystem3D__DistanceBetweenXY takes real x1,real x2,real y1,real y2 returns real
    return SquareRoot(( x1 - x2 ) * ( x1 - x2 ) + ( y1 - y2 ) * ( y1 - y2 ))
endfunction
// 计算两点间的角度（角度制）
function UniMissileSystem3D__AngleBetweenXY takes real x1,real x2,real y1,real y2 returns real
    return bj_RADTODEG * Atan2(y2 - y1, x2 - x1)
endfunction
// 计算两个单位间的角度
function UniMissileSystem3D__GetAngleBetweenUnits takes unit l__A,unit l__B returns real
    return Atan2(GetUnitY(l__B) - GetUnitY(l__A), GetUnitX(l__B) - GetUnitX(l__A))
endfunction
// 计算两个单位间的距离
function UniMissileSystem3D__DistanceBetweenUnits takes unit l__A,unit l__B returns real
    local real x1=GetUnitX(l__A)
    local real x2=GetUnitX(l__B)
    local real y1=GetUnitY(l__A)
    local real y2=GetUnitY(l__B)
    return SquareRoot(( x1 - x2 ) * ( x1 - x2 ) + ( y1 - y2 ) * ( y1 - y2 ))
endfunction
// 计算加速的时间
// s = v0 * t + 1/2 * a * t * t
// a * t * t  + 2 * v0 * t - 2 * s = 0
// time1 = (- 2 * v0 + SquareRoot ( 4 * v0 *v0 + 8 * a * s)) / (2 * a)
function UniMissileSystem3D__GetAcceleratedTime takes real dis,real originspeed,real accel returns real
    local real time1=0.0
    local real time2=0.0
    set time1=( - 1 * originspeed + SquareRoot(Pow(originspeed, 2.0) + 2 * accel * dis) ) / accel
    set time2=( - 1 * originspeed - SquareRoot(Pow(originspeed, 2.0) + 2 * accel * dis) ) / accel
    if time1 == 0. then
       set time1=0.01
    endif
    if time2 == 0. then
       set time2=0.01
    endif
    if time1 > time2 then
       return time1
    endif
    return time2
endfunction
// 登记弹幕
function UniMissileSystem3D__MRegister takes unit missile returns nothing
    call UnitAddAbility(missile, 'Arav') // 风暴之鸦
call UnitRemoveAbility(missile, 'Arav')
    call SetUnitPosition(missile, GetUnitX(missile), GetUnitY(missile))
    call SetUnitAnimationByIndex(missile, 90)
endfunction
// 将i从栈中移除，使用栈顶元素补充i
function UniMissileSystem3D__MPop takes integer i returns nothing
     if GetUnitState(UniMissileSystem3D__MU[i], UNIT_STATE_LIFE) > 0.4 then
        call KillUnit(UniMissileSystem3D__MU[i])
     endif
     call DestroyEffect(UniMissileSystem3D__EFL[i])
     set UniMissileSystem3D__MU[i]=UniMissileSystem3D__MU[UniMissileSystem3D__Top]
     set UniMissileSystem3D__SP[i]=UniMissileSystem3D__SP[UniMissileSystem3D__Top]
     set UniMissileSystem3D__RA[i]=UniMissileSystem3D__RA[UniMissileSystem3D__Top]
     set UniMissileSystem3D__DM[i]=UniMissileSystem3D__DM[UniMissileSystem3D__Top]
     set UniMissileSystem3D__DI[i]=UniMissileSystem3D__DI[UniMissileSystem3D__Top]
     set UniMissileSystem3D__AN[i]=UniMissileSystem3D__AN[UniMissileSystem3D__Top]
     set UniMissileSystem3D__HE[i]=UniMissileSystem3D__HE[UniMissileSystem3D__Top]
     set UniMissileSystem3D__HEMax[i]=UniMissileSystem3D__HEMax[UniMissileSystem3D__Top]
     set UniMissileSystem3D__US[i]=UniMissileSystem3D__US[UniMissileSystem3D__Top]
     set UniMissileSystem3D__ARC[i]=UniMissileSystem3D__ARC[UniMissileSystem3D__Top]
     set UniMissileSystem3D__HP[i]=UniMissileSystem3D__HP[UniMissileSystem3D__Top]
     set UniMissileSystem3D__EF[i]=UniMissileSystem3D__EF[UniMissileSystem3D__Top]
     set UniMissileSystem3D__EFL[i]=UniMissileSystem3D__EFL[UniMissileSystem3D__Top]
     set UniMissileSystem3D__SH[i]=UniMissileSystem3D__SH[UniMissileSystem3D__Top]
     set UniMissileSystem3D__MGra[i]=UniMissileSystem3D__MGra[UniMissileSystem3D__Top]
     set UniMissileSystem3D__LOC[i]=UniMissileSystem3D__LOC[UniMissileSystem3D__Top]
     set UniMissileSystem3D__TIM[i]=UniMissileSystem3D__TIM[UniMissileSystem3D__Top]
     set UniMissileSystem3D__LT[i]=UniMissileSystem3D__LT[UniMissileSystem3D__Top]
     set UniMissileSystem3D__SZ[i]=UniMissileSystem3D__SZ[UniMissileSystem3D__Top]
     set UniMissileSystem3D__RI[i]=UniMissileSystem3D__RI[UniMissileSystem3D__Top]
     set UniMissileSystem3D__R01[i]=UniMissileSystem3D__R01[UniMissileSystem3D__Top]
     set UniMissileSystem3D__R02[i]=UniMissileSystem3D__R02[UniMissileSystem3D__Top]
     set UniMissileSystem3D__MT[i]=UniMissileSystem3D__MT[UniMissileSystem3D__Top]
     set UniMissileSystem3D__OH[i]=UniMissileSystem3D__OH[UniMissileSystem3D__Top]
     set UniMissileSystem3D__OS[i]=UniMissileSystem3D__OS[UniMissileSystem3D__Top]
     set UniMissileSystem3D__OF[i]=UniMissileSystem3D__OF[UniMissileSystem3D__Top]
     set UniMissileSystem3D__ACC[i]=UniMissileSystem3D__ACC[UniMissileSystem3D__Top]
     set UniMissileSystem3D__MaxS[i]=UniMissileSystem3D__MaxS[UniMissileSystem3D__Top]
     set UniMissileSystem3D__MKs[i]=UniMissileSystem3D__MKs[UniMissileSystem3D__Top]
     set UniMissileSystem3D__SPX[i]=UniMissileSystem3D__SPX[UniMissileSystem3D__Top]
     set UniMissileSystem3D__SPY[i]=UniMissileSystem3D__SPY[UniMissileSystem3D__Top]
     set UniMissileSystem3D__LastX[i]=UniMissileSystem3D__LastX[UniMissileSystem3D__Top]
     set UniMissileSystem3D__LastY[i]=UniMissileSystem3D__LastY[UniMissileSystem3D__Top]
     set UniMissileSystem3D__IN[i]=UniMissileSystem3D__IN[UniMissileSystem3D__Top]
     set UniMissileSystem3D__LastOwner[i]=UniMissileSystem3D__LastOwner[UniMissileSystem3D__Top]
     set UniMissileSystem3D__MU[UniMissileSystem3D__Top]=null
     set UniMissileSystem3D__MT[UniMissileSystem3D__Top]=null
     set UniMissileSystem3D__Top=UniMissileSystem3D__Top - 1
endfunction
// 判断是否越界
function UniMissileSystem3D__MLimit takes real x,real y returns boolean
     if x > UniMissileSystem3D__map_max_X or x < UniMissileSystem3D__map_min_X or y > UniMissileSystem3D__map_max_Y or y < UniMissileSystem3D__map_min_Y then //边界判定
        return true
     else
        return false
     endif
endfunction
// 弹幕循环
function UniMissileSystem3D__MLoop takes nothing returns nothing
     local integer i=UniMissileSystem3D__Top
     local real array x
     local real array y
     local real array zLoc
     local real h=0.00
     local real h2=0.0
     local real time=0.0
     local real ttime=0.0
     local real ang=0.0
     local real height=0.0
     local real lastheight=0.0
     local real addxy=0.0
     local real addz=0.0
     local real anglez=0.0
     local real tanZ=0.0
     local real addh=0.0
     local real udis=0.0
     local real targetheight=0.0
     local integer aniI=0
     if MissileTimerPause == true then
        return
     endif
     loop
         exitwhen i < 0
         set addh=0.0
         set udis=0.0
         set x[1]=GetUnitX(UniMissileSystem3D__MU[i])
         set y[1]=GetUnitY(UniMissileSystem3D__MU[i])
         set height=GetUnitFlyHeight(UniMissileSystem3D__MU[i])
         if UniMissileSystem3D__DI[i] <= 0.0 or GetUnitState(UniMissileSystem3D__MU[i], UNIT_STATE_LIFE) < 0.4 or height <= 0.1 or UniMissileSystem3D__HP[i] <= 0.0 or UniMissileSystem3D__MLimit(x[1] , y[1]) == true or height >= 9999.1 then
             call UniMissileSystem3D__MPop(i)
         else
             if UniMissileSystem3D__MT[i] != null then
                set UniMissileSystem3D__AN[i]=UniMissileSystem3D__AngleBetweenXY(x[1] , GetUnitX(UniMissileSystem3D__MT[i]) , y[1] , GetUnitY(UniMissileSystem3D__MT[i]))
                set ang=UniMissileSystem3D__AN[i] * bj_DEGTORAD
                if UniMissileSystem3D__IN[i] == 0 then
                   set UniMissileSystem3D__SPX[i]=UniMissileSystem3D__SP[i] * Cos(ang)
                   set UniMissileSystem3D__SPY[i]=UniMissileSystem3D__SP[i] * Sin(ang)
                else
                   set ang=ang + UniMissileSystem3D__OF[i]
                   set UniMissileSystem3D__SPX[i]=UniMissileSystem3D__SPX[i] * UniMissileSystem3D__MKs[i] + UniMissileSystem3D__ACC[i] * Cos(ang)
                   set UniMissileSystem3D__SPY[i]=UniMissileSystem3D__SPY[i] * UniMissileSystem3D__MKs[i] + UniMissileSystem3D__ACC[i] * Sin(ang)
                endif
                if IsUnitType(UniMissileSystem3D__MT[i], UNIT_TYPE_DEAD) == true then
                   set UniMissileSystem3D__MT[i]=null
                endif
                set udis=UniMissileSystem3D__DistanceBetweenUnits(UniMissileSystem3D__MT[i] , UniMissileSystem3D__MU[i]) / 100.
                if udis == 0. then
                   set udis=0.01
                endif
                set targetheight=GetUnitFlyHeight(UniMissileSystem3D__MT[i])
                if RAbsBJ(height - targetheight) > UniMissileSystem3D__RA[i] then
                   if targetheight > height then
                      set addh=RAbsBJ(UniMissileSystem3D__SP[i]) / udis
                      if addh + height > targetheight then
                         set addh=addh / 10.
                         call SetUnitFlyHeight(UniMissileSystem3D__MU[i], targetheight, 0.0)
                         set height=targetheight
                      endif
                   elseif targetheight < height then
                          set addh=RAbsBJ(UniMissileSystem3D__SP[i]) * ( - 1. ) / udis
                          if addh + height < targetheight then
                             call SetUnitFlyHeight(UniMissileSystem3D__MU[i], targetheight, 0.0)
                             set height=targetheight
                          endif
                   endif
                endif
             else
                set ang=UniMissileSystem3D__AN[i] * bj_DEGTORAD
                set UniMissileSystem3D__SPX[i]=UniMissileSystem3D__SP[i] * Cos(ang)
                set UniMissileSystem3D__SPY[i]=UniMissileSystem3D__SP[i] * Sin(ang)
                if UniMissileSystem3D__LOC[i] == 0.0 then
                   set UniMissileSystem3D__SP[i]=UniMissileSystem3D__SP[i] + UniMissileSystem3D__ACC[i]
                else
                   if UniMissileSystem3D__SP[i] <= UniMissileSystem3D__MaxS[i] then
                     set UniMissileSystem3D__SP[i]=UniMissileSystem3D__SP[i] + UniMissileSystem3D__ACC[i]
                   else
                     set UniMissileSystem3D__SP[i]=UniMissileSystem3D__MaxS[i]
                   endif
                endif
             endif
             set x[2]=x[1] + UniMissileSystem3D__SPX[i]
             set y[2]=y[1] + UniMissileSystem3D__SPY[i]
             set UniMissileSystem3D__MLoc[1]=Location(x[1], y[1])
             set UniMissileSystem3D__MLoc[2]=Location(x[2], y[2])
             set zLoc[1]=GetLocationZ(UniMissileSystem3D__MLoc[1])
             set zLoc[2]=GetLocationZ(UniMissileSystem3D__MLoc[2])
             call SetUnitX(UniMissileSystem3D__MU[i], x[2])
             call SetUnitY(UniMissileSystem3D__MU[i], y[2])
             set UniMissileSystem3D__LastX[i]=x[2]
             set UniMissileSystem3D__LastY[i]=y[2]
             set addxy=UniMissileSystem3D__DistanceBetweenXY(x[2] , x[1] , y[2] , y[1])
             call SetUnitFacing(UniMissileSystem3D__MU[i], UniMissileSystem3D__AN[i])
             call GroupEnumUnitsInRange(UniMissileSystem3D__DamageGroup, x[2], y[2], UniMissileSystem3D__RA[i], null)
             loop
                 set UniMissileSystem3D__DamageUnit=FirstOfGroup(UniMissileSystem3D__DamageGroup)
                 if GetUnitState(UniMissileSystem3D__DamageUnit, UNIT_STATE_LIFE) > 0.4 and ( UniMissileSystem3D__MT[i] == UniMissileSystem3D__DamageUnit or IsUnitEnemy(UniMissileSystem3D__DamageUnit, GetOwningPlayer(UniMissileSystem3D__MU[i])) ) then
                     if RAbsBJ(height - GetUnitFlyHeight(UniMissileSystem3D__DamageUnit)) <= UniMissileSystem3D__RA[i] then
                        call UnitDamageTarget(UniMissileSystem3D__MU[i], UniMissileSystem3D__DamageUnit, UniMissileSystem3D__DM[i], true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
                        set UniMissileSystem3D__HP[i]=UniMissileSystem3D__HP[i] - 1.
                        set UniMissileSystem3D__DM[i]=UniMissileSystem3D__DM[i] * 0.5
                     endif
                 endif
                 call GroupRemoveUnit(UniMissileSystem3D__DamageGroup, UniMissileSystem3D__DamageUnit)
                 exitwhen UniMissileSystem3D__DamageUnit == null
             endloop
             call GroupClear(UniMissileSystem3D__DamageGroup)
             set UniMissileSystem3D__TIM[i]=UniMissileSystem3D__TIM[i] + UniMissileSystem3D__TIMOut
            if UniMissileSystem3D__MGra[i] == 0.0 then
            set h=0.11 + UniMissileSystem3D__SZ[i] - zLoc[2]
            endif
            if UniMissileSystem3D__LOC[i] == 0.0 then
             if UniMissileSystem3D__MGra[i] == 0.0 then
             else
             set h=UniMissileSystem3D__HEMax[i] - UniMissileSystem3D__R01[i] * ( UniMissileSystem3D__TIM[i] - UniMissileSystem3D__LT[i] / 2 ) * ( UniMissileSystem3D__TIM[i] - UniMissileSystem3D__LT[i] / 2 ) + UniMissileSystem3D__TIM[i] * UniMissileSystem3D__R02[i] + UniMissileSystem3D__SZ[i] - zLoc[2]
             endif
            else
             set UniMissileSystem3D__US[i]=UniMissileSystem3D__US[i] - UniMissileSystem3D__MGra[i]
            endif
             set lastheight=height
             set UniMissileSystem3D__HE[i]=UniMissileSystem3D__HE[i] * UniMissileSystem3D__LOC[i] + UniMissileSystem3D__SH[i] + UniMissileSystem3D__US[i] * UniMissileSystem3D__LOC[i] + h * ( 1 - UniMissileSystem3D__LOC[i] ) + addh
             set height=UniMissileSystem3D__HE[i] - zLoc[2] * UniMissileSystem3D__LOC[i]
             call SetUnitFlyHeight(UniMissileSystem3D__MU[i], height, 0.0)
             set addz=height - lastheight
             if addxy == 0. then
                set addxy=1.
             endif
             set tanZ=addz / addxy
             set anglez=AtanBJ(tanZ)
             set anglez=anglez * ( 1. ) + 90.
             set aniI=R2I(anglez)
             if aniI < 0 then
                set aniI=0
             elseif aniI > 181 then
                set aniI=181
             endif
             call SetUnitAnimationByIndex(UniMissileSystem3D__MU[i], aniI)
             set UniMissileSystem3D__DI[i]=UniMissileSystem3D__DI[i] - UniMissileSystem3D__SP[i] * UniMissileSystem3D__LOC[i]
             set UniMissileSystem3D__US[i]=UniMissileSystem3D__US[i] - UniMissileSystem3D__MGra[i]
             call RemoveLocation(UniMissileSystem3D__MLoc[1])
             call RemoveLocation(UniMissileSystem3D__MLoc[2])
         endif
         set i=i - 1
     endloop
endfunction
// 弹幕发射
function MissileCast takes unit caster,unit missile,real originspeed,real maxspeed,real accel,real angle,real distance,real arc,real range,real damage,location loc,unit target,real height,real l__hp,string Effect,boolean gravity returns nothing
     local integer i=0
     local integer n=0
     local real tanA=0.01
     local real speed=600
     local real dis=0.01
     local real ang=0.01
     local real x=0.01
     local real y=0.01
     local boolean inertia=true
     if loc == null then
        return
     endif
     set UniMissileSystem3D__Top=UniMissileSystem3D__Top + 1
     set i=UniMissileSystem3D__Top
     set UniMissileSystem3D__HeroLoc=GetUnitLoc(caster)
     if speed == 0. then
        set speed=0.01
     endif
     if originspeed == 0. then
        set originspeed=0.01
     endif
     if maxspeed == 0. then
        set maxspeed=0.01
     endif
     if distance == 0. then
        set distance=0.01
     endif
     if height == 0. then
        set height=0.1
     endif
     if GetLocationX(loc) != GetLocationX(UniMissileSystem3D__HeroLoc) or GetLocationY(loc) != GetLocationY(UniMissileSystem3D__HeroLoc) then
        set x=GetLocationX(loc)
        set y=GetLocationY(loc)
        set ang=UniMissileSystem3D__AngleBetweenXY(GetUnitX(caster) , x , GetUnitY(caster) , y)
        set dis=UniMissileSystem3D__DistanceBetweenXY(x , GetUnitX(caster) , y , GetUnitY(caster))
        set UniMissileSystem3D__LOC[i]=0.0
     else
        set ang=angle
        set dis=distance
        set UniMissileSystem3D__LOC[i]=1.0
     endif
     if gravity == true then
        set UniMissileSystem3D__MGra[i]=UniMissileSystem3D__Gravity
     else
        set UniMissileSystem3D__MGra[i]=0.0
     endif
     set UniMissileSystem3D__MU[i]=missile
     call UniMissileSystem3D__MRegister(UniMissileSystem3D__MU[i])
     set UniMissileSystem3D__OH[i]=GetUnitFlyHeight(caster) + height
     set UniMissileSystem3D__SZ[i]=GetLocationZ(UniMissileSystem3D__HeroLoc) + UniMissileSystem3D__OH[i]
     if originspeed == maxspeed then
        set speed=originspeed
        set accel=0.0
        set inertia=false
        set UniMissileSystem3D__LT[i]=dis / speed
     else
        set inertia=true
        set UniMissileSystem3D__LT[i]=UniMissileSystem3D__GetAcceleratedTime(dis , originspeed , accel)
     endif
     set UniMissileSystem3D__SP[i]=originspeed * UniMissileSystem3D__TIMOut
     set UniMissileSystem3D__MaxS[i]=maxspeed
     set UniMissileSystem3D__RI[i]=( GetLocationZ(loc) - UniMissileSystem3D__SZ[i] ) / dis
     set UniMissileSystem3D__TIM[i]=0
     set UniMissileSystem3D__IN[i]=0
     if target != null then
        if GetUnitState(target, UNIT_STATE_LIFE) > 0.4 then
        set UniMissileSystem3D__MT[i]=target
        if inertia == true then
           set UniMissileSystem3D__OS[i]=originspeed * UniMissileSystem3D__TIMOut
           set UniMissileSystem3D__OF[i]=Deg2Rad(50)
           set UniMissileSystem3D__SPX[i]=UniMissileSystem3D__OS[i] * Cos(ang)
           set UniMissileSystem3D__SPY[i]=UniMissileSystem3D__OS[i] * Sin(ang)
           set UniMissileSystem3D__MKs[i]=1 - accel * UniMissileSystem3D__TIMOut / maxspeed
        endif
        endif
     endif
     set UniMissileSystem3D__ACC[i]=accel * UniMissileSystem3D__TIMOut * UniMissileSystem3D__TIMOut
     if inertia == true then
        set UniMissileSystem3D__IN[i]=1
     endif
     set UniMissileSystem3D__RA[i]=range
     set UniMissileSystem3D__DM[i]=damage
     set UniMissileSystem3D__AN[i]=ang
     set UniMissileSystem3D__ARC[i]=arc
     set UniMissileSystem3D__MaxS[i]=maxspeed * UniMissileSystem3D__TIMOut
     if arc != 0.0 then
        set UniMissileSystem3D__HEMax[i]=dis * UniMissileSystem3D__ARC[i]
     else
        set UniMissileSystem3D__HEMax[i]=height
     endif
     if GetLocationX(loc) == GetLocationX(UniMissileSystem3D__HeroLoc) and GetLocationY(loc) == GetLocationY(UniMissileSystem3D__HeroLoc) then
        set UniMissileSystem3D__ANZ[i]=AtanBJ(arc)
        set UniMissileSystem3D__US[i]=arc * UniMissileSystem3D__SP[i]
        set UniMissileSystem3D__DI[i]=distance
     else
        set UniMissileSystem3D__US[i]=0
        set UniMissileSystem3D__DI[i]=dis
     endif
     call SetUnitX(UniMissileSystem3D__MU[i], GetLocationX(UniMissileSystem3D__HeroLoc))
     call SetUnitY(UniMissileSystem3D__MU[i], GetLocationY(UniMissileSystem3D__HeroLoc))
     call SetUnitOwner(UniMissileSystem3D__MU[i], GetOwningPlayer(caster), true)
     call SetUnitFacing(UniMissileSystem3D__MU[i], UniMissileSystem3D__AN[i])
     set UniMissileSystem3D__HE[i]=UniMissileSystem3D__OH[i] + GetLocationZ(UniMissileSystem3D__HeroLoc) + 0.11
     set UniMissileSystem3D__SH[i]=0 * speed
     set UniMissileSystem3D__LastX[i]=0.0
     set UniMissileSystem3D__LastY[i]=0.0
     set UniMissileSystem3D__R01[i]=UniMissileSystem3D__HEMax[i] / UniMissileSystem3D__LT[i] / UniMissileSystem3D__LT[i] * 4
     set UniMissileSystem3D__R02[i]=UniMissileSystem3D__SP[i] * UniMissileSystem3D__RI[i] / UniMissileSystem3D__TIMOut
     set UniMissileSystem3D__HP[i]=l__hp
     set UniMissileSystem3D__DM[i]=damage
     set UniMissileSystem3D__EF[i]=Effect
     call SetUnitFlyHeight(UniMissileSystem3D__MU[i], UniMissileSystem3D__HE[i] - GetLocationZ(UniMissileSystem3D__HeroLoc), 0.0)
     set UniMissileSystem3D__EFL[i]=AddSpecialEffectTarget(UniMissileSystem3D__EF[i], UniMissileSystem3D__MU[i], "chest")
     set UniMissileSystem3D__LastOwner[i]=GetOwningPlayer(caster)
     call RemoveLocation(UniMissileSystem3D__HeroLoc)
     set UniMissileSystem3D__HeroLoc=null
endfunction
function UniMissileSystem3D__Init takes nothing returns nothing
     set UniMissileSystem3D__map_max_X=GetRectMaxX(bj_mapInitialPlayableArea)
     set UniMissileSystem3D__map_max_Y=GetRectMaxY(bj_mapInitialPlayableArea)
     set UniMissileSystem3D__map_min_X=GetRectMinX(bj_mapInitialPlayableArea)
     set UniMissileSystem3D__map_min_Y=GetRectMinY(bj_mapInitialPlayableArea)
     set UniMissileSystem3D__DamageGroup=CreateGroup()
     set UniMissileSystem3D__TIMr=CreateTimer()
     call TimerStart(UniMissileSystem3D__TIMr, UniMissileSystem3D__TIMOut, true, function UniMissileSystem3D__MLoop)
endfunction

//library UniMissileSystem3D ends
//library YDTriggerSaveLoadSystem:
    function YDTriggerSaveLoadSystem__Init takes nothing returns nothing
            set YDHT=InitHashtable()
        set YDLOC=InitHashtable()
    endfunction

//library YDTriggerSaveLoadSystem ends
//library YDWEAbilityState:











 function YDWEGetUnitAbilityState takes unit u,integer abilcode,integer state_type returns real
		return EXGetAbilityState(EXGetUnitAbility(u, abilcode), state_type)
	endfunction
 function YDWEGetUnitAbilityDataInteger takes unit u,integer abilcode,integer level,integer data_type returns integer
		return EXGetAbilityDataInteger(EXGetUnitAbility(u, abilcode), level, data_type)
	endfunction
 function YDWEGetUnitAbilityDataReal takes unit u,integer abilcode,integer level,integer data_type returns real
		return EXGetAbilityDataReal(EXGetUnitAbility(u, abilcode), level, data_type)
	endfunction
 function YDWEGetUnitAbilityDataString takes unit u,integer abilcode,integer level,integer data_type returns string
		return EXGetAbilityDataString(EXGetUnitAbility(u, abilcode), level, data_type)
	endfunction
 function YDWESetUnitAbilityState takes unit u,integer abilcode,integer state_type,real value returns boolean
		return EXSetAbilityState(EXGetUnitAbility(u, abilcode), state_type, value)
	endfunction
 function YDWESetUnitAbilityDataInteger takes unit u,integer abilcode,integer level,integer data_type,integer value returns boolean
		return EXSetAbilityDataInteger(EXGetUnitAbility(u, abilcode), level, data_type, value)
	endfunction
 function YDWESetUnitAbilityDataReal takes unit u,integer abilcode,integer level,integer data_type,real value returns boolean
		return EXSetAbilityDataReal(EXGetUnitAbility(u, abilcode), level, data_type, value)
	endfunction
 function YDWESetUnitAbilityDataString takes unit u,integer abilcode,integer level,integer data_type,string value returns boolean
		return EXSetAbilityDataString(EXGetUnitAbility(u, abilcode), level, data_type, value)
	endfunction

 function YDWEUnitTransform takes unit u,integer abilcode,integer targetid returns nothing
		call UnitAddAbility(u, abilcode)
		call EXSetAbilityDataInteger(EXGetUnitAbility(u, abilcode), 1, YDWEAbilityState__ABILITY_DATA_UNITID, GetUnitTypeId(u))
		call EXSetAbilityAEmeDataA(EXGetUnitAbility(u, abilcode), GetUnitTypeId(u))
		call UnitRemoveAbility(u, abilcode)
		call UnitAddAbility(u, abilcode)
		call EXSetAbilityAEmeDataA(EXGetUnitAbility(u, abilcode), targetid)
		call UnitRemoveAbility(u, abilcode)
	endfunction


 function YDWEGetItemDataString takes integer itemcode,integer data_type returns string
		return EXGetItemDataString(itemcode, data_type)
	endfunction
 function YDWESetItemDataString takes integer itemcode,integer data_type,string value returns boolean
		return EXSetItemDataString(itemcode, data_type, value)
	endfunction

//library YDWEAbilityState ends
//library YDWEBase:
//===========================================================================
//HashTable
//===========================================================================
//===========================================================================
//Return bug
//===========================================================================
function YDWEH2I takes handle h returns integer
    return GetHandleId(h)
endfunction
//����
function YDWEFlushAllData takes nothing returns nothing
    call FlushParentHashtable(YDHT)
endfunction
function YDWEFlushMissionByInteger takes integer i returns nothing
    call FlushChildHashtable(YDHT, i)
endfunction
function YDWEFlushMissionByString takes string s returns nothing
    call FlushChildHashtable(YDHT, StringHash(s))
endfunction
function YDWEFlushStoredIntegerByInteger takes integer i,integer j returns nothing
    call RemoveSavedInteger(YDHT, i, j)
endfunction
function YDWEFlushStoredIntegerByString takes string s1,string s2 returns nothing
    call RemoveSavedInteger(YDHT, StringHash(s1), StringHash(s2))
endfunction
function YDWEHaveSavedIntegerByInteger takes integer i,integer j returns boolean
    return HaveSavedInteger(YDHT, i, j)
endfunction
function YDWEHaveSavedIntegerByString takes string s1,string s2 returns boolean
    return HaveSavedInteger(YDHT, StringHash(s1), StringHash(s2))
endfunction
//store and get integer
function YDWESaveIntegerByInteger takes integer pTable,integer pKey,integer i returns nothing
    call SaveInteger(YDHT, pTable, pKey, i)
endfunction
function YDWESaveIntegerByString takes string pTable,string pKey,integer i returns nothing
    call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), i)
endfunction
function YDWEGetIntegerByInteger takes integer pTable,integer pKey returns integer
    return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetIntegerByString takes string pTable,string pKey returns integer
    return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//store and get real
function YDWESaveRealByInteger takes integer pTable,integer pKey,real r returns nothing
    call SaveReal(YDHT, pTable, pKey, r)
endfunction
function YDWESaveRealByString takes string pTable,string pKey,real r returns nothing
    call SaveReal(YDHT, StringHash(pTable), StringHash(pKey), r)
endfunction
function YDWEGetRealByInteger takes integer pTable,integer pKey returns real
    return LoadReal(YDHT, pTable, pKey)
endfunction
function YDWEGetRealByString takes string pTable,string pKey returns real
    return LoadReal(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//store and get string
function YDWESaveStringByInteger takes integer pTable,integer pKey,string s returns nothing
    call SaveStr(YDHT, pTable, pKey, s)
endfunction
function YDWESaveStringByString takes string pTable,string pKey,string s returns nothing
    call SaveStr(YDHT, StringHash(pTable), StringHash(pKey), s)
endfunction
function YDWEGetStringByInteger takes integer pTable,integer pKey returns string
    return LoadStr(YDHT, pTable, pKey)
endfunction
function YDWEGetStringByString takes string pTable,string pKey returns string
    return LoadStr(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//store and get boolean
function YDWESaveBooleanByInteger takes integer pTable,integer pKey,boolean b returns nothing
    call SaveBoolean(YDHT, pTable, pKey, b)
endfunction
function YDWESaveBooleanByString takes string pTable,string pKey,boolean b returns nothing
    call SaveBoolean(YDHT, StringHash(pTable), StringHash(pKey), b)
endfunction
function YDWEGetBooleanByInteger takes integer pTable,integer pKey returns boolean
    return LoadBoolean(YDHT, pTable, pKey)
endfunction
function YDWEGetBooleanByString takes string pTable,string pKey returns boolean
    return LoadBoolean(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Unit
function YDWESaveUnitByInteger takes integer pTable,integer pKey,unit u returns nothing
    call SaveUnitHandle(YDHT, pTable, pKey, u)
endfunction
function YDWESaveUnitByString takes string pTable,string pKey,unit u returns nothing
    call SaveUnitHandle(YDHT, StringHash(pTable), StringHash(pKey), u)
endfunction
function YDWEGetUnitByInteger takes integer pTable,integer pKey returns unit
    return LoadUnitHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetUnitByString takes string pTable,string pKey returns unit
    return LoadUnitHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert UnitID
function YDWESaveUnitIDByInteger takes integer pTable,integer pKey,integer uid returns nothing
    call SaveInteger(YDHT, pTable, pKey, uid)
endfunction
function YDWESaveUnitIDByString takes string pTable,string pKey,integer uid returns nothing
    call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), uid)
endfunction
function YDWEGetUnitIDByInteger takes integer pTable,integer pKey returns integer
    return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetUnitIDByString takes string pTable,string pKey returns integer
    return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert AbilityID
function YDWESaveAbilityIDByInteger takes integer pTable,integer pKey,integer abid returns nothing
    call SaveInteger(YDHT, pTable, pKey, abid)
endfunction
function YDWESaveAbilityIDByString takes string pTable,string pKey,integer abid returns nothing
    call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), abid)
endfunction
function YDWEGetAbilityIDByInteger takes integer pTable,integer pKey returns integer
    return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetAbilityIDByString takes string pTable,string pKey returns integer
    return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Player
function YDWESavePlayerByInteger takes integer pTable,integer pKey,player p returns nothing
    call SavePlayerHandle(YDHT, pTable, pKey, p)
endfunction
function YDWESavePlayerByString takes string pTable,string pKey,player p returns nothing
    call SavePlayerHandle(YDHT, StringHash(pTable), StringHash(pKey), p)
endfunction
function YDWEGetPlayerByInteger takes integer pTable,integer pKey returns player
    return LoadPlayerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetPlayerByString takes string pTable,string pKey returns player
    return LoadPlayerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Item
function YDWESaveItemByInteger takes integer pTable,integer pKey,item it returns nothing
    call SaveItemHandle(YDHT, pTable, pKey, it)
endfunction
function YDWESaveItemByString takes string pTable,string pKey,item it returns nothing
    call SaveItemHandle(YDHT, StringHash(pTable), StringHash(pKey), it)
endfunction
function YDWEGetItemByInteger takes integer pTable,integer pKey returns item
    return LoadItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetItemByString takes string pTable,string pKey returns item
    return LoadItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert ItemID
function YDWESaveItemIDByInteger takes integer pTable,integer pKey,integer itid returns nothing
    call SaveInteger(YDHT, pTable, pKey, itid)
endfunction
function YDWESaveItemIDByString takes string pTable,string pKey,integer itid returns nothing
    call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), itid)
endfunction
function YDWEGetItemIDByInteger takes integer pTable,integer pKey returns integer
    return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetItemIDByString takes string pTable,string pKey returns integer
    return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Timer
function YDWESaveTimerByInteger takes integer pTable,integer pKey,timer t returns nothing
    call SaveTimerHandle(YDHT, pTable, pKey, t)
endfunction
function YDWESaveTimerByString takes string pTable,string pKey,timer t returns nothing
    call SaveTimerHandle(YDHT, StringHash(pTable), StringHash(pKey), t)
endfunction
function YDWEGetTimerByInteger takes integer pTable,integer pKey returns timer
    return LoadTimerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTimerByString takes string pTable,string pKey returns timer
    return LoadTimerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Trigger
function YDWESaveTriggerByInteger takes integer pTable,integer pKey,trigger trg returns nothing
    call SaveTriggerHandle(YDHT, pTable, pKey, trg)
endfunction
function YDWESaveTriggerByString takes string pTable,string pKey,trigger trg returns nothing
    call SaveTriggerHandle(YDHT, StringHash(pTable), StringHash(pKey), trg)
endfunction
function YDWEGetTriggerByInteger takes integer pTable,integer pKey returns trigger
    return LoadTriggerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerByString takes string pTable,string pKey returns trigger
    return LoadTriggerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Location
function YDWESaveLocationByInteger takes integer pTable,integer pKey,location pt returns nothing
    call SaveLocationHandle(YDHT, pTable, pKey, pt)
endfunction
function YDWESaveLocationByString takes string pTable,string pKey,location pt returns nothing
    call SaveLocationHandle(YDHT, StringHash(pTable), StringHash(pKey), pt)
endfunction
function YDWEGetLocationByInteger takes integer pTable,integer pKey returns location
    return LoadLocationHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLocationByString takes string pTable,string pKey returns location
    return LoadLocationHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Group
function YDWESaveGroupByInteger takes integer pTable,integer pKey,group g returns nothing
    call SaveGroupHandle(YDHT, pTable, pKey, g)
endfunction
function YDWESaveGroupByString takes string pTable,string pKey,group g returns nothing
    call SaveGroupHandle(YDHT, StringHash(pTable), StringHash(pKey), g)
endfunction
function YDWEGetGroupByInteger takes integer pTable,integer pKey returns group
    return LoadGroupHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetGroupByString takes string pTable,string pKey returns group
    return LoadGroupHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Multiboard
function YDWESaveMultiboardByInteger takes integer pTable,integer pKey,multiboard m returns nothing
    call SaveMultiboardHandle(YDHT, pTable, pKey, m)
endfunction
function YDWESaveMultiboardByString takes string pTable,string pKey,multiboard m returns nothing
    call SaveMultiboardHandle(YDHT, StringHash(pTable), StringHash(pKey), m)
endfunction
function YDWEGetMultiboardByInteger takes integer pTable,integer pKey returns multiboard
    return LoadMultiboardHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetMultiboardByString takes string pTable,string pKey returns multiboard
    return LoadMultiboardHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert MultiboardItem
function YDWESaveMultiboardItemByInteger takes integer pTable,integer pKey,multiboarditem mt returns nothing
    call SaveMultiboardItemHandle(YDHT, pTable, pKey, mt)
endfunction
function YDWESaveMultiboardItemByString takes string pTable,string pKey,multiboarditem mt returns nothing
    call SaveMultiboardItemHandle(YDHT, StringHash(pTable), StringHash(pKey), mt)
endfunction
function YDWEGetMultiboardItemByInteger takes integer pTable,integer pKey returns multiboarditem
    return LoadMultiboardItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetMultiboardItemByString takes string pTable,string pKey returns multiboarditem
    return LoadMultiboardItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert TextTag
function YDWESaveTextTagByInteger takes integer pTable,integer pKey,texttag tt returns nothing
    call SaveTextTagHandle(YDHT, pTable, pKey, tt)
endfunction
function YDWESaveTextTagByString takes string pTable,string pKey,texttag tt returns nothing
    call SaveTextTagHandle(YDHT, StringHash(pTable), StringHash(pKey), tt)
endfunction
function YDWEGetTextTagByInteger takes integer pTable,integer pKey returns texttag
    return LoadTextTagHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTextTagByString takes string pTable,string pKey returns texttag
    return LoadTextTagHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Lightning
function YDWESaveLightningByInteger takes integer pTable,integer pKey,lightning ln returns nothing
    call SaveLightningHandle(YDHT, pTable, pKey, ln)
endfunction
function YDWESaveLightningByString takes string pTable,string pKey,lightning ln returns nothing
    call SaveLightningHandle(YDHT, StringHash(pTable), StringHash(pKey), ln)
endfunction
function YDWEGetLightningByInteger takes integer pTable,integer pKey returns lightning
    return LoadLightningHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLightningByString takes string pTable,string pKey returns lightning
    return LoadLightningHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Region
function YDWESaveRegionByInteger takes integer pTable,integer pKey,region rn returns nothing
    call SaveRegionHandle(YDHT, pTable, pKey, rn)
endfunction
function YDWESaveRegionByString takes string pTable,string pKey,region rt returns nothing
    call SaveRegionHandle(YDHT, StringHash(pTable), StringHash(pKey), rt)
endfunction
function YDWEGetRegionByInteger takes integer pTable,integer pKey returns region
    return LoadRegionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetRegionByString takes string pTable,string pKey returns region
    return LoadRegionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Rect
function YDWESaveRectByInteger takes integer pTable,integer pKey,rect rn returns nothing
    call SaveRectHandle(YDHT, pTable, pKey, rn)
endfunction
function YDWESaveRectByString takes string pTable,string pKey,rect rt returns nothing
    call SaveRectHandle(YDHT, StringHash(pTable), StringHash(pKey), rt)
endfunction
function YDWEGetRectByInteger takes integer pTable,integer pKey returns rect
    return LoadRectHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetRectByString takes string pTable,string pKey returns rect
    return LoadRectHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Leaderboard
function YDWESaveLeaderboardByInteger takes integer pTable,integer pKey,leaderboard lb returns nothing
    call SaveLeaderboardHandle(YDHT, pTable, pKey, lb)
endfunction
function YDWESaveLeaderboardByString takes string pTable,string pKey,leaderboard lb returns nothing
    call SaveLeaderboardHandle(YDHT, StringHash(pTable), StringHash(pKey), lb)
endfunction
function YDWEGetLeaderboardByInteger takes integer pTable,integer pKey returns leaderboard
    return LoadLeaderboardHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLeaderboardByString takes string pTable,string pKey returns leaderboard
    return LoadLeaderboardHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Effect
function YDWESaveEffectByInteger takes integer pTable,integer pKey,effect e returns nothing
    call SaveEffectHandle(YDHT, pTable, pKey, e)
endfunction
function YDWESaveEffectByString takes string pTable,string pKey,effect e returns nothing
    call SaveEffectHandle(YDHT, StringHash(pTable), StringHash(pKey), e)
endfunction
function YDWEGetEffectByInteger takes integer pTable,integer pKey returns effect
    return LoadEffectHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetEffectByString takes string pTable,string pKey returns effect
    return LoadEffectHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert Destructable
function YDWESaveDestructableByInteger takes integer pTable,integer pKey,destructable da returns nothing
    call SaveDestructableHandle(YDHT, pTable, pKey, da)
endfunction
function YDWESaveDestructableByString takes string pTable,string pKey,destructable da returns nothing
    call SaveDestructableHandle(YDHT, StringHash(pTable), StringHash(pKey), da)
endfunction
function YDWEGetDestructableByInteger takes integer pTable,integer pKey returns destructable
    return LoadDestructableHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetDestructableByString takes string pTable,string pKey returns destructable
    return LoadDestructableHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert triggercondition
function YDWESaveTriggerConditionByInteger takes integer pTable,integer pKey,triggercondition tc returns nothing
    call SaveTriggerConditionHandle(YDHT, pTable, pKey, tc)
endfunction
function YDWESaveTriggerConditionByString takes string pTable,string pKey,triggercondition tc returns nothing
    call SaveTriggerConditionHandle(YDHT, StringHash(pTable), StringHash(pKey), tc)
endfunction
function YDWEGetTriggerConditionByInteger takes integer pTable,integer pKey returns triggercondition
    return LoadTriggerConditionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerConditionByString takes string pTable,string pKey returns triggercondition
    return LoadTriggerConditionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert triggeraction
function YDWESaveTriggerActionByInteger takes integer pTable,integer pKey,triggeraction ta returns nothing
    call SaveTriggerActionHandle(YDHT, pTable, pKey, ta)
endfunction
function YDWESaveTriggerActionByString takes string pTable,string pKey,triggeraction ta returns nothing
    call SaveTriggerActionHandle(YDHT, StringHash(pTable), StringHash(pKey), ta)
endfunction
function YDWEGetTriggerActionByInteger takes integer pTable,integer pKey returns triggeraction
    return LoadTriggerActionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerActionByString takes string pTable,string pKey returns triggeraction
    return LoadTriggerActionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert event
function YDWESaveTriggerEventByInteger takes integer pTable,integer pKey,event et returns nothing
    call SaveTriggerEventHandle(YDHT, pTable, pKey, et)
endfunction
function YDWESaveTriggerEventByString takes string pTable,string pKey,event et returns nothing
    call SaveTriggerEventHandle(YDHT, StringHash(pTable), StringHash(pKey), et)
endfunction
function YDWEGetTriggerEventByInteger takes integer pTable,integer pKey returns event
    return LoadTriggerEventHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerEventByString takes string pTable,string pKey returns event
    return LoadTriggerEventHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert force
function YDWESaveForceByInteger takes integer pTable,integer pKey,force fc returns nothing
    call SaveForceHandle(YDHT, pTable, pKey, fc)
endfunction
function YDWESaveForceByString takes string pTable,string pKey,force fc returns nothing
    call SaveForceHandle(YDHT, StringHash(pTable), StringHash(pKey), fc)
endfunction
function YDWEGetForceByInteger takes integer pTable,integer pKey returns force
    return LoadForceHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetForceByString takes string pTable,string pKey returns force
    return LoadForceHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert boolexpr
function YDWESaveBoolexprByInteger takes integer pTable,integer pKey,boolexpr be returns nothing
    call SaveBooleanExprHandle(YDHT, pTable, pKey, be)
endfunction
function YDWESaveBoolexprByString takes string pTable,string pKey,boolexpr be returns nothing
    call SaveBooleanExprHandle(YDHT, StringHash(pTable), StringHash(pKey), be)
endfunction
function YDWEGetBoolexprByInteger takes integer pTable,integer pKey returns boolexpr
    return LoadBooleanExprHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetBoolexprByString takes string pTable,string pKey returns boolexpr
    return LoadBooleanExprHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert sound
function YDWESaveSoundByInteger takes integer pTable,integer pKey,sound sd returns nothing
    call SaveSoundHandle(YDHT, pTable, pKey, sd)
endfunction
function YDWESaveSoundByString takes string pTable,string pKey,sound sd returns nothing
    call SaveSoundHandle(YDHT, StringHash(pTable), StringHash(pKey), sd)
endfunction
function YDWEGetSoundByInteger takes integer pTable,integer pKey returns sound
    return LoadSoundHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetSoundByString takes string pTable,string pKey returns sound
    return LoadSoundHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert timerdialog
function YDWESaveTimerDialogByInteger takes integer pTable,integer pKey,timerdialog td returns nothing
    call SaveTimerDialogHandle(YDHT, pTable, pKey, td)
endfunction
function YDWESaveTimerDialogByString takes string pTable,string pKey,timerdialog td returns nothing
    call SaveTimerDialogHandle(YDHT, StringHash(pTable), StringHash(pKey), td)
endfunction
function YDWEGetTimerDialogByInteger takes integer pTable,integer pKey returns timerdialog
    return LoadTimerDialogHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTimerDialogByString takes string pTable,string pKey returns timerdialog
    return LoadTimerDialogHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert trackable
function YDWESaveTrackableByInteger takes integer pTable,integer pKey,trackable ta returns nothing
    call SaveTrackableHandle(YDHT, pTable, pKey, ta)
endfunction
function YDWESaveTrackableByString takes string pTable,string pKey,trackable ta returns nothing
    call SaveTrackableHandle(YDHT, StringHash(pTable), StringHash(pKey), ta)
endfunction
function YDWEGetTrackableByInteger takes integer pTable,integer pKey returns trackable
    return LoadTrackableHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTrackableByString takes string pTable,string pKey returns trackable
    return LoadTrackableHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert dialog
function YDWESaveDialogByInteger takes integer pTable,integer pKey,dialog d returns nothing
    call SaveDialogHandle(YDHT, pTable, pKey, d)
endfunction
function YDWESaveDialogByString takes string pTable,string pKey,dialog d returns nothing
    call SaveDialogHandle(YDHT, StringHash(pTable), StringHash(pKey), d)
endfunction
function YDWEGetDialogByInteger takes integer pTable,integer pKey returns dialog
    return LoadDialogHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetDialogByString takes string pTable,string pKey returns dialog
    return LoadDialogHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert button
function YDWESaveButtonByInteger takes integer pTable,integer pKey,button bt returns nothing
    call SaveButtonHandle(YDHT, pTable, pKey, bt)
endfunction
function YDWESaveButtonByString takes string pTable,string pKey,button bt returns nothing
    call SaveButtonHandle(YDHT, StringHash(pTable), StringHash(pKey), bt)
endfunction
function YDWEGetButtonByInteger takes integer pTable,integer pKey returns button
    return LoadButtonHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetButtonByString takes string pTable,string pKey returns button
    return LoadButtonHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert quest
function YDWESaveQuestByInteger takes integer pTable,integer pKey,quest qt returns nothing
    call SaveQuestHandle(YDHT, pTable, pKey, qt)
endfunction
function YDWESaveQuestByString takes string pTable,string pKey,quest qt returns nothing
    call SaveQuestHandle(YDHT, StringHash(pTable), StringHash(pKey), qt)
endfunction
function YDWEGetQuestByInteger takes integer pTable,integer pKey returns quest
    return LoadQuestHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetQuestByString takes string pTable,string pKey returns quest
    return LoadQuestHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
//Covert questitem
function YDWESaveQuestItemByInteger takes integer pTable,integer pKey,questitem qi returns nothing
    call SaveQuestItemHandle(YDHT, pTable, pKey, qi)
endfunction
function YDWESaveQuestItemByString takes string pTable,string pKey,questitem qi returns nothing
    call SaveQuestItemHandle(YDHT, StringHash(pTable), StringHash(pKey), qi)
endfunction
function YDWEGetQuestItemByInteger takes integer pTable,integer pKey returns questitem
    return LoadQuestItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetQuestItemByString takes string pTable,string pKey returns questitem
    return LoadQuestItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWES2I takes string s returns integer
    return StringHash(s)
endfunction
function YDWESaveAbilityHandleBJ takes integer AbilityID,integer key,integer missionKey,hashtable table returns nothing
    call SaveInteger(table, missionKey, key, AbilityID)
endfunction
function YDWESaveAbilityHandle takes hashtable table,integer parentKey,integer childKey,integer AbilityID returns nothing
    call SaveInteger(table, parentKey, childKey, AbilityID)
endfunction
function YDWELoadAbilityHandleBJ takes integer key,integer missionKey,hashtable table returns integer
    return LoadInteger(table, missionKey, key)
endfunction
function YDWELoadAbilityHandle takes hashtable table,integer parentKey,integer childKey returns integer
    return LoadInteger(table, parentKey, childKey)
endfunction
//===========================================================================
//返回参数
//===========================================================================
//地图边界判断
function YDWECoordinateX takes real x returns real
    return RMinBJ(RMaxBJ(x, yd_MapMinX), yd_MapMaxX)
endfunction
function YDWECoordinateY takes real y returns real
    return RMinBJ(RMaxBJ(y, yd_MapMinY), yd_MapMaxY)
endfunction
//两个单位之间的距离
function YDWEDistanceBetweenUnits takes unit a,unit b returns real
    return SquareRoot(( GetUnitX(a) - GetUnitX(b) ) * ( GetUnitX(a) - GetUnitX(b) ) + ( GetUnitY(a) - GetUnitY(b) ) * ( GetUnitY(a) - GetUnitY(b) ))
endfunction
//两个单位之间的角度
function YDWEAngleBetweenUnits takes unit fromUnit,unit toUnit returns real
    return bj_RADTODEG * Atan2(GetUnitY(toUnit) - GetUnitY(fromUnit), GetUnitX(toUnit) - GetUnitX(fromUnit))
endfunction
//生成区域
function YDWEGetRect takes real x,real y,real width,real height returns rect
    return Rect(x - width * 0.5, y - height * 0.5, x + width * 0.5, y + height * 0.5)
endfunction
//===========================================================================
//设置单位可以飞行
//===========================================================================
function YDWEFlyEnable takes unit u returns nothing
    call UnitAddAbility(u, 'Amrf')
    call UnitRemoveAbility(u, 'Amrf')
endfunction
//===========================================================================
//字符窜与ID转换
//===========================================================================
function YDWEId2S takes integer value returns string
    local string charMap=bj_AllString
    local string result= ""
    local integer remainingValue= value
    local integer charValue
    local integer byteno
    set byteno=0
    loop
        set charValue=ModuloInteger(remainingValue, 256)
        set remainingValue=remainingValue / 256
        set result=SubString(charMap, charValue, charValue + 1) + result
        set byteno=byteno + 1
        exitwhen byteno == 4
    endloop
    return result
endfunction
function YDWES2Id takes string targetstr returns integer
    local string originstr=bj_AllString
    local integer strlength=StringLength(targetstr)
    local integer a=0
local integer b=0
local integer numx=1
local integer result=0
    loop
    exitwhen b > strlength - 1
        set numx=R2I(Pow(256, strlength - 1 - b))
        set a=1
        loop
            exitwhen a > 255
            if SubString(targetstr, b, b + 1) == SubString(originstr, a, a + 1) then
                set result=result + a * numx
                set a=256
            endif
            set a=a + 1
        endloop
        set b=b + 1
    endloop
    return result
endfunction
function YDWES2UnitId takes string targetstr returns integer
    return YDWES2Id(targetstr)
endfunction
function YDWES2ItemId takes string targetstr returns integer
    return YDWES2Id(targetstr)
endfunction
function GetLastAbilityCastingUnit takes nothing returns unit
    return bj_lastAbilityCastingUnit
endfunction
function GetLastAbilityTargetUnit takes nothing returns unit
    return bj_lastAbilityTargetUnit
endfunction
function YDWESetMapLimitCoordinate takes real MinX,real MaxX,real MinY,real MaxY returns nothing
    set yd_MapMaxX=MaxX
    set yd_MapMinX=MinX
    set yd_MapMaxY=MaxY
    set yd_MapMinY=MinY
endfunction
//===========================================================================
//===========================================================================
//地图初始化
//===========================================================================
//YDWE特殊技能结束事件 
function YDWESyStemAbilityCastingOverTriggerAction takes unit hero,integer index returns nothing
 local integer i= 0
    loop
        exitwhen i >= YDWEBase__AbilityCastingOverEventNumber
        if YDWEBase__AbilityCastingOverEventType[i] == index then
            set bj_lastAbilityCastingUnit=hero
			if YDWEBase__AbilityCastingOverEventQueue[i] != null and TriggerEvaluate(YDWEBase__AbilityCastingOverEventQueue[i]) and IsTriggerEnabled(YDWEBase__AbilityCastingOverEventQueue[i]) then
				call TriggerExecute(YDWEBase__AbilityCastingOverEventQueue[i])
			endif
		endif
        set i=i + 1
    endloop
endfunction
//===========================================================================  
//YDWE技能捕捉事件 
//===========================================================================  
function YDWESyStemAbilityCastingOverRegistTrigger takes trigger trg,integer index returns nothing
	set YDWEBase__AbilityCastingOverEventQueue[YDWEBase__AbilityCastingOverEventNumber]=trg
	set YDWEBase__AbilityCastingOverEventType[YDWEBase__AbilityCastingOverEventNumber]=index
	set YDWEBase__AbilityCastingOverEventNumber=YDWEBase__AbilityCastingOverEventNumber + 1
endfunction 
//===========================================================================
//系统函数完善
//===========================================================================
function YDWECreateUnitPool takes nothing returns nothing
    set bj_lastCreatedUnitPool=CreateUnitPool()
endfunction
function YDWEPlaceRandomUnit takes unitpool up,player p,real x,real y,real face returns nothing
set bj_lastPoolAbstractedUnit=PlaceRandomUnit(up, p, x, y, face)
endfunction
function YDWEGetLastUnitPool takes nothing returns unitpool
    return bj_lastCreatedUnitPool
endfunction
function YDWEGetLastPoolAbstractedUnit takes nothing returns unit
    return bj_lastPoolAbstractedUnit
endfunction
function YDWECreateItemPool takes nothing returns nothing
    set bj_lastCreatedItemPool=CreateItemPool()
endfunction
function YDWEPlaceRandomItem takes itempool ip,real x,real y returns nothing
set bj_lastPoolAbstractedItem=PlaceRandomItem(ip, x, y)
endfunction
function YDWEGetLastItemPool takes nothing returns itempool
    return bj_lastCreatedItemPool
endfunction
function YDWEGetLastPoolAbstractedItem takes nothing returns item
    return bj_lastPoolAbstractedItem
endfunction
function YDWESetAttackDamageWeaponType takes attacktype at,damagetype dt,weapontype wt returns nothing
    set bj_lastSetAttackType=at
    set bj_lastSetDamageType=dt
    set bj_lastSetWeaponType=wt
endfunction
//unitpool bj_lastCreatedPool=null
//unit bj_lastPoolAbstractedUnit=null
function YDWEGetPlayerColorString takes player p,string s returns string
    return YDWEBase__yd_PlayerColor[GetHandleId(GetPlayerColor(p))] + s + "|r"
endfunction
//===========================================================================
//===========================================================================
//系统函数补充
//===========================================================================
//===========================================================================
function YDWEGetUnitItemSoftId takes unit hero,item it returns integer
    local integer i= 0
    loop
         exitwhen i > 5
         if UnitItemInSlot(hero, i) == it then
            return i + 1
         endif
         set i=i + 1
    endloop
    return 0
endfunction
//===========================================================================
//===========================================================================
//地图初始化
//===========================================================================
//===========================================================================
//显示版本
function YDWEVersion_Display takes nothing returns boolean
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, "|cFF1E90FF当前编辑器版本为： |r|cFF00FF00YDWE 1.31.8.1850")
    return false
endfunction
function YDWEVersion_Init takes nothing returns nothing
    local trigger t= CreateTrigger()
    local integer i= 0
    loop
        exitwhen i == 12
        call TriggerRegisterPlayerChatEvent(t, Player(i), "YDWE Version", true)
        set i=i + 1
    endloop
    call TriggerAddCondition(t, Condition(function YDWEVersion_Display))
    set t=null
endfunction
function InitializeYD takes nothing returns nothing
     set YDHT=InitHashtable()
	//=================设置变量=====================
	set yd_MapMinX=GetCameraBoundMinX() - GetCameraMargin(CAMERA_MARGIN_LEFT)
	set yd_MapMinY=GetCameraBoundMinY() - GetCameraMargin(CAMERA_MARGIN_BOTTOM)
	set yd_MapMaxX=GetCameraBoundMaxX() + GetCameraMargin(CAMERA_MARGIN_RIGHT)
	set yd_MapMaxY=GetCameraBoundMaxY() + GetCameraMargin(CAMERA_MARGIN_TOP)
	
    set YDWEBase__yd_PlayerColor[0]="|cFFFF0303"
    set YDWEBase__yd_PlayerColor[1]="|cFF0042FF"
    set YDWEBase__yd_PlayerColor[2]="|cFF1CE6B9"
    set YDWEBase__yd_PlayerColor[3]="|cFF540081"
    set YDWEBase__yd_PlayerColor[4]="|cFFFFFC01"
    set YDWEBase__yd_PlayerColor[5]="|cFFFE8A0E"
    set YDWEBase__yd_PlayerColor[6]="|cFF20C000"
    set YDWEBase__yd_PlayerColor[7]="|cFFE55BB0"
    set YDWEBase__yd_PlayerColor[8]="|cFF959697"
    set YDWEBase__yd_PlayerColor[9]="|cFF7EBFF1"
    set YDWEBase__yd_PlayerColor[10]="|cFF106246"
    set YDWEBase__yd_PlayerColor[11]="|cFF4E2A04"
    set YDWEBase__yd_PlayerColor[12]="|cFF282828"
    set YDWEBase__yd_PlayerColor[13]="|cFF282828"
    set YDWEBase__yd_PlayerColor[14]="|cFF282828"
    set YDWEBase__yd_PlayerColor[15]="|cFF282828"
    //=================显示版本=====================
    call YDWEVersion_Init()
endfunction

//library YDWEBase ends
//library YDWEBitwise:
    
    function YDWEBitwise__Bit takes integer x returns boolean
        return ( x - x / 2 * 2 ) != 0
    endfunction 
    
 function YDWEBitwise__NOT_P takes integer x returns integer
  local integer l__z= 0
  local integer i= 0
	
		loop
			exitwhen ( i == 31 )
			if not YDWEBitwise__Bit(x) then
				set l__z=l__z + YDWEBitwise__C2[i]
			endif
			set x=x / 2
			set i=i + 1
		endloop
	
		return l__z
	endfunction
 function YDWEBitwise_NOT takes integer x returns integer
		if x >= 0 then
            return YDWEBitwise__NOT_P(x) + YDWEBitwise__C2[31]
        else
            return - x - 1
        endif
	endfunction
    
    function YDWEBitwise__AND_P takes integer x,integer y returns integer
  local integer l__z= 0
  local integer i= 0
	
		loop
			exitwhen ( i == 31 )
			if YDWEBitwise__Bit(x) and YDWEBitwise__Bit(y) then
				set l__z=l__z + YDWEBitwise__C2[i]
			endif
			set x=x / 2
			set y=y / 2
			set i=i + 1
		endloop
	
		return l__z
    endfunction 
    function YDWEBitwise_AND takes integer x,integer y returns integer
		if x >= 0 then
            if y >= 0 then
                return YDWEBitwise__AND_P(x , y)
            else
                return YDWEBitwise__AND_P(x , YDWEBitwise__NOT_P(- y - 1))
            endif
        else
            if y >= 0 then
                return YDWEBitwise__AND_P(YDWEBitwise__NOT_P(- x - 1) , y)
            else
                return YDWEBitwise__AND_P(YDWEBitwise__NOT_P(- x - 1) , YDWEBitwise__NOT_P(- y - 1)) + YDWEBitwise__C2[31]
            endif
        endif
    endfunction
    
    function YDWEBitwise__OR_P takes integer x,integer y returns integer
  local integer l__z= 0
  local integer i= 0
	
		loop
			exitwhen ( i == 31 )
			if YDWEBitwise__Bit(x) or YDWEBitwise__Bit(y) then
				set l__z=l__z + YDWEBitwise__C2[i]
			endif
			set x=x / 2
			set y=y / 2
			set i=i + 1
		endloop
	
		return l__z
    endfunction 
    function YDWEBitwise_OR takes integer x,integer y returns integer
		if x >= 0 then
            if y >= 0 then
                return YDWEBitwise__OR_P(x , y)
            else
                return YDWEBitwise__OR_P(x , YDWEBitwise__NOT_P(- y - 1)) + YDWEBitwise__C2[31]
            endif
        else
            if y >= 0 then
                return YDWEBitwise__OR_P(YDWEBitwise__NOT_P(- x - 1) , y) + YDWEBitwise__C2[31]
            else
                return YDWEBitwise__OR_P(YDWEBitwise__NOT_P(- x - 1) , YDWEBitwise__NOT_P(- y - 1)) + YDWEBitwise__C2[31]
            endif
        endif
    endfunction
    function YDWEBitwise__XOR_P takes integer x,integer y returns integer
  local integer l__z= 0
  local integer i= 0
	
		loop
			exitwhen ( i == 31 )
			if YDWEBitwise__Bit(x) != YDWEBitwise__Bit(y) then
				set l__z=l__z + YDWEBitwise__C2[i]
			endif
			set x=x / 2
			set y=y / 2
			set i=i + 1
		endloop
	
		return l__z
    endfunction 
    function YDWEBitwise_XOR takes integer x,integer y returns integer
		if x >= 0 then
            if y >= 0 then
                return YDWEBitwise__XOR_P(x , y)
            else
                return YDWEBitwise__XOR_P(x , YDWEBitwise__NOT_P(- y - 1)) + YDWEBitwise__C2[31]
            endif
        else
            if y >= 0 then
                return YDWEBitwise__XOR_P(YDWEBitwise__NOT_P(- x - 1) , y) + YDWEBitwise__C2[31]
            else
                return YDWEBitwise__XOR_P(YDWEBitwise__NOT_P(- x - 1) , YDWEBitwise__NOT_P(- y - 1))
            endif
        endif
    endfunction
    
    function YDWEBitwise__LShift_P takes integer x,integer n returns integer
        return x * YDWEBitwise__C2[n]
    endfunction
    function YDWEBitwise_LShift takes integer x,integer n returns integer
        return x * YDWEBitwise__C2[n]
    endfunction
    
    function YDWEBitwise__RShift_P takes integer x,integer n returns integer
        return x / YDWEBitwise__C2[n]
    endfunction
    function YDWEBitwise_RShift takes integer x,integer n returns integer
		if x >= 0 then
            return ((x ) / YDWEBitwise__C2[( n)]) // INLINED!!
        else
            return ((YDWEBitwise__NOT_P(- x - 1) ) / YDWEBitwise__C2[( n)]) + YDWEBitwise__C2[31 - n] // INLINED!!
        endif
    endfunction
    
    function YDWEBitwise__ToHexChar takes integer x returns string
        return SubString(YDWEBitwise__hexstr, x, x + 1)
    endfunction 
    function YDWEBitwise__ToHexChar7 takes integer x returns string
        local string s= ""
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        set s=YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
        set x=x / $10
        return YDWEBitwise__ToHexChar(x - x / $10 * $10) + s
    endfunction
    function YDWEBitwise_ToHexString takes integer x returns string
		if x >= 0 then
            return YDWEBitwise__ToHexChar(x / $10000000) + YDWEBitwise__ToHexChar7(x)
        else
            set x=YDWEBitwise__NOT_P(- x - 1)
            return YDWEBitwise__ToHexChar($8 + x / $10000000) + YDWEBitwise__ToHexChar7(x)
        endif
    endfunction

 function YDWEBitwise__onInit takes nothing returns nothing
  local integer i= 1
		set YDWEBitwise__C2[0]=1
		loop
			exitwhen ( i == 32 )
			set YDWEBitwise__C2[i]=YDWEBitwise__C2[i - 1] * 2
			set i=i + 1
		endloop

	endfunction 

//library YDWEBitwise ends
//library YDWEGeneralBounsSystem:

//以下函数仅仅是让技能ID出现在代码里，不然SLK优化器会删除这些技能
function YDWEGeneralBounsSystem__DisplayAllAbilityId takes nothing returns nothing
    local integer aid=0
    set aid='YDl0'
    set aid='YDl1'
    set aid='YDl2'
    set aid='YDl3'
    set aid='YDl4'
    set aid='YDl5'
    set aid='YDl6'
    set aid='YDl7'
    set aid='YDl8'
    set aid='YDl9'
    set aid='YDla'
    set aid='YDlb'
    set aid='YDlc'
    set aid='YDld'
    set aid='YDle'
    set aid='YDlf'
    set aid='YDm0'
    set aid='YDm1'
    set aid='YDm2'
    set aid='YDm3'
    set aid='YDm4'
    set aid='YDm5'
    set aid='YDm6'
    set aid='YDm7'
    set aid='YDm8'
    set aid='YDm9'
    set aid='YDma'
    set aid='YDmb'
    set aid='YDmc'
    set aid='YDmd'
    set aid='YDme'
    set aid='YDmf'
    set aid='YDc0'
    set aid='YDc1'
    set aid='YDc2'
    set aid='YDc3'
    set aid='YDc4'
    set aid='YDc5'
    set aid='YDc6'
    set aid='YDc7'
    set aid='YDc8'
    set aid='YDc9'
    set aid='YDca'
    set aid='YDcb'
    set aid='YDcc'
    set aid='YDb0'
    set aid='YDb1'
    set aid='YDb2'
    set aid='YDb3'
    set aid='YDb4'
    set aid='YDb5'
    set aid='YDb6'
    set aid='YDb7'
    set aid='YDb8'
    set aid='YDb9'
    set aid='YDba'
    set aid='YDbb'
    set aid='YDbc'
    set aid='YDbd'
    set aid='YDbe'
    set aid='YDbf'
    set aid='YDbg'
    set aid='YDbh'
    set aid='YDbi'
    set aid='YDbj'
    set aid='YDbk'
    set aid='YDbl'
    set aid='YDbm'
    set aid='YDbn'
endfunction
    function YDWEGeneralBounsSystem__UnitClearBonus takes unit u,integer bonusType returns nothing
        local integer i=YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 1
        loop
            exitwhen i < YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType]
            call UnitRemoveAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
            set i=i - 1
        endloop
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusType" + I2S(bonusType) )), ( 0)) // INLINED!!
    endfunction
    function YDWEGeneralBounsSystem__SetUnitMaxState takes unit u,integer bonusType,real value returns boolean
        local integer v=R2I(value)
        local integer s=0
        local integer o=0
        local unitstate state
        local integer i=YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 2
        local integer a=YDWEGeneralBounsSystem__ABILITY_NUM[bonusType]
        if value > 65535 or value <= 0 then
            return false
        endif
        if bonusType == 0 then
            set state=UNIT_STATE_MAX_LIFE
          elseif bonusType == 1 then
            set state=UNIT_STATE_MAX_MANA
          else
            return false
        endif
        set v=v - R2I(GetUnitState(u, state))
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusType" + I2S(bonusType) )), ( v)) // INLINED!!
        if v > 0 then
            set o=3
          elseif v < 0 then
            set o=2
            set v=- v
          else
            return false
        endif
        loop
            exitwhen i < YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType]
            if v >= YDWEGeneralBounsSystem__PowersOf2[i] then
                call UnitAddAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
                call SetUnitAbilityLevel(u, YDWEGeneralBounsSystem__BonusAbilitys[i], o)
                call UnitRemoveAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
                set v=v - YDWEGeneralBounsSystem__PowersOf2[i]
            endif
            set i=i - 1
        endloop
        return true
    endfunction
function YDWEGeneralBounsSystem__UnitSetBonus takes unit u,integer bonusType,integer ammount returns boolean
    local integer i
    //设置属性为0不进行Loop
    if ammount == 0 then
        call YDWEGeneralBounsSystem__UnitClearBonus(u , bonusType)
        return false
    endif
    if ammount < YDWEGeneralBounsSystem__MinBonus[bonusType] or ammount > YDWEGeneralBounsSystem__MaxBonus[bonusType] then
        return false
    elseif bonusType < 0 or bonusType >= YDWEGeneralBounsSystem__BONUS_TYPES then
        return false
    endif
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusType" + I2S(bonusType) )), ( ammount)) // INLINED!!
    if ammount < 0 then
        set ammount=YDWEGeneralBounsSystem__MaxBonus[bonusType] + ammount + 1
        call UnitAddAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 1])
        call UnitMakeAbilityPermanent(u, true, YDWEGeneralBounsSystem__BonusAbilitys[YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 1])
      else
        call UnitRemoveAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 1])
    endif
    set i=YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType + 1] - 2
    loop
        exitwhen i < YDWEGeneralBounsSystem__ABILITY_COUNT[bonusType]
        if ammount >= YDWEGeneralBounsSystem__PowersOf2[i] then
            call UnitAddAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
            call UnitMakeAbilityPermanent(u, true, YDWEGeneralBounsSystem__BonusAbilitys[i])
            set ammount=ammount - YDWEGeneralBounsSystem__PowersOf2[i]
        else
            call UnitRemoveAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
        endif
        set i=i - 1
    endloop
    if not (LoadBoolean(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusMark")))) then // INLINED!!
        call SaveBoolean(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusMark" )), ( true)) // INLINED!!
        set YDWEGeneralBounsSystem__UnitCount=YDWEGeneralBounsSystem__UnitCount + 1
        set YDWEGeneralBounsSystem__Units[YDWEGeneralBounsSystem__UnitCount]=u
    endif
    return true
endfunction
function YDWEGeneralBounsSystem__UnitGetBonus takes unit u,integer bonusType returns integer
    return (LoadInteger(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusType" + I2S(bonusType))))) // INLINED!!
endfunction
function YDWEGeneralBounsSystem__AddUnitMaxState takes unit u,integer bonusType,real value returns boolean
    local unitstate state
    if bonusType == 0 then
        set state=UNIT_STATE_MAX_LIFE
      elseif bonusType == 1 then
        set state=UNIT_STATE_MAX_MANA
      else
        return false
    endif
    return YDWEGeneralBounsSystem__SetUnitMaxState(u , bonusType , value + GetUnitState(u, state))
endfunction
function YDWEGeneralBounsSystem__UnitAddBonus takes unit u,integer bonusType,integer ammount returns boolean
    return YDWEGeneralBounsSystem__UnitSetBonus(u , bonusType , (LoadInteger(YDHT, StringHash((I2S((GetHandleId(((u ))))) )), StringHash(( "bonusType" + I2S(( bonusType)))))) + ammount) // INLINED!!
endfunction
function YDWEGeneralBounsSystem__FlushUnits takes nothing returns nothing
    local integer i= YDWEGeneralBounsSystem__UnitCount
    local string h
    loop
        exitwhen i < 1
        if GetUnitTypeId(YDWEGeneralBounsSystem__Units[i]) == 0 then
            set h=I2S((GetHandleId((YDWEGeneralBounsSystem__Units[i])))) // INLINED!!
            call SaveInteger(YDHT, StringHash((h )), StringHash(( "bonusType0" )), ( 0)) // INLINED!!
            call SaveInteger(YDHT, StringHash((h )), StringHash(( "bonusType1" )), ( 0)) // INLINED!!
            call SaveInteger(YDHT, StringHash((h )), StringHash(( "bonusType2" )), ( 0)) // INLINED!!
            call SaveInteger(YDHT, StringHash((h )), StringHash(( "bonusType3" )), ( 0)) // INLINED!!
            call SaveBoolean(YDHT, StringHash((h )), StringHash(( "bonusMark" )), ( false)) // INLINED!!
            set YDWEGeneralBounsSystem__Units[i]=YDWEGeneralBounsSystem__Units[YDWEGeneralBounsSystem__UnitCount]
            set YDWEGeneralBounsSystem__Units[YDWEGeneralBounsSystem__UnitCount]=null
            set YDWEGeneralBounsSystem__UnitCount=YDWEGeneralBounsSystem__UnitCount - 1
        endif
        set i=i - 1
    endloop
endfunction
function YDWEUnitSetBonus takes unit u,integer bonusType,integer ammount returns nothing
    if bonusType == 0 or bonusType == 1 then
        call YDWEGeneralBounsSystem__SetUnitMaxState(u , bonusType , ammount)
      else
        call YDWEGeneralBounsSystem__UnitSetBonus(u , bonusType , ammount)
    endif
endfunction
function YDWEUnitAddBonus takes unit u,integer bonusType,integer ammount returns nothing
    if bonusType == 0 or bonusType == 1 then
        call YDWEGeneralBounsSystem__AddUnitMaxState(u , bonusType , ammount)
      else
        call YDWEGeneralBounsSystem__UnitAddBonus(u , bonusType , ammount)
    endif
endfunction
function YDWEGeneralBounsSystemUnitSetBonus takes unit u,integer bonusType,integer mod,integer ammount returns nothing
    if mod == 0 then
        call YDWEUnitAddBonus(u , bonusType , ammount)
      elseif mod == 1 then
        call YDWEUnitAddBonus(u , bonusType , 0 - ammount)
      else
        call YDWEUnitSetBonus(u , bonusType , ammount)
    endif
endfunction
function YDWEGeneralBounsSystemUnitGetBonus takes unit u,integer bonusType returns integer
    return (LoadInteger(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "bonusType" + I2S(bonusType))))) // INLINED!!
endfunction
//private keyword BonusAbilitys
function YDWEGeneralBounsSystem__InitializeAbilitys takes nothing returns nothing
    local integer i=0
    local integer m=0
    set YDWEGeneralBounsSystem__ABILITY_COUNT[0]=0 //life max
set YDWEGeneralBounsSystem__ABILITY_COUNT[1]=15 //mana max
set YDWEGeneralBounsSystem__ABILITY_COUNT[2]=30 //armor
set YDWEGeneralBounsSystem__ABILITY_COUNT[3]=43 //attack
set YDWEGeneralBounsSystem__ABILITY_COUNT[4]=67
    set YDWEGeneralBounsSystem__ABILITY_NUM[0]=15
    set YDWEGeneralBounsSystem__ABILITY_NUM[1]=15
    set YDWEGeneralBounsSystem__ABILITY_NUM[2]=13
    set YDWEGeneralBounsSystem__ABILITY_NUM[3]=24
    // Bonus Mod - armor abilitys
    loop
        exitwhen i > 9
        set YDWEGeneralBounsSystem__YDWEBONUS_MyChar[i]='0' + m
        set m=m + 1
        set i=i + 1
    endloop
    set m=0
    loop
        exitwhen i > 26
        set YDWEGeneralBounsSystem__YDWEBONUS_MyChar[i]='a' + m
        set m=m + 1
        set i=i + 1
    endloop
    set i=0
    set m=0
    loop
        exitwhen m > ( YDWEGeneralBounsSystem__ABILITY_NUM[0] - 1 )
        set YDWEGeneralBounsSystem__BonusAbilitys[i]='YDl0' - '0' + YDWEGeneralBounsSystem__YDWEBONUS_MyChar[m] // +1
        set i=i + 1
        set m=m + 1
    endloop
    // Bonus Mod - Damage abilitys
    set m=0
    loop
        exitwhen m > ( YDWEGeneralBounsSystem__ABILITY_NUM[1] - 1 )
        set YDWEGeneralBounsSystem__BonusAbilitys[i]='YDm0' - '0' + YDWEGeneralBounsSystem__YDWEBONUS_MyChar[m] // +1
        set i=i + 1
        set m=m + 1
    endloop
    // Bonus Mod - Life MaxState abilitys
    set m=0
    loop
        exitwhen m > ( YDWEGeneralBounsSystem__ABILITY_NUM[2] - 1 )
        set YDWEGeneralBounsSystem__BonusAbilitys[i]='YDc0' - '0' + YDWEGeneralBounsSystem__YDWEBONUS_MyChar[m] // +1
        set i=i + 1
        set m=m + 1
    endloop
    // Bonus Mod - Mana MaxState abilitys
    set m=0
    loop
        exitwhen m > ( YDWEGeneralBounsSystem__ABILITY_NUM[3] - 1 )
        set YDWEGeneralBounsSystem__BonusAbilitys[i]='YDb0' - '0' + YDWEGeneralBounsSystem__YDWEBONUS_MyChar[m] // +1
        set i=i + 1
        set m=m + 1
    endloop
endfunction
function YDWEGeneralBounsSystem__Initialize takes nothing returns nothing
    local integer i= 1
    local unit u
    local integer n=0
    local integer add=0
    call YDWEGeneralBounsSystem__InitializeAbilitys()
    loop
        set i=1
        set YDWEGeneralBounsSystem__PowersOf2[add]=1
            loop
                set YDWEGeneralBounsSystem__PowersOf2[add + 1]=YDWEGeneralBounsSystem__PowersOf2[add] * 2
                set add=add + 1
                set i=i + 1
                exitwhen i == YDWEGeneralBounsSystem__ABILITY_NUM[n]
            endloop
        set YDWEGeneralBounsSystem__MaxBonus[n]=YDWEGeneralBounsSystem__PowersOf2[add] - 1
        set YDWEGeneralBounsSystem__MinBonus[n]=- YDWEGeneralBounsSystem__PowersOf2[add]
        set add=add + 1
        set n=n + 1
        exitwhen n >= 4
    endloop
    //预读技能
    if YDWEGeneralBounsSystem__PRELOAD_ABILITYS then
        set u=CreateUnit(Player(15), YDWEGeneralBounsSystem__PRELOAD_DUMMY_UNIT, 0, 0, 0)
        set i=0
        loop
            exitwhen i == YDWEGeneralBounsSystem__ABILITY_COUNT[5]
            call UnitAddAbility(u, YDWEGeneralBounsSystem__BonusAbilitys[i])
            set i=i + 1
        endloop
        call RemoveUnit(u)
        set u=null
    endif
    //回收数据
    call TimerStart(CreateTimer(), 10, true, function YDWEGeneralBounsSystem__FlushUnits)
endfunction
function YDWELifeChange takes unit u,integer mod,integer ch,integer id returns nothing
    local integer a
    local integer b
    local integer c
    local integer d
    local integer aid= id
    if mod == 1 then
        set ch=- ch
      elseif mod == 2 then
        set ch=ch - R2I(GetUnitState(u, UNIT_STATE_MAX_LIFE))
    endif
    //set YDWEADDBONUS_LIFE=YDWEADDBONUS_LIFE+ch
    if ch > 99999 then
        set ch=99999
    endif
    if ch < - 99999 then
        set ch=- 99999
    endif
    if ch < 0 then
        set a=2
        set ch=- ch
    else
        set a=7
    endif
    set b=0
    loop
        exitwhen b == 5
        set c=ch - ch / 10 * 10
        set d=0
        loop
            exitwhen d == c
            call UnitAddAbility(u, aid)
            call SetUnitAbilityLevel(u, aid, a)
            call UnitRemoveAbility(u, aid)
            set d=d + 1
        endloop
        set ch=ch / 10
        set a=a + 1
        set b=b + 1
    endloop
endfunction
//===========================================================================
//修改魔法
//===========================================================================
function YDWEManaChange takes unit u,integer mod,integer ch,integer id returns nothing
    local integer a
    local integer b
    local integer c
    local integer d
    local integer aid= id
    if mod == 1 then
        set ch=- ch
      elseif mod == 2 then
        set ch=ch - R2I(GetUnitState(u, UNIT_STATE_MAX_MANA))
    endif
    //set YDWEADDBONUS_MANA=YDWEADDBONUS_MANA+ch
    if ch > 99999 then
        set ch=99999
    endif
    if ch < - 99999 then
        set ch=- 99999
    endif
    if ch < 0 then
        set a=2
        set ch=- ch
    else
        set a=7
    endif
    set b=0
    loop
        exitwhen b == 5
        set c=ch - ch / 10 * 10
        set d=0
        loop
            exitwhen d == c
            call UnitAddAbility(u, aid)
            call SetUnitAbilityLevel(u, aid, a)
            call UnitRemoveAbility(u, aid)
            set d=d + 1
        endloop
        set ch=ch / 10
        set a=a + 1
        set b=b + 1
    endloop
endfunction

//library YDWEGeneralBounsSystem ends
//library YDWEGetUnitsInRangeOfLocMatchingNull:
function YDWEGetUnitsInRangeOfLocMatchingNull takes real radius,location whichLocation,boolexpr filter returns group
    local group g= CreateGroup()
    call GroupEnumUnitsInRangeOfLoc(g, whichLocation, radius, filter)
    call DestroyBoolExpr(filter)
    set yd_NullTempGroup=g
    set g=null
    return yd_NullTempGroup
endfunction

//library YDWEGetUnitsInRangeOfLocMatchingNull ends
//library YDWELogarithm:
// Author : zyl910
// Modified by : c kuhn
// [private]用级数计算以e为底的对数
// Returns 0 if x <= 0
function YDWELogarithm__ln_taylor takes real x returns real
    // ln( (1+x) / (1-x) ) = ln(1+x) - ln(1-x) = 2 * ( x + x^3 / 3 + x^5 / 5 + ... )
    // x = (y-1) / (y+1)
    // (0 < y < +∞, -1 < x < 1)
    local real fRet= 0.
    local real x2
local real fCur
    local real fDiv= 1.
    
    if x > 0 then
        set x=( x - 1. ) / ( x + 1. )
        set x2=x * x
        loop
            set fCur=fRet + x * 2. / fDiv
            exitwhen fRet >= fCur and fRet <= fCur
            set fRet=fCur
            set x=x * x2
            set fDiv=fDiv + 2.
        endloop
    endif
    
    return fRet
endfunction
// Author : c kuhn
// 通过满二叉树特性快速找到大的部分
function YDWELogarithm__Log2 takes real x returns real
    local real res= 0.
    local real sign=1.
    local real i= 64.
    local real level= 32.
    local real mid
    local real temp
    local real fac= 0.
    local integer count= 6
    if x > 0 and ( x < 1 or x > 1 ) then
        if x < 1 then
            set sign=- 1.
            set x=1. / x
        endif
        if x >= 2. then
            set mid=YDWELogarithm__base[7]
            loop
                set temp=x / mid
                exitwhen temp >= 1. and temp < 2.
                if x < mid then
                    set i=i - level
                    set mid=mid / YDWELogarithm__base[count]
                else
                    set i=i + level
                    set mid=mid * YDWELogarithm__base[count]
                endif
                set level=level / 2.
                set count=count - 1
            endloop
            set fac=i
            set x=temp
        endif
        //根号2
        if x > 1.4142135 then
            set x=x / 1.4142135
            set fac=fac + .5
        endif
        set res=sign * ( fac + YDWELogarithm__ln_taylor(x) * 1.442695 )
    endif
    
    return res
endfunction
// 以 10 为底的对数
// Returns 0 if x <= 0
function YDWELogarithmLg takes real x returns real
    return YDWELogarithm__Log2(x) * 0.3010300 // 1/log2(10) = 0.30102999566398119521373889472449
endfunction
// 以 e 为底的对数
// Returns 0 if x <= 0
function YDWELogarithmLn takes real x returns real
    return YDWELogarithm__Log2(x) * 0.6931472 // 1/log2(e) = 0.69314718055994530941723212145818
endfunction
// 以 任意数 为底的对数 
function YDWELogarithmLog takes real a,real x returns real
    if a <= 0 or ( a <= 1 and a >= 1 ) then
        return 0.
    endif
    return YDWELogarithm__Log2(x) / YDWELogarithm__Log2(a)
endfunction
function YDWELogarithm__onInit takes nothing returns nothing
    set YDWELogarithm__base[1]=2.
    set YDWELogarithm__base[2]=4.
    set YDWELogarithm__base[3]=16.
    set YDWELogarithm__base[4]=256.
    set YDWELogarithm__base[5]=65536.
    //过大的数必须用乘法
    set YDWELogarithm__base[6]=65536. * 65536. //2^32
set YDWELogarithm__base[7]=YDWELogarithm__base[6] * YDWELogarithm__base[6] //2^64
endfunction

//library YDWELogarithm ends
//library YDWEPolledWaitNull:
function YDWEPolledWaitNull takes real duration returns nothing
    local timer t
    local real timeRemaining
    if ( duration > 0 ) then
        set t=CreateTimer()
        call TimerStart(t, duration, false, null)
        loop
            set timeRemaining=TimerGetRemaining(t)
            exitwhen timeRemaining <= 0
            // If we have a bit of time left, skip past 10% of the remaining
            // duration instead of checking every interval, to minimize the
            // polling on long waits.
            if ( timeRemaining > bj_POLLED_WAIT_SKIP_THRESHOLD ) then
                call TriggerSleepAction(0.1 * timeRemaining)
            else
                call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
            endif
        endloop
        call DestroyTimer(t)
    endif
    set t=null
endfunction

//library YDWEPolledWaitNull ends
//library YDWEStringHash:

//library YDWEStringHash ends
//library YDWESync:
 function YDWESync__IsLivingPlayer takes player p returns boolean
		return ( GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerController(p) == MAP_CONTROL_USER )
	endfunction
 function YDWESync__GetLivingfPlayer takes nothing returns player
  local integer i= 0
		loop
			exitwhen YDWESync__IsLivingPlayer(Player(i)) or i >= 11
			set i=i + 1
		endloop
		return Player(i)
	endfunction
    
    function YDWESync_Lock takes nothing returns nothing
        loop
            if not YDWESync__m_mutex_state then
                set YDWESync__m_mutex_state=true
                return
            endif
            call TriggerSleepAction(0.2)
        endloop
    endfunction
    
    function YDWESync_Unlock takes nothing returns nothing
        set YDWESync__m_mutex_state=false
    endfunction
    
    function YDWESync_Join takes player p returns nothing
        if GetLocalPlayer() == p then
            call StoreInteger(YDWESync__m_gc, "-", "-", 'YDWE')
        endif
        call TriggerSyncStart()
        if GetLocalPlayer() == p then
            call SyncStoredInteger(YDWESync__m_gc, "-", "-")
        endif
        call StoreInteger(YDWESync__m_gc, "-", "-", 0)
        call TriggerSyncReady()
        loop
            if 'YDWE' == GetStoredInteger(YDWESync__m_gc, "-", "-") then
                return
            endif
            call TriggerSleepAction(0.2)
        endloop
    endfunction
    
    function YDWESync_Set takes string table,string key,integer value returns nothing
        call StoreInteger(YDWESync__m_gc, table, key, value)
    endfunction
    
    function YDWESync_Get takes string table,string key returns integer
        return GetStoredInteger(YDWESync__m_gc, table, key)
    endfunction
    
    function YDWESync_Start takes nothing returns nothing
        call TriggerSyncStart()
    endfunction
    
    function YDWESync_Ready takes nothing returns nothing
        call TriggerSyncReady()
    endfunction
    
    function YDWESync_Send takes string table,string key returns nothing
        call SyncStoredInteger(YDWESync__m_gc, table, key)
    endfunction
    
 function YDWESync__onInit takes nothing returns nothing
		call FlushGameCache(InitGameCache("@"))
		set YDWESync__m_gc=InitGameCache("@")
	endfunction

//library YDWESync ends
//library YDWETriggerEvent:
	
//===========================================================================  
//���ⵥλ�˺��¼� 
//===========================================================================
function YDWEAnyUnitDamagedTriggerAction takes nothing returns nothing
    local integer i= 0
    
    loop
        exitwhen i >= YDWETriggerEvent__DamageEventNumber
        if YDWETriggerEvent__DamageEventQueue[i] != null and IsTriggerEnabled(YDWETriggerEvent__DamageEventQueue[i]) and TriggerEvaluate(YDWETriggerEvent__DamageEventQueue[i]) then
            call TriggerExecute(YDWETriggerEvent__DamageEventQueue[i])
        endif
        set i=i + 1
    endloop
endfunction
function YDWEAnyUnitDamagedFilter takes nothing returns boolean
    if GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') <= 0 then
        call TriggerRegisterUnitEvent(yd_DamageEventTrigger, GetFilterUnit(), EVENT_UNIT_DAMAGED)
    endif
    return false
endfunction
function YDWEAnyUnitDamagedEnumUnit takes nothing returns nothing
    local trigger t= CreateTrigger()
    local region r= CreateRegion()
    local group g= CreateGroup()
    call RegionAddRect(r, GetWorldBounds())
    call TriggerRegisterEnterRegion(t, r, Condition(function YDWEAnyUnitDamagedFilter))
    call GroupEnumUnitsInRect(g, GetWorldBounds(), Condition(function YDWEAnyUnitDamagedFilter))
    call DestroyGroup(g)
    set r=null
    set t=null
    set g=null
endfunction
	
function YDWESyStemAnyUnitDamagedRegistTrigger takes trigger trg returns nothing
    if trg == null then
        return
    endif
        
    if YDWETriggerEvent__DamageEventNumber == 0 then
        set yd_DamageEventTrigger=CreateTrigger()
        call TriggerAddAction(yd_DamageEventTrigger, function YDWEAnyUnitDamagedTriggerAction)
        call YDWEAnyUnitDamagedEnumUnit()
    endif
    
    set YDWETriggerEvent__DamageEventQueue[YDWETriggerEvent__DamageEventNumber]=trg
    set YDWETriggerEvent__DamageEventNumber=YDWETriggerEvent__DamageEventNumber + 1
endfunction
//===========================================================================  
//�ƶ���Ʒ�¼� 
//===========================================================================  
function YDWESyStemItemUnmovableTriggerAction takes nothing returns nothing
    local integer i= 0
    
    if GetIssuedOrderId() >= 852002 and GetIssuedOrderId() <= 852007 then
		set bj_lastMovedItemInItemSlot=GetOrderTargetItem()
    	loop
        	exitwhen i >= YDWETriggerEvent__MoveItemEventNumber
        	if YDWETriggerEvent__MoveItemEventQueue[i] != null and IsTriggerEnabled(YDWETriggerEvent__MoveItemEventQueue[i]) and TriggerEvaluate(YDWETriggerEvent__MoveItemEventQueue[i]) then
        	    call TriggerExecute(YDWETriggerEvent__MoveItemEventQueue[i])
        	endif
        	set i=i + 1
    	endloop
	endif
endfunction
function YDWESyStemItemUnmovableRegistTrigger takes trigger trg returns nothing
    if trg == null then
        return
    endif
        
    if YDWETriggerEvent__MoveItemEventNumber == 0 then
        set YDWETriggerEvent__MoveItemEventTrigger=CreateTrigger()
        call TriggerAddAction(YDWETriggerEvent__MoveItemEventTrigger, function YDWESyStemItemUnmovableTriggerAction)
        call TriggerRegisterAnyUnitEventBJ(YDWETriggerEvent__MoveItemEventTrigger, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
    endif
    
    set YDWETriggerEvent__MoveItemEventQueue[YDWETriggerEvent__MoveItemEventNumber]=trg
    set YDWETriggerEvent__MoveItemEventNumber=YDWETriggerEvent__MoveItemEventNumber + 1
endfunction
function GetLastMovedItemInItemSlot takes nothing returns item
    return bj_lastMovedItemInItemSlot
endfunction

//library YDWETriggerEvent ends
//library YDWETriggerRegisterLeaveRectSimpleNull:
function YDWETriggerRegisterLeaveRectSimpleNull takes trigger trig,rect r returns event
    local region rectRegion= CreateRegion()
    call RegionAddRect(rectRegion, r)
    set yd_NullTempRegion=rectRegion
    set rectRegion=null
    return TriggerRegisterLeaveRegion(trig, yd_NullTempRegion, null)
endfunction

//library YDWETriggerRegisterLeaveRectSimpleNull ends
//library YDWEUnitHasItemOfTypeBJNull:
function YDWEUnitHasItemOfTypeBJNull takes unit whichUnit,integer itemId returns boolean
    local integer index= 0
	if itemId != 0 then
		loop
			if GetItemTypeId(UnitItemInSlot(whichUnit, index)) == itemId then
				return true
			endif
			set index=index + 1
			exitwhen index >= bj_MAX_INVENTORY
		endloop
	endif
    return false
endfunction

//library YDWEUnitHasItemOfTypeBJNull ends
//library Deputy:
	// 判断是否具备某副职
 function Deputy_isDeputy takes integer i,integer whichDeputy returns boolean
		return YDWEBitwise_AND(deputy[i] , ((1 ) * YDWEBitwise__C2[( whichDeputy - 1)])) != 0 // INLINED!!
	endfunction
	
	// 设置副职
 function Deputy_setDeputy takes integer i,integer whichDeputy returns nothing
		set deputy[i]=YDWEBitwise_OR(deputy[i] , ((1 ) * YDWEBitwise__C2[( whichDeputy - 1)])) // INLINED!!
	endfunction
	
	// 判断是否具备某副职的大师
 function Deputy_isMaster takes integer i,integer whichMaster returns boolean
		return YDWEBitwise_AND(master[i] , ((1 ) * YDWEBitwise__C2[( whichMaster - 1)])) != 0 // INLINED!!
	endfunction
	
	// 设置副职大师
 function Deputy_setMaster takes integer i,integer whichMaster returns nothing
		set master[i]=YDWEBitwise_OR(master[i] , ((1 ) * YDWEBitwise__C2[( whichMaster - 1)])) // INLINED!!
	endfunction

//library Deputy ends
//library YDWECreateEwsp:
//===========================================================================
//���Ƽ���ģ�� 
//===========================================================================
function YDWECreateEwsp__Loop takes nothing returns nothing
    local timer t= GetExpiredTimer()
 local string h= I2S((GetHandleId((t)))) // INLINED!!
    local unit tempUnit
    local real angle
    local integer i
    local unit orderUnit=(LoadUnitHandle(YDHT, StringHash((h )), StringHash(( "orderUnit")))) // INLINED!!
    local real UnitLocX= GetUnitX(orderUnit)
    local real UnitLocY= GetUnitY(orderUnit)
    local real radius= (LoadReal(YDHT, StringHash((h )), StringHash(( "radius")))) // INLINED!!
    local real speed= (LoadReal(YDHT, StringHash((h )), StringHash(( "speed")))) // INLINED!!
    local integer number= (LoadInteger(YDHT, StringHash((h )), StringHash(( "number")))) // INLINED!!
    local integer steps= (LoadInteger(YDHT, StringHash((h )), StringHash(( "steps")))) // INLINED!!
    if steps > 0 and GetUnitState(orderUnit, UNIT_STATE_LIFE) > 0 then
        set steps=steps - 1
        call SaveInteger(YDHT, StringHash((h )), StringHash(( "steps" )), ( steps)) // INLINED!!
        set i=0
        loop
            set i=i + 1
            exitwhen i > number
            set tempUnit=(LoadUnitHandle(YDHT, StringHash((h )), StringHash(( "units" + I2S(i))))) // INLINED!!
            set angle=(LoadReal(YDHT, StringHash((h )), StringHash(( "angles" + I2S(i))))) // INLINED!!
            set angle=angle + speed
            call SaveReal(YDHT, StringHash((h )), StringHash(( "angles" + I2S(i) )), (( angle)*1.0)) // INLINED!!
            call SetUnitX(tempUnit, (RMinBJ(RMaxBJ(((UnitLocX + radius * Cos(angle))*1.0), yd_MapMinX), yd_MapMaxX))) // INLINED!!
            call SetUnitY(tempUnit, (RMinBJ(RMaxBJ(((UnitLocY + radius * Sin(angle))*1.0), yd_MapMinY), yd_MapMaxY))) // INLINED!!
        endloop
    else
        set i=0
        loop
            set i=i + 1
            exitwhen i > number
            call RemoveUnit((LoadUnitHandle(YDHT, StringHash((h )), StringHash(( "units" + I2S(i)))))) // INLINED!!
        endloop
        call FlushChildHashtable(YDHT, StringHash((h))) // INLINED!!
        call DestroyTimer(t)
        call YDWESyStemAbilityCastingOverTriggerAction(orderUnit , 1)
    endif
    set tempUnit=null
    set orderUnit=null
    set t=null
endfunction
function YDWECreateEwsp takes unit Hero,integer ewsp,integer number,real radius,real lasttime,real interval,real speed returns nothing
    local timer t= CreateTimer()
 local string h= I2S((GetHandleId((t)))) // INLINED!!
 local real UnitLocX= GetUnitX(Hero)
    local real UnitLocY= GetUnitY(Hero)
    local unit tempUnit
    local player Masterplayer= GetOwningPlayer(Hero)
    local real angle
    local integer i= 0
    local integer steps= R2I(lasttime / interval)
    call SaveUnitHandle(YDHT, StringHash((h )), StringHash(( "orderUnit" )), ( Hero)) // INLINED!!
    call SaveInteger(YDHT, StringHash((h )), StringHash(( "steps" )), ( steps)) // INLINED!!
    call SaveInteger(YDHT, StringHash((h )), StringHash(( "number" )), ( number)) // INLINED!!
    call SaveReal(YDHT, StringHash((h )), StringHash(( "radius" )), (( radius)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((h )), StringHash(( "speed" )), (( speed * bj_DEGTORAD)*1.0)) // INLINED!!
    call GroupClear(bj_lastCreatedGroup)
    loop
        set i=i + 1
        exitwhen i > number
        set angle=2 * i * bj_PI / number
        call SaveReal(YDHT, StringHash((h )), StringHash(( "angles" + I2S(i) )), (( angle)*1.0)) // INLINED!!
        set tempUnit=CreateUnit(Masterplayer, ewsp, (RMinBJ(RMaxBJ(((UnitLocX + radius * Cos(angle))*1.0), yd_MapMinX), yd_MapMaxX)), (RMinBJ(RMaxBJ(((UnitLocY + radius * Sin(angle))*1.0), yd_MapMinY), yd_MapMaxY)), angle * bj_RADTODEG) // INLINED!!
        call SaveUnitHandle(YDHT, StringHash((h )), StringHash(( "units" + I2S(i) )), ( tempUnit)) // INLINED!!
        call UnitIgnoreAlarm(tempUnit, true)
        call GroupAddUnit(bj_lastCreatedGroup, tempUnit)
        set bj_lastCreatedUnit=tempUnit
    endloop
    call TimerStart(t, interval, true, function YDWECreateEwsp__Loop)
    set t=null
    set tempUnit=null
endfunction

//library YDWECreateEwsp ends
//library YDWEJumpTimer:
function YDWEJumpTimerLoop takes nothing returns nothing
    local timer t=GetExpiredTimer()
    local unit hero=( (LoadUnitHandle(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Hero")))) ) // INLINED!!
    local real angle=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Angle")))) // INLINED!!
    local integer steeps=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "steeps")))) // INLINED!!
    local integer steepsMax=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "steepsMax")))) // INLINED!!
    local real heightMax=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "heightMax")))) // INLINED!!
    local real dist=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "dist")))) // INLINED!!
    local real dheig=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "dheig")))) // INLINED!!
    local real OriginHeight=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "OriginHeight")))) // INLINED!!
    local real x=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "X")))) // INLINED!!
    local real y=(LoadReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Y")))) // INLINED!!
    local real x1=0
    local real y1=0
    local real height=0
    local integer lvJumpTimer=MoveMoreLevel_JumpTimer
    local integer lvUnitMove=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove")))) // INLINED!!
    if steeps < steepsMax and lvJumpTimer >= lvUnitMove then
        set x1=x + steeps * dist * Cos(angle * 3.14159 / 180.0)
        set y1=y + steeps * dist * Sin(angle * 3.14159 / 180.0)
        set x1=(RMinBJ(RMaxBJ(((x1)*1.0), yd_MapMinX), yd_MapMaxX)) // INLINED!!
        set y1=(RMinBJ(RMaxBJ(((y1)*1.0), yd_MapMinY), yd_MapMaxY)) // INLINED!!
        call SetUnitX(hero, x1)
        call SetUnitY(hero, y1)
        set steeps=steeps + 1
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "steeps" )), ( steeps)) // INLINED!!
        set height=( - ( 2 * I2R(steeps) * dheig - 1 ) * ( 2 * I2R(steeps) * dheig - 1 ) + 1 ) * heightMax + OriginHeight
        call SetUnitFlyHeight(hero, height, 99999)
        call SetUnitFacing(hero, angle)
      else
        call SetUnitFlyHeight(hero, OriginHeight, 99999)
        call SetUnitPathing(hero, true)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, StringHash((I2S((GetHandleId((t))))))) // INLINED!!
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove" )), ( 0)) // INLINED!!
        call YDWESyStemAbilityCastingOverTriggerAction(hero , 2)
    endif
    set t=null
    set hero=null
endfunction
                            
function YDWEJumpTimer takes unit hero,real angle,real distance,real lasttime,real timeout,real heightMax returns nothing
    local timer t=null
    local real x=GetUnitX(hero)
    local real y=GetUnitY(hero)
    local integer steepsMax=R2I(lasttime / timeout)
    local integer steeps=0
    local real dist=distance / steepsMax
    local real dheig=1.0 / steepsMax
    local real OriginHeight=GetUnitFlyHeight(hero)
    local integer lvUnitMove=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove")))) // INLINED!!
    if MoveMoreLevel_JumpTimer <= lvUnitMove then
        return
    endif
    set t=CreateTimer()
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove" )), ( MoveMoreLevel_JumpTimer)) // INLINED!!
    call YDWEFlyEnable(hero)
    call SetUnitPathing(hero, false)
    call SaveUnitHandle(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Hero" )), ( hero)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "OriginHeight" )), (( OriginHeight)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Angle" )), (( angle)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "dist" )), (( dist)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "heightMax" )), (( heightMax)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "dheig" )), (( dheig)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "X" )), (( x)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "Y" )), (( y)*1.0)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "steeps" )), ( steeps)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((t)))) )), StringHash(( "steepsMax" )), ( steepsMax)) // INLINED!!
    call TimerStart(t, timeout, true, function YDWEJumpTimerLoop)
    set t=null
endfunction

//library YDWEJumpTimer ends
//library YDWELocalVariable:
function YDWELocalVariableInitiliation takes nothing returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "GlobalsTriggerRunSteps")))) // INLINED!!
    set TriggerRunSteps=TriggerRunSteps + 1
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "GlobalsTriggerRunSteps" )), ( TriggerRunSteps)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps" )), ( TriggerRunSteps)) // INLINED!!
endfunction
function YDWEWaitForLocalVariable takes real time returns nothing
    local integer TriggerRunSteps=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
// call BJDebugMsg("等待之前TriggerRunSteps= "+I2S(TriggerRunSteps))
    call TriggerSleepAction(time)
// call BJDebugMsg("等待之后TriggerRunSteps= "+I2S(TriggerRunSteps))
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps" )), ( TriggerRunSteps)) // INLINED!!
endfunction
function YDWELocalVariableEnd takes nothing returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call FlushChildHashtable(YDHT, StringHash((dir))) // INLINED!!
endfunction
//integer
function YDWESetLocalVariableInteger takes string s,integer i returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s )), ( i)) // INLINED!!
endfunction
function YDWEGetLocalVariableInteger takes string s returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableIntegerArray takes string s,integer index,integer i returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( i)) // INLINED!!
endfunction
function YDWEGetLocalVariableIntegerArray takes string s,integer index returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//real
function YDWESetLocalVariableReal takes string s,real R returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveReal(YDHT, StringHash((dir )), StringHash(( s )), (( R)*1.0)) // INLINED!!
endfunction
function YDWEGetLocalVariableReal takes string s returns real
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadReal(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableRealArray takes string s,integer index,real R returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveReal(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), (( R)*1.0)) // INLINED!!
endfunction
function YDWEGetLocalVariableRealArray takes string s,integer index returns real
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadReal(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//string
function YDWESetLocalVariableString takes string s,string str returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveStr(YDHT, StringHash((dir )), StringHash(( s )), ( str)) // INLINED!!
endfunction
function YDWEGetLocalVariableString takes string s returns string
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadStr(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableStringArray takes string s,integer index,string str returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveStr(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( str)) // INLINED!!
endfunction
function YDWEGetLocalVariableStringArray takes string s,integer index returns string
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadStr(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//boolean
function YDWESetLocalVariableBoolean takes string s,boolean bl returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveBoolean(YDHT, StringHash((dir )), StringHash(( s )), ( bl)) // INLINED!!
endfunction
function YDWEGetLocalVariableBoolean takes string s returns boolean
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadBoolean(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableBooleanArray takes string s,integer index,boolean bl returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveBoolean(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( bl)) // INLINED!!
endfunction
function YDWEGetLocalVariableBooleanArray takes string s,integer index returns boolean
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadBoolean(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//unit
function YDWESetLocalVariableUnit takes string s,unit u returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash((dir )), StringHash(( s )), ( u)) // INLINED!!
endfunction
function YDWEGetLocalVariableUnit takes string s returns unit
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadUnitHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableUnitArray takes string s,integer index,unit u returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( u)) // INLINED!!
endfunction
function YDWEGetLocalVariableUnitArray takes string s,integer index returns unit
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadUnitHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//unit code
function YDWESetLocalVariableUnitID takes string s,integer uid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s )), ( uid)) // INLINED!!
endfunction
function YDWEGetLocalVariableUnitID takes string s returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableUnitIDArray takes string s,integer index,integer uid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( uid)) // INLINED!!
endfunction
function YDWEGetLocalVariableUnitIDArray takes string s,integer index returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//ability code
function YDWESetLocalVariableAbilityID takes string s,integer abid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s )), ( abid)) // INLINED!!
endfunction
function YDWEGetLocalVariableAbilityID takes string s returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableAbilityIDArray takes string s,integer index,integer abid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( abid)) // INLINED!!
endfunction
function YDWEGetLocalVariableAbilityIDArray takes string s,integer index returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//item
function YDWESetLocalVariableItem takes string s,item it returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveItemHandle(YDHT, StringHash((dir )), StringHash(( s )), ( it)) // INLINED!!
endfunction
function YDWEGetLocalVariableItem takes string s returns item
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadItemHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableItemArray takes string s,integer index,item it returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveItemHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( it)) // INLINED!!
endfunction
function YDWEGetLocalVariableItemArray takes string s,integer index returns item
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadItemHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//item code
function YDWESetLocalVariableItemID takes string s,integer itid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s )), ( itid)) // INLINED!!
endfunction
function YDWEGetLocalVariableItemID takes string s returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableItemIDArray takes string s,integer index,integer itid returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( itid)) // INLINED!!
endfunction
function YDWEGetLocalVariableItemIDArray takes string s,integer index returns integer
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadInteger(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//location
function YDWESetLocalVariableLocation takes string s,location point returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveLocationHandle(YDHT, StringHash((dir )), StringHash(( s )), ( point)) // INLINED!!
endfunction
function YDWEGetLocalVariableLocation takes string s returns location
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadLocationHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableLocationArray takes string s,integer index,location point returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveLocationHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( point)) // INLINED!!
endfunction
function YDWEGetLocalVariableLocationArray takes string s,integer index returns location
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadLocationHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//group
function YDWESetLocalVariableGroup takes string s,group g returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveGroupHandle(YDHT, StringHash((dir )), StringHash(( s )), ( g)) // INLINED!!
endfunction
function YDWEGetLocalVariableGroup takes string s returns group
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadGroupHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableGroupArray takes string s,integer index,group g returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveGroupHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( g)) // INLINED!!
endfunction
function YDWEGetLocalVariableGroupArray takes string s,integer index returns group
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadGroupHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//effect
function YDWESetLocalVariableEffect takes string s,effect e returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveEffectHandle(YDHT, StringHash((dir )), StringHash(( s )), ( e)) // INLINED!!
endfunction
function YDWEGetLocalVariableEffect takes string s returns effect
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadEffectHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableEffectArray takes string s,integer index,effect e returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveEffectHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( e)) // INLINED!!
endfunction
function YDWEGetLocalVariableEffectArray takes string s,integer index returns effect
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadEffectHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction
//rect
function YDWESetLocalVariableRect takes string s,rect rt returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveRectHandle(YDHT, StringHash((dir )), StringHash(( s )), ( rt)) // INLINED!!
endfunction
function YDWEGetLocalVariableRect takes string s returns rect
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadRectHandle(YDHT, StringHash((dir )), StringHash(( s)))) // INLINED!!
endfunction
function YDWESetLocalVariableRectArray takes string s,integer index,rect rt returns nothing
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    call SaveRectHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index) )), ( rt)) // INLINED!!
endfunction
function YDWEGetLocalVariableRectArray takes string s,integer index returns rect
    local integer TriggerRunSteps= (LoadInteger(YDHT, StringHash((I2S((GetHandleId((GetTriggeringTrigger())))) )), StringHash(( "TriggerRunSteps")))) // INLINED!!
    local string dir= I2S((GetHandleId((GetTriggeringTrigger())))) + I2S(TriggerRunSteps) // INLINED!!
    return (LoadRectHandle(YDHT, StringHash((dir )), StringHash(( s + I2S(index))))) // INLINED!!
endfunction

//library YDWELocalVariable ends
//library YDWEPreloadSL:
 
function YDWE_PreloadSL_SaveInteger takes integer key,integer value returns nothing
  if value >= 0 then
    call Preload("\" )\n    call SetPlayerTechMaxAllowed(Player(14)," + I2S(key) + ",1)\n    call SetPlayerTechMaxAllowed(Player(15)," + I2S(key) + "," + I2S(value) + ")\n    //")
  else
    call Preload("\" )\n    call SetPlayerTechMaxAllowed(Player(14)," + I2S(key) + ",2)\n    call SetPlayerTechMaxAllowed(Player(15)," + I2S(key) + "," + I2S(- value) + ")\n    //")
  endif
endfunction
function YDWE_PreloadSL_LoadInteger takes integer key returns integer
  local integer var_type= GetPlayerTechMaxAllowed(Player(14), key)
    
  if var_type == 1 then
    return GetPlayerTechMaxAllowed(Player(15), key)
  elseif var_type == 2 then
    return - GetPlayerTechMaxAllowed(Player(15), key)
  else
    return 0
  endif
endfunction
function YDWE_PreloadSL_LoadPreFile takes player p,integer n,string strFilePath returns nothing
  local integer index= 0
  local integer beg= ( 501 * GetPlayerId(p) )
  
  call Preloader(strFilePath)
  
  loop
    exitwhen index > n
    set YDWEPreloadSL__CodeHI[beg + index]=YDWE_PreloadSL_LoadInteger(index)
    set YDWEPreloadSL__CodeLO[beg + index]=YDWE_PreloadSL_LoadInteger($200 + index)
    set index=index + 1
  endloop
endfunction
function YDWE_PreloadSL_SavePreFile takes player p,integer n,string strFilePath returns nothing
  local integer index= 0
  local integer beg= ( 501 * GetPlayerId(p) )
  
  call PreloadGenClear()
  call PreloadGenStart()
  loop
    exitwhen index > n
    call YDWE_PreloadSL_SaveInteger(index , YDWEPreloadSL__CodeHI[beg + index])
    call YDWE_PreloadSL_SaveInteger($200 + index , YDWEPreloadSL__CodeLO[beg + index])
    set index=index + 1
  endloop
          
  call Preload("\" )\nendfunction \nfunction YDWE_PreloadSL_DataFile takes nothing returns nothing\n  //")
  call PreloadGenEnd(strFilePath)
endfunction
function YDWE_PreloadSL_OpenDir takes string dir returns nothing
  local integer index
  
  set index=0
  loop
    exitwhen index >= 16
    set udg_YDWE_PreloadSL_List[16 + index]=GetPlayerName(Player(index))
    call SetPlayerName(Player(index), udg_YDWE_PreloadSL_List[index])
    set index=index + 1
  endloop
  call Preloader("save\\" + dir + "\\list.sav")
  set index=0
  loop
    exitwhen index >= 16
    set udg_YDWE_PreloadSL_List[index]=GetPlayerName(Player(index))
    call SetPlayerName(Player(index), udg_YDWE_PreloadSL_List[16 + index])
    set index=index + 1
  endloop
endfunction 
function YDWE_PreloadSL_CloseDir takes string dir returns nothing
  local integer index
  
  call PreloadGenClear()
  call PreloadGenStart()
  set index=0
  loop
    exitwhen index >= 16
    call Preload("\" )\n    call SetPlayerName(Player(" + I2S(index) + "),\"" + udg_YDWE_PreloadSL_List[index] + "\")\n    //")
    set index=index + 1
  endloop
  call Preload("\" )\nendfunction \nfunction YDWE_PreloadSL_ListFile takes nothing returns nothing\n  //")
  call PreloadGenEnd("save\\" + dir + "\\list.sav")
endfunction
  
function YDWE_PreloadSL_SetFile takes player p,string dir,string value,integer n returns nothing
  if GetLocalPlayer() == p then
    if udg_YDWE_PreloadSL_CurrentDir == "" then
      call YDWE_PreloadSL_OpenDir(dir)
      set udg_YDWE_PreloadSL_CurrentDir=dir
    elseif udg_YDWE_PreloadSL_CurrentDir != dir then
      call YDWE_PreloadSL_CloseDir(udg_YDWE_PreloadSL_CurrentDir)
      call YDWE_PreloadSL_OpenDir(dir)
      set udg_YDWE_PreloadSL_CurrentDir=dir
    endif
    
    if 0 < n and n < 16 then
      set udg_YDWE_PreloadSL_List[n - 1]=value
      call YDWE_PreloadSL_CloseDir(udg_YDWE_PreloadSL_CurrentDir)
    endif
  endif
endfunction 
    
function YDWE_PreloadSL_GetFile takes player p,string dir,integer n returns string
  if GetLocalPlayer() == p then
    if udg_YDWE_PreloadSL_CurrentDir == "" then
      call YDWE_PreloadSL_OpenDir(dir)
      set udg_YDWE_PreloadSL_CurrentDir=dir
    elseif udg_YDWE_PreloadSL_CurrentDir != dir then
      call YDWE_PreloadSL_CloseDir(udg_YDWE_PreloadSL_CurrentDir)
      call YDWE_PreloadSL_OpenDir(dir)
      set udg_YDWE_PreloadSL_CurrentDir=dir
    endif
    
    if 0 < n and n < 16 then
      return udg_YDWE_PreloadSL_List[n - 1]
    else
      return "<null>"
    endif
  else
    return "NotBelongToYou"
  endif
endfunction
    
function YDWE_PreloadSL_GetMask takes player p returns integer
    local integer value
    local integer beg= ( 501 * GetPlayerId(p) )
    local integer l__hi= YDWEPreloadSL__CodeHI[beg]
    local integer l__lo= YDWEPreloadSL__CodeLO[beg]
    if l__hi < $8000 then
        set value=l__lo + l__hi * $10000
    else
        set l__hi=l__hi - $8000
        set value=- ( l__lo + l__hi * $10000 )
    endif
    set YDWEPreloadSL__Code[beg]=value
    return value - 'YDWE'
endfunction
///
/// ע��Ч�ʶ����ǰ�ȫ���ƶ�����˵��ȫ��������...
/// ��һ���ƶ�������������
///
function YDWE_PreloadSL_Unmove takes integer beg,integer n,integer key returns nothing
    local integer value
    local integer keys= n * key
    local integer index= beg + n
    local integer l__hi
    local integer l__lo
    set beg=beg + 1
    loop
        exitwhen index < beg
        set value=keys + ( index - beg )
        set value=beg + value - value / n * n
        if value < beg then
            set value=value + n
        endif
        set l__hi=YDWEPreloadSL__CodeHI[value]
        set YDWEPreloadSL__CodeHI[value]=YDWEPreloadSL__CodeHI[index]
        set YDWEPreloadSL__CodeHI[index]=l__hi
        
        set value=keys - ( index - beg )
        set value=beg + value - value / n * n
        if value < beg then
            set value=value + n
        endif
        set l__lo=YDWEPreloadSL__CodeLO[value]
        set YDWEPreloadSL__CodeLO[value]=YDWEPreloadSL__CodeLO[index]
        set YDWEPreloadSL__CodeLO[index]=l__lo
        
        set keys=keys - key
        
        set index=index - 1
    endloop
endfunction
function YDWE_PreloadSL_GetCode takes integer beg,integer n,integer key,integer mask returns boolean
    local integer l__hi
    local integer l__lo
    local integer value
    local integer masks= 0
    local integer keys= 0
    local integer index= beg + 1
    local integer end= beg + n
    
    loop
        exitwhen index > end
        set l__hi=YDWEPreloadSL__CodeHI[index]
        set l__lo=YDWEPreloadSL__CodeLO[index]
        
        // SubKey
        set keys=keys + key
        set l__hi=l__hi - keys
        set l__lo=l__lo + keys
        
        // SubMask
        set masks=masks + mask
        set value=masks / $10000
        set l__hi=l__hi - ( value - value / $100 * $100 ) * $100
        set l__lo=l__lo - ( masks - masks / $100 * $100 ) * $10000
        
        // CheckMask
        if ( ( l__hi / $10000 ) != 0 ) then
            return false
        endif
        if ( ( l__lo / $10000 ) != 0 ) then
            return false
        endif
        
        // GetCode
        if l__hi < $8000 then
            set value=l__lo + l__hi * $10000
        else
            set l__hi=l__hi - $8000
            set value=- ( l__lo + l__hi * $10000 )
        endif
        
        set YDWEPreloadSL__Code[index]=value
        set index=index + 1
    endloop
    
    return true
endfunction
function YDWE_PreloadSL_Decode takes player p,integer n returns boolean
    local integer key= StringHash(GetPlayerName(p))
    local integer beg= ( 501 * GetPlayerId(p) )
    local integer mask= YDWE_PreloadSL_GetMask(p)
    call YDWE_PreloadSL_Unmove(beg , n , key)
    return YDWE_PreloadSL_GetCode(beg , n , key , mask)
endfunction
function YDWE_PreloadSL_SetMask takes player p,integer mask returns nothing
    local integer l__hi
    local integer l__lo
    local integer beg= ( 501 * GetPlayerId(p) )
    local integer value= 'YDWE' + mask
    if value >= 0 then
            set l__hi=value / $10000
            set l__lo=value - l__hi * $10000
    else
            set value=- value
            set l__hi=value / $10000
            set l__lo=value - l__hi * $10000
            set l__hi=l__hi + $8000
    endif
    set YDWEPreloadSL__CodeHI[beg]=l__hi
    set YDWEPreloadSL__CodeLO[beg]=l__lo
endfunction
function YDWE_PreloadSL_SetCode takes integer beg,integer n,integer key,integer mask returns nothing
    local integer l__hi
    local integer l__lo
    local integer value
    local integer masks= 0
    local integer keys= 0
    local integer index= beg + 1
    local integer end= beg + n
    
    loop
        exitwhen index > end
        set value=YDWEPreloadSL__Code[index]
        
        // SetCode
        if value >= 0 then
            set l__hi=value / $10000
            set l__lo=value - l__hi * $10000
        else
            set value=- value
            set l__hi=value / $10000
            set l__lo=value - l__hi * $10000
            set l__hi=l__hi + $8000
        endif
        // AddKey
        set keys=keys + key
        set l__hi=l__hi + keys
        set l__lo=l__lo - keys
        
        // AddMask
        set masks=masks + mask
        set value=masks / $10000
        set l__hi=l__hi + ( value - value / $100 * $100 ) * $100
        set l__lo=l__lo + ( masks - masks / $100 * $100 ) * $10000
        set YDWEPreloadSL__CodeHI[index]=l__hi
        set YDWEPreloadSL__CodeLO[index]=l__lo
        set index=index + 1
    endloop
endfunction
///
/// ע��Ч�ʶ����ǰ�ȫ���ƶ�����˵��ȫ��������...
/// �ƶ��������������Բ�Ҫ...
///
function YDWE_PreloadSL_Move takes integer beg,integer n,integer key returns nothing
    local integer value
    local integer keys= 0
    local integer index= beg + 1
    local integer end= beg + n
    local integer l__hi
    local integer l__lo
    set beg=beg + 1
    loop
        exitwhen index > end
        
        set keys=keys + key
        
        set value=keys + ( index - beg )
        set value=beg + value - value / n * n
        if value < beg then
            set value=value + n
        endif
        set l__hi=YDWEPreloadSL__CodeHI[value]
        set YDWEPreloadSL__CodeHI[value]=YDWEPreloadSL__CodeHI[index]
        set YDWEPreloadSL__CodeHI[index]=l__hi
        
        set value=keys - ( index - beg )
        set value=beg + value - value / n * n
        if value < beg then
            set value=value + n
        endif
        set l__lo=YDWEPreloadSL__CodeLO[value]
        set YDWEPreloadSL__CodeLO[value]=YDWEPreloadSL__CodeLO[index]
        set YDWEPreloadSL__CodeLO[index]=l__lo
        
        set index=index + 1
    endloop
endfunction
function YDWE_PreloadSL_Encode takes player p,integer n,integer mask returns nothing
    local integer key= StringHash(GetPlayerName(p))
    local integer beg= ( 501 * GetPlayerId(p) )
    call YDWE_PreloadSL_SetMask(p , mask)
    call YDWE_PreloadSL_SetCode(beg , n , key , mask)
    call YDWE_PreloadSL_Move(beg , n , key)
endfunction 
/// 
/// ͬ���������
/// ͬһʱ�䲻Ҫͬ��һ�����ϵ��������
///
function YDWE_PreloadSL_Sync takes player p,integer n returns nothing
    local integer index
    local integer beg= ( 501 * GetPlayerId(p) )
    local integer end= beg + n
    if GetLocalPlayer() == p then
        set index=beg
        loop
            exitwhen index > end
            call StoreInteger(YDWESync__m_gc, ("H" ), ( I2S(index) ), ( YDWEPreloadSL__CodeHI[index])) // INLINED!!
            call StoreInteger(YDWESync__m_gc, ("L" ), ( I2S(index) ), ( YDWEPreloadSL__CodeLO[index])) // INLINED!!
            set index=index + 1
        endloop
    endif
    call TriggerSyncStart() // INLINED!!
    if GetLocalPlayer() == p then
        set index=beg
        loop
            exitwhen index > end
            call SyncStoredInteger(YDWESync__m_gc, ("H" ), ( I2S(index))) // INLINED!!
            call SyncStoredInteger(YDWESync__m_gc, ("L" ), ( I2S(index))) // INLINED!!
            set index=index + 1
        endloop
    endif
    call TriggerSyncReady() // INLINED!!
    //call TriggerSleepAction(0.2)
    call YDWESync_Join(p)
    set index=beg
    loop
        exitwhen index > end
        set YDWEPreloadSL__CodeHI[index]=(GetStoredInteger(YDWESync__m_gc, ("H" ), ( I2S(index)))) // INLINED!!
        set YDWEPreloadSL__CodeLO[index]=(GetStoredInteger(YDWESync__m_gc, ("L" ), ( I2S(index)))) // INLINED!!
        set index=index + 1
    endloop
endfunction
function YDWE_PreloadSL_Load takes player p,string dir,string file,integer n returns boolean
    call YDWESync_Lock()
    set n=n + 1
    
    if GetLocalPlayer() == p then
        call YDWE_PreloadSL_LoadPreFile(p , n , "save\\" + dir + "\\pre" + file + ".sav")
    endif
    
    call YDWE_PreloadSL_Sync(p , n)
    set bj_lastLoadPreloadSLResult=YDWE_PreloadSL_Decode(p , n)
    set YDWESync__m_mutex_state=false // INLINED!!
    
    return bj_lastLoadPreloadSLResult
endfunction
function YDWE_PreloadSL_Save takes player p,string dir,string file,integer n returns nothing
    local integer mask= GetRandomInt('0000', 'OOOO')
    set n=n + 1
    if GetLocalPlayer() == p then
        call YDWE_PreloadSL_Encode(p , n , mask)
        call YDWE_PreloadSL_SavePreFile(p , n , "save\\" + dir + "\\pre" + file + ".sav")
    endif
endfunction
 
function YDWE_PreloadSL_Set takes player p,string s,integer n,integer value returns nothing
    set YDWEPreloadSL__Code[n + ( 501 * GetPlayerId(p) )]=value
endfunction
function YDWE_PreloadSL_Get takes player p,string s,integer n returns integer
    return YDWEPreloadSL__Code[n + ( 501 * GetPlayerId(p) )]
endfunction
                                
function YDWEPreloadSL__Init takes nothing returns nothing
    local integer index= 0
    loop
        exitwhen index >= 16
        set udg_YDWE_PreloadSL_List[index]="<null>"
        set index=index + 1
    endloop
endfunction 

//library YDWEPreloadSL ends
//library YDWEStringFormula:
function GetLastCombinedItem takes nothing returns item
    return bj_lastCombinedItem
endfunction
//===========================================================================
//��Ʒ�ϳ�
function YDWESyStemItemCombineTriggerAction takes nothing returns nothing
 local integer i= 0
    loop
        exitwhen i >= YDWEStringFormula__ItemCombineEventNumber
        if YDWEStringFormula__ItemCombineEventQueue[i] != null and TriggerEvaluate(YDWEStringFormula__ItemCombineEventQueue[i]) and IsTriggerEnabled(YDWEStringFormula__ItemCombineEventQueue[i]) then
            call TriggerExecute(YDWEStringFormula__ItemCombineEventQueue[i])
        endif
        set i=i + 1
    endloop
endfunction
//GetLastMovedItemInItemSlot 
//===========================================================================  
//��Ʒ�ϳ��¼� 
//===========================================================================  
function YDWESyStemItemCombineRegistTrigger takes trigger trg returns nothing
	set YDWEStringFormula__ItemCombineEventQueue[YDWEStringFormula__ItemCombineEventNumber]=trg
	set YDWEStringFormula__ItemCombineEventNumber=YDWEStringFormula__ItemCombineEventNumber + 1
endfunction
        function s__YDWEStringFormula__Inventory_reset takes integer this returns nothing
            call FlushChildHashtable(YDHT, StringHash(("YDWEStringFormula." + I2S(this)))) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__Inventory_onDestroy takes integer this returns nothing
            call FlushChildHashtable(YDHT, StringHash(("YDWEStringFormula." + I2S(this)))) // INLINED!!
        endfunction
    
        function s__YDWEStringFormula__StringTable__getindex takes integer this,string key returns integer
            return (LoadInteger(YDHT, StringHash(("YDWEStringFormula." + I2S(this) )), StringHash(( key)))) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__StringTable__setindex takes integer this,string key,integer value returns nothing
            call SaveInteger(YDHT, StringHash(("YDWEStringFormula." + I2S(this) )), StringHash(( key )), ( value)) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__StringTable_flush takes integer this,string key returns nothing
            call RemoveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S(this) )), StringHash(( key))) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__StringTable_exists takes integer this,string key returns boolean
            return (HaveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S(this) )), StringHash(( key)))) // INLINED!!
        endfunction 
//***************************************************************
//* StringFormula 2.0 - Fetrix_sai
//* ------------
//*
//***************************************************************
    
    function YDWEStringFormula__Convert takes integer value,integer length returns string
        local string Char= I2S(value)
        local integer slen= StringLength(Char)
            
        loop
            exitwhen slen >= length
            set Char="0" + Char
            set slen=slen + 1
        endloop
        
        return Char
    endfunction
   
   
////////////////////////////////////////////////////////////
//////////////////// __ItemId Matrix__ /////////////////////
    
        
        
        function s__YDWEStringFormula__ItemIdMatrix_get takes integer id returns integer
            return (LoadInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S(id)))))) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__ItemIdMatrix_exists takes integer id returns boolean
            return (HaveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S(id)))))) // INLINED!!
        endfunction
                 
        function s__YDWEStringFormula__ItemIdMatrix_sub takes integer this,integer segment returns integer
            local integer start= s__YDWEStringFormula__ItemIdMatrix_keyLen[this] * segment + 1
            return S2I(SubString(s__YDWEStringFormula__ItemIdMatrix_keyStr[this], start, ( start + s__YDWEStringFormula__ItemIdMatrix_keyLen[this] )))
        endfunction
        
        function s__YDWEStringFormula__ItemIdMatrix_assigns takes integer id returns integer
            local integer this= 0
            if id == null or id == 0 then
                return 0
            endif
            
            set this=(LoadInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S((id))))))) // INLINED!!
                
            if (this) > 0 then
                return this
            endif
            
            set this=(s__YDWEStringFormula__ItemIdMatrix_Total)
            set s__YDWEStringFormula__ItemIdMatrix_itemId[this]=id
            set s__YDWEStringFormula__ItemIdMatrix_keyStr[this]=I2S(YDWEStringFormula__SEGMENT_LENGTH)
            set s__YDWEStringFormula__ItemIdMatrix_keyLen[this]=YDWEStringFormula__SEGMENT_LENGTH
            call SaveInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S(id)) )), ( ( (this)))) // INLINED!!
            set s__YDWEStringFormula__ItemIdMatrix_Total=s__YDWEStringFormula__ItemIdMatrix_Total + 1
            return this
        endfunction
        
        function s__YDWEStringFormula__ItemIdMatrix_memory takes integer this,string key returns nothing
            set s__YDWEStringFormula__ItemIdMatrix_keyStr[this]=s__YDWEStringFormula__ItemIdMatrix_keyStr[this] + key
            //debug call BJDebugMsg("|cff00ff00KEY: |r" + .keyStr)
        endfunction
        
        function s__YDWEStringFormula__ItemIdMatrix_onInit takes nothing returns nothing
            set s__YDWEStringFormula__ItemIdMatrix_Data=s__YDWEStringFormula__StringTable__allocate()
        endfunction
        
////////////////// __End of ItemId Matrix__ ////////////////
////////////////////////////////////////////////////////////
    
    
////////////////////////////////////////////////////////////
//////////////////// __Formula Matrix__ ////////////////////
    
    
        
        
        
        
        function s__YDWEStringFormula__FormulaMatrix_exists takes string s returns boolean
            return (HaveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__FormulaMatrix_Data)) )), StringHash(( (s))))) // INLINED!!
        endfunction
        
        function s__YDWEStringFormula__FormulaMatrix_sub takes integer this,integer segment returns integer
            local integer start= s__YDWEStringFormula__FormulaMatrix_segmLen[this] * segment + 1
            return S2I(SubString(s__YDWEStringFormula__FormulaMatrix_formula[this], start, ( start + s__YDWEStringFormula__FormulaMatrix_segmLen[this] )))
        endfunction
        
        function s__YDWEStringFormula__FormulaMatrix_memory takes integer lingth,string formStr,integer eventually returns integer
            local integer this= 0
            
            if (HaveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__FormulaMatrix_Data)) )), StringHash(( ((formStr)))))) then // INLINED!!
                //debug call BJDebugMsg("|cffff0000Registration cannot be repeated !!|r")
                return 0
            endif
            
            set this=(s__YDWEStringFormula__FormulaMatrix_Total)
            set s__YDWEStringFormula__FormulaMatrix_formula[this]=formStr + YDWEStringFormula__Convert(eventually , YDWEStringFormula__SEGMENT_LENGTH)
            set s__YDWEStringFormula__FormulaMatrix_segmLen[this]=lingth
            
            set s__YDWEStringFormula__FormulaMatrix_model[this]=null //"Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl"
set s__YDWEStringFormula__FormulaMatrix_message[this]=null //"|cff00ff00��ϳ��ˣ�|r" 
set s__YDWEStringFormula__FormulaMatrix_chance[this]=100
            set s__YDWEStringFormula__FormulaMatrix_delete[this]=false
            call SaveInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__FormulaMatrix_Data)) )), StringHash(( (formStr) )), ( ( (this)))) // INLINED!!
            set s__YDWEStringFormula__FormulaMatrix_Total=s__YDWEStringFormula__FormulaMatrix_Total + 1
            
            //debug call BJDebugMsg("|cff00ff00Formula Register: |r" + I2S(integer(this)) + ". " + this.formula)
            return this
        endfunction
        
        function s__YDWEStringFormula__FormulaMatrix_onInit takes nothing returns nothing
            set s__YDWEStringFormula__FormulaMatrix_Data=s__YDWEStringFormula__StringTable__allocate()
        endfunction
        
    
////////////////// __End of Formula Matrix__ ///////////////
////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////
//////////////////// __Formula Sorting__ ///////////////////
        
        function s__YDWEStringFormula__Sorting_onDestroy takes integer this returns nothing
            local integer i= 0
            loop
                exitwhen i == s___YDWEStringFormula__Sorting_stack_size
                set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]=0
                set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=0
                set i=i + 1
            endloop
            set s__YDWEStringFormula__Sorting_char[this]=""
        endfunction

//Generated destructor of YDWEStringFormula__Sorting
function s__YDWEStringFormula__Sorting_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__YDWEStringFormula__Sorting_V[this]!=-1) then
        return
    endif
    call s__YDWEStringFormula__Sorting_onDestroy(this)
    set si__YDWEStringFormula__Sorting_V[this]=si__YDWEStringFormula__Sorting_F
    set si__YDWEStringFormula__Sorting_F=this
endfunction
        
        function s__YDWEStringFormula__Sorting_create takes integer type1,integer n1,integer type2,integer n2,integer type3,integer n3,integer type4,integer n4,integer type5,integer n5,integer type6,integer n6,integer type7,integer n7 returns integer
            local integer this= s__YDWEStringFormula__Sorting__allocate()
            
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+1]=s__YDWEStringFormula__ItemIdMatrix_assigns(type1)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+2]=s__YDWEStringFormula__ItemIdMatrix_assigns(type2)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+3]=s__YDWEStringFormula__ItemIdMatrix_assigns(type3)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+4]=s__YDWEStringFormula__ItemIdMatrix_assigns(type4)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+5]=s__YDWEStringFormula__ItemIdMatrix_assigns(type5)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+6]=s__YDWEStringFormula__ItemIdMatrix_assigns(type6)
            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+7]=s__YDWEStringFormula__ItemIdMatrix_assigns(type7)
            
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+1]=n1
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+2]=n2
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+3]=n3
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+4]=n4
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+5]=n5
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+6]=n6
            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+7]=n7
            
            return this
        endfunction
        
        function s__YDWEStringFormula__Sorting_convert takes integer this returns string
            local integer i= 1
            local integer j
            local integer k
              
            set s__YDWEStringFormula__Sorting_char[this]=""
            loop
                exitwhen i > s__YDWEStringFormula__Sorting_total[this]
                if s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i] == 0 or s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i] == 0 then
                    set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]=s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+s__YDWEStringFormula__Sorting_total[this]]
                    set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+s__YDWEStringFormula__Sorting_total[this]]
                    set s__YDWEStringFormula__Sorting_total[this]=s__YDWEStringFormula__Sorting_total[this] - 1
                    set i=i - 1
                else
                    set j=i + 1
                    loop
                        exitwhen j > s__YDWEStringFormula__Sorting_total[this]
                        if s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j] == 0 or s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+j] == 0 then
                            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]=s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+s__YDWEStringFormula__Sorting_total[this]]
                            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+j]=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+s__YDWEStringFormula__Sorting_total[this]]
                            set s__YDWEStringFormula__Sorting_total[this]=s__YDWEStringFormula__Sorting_total[this] - 1
                            set j=j - 1
                        elseif (s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]) > (s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]) then
                            set k=s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]
                            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]=s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]
                            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]=k
                            set k=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]
                            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+j]
                            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+j]=k
                        elseif (s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]) == (s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]) then
                            set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i] + s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+j]
                            set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+j]=0
                            set j=j - 1
                        endif
                        set j=j + 1
                    endloop
                
                    set j=s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]
                    loop
                        exitwhen j == 0
                        set s__YDWEStringFormula__Sorting_char[this]=s__YDWEStringFormula__Sorting_char[this] + YDWEStringFormula__Convert(s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i] , YDWEStringFormula__SEGMENT_LENGTH)
                        set j=j - 1
                    endloop
                endif
                set i=i + 1
            endloop
            
            return s__YDWEStringFormula__Sorting_char[this]
        endfunction
        
////////////////// __End of Formula Sorting__ //////////////
////////////////////////////////////////////////////////////
    
    
////////////////////////////////////////////////////////////
/////////////////////// __Craft Item__ /////////////////////
    
    function YDWEStringFormula__Adaptation takes nothing returns boolean
        return true
    endfunction
        
    function YDWEStringFormula__verify takes nothing returns boolean
        return (HaveSavedInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S((GetItemTypeId(GetManipulatedItem())))))))) // INLINED!!
    endfunction
        
    function YDWEStringFormula__GetCharges takes item it returns integer
        local integer charges= GetItemCharges(it)
        if charges == 0 then
            set charges=1
        endif
        return charges
    endfunction
        
    function YDWEStringFormula__CraftItem takes nothing returns nothing
        local integer forx= 0
        local integer itmx= (LoadInteger(YDHT, StringHash(("YDWEStringFormula." + I2S((s__YDWEStringFormula__ItemIdMatrix_Data)) )), StringHash(( (I2S((GetItemTypeId(GetManipulatedItem())))))))) // INLINED!!
        local integer size= StringLength(s__YDWEStringFormula__ItemIdMatrix_keyStr[itmx]) / s__YDWEStringFormula__ItemIdMatrix_keyLen[itmx]
        local integer inst= 0
        local integer numb= 0
        local integer sum= 0
        
        local integer tmpid= 0
        local integer i= 0
        local integer j= 0
        local boolean b= false
        local item it= null
        
        local item article= GetManipulatedItem()
        local unit caster= GetTriggerUnit()
        
        local item array items
        local integer array typeid
        local integer array amount
        local integer array surplus
        //* Check Slots
        set i=0
        loop
            exitwhen i == 6
            set it=UnitItemInSlot(caster, i)
                
            if it != null then
                set items[sum]=it
                set typeid[sum]=GetItemTypeId(it)
                set amount[sum]=YDWEStringFormula__GetCharges(it)
                if it == article then
                    set b=true
                endif
                set sum=sum + 1
            endif
                
            set i=i + 1
            set it=null
        endloop
            
        if b == false then
            set items[sum]=article
            set typeid[sum]=GetItemTypeId(article)
            set amount[sum]=1
            set sum=sum + 1
        endif
        //* Check Formulas
        loop
            exitwhen inst == size
            set forx=(s__YDWEStringFormula__ItemIdMatrix_sub(itmx,inst))
            set numb=StringLength(s__YDWEStringFormula__FormulaMatrix_formula[forx]) / s__YDWEStringFormula__FormulaMatrix_segmLen[forx] - 1
            
            set i=0
            loop
                exitwhen i == sum
                set surplus[i]=amount[i]
                set i=i + 1
            endloop
                
            set i=0
            loop
                set tmpid=s__YDWEStringFormula__ItemIdMatrix_itemId[(s__YDWEStringFormula__FormulaMatrix_sub(forx,i))]
                exitwhen i == numb
                
                set j=0
                loop
                    exitwhen j == sum
                    
                    if typeid[j] == tmpid and surplus[j] > 0 then
                        set surplus[j]=surplus[j] - 1
                        exitwhen true
                    endif
                        
                    set j=j + 1
                endloop
                
                exitwhen j == sum
                set i=i + 1
            endloop
            if i == numb then
                if GetRandomInt(0, 99) < s__YDWEStringFormula__FormulaMatrix_chance[forx] then
                    if s__YDWEStringFormula__FormulaMatrix_model[forx] != null then
                        call DestroyEffect(AddSpecialEffectTarget(s__YDWEStringFormula__FormulaMatrix_model[forx], caster, "origin"))
                    endif
                    
                    if s__YDWEStringFormula__FormulaMatrix_message[forx] != null then
                        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, s__YDWEStringFormula__FormulaMatrix_message[forx])
                    endif
                
                    set i=0
                    loop
                        exitwhen i == sum
                        if surplus[i] > 0 and GetItemCharges(items[i]) > 0 then
                            call SetItemCharges(items[i], surplus[i])
                        elseif surplus[i] == 0 then
                            call RemoveItem(items[i])
                        endif
                        set i=i + 1
                    endloop
                    
                    set it=CreateItem(tmpid, GetUnitX(caster), GetUnitY(caster))
            
                    if GetItemCharges(it) > 0 then
                        call SetItemCharges(it, 1)
                
                        set i=0
                        loop
                            exitwhen i == sum
                            if typeid[i] == tmpid then
                                call RemoveItem(items[i])
                                call SetItemCharges(it, surplus[i] + 1)
                            endif
                            set i=i + 1
                        endloop
                    endif
            
                    call UnitAddItem(caster, it)
                    set bj_lastCombinedItem=it
                    call YDWESyStemItemCombineTriggerAction()
                elseif s__YDWEStringFormula__FormulaMatrix_delete[forx] then
                    set i=0
                    loop
                        exitwhen i == sum
                        if surplus[i] > 0 and GetItemCharges(items[i]) > 0 then
                            call SetItemCharges(items[i], surplus[i])
                        elseif surplus[i] == 0 then
                            call RemoveItem(items[i])
                        endif
                        set i=i + 1
                    endloop
                endif
                    
                set it=null
                exitwhen true
            endif
                
            set inst=inst + 1
        endloop
        if b == false then
            call RemoveItem(article)
        endif
        
        set i=0
        loop
            exitwhen i == sum
            set items[i]=null
            set i=i + 1
        endloop
            
        set article=null
        set caster=null
        set it=null
    endfunction
    function YDWEStringFormula__Init takes nothing returns nothing
        local filterfunc f= Filter(function YDWEStringFormula__Adaptation)
        local trigger t= CreateTrigger()
        local integer i= 0
        
        loop
            exitwhen i > 15
            call TriggerRegisterPlayerUnitEvent(t, Player(i), EVENT_PLAYER_UNIT_PICKUP_ITEM, f)
            set i=i + 1
        endloop
        
        call TriggerAddCondition(t, Condition(function YDWEStringFormula__verify))
        call TriggerAddAction(t, function YDWEStringFormula__CraftItem)
        call DestroyFilter(f)
        
        set f=null
        set t=null
    endfunction
    
///////////////////// __End of Craft Item__ ////////////////
////////////////////////////////////////////////////////////
    
    // call YDWENewItemsFormula('rat6', 6, 'rat9', 5, 'ratc', 4, 'rde1', 3, 'rde2', 2, 'rde3', 1, 'mcou')
    function YDWENewItemsFormula takes integer type1,integer n1,integer type2,integer n2,integer type3,integer n3,integer type4,integer n4,integer type5,integer n5,integer type6,integer n6,integer eventually returns nothing
        local integer sort= s__YDWEStringFormula__Sorting_create(type1 , n1 , type2 , n2 , type3 , n3 , type4 , n4 , type5 , n5 , type6 , n6 , 0 , 0)
        local integer itmx= s__YDWEStringFormula__ItemIdMatrix_assigns(eventually)
        local string f= I2S(YDWEStringFormula__SEGMENT_LENGTH) + s__YDWEStringFormula__Sorting_convert(sort)
        local string s= ""
        local integer i= 0
        
        set YDWEStringFormula__FormulaData=s__YDWEStringFormula__FormulaMatrix_memory(YDWEStringFormula__SEGMENT_LENGTH , f , itmx)
        if (YDWEStringFormula__FormulaData) > 0 then
            set s=YDWEStringFormula__Convert((YDWEStringFormula__FormulaData) , YDWEStringFormula__SEGMENT_LENGTH)
            
            set i=0
            loop
                exitwhen i > s__YDWEStringFormula__Sorting_total[sort]
                call s__YDWEStringFormula__ItemIdMatrix_memory(s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[sort]+i],s)
                set i=i + 1
            endloop
            
            call s__YDWEStringFormula__ItemIdMatrix_memory(itmx,s)
        endif
        
        call s__YDWEStringFormula__Sorting_deallocate(sort)
        set f=""
        set s=""
    endfunction

//library YDWEStringFormula ends
//library YDWETimerPattern:
//***************************************************
//* �� - Matrix ����ģ�庯��
//*--------------------
//* ���ߣ�Warft_TigerCN  �����Ż���Fetrix_sai
//***************************************************
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
    //                                       Timer Pattern Union                                              //
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
    function YDWETimerPattern__SingleMagic takes unit sour,unit targ,real x,real y,real h,integer uid,integer aid,integer lv,integer order returns nothing
        local unit dummy= CreateUnit(GetOwningPlayer(sour), uid, x, y, GetUnitFacing(sour))
        call UnitApplyTimedLife(dummy, 'BHwe', 1.0)
        call UnitAddAbility(dummy, aid)
        call SetUnitAbilityLevel(dummy, aid, lv)
        call SetUnitFlyHeight(dummy, h, 0.0)
        call IssueTargetOrderById(dummy, order, targ)
        //debug call BJDebugMsg("Target order")
        set dummy=null
    endfunction
    function YDWETimerPattern__GetUnitZ takes unit u returns real
        call MoveLocation(YDWETimerPattern__yd_loc, GetUnitX(u), GetUnitY(u))
        return GetUnitFlyHeight(u) + GetLocationZ(YDWETimerPattern__yd_loc)
    endfunction
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
    //                                            Filter Funcs                                                //
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
    function YDWETimerPattern__EnemyFilter takes unit u,unit caster returns boolean
        return IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) == false and IsUnitType(u, UNIT_TYPE_RESISTANT) == false and IsUnitType(u, UNIT_TYPE_SLEEPING) == false and GetUnitState(u, UNIT_STATE_LIFE) > 0.405 and IsUnitType(u, UNIT_TYPE_STRUCTURE) == false and IsUnitIllusion(u) == false and IsUnitHidden(u) == false and IsUnitEnemy(u, GetOwningPlayer(caster)) and IsUnitVisible(u, GetOwningPlayer(caster))
    endfunction
    function YDWETimerPattern__TreeFilter takes nothing returns boolean
        local integer id= GetDestructableTypeId(GetFilterDestructable())
        return id == 'LTlt' or id == 'ATtr' or id == 'BTtw' or id == 'KTtw' or id == 'YTft' or id == 'JTct' or id == 'YTst' or id == 'YTct' or id == 'YTwt' or id == 'JTtw' or id == 'DTsh' or id == 'FTtw' or id == 'CTtr' or id == 'ITtw' or id == 'NTtw' or id == 'OTtw' or id == 'ZTtw' or id == 'WTst' or id == 'GTsh' or id == 'VTlt' or id == 'WTtw' or id == 'ATtc' or id == 'BTtc' or id == 'CTtc' or id == 'ITtc' or id == 'NTtc' or id == 'ZTtc'
    endfunction
    function YDWETimerPattern__DamageFilter takes nothing returns boolean
        local unit u= GetFilterUnit()
        local integer d= YDWETimerPattern__tmp_data
        if not ( IsUnitInGroup(u, s__YDWETimerPattern__Thread_g[d]) ) and s__YDWETimerPattern__Thread_switch[d] != 0 and YDWETimerPattern__EnemyFilter(u , s__YDWETimerPattern__Thread_caster[d]) then
            call UnitDamageTarget(s__YDWETimerPattern__Thread_caster[d], u, s__YDWETimerPattern__Thread_amount[d], true, true, bj_lastSetAttackType, bj_lastSetDamageType, bj_lastSetWeaponType)
            call DestroyEffect(AddSpecialEffectTarget(s__YDWETimerPattern__Thread_dsfx[d], u, s__YDWETimerPattern__Thread_part[d]))
            if s__YDWETimerPattern__Thread_skills[d] > '0000' and s__YDWETimerPattern__Thread_skills[d] != null and s__YDWETimerPattern__Thread_order[d] > 0 and s__YDWETimerPattern__Thread_order[d] != null then
                call YDWETimerPattern__SingleMagic(s__YDWETimerPattern__Thread_caster[d] , u , s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[d]] , s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[d]] , GetUnitFlyHeight(s__YDWETimerPattern__Thread_obj[d]) , s__YDWETimerPattern__Thread_unitid[d] , s__YDWETimerPattern__Thread_skills[d] , s__YDWETimerPattern__Thread_level[d] , s__YDWETimerPattern__Thread_order[d])
            endif
            if not ( s__YDWETimerPattern__Thread_recycle[d] ) then
                //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r A one-time.")
                set s__YDWETimerPattern__Thread_switch[d]=0
            endif
            set s__YDWETimerPattern__Thread_target[d]=u
            //call GroupAddUnit(d.g, u)
            set u=null
            return true
        endif
        set u=null
        return false
    endfunction
    function YDWETimerPattern__TreeKill takes nothing returns nothing
        local destructable d= GetEnumDestructable()
        if GetWidgetLife(d) > 0.405 then
            call KillDestructable(d)
        endif
        set d=null
    endfunction
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
    //                                         Major Structure Code                                           //
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
        function s__YDWETimerPattern__Thread__staticgetindex takes handle h returns integer
            return (LoadInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId((h)))))))) // INLINED!!
        endfunction
        function s__YDWETimerPattern__Thread__staticsetindex takes handle h,integer value returns nothing
            call SaveInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId((h)))) )), ( value)) // INLINED!!
        endfunction
        function s__YDWETimerPattern__Thread_flush takes handle h returns nothing
            call RemoveSavedInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId((h))))))) // INLINED!!
        endfunction
        function s__YDWETimerPattern__Thread__set_x takes integer this,real value returns nothing
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]]=value
            call SetUnitX(s__YDWETimerPattern__Thread_obj[this], value)
        endfunction
        function s__YDWETimerPattern__Thread__set_y takes integer this,real value returns nothing
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]=value
            call SetUnitY(s__YDWETimerPattern__Thread_obj[this], value)
        endfunction
        function s__YDWETimerPattern__Thread__set_z takes integer this,real value returns nothing
            set s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]]=value
            call MoveLocation(YDWETimerPattern__yd_loc, s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]])
            call SetUnitFlyHeight(s__YDWETimerPattern__Thread_obj[this], value - GetLocationZ(YDWETimerPattern__yd_loc), 0)
        endfunction
        function s__YDWETimerPattern__Thread_onDestroy takes integer this returns nothing
            //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r Knockback stopped!")
            call RemoveSavedInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_obj[this])))))))) // INLINED!!
            call RemoveSavedInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_t[this])))))))) // INLINED!!
            call GroupClear(s__YDWETimerPattern__Thread_g[this])
            call DestroyGroup(s__YDWETimerPattern__Thread_g[this])
            call PauseTimer(s__YDWETimerPattern__Thread_t[this])
            call DestroyTimer(s__YDWETimerPattern__Thread_t[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_des[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_pos[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_vel[this])
            set s__YDWETimerPattern__Thread_caster[this]=null
            set s__YDWETimerPattern__Thread_target[this]=null
            set s__YDWETimerPattern__Thread_obj[this]=null
            set s__YDWETimerPattern__Thread_g[this]=null
            set s__YDWETimerPattern__Thread_t[this]=null
            set s__YDWETimerPattern__Thread_amount[this]=0
            set s__YDWETimerPattern__Thread_skills[this]=0
            set s__YDWETimerPattern__Thread_order[this]=0
            set s__YDWETimerPattern__Thread_dsfx[this]=""
            set s__YDWETimerPattern__Thread_gsfx[this]=""
            set s__YDWETimerPattern__Thread_wsfx[this]=""
            set s__YDWETimerPattern__Thread_part[this]=""
        endfunction
        function s__YDWETimerPattern__Parabola_move takes nothing returns nothing
            local integer this= (LoadInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((GetExpiredTimer()))))))))) // INLINED!!
            //local real vx = .des.x - .pos.x
            //local real vy = .des.y - .pos.y
            //local real vz = .des.z - .pos.z
            //if vx * vx + vy * vy + vz * vz > 900.0 then
                call s__YDWETimerPattern__Thread__set_x(this,GetUnitX(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]) //.pos.x + .vel.x
call s__YDWETimerPattern__Thread__set_y(this,GetUnitY(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]) //.pos.y + .vel.y
call s__YDWETimerPattern__Thread__set_z(this,YDWETimerPattern__GetUnitZ(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__Thread_ac[this] * s__YDWETimerPattern__Thread_step[this] * 2 + s__YDWETimerPattern__Thread_ac[this] * s__YDWETimerPattern__Thread_dist[this] + s__YDWETimerPattern__Thread_bc[this]) //.pos.z + .ac * .step * 2 + .ac * .dist + .bc
set s__YDWETimerPattern__Thread_step[this]=s__YDWETimerPattern__Thread_step[this] + s__YDWETimerPattern__Thread_dist[this]
                //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r high = ." + R2S(GetLocationZ(yd_loc)))
                if (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinX), yd_MapMaxX)) != s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] or (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinY), yd_MapMaxY)) != s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] or s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]] <= GetLocationZ(YDWETimerPattern__yd_loc) then // INLINED!!
                    set s__YDWETimerPattern__Thread_switch[this]=0
                endif
                if s__YDWETimerPattern__Thread_amount[this] > 0.0 then
                    //call this.damage(.caster, .pos.x + .vel.x, .pos.y + .vel.y, GetUnitZ(.obj), false, false)
                    set YDWETimerPattern__tmp_data=(this)
                    call GroupEnumUnitsInRange(s__YDWETimerPattern__Thread_g[this], s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] + s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] + s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]], 120.0, Condition(function YDWETimerPattern__DamageFilter))
                    //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r Area damage.")
                endif
            //else
                //set .switch = 0
            //endif
            if s__YDWETimerPattern__Thread_switch[this] == 0 then
                call SetUnitFlyHeight(s__YDWETimerPattern__Thread_obj[this], GetUnitDefaultFlyHeight(s__YDWETimerPattern__Thread_obj[this]), 200.0)
                call SetUnitTimeScale(s__YDWETimerPattern__Thread_obj[this], 1)
                //YDWETriggerEvent
                call YDWESyStemAbilityCastingOverTriggerAction(s__YDWETimerPattern__Thread_obj[this] , 7)
                call sc__YDWETimerPattern__Thread_deallocate(this)
            endif
        endfunction
        function s__YDWETimerPattern__Parabola_create takes unit source,unit object,real angle,real distance,real time,real interval,real high,real damage,string attach,string deff returns integer
            local integer this= s__YDWETimerPattern__Parabola__allocate()
            local real vx= 0.0
            local real vy= 0.0
            local real vz= 0.0
            set s__YDWETimerPattern__Thread_des[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_pos[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_vel[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]]=GetUnitX(object)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]=GetUnitY(object)
            set s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]]=YDWETimerPattern__GetUnitZ(object)
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_des[this]]=s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] + distance * Cos(angle)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_des[this]]=s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] + distance * Sin(angle)
            call MoveLocation(YDWETimerPattern__yd_loc, s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_des[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_des[this]])
            set s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_des[this]]=GetLocationZ(YDWETimerPattern__yd_loc)
            if s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]] > s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_des[this]] then
                set high=high + s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]]
            else
                set high=high + s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_des[this]]
            endif
            set s__YDWETimerPattern__Thread_ac[this]=( 2 * ( s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]] + s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_des[this]] ) - 4 * high ) / ( distance * distance )
            set s__YDWETimerPattern__Thread_bc[this]=( s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_des[this]] - s__YDWETimerPattern__YDVector3_z[s__YDWETimerPattern__Thread_pos[this]] - s__YDWETimerPattern__Thread_ac[this] * distance * distance ) / distance
            set s__YDWETimerPattern__Thread_dist[this]=distance * interval / time
            set s__YDWETimerPattern__Thread_ac[this]=s__YDWETimerPattern__Thread_ac[this] * s__YDWETimerPattern__Thread_dist[this]
            set s__YDWETimerPattern__Thread_bc[this]=s__YDWETimerPattern__Thread_bc[this] * s__YDWETimerPattern__Thread_dist[this]
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]=s__YDWETimerPattern__Thread_dist[this] * Cos(angle)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]=s__YDWETimerPattern__Thread_dist[this] * Sin(angle)
            set s__YDWETimerPattern__Thread_step[this]=0.0
            set s__YDWETimerPattern__Thread_caster[this]=source
            set s__YDWETimerPattern__Thread_obj[this]=object
            set s__YDWETimerPattern__Thread_amount[this]=damage
            set s__YDWETimerPattern__Thread_dsfx[this]=deff
            set s__YDWETimerPattern__Thread_part[this]=attach
            set s__YDWETimerPattern__Thread_switch[this]=1
            set s__YDWETimerPattern__Thread_recycle[this]=true
            set s__YDWETimerPattern__Thread_t[this]=CreateTimer()
            set s__YDWETimerPattern__Thread_g[this]=CreateGroup()
            call UnitAddAbility(s__YDWETimerPattern__Thread_obj[this], 'Amrf')
            call UnitRemoveAbility(s__YDWETimerPattern__Thread_obj[this], 'Amrf')
            call TimerStart(s__YDWETimerPattern__Thread_t[this], interval, true, function s__YDWETimerPattern__Parabola_move)
            call GroupAddUnit(s__YDWETimerPattern__Thread_g[this], object)
            call SaveInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((object))))) )), ( ( (this)))) // INLINED!!
            call SaveInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_t[this]))))) )), ( ( (this)))) // INLINED!!
            return this
        endfunction
    // uniform speed
        function s__YDWETimerPattern__Linear_move takes nothing returns nothing
            local integer this= (LoadInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((GetExpiredTimer()))))))))) // INLINED!!
            if s__YDWETimerPattern__Thread_step[this] > s__YDWETimerPattern__Thread_dist[this] then
                call s__YDWETimerPattern__Thread__set_x(this,GetUnitX(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]) //.pos.x + .vel.x
call s__YDWETimerPattern__Thread__set_y(this,GetUnitY(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]) //.pos.y + .vel.y
//set .pos.z = GetUnitZ(.obj)
set s__YDWETimerPattern__Thread_step[this]=s__YDWETimerPattern__Thread_step[this] - s__YDWETimerPattern__Thread_dist[this]
                //call this.damage(.caster, .pos.x, .pos.y, .pos.z, true, true)
                set YDWETimerPattern__tmp_data=(this)
                call GroupEnumUnitsInRange(s__YDWETimerPattern__Thread_g[this], s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] + s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] + s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]], 120.0, Condition(function YDWETimerPattern__DamageFilter))
                if (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinX), yd_MapMaxX)) != s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] or (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinY), yd_MapMaxY)) != s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] then // INLINED!!
                    set s__YDWETimerPattern__Thread_switch[this]=0
                endif
            else
                set s__YDWETimerPattern__Thread_switch[this]=0
            endif
            if s__YDWETimerPattern__Thread_switch[this] == 0 then
                // YDWETriggerEvent
                if s__YDWETimerPattern__Thread_target[this] != null then
                    //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r  |cffff0000" + GetUnitName(.target) + "|r was hit!!!")
                    //call YDWESaveUnitByString(I2S(YDWEH2I(.caster)), "MoonPriestessArrow", .target)
                    set bj_lastAbilityTargetUnit=s__YDWETimerPattern__Thread_target[this]
                    call YDWESyStemAbilityCastingOverTriggerAction(s__YDWETimerPattern__Thread_caster[this] , 8)
                else
                    call YDWESyStemAbilityCastingOverTriggerAction(s__YDWETimerPattern__Thread_caster[this] , 9)
                endif
                //call KillUnit(.obj)
                call RemoveUnit(s__YDWETimerPattern__Thread_obj[this])
                call sc__YDWETimerPattern__Thread_deallocate(this)
            endif
        endfunction
        function s__YDWETimerPattern__Linear_create takes unit source,unit object,real angle,real distance,real time,real interval,integer uid,integer aid,integer lv,integer orderid,string attach,string sfx returns integer
            local integer this= s__YDWETimerPattern__Linear__allocate()
            set s__YDWETimerPattern__Thread_des[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_pos[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_vel[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_step[this]=distance
            set s__YDWETimerPattern__Thread_dist[this]=distance * interval / time
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]=s__YDWETimerPattern__Thread_dist[this] * Cos(angle)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]=s__YDWETimerPattern__Thread_dist[this] * Sin(angle)
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]]=GetUnitX(object)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]=GetUnitY(object)
            set s__YDWETimerPattern__Thread_caster[this]=source
            set s__YDWETimerPattern__Thread_obj[this]=object
            set s__YDWETimerPattern__Thread_unitid[this]=uid
            set s__YDWETimerPattern__Thread_skills[this]=aid
            set s__YDWETimerPattern__Thread_level[this]=lv
            set s__YDWETimerPattern__Thread_order[this]=orderid
            set s__YDWETimerPattern__Thread_part[this]=attach
            set s__YDWETimerPattern__Thread_gsfx[this]=sfx
            set s__YDWETimerPattern__Thread_switch[this]=1
            set s__YDWETimerPattern__Thread_recycle[this]=false
            set s__YDWETimerPattern__Thread_t[this]=CreateTimer()
            set s__YDWETimerPattern__Thread_g[this]=CreateGroup()
            call TimerStart(s__YDWETimerPattern__Thread_t[this], interval, true, function s__YDWETimerPattern__Linear_move)
            call SaveInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_t[this]))))) )), ( ( (this)))) // INLINED!!
            return this
        endfunction
    // Uniform deceleration
        function s__YDWETimerPattern__Deceleration_move takes nothing returns nothing
            local integer this= (LoadInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((GetExpiredTimer()))))))))) // INLINED!!
            local real l__xp= GetUnitX(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__Thread_dist[this] * s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]
            local real l__yp= GetUnitY(s__YDWETimerPattern__Thread_obj[this]) + s__YDWETimerPattern__Thread_dist[this] * s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]
            if s__YDWETimerPattern__Thread_volume[this] == false then
                //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |rPathable without terrain.")
                if IsTerrainPathable(l__xp, l__yp, PATHING_TYPE_WALKABILITY) then
                    set s__YDWETimerPattern__Thread_switch[this]=0
                else
                    call s__YDWETimerPattern__Thread__set_x(this,l__xp)
                    call s__YDWETimerPattern__Thread__set_y(this,l__yp)
                endif
            else
                call s__YDWETimerPattern__Thread__set_x(this,l__xp)
                call s__YDWETimerPattern__Thread__set_y(this,l__yp)
            endif
            if s__YDWETimerPattern__Thread_follow[this] == 0 then
                if GetUnitFlyHeight(s__YDWETimerPattern__Thread_obj[this]) < 5. then
                    if IsTerrainPathable(s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]], PATHING_TYPE_FLOATABILITY) then
                        call DestroyEffect(AddSpecialEffect(s__YDWETimerPattern__Thread_gsfx[this], s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]))
                    else
                        call DestroyEffect(AddSpecialEffect(s__YDWETimerPattern__Thread_wsfx[this], s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]))
                    endif
                endif
            endif
            set s__YDWETimerPattern__Thread_follow[this]=s__YDWETimerPattern__Thread_follow[this] + 1
            if s__YDWETimerPattern__Thread_follow[this] == 2 then
                set s__YDWETimerPattern__Thread_follow[this]=0
            endif
            if s__YDWETimerPattern__Thread_killdest[this] then
                call MoveRectTo(YDWETimerPattern__Area, s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]])
                call EnumDestructablesInRect(YDWETimerPattern__Area, YDWETimerPattern__Bexpr, function YDWETimerPattern__TreeKill)
            endif
            if s__YDWETimerPattern__Thread_amount[this] > 0.0 then
                //call this.damage(.caster, .pos.x, .pos.y, 0.0, false, .recycle)
                set YDWETimerPattern__tmp_data=(this)
                call GroupEnumUnitsInRange(s__YDWETimerPattern__Thread_g[this], s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]], s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]], 120.0, Condition(function YDWETimerPattern__DamageFilter))
            endif
            set s__YDWETimerPattern__Thread_dist[this]=s__YDWETimerPattern__Thread_dist[this] - s__YDWETimerPattern__Thread_step[this]
            if s__YDWETimerPattern__Thread_dist[this] <= 0.0 or (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinX), yd_MapMaxX)) != s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]] or (RMinBJ(RMaxBJ(((s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]])*1.0), yd_MapMinY), yd_MapMaxY)) != s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]] then // INLINED!!
                set s__YDWETimerPattern__Thread_switch[this]=0
            endif
            if s__YDWETimerPattern__Thread_switch[this] == 0 then
                call SetUnitFlyHeight(s__YDWETimerPattern__Thread_obj[this], GetUnitDefaultFlyHeight(s__YDWETimerPattern__Thread_obj[this]), 200.0)
                call SetUnitTimeScale(s__YDWETimerPattern__Thread_obj[this], 1)
                // YDWETriggerEvent
                call YDWESyStemAbilityCastingOverTriggerAction(s__YDWETimerPattern__Thread_obj[this] , 6)
                call sc__YDWETimerPattern__Thread_deallocate(this)
            endif
        endfunction
        function s__YDWETimerPattern__Deceleration_create takes unit source,unit object,real angle,real distance,real time,real interval,real damage,boolean killtrees,boolean cycle,boolean path,string part,string geff,string weff returns integer
            local integer this= s__YDWETimerPattern__Deceleration__allocate()
local real vx= 0.0
            local real vy= 0.0
            local real l= 0.0
            set s__YDWETimerPattern__Thread_des[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_pos[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__Thread_vel[this]=s__YDWETimerPattern__YDVector3__allocate()
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_vel[this]]=Cos(angle)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_vel[this]]=Sin(angle)
            set s__YDWETimerPattern__Thread_dist[this]=2 * distance * interval / time
            set s__YDWETimerPattern__Thread_step[this]=s__YDWETimerPattern__Thread_dist[this] * interval / time
            set s__YDWETimerPattern__YDVector3_x[s__YDWETimerPattern__Thread_pos[this]]=GetUnitX(object)
            set s__YDWETimerPattern__YDVector3_y[s__YDWETimerPattern__Thread_pos[this]]=GetUnitY(object)
            set s__YDWETimerPattern__Thread_caster[this]=source
            set s__YDWETimerPattern__Thread_obj[this]=object
            set s__YDWETimerPattern__Thread_amount[this]=damage
            set s__YDWETimerPattern__Thread_killdest[this]=killtrees
            set s__YDWETimerPattern__Thread_recycle[this]=cycle
            set s__YDWETimerPattern__Thread_volume[this]=path
            set s__YDWETimerPattern__Thread_gsfx[this]=geff
            set s__YDWETimerPattern__Thread_wsfx[this]=weff
            set s__YDWETimerPattern__Thread_switch[this]=1
            set s__YDWETimerPattern__Thread_follow[this]=0
            set s__YDWETimerPattern__Thread_g[this]=CreateGroup()
            set s__YDWETimerPattern__Thread_t[this]=CreateTimer()
            call TimerStart(s__YDWETimerPattern__Thread_t[this], interval, true, function s__YDWETimerPattern__Deceleration_move)
            call SaveInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_t[this]))))) )), ( ( (this)))) // INLINED!!
            return this
        endfunction
    // Jump Attack PUI
    function YDWETimerPatternJumpAttack takes unit u,real face,real dis,real lasttime,real timeout,real high,real damage,string part,string dsfx returns nothing
        if u == null then
            //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r No object!")
            return
        endif
        call s__YDWETimerPattern__Parabola_create(u , u , Deg2Rad(face) , RMaxBJ(dis, 0) , RMaxBJ(lasttime, 0) , RMaxBJ(timeout, 0) , high , damage , part , dsfx)
    endfunction
    // Moon Priestess Arrow PUI
    function YDWETimerPatternMoonPriestessArrow takes unit u,real face,real dis,real lasttime,real timeout,integer lv,integer aid,integer uid,string order,string part,string dsfx returns nothing
        local unit sour= null
        if u == null then
            //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r No object!")
            return
        endif
        set sour=(LoadUnitHandle(YDHT, StringHash((I2S((GetHandleId((u)))) )), StringHash(( "MoonPriestessArrow")))) // INLINED!!
        if sour == null then
            set sour=u
        endif
        call s__YDWETimerPattern__Linear_create(sour , u , Deg2Rad(face) , RMaxBJ(dis, 0) , RMaxBJ(lasttime, 0) , RMaxBJ(timeout, 0) , uid , aid , IMaxBJ(lv, 1) , OrderId(order) , part , dsfx)
        //call YDWEFlushMissionByString(I2S(YDWEH2I(u)))
        set sour=null
    endfunction
    // Rush Slide PUI
    function YDWETimerPatternRushSlide takes unit u,real face,real dis,real lasttime,real timeout,real damage,boolean killtrees,boolean cycle,boolean path,string part,string gsfx,string wsfx returns nothing
        if u == null then
            //debug call BJDebugMsg("|cff00ff00[YDWE] Timer Pattern : |r No object!")
            return
        endif
        call s__YDWETimerPattern__Deceleration_create(u , u , Deg2Rad(face) , RMaxBJ(dis, 0) , RMaxBJ(lasttime, 0) , RMaxBJ(timeout, 0) , damage , killtrees , cycle , path , part , gsfx , wsfx)
    endfunction
    function YDWETimerPattern__Init takes nothing returns nothing
        set YDWETimerPattern__Area=Rect(- 120.0, - 120.0, 120.0, 120.0)
        set YDWETimerPattern__Bexpr=Filter(function YDWETimerPattern__TreeFilter)
    endfunction

//library YDWETimerPattern ends
//library YDWETimerSystem:
function YDWETimerSystem__NewTaskIndex takes nothing returns integer
 local integer h= YDWETimerSystem__TaskListIdleHead
	if YDWETimerSystem__TaskListIdleHead < 0 then
		if YDWETimerSystem__TaskListIdleMax >= 8000 then
			return 8100
		else
			set YDWETimerSystem__TaskListIdleMax=YDWETimerSystem__TaskListIdleMax + 1
			return YDWETimerSystem__TaskListIdleMax
		endif
	endif
	set YDWETimerSystem__TaskListIdleHead=YDWETimerSystem__TaskListIdle[h]
	return h
endfunction
function YDWETimerSystem__DeleteTaskIndex takes integer index returns nothing
	set YDWETimerSystem__TaskListIdle[index]=YDWETimerSystem__TaskListIdleHead
	set YDWETimerSystem__TaskListIdleHead=index
endfunction
//�ú������д���
function YDWETimerSystem__NewTask takes real time,trigger proc returns integer
 local integer index= YDWETimerSystem__NewTaskIndex()
 local integer h= YDWETimerSystem__TaskListHead
 local integer t= R2I(100. * time) + YDWETimerSystem__CurrentTime
 local integer p
	set YDWETimerSystem__TaskListProc[index]=proc
	set YDWETimerSystem__TaskListTime[index]=t
	loop
		set p=YDWETimerSystem__TaskListNext[h]
		if p < 0 or YDWETimerSystem__TaskListTime[p] >= t then
		//	call BJDebugMsg("NewTask:"+I2S(index))
			set YDWETimerSystem__TaskListNext[h]=index
			set YDWETimerSystem__TaskListNext[index]=p
			return index
		endif
		set h=p
	endloop
	return index
endfunction
function YDWETimerSystemNewTask takes real time,trigger proc returns integer
	return YDWETimerSystem__NewTask(time , proc)
endfunction
function YDWETimerSystemGetCurrentTask takes nothing returns integer
	return YDWETimerSystem__CurrentIndex
endfunction
//ɾ����λ
function YDWETimerSystem__RemoveUnit_CallBack takes nothing returns nothing
    call RemoveUnit(LoadUnitHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerRemoveUnit takes real time,unit u returns nothing
    call SaveUnitHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRemoveUnit), u)
endfunction
//�ݻټ�ʱ��
function YDWETimerSystem__DestroyTimer_CallBack takes nothing returns nothing
    call DestroyTimer(LoadTimerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerDestroyTimer takes real time,timer t returns nothing
    call SaveTimerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyTimer), t)
endfunction
//ɾ����Ʒ
function YDWETimerSystem__RemoveItem_CallBack takes nothing returns nothing
    call RemoveItem(LoadItemHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerRemoveItem takes real time,item it returns nothing
    call SaveItemHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRemoveItem), it)
endfunction
//ɾ����Ч
function YDWETimerSystem__DestroyEffect_CallBack takes nothing returns nothing
    call DestroyEffect(LoadEffectHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerDestroyEffect takes real time,effect e returns nothing
    call SaveEffectHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyEffect), e)
endfunction
//ɾ��������Ч
function YDWETimerSystem__DestroyLightning_CallBack takes nothing returns nothing
    call DestroyLightning(LoadLightningHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerDestroyLightning takes real time,lightning lt returns nothing
 local integer i= YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyLightning)
    call SaveLightningHandle(YDHT, YDWETimerSystem__TimerHandle, i, lt)
endfunction
//���д�����
function YDWETimerSystem__RunTrigger_CallBack takes nothing returns nothing
    call TriggerExecute(LoadTriggerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction
function YDWETimerRunTrigger takes real time,trigger trg returns nothing
    call SaveTriggerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRunTrigger), trg)
endfunction
//ɾ��Ư������
function YDWETimerDestroyTextTag takes real time,texttag tt returns nothing
    local integer N=0
    local integer i=0
    if time <= 0 then
        set time=0.01
    endif
    call SetTextTagPermanent(tt, false)
    call SetTextTagLifespan(tt, time)
    call SetTextTagFadepoint(tt, time)
endfunction
//���ļ�ʱ��������
function YDWETimerSystem__Main takes nothing returns nothing
 local integer h= YDWETimerSystem__TaskListHead
 local integer p
	loop
		set YDWETimerSystem__CurrentIndex=YDWETimerSystem__TaskListNext[h]
		exitwhen YDWETimerSystem__CurrentIndex < 0 or YDWETimerSystem__CurrentTime < YDWETimerSystem__TaskListTime[YDWETimerSystem__CurrentIndex]
		//call BJDebugMsg("Task:"+I2S(CurrentIndex))
		call TriggerEvaluate(YDWETimerSystem__TaskListProc[YDWETimerSystem__CurrentIndex])
		call YDWETimerSystem__DeleteTaskIndex(YDWETimerSystem__CurrentIndex)
		set YDWETimerSystem__TaskListNext[h]=YDWETimerSystem__TaskListNext[YDWETimerSystem__CurrentIndex]
	endloop
	set YDWETimerSystem__CurrentTime=YDWETimerSystem__CurrentTime + 1
endfunction
//��ʼ������
function YDWETimerSystem__Init takes nothing returns nothing
    set YDWETimerSystem__Timer=CreateTimer()
	set YDWETimerSystem__TimerHandle=GetHandleId(YDWETimerSystem__Timer)
	set YDWETimerSystem__CurrentTime=0
	set YDWETimerSystem__TaskListHead=0
	set YDWETimerSystem__TaskListNext[0]=- 1
	set YDWETimerSystem__TaskListIdleHead=1
	set YDWETimerSystem__TaskListIdleMax=1
	set YDWETimerSystem__TaskListIdle[1]=- 1
	
	set YDWETimerSystem__fnRemoveUnit=CreateTrigger()
	set YDWETimerSystem__fnDestroyTimer=CreateTrigger()
	set YDWETimerSystem__fnRemoveItem=CreateTrigger()
	set YDWETimerSystem__fnDestroyEffect=CreateTrigger()
	set YDWETimerSystem__fnDestroyLightning=CreateTrigger()
	set YDWETimerSystem__fnRunTrigger=CreateTrigger()
	call TriggerAddCondition(YDWETimerSystem__fnRemoveUnit, Condition(function YDWETimerSystem__RemoveUnit_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyTimer, Condition(function YDWETimerSystem__DestroyTimer_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnRemoveItem, Condition(function YDWETimerSystem__RemoveItem_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyEffect, Condition(function YDWETimerSystem__DestroyEffect_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyLightning, Condition(function YDWETimerSystem__DestroyLightning_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnRunTrigger, Condition(function YDWETimerSystem__RunTrigger_CallBack))
	
    call TimerStart(YDWETimerSystem__Timer, 0.01, true, function YDWETimerSystem__Main)
endfunction
//ѭ�������ö�����ʱ��
function YDWETimerSystemGetRunIndex takes nothing returns integer
    return YDWETimerSystem__TimerSystem_RunIndex
endfunction
function YDWETimerSystem__RunPeriodicTriggerFunction takes nothing returns nothing
    local integer tid= GetHandleId(GetExpiredTimer())
    local trigger trg= LoadTriggerHandle(YDHT, tid, $D0001)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(trg))), StringHash("RunIndex"), LoadInteger(YDHT, tid, $D0002))
    if TriggerEvaluate(trg) then
        call TriggerExecute(trg)
    endif
    set trg=null
endfunction
function YDWETimerSystem__RunPeriodicTriggerFunctionByTimes takes nothing returns nothing
    local integer tid= GetHandleId(GetExpiredTimer())
    local trigger trg= LoadTriggerHandle(YDHT, tid, $D0001)
    local integer times= LoadInteger(YDHT, tid, $D0003)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(trg))), StringHash("RunIndex"), LoadInteger(YDHT, tid, $D0002))
    if TriggerEvaluate(trg) then
        call TriggerExecute(trg)
    endif
    set times=times - 1
    if times > 0 then
		call SaveInteger(YDHT, tid, $D0003, times)
      else
        call DestroyTimer(GetExpiredTimer())
        call FlushChildHashtable(YDHT, tid)
    endif
    set trg=null
endfunction
function YDWETimerRunPeriodicTrigger takes real timeout,trigger trg,boolean b,integer times,integer data returns nothing
    local timer t
    local integer tid
    local integer index= 0
    if timeout < 0 then
        return
      else
        set t=CreateTimer()
		set tid=GetHandleId(t)
    endif
    set YDWETimerSystem__TimerSystem_RunIndex=YDWETimerSystem__TimerSystem_RunIndex + 1
	call SaveTriggerHandle(YDHT, tid, $D0001, trg)
	call SaveInteger(YDHT, tid, $D0002, YDWETimerSystem__TimerSystem_RunIndex)
	set index=LoadInteger(YDHT, GetHandleId(trg), 'YDTS' + data)
    set index=index + 1
	call SaveInteger(YDHT, GetHandleId(trg), 'YDTS' + data, index)
	call SaveTimerHandle(YDHT, GetHandleId(trg), ( 'YDTS' + data ) * index, t)
	
    if b == false then
		call SaveInteger(YDHT, tid, $D0003, times)
        call TimerStart(t, timeout, true, function YDWETimerSystem__RunPeriodicTriggerFunctionByTimes)
      else
        call TimerStart(t, timeout, true, function YDWETimerSystem__RunPeriodicTriggerFunction)
    endif
    set t=null
endfunction
function YDWETimerRunPeriodicTriggerOver takes trigger trg,integer data returns nothing
 local integer trgid= GetHandleId(trg)
    local integer index= LoadInteger(YDHT, trgid, 'YDTS' + data)
    local timer t
    loop
        exitwhen index <= 0
        set t=LoadTimerHandle(YDHT, trgid, ( 'YDTS' + data ) * index)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, GetHandleId(t))
		call RemoveSavedHandle(YDHT, trgid, ( 'YDTS' + data ) * index)
        set index=index - 1
    endloop
	
    call RemoveSavedInteger(YDHT, trgid, 'YDTS' + data)
    set t=null
endfunction

//library YDWETimerSystem ends
//library WuQiQiHeSystem:
	//武器等级
 function WeaponLevel takes integer itemid returns integer
		//call BJDebugMsg("什么情况3")
		if itemid == 'I04F' then
			return 3
		elseif itemid == 'I00P' then
			return 5
		elseif itemid == 'I00Q' then
			return 5
		elseif itemid == 'I01L' then
			return 2
		elseif itemid == 'I01N' then
			return 2
		elseif itemid == 'I00X' then
			return 4
		elseif itemid == 'I00C' then
			return 6
		elseif itemid == 'I00D' then
			return 6
		elseif itemid == 'I00B' then
			return 6
		elseif itemid == 'I01F' then
			return 1
		elseif itemid == 'I01S' then
			return 1
		elseif itemid == 'I020' then
			return 0
		elseif itemid == 'I01E' then
			return 2
		elseif itemid == 'I021' then
			return 0
		elseif itemid == 'I016' then
			return 2
		elseif itemid == 'I013' then
			return 4
		elseif itemid == 'I08V' then
			return 7
		elseif itemid == 'I097' then
			return 7
		elseif itemid == 'I098' then
			return 7
		elseif itemid == 'I099' then
			return 7
		elseif itemid == 'I09A' then
			return 7
		elseif itemid == 'I09B' then
			return 7
		elseif itemid == 'I09C' then
			return 7
		elseif itemid == 'I09D' then
			return 7
		elseif itemid == 'I0DK' then
			return 7
		elseif itemid == 'I0DU' then
			return 7
		elseif itemid == 'I0DY' then
			return 7
		elseif itemid == 'I0DZ' then
			return 7
		elseif itemid == 'I0E0' then
			return 7
		elseif itemid == 'I0E2' then
			return 7
		endif
		return - 1
	endfunction
	//武器熟练度
 function WeaponQiHe takes unit u,unit uc,integer itemid returns nothing
  local real r= 0.
  local integer level= WeaponLevel(itemid)
		//call BJDebugMsg("什么情况4，"+I2S(level))
		if level == 0 then
			set r=7.0
		elseif level == 1 then
			set r=6.0
		elseif level == 2 then
			set r=5.0
		elseif level == 3 then
			set r=4.5
		elseif level == 4 then
			set r=4.0
		elseif level == 5 then
			set r=3.0
		elseif level == 6 then
			set r=2.5
		elseif level == 7 then
			set r=2.0
		endif
		if LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 3000. * ( 1 + WeaponLevel(itemid) ) or ( LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 5000. * ( 1 + WeaponLevel(itemid) ) and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) ) then // INLINED!!
			if ( ModuloInteger(GetUnitPointValue(uc), 50) != 0 ) and ( GetUnitPointValue(uc) / 100 == 1 or GetUnitPointValue(uc) / 100 >= 5 ) then
				call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 200 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
			else
				call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 2 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
			endif
		endif
		if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) and LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 10000. * ( 1 + WeaponLevel(itemid) ) then // INLINED!!
			call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 6 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
		endif
		//call BJDebugMsg("什么情况2，"+R2S(r)+","+R2S(LoadReal(YDHT,GetHandleId(GetOwningPlayer(u)),itemid)))
	endfunction
 function WeaponPoSun_Condition takes nothing returns boolean
		return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetKillingUnit())) and GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER and GetPlayerSlotState(GetOwningPlayer(GetKillingUnit())) == PLAYER_SLOT_STATE_PLAYING
	endfunction
	//武器耐久度
 function WeaponPoSun takes nothing returns nothing
  local unit u= GetKillingUnit()
  local player p= GetOwningPlayer(u)
  local integer j= 1 + GetPlayerId(p)
  local integer i= 0
  local item it= null
		set i=1
		loop
			exitwhen i > 6
			if ( GetItemType(UnitItemInSlotBJ(GetKillingUnit(), i)) == ITEM_TYPE_ARTIFACT ) then
				set it=UnitItemInSlotBJ(GetKillingUnit(), i)
				if GetItemTypeId(it) == 'I02S' then
					call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 2000)
				elseif GetItemTypeId(it) == 'I02M' then
					call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 6000)
				elseif GetItemTypeId(it) == 'I02Q' then
					call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 10000)
				elseif GetItemTypeId(it) == 'I02R' then
					call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 14000)
				elseif GetItemTypeId(it) == 'I02P' then
					call SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 20000)
				endif
				//非镇妖
				if GetItemTypeId(it) != 'I02S' and GetItemTypeId(it) != 'I02M' and GetItemTypeId(it) != 'I02Q' and GetItemTypeId(it) != 'I02R' and GetItemTypeId(it) != 'I02P' then
					call WeaponQiHe(u , GetTriggerUnit() , GetItemTypeId(it))
					if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(j )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
						if LoadBoolean(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it)) == false and LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it)) >= 5000. * ( 1 + WeaponLevel(GetItemTypeId(it)) ) then
							//set udg_bqds[j] = udg_bqds[j] + 1
							call SaveBoolean(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), true)
							// call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您炼成了第"+I2S(udg_bqds[j])+"把武器，您需要炼成3把武器才能获得兵器大师哦")
						endif
					endif
					if LoadInteger(YDHT, GetHandleId(it), 0) > 0 then
						if not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
							call SaveInteger(YDHT, GetHandleId(it), 0, LoadInteger(YDHT, GetHandleId(it), 0) - 1)
						endif
					endif
				endif
			endif
			set i=i + 1
		endloop
		
		set u=null
		set it=null
		set p=null
	endfunction
 function init takes nothing returns nothing
  local trigger t= CreateTrigger()
		call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
		call TriggerAddCondition(t, Condition(function WeaponPoSun_Condition))
		call TriggerAddAction(t, function WeaponPoSun)
		set t=null
	endfunction
	//重写创造物品的函数
 function createitemloc takes integer id,location loc returns item
  local item it= null
		set it=CreateItemLoc(id, loc)
		set it=null
		return bj_lastCreatedItem
	endfunction
 function createitem takes integer id,real x,real y returns item
		return CreateItem(id, x, y)
	endfunction
 function unitadditembyidswapped takes integer itemId,unit whichHero returns item
  local item it= null
		set it=UnitAddItemByIdSwapped(itemId, whichHero)
		set it=null
		return bj_lastCreatedItem
	endfunction

//library WuQiQiHeSystem ends
//===========================================================================
// 
// 决战江湖1.6.70正式版
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Tue Nov 08 14:30:41 2022
//   Map Author: 云杨 zei_kale
// 
//===========================================================================
//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************
function InitGlobals takes nothing returns nothing
    local integer i= 0
    set udg_UG_ResidualImage=CreateGroup()
    set udg_A_UG=CreateGroup()
    set udg_A_Ang=0
    set udg_A_Ang_2=0
    set udg_A_hurt=0
    set udg_A_num=0
    set udg_x=0
    set udg_y=0
    set udg_A_Int=0
    set udg_Number_player=0
    set i=0
    loop
        exitwhen ( i > 7 )
        set udg_MeiJuJiFen[i]=0
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen ( i > 5 )
        set udg_kurongsharen[i]=0
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen ( i > 5 )
        set udg_HuanZhuangCD[i]=false
        set i=i + 1
    endloop
endfunction
//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************
//===========================================================================
function CreateBuildingsForPlayer5 takes nothing returns nothing
    local player p= Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set u=CreateUnit(p, 'nbse', - 13024.0, - 15264.0, 270.000)
    set u=CreateUnit(p, 'nbse', 1440.0, - 6432.0, 270.000)
    set u=CreateUnit(p, 'n00H', - 8960.0, - 14016.0, 270.000)
    set u=CreateUnit(p, 'nbse', - 288.0, - 13088.0, 270.000)
    set u=CreateUnit(p, 'nbse', 544.0, - 13024.0, 270.000)
endfunction
//===========================================================================
function CreateUnitsForPlayer5 takes nothing returns nothing
    local player p= Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set gg_unit_o02D_0069=CreateUnit(p, 'o02D', - 101.7, - 1403.0, 105.880)
    set u=CreateUnit(p, 'o01I', 430.0, 206.6, 180.000)
    set u=CreateUnit(p, 'o025', 434.5, 41.8, 180.000)
    set gg_unit_N00I_0116=CreateUnit(p, 'N00I', 1315.2, - 13118.7, 343.220)
    set gg_unit_o00K_0126=CreateUnit(p, 'o00K', - 1309.2, - 1901.3, 303.520)
endfunction
//===========================================================================
function CreateUnitsForPlayer6 takes nothing returns nothing
    local player p= Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set gg_unit_N008_0054=CreateUnit(p, 'N008', - 44.7, - 132.0, 210.000)
    set u=CreateUnit(p, 'N009', 600.9, 716.3, 270.000)
endfunction
//===========================================================================
function CreateNeutralHostile takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set u=CreateUnit(p, 'nvil', 9481.5, 2020.6, 153.110)
    set u=CreateUnit(p, 'nvil', 11946.6, 1409.1, 153.110)
    set u=CreateUnit(p, 'nvil', 12790.4, - 318.2, 358.110)
    set u=CreateUnit(p, 'hrif', 12079.0, 8383.5, 94.211)
    set u=CreateUnit(p, 'hrif', 12335.5, 8511.9, 240.795)
    set u=CreateUnit(p, 'hrif', 12570.7, 8503.7, 296.640)
    set u=CreateUnit(p, 'hrif', 12861.9, 8465.7, 235.587)
    set u=CreateUnit(p, 'hrif', 12475.3, 8890.0, 139.454)
    set u=CreateUnit(p, 'hrif', 12093.4, 8917.0, 343.234)
    set u=CreateUnit(p, 'hrif', 12054.8, 8075.7, 247.892)
    set u=CreateUnit(p, 'hrif', 11377.5, 7797.7, 310.505)
    set u=CreateUnit(p, 'hrif', 11017.6, 7781.0, 204.451)
    set u=CreateUnit(p, 'hrif', 11104.1, 8067.7, 215.416)
    set u=CreateUnit(p, 'hrif', 11202.7, 8446.2, 52.648)
    set u=CreateUnit(p, 'hrif', 12905.5, 9070.1, 1.956)
    set u=CreateUnit(p, 'hrif', 13889.7, 9209.3, 246.541)
    set u=CreateUnit(p, 'hrif', 13320.3, 9412.1, 170.480)
    set u=CreateUnit(p, 'Hmkg', 12555.2, 9450.8, 0.040)
    call IssueImmediateOrder(u, "")
    set u=CreateUnit(p, 'hrif', 13040.2, 9945.3, 320.393)
    set u=CreateUnit(p, 'hrif', 12964.0, 10367.6, 268.042)
    set u=CreateUnit(p, 'nvil', 10161.2, 3604.7, 103.350)
    set u=CreateUnit(p, 'nvil', 11325.7, 3482.4, 172.070)
    set u=CreateUnit(p, 'nvil', 11322.3, 743.0, 84.356)
    set u=CreateUnit(p, 'nvil', 10865.2, - 59.7, 238.960)
    set u=CreateUnit(p, 'nvil', 12972.2, - 1286.4, 322.470)
    set u=CreateUnit(p, 'nvil', 13438.4, - 1039.8, 151.045)
    set u=CreateUnit(p, 'nvil', 13883.7, - 1122.0, 87.959)
    set u=CreateUnit(p, 'nvil', 14335.6, - 246.5, 7.174)
    set u=CreateUnit(p, 'nvil', 12558.5, - 1512.8, 224.183)
    set u=CreateUnit(p, 'nvil', 11989.6, - 691.0, 48.506)
    set u=CreateUnit(p, 'nvil', 10697.4, 1028.4, 2.142)
    set u=CreateUnit(p, 'nvil', 9993.2, 838.7, 130.620)
    set u=CreateUnit(p, 'nvil', 9880.9, - 312.0, 83.993)
    set u=CreateUnit(p, 'n017', 4497.0, 2420.3, 244.740)
    set u=CreateUnit(p, 'n017', 4682.4, 2389.7, 244.740)
    set u=CreateUnit(p, 'n017', 4884.2, 2374.0, 244.740)
    set u=CreateUnit(p, 'n017', 5075.1, 2343.2, 244.740)
    set u=CreateUnit(p, 'n017', 4355.3, 3842.3, 244.740)
    set u=CreateUnit(p, 'n017', 4570.0, 3791.6, 244.740)
    set u=CreateUnit(p, 'n017', 4758.0, 3782.1, 244.740)
    set u=CreateUnit(p, 'n017', 4953.4, 3701.1, 244.740)
    set u=CreateUnit(p, 'n017', 6003.5, 3880.6, 59.740)
    set u=CreateUnit(p, 'n017', 6170.3, 3810.9, 64.740)
    set u=CreateUnit(p, 'n017', 6350.6, 3791.0, 64.740)
    set u=CreateUnit(p, 'n017', 6518.1, 3711.4, 64.740)
    set u=CreateUnit(p, 'n017', 5453.7, 2684.7, 244.740)
    set u=CreateUnit(p, 'n017', 5626.1, 2698.0, 244.740)
    set u=CreateUnit(p, 'n017', 5796.1, 2646.3, 244.740)
    set u=CreateUnit(p, 'n017', 5959.2, 2640.0, 244.740)
    set u=CreateUnit(p, 'n015', 6342.4, 2740.4, 202.673)
    set gg_unit_n00M_0131=CreateUnit(p, 'n00M', - 3348.2, - 15208.4, 56.220)
    set gg_unit_n00N_0132=CreateUnit(p, 'n00N', - 3272.5, - 15268.8, 90.000)
    set u=CreateUnit(p, 'n016', 6495.4, 4149.1, 244.967)
    set u=CreateUnit(p, 'nban', 5273.9, 4705.8, 335.060)
    set u=CreateUnit(p, 'n014', 6035.3, 1654.1, 142.916)
endfunction
//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set gg_unit_nvl2_0005=CreateUnit(p, 'nvl2', - 12666.8, - 12668.0, 270.000)
    set u=CreateUnit(p, 'o02C', - 11675.7, - 12657.2, 270.000)
    set u=CreateUnit(p, 'hfoo', 13113.9, - 12953.1, 180.000)
    set u=CreateUnit(p, 'hfoo', 13098.9, - 12608.4, 180.000)
    set u=CreateUnit(p, 'hfoo', 13106.8, - 12266.3, 180.000)
    set u=CreateUnit(p, 'hfoo', 13125.6, - 11941.2, 180.000)
    set u=CreateUnit(p, 'hfoo', 13110.6, - 11596.5, 180.000)
    set u=CreateUnit(p, 'hfoo', 13118.5, - 11254.4, 180.000)
    set u=CreateUnit(p, 'hfoo', 10471.2, - 12877.6, 0.000)
    set u=CreateUnit(p, 'hfoo', 10456.2, - 12532.9, 0.000)
    set u=CreateUnit(p, 'hfoo', 10464.1, - 12190.8, 0.000)
    set u=CreateUnit(p, 'hfoo', 10482.9, - 11865.7, 0.000)
    set u=CreateUnit(p, 'hfoo', 10467.9, - 11521.0, 0.000)
    set u=CreateUnit(p, 'hfoo', 10475.8, - 11178.9, 0.000)
    set u=CreateUnit(p, 'hfoo', 10788.2, - 13132.6, 90.000)
    set u=CreateUnit(p, 'hfoo', 11123.4, - 13127.2, 90.000)
    set u=CreateUnit(p, 'hfoo', 11476.5, - 13127.2, 90.000)
    set u=CreateUnit(p, 'hfoo', 11789.3, - 13119.0, 90.000)
    set u=CreateUnit(p, 'hfoo', 12117.5, - 13126.3, 90.000)
    set u=CreateUnit(p, 'hfoo', 12752.7, - 13125.3, 90.000)
    set u=CreateUnit(p, 'hfoo', 12439.1, - 13131.0, 90.000)
    set u=CreateUnit(p, 'hfoo', 10865.3, - 11041.6, 270.000)
    set u=CreateUnit(p, 'hfoo', 11200.6, - 11052.2, 270.000)
    set u=CreateUnit(p, 'hfoo', 11553.7, - 11052.2, 270.000)
    set u=CreateUnit(p, 'hfoo', 11866.5, - 11044.1, 270.000)
    set u=CreateUnit(p, 'hfoo', 12194.7, - 11051.3, 270.000)
    set u=CreateUnit(p, 'hfoo', 12829.8, - 11050.3, 270.000)
    set u=CreateUnit(p, 'hfoo', 12516.3, - 11048.0, 270.000)
    set u=CreateUnit(p, 'hbsh', 8756.7, 2231.1, 159.134)
    set u=CreateUnit(p, 'hdes', 8725.7, 1444.5, 148.343)
    set u=CreateUnit(p, 'ogrk', 10149.5, 2965.0, 12.490)
    set gg_unit_N007_0055=CreateUnit(p, 'N007', 407.6, - 602.6, 180.000)
    set u=CreateUnit(p, 'nslf', 10997.8, 3200.4, 270.000)
    set u=CreateUnit(p, 'nwnr', 10992.4, 2448.7, 90.000)
    set gg_unit_n00E_0066=CreateUnit(p, 'n00E', 14666.0, 1079.2, 89.340)
    set u=CreateUnit(p, 'o022', 10129.1, 2787.2, 0.000)
    set u=CreateUnit(p, 'n00A', 10780.4, 3209.3, 270.000)
    set u=CreateUnit(p, 'o01X', 12561.4, 1703.5, 225.000)
    set gg_unit_N00P_0084=CreateUnit(p, 'N00P', - 1438.3, - 1387.7, 60.000)
    set gg_unit_N00F_0085=CreateUnit(p, 'N00F', - 1396.8, - 161.8, 300.000)
    set gg_unit_N00B_0086=CreateUnit(p, 'N00B', - 1463.4, - 512.7, 352.620)
    call IssueImmediateOrder(gg_unit_N00B_0086, "")
    call IssueImmediateOrder(gg_unit_N00B_0086, "")
    set u=CreateUnit(p, 'o009', - 2214.0, 469.5, 315.030)
    set u=CreateUnit(p, 'o01Y', - 2283.0, 311.9, 0.000)
    set u=CreateUnit(p, 'o01Z', - 2063.7, 512.1, 270.040)
    set u=CreateUnit(p, 'o021', 10788.7, 2432.2, 90.180)
    set u=CreateUnit(p, 'N00Q', 653.0, - 10821.9, 0.000)
    set gg_unit_N00U_0092=CreateUnit(p, 'N00U', - 1149.0, - 1379.7, 135.000)
    set u=CreateUnit(p, 'N011', - 358.9, - 1403.1, 90.000)
    set gg_unit_N012_0095=CreateUnit(p, 'N012', 412.4, - 811.2, 180.000)
    set u=CreateUnit(p, 'n013', 3886.2, 3121.5, 196.190)
    set u=CreateUnit(p, 'n013', 3865.2, 3027.9, 52.510)
    set u=CreateUnit(p, 'o027', - 8391.7, - 13686.5, 180.000)
    set u=CreateUnit(p, 'o028', - 9565.3, - 13673.1, 0.000)
    set u=CreateUnit(p, 'o02A', - 9010.1, - 13208.2, 270.000)
    set u=CreateUnit(p, 'o029', - 9519.1, - 14831.5, 0.000)
    set u=CreateUnit(p, 'o02B', - 8490.7, - 14848.6, 180.000)
    set u=CreateUnit(p, 'hkni', - 11717.6, - 13939.5, 180.000)
    set u=CreateUnit(p, 'hkni', - 12586.0, - 13906.9, 0.000)
    set u=CreateUnit(p, 'hrdh', 3711.9, 2968.2, 166.770)
    set u=CreateUnit(p, 'hrdh', 3730.5, 3099.0, 263.060)
    set u=CreateUnit(p, 'n013', 3797.6, 3002.8, 196.190)
    set u=CreateUnit(p, 'n013', 3885.1, 2937.0, 116.190)
    set u=CreateUnit(p, 'hhdl', 3781.0, 3397.1, 350.628)
    set u=CreateUnit(p, 'hhdl', 3920.5, 3422.0, 179.146)
    set u=CreateUnit(p, 'n013', 6794.2, 2438.8, 196.190)
    set u=CreateUnit(p, 'n013', 6773.2, 2345.2, 52.510)
    set u=CreateUnit(p, 'hrdh', 6638.5, 2416.3, 263.060)
    set u=CreateUnit(p, 'n013', 6705.6, 2320.1, 196.190)
    set u=CreateUnit(p, 'n013', 6793.1, 2254.3, 116.190)
    set u=CreateUnit(p, 'n013', 7092.3, 2369.2, 37.179)
    set u=CreateUnit(p, 'n013', 7071.3, 2275.5, 49.911)
    set u=CreateUnit(p, 'hrdh', 6936.6, 2346.6, 263.060)
    set u=CreateUnit(p, 'n013', 7003.7, 2250.5, 196.190)
    set u=CreateUnit(p, 'n013', 7091.2, 2184.7, 62.220)
    set u=CreateUnit(p, 'hhdl', 7272.2, 2494.2, 203.308)
    set u=CreateUnit(p, 'hhdl', 7361.4, 2393.4, 70.172)
    set u=CreateUnit(p, 'hhdl', 7493.5, 2335.2, 106.351)
    set u=CreateUnit(p, 'hhdl', 7294.0, 2268.6, 209.944)
    set u=CreateUnit(p, 'hhdl', 7344.0, 2637.7, 292.322)
endfunction
//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer5()
endfunction
//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer5()
    call CreateUnitsForPlayer6()
endfunction
//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateBuildingsForPlayer5() // INLINED!!
    call CreateNeutralHostile()
    call CreateNeutralPassive()
    call CreatePlayerUnits()
endfunction
//***************************************************************************
//*
//*  Custom Script Code
//*
//***************************************************************************
//TESH.scrollpos=0
//TESH.alwaysfold=0
//#include "./YDWELocalVariable.j"
//hardware

//获取鼠标在游戏内的坐标X

//获取鼠标在游戏内的坐标Y

//获取鼠标在游戏内的坐标Z

//鼠标是否在游戏内

//获取鼠标屏幕坐标X

//获取鼠标屏幕坐标Y

//获取鼠标游戏窗口坐标X

//获取鼠标游戏窗口坐标Y

//设置鼠标位置

//注册鼠标点击触发（sync为true时，调用TriggerExecute。为false时，直接运行action函数，可以异步不掉线，action里不要有同步操作）


//注册键盘点击触发


//注册鼠标滚轮触发


//注册鼠标移动触发


//获取触发器的按键码

//获取滚轮delta

//判断按键是否按下

//获取触发key的玩家

//获取war3窗口宽度

//获取war3窗口高度

//获取war3窗口X坐标

//获取war3窗口Y坐标

//注册war3窗口大小变化事件


//判断窗口是否激活

//plus
//设置可摧毁物位置

//设置单位位置-本地调用

//异步执行函数

//取鼠标指向的unit

//设置unit的贴图

//设置内存数值

//设置单位ID

//设置单位模型

//设置小地图背景图片



//sync
//注册数据同步trigger

//同步游戏数据

//获取同步的数据

//获取同步数据的玩家

//gui
/////////////////////////////// 原生UI修改
//隐藏界面元素

//修改游戏世界窗口位置

//头像

//小地图

//技能按钮

//英雄按钮

//英雄血条

//英雄蓝条

//道具按钮

//小地图按钮

//左上菜单按钮

//鼠标提示

//聊天信息

//unit message

//top message

///////////////////////////////
//取rgba色值

//设置界面更新回调（非同步）


//显示/隐藏Frame

//创建frame

//创建SimpleFrame

//销毁frame

//加载toc

//设置frame相对位置

//设置frame绝对位置

//清空frame锚点

//设置frame禁用/启用

//注册UI事件回调


//获取触发ui的玩家

//获取触发的Frame

//查找frame

//查找SimpleFrame

//查找String

//查找Texture

//获取game ui

//点击frame

//自定义屏幕比例

//使用宽屏模式

//设置文字（支持EditBox, TextFrame, TextArea, SimpleFontString、GlueEditBoxWar3、SlashChatBox、TimerTextFrame、TextButtonFrame、GlueTextButton）

//获取文字（支持EditBox, TextFrame, TextArea, SimpleFontString）

//设置字数限制（支持EditBox）

//获取字数限制（支持EditBox）

//设置文字颜色（支持TextFrame, EditBox）

//获取鼠标所在位置的ui控件指针

//设置所有锚点到目标frame上

//设置焦点

//设置模型（支持Sprite、Model、StatusBar）

//获取控件是否启用

//设置透明度（0-255）

//获取透明度

//设置动画

//设置动画进度（autocast为false是可用）

//设置texture（支持Backdrop、SimpleStatusBar）

//设置缩放

//设置tooltip

//鼠标限制在ui内

//获取当前值（支持Slider、SimpleStatusBar、StatusBar）

//设置最大最小值（支持Slider、SimpleStatusBar、StatusBar）

//设置Step值（支持Slider）

//设置当前值（支持Slider、SimpleStatusBar、StatusBar）

//设置frame大小

//根据tag创建frame

//设置颜色（支持SimpleStatusBar）











function DzTriggerRegisterMouseEventTrg takes trigger trg,integer status,integer btn returns nothing
    if trg == null then
        return
    endif
    call DzTriggerRegisterMouseEvent(trg, btn, status, true, null)
endfunction
function DzTriggerRegisterKeyEventTrg takes trigger trg,integer status,integer btn returns nothing
    if trg == null then
        return
    endif
    call DzTriggerRegisterKeyEvent(trg, btn, status, true, null)
endfunction
function DzTriggerRegisterMouseMoveEventTrg takes trigger trg returns nothing
    if trg == null then
        return
    endif
    call DzTriggerRegisterMouseMoveEvent(trg, true, null)
endfunction
function DzTriggerRegisterMouseWheelEventTrg takes trigger trg returns nothing
    if trg == null then
        return
    endif
    call DzTriggerRegisterMouseWheelEvent(trg, true, null)
endfunction
function DzTriggerRegisterWindowResizeEventTrg takes trigger trg returns nothing
    if trg == null then
        return
    endif
    call DzTriggerRegisterWindowResizeEvent(trg, true, null)
endfunction
function DzF2I takes integer i returns integer
    return i
endfunction
function DzI2F takes integer i returns integer
    return i
endfunction
function DzK2I takes integer i returns integer
    return i
endfunction
function DzI2K takes integer i returns integer
    return i
endfunction
function DzTriggerRegisterMallItemSyncData takes trigger trig returns nothing
    call DzTriggerRegisterSyncData(trig, "DZMIA", true)
endfunction
function DzGetTriggerMallItemPlayer takes nothing returns player
    return DzGetTriggerSyncPlayer()
endfunction
function DzGetTriggerMallItem takes nothing returns string
    return DzGetTriggerSyncData()
endfunction

































//library DzAPI ends
// japi






























//library DzAPI:
function DzAPI_Map_IsPlatformVIP takes player whichPlayer returns boolean
	return DzAPI_Map_GetPlatformVIP(whichPlayer) > 0
endfunction
function DzAPI_Map_Global_GetStoreString takes string key returns string
	return RequestExtraStringData(36, GetLocalPlayer(), key, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_Global_StoreString takes string key,string value returns nothing
	call RequestExtraStringData(37, GetLocalPlayer(), key, value, false, 0, 0, 0)
endfunction
function DzAPI_Map_Global_ChangeMsg takes trigger trig returns nothing
	call DzTriggerRegisterSyncData(trig, "DZGAU", true)
endfunction
function DzAPI_Map_ServerArchive takes player whichPlayer,string key returns string
	return RequestExtraStringData(38, whichPlayer, key, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_SaveServerArchive takes player whichPlayer,string key,string value returns nothing
	call RequestExtraBooleanData(39, whichPlayer, key, value, false, 0, 0, 0)
endfunction
function DzAPI_Map_IsRPGQuickMatch takes nothing returns boolean
	return RequestExtraBooleanData(40, null, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_GetMallItemCount takes player whichPlayer,string key returns integer
	return RequestExtraIntegerData(41, whichPlayer, key, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_ConsumeMallItem takes player whichPlayer,string key,integer count returns boolean
	return RequestExtraBooleanData(42, whichPlayer, key, null, false, count, 0, 0)
endfunction
function DzAPI_Map_EnablePlatformSettings takes player whichPlayer,integer option,boolean enable returns boolean
	return RequestExtraBooleanData(43, whichPlayer, null, null, enable, option, 0, 0)
endfunction
function DzAPI_Map_IsBuyReforged takes player whichPlayer returns boolean
	return RequestExtraBooleanData(44, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function GetPlayerServerValueSuccess takes player whichPlayer returns boolean
	if ( DzAPI_Map_GetServerValueErrorCode(whichPlayer) == 0 ) then
		return true
	else
		return false
	endif
endfunction
function DzAPI_Map_StoreIntegerEX takes player whichPlayer,string key,integer value returns nothing
	set key="I" + key
	call RequestExtraBooleanData(39, whichPlayer, key, I2S(value), false, 0, 0, 0)
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredIntegerEX takes player whichPlayer,string key returns integer
 local integer value
	set key="I" + key
	set value=S2I(RequestExtraStringData(38, whichPlayer, key, null, false, 0, 0, 0))
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_StoreInteger takes player whichPlayer,string key,integer value returns nothing
	set key="I" + key
	call DzAPI_Map_SaveServerValue(whichPlayer, key, I2S(value))
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredInteger takes player whichPlayer,string key returns integer
 local integer value
	set key="I" + key
	set value=S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_CommentTotalCount1 takes player whichPlayer,integer id returns integer
	return RequestExtraIntegerData(52, whichPlayer, null, null, false, id, 0, 0)
endfunction
function DzAPI_Map_StoreReal takes player whichPlayer,string key,real value returns nothing
	set key="R" + key
	call DzAPI_Map_SaveServerValue(whichPlayer, key, R2S(value))
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredReal takes player whichPlayer,string key returns real
 local real value
	set key="R" + key
	set value=S2R(DzAPI_Map_GetServerValue(whichPlayer, key))
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_StoreBoolean takes player whichPlayer,string key,boolean value returns nothing
	set key="B" + key
	if ( value ) then
		call DzAPI_Map_SaveServerValue(whichPlayer, key, "1")
	else
		call DzAPI_Map_SaveServerValue(whichPlayer, key, "0")
	endif
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredBoolean takes player whichPlayer,string key returns boolean
 local boolean value
	set key="B" + key
	set key=DzAPI_Map_GetServerValue(whichPlayer, key)
	if ( key == "1" ) then
		set value=true
	else
		set value=false
	endif
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_StoreString takes player whichPlayer,string key,string value returns nothing
	set key="S" + key
	call DzAPI_Map_SaveServerValue(whichPlayer, key, value)
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredString takes player whichPlayer,string key returns string
	return DzAPI_Map_GetServerValue(whichPlayer, "S" + key)
endfunction
function DzAPI_Map_StoreStringEX takes player whichPlayer,string key,string value returns nothing
	set key="S" + key
	call RequestExtraBooleanData(39, whichPlayer, key, value, false, 0, 0, 0)
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_GetStoredStringEX takes player whichPlayer,string key returns string
	return RequestExtraStringData(38, whichPlayer, "S" + key, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_GetStoredUnitType takes player whichPlayer,string key returns integer
 local integer value
	set key="I" + key
	set value=S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_GetStoredAbilityId takes player whichPlayer,string key returns integer
 local integer value
	set key="I" + key
	set value=S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	set key=null
	set whichPlayer=null
	return value
endfunction
function DzAPI_Map_FlushStoredMission takes player whichPlayer,string key returns nothing
	call DzAPI_Map_SaveServerValue(whichPlayer, key, null)
	set key=null
	set whichPlayer=null
endfunction
function DzAPI_Map_Ladder_SubmitIntegerData takes player whichPlayer,string key,integer value returns nothing
	call DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
endfunction
function DzAPI_Map_Stat_SubmitUnitIdData takes player whichPlayer,string key,integer value returns nothing
	if ( value == 0 ) then
		//call DzAPI_Map_Ladder_SetStat(whichPlayer,key,"0")
	else
		call DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
	endif
endfunction
function DzAPI_Map_Stat_SubmitUnitData takes player whichPlayer,string key,unit value returns nothing
	call DzAPI_Map_Stat_SubmitUnitIdData(whichPlayer , key , GetUnitTypeId(value))
endfunction
function DzAPI_Map_Ladder_SubmitAblityIdData takes player whichPlayer,string key,integer value returns nothing
	if ( value == 0 ) then
		//call DzAPI_Map_Ladder_SetStat(whichPlayer,key,"0")
	else
		call DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
	endif
endfunction
function DzAPI_Map_Ladder_SubmitItemIdData takes player whichPlayer,string key,integer value returns nothing
 local string l__S
	if ( value == 0 ) then
		set l__S="0"
	else
		set l__S=I2S(value)
		call DzAPI_Map_Ladder_SetStat(whichPlayer, key, l__S)
	endif
	//call DzAPI_Map_Ladder_SetStat(whichPlayer,key,S)
	set l__S=null
	set whichPlayer=null
endfunction
function DzAPI_Map_Ladder_SubmitItemData takes player whichPlayer,string key,item value returns nothing
	call DzAPI_Map_Ladder_SubmitItemIdData(whichPlayer , key , GetItemTypeId(value))
endfunction
function DzAPI_Map_Ladder_SubmitBooleanData takes player whichPlayer,string key,boolean value returns nothing
	if ( value ) then
		call DzAPI_Map_Ladder_SetStat(whichPlayer, key, "1")
	else
		call DzAPI_Map_Ladder_SetStat(whichPlayer, key, "0")
	endif
endfunction
function DzAPI_Map_Ladder_SubmitTitle takes player whichPlayer,string value returns nothing
	call DzAPI_Map_Ladder_SetStat(whichPlayer, value, "1")
endfunction
function DzAPI_Map_Ladder_SubmitPlayerRank takes player whichPlayer,integer value returns nothing
	call DzAPI_Map_Ladder_SetPlayerStat(whichPlayer, "RankIndex", I2S(value))
endfunction
function DzAPI_Map_Ladder_SubmitPlayerExtraExp takes player whichPlayer,integer value returns nothing
	call DzAPI_Map_Ladder_SetStat(whichPlayer, "ExtraExp", I2S(value))
endfunction
function DzAPI_Map_PlayedGames takes player whichPlayer returns integer
	return RequestExtraIntegerData(45, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_CommentCount takes player whichPlayer returns integer
	return RequestExtraIntegerData(46, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_FriendCount takes player whichPlayer returns integer
	return RequestExtraIntegerData(47, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_IsConnoisseur takes player whichPlayer returns boolean
	return RequestExtraBooleanData(48, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_IsBattleNetAccount takes player whichPlayer returns boolean
	return RequestExtraBooleanData(49, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_IsAuthor takes player whichPlayer returns boolean
	return RequestExtraBooleanData(50, whichPlayer, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_CommentTotalCount takes nothing returns integer
	return RequestExtraIntegerData(51, null, null, null, false, 0, 0, 0)
endfunction
function DzAPI_Map_Statistics takes player whichPlayer,string eventKey,string eventType,integer value returns nothing
	call RequestExtraBooleanData(34, whichPlayer, eventKey, "", false, value, 0, 0)
endfunction
function DzAPI_Map_Returns takes player whichPlayer,integer label returns boolean
	return RequestExtraBooleanData(53, whichPlayer, null, null, false, label, 0, 0)
endfunction
function DzAPI_Map_ContinuousCount takes player whichPlayer,integer id returns integer
	return RequestExtraIntegerData(54, whichPlayer, null, null, false, id, 0, 0)
endfunction
// IsPlayer,                      //是否为玩家
function DzAPI_Map_IsPlayer takes player whichPlayer returns boolean
	return RequestExtraBooleanData(55, whichPlayer, null, null, false, 0, 0, 0)
endfunction
// MapsTotalPlayed,               //所有地图的总游戏时长
function DzAPI_Map_MapsTotalPlayed takes player whichPlayer returns integer
	return RequestExtraIntegerData(56, whichPlayer, null, null, false, 0, 0, 0)
endfunction
// MapsLevel,                    //指定地图的地图等级
function DzAPI_Map_MapsLevel takes player whichPlayer,integer mapId returns integer
	return RequestExtraIntegerData(57, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeGold,              //所有地图的金币消耗
function DzAPI_Map_MapsConsumeGold takes player whichPlayer,integer mapId returns integer
	return RequestExtraIntegerData(58, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeLumber,            //所有地图的木材消耗
function DzAPI_Map_MapsConsumeLumber takes player whichPlayer,integer mapId returns integer
	return RequestExtraIntegerData(59, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeLv1,               //消费 1-199
function DzAPI_Map_MapsConsumeLv1 takes player whichPlayer,integer mapId returns boolean
	return RequestExtraBooleanData(60, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeLv2,               //消费 200-499
function DzAPI_Map_MapsConsumeLv2 takes player whichPlayer,integer mapId returns boolean
	return RequestExtraBooleanData(61, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeLv3,               //消费 500~999
function DzAPI_Map_MapsConsumeLv3 takes player whichPlayer,integer mapId returns boolean
	return RequestExtraBooleanData(62, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
// MapsConsumeLv4,               //消费 1000+
function DzAPI_Map_MapsConsumeLv4 takes player whichPlayer,integer mapId returns boolean
	return RequestExtraBooleanData(63, whichPlayer, null, null, false, mapId, 0, 0)
endfunction
//获取论坛数据（0=累计获得赞数，1=精华帖数量，2=发表回复次数，3=收到的欢乐数，4=是否发过贴子，5=是否版主，6=主题数量）
function DzAPI_Map_GetForumData takes player whichPlayer,integer whichData returns integer
	return RequestExtraIntegerData(65, whichPlayer, null, null, false, whichData, 0, 0)
endfunction
function DzAPI_Map_OpenMall takes player whichPlayer,string whichkey returns boolean
	return RequestExtraBooleanData(66, whichPlayer, whichkey, null, false, 0, 0, 0)
endfunction
// 新建特效(创建到坐标) [R]
function AddSpecialEffectEx takes string modelName,real x,real y returns effect
    local string l__z= BLANK
    if IsPlayerInForce(GetLocalPlayer(), showEffectForce) then
        set l__z=modelName
    endif
    return AddSpecialEffect(l__z, x, y)
endfunction
// 新建特效(创建到点) [R]
function AddSpecialEffectLocEx takes string modelName,location where returns effect
    local string l__z= BLANK
    if IsPlayerInForce(GetLocalPlayer(), showEffectForce) then
        set l__z=modelName
    endif
    return AddSpecialEffectLoc(l__z, where)
endfunction
// 新建特效(创建到单位) [R]
function AddSpecialEffectTargetEx takes string modelName,widget targetWidget,string attachPointName returns effect
    local string l__z= BLANK
    if IsPlayerInForce(GetLocalPlayer(), showEffectForce) then
        set l__z=modelName
    endif
    return AddSpecialEffectTarget(l__z, targetWidget, attachPointName)
endfunction
function AddSpecialEffectLocBJEx takes location where,string modelName returns effect
    local string l__z= BLANK
    if IsPlayerInForce(GetLocalPlayer(), showEffectForce) then
        set l__z=modelName
    endif
    return AddSpecialEffectLocBJ(where, l__z)
endfunction
function AddSpecialEffectTargetUnitBJEx takes string attachPointName,widget targetWidget,string modelName returns effect
    local string l__z= BLANK
    if IsPlayerInForce(GetLocalPlayer(), showEffectForce) then
        set l__z=modelName
    endif
    return AddSpecialEffectTargetUnitBJ(attachPointName, targetWidget, l__z)
endfunction
// 销毁特效
function DestroyEffectEx takes effect whichEffect returns nothing
    call DestroyEffect(whichEffect)
endfunction
//==================武器契合度系统开始==================//
//==================武器契合度系统结束==================//
// 增加金钱
function commonAddGold takes player p,integer gold returns nothing
 local integer i= 1 + GetPlayerId(p)
	set gold=R2I(gold * ( 1 + 0.2 * talent_gold[i] ))
	call AdjustPlayerStateBJ(gold, p, PLAYER_STATE_RESOURCE_GOLD)
endfunction
// 增加木头
function commonAddLumber takes player p,integer lumber returns nothing
 local integer i= 1 + GetPlayerId(p)
	set lumber=R2I(lumber * ( 1 + 0.15 * talent_lumber[i] ))
	call AdjustPlayerStateBJ(lumber, p, PLAYER_STATE_RESOURCE_LUMBER)
endfunction
// 增加声望
function commonAddReputation takes player p,integer reputation returns nothing
 local integer i= 1 + GetPlayerId(p)
	set reputation=R2I(reputation * ( 1 + 0.1 * talent_reputation[i] ))
	// call BJDebugMsg("增加声望：" + I2S(reputation))
	if reputation < 1 then
		set reputation=1
	endif
	set shengwang[i]=shengwang[i] + reputation
endfunction
//A项和B项性格
function AddCharacterABuff takes unit u,integer characterA returns nothing
	call UnitAddAbilityBJ('A066', u)
	call SetPlayerAbilityAvailableBJ(false, 'A066', GetOwningPlayer(u))
	call SetUnitAbilityLevel(u, 'A068', characterA)
endfunction
function AddCharacterBBuff takes unit u,integer characterB returns nothing
	call UnitAddAbilityBJ('A067', u)
	call SetPlayerAbilityAvailableBJ(false, 'A067', GetOwningPlayer(u))
	call SetUnitAbilityLevel(u, 'A069', characterB)
endfunction
function XingGeA takes integer xingge returns string
 local string s= null
	if xingge == 1 then
		set s="愚钝"
	elseif xingge == 2 then
		set s="笨拙"
	elseif xingge == 3 then
		set s="平平"
	elseif xingge == 4 then
		set s="聪明"
	elseif xingge == 5 then
		set s="聪慧"
	endif
	return s
endfunction
function XingGeB takes integer xingge returns string
 local string s= null
	if xingge == 1 then
		set s="浮躁"
	elseif xingge == 2 then
		set s="轻浮"
	elseif xingge == 3 then
		set s="耐心"
	elseif xingge == 4 then
		set s="稳重"
	elseif xingge == 5 then
		set s="沉稳"
	endif
	return s
endfunction
//副本倒计时
function FBdaojishi takes nothing returns nothing
 local player p= GetTriggerPlayer()
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00331号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[1]))) + "秒" ) ))
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00332号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[2]))) + "秒" ) ))
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00333号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[3]))) + "秒" ) ))
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00334号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[4]))) + "秒" ) ))
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00335号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[5]))) + "秒" ) ))
	call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF00336号副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[6]))) + "秒" ) ))
	set p=null
endfunction
//伴侣属性
function BanLvShuXing takes nothing returns nothing
 local trigger t= GetTriggeringTrigger()
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=MAX_BAN_LV_NUM
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		if ( ( GetUnitTypeId(k8[i]) == R8[bj_forLoopBIndex] ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFFF00伴侣：" + GetUnitName(k8[i]) ))
			if ( ( udg_blgg[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF根骨 ：   " + I2S(udg_blgg[bj_forLoopBIndex]) ))
			endif
			if ( ( udg_blwx[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF悟性 ：   " + I2S(udg_blwx[bj_forLoopBIndex]) ))
			endif
			if ( ( udg_bljm[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF经脉 ：   " + I2S(udg_bljm[bj_forLoopBIndex]) ))
			endif
			if ( ( udg_blfy[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF福缘 ：   " + I2S(udg_blfy[bj_forLoopBIndex]) ))
			endif
			if ( ( udg_bldp[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF胆魄 ：   " + I2S(udg_bldp[bj_forLoopBIndex]) ))
			endif
			if ( ( udg_blys[bj_forLoopBIndex] > 0 ) ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF00FFFF医术 ：   " + I2S(udg_blys[bj_forLoopBIndex]) ))
			endif
		endif
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
	set t=null
	set p=null
endfunction
function IsYaoCao takes integer id returns boolean
 local integer i= 1
	loop
		exitwhen i > 12
		if id == YaoCao[i] then
			return true
		endif
		set i=i + 1
	endloop
	return false
endfunction
//宝物掉落函数
function BaoWuDiaoLuo takes unit u,unit l__ut,integer baolv1,integer id1,integer id2,integer id3,integer id4,integer baolv2,integer id5 returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(l__ut)
 local integer array idn
 local integer j= 4
	set idn[1]=id1
	set idn[2]=id2
	set idn[3]=id3
	set idn[4]=id4
	if id4 == 0 then
		set j=3
	endif
	if id3 == 0 then
		set j=2
	endif
	if id2 == 0 then
		set j=1
	endif
	if id1 == 0 then
		set j=0
	endif
	if ( GetRandomInt(1, 1000) <= fuyuan[i] or ( GetRandomInt(1, 100) <= 35 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		//第一类宝物
		if ( j > 0 ) then
			if ( GetRandomInt(0, 100) <= baolv1 ) then
				call createitemloc(idn[GetRandomInt(1, j)] , loc)
			endif
		endif
		//第二类宝物（药物或古董）
		if ( baolv2 != 0 ) then
			if ( ( GetRandomInt(1, 100) <= baolv2 ) ) then
				call createitemloc(id5 , loc)
				if IsYaoCao(id5) and (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
					call createitemloc(id5 , loc)
				endif
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set p=null
	set loc=null
endfunction
//击杀怪物后百分比概率掉落宝物的函数
//如果副职为寻宝师或者1-1000间取随机数小于福缘成立的话，双倍掉落宝物
//unit是击杀者
//possibility:第一种宝物掉落的概率
//itemId:第一种宝物的id
//itemId2:第二种宝物掉落的id，如果没有第二种宝物可以为0
function dropItem takes unit u,integer itemId,integer itemId2,integer possibility returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
	if ( GetRandomInt(1, 1000) <= fuyuan[i] or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( GetRandomInt(0, 100) <= possibility ) then
			call createitemloc(itemId , loc)
		else
			call createitemloc(itemId2 , loc)
		endif
		set N7=N7 + 1
		
	endloop
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
endfunction
//查询药性
function YaoXing takes nothing returns integer
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
 local integer yin= 0
 local integer yang= 0
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=6
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[11] ) ) then
			set yin=yin + 5
			set yang=yang + 1
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[9] ) ) then
			set yin=yin + 0
			set yang=yang + 4
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[10] ) ) then
			set yin=yin + 3
			set yang=yang + 4
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[8] ) ) then
			set yin=yin + 4
			set yang=yang + 3
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[7] ) ) then
			set yin=yin + 4
			set yang=yang + 0
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[12] ) ) then
			set yin=yin + 1
			set yang=yang + 5
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[6] ) ) then
			set yin=yin + 2
			set yang=yang + 3
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[1] ) ) then
			set yin=yin + 2
			set yang=yang + 1
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[2] ) ) then
			set yin=yin + 1
			set yang=yang + 2
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[3] ) ) then
			set yin=yin + 3
			set yang=yang - 1
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[4] ) ) then
			set yin=yin - 1
			set yang=yang + 3
		elseif ( ( GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[5] ) ) then
			set yin=yin + 3
			set yang=yang + 2
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10., ( "|cff00ff33总药性（阴）：" + I2S(yin) ))
	call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10., ( "|cff00ff33总药性（阳）：" + I2S(yang) ))
	set p=null
	return yin * 100 + yang
endfunction
//转化剑意
function TransferJY takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if ( ( xd[i] == 0 ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000英雄，你的剑意不够哦")
	else
		if ( ( yd[i] == 1 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了悟性" ) ))
		elseif ( ( yd[i] == 2 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了根骨" ) ))
		elseif ( ( yd[i] == 3 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了胆魄" ) ))
		elseif ( ( yd[i] == 4 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了医术" ) ))
		elseif ( ( yd[i] == 5 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了福缘" ) ))
		elseif ( ( yd[i] == 6 ) ) then
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ff00当前已将" + ( I2S(xd[i]) + "点剑意转化成了经脉" ) ))
		endif
		if ( ( GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) < 5 ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000转化剑意需要至少5个黄金")
		else
			call DialogSetMessage(v8[i], ( "你拥有" + ( I2S(xd[i]) + "点剑意，请选择要转化的属性" ) ))
			call DialogAddButtonBJ(v8[i], "根骨")
			set w8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "悟性")
			set y8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "福缘")
			set z8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "胆魄")
			set A8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "医术")
			set a8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "经脉")
			set x8[i]=bj_lastCreatedButton
			call DialogAddButtonBJ(v8[i], "取消")
			set B8[i]=bj_lastCreatedButton
			call DialogDisplay(p, v8[i], true)
			set Ad[i]=true
		endif
	endif
	set p=null
endfunction
// 按几何正态分布进行随机
function GetGeoNormRandomReal takes real r1,real r2 returns real
 local real rr1= (YDWELogarithm__Log2(((r1)*1.0)) * 0.3010300) // INLINED!!
 local real rr2= (YDWELogarithm__Log2(((r2)*1.0)) * 0.3010300) // INLINED!!
 local real rr3= GetRandomReal(rr1, rr2)
 local real rr4= GetRandomReal(rr1, rr2)
 local real rr5= GetRandomReal(rr1, rr2)
 local real rr6= GetRandomReal(rr1, rr2)
 local real rr7= GetRandomReal(rr1, rr2)
 local real rr8= GetRandomReal(rr1, rr2)
 local real rr9= ( rr3 + rr4 + rr5 + rr6 + rr7 + rr8 ) / 6.0
	return Pow(10., rr9)
endfunction
//返回玩家数
function GetNumPlayer takes nothing returns integer
 local integer i= 0
 local player p= null
 local integer n= 0
	loop
		exitwhen i > 11
		set p=Player(i)
		if GetPlayerController(p) == MAP_CONTROL_USER and GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING then
			set n=n + 1
		endif
		set i=i + 1
	endloop
	set p=null
	return n
endfunction
function UnitTypeNotNull takes unit u,unittype i returns boolean
	return ( IsUnitType(u, i) != null )
endfunction
//距离loc r1距离r2角度的点
function pu takes location loc,real r1,real r2 returns location
	return Location(GetLocationX(loc) + r1 * Cos(r2 * bj_DEGTORAD), GetLocationY(loc) + r1 * Sin(r2 * bj_DEGTORAD))
endfunction
function Eu takes nothing returns integer
 local integer Fu= Kt
	if ( Fu != 0 ) then
		set Kt=Mt[Fu]
	else
		set Lt=Lt + 1
		set Fu=Lt
	endif
	if ( Fu > 8190 ) then
		return 0
	endif
	set Pt[Fu]=null
	set Qt[Fu]=null
	set Rt[Fu]=.0
	set St[Fu]=.0
	set Tt[Fu]=.0
	set Ut[Fu]=.0
	set Vt[Fu]=.0
	set Wt[Fu]=.0
	set Xt[Fu]=.0
	set Yt[Fu]=.0
	set Zt[Fu]=0
	set Mt[Fu]=- 1
	return Fu
endfunction
function Gu takes integer Fu returns nothing
	if Fu == null then
		return
	elseif ( Mt[Fu] != - 1 ) then
		return
	endif
	set Mt[Fu]=Kt
	set Kt=Fu
endfunction
function Nu takes unit Ou,integer cu returns nothing
 local integer i= 0
	loop
		exitwhen i >= M
		if L[i] == cu then
			set w=Ou
			if K[i] != null and TriggerEvaluate(K[i]) and IsTriggerEnabled(K[i]) then
				call TriggerExecute(K[i])
			endif
		endif
		set i=i + 1
	endloop
endfunction
//万能属性系统
//以下函数仅仅是让技能ID出现在代码里，不然SLK优化器会删除这些技能
function DisplayAllAbilityId takes nothing returns nothing
 local integer aid= 0
	set aid='YDl0'
	set aid='YDl1'
	set aid='YDl2'
	set aid='YDl3'
	set aid='YDl4'
	set aid='YDl5'
	set aid='YDl6'
	set aid='YDl7'
	set aid='YDl8'
	set aid='YDl9'
	set aid='YDla'
	set aid='YDlb'
	set aid='YDlc'
	set aid='YDld'
	set aid='YDle'
	set aid='YDlf'
	set aid='YDm0'
	set aid='YDm1'
	set aid='YDm2'
	set aid='YDm3'
	set aid='YDm4'
	set aid='YDm5'
	set aid='YDm6'
	set aid='YDm7'
	set aid='YDm8'
	set aid='YDm9'
	set aid='YDma'
	set aid='YDmb'
	set aid='YDmc'
	set aid='YDmd'
	set aid='YDme'
	set aid='YDmf'
	set aid='YDc0'
	set aid='YDc1'
	set aid='YDc2'
	set aid='YDc3'
	set aid='YDc4'
	set aid='YDc5'
	set aid='YDc6'
	set aid='YDc7'
	set aid='YDc8'
	set aid='YDc9'
	set aid='YDca'
	set aid='YDcb'
	set aid='YDcc'
	set aid='YDb0'
	set aid='YDb1'
	set aid='YDb2'
	set aid='YDb3'
	set aid='YDb4'
	set aid='YDb5'
	set aid='YDb6'
	set aid='YDb7'
	set aid='YDb8'
	set aid='YDb9'
	set aid='YDba'
	set aid='YDbb'
	set aid='YDbc'
	set aid='YDbd'
	set aid='YDbe'
	set aid='YDbg'
	set aid='YDbh'
	set aid='YDbi'
	set aid='YDbj'
	set aid='YDbk'
	set aid='YDbl'
	set aid='YDbm'
	set aid='YDbn'
endfunction
function kv takes nothing returns nothing
 local integer i= 0
 local integer m= 0
	set P[0]=0
	set P[1]=15
	set P[2]=30
	set P[3]=43
	set P[4]=67
	set Q[0]=15
	set Q[1]=15
	set Q[2]=$D
	set Q[3]=24
	loop
		exitwhen i > 9
		set V[i]=48 + m
		set m=m + 1
		set i=i + 1
	endloop
	set m=0
	loop
		exitwhen i > 26
		set V[i]=97 + m
		set m=m + 1
		set i=i + 1
	endloop
	set i=0
	set m=0
	loop
		exitwhen m > ( Q[0] - 1 )
		set S[i]=1497656368 - 48 + V[m]
		set i=i + 1
		set m=m + 1
	endloop
	set m=0
	loop
		exitwhen m > ( Q[1] - 1 )
		set S[i]=1497656624 - 48 + V[m]
		set i=i + 1
		set m=m + 1
	endloop
	set m=0
	loop
		exitwhen m > ( Q[2] - 1 )
		set S[i]=1497654064 - 48 + V[m]
		set i=i + 1
		set m=m + 1
	endloop
	set m=0
	loop
		exitwhen m > ( Q[3] - 1 )
		set S[i]=1497653808 - 48 + V[m]
		set i=i + 1
		set m=m + 1
	endloop
endfunction
function mv takes nothing returns nothing
 local integer i= 1
 local unit u
 local integer n= 0
 local integer nv= 0
	call kv()
	loop
		set i=1
		set T[nv]=1
		loop
			set T[nv + 1]=T[nv] * 2
			set nv=nv + 1
			set i=i + 1
			exitwhen i == Q[n]
		endloop
		set X[n]=T[nv] - 1
		set Y[n]=- T[nv]
		set nv=nv + 1
		set n=n + 1
		exitwhen n >= 4
	endloop
	if W then
		set u=CreateUnit(Player(15), U, 0, 0, 0)
		set i=0
		loop
			exitwhen i == P[5]
			call UnitAddAbility(u, S[i])
			set i=i + 1
		endloop
		call RemoveUnit(u)
		set u=null
	endif
endfunction
function ov takes player pv returns force
 local force f= CreateForce()
	call ForceAddPlayer(f, pv)
	set Z=f
	set f=null
	return Z
endfunction
function FetchUnitItem takes unit u,integer j returns item
 local integer i= 0
	loop
		set d4=UnitItemInSlot(u, i)
		if GetItemTypeId(d4) == j then
			return d4
		endif
		set i=i + 1
		exitwhen i >= 6
	endloop
	return null
endfunction
function YDWEGetUnitsInRectOfPlayerNull takes rect r,player whichPlayer returns group
 local group g= CreateGroup()
	set bj_groupEnumOwningPlayer=whichPlayer
	call GroupEnumUnitsInRect(g, r, filterGetUnitsInRectOfPlayer)
	set yd_NullTempGroup=g
	set g=null
	return yd_NullTempGroup
endfunction
function YDWEGetRandomSubGroupEnumNull takes nothing returns nothing
	if ( bj_randomSubGroupWant > 0 ) then
		if ( bj_randomSubGroupWant >= bj_randomSubGroupTotal ) or ( GetRandomInt(1, bj_randomSubGroupTotal) <= bj_randomSubGroupWant ) then
			// We either need every remaining unit, or the unit passed its chance check.
			call GroupAddUnit(bj_randomSubGroupGroup, GetEnumUnit())
			set bj_randomSubGroupWant=bj_randomSubGroupWant - 1
		endif
	endif
	set bj_randomSubGroupTotal=bj_randomSubGroupTotal - 1
endfunction
function YDWEGetRandomSubGroupNull takes integer count,group sourceGroup returns group
	set bj_randomSubGroupGroup=CreateGroup()
	set bj_randomSubGroupWant=count
	set bj_randomSubGroupTotal=CountUnitsInGroup(sourceGroup)
	if ( bj_randomSubGroupWant <= 0 or bj_randomSubGroupTotal <= 0 ) then
		return bj_randomSubGroupGroup
	endif
	call ForGroup(sourceGroup, function YDWEGetRandomSubGroupEnumNull)
	return bj_randomSubGroupGroup
endfunction
function YDWEGetItemOfTypeFromUnitBJNull takes unit whichUnit,integer itemId returns item
 local integer index= 0
	loop
		set yd_NullTempItem=UnitItemInSlot(whichUnit, index)
		if GetItemTypeId(yd_NullTempItem) == itemId then
			return yd_NullTempItem
		endif
		set index=index + 1
		exitwhen index >= bj_MAX_INVENTORY
	endloop
	return null
endfunction
function YDWETriggerActionUnitRescuedBJNull takes nothing returns nothing
 local unit theUnit= GetTriggerUnit()
	if IsUnitType(theUnit, UNIT_TYPE_STRUCTURE) then
		call RescueUnitBJ(theUnit, GetOwningPlayer(GetRescuer()), bj_rescueChangeColorBldg)
	else
		call RescueUnitBJ(theUnit, GetOwningPlayer(GetRescuer()), bj_rescueChangeColorUnit)
	endif
	set theUnit=null
endfunction
function YDWETryInitRescuableTriggersBJNull takes nothing returns nothing
 local integer index
	if ( bj_rescueUnitBehavior == null ) then
		set bj_rescueUnitBehavior=CreateTrigger()
		set index=0
		loop
			call TriggerRegisterPlayerUnitEvent(bj_rescueUnitBehavior, Player(index), EVENT_PLAYER_UNIT_RESCUED, null)
			set index=index + 1
			exitwhen index == bj_MAX_PLAYER_SLOTS
		endloop
		call TriggerAddAction(bj_rescueUnitBehavior, function YDWETriggerActionUnitRescuedBJNull)
	endif
endfunction
function YDWEInitRescuableBehaviorBJNull takes nothing returns nothing
 local integer index
	set index=0
	loop
		// If at least one player slot is "Rescuable"-controlled, init the
		// rescue behavior triggers.
		if ( GetPlayerController(Player(index)) == MAP_CONTROL_RESCUABLE ) then
			call YDWETryInitRescuableTriggersBJNull()
			return
		endif
		set index=index + 1
		exitwhen index == bj_MAX_PLAYERS
	endloop
endfunction
function wv takes rect r,boolexpr vv returns group
 local group g= CreateGroup()
	call GroupEnumUnitsInRect(g, r, vv)
	call DestroyBoolExpr(vv)
	set e4=g
	set g=null
	return e4
endfunction
function AddPlayerUnitIntoGroup takes player pv,boolexpr vv returns group
 local group g= CreateGroup()
	call GroupEnumUnitsOfPlayer(g, pv, vv)
	call DestroyBoolExpr(vv)
	set e4=g
	set g=null
	return e4
endfunction
function yv takes multiboard mb,integer zv,integer Av,real av,real Bv,real bv,real Cv returns nothing
 local integer cv= 0
 local integer Dv= 0
 local integer Ev= MultiboardGetRowCount(mb)
 local integer Fv= MultiboardGetColumnCount(mb)
 local multiboarditem Gv= null
	loop
		set cv=cv + 1
		exitwhen cv > Ev
		if ( Av == 0 or Av == cv ) then
			set Dv=0
			loop
				set Dv=Dv + 1
				exitwhen Dv > Fv
				if ( zv == 0 or zv == Dv ) then
					set Gv=MultiboardGetItem(mb, cv - 1, Dv - 1)
					call MultiboardSetItemValueColor(Gv, PercentTo255(av), PercentTo255(Bv), PercentTo255(bv), PercentTo255(100. - Cv))
					call MultiboardReleaseItem(Gv)
				endif
			endloop
		endif
	endloop
	set Gv=null
endfunction
function DuoMianBan takes multiboard mb,integer zv,integer Av,string Iv returns nothing
 local integer cv= 0
 local integer Dv= 0
 local integer Ev= MultiboardGetRowCount(mb)
 local integer Fv= MultiboardGetColumnCount(mb)
 local multiboarditem Gv= null
	loop
		set cv=cv + 1
		exitwhen cv > Ev
		if ( Av == 0 or Av == cv ) then
			set Dv=0
			loop
				set Dv=Dv + 1
				exitwhen Dv > Fv
				if ( zv == 0 or zv == Dv ) then
					set Gv=MultiboardGetItem(mb, cv - 1, Dv - 1)
					call MultiboardSetItemValue(Gv, Iv)
					call MultiboardReleaseItem(Gv)
				endif
			endloop
		endif
	endloop
	set Gv=null
endfunction
//符合条件执行g4[i]触发
function Lv takes nothing returns nothing
 local integer i= 0
	loop
		exitwhen i >= h4
		if g4[i] != null and IsTriggerEnabled(g4[i]) and TriggerEvaluate(g4[i]) then
			call TriggerExecute(g4[i])
		endif
		set i=i + 1
	endloop
endfunction
//单位没有蝗虫技能，则注册单位伤害信息
function Mv takes nothing returns boolean
	if GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') <= 0 then
		call TriggerRegisterUnitEvent(f4, GetFilterUnit(), EVENT_UNIT_DAMAGED)
	endif
	return false
endfunction
//任意单位受伤害事件
function Nv takes nothing returns nothing
 local trigger t= CreateTrigger()
 local region r= CreateRegion()
 local group g= CreateGroup()
	call RegionAddRect(r, GetWorldBounds())
	//新进入地图的单位受伤害
	call TriggerRegisterEnterRegion(t, r, Condition(function Mv))
	//地图上已有的单位受伤害
	call GroupEnumUnitsInRect(g, GetWorldBounds(), Condition(function Mv))
	call DestroyGroup(g)
	set r=null
	set t=null
	set g=null
endfunction
function Ov takes trigger Pv returns nothing
	if Pv == null then
		return
	endif
	if h4 == 0 then
		set f4=CreateTrigger()
		call TriggerAddAction(f4, function Lv)
		call Nv()
	endif
	set g4[h4]=Pv
	set h4=h4 + 1
endfunction
function Qv takes nothing returns nothing
 local integer i= 0
	if GetIssuedOrderId() >= $D0022 and GetIssuedOrderId() <= $D0027 then
		set i4=GetOrderTargetItem()
		loop
			exitwhen i >= m4
			if k4[i] != null and IsTriggerEnabled(k4[i]) and TriggerEvaluate(k4[i]) then
				call TriggerExecute(k4[i])
			endif
			set i=i + 1
		endloop
	endif
endfunction
function TriggerAddRect takes trigger Sv,rect r returns event
 local region Tv= CreateRegion()
	call RegionAddRect(Tv, r)
	set nn4=Tv
	set Tv=null
	return TriggerRegisterEnterRegion(Sv, nn4, null)
endfunction
function UnitHaveItem takes unit u,integer j returns boolean
 local integer i= 0
	if j != 0 then
		loop
			if GetItemTypeId(UnitItemInSlot(u, i)) == j then
				return true
			endif
			set i=i + 1
			exitwhen i >= 6
		endloop
	endif
	return false
endfunction
function UnitHasDenomWeapon takes unit u,integer id returns boolean
	return UnitHaveItem(u , id) or ateDenom[1 + GetPlayerId(GetOwningPlayer(u))] == 1
endfunction
function Vv takes player pv returns nothing
 local group g= CreateGroup()
	call GroupEnumUnitsOfPlayer(g, pv, null)
	call ForGroup(g, function WakePlayerUnitsEnum)
	call DestroyGroup(g)
	set g=null
endfunction
function CheckX takes real x returns real
 local real E2= GetRectMinX(bj_mapInitialPlayableArea) + 50
	if ( x < E2 ) then
		return E2
	endif
	set E2=GetRectMaxX(bj_mapInitialPlayableArea) - 50
	if ( x > E2 ) then
		return E2
	endif
	return x
endfunction
function CheckY takes real y returns real
 local real E2= GetRectMinY(bj_mapInitialPlayableArea) + 50
	if ( y < E2 ) then
		return E2
	endif
	set E2=GetRectMaxY(bj_mapInitialPlayableArea) - 50
	if ( y > E2 ) then
		return E2
	endif
	return y
	
endfunction
function Wv takes nothing returns nothing
 local integer d= 0
 local real x= .0
 local real y= .0
 local integer Xv= 0
	loop
		exitwhen ( Xv == Ot )
		set d=Nt[Xv]
		if ( Rt[d] > 0 ) and ( GetUnitState(Pt[d], UNIT_STATE_LIFE) > 0 ) and ( GetUnitState(Qt[d], UNIT_STATE_LIFE) > 0 ) then
			set Tt[d]=Tt[d] + .01
			if ( Tt[d] >= St[d] ) then
				set Xt[d]=Xt[d] + Ut[d]
				set Yt[d]=Yt[d] + Vt[d]
				set Zt[d]=Zt[d] + Wt[d]
				set x=GetUnitX(Pt[d]) + Yt[d] * Cos(Xt[d])
				set y=GetUnitY(Pt[d]) + Yt[d] * Sin(Xt[d])
				set x=( RMinBJ(RMaxBJ(( ( x ) * 1. ), yd_MapMinX), yd_MapMaxX) )
				set y=( RMinBJ(RMaxBJ(( ( y ) * 1. ), yd_MapMinY), yd_MapMaxY) )
				call SetUnitX(Qt[d], CheckX(x))
				call SetUnitY(Qt[d], CheckY(y))
				call SetUnitFlyHeight(Qt[d], Zt[d], .0)
				set Tt[d]=.0
			endif
			set Rt[d]=Rt[d] - .01
		else
			set z=Pt[d]
			call Nu(Qt[d] , $A)
			set Pt[d]=null
			set Qt[d]=null
			call Gu(d)
			set Ot=Ot - 1
			set Nt[Xv]=Nt[Ot]
			set Xv=Xv - 1
		endif
		set Xv=Xv + 1
	endloop
	if ( Ot == 0 ) then
		call PauseTimer(o4)
	endif
endfunction
//转圈函数
function Yv takes unit Zv,unit dw,real ew,real fw,real gw,real hw,real iw returns nothing
 local integer d= Eu()
 local real x1= GetUnitX(dw)
 local real y1= GetUnitY(dw)
 local real x2= GetUnitX(Zv)
 local real y2= GetUnitY(Zv)
	set Pt[d]=dw
	set Qt[d]=Zv
	set Rt[d]=hw
	set St[d]=iw
	set Ut[d]=ew * ( 3.14159 / 180. )
	set Vt[d]=fw
	set Wt[d]=gw
	set Xt[d]=Atan2(y2 - y1, x2 - x1)
	set Yt[d]=SquareRoot(( x2 - x1 ) * ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 ))
	set Zt[d]=GetUnitFlyHeight(Qt[d])
	set Nt[Ot]=( d )
	set Ot=Ot + 1
	if ( Ot - 1 == 0 ) then
		call TimerStart(o4, .01, true, function Wv)
	endif
endfunction
function jw takes boolean kw returns nothing
	call SetPlayerState(Player(12), PLAYER_STATE_NO_CREEP_SLEEP, IntegerTertiaryOp(kw, 0, 1))
	if ( not kw ) then
		call Vv(Player(12))
	endif
endfunction
function vw takes unit ww returns nothing
 local integer tm= ( LoadInteger(YDHT, StringHash(( I2S(( GetHandleId(( ww )) )) )), StringHash(( "Timer" ))) )
	call FlushChildHashtable(YDHT, StringHash(( I2S(( GetHandleId(( ww )) )) )))
	call FlushChildHashtable(YDHT, StringHash(( I2S(tm) )))
	call DestroyTimer(( LoadTimerHandle(YDHT, StringHash(( I2S(( GetHandleId(( ww )) )) )), StringHash(( "Timer" ))) ))
endfunction
function xw takes nothing returns nothing
 local timer tm= GetExpiredTimer()
 local unit ww= ( ( LoadUnitHandle(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Pet" ))) ) )
 local unit yw= ( ( LoadUnitHandle(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Captain" ))) ) )
 local real x= GetUnitX(yw) - GetUnitX(ww)
 local real y= GetUnitY(yw) - GetUnitY(ww)
 local real d= x * x + y * y
 local real v
 local real a
 local effect e= null
 local real life= ( LoadReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Life" ))) )
 local integer p= ( LoadInteger(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Percent" ))) )
	set v=( LoadReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "GuardRanger" ))) )
	if GetUnitState(ww, UNIT_STATE_LIFE) > 0 and GetUnitState(yw, UNIT_STATE_LIFE) > 0 then
		if d < v * v then
			if ( OrderId2String(GetUnitCurrentOrder(( ww ))) == null ) and GetRandomInt(0, 100) < p then
				set x=GetUnitX(yw)
				set y=GetUnitY(yw)
				set d=GetRandomReal(0, v)
				set a=GetRandomReal(0, 360)
				call IssuePointOrderById(ww, $D0016, x + d * CosBJ(a), y + d * SinBJ(a))
			endif
		else
			set v=( LoadReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "ReturnRanger" ))) )
			if d < v * v then
				if ( OrderId2String(GetUnitCurrentOrder(( ww ))) == null ) then
					call IssuePointOrderById(ww, $D0016, GetUnitX(yw), GetUnitY(yw))
				endif
			else
				set v=( LoadReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "OutRanger" ))) )
				if d != 0 and d > v * v then
					call SetUnitPosition(ww, GetUnitX(yw), GetUnitY(yw))
					set e=AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl" , yw , "chest")
					call DestroyEffect((e)) // INLINED!!
				else
					call IssuePointOrderById(ww, $D0012, GetUnitX(yw), GetUnitY(yw))
				endif
			endif
		endif
	else
		call IssuePointOrderById(ww, $D000F, GetUnitX(yw), GetUnitY(yw))
		call vw(ww)
	endif
	set tm=null
	set ww=null
	set yw=null
	set e=null
endfunction
// 单位ww跟随单位yw
function zw takes unit ww,unit yw,real hw,real Aw,real aw,real Bw,integer bw returns nothing
 local timer tm= CreateTimer()
	call SaveTimerHandle(YDHT, StringHash(( I2S(( GetHandleId(( ww )) )) )), StringHash(( "Timer" )), ( tm ))
	call SaveUnitHandle(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "pet" )), ( ww ))
	call SaveUnitHandle(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Captain" )), ( yw ))
	call SaveInteger(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "Percent" )), ( bw ))
	call SaveReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "GuardRanger" )), ( ( Aw ) * 1. ))
	call SaveReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "ReturnRanger" )), ( ( aw ) * 1. ))
	call SaveReal(YDHT, StringHash(( I2S(( GetHandleId(( tm )) )) )), StringHash(( "OutRanger" )), ( ( Bw ) * 1. ))
	call TimerStart(tm, hw, true, function xw)
	set tm=null
endfunction
function Cw takes nothing returns integer
 local integer h= s4
	if s4 < 0 then
		if t4 >= 8000 then
			return 8100
		else
			set t4=t4 + 1
			return t4
		endif
	endif
	set s4=u4[h]
	return h
endfunction
function cw takes integer cu returns nothing
	set u4[cu]=s4
	set s4=cu
endfunction
function Dw takes real pw,trigger Ew returns integer
 local integer cu= Cw()
 local integer h= r4
 local integer t= R2I(100. * pw) + p4
 local integer p
	set x4[cu]=Ew
	set w4[cu]=t
	loop
		set p=v4[h]
		if p < 0 or w4[p] >= t then
			set v4[h]=cu
			set v4[cu]=p
			return cu
		endif
		set h=p
	endloop
	return cu
endfunction
function Fw takes nothing returns nothing
	call RemoveUnit(LoadUnitHandle(YDHT, c4, q4))
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function Gw takes real pw,unit u returns nothing
	call SaveUnitHandle(YDHT, c4, Dw(pw , y4), u)
endfunction
function Hw takes nothing returns nothing
	call DestroyTimer(LoadTimerHandle(YDHT, c4, q4))
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function Iw takes nothing returns nothing
	call RemoveItem(LoadItemHandle(YDHT, c4, q4))
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function lw takes nothing returns nothing
	call DestroyEffect((LoadEffectHandle(YDHT, c4, q4))) // INLINED!!
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function Jw takes real pw,effect e returns nothing
	call SaveEffectHandle(YDHT, c4, Dw(pw , a4), e)
endfunction
function Kw takes nothing returns nothing
	call DestroyLightning(LoadLightningHandle(YDHT, c4, q4))
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function Lw takes real pw,lightning lt returns nothing
 local integer i= Dw(pw , B4)
	call SaveLightningHandle(YDHT, c4, i, lt)
endfunction
function Mw takes nothing returns nothing
	call TriggerExecute(LoadTriggerHandle(YDHT, c4, q4))
	call RemoveSavedHandle(YDHT, c4, q4)
endfunction
function Nw takes real pw,texttag tt returns nothing
 local integer N= 0
 local integer i= 0
	if pw <= 0 then
		set pw=.01
	endif
	call SetTextTagPermanent(tt, false)
	call SetTextTagLifespan(tt, pw)
	call SetTextTagFadepoint(tt, pw)
endfunction
function Ow takes nothing returns nothing
 local integer h= r4
 local integer p
	loop
		set q4=v4[h]
		exitwhen q4 < 0 or p4 < w4[q4]
		call TriggerEvaluate(x4[q4])
		call cw(q4)
		set v4[h]=v4[q4]
	endloop
	set p4=p4 + 1
endfunction
function Pw takes nothing returns nothing
	set C4=CreateTimer()
	set c4=GetHandleId(C4)
	set p4=0
	set r4=0
	set v4[0]=- 1
	set s4=1
	set t4=1
	set u4[1]=- 1
	set y4=CreateTrigger()
	set z4=CreateTrigger()
	set A4=CreateTrigger()
	set a4=CreateTrigger()
	set B4=CreateTrigger()
	set b4=CreateTrigger()
	call TriggerAddCondition(y4, Condition(function Fw))
	call TriggerAddCondition(z4, Condition(function Hw))
	call TriggerAddCondition(A4, Condition(function Iw))
	call TriggerAddCondition(a4, Condition(function lw))
	call TriggerAddCondition(B4, Condition(function Kw))
	call TriggerAddCondition(b4, Condition(function Mw))
	call TimerStart(C4, .01, true, function Ow)
endfunction
function Qw takes nothing returns nothing
 local integer Rw= GetHandleId(GetExpiredTimer())
 local trigger Pv= LoadTriggerHandle(YDHT, Rw, $D0001)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(Pv))), StringHash("RunIndex"), LoadInteger(YDHT, Rw, $D0002))
	if TriggerEvaluate(Pv) then
		call TriggerExecute(Pv)
	endif
	set Pv=null
endfunction
function Sw takes nothing returns nothing
 local integer Rw= GetHandleId(GetExpiredTimer())
 local trigger Pv= LoadTriggerHandle(YDHT, Rw, $D0001)
 local integer Tw= LoadInteger(YDHT, Rw, $D0003)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(Pv))), StringHash("RunIndex"), LoadInteger(YDHT, Rw, $D0002))
	if TriggerEvaluate(Pv) then
		call TriggerExecute(Pv)
	endif
	set Tw=Tw - 1
	if Tw > 0 then
		call SaveInteger(YDHT, Rw, $D0003, Tw)
	else
		call DestroyTimer(GetExpiredTimer())
		call FlushChildHashtable(YDHT, Rw)
	endif
	set Pv=null
endfunction
//0秒无敌，用来抵消伤害
function WuDiQingChu takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	call SetUnitInvulnerable(u, false)
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function WuDi takes unit u returns nothing
 local timer t= CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SetUnitInvulnerable(u, true)
	call TimerStart(t, 0, false, function WuDiQingChu)
	set t=null
endfunction
//使单位晕眩 先天功、铁布衫
function SetUnitDizzyDoc takes nothing returns nothing
 local timer tm= GetExpiredTimer()
 local integer i= GetHandleId(tm)
 local unit Unit= LoadUnitHandle(YDHT, i, StringHash("unit"))
 local effect Eff= LoadEffectHandle(YDHT, i, StringHash("effect"))
	call DestroyEffect((Eff)) // INLINED!!
	call PauseUnit(Unit, false)
	call FlushChildHashtable(YDHT, i)
	call PauseTimer(tm)
	call DestroyTimer(tm)
	set tm=null
	set Unit=null
	set Eff=null
endfunction
function SetUnitDizzy takes unit Unit,real Size,string ExFile returns nothing
 local timer tm= CreateTimer()
 local integer i= GetHandleId(tm)
 local location loc= GetUnitLoc(Unit)
	//不无敌也不魔免
	if UnitHasBuffBJ(Unit, 'BHds') == false and IsUnitType(Unit, UNIT_TYPE_MAGIC_IMMUNE) == false then
		call SaveUnitHandle(YDHT, i, StringHash("unit"), Unit)
		call SaveEffectHandle(YDHT, i, StringHash("effect"), AddSpecialEffectTargetUnitBJEx("overhead" , Unit , ExFile))
		call PauseUnit(Unit, true)
		call CreateTextTagLocBJ("封穴", loc, 0, 12., 65., 55., 42., 0)
		call Nw(Size , bj_lastCreatedTextTag)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
		call TimerStart(tm, Size, false, function SetUnitDizzyDoc)
	endif
	call RemoveLocation(loc)
	set loc=null
	set tm=null
endfunction
//===========================================================================
//绝学伤害系数
//@id:A06S 九阳真经散篇
//@id:A0DN 九阳神功
function jueXueXiShu takes integer i returns real
	return ( 1. + I2R(juexuelingwu[i]) ) * ( 1 + 0.4 * GetUnitAbilityLevel(udg_hero[i], 'A06S') * ( 1 + GetUnitAbilityLevel(udg_hero[i], 'A0DN') ) )
endfunction

function ShangHaiGongShi takes unit u,unit uc,real w1,real w2,real shxishu,integer id returns real
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local item it= null
 local integer j= 0
 local real shanghai
 local real attack
local real target_def
local real special_def
//local real critical //暴击因子
local real dodge
local real random
local real basic_damage
local real str= I2R(GetHeroStatBJ(0, u, true))
local real agi= I2R(GetHeroStatBJ(1, u, true))
local real int= I2R(GetHeroStatBJ(2, u, true))
if (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) then // INLINED!!
		// 神龙心法加成
		set attack=( 1 + 0.3 * GetUnitAbilityLevel(u, 'A059') ) * 160 * udg_lilianxishu[i] * ( w1 * ( 1 + str / 300 ) * ( 1 + agi / 300 ) + w2 * 0.02 * int ) * ( 1.5 + 0.5 * GetUnitAbilityLevel(u, id) ) * ( udg_shanghaijiacheng[i] + 1. ) * shxishu
		
		// 养老模式
		if udg_yanglao then
			set attack=attack * 30
		endif
		// 9级技能伤害为原来的3倍
		if GetUnitAbilityLevel(u, id) == 9 then
			set attack=attack * 3
		endif
		// 携带十四天书神器，加强所有伤害2倍
		if UnitHaveItem(u , 'I0EE') or ateTianShu[i] == 1 then
			set attack=attack * 3
		endif
		
		//call BJDebugMsg(R2S(attack))
		set j=1
		loop
			exitwhen j >= 7
			if ( GetItemType(UnitItemInSlotBJ(u, j)) == ITEM_TYPE_ARTIFACT ) then
				set it=UnitItemInSlotBJ(u, j)
			endif
			set j=j + 1
		endloop
		//君子剑、淑女剑
		if UnitHaveItem(u , 'I099') and ( GetUnitTypeId(u) == 'O000' or GetUnitTypeId(u) == 'O001' or GetUnitTypeId(u) == 'O004' or GetUnitTypeId(u) == 'O02J' or GetUnitTypeId(u) == 'O031' ) then
			set attack=attack * 1.5
		endif
		if UnitHaveItem(u , 'I09A') and ( GetUnitTypeId(u) == 'O002' or GetUnitTypeId(u) == 'O003' or GetUnitTypeId(u) == 'O023' or GetUnitTypeId(u) == 'O02H' or GetUnitTypeId(u) == 'O02I' or GetUnitTypeId(u) == 'O032' ) then
			set attack=attack * 1.5
		endif
	else
		if id == 'A0CH' then
			// 敌方用先天功不造成伤害
			set attack=0
		else
			set attack=750 * ( w1 + w2 ) * ( 1. + GetUnitAbilityLevel(u, id) ) * shxishu
		endif
		// 难6以上敌方用先天功加超多伤害
		// if udg_nandu>=5 and id == 1093682245 then
		// 	set attack = attack * 10
		// endif 
	endif
	
	
	if uc == null then
		set target_def=1
	else
		// 敌方防御因子 = 1/(1+0.1*敌人等级)
		set target_def=1 / ( 1 + 0.1 * GetUnitLevel(uc) )
	endif
	
	// 特殊防御
	// 如果特攻大于等于42或者敌方虚弱
	if UnitHasBuffBJ(uc, 'B022') then
		set special_def=1 + special_attack[i] * 0.06
	elseif special_attack[i] >= 6 * ( 1 + udg_nandu ) then
		// 特防 = 1+(特攻-42)*0.06，和1比取大值
		set special_def=RMaxBJ(1 + ( special_attack[i] - 6 * ( 1 + udg_nandu ) ) * 0.06, 1)
	else
		// 特防 = 1/(1+0.06*(42 - 特攻))
		set special_def=1 / ( 1 + 0.06 * ( ( 1 + udg_nandu ) * 6 - special_attack[i] ) )
	endif
	
	
	//set critical = udg_baojishanghai[1+GetPlayerId(GetOwningPlayer(u))]
	if uc == null then
		set dodge=25
	else
		set dodge=RMinBJ(I2R(GetUnitLevel(uc)) / 5, 95.)
		if UnitHasBuffBJ(uc, 'Bslo') then
			set dodge=0.
		endif
	endif
	// 随机因子 = 0.95到0.95+(b性格/20)取随机数
	set random=GetRandomReal(0.95, 0.95 + I2R(udg_xinggeB[i]) * 0.05)
	// 伤害 = 攻击因子 * 敌方防御因子 * 随机因子 * 特防
	set basic_damage=attack * target_def * random * special_def
	
	// 红怪
	if LoadInteger(YDHT, GetHandleId(uc), StringHash("color")) == 1 then
		set basic_damage=basic_damage / 100
	endif
	// 绿怪
	if LoadInteger(YDHT, GetHandleId(uc), StringHash("color")) == 2 then
		set basic_damage=basic_damage / 1000
	endif
	// 蓝怪
	if LoadInteger(YDHT, GetHandleId(uc), StringHash("color")) == 3 then
		set basic_damage=basic_damage / 10000
	endif
	// 无尽BOSS战模式第N个BOSS
	if uc == udg_boss[7] and tiaoZhanIndex == 3 then
		set basic_damage=basic_damage / Pow(10, endless_count)
	endif
	
	// 先天功不会miss
	if GetUnitAbilityLevel(u, 'A0CH') >= 1 then
		set dodge=0
	endif
	
	if GetRandomReal(0, 100) < dodge then
		set shanghai=0
	else
		set shanghai=basic_damage
	endif
	
	set p=null
	set it=null
	call SaveReal(YDHT, 1 + GetPlayerId(GetOwningPlayer(u)), id * 3, basic_damage)
	return shanghai
endfunction
function showDamageWithEffects takes integer i,unit u,real damage,boolean critical returns nothing
 local integer criticalInt= 2
 local location loc= GetUnitLoc(u)
 local string damageStr= ""
 local integer j= 1
 local effect eff= null
 local string effectStr= ""
	if critical then
		set criticalInt=1
	endif
	if IsUnitEnemy(u, Player(0)) then
		// 显示伤害
		set damageStr=I2S(R2I(damage) + 1)
		loop
			exitwhen j > StringLength(damageStr)
			set effectStr=""
			if showDamage[i] then
				set effectStr="war3mapImported\\SHZT1" + I2S(criticalInt) + "-" + SubStringBJ(damageStr, j, j) + ".mdx"
			endif
			set eff=AddSpecialEffect(effectStr, GetUnitX(u) + 32 / 1.38 * ( j - 1 ), GetUnitY(u))
			call EXSetEffectZ(eff, GetLocationZ(loc) + 80)
			call DestroyEffect(eff)
			set j=j + 1
		endloop
		if critical then
			set effectStr=""
			if showDamage[i] then
				set effectStr="war3mapImported\\SHZT11-10.mdx"
			endif
			set eff=AddSpecialEffect(effectStr, GetUnitX(u) - 37 / 1.38, GetUnitY(u))
			call EXSetEffectZ(eff, GetLocationZ(loc) + 80)
			call DestroyEffect(eff)
		endif
	endif
	call RemoveLocation(loc)
	set loc=null
	set eff=null
endfunction
function WuGongShangHai takes unit u,unit uc,real shanghai returns nothing
 local effect eff= null
 local location loc= GetUnitLoc(uc)
	if shanghai == 0 then
		set eff=AddSpecialEffectEx("war3mapImported\\SHZT-MISS.mdx" , GetUnitX(uc) - 64 / 1.38 , GetUnitY(uc))
		// call EXSetEffectSize(eff, 1.38)
		call EXSetEffectZ(eff, GetLocationZ(loc) + 80)
		call DestroyEffect((eff)) // INLINED!!
		// call CreateTextTagUnitBJ("MISS",uc,0.,11.,255.,0.,0.,30.)
	else
		if GetRandomReal(0., 100.) <= 100. * udg_baojilv[1 + GetPlayerId(GetOwningPlayer(u))] then
			call UnitDamageTarget(u, uc, udg_baojishanghai[1 + GetPlayerId(GetOwningPlayer(u))] * shanghai, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
			call showDamageWithEffects(1 + GetPlayerId(GetOwningPlayer(u)) , uc , udg_baojishanghai[1 + GetPlayerId(GetOwningPlayer(u))] * shanghai , true)
		else
			call UnitDamageTarget(u, uc, shanghai, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
			call showDamageWithEffects(1 + GetPlayerId(GetOwningPlayer(u)) , uc , shanghai , false)
		endif
	endif
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 400., ( GetRandomReal(80., 100.) ))
	call Nw(.65 , bj_lastCreatedTextTag)
	call RemoveLocation(loc)
	set loc=null
	set eff=null
endfunction
function createPartnerAndTownPortalDummy takes integer i,location loc returns nothing
 local player p= Player(i - 1)
	call CreateNUnitsAtLoc(1, 'nvul', p, loc, bj_UNIT_FACING)
	set P4[i]=bj_lastCreatedUnit
	call CreateNUnitsAtLoc(1, 'O02W', p, loc, bj_UNIT_FACING)
	call SuspendHeroXP(bj_lastCreatedUnit, true)
	call CreateNUnitsAtLoc(1, 'O02X', p, loc, bj_UNIT_FACING)
	call SuspendHeroXP(bj_lastCreatedUnit, true)
	call CreateNUnitsAtLoc(1, 'O02Y', p, loc, bj_UNIT_FACING)
	call SuspendHeroXP(bj_lastCreatedUnit, true)
	call SetPlayerMaxHeroesAllowed(0, p)
	set p=null
endfunction

function addAllAttrs takes integer i,integer num returns nothing
	set gengu[i]=gengu[i] + num
	set danpo[i]=danpo[i] + num
	set jingmai[i]=jingmai[i] + num
	set wuxing[i]=wuxing[i] + num
	set yishu[i]=yishu[i] + num
	set fuyuan[i]=fuyuan[i] + num
endfunction

function jianShuXingDian takes integer i,integer last_i returns nothing
	if last_i == 11 then
		set udg_shuxing[i]=udg_shuxing[i] - 5
	elseif last_i == 14 then
		set wuxing[i]=( wuxing[i] - 3 )
		set jingmai[i]=( jingmai[i] - 2 )
		set fuyuan[i]=( fuyuan[i] - 2 )
	elseif last_i == 16 then
		set gengu[i]=gengu[i] - 2
		set fuyuan[i]=fuyuan[i] - 2
		set danpo[i]=danpo[i] - 1
	elseif last_i == 17 then
		set gengu[i]=gengu[i] - 2
		set fuyuan[i]=fuyuan[i] - 2
		set danpo[i]=danpo[i] - 1
	elseif last_i == 18 then
		set gengu[i]=gengu[i] - 3
		set wuxing[i]=wuxing[i] - 1
		set yishu[i]=yishu[i] - 1
	elseif last_i == 12 then
		set danpo[i]=( danpo[i] - 2 )
		set jingmai[i]=( jingmai[i] - 2 )
		set fuyuan[i]=( fuyuan[i] - 1 )
	elseif last_i == 13 then
		set udg_shuxing[i]=udg_shuxing[i] - 5
	elseif last_i == 1 then
		set gengu[i]=( gengu[i] - 3 )
		set jingmai[i]=( jingmai[i] - 2 )
	elseif last_i == 3 then
		set danpo[i]=( danpo[i] - 3 )
		set jingmai[i]=( jingmai[i] - 2 )
	elseif last_i == 4 then
		set wuxing[i]=( wuxing[i] - 3 )
		set danpo[i]=( danpo[i] - 2 )
	elseif last_i == 5 then
		set jingmai[i]=( jingmai[i] - 3 )
		set fuyuan[i]=( fuyuan[i] - 2 )
	elseif last_i == 6 then
		set gengu[i]=( gengu[i] - 2 )
		set danpo[i]=( danpo[i] - 3 )
	elseif last_i == 7 then
		set yishu[i]=( yishu[i] - 3 )
		set fuyuan[i]=( fuyuan[i] - 2 )
	elseif last_i == 8 then
		set yishu[i]=( yishu[i] - 1 )
		set jingmai[i]=( jingmai[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 3 )
	elseif last_i == 10 then
		set danpo[i]=( danpo[i] - 2 )
		set yishu[i]=( yishu[i] - 1 )
		set jingmai[i]=( jingmai[i] - 2 )
	elseif last_i == 9 then
		set gengu[i]=( gengu[i] - 1 )
		set jingmai[i]=( jingmai[i] - 2 )
		set fuyuan[i]=( fuyuan[i] - 2 )
	elseif last_i == 2 then
		set wuxing[i]=( wuxing[i] - 2 )
		set jingmai[i]=( jingmai[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 2 )
	elseif last_i == 15 then
		set wuxing[i]=( wuxing[i] - 3 )
		set yishu[i]=( yishu[i] - 2 )
	elseif last_i == 19 then
		set gengu[i]=gengu[i] - 3
		set danpo[i]=danpo[i] - 2
	elseif last_i == 20 then
		set wuxing[i]=wuxing[i] - 3
		set fuyuan[i]=fuyuan[i] - 2
	elseif last_i == 21 then
		call addAllAttrs(i , - 1)
	endif
endfunction

function randomMenpai takes player p,integer status returns nothing
 local integer i= GetPlayerId(p) + 1
 local integer last_i= 0
	// 保存上一个门派id
	set last_i=udg_runamen[i]
	
	//
	set udg_runamen[i]=GetRandomInt(1, DENOMINATION_NUMBER)
	if udg_runamen[i] == 11 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓自由门派〓|r")
		call SetPlayerName(p, "〓自由门派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call commonAddLumber(p , 60)
		set udg_shuxing[i]=udg_shuxing[i] + 5
	elseif udg_runamen[i] == 14 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓明教〓|r")
		call SetPlayerName(p, "〓明教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set wuxing[i]=( wuxing[i] + 3 )
		set jingmai[i]=( jingmai[i] + 2 )
		set fuyuan[i]=( fuyuan[i] + 2 )
	elseif udg_runamen[i] == 16 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓神龙教-英雄三招〓|r")
		call SetPlayerName(p, "〓神龙教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=gengu[i] + 2
		set fuyuan[i]=fuyuan[i] + 2
		set danpo[i]=danpo[i] + 1
	elseif udg_runamen[i] == 17 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓神龙教-美人三招〓|r")
		call SetPlayerName(p, "〓神龙教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=gengu[i] + 2
		set fuyuan[i]=fuyuan[i] + 2
		set danpo[i]=danpo[i] + 1
	elseif udg_runamen[i] == 18 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓泰山派〓|r")
		call SetPlayerName(p, "〓泰山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=gengu[i] + 3
		set wuxing[i]=wuxing[i] + 1
		set yishu[i]=yishu[i] + 1
	elseif udg_runamen[i] == 12 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓灵鹫宫〓|r")
		call SetPlayerName(p, "〓灵鹫宫〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set danpo[i]=( danpo[i] + 2 )
		set jingmai[i]=( jingmai[i] + 2 )
		set fuyuan[i]=( fuyuan[i] + 1 )
	elseif udg_runamen[i] == 13 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓姑苏慕容〓|r")
		call SetPlayerName(p, "〓姑苏慕容〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set udg_shuxing[i]=udg_shuxing[i] + 5
	elseif udg_runamen[i] == 1 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓少林派〓|r")
		call SetPlayerName(p, "〓少林派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=( gengu[i] + 3 )
		set jingmai[i]=( jingmai[i] + 2 )
	elseif udg_runamen[i] == 3 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓丐帮〓|r")
		call SetPlayerName(p, "〓丐帮〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set danpo[i]=( danpo[i] + 3 )
		set jingmai[i]=( jingmai[i] + 2 )
	elseif udg_runamen[i] == 4 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓华山派〓|r")
		call SetPlayerName(p, "〓华山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set wuxing[i]=( wuxing[i] + 3 )
		set danpo[i]=( danpo[i] + 2 )
	elseif udg_runamen[i] == 5 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓全真教〓|r")
		call SetPlayerName(p, "〓全真教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set jingmai[i]=( jingmai[i] + 3 )
		set fuyuan[i]=( fuyuan[i] + 2 )
	elseif udg_runamen[i] == 6 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓血刀门〓|r")
		call SetPlayerName(p, "〓血刀门〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=( gengu[i] + 2 )
		set danpo[i]=( danpo[i] + 3 )
	elseif udg_runamen[i] == 7 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓恒山派〓|r")
		call SetPlayerName(p, "〓恒山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set yishu[i]=( yishu[i] + 3 )
		set fuyuan[i]=( fuyuan[i] + 2 )
	elseif udg_runamen[i] == 8 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓峨眉派〓|r")
		call SetPlayerName(p, "〓峨眉派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set yishu[i]=( yishu[i] + 1 )
		set jingmai[i]=( jingmai[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 3 )
	elseif udg_runamen[i] == 10 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓星宿派〓|r")
		call SetPlayerName(p, "〓星宿派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set danpo[i]=( danpo[i] + 2 )
		set yishu[i]=( yishu[i] + 1 )
		set jingmai[i]=( jingmai[i] + 2 )
	elseif udg_runamen[i] == 9 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓武当派〓|r")
		call SetPlayerName(p, "〓武当派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set gengu[i]=( gengu[i] + 1 )
		set jingmai[i]=( jingmai[i] + 2 )
		set fuyuan[i]=( fuyuan[i] + 2 )
	elseif udg_runamen[i] == 2 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓古墓派〓|r")
		call SetPlayerName(p, "〓古墓派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set wuxing[i]=( wuxing[i] + 2 )
		set jingmai[i]=( jingmai[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 2 )
	elseif udg_runamen[i] == 15 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓衡山派〓|r")
		call SetPlayerName(p, "〓衡山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set wuxing[i]=( wuxing[i] + 3 )
		set yishu[i]=( yishu[i] + 2 )
	elseif udg_runamen[i] == 19 then
		set gengu[i]=gengu[i] + 3
		set danpo[i]=danpo[i] + 2
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓铁掌帮〓|r")
		call SetPlayerName(p, "〓铁掌帮〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 20 then
		set wuxing[i]=wuxing[i] + 3
		set fuyuan[i]=fuyuan[i] + 2
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓唐门〓|r")
		call SetPlayerName(p, "〓唐门〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 21 then
		call addAllAttrs(i , 1)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓五毒教〓|r")
		call SetPlayerName(p, "〓五毒教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 22 then
		call addAllAttrs(i , 1)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓桃花岛〓|r")
		call SetPlayerName(p, "〓桃花岛〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call SaveInteger(YDHT, GetHandleId(udg_hero[i]), BI_BO_POINT, 20)
		if Player(i - 1) == GetLocalPlayer() then
			call s__Frame_show(bibo_image)
		endif
	elseif udg_runamen[i] == 23 then
		set danpo[i]=danpo[i] + 5
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓野螺派〓|r")
		call SetPlayerName(p, "〓野螺派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 24 then
		call addAllAttrs(i , 1)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓雪山派〓|r")
		call SetPlayerName(p, "〓雪山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 25 then
		call addAllAttrs(i , 1)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓汝阳王府〓|r")
		call SetPlayerName(p, "〓汝阳王府〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	elseif udg_runamen[i] == 26 then
		set danpo[i]=danpo[i] + 3
		set jingmai[i]=jingmai[i] + 3
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "随机选择了〓嵩山派〓|r")
		call SetPlayerName(p, "〓嵩山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	endif
	if status == 1 then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFF00FFFF提示：|r请在NPC|CFF00EE00郭靖|r处选择副职")
		call PingMinimapForPlayer(p, - 2075, - 312, 3)
		call UnitAddAbility(udg_hero[i], 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(udg_hero[i], 'A040')
			call UnitAddAbility(udg_hero[i], 'A041')
			call UnitAddAbility(udg_hero[i], 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(udg_hero[i], 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(udg_hero[i], Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		// call commonAddLumber( p, 50)
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, udg_hero[i])
	endif
	// 扣除原来的属性
	if status == 2 then
		call jianShuXingDian(i , last_i)
	endif
endfunction
//击退系统
function knock_back_condition takes nothing returns boolean
 local unit u= LoadUnitHandle(YDHT, StringHash("击退"), 0)
 local real shanghai= LoadReal(YDHT, StringHash("击退"), 1)
 local unit uc= GetFilterUnit()
	if IsUnitEnemy(uc, GetOwningPlayer(u)) then
		//call DisplayTextToPlayer(GetOwningPlayer(u),0,0,R2S(shanghai))
		//call WuGongShangHai(u,uc,shanghai)
	endif
	set uc=null
	set u=null
	call FlushChildHashtable(YDHT, StringHash("击退"))
	return false
endfunction
function knock_back_on_timer takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local unit u= LoadUnitHandle(YDHT, p, 0)
 local integer step= LoadInteger(YDHT, p, 1) + 1
 local real shanghai= LoadReal(YDHT, p, 6)
 local group g= CreateGroup()
	//call  DisplayTextToPlayer(GetOwningPlayer(u),0,0,R2S(shanghai))
	call SaveInteger(YDHT, p, 1, step)
	if IsTerrainPathable(GetUnitX(u) + LoadReal(YDHT, p, 3), GetUnitY(u) + LoadReal(YDHT, p, 4), PATHING_TYPE_WALKABILITY) == false then
		call SetUnitX(u, CheckX(GetUnitX(u) + LoadReal(YDHT, p, 3)))
		call SetUnitY(u, CheckY(GetUnitY(u) + LoadReal(YDHT, p, 4)))
		call DestroyEffect((AddSpecialEffectEx(LoadStr(YDHT, p, 5) , GetUnitX(u) , GetUnitY(u)))) // INLINED!!
	endif
	call SaveUnitHandle(YDHT, StringHash("击退"), 0, u)
	call SaveReal(YDHT, StringHash("击退"), 1, shanghai)
	call GroupEnumUnitsInRange(g, CheckX(GetUnitX(u)), CheckY(GetUnitY(u)), 500, Condition(function knock_back_condition))
	if ( step >= LoadInteger(YDHT, p, 2) ) then
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, p)
	endif
	call GroupClear(g)
	call DestroyGroup(g)
	set g=null
	set u=null
	set t=null
endfunction
//击退函数
function knock_back takes unit u,real angle,real dist,real time,real period,string model,real shanghai returns nothing
 local timer t= CreateTimer()
 local integer p= GetHandleId(t)
 local integer m= R2I(time / period)
	set dist=dist / m //  单次位移距离
call SaveUnitHandle(YDHT, p, 0, u) //  存储被击退单位
call SaveInteger(YDHT, p, 1, 0) //  存储循环计数
call SaveInteger(YDHT, p, 2, m) //  存储次数
call SaveReal(YDHT, p, 3, dist * Cos(angle)) //  存储x轴速度分量
call SaveReal(YDHT, p, 4, dist * Sin(angle)) //  存储y轴速度分量
call SaveStr(YDHT, p, 5, model)
	call SaveReal(YDHT, p, 6, shanghai) //存储伤害
call TimerStart(t, period, true, function knock_back_on_timer)
	set t=null
endfunction
function IsCertainWuGong takes unit u,unit uc,integer id returns boolean
	return ( GetRandomReal(0., 100) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] / 5 ) and ( GetUnitAbilityLevel(u, id) >= 1 ) and ( IsUnitEnemy(uc, GetOwningPlayer(u)) )
endfunction
//BOSS AI放技能
function IsUnitBoss takes nothing returns boolean
	return ( ( GetUnitPointValue(GetTriggerUnit()) == 101 ) )
endfunction
function BossFangJiNeng takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEventDamageSource()
 local real x= GetUnitX(uc)
 local real y= GetUnitY(uc)
	if GetRandomInt(1, 100) < 50 then
		if ( GetUnitTypeId(GetTriggerUnit()) == u7[1] ) then
			call IssuePointOrderById(u, $D0278, x, y)
		elseif ( GetUnitTypeId(GetTriggerUnit()) == u7[2] ) then
			if GetRandomInt(1, 3) == 1 then
				call IssueTargetOrderById(u, $D0278, uc)
			elseif GetRandomInt(1, 2) == 1 then
				call IssueImmediateOrderById(u, $D00D1)
			else
				call IssueImmediateOrderById(u, $D00D2)
			endif
		elseif ( GetUnitTypeId(GetTriggerUnit()) == u7[3] ) then
			call IssuePointOrderById(u, $D0278, x, y)
		elseif ( GetUnitTypeId(GetTriggerUnit()) == u7[4] ) then
			call IssuePointOrderById(u, $D0278, x, y)
		elseif ( GetUnitTypeId(GetTriggerUnit()) == u7[5] ) then
			call IssueTargetOrder(u, "chemicalrage", u)
		elseif ( GetUnitTypeId(GetTriggerUnit()) == u7[6] ) then
			call IssueTargetOrder(u, "devour", u)
		endif
	endif
	set u=null
	set uc=null
endfunction
//封装CreateTimerDialog方法并使对话框自动显示
function createTimerDialog takes timer t,string title returns timerdialog
	call CreateTimerDialogBJ(t, title)
	call TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	return bj_lastCreatedTimerDialog
endfunction

function maJiaUseAbilityAtEnemysLoc takes unit owner,integer unitId,integer abilityId,integer orderId,unit target,real lifeTime returns nothing
 local location loc= GetUnitLoc(target)
	call CreateNUnitsAtLoc(1, unitId, GetOwningPlayer(owner), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, abilityId)
	call IssueTargetOrderById(bj_lastCreatedUnit, orderId, target)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', lifeTime)
	call RemoveLocation(loc)
	set loc=null
endfunction

function maJiaUseLeveldAbilityAtTargetLoc takes unit owner,integer unitId,integer abilityId,integer ablilityLevel,integer orderId,unit target,real lifeTime returns nothing
 local location loc= GetUnitLoc(target)
	call CreateNUnitsAtLoc(1, unitId, GetOwningPlayer(owner), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, abilityId)
	call SetUnitAbilityLevel(bj_lastCreatedUnit, abilityId, ablilityLevel)
	call IssueTargetOrderById(bj_lastCreatedUnit, orderId, target)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', lifeTime)
	call RemoveLocation(loc)
	set loc=null
endfunction

function PassiveWuGongCondition takes unit playerControllingUnit,unit enemy,integer abilityId returns boolean
	return GetUnitAbilityLevel(playerControllingUnit, abilityId) >= 1 and IsUnitEnemy(enemy, GetOwningPlayer(playerControllingUnit))
endfunction

function DamageFilter takes unit playerControllingUnit,unit filtered returns boolean
	return IsUnitAliveBJ(filtered) and IsUnitEnemy(filtered, GetOwningPlayer(playerControllingUnit))
endfunction
// 是否为进攻者的敌人
function isAttackerEnemy takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
// 是否为触发单位的敌人
function isTriggerEnemy takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
endfunction

function DamageCoefficientByAbility takes unit u,integer abilityId,real coefficient returns real
	if ( GetUnitAbilityLevel(u, abilityId) >= 1 ) then
		return coefficient
	endif
	return 0.0
endfunction

function DamageCoefficientByItem takes unit u,integer itemId,real coefficient returns real
	if ( UnitHaveItem(u , itemId) ) then
		return coefficient
	endif
	return 0.0
endfunction

function PassiveWuGongEffectAndDamage takes unit playerControllingUnit,unit enemy,string modelName,real w1,real w2,real damageCoefficient,integer abilityId returns nothing
 local location loc= GetUnitLoc(enemy)
	call DestroyEffect((AddSpecialEffectLocEx(modelName , loc))) // INLINED!!
	call WuGongShangHai(playerControllingUnit , enemy , ShangHaiGongShi(playerControllingUnit , enemy , w1 , w2 , damageCoefficient , abilityId))
	call RemoveLocation(loc)
	set loc=null
endfunction

function FontFloat takes string s,location loc,real zoffset,real size,real red,real green,real blue,real transparency,real time returns nothing
	call CreateTextTagLocBJ(s, loc, zoffset, size, red, green, blue, transparency)
	call Nw(time , bj_lastCreatedTextTag)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
endfunction

function clearTimer takes timer tm returns nothing
	call FlushChildHashtable(YDHT, GetHandleId(tm))
	call PauseTimer(tm)
	call DestroyTimer(tm)
endfunction
// mod 1-增加 2-设置
// ch 增加数量
// id 生命值修改的技能
function LifeChange takes unit u,integer mod,integer ch,integer id returns nothing
 local integer a
 local integer b
 local integer c
 local integer d
 local integer aid= id
	
	if mod == 1 then
		set ch=- ch
	elseif mod == 2 then
		set ch=ch - R2I(GetUnitState(u, UNIT_STATE_MAX_LIFE))
	endif
	//set YDWEADDBONUS_LIFE=YDWEADDBONUS_LIFE+ch
	if ch > 999999999 then
		set ch=999999999
	endif
	if ch < - 999999999 then
		set ch=- 999999999
	endif
	if ch < 0 then
		set a=2
		set ch=- ch
	else
		set a=12
	endif
	set b=0
	loop
		exitwhen b == 10
		set c=ch - ch / 10 * 10
		set d=0
		loop
			exitwhen d == c
			call UnitAddAbility(u, aid)
			call SetUnitAbilityLevel(u, aid, a)
			call UnitRemoveAbility(u, aid)
			set d=d + 1
		endloop
		set ch=ch / 10
		set a=a + 1
		set b=b + 1
	endloop
	
endfunction
// 百分比伤害
function percentDamage takes unit uc,real percent,boolean max returns nothing
	// 无尽BOSS模式下，百分比伤害失效
	if uc == udg_boss[7] and tiaoZhanIndex == 3 then
		return
	endif
	set percent=percent / 2
	if max then
		if GetUnitState(uc, UNIT_STATE_LIFE) <= percent / 100 * GetUnitState(uc, UNIT_STATE_MAX_LIFE) then
			call WuDi(uc)
			call SetWidgetLife(uc, 1.)
		else
			call SetWidgetLife(uc, GetUnitState(uc, UNIT_STATE_LIFE) - percent / 100 * GetUnitState(uc, UNIT_STATE_MAX_LIFE))
		endif
	else
		call SetWidgetLife(uc, GetWidgetLife(uc) * ( 100 - percent ) / 100)
	endif
endfunction
function isPlayersEnemy takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), Player(5)) and IsUnitAliveBJ(GetFilterUnit())
endfunction
// 动态调整难度
function dynamicDifficultyAdjustment takes integer experience returns nothing
	// 查看玩家1到玩家5的历练值，是否当前为唯一的最高值，如果是，则调整难度
 local integer count= 0
 local integer whichPlayer= 0
 local integer i= 1
	loop
		exitwhen i > 5
		if xiuxing[i] > experience then
			return
		endif
		if xiuxing[i] == experience then
			set count=count + 1
			set whichPlayer=i
		endif
		set i=i + 1
	endloop
	if count == 1 and udg_boshu <= 4 * experience then
		// 如果当前难度为0或2，则科技+1
		if udg_nandu <= 2 then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "由于玩家" + I2S(whichPlayer) + "完成了历练" + I2S(experience) + "，难度动态调整，怪物科技上升")
			call SetPlayerTechResearched(Player(12), 1378889777, GetPlayerTechCount(Player(12), 1378889777, true) + 1)
			call SetPlayerTechResearched(Player(6), 1378889777, GetPlayerTechCount(Player(6), 1378889777, true) + 1)
			call SetPlayerTechResearched(Player(15), 1378889777, GetPlayerTechCount(Player(15), 1378889777, true) + 1)
		endif
	endif
endfunction
function isKungfuFull takes integer i returns boolean
 local integer j= 1
	loop
		exitwhen j > wugongshu[i]
		// call BJDebugMsg(I2S(I7[20 * ( i - 1 ) + j]))
		if I7[20 * ( i - 1 ) + j] == 1095067243 then
			return false
		endif
		set j=j + 1
	endloop
	call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0033学习技能已达上限，请先遗忘部分技能")
	return true
endfunction
function getHeroDummyId takes integer id returns integer
 local integer rid= 0
	if id == 'O004' then
        set rid=1747988533
    elseif id == 'O001' then
        set rid=1747988535
    elseif id == 'O002' then
        set rid=1747988536
    elseif id == 'O003' then
        set rid=1747988537
    elseif id == 'O000' then
        set rid=1747988534
    elseif id == 'O023' or id == 'O02H' or id == 'O02I' then
        set rid='h00I'
    elseif id == 'O02J' then
        set rid='h00K'
	elseif id == 'O031' then
		set rid='h00Q'
	elseif id == 'O032' then
		set rid='h00P'
    endif
	return rid
endfunction
function isPet takes integer id returns boolean
	return id == 'n00W' or id == 'n00V' or id == 'nvul' or id == 'n00J' or id == 'n018'
endfunction
// 武功升重系统
function isTitle takes integer i,integer title returns boolean
	if title <= 30 then
		return YDWEBitwise_AND(title0[i] , ((1 ) * YDWEBitwise__C2[( title - 1)])) != 0 // INLINED!!
	else
		return YDWEBitwise_AND(title1[i] , ((1 ) * YDWEBitwise__C2[( title - 31)])) != 0 // INLINED!!
	endif
endfunction

function setTitleNumber takes integer i,integer title returns nothing
	if title <= 30 then
		set title0[i]=YDWEBitwise_OR(title0[i] , ((1 ) * YDWEBitwise__C2[( title - 1)])) // INLINED!!
	else
		set title1[i]=YDWEBitwise_OR(title1[i] , ((1 ) * YDWEBitwise__C2[( title - 31)])) // INLINED!!
	endif
endfunction
function isChief takes integer i,integer denomination returns boolean
	return YDWEBitwise_AND(chief[i] , ((1 ) * YDWEBitwise__C2[( denomination - 1)])) != 0 // INLINED!!
endfunction

function setChiefNumber takes integer i,integer denomination returns nothing
	set chief[i]=YDWEBitwise_OR(chief[i] , ((1 ) * YDWEBitwise__C2[( denomination - 1)])) // INLINED!!
endfunction
function QiJueCoefficient takes unit u returns integer
	// 是否激活九阳真经残卷
 local integer jyd= JYd[1 + GetPlayerId(GetOwningPlayer(u))]
	// 是否有王语嫣称号
 local boolean wyy= isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 44)
	
	// 九阳残卷、七绝、王语嫣400%升重
	if ( UnitHaveItem(u , 'I01J') or UnitHaveItem(u , 'I0DB') ) and jyd == 1 and wyy then
		return 8
	endif
	// 九阳残卷、王语嫣300%升重
	if jyd == 1 and wyy then
		return 6
	endif
	// 九阳残卷和七绝200%升重，王语嫣和七绝200%升重
	if ( UnitHaveItem(u , 'I01J') or UnitHaveItem(u , 'I0DB') ) and ( jyd == 1 or wyy ) then
		return 4
	endif
	// 九阳残卷100%升重，王语嫣100%升重
	if jyd == 1 or wyy then
		return 2
	endif
	// 七绝或新手神器50%升重
	if UnitHaveItem(u , 'I01J') or UnitHaveItem(u , 'I0DB') or jyd == 1 then
		return 1
	endif
	return 0
endfunction
function IncAbilityAndItemCharge takes unit u,integer id returns nothing
 local integer i= 0
	call IncUnitAbilityLevel(u, id)
	loop
		exitwhen i >= 6
		if GetItemTypeId(UnitItemInSlot(u, i)) == ITEM_HAN_SHA then
			call SetItemCharges(UnitItemInSlot(u, i), GetItemCharges(UnitItemInSlot(u, i)) + 1)
		endif
		set i=i + 1
	endloop
endfunction
function kungfuLevelUp takes unit u,integer id,real r returns nothing
 local integer level= GetUnitAbilityLevel(u, id)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer needExp= level * level * R2I(r) / 6
local integer baseExp= ( 20 + udg_xinggeA[i] + wuxing[i] / 3 ) * 2
local real extraTimes= 1
 local integer realExp= 0
 local integer add= 0
 local boolean flag= false
	// 慕容家训
	if UnitHasBuffBJ(u, 'B010') then
		set extraTimes=extraTimes + 0.1 * GetUnitAbilityLevel(u, 'A02V')
	endif
	// 精武师九重武学影响
	set extraTimes=extraTimes + udg_jwjs[i] * 0.1
	// 天赋：天纵奇才 增加升重速度
	if UnitHasBuffBJ(u, 'B01O') then
		set extraTimes=extraTimes + 0.2 + 0.1 * bigTalent[i]
	endif
	// 七绝护符或新手神器增加升重速度
	if UnitHaveItem(u , 'I01J') or UnitHaveItem(u , 'I0DB') then
		set extraTimes=extraTimes + 0.2
	endif
	// 激活九阳真经残卷
	if JYd[i] == 1 then
		set extraTimes=extraTimes + 0.4
	endif
	// 神仙姐姐称号增加升重速度
	if isTitle(i , 44) then
		set extraTimes=extraTimes + 0.4
	endif
	set realExp=R2I(baseExp * extraTimes)
	if level > 0 and level < 9 then
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) + realExp)
		call SaveStr(YDHT, GetHandleId(GetOwningPlayer(u)), id * 2, I2S(LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id)) + "/" + I2S(needExp))
	endif
	if level > 0 and LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) >= needExp then
		if id != 'A07W' and level < 9 then
			set flag=true
		endif
		if id == 'A07W' and level < 7 then
			set flag=true
		endif
	endif
	if flag then
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) - needExp)
		call IncAbilityAndItemCharge(u , id)
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5, GetUnitAbilityLevel(u, id))
		if GetPlayerController(p) == MAP_CONTROL_USER then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "领悟了武功：" + GetObjectName(id) + "第" + I2S(level + 1) + "重")
		endif
				
		if id == 'A0DP' then // 归元吐纳功
set fuyuan[i]=fuyuan[i] + 2
			set gengu[i]=gengu[i] + 2
			set wuxing[i]=wuxing[i] + 2
			set jingmai[i]=jingmai[i] + 2
			set danpo[i]=danpo[i] + 2
			set yishu[i]=yishu[i] + 2
		endif
		if level + 1 == 9 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			set wuxuedian[i]=wuxuedian[i] + 2
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff00精武师有技能升级到九重，获得两个自创武学点")
			if ( udg_jwjs[i] <= 2 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
				set udg_jwjs[i]=udg_jwjs[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您练成第" + I2S(udg_jwjs[i]) + "个九重武功，练成3个可获得宗师哦")
			endif
			if ( udg_jwjs[i] == 3 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
				call Deputy_setMaster(i , JING_WU)
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得精武宗师")
				call SetPlayerName(p, "〓精武宗师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			endif
		endif
		// 嫁衣神功 增加悟性和伤害倍数
		if level + 1 == 9 and GetUnitAbilityLevel(u, JIA_YI_SHEN_GONG) > 0 then
			set add=( GetUnitAbilityLevel(u, JIA_YI_SHEN_GONG) + 3 ) / 4
			if isTitle(i , 49) then
				// 绍敏郡主称号 增加值翻倍
				set add=add * 2
			endif
			if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
				// 郡主称号 增加值翻倍
				set add=add * 2
			endif
			set wuxing[i]=wuxing[i] + add
			set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + add * 0.005
			call DisplayTextToPlayer(p, 0, 0, "|cffffcc00发动了嫁衣神功，悟性增加了" + I2S(add) + "点，伤害加成增加了" + R2S(add * 0.005) + "倍")
		endif
	endif
	set p=null
endfunction
// 成为掌门
function becomeChief takes unit u,integer denomination,string title,integer strAward,integer agiAward,integer intAward returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer special0= 6
 local integer special1= 6
 local string awardStr= ""
	if denomination == 14 then // 明教
set special1=4
	elseif denomination == 20 then // 唐门
set special0=1
	endif
	if strAward > 0 then
		set awardStr=awardStr + "|cffffcc00，招式伤害增加了" + I2S(strAward) + "点"
	endif
	if agiAward > 0 then
		set awardStr=awardStr + "|cffffcc00，内力增加了" + I2S(agiAward) + "点"
	endif
	if intAward > 0 then
		set awardStr=awardStr + "|cffffcc00，真实伤害增加了" + I2S(intAward) + "点"
	endif
	if denomination == 25 then // 汝阳王府
if not (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 25) - 1)])) != 0) and ( GetUnitAbilityLevel(u, denomFourth[25]) >= 6 or GetUnitAbilityLevel(u, denomFifth[25]) >= 6 ) then // INLINED!!
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：" + title + awardStr)
			if strAward > 0 then
				call ModifyHeroStat(0, u, 0, strAward)
			endif
			if agiAward > 0 then
				call ModifyHeroStat(1, u, 0, agiAward)
			endif
			if intAward > 0 then
				call ModifyHeroStat(2, u, 0, intAward)
			endif
			call SetPlayerName(p, "〓" + title + "〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setChiefNumber(i , denomination)
		endif
		return
	endif
	if not (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( denomination) - 1)])) != 0) and GetUnitAbilityLevel(u, denomFirst[denomination]) >= 6 and GetUnitAbilityLevel(u, denomThird[denomination]) >= 6 and GetUnitAbilityLevel(u, denomSecond[denomination]) >= 6 and ( GetUnitAbilityLevel(u, denomFourth[denomination]) >= special0 or GetUnitAbilityLevel(u, denomFifth[denomination]) >= special1 ) then // INLINED!!
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：" + title + awardStr)
		if strAward > 0 then
			call ModifyHeroStat(0, u, 0, strAward)
		endif
		if agiAward > 0 then
			call ModifyHeroStat(1, u, 0, agiAward)
		endif
		if intAward > 0 then
			call ModifyHeroStat(2, u, 0, intAward)
		endif
		call SetPlayerName(p, "〓" + title + "〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call setChiefNumber(i , denomination)
	endif
	set p=null
endfunction
function determineShaoLinTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 1) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A05O') >= 1 and yishu[i] >= 32 and not isTitle(i , 1) then
			call ModifyHeroStat(1, u, 0, 720)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：扫地神僧，内力增加了720点")
			call SetPlayerName(p, "〓扫地神僧〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 1)
		endif
		// 拥有易筋A09D或洗髓A080，称号达摩，毕业技能到9级
		if GetUnitAbilityLevel(u, 'A09D') >= 1 or GetUnitAbilityLevel(u, 'A080') >= 1 and not isTitle(i , 2) then
			call SetPlayerName(p, "〓达摩祖师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 220)
			call ModifyHeroStat(2, u, 0, 200)
			if ( GetUnitAbilityLevel(u, 'A05O') >= 6 ) then
				call SetUnitAbilityLevel(u, 'A05O', 9)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：达摩祖师，招式伤害增加了200点，内力增加了220点，真实伤害增加了200点，武功" + GetObjectName('A05O') + "提升到9重")
			elseif ( GetUnitAbilityLevel(u, 'S000') >= 6 ) then
				call SetUnitAbilityLevel(u, 'S000', 9)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：达摩祖师，招式伤害增加了200点，内力增加了220点，真实伤害增加了200点，武功" + GetObjectName('S000') + "提升到9重")
			endif
			call setTitleNumber(i , 2)
		endif
		// 小无相、无相劫指、悟性31以上
		if GetUnitAbilityLevel(u, 'A083') >= 1 and GetUnitAbilityLevel(u, 'A03P') >= 1 and wuxing[i] >= 31 and not isTitle(i , 3) then
			call SetPlayerName(p, "〓大轮明王〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 200)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：大轮明王，招式伤害增加了200点，内力增加了200点，真实伤害增加了200点")
			call setTitleNumber(i , 3)
		endif
		// 龙象，根骨31
		if GetUnitAbilityLevel(u, 'S002') >= 1 and gengu[i] >= 31 and not isTitle(i , 4) then
			call SetPlayerName(p, "〓金轮法王〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 200)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：金轮法王，招式伤害增加了200点，内力增加了200点，真实伤害增加了200点")
			call setTitleNumber(i , 4)
		endif
	endif
	set p=null
endfunction
function determineGuMuTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 2) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A07G') >= 1 and UnitHaveItem(u , 'I099') and not isTitle(i , 5) then
			call ModifyHeroStat(0, u, 0, 480)
			call SetUnitAbilityLevel(u, 'A07G', IMinBJ(GetUnitAbilityLevel(u, 'A07G') + 3, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：神雕侠，招式伤害增加了480点，武功" + GetObjectName('A07G') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07G') + 3, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07G' * 5, GetUnitAbilityLevel(u, 'A07G'))
			call SetPlayerName(p, "〓神雕侠〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 5)
		endif
		if GetUnitAbilityLevel(u, 'A07U') >= 1 and UnitHaveItem(u , 'I09A') and not isTitle(i , 6) then
			call ModifyHeroStat(2, u, 0, 600)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：小龙女，真实伤害增加了600点")
			call SetPlayerName(p, "〓小龙女〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 6)
		endif
		if GetUnitAbilityLevel(u, 'A07G') >= 1 and GetUnitAbilityLevel(u, 'A07U') >= 1 and UnitHaveItem(u , 'I09C') and not isTitle(i , 7) then
			call ModifyHeroStat(0, u, 0, 480)
			call ModifyHeroStat(2, u, 0, 600)
			call SetUnitAbilityLevel(u, 'A07G', IMinBJ(GetUnitAbilityLevel(u, 'A07G') + 6, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：神雕侠侣，招式伤害增加了480点，真实伤害增加了600点，武功" + GetObjectName('A07G') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07G') + 6, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07G' * 5, GetUnitAbilityLevel(u, 'A07G'))
			call SetPlayerName(p, "〓神雕侠侣〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			// 送神雕
			call unitadditembyidswapped('I04A' , u)
			call setTitleNumber(i , 7)
		endif
		if GetUnitAbilityLevel(u, 'A07A') >= 6 and not isTitle(i , 8) then
			call SetPlayerName(p, "〓赤炼仙子〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(1, u, 0, 400)
			call SetUnitAbilityLevel(u, 'A07A', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：赤炼仙子，内力增加了400点，武功" + GetObjectName('A07A') + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07A' * 5, GetUnitAbilityLevel(u, 'A07A'))
			call setTitleNumber(i , 8)
		endif
	endif
	set p=null
endfunction
function determineGaiBangTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 3) - 1)])) != 0) then // INLINED!!
		// 学降龙、打狗，带打狗棒
		if GetUnitAbilityLevel(u, 'A07L') >= 1 and GetUnitAbilityLevel(u, 'A07E') >= 1 and UnitHaveItem(u , 'I097') and not isTitle(i , 9) then
			call ModifyHeroStat(0, u, 0, 480)
			call SetUnitAbilityLevel(u, 'A07L', IMinBJ(GetUnitAbilityLevel(u, 'A07L') + 4, 9))
			call SetUnitAbilityLevel(u, 'A07E', IMinBJ(GetUnitAbilityLevel(u, 'A07E') + 4, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：北丐，招式伤害增加了480点，武功" + GetObjectName('A07L') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07L') + 4, 9)) + "重，" + GetObjectName('A07E') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07E') + 4, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07L' * 5, GetUnitAbilityLevel(u, 'A07L'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07E' * 5, GetUnitAbilityLevel(u, 'A07E'))
			call SetPlayerName(p, "〓北丐〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 9)
		endif
		// 降龙3级以上，拥有擒龙控鹤，带打狗棒
		if GetUnitAbilityLevel(u, 'A07E') >= 3 and GetUnitAbilityLevel(u, 'A03V') > 0 and UnitHaveItem(u , 'I097') and not isTitle(i , 10) then
			call ModifyHeroStat(0, u, 0, 500)
			call ModifyHeroStat(1, u, 0, 500)
			call ModifyHeroStat(2, u, 0, 500)
			// 降龙奖励到9级
			call SetUnitAbilityLevel(u, 'A07E', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：北乔峰，招式伤害增加了500点，真实伤害增加了500点，武功" + GetObjectName('A07E') + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07L' * 5, GetUnitAbilityLevel(u, 'A07L'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07E' * 5, GetUnitAbilityLevel(u, 'A07E'))
			call SetPlayerName(p, "〓北乔峰〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 10)
		endif
	endif
	set p=null
endfunction
function determineHuaShanTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 4) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A07T') >= 1 and GetUnitAbilityLevel(u, 'A07J') >= 1 and not isTitle(i , 11) then
			call ModifyHeroStat(0, u, 0, 600)
			call SetUnitAbilityLevel(u, 'A07J', 9) // 辟邪剑法9级
call unitadditembyidswapped('I069' , u) // 送辟邪残章
call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：君子剑，招式伤害增加了600点，武功" + GetObjectName('A07J') + "提升到9重，获得辟邪剑法残章")
			call SetPlayerName(p, "〓君子剑〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 11)
		endif
		// 风清扬，学会5级独孤九剑
		if GetUnitAbilityLevel(u, 'A07F') >= 5 and not isTitle(i , 12) then
			call ModifyHeroStat(0, u, 0, 250)
			call ModifyHeroStat(1, u, 0, 250)
			call ModifyHeroStat(2, u, 0, 200)
			call SetUnitAbilityLevel(u, 'A07F', 9) // 独孤九剑9级
call unitadditembyidswapped('I066' , u) // 送独孤残章
// 送仙鹤
call unitadditembyidswapped('I04B' , u)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：风清扬，招式伤害增加了250点，内力增加了250点，真实伤害增加了250点，武功" + GetObjectName('A07F') + "提升到9重，获得独孤九剑残章，获得伴侣仙鹤")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07F' * 5, GetUnitAbilityLevel(u, 'A07F'))
			call SetPlayerName(p, "〓风清扬〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 12)
		endif
	endif
	set p=null
endfunction
function determineQuanZhenTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 5) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A017') >= 1 and GetUnitAbilityLevel(u, 'A07U') >= 1 and GetUnitAbilityLevel(u, 'A0D1') >= 1 and not isTitle(i , 13) then
			call ModifyHeroStat(1, u, 0, 360)
			call SetUnitAbilityLevel(u, 'A017', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：老顽童，内力增加了360点，武功" + GetObjectName('A017') + "提升到9重，学习双手互搏后攻击时几率刷新所有武功CD")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A017' * 5, GetUnitAbilityLevel(u, 'A017'))
			call SetPlayerName(p, "〓老顽童〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 13)
		endif
		if GetUnitAbilityLevel(u, 'A06P') >= 1 and GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A0CH') >= 1 and not isTitle(i , 14) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 300)
			call ModifyHeroStat(2, u, 0, 300)
			call SetUnitAbilityLevel(u, 'A0CH', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：中神通，招式伤害增加了300点，内力增加了300点，真实伤害增加了300点，武功" + GetObjectName('A0CH') + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0CH' * 5, GetUnitAbilityLevel(u, 'A0CH'))
			call SetPlayerName(p, "〓中神通〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 14)
		endif
	endif
	set p=null
endfunction
function determineXueDaoTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 6) - 1)])) != 0) then // INLINED!!
		if UnitHaveItem(u , 'I098') and not isTitle(i , 15) then
			call ModifyHeroStat(0, u, 0, 480)
			// 一刀绝空加2级
			call SetUnitAbilityLevel(u, 'A0DH', IMinBJ(GetUnitAbilityLevel(u, 'A0DH') + 2, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：血刀老祖，招式伤害增加了480点，武功" + GetObjectName('A0DH') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A0DH') + 2, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0DH' * 5, GetUnitAbilityLevel(u, 'A0DH'))
			call SetPlayerName(p, "〓血刀老祖〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 15)
		endif
		if GetUnitAbilityLevel(u, 'A07X') >= 1 and GetUnitAbilityLevel(u, 'A06J') >= 1 and GetUnitAbilityLevel(u, 'A071') >= 1 and not isTitle(i , 16) then
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 360)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：空心菜，招式伤害增加了200点，真实伤害增加了360点，内力增加了200点，暴击伤害增加500%")
			call SetPlayerName(p, "〓空心菜〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			// 爆伤+500%
			set udg_baojishanghai[i]=udg_baojishanghai[i] + 5.0
			call setTitleNumber(i , 16)
		endif
	endif
	set p=null
endfunction
function determineHengShanTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 7) - 1)])) != 0) then // INLINED!!
		// 前3个技能大于等于7级，获得仪琳称号
		if GetUnitAbilityLevel(u, 'A01Z') >= 7 and GetUnitAbilityLevel(u, 'A021') >= 7 and GetUnitAbilityLevel(u, 'A0CD') >= 7 and not isTitle(i , 17) then
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 200)
			// 拂尘到9级
			call SetUnitAbilityLevel(u, 'A01Z', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：仪琳，内力增加了200点，真实伤害增加了200点，武功" + GetObjectName('A01Z') + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A01Z' * 5, GetUnitAbilityLevel(u, 'A01Z'))
			call SetPlayerName(p, "〓仪琳〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 17)
		endif
		if GetUnitAbilityLevel(u, 'A07F') >= 1 and GetUnitAbilityLevel(u, 'A09D') >= 1 and GetUnitAbilityLevel(u, 'A07R') >= 1 and GetUnitAbilityLevel(u, 'A08W') >= 1 and not isTitle(i , 18) then
			call SetPlayerName(p, "〓笑傲江湖〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(0, u, 0, 480)
			call ModifyHeroStat(1, u, 0, 500)
			call ModifyHeroStat(2, u, 0, 600)
			call SetUnitAbilityLevel(u, 'A07F', 9)
			call SetUnitAbilityLevel(u, 'A08W', IMinBJ(GetUnitAbilityLevel(u, 'A08W') + 5, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：笑傲江湖，招式伤害增加了480点，真实伤害增加了500点，内力增加了600点，武功" + GetObjectName('A07F') + "提升到9重，" + GetObjectName('A08W') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A08W') + 5, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07F' * 5, GetUnitAbilityLevel(u, 'A07F'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A08W' * 5, GetUnitAbilityLevel(u, 'A08W'))
			call setTitleNumber(i , 18)
		endif
	endif
	set p=null
endfunction
function determineEMeiTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 8) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A07N') >= 1 and UnitHaveItem(u , 'I00B') and not isTitle(i , 19) then
			call ModifyHeroStat(0, u, 0, 480)
			// 九阴白骨爪加2级
			call SetUnitAbilityLevel(u, 'A07N', IMinBJ(GetUnitAbilityLevel(u, 'A07N') + 2, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：芷若，招式伤害增加了480点，武功" + GetObjectName('A07N') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07N') + 2, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07N' * 5, GetUnitAbilityLevel(u, 'A07N'))
			call SetPlayerName(p, "〓芷若〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 19)
		endif
		if GetUnitAbilityLevel(u, 'A0C6') >= 1 and UnitHaveItem(u , 'I09D') and not isTitle(i , 20) then
			call ModifyHeroStat(1, u, 0, 360)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：小东邪，内力增加了360点")
			call SetPlayerName(p, "〓小东邪〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 20)
		endif
	endif
	set p=null
endfunction
function determineWuDangTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 9) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A0DN') >= 1 and GetUnitAbilityLevel(u, 'A09D') >= 1 and not isTitle(i , 21) then
			call ModifyHeroStat(1, u, 0, 420)
			// 蓝量加500
			call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 0 , 500)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：邋遢仙人，内力增加了420点，魔法上限增加了500点")
			call SetPlayerName(p, "〓邋遢仙人〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 21)
		endif
		// 太极拳9级，带真武剑
		if GetUnitAbilityLevel(u, 'A08R') >= 9 and UnitHaveItem(u , 'I0DK') and not isTitle(i , 22) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 300)
			call ModifyHeroStat(2, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：张三丰，招式伤害增加了300点，真实伤害增加了300点，内力增加了300点")
			call SetPlayerName(p, "〓张三丰〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 22)
		endif
	endif
	set p=null
endfunction
function determineXingXiuTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 10) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A07P') >= 1 and GetUnitAbilityLevel(u, 'A083') >= 1 and not isTitle(i , 23) then
			call ModifyHeroStat(1, u, 0, 600)
			call ModifyHeroStat(2, u, 0, 300)
			if ( GetUnitAbilityLevel(u, 'A0BT') >= 6 ) then
				call SetUnitAbilityLevel(u, 'A0BT', 9)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：星宿老仙，内力增加了600点，真实伤害增加了300点，武功" + GetObjectName('A0BT') + "提升到9重")
			elseif ( GetUnitAbilityLevel(u, 'A0BV') >= 6 ) then
				call SetUnitAbilityLevel(u, 'A0BV', 9)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：星宿老仙，内力增加了600点，真实伤害增加了300点，武功" + GetObjectName('A0BV') + "提升到9重")
			endif
			call SetPlayerName(p, "〓星宿老仙〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 23)
		endif
	endif
	set p=null
endfunction
function determineLingJiuTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 12) - 1)])) != 0) then // INLINED!!
		// 大招学八荒，同时学会生死符（冰魄加北冥）
		if GetUnitAbilityLevel(u, 'A02G') >= 6 and GetUnitAbilityLevel(u, 'A07A') >= 1 and GetUnitAbilityLevel(u, 'A082') >= 1 and not isTitle(i , 24) then
			call ModifyHeroStat(0, u, 0, 280)
			call ModifyHeroStat(1, u, 0, 280)
			call ModifyHeroStat(2, u, 0, 320)
			// 八荒奖励2级
			call SetUnitAbilityLevel(u, 'A02G', IMinBJ(GetUnitAbilityLevel(u, 'A02G') + 2, 9))
			// 如意加2级
			call SetUnitAbilityLevel(u, 'A02F', IMinBJ(GetUnitAbilityLevel(u, 'A02F') + 2, 9))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：天山童姥，招式伤害增加了280点，内力增加了280点，真实伤害增加了320点，武功" + GetObjectName('A02G') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A02G') + 2, 9)) + "重，" + GetObjectName('A02F') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A02F') + 2, 9)) + "重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A02G' * 5, GetUnitAbilityLevel(u, 'A02G'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A02F' * 5, GetUnitAbilityLevel(u, 'A02F'))
			call SetPlayerName(p, "〓天山童姥〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 24)
		endif
		// 虚竹：北冥，冰魄，玉扳指，罗汉
		if GetUnitAbilityLevel(u, 'A07A') >= 1 and GetUnitAbilityLevel(u, 'A082') >= 1 and GetUnitAbilityLevel(u, 'A07O') >= 1 and UnitHaveItem(u , 'I0DT') and not isTitle(i , 25) then
			call ModifyHeroStat(0, u, 0, 100)
			call ModifyHeroStat(1, u, 0, 500)
			call ModifyHeroStat(2, u, 0, 100)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：虚竹子，招式伤害增加了100点，内力增加了500点，真实伤害增加了100点")
			call SetPlayerName(p, "〓虚竹子〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 25)
		endif
	endif
	set p=null
endfunction
function determineMuRongTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 13) - 1)])) != 0) then // INLINED!!
		// 慕容龙城，搭配斗转
		if GetUnitAbilityLevel(u, 'A07Q') >= 1 and not isTitle(i , 26) then // +斗转星移
call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 250)
			call ModifyHeroStat(2, u, 0, 200)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：慕容龙城，招式伤害增加了200点，内力增加了250点，真实伤害增加了200点")
			call SetPlayerName(p, "〓慕容龙城〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 26)
		endif
	endif
	set p=null
endfunction
function determineMingJiaoTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 14) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A030') >= 9 and not isTitle(i , 27) then
			call SetPlayerName(p, "〓白眉鹰王〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(2, u, 0, 500)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：白眉鹰王，真实伤害增加了500点")
			call setTitleNumber(i , 27)
		endif
		if GetUnitAbilityLevel(u, 'A032') >= 9 and not isTitle(i , 28) then
			call SetPlayerName(p, "〓青翼蝠王〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(1, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：青翼蝠王，内力增加了300点")
			call setTitleNumber(i , 28)
		endif
		if GetUnitAbilityLevel(u, 'A06R') >= 9 and GetUnitAbilityLevel(u, 'A07M') >= 3 and UnitHaveItem(u , 'I00D') and not isTitle(i , 29) then
			call SetPlayerName(p, "〓金毛狮王〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call SetUnitAbilityLevel(u, 'A07M', IMinBJ(GetUnitAbilityLevel(u, 'A07M') + 6, 9))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07M' * 5, GetUnitAbilityLevel(u, 'A07M'))
			call ModifyHeroStat(0, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：金毛狮王，招式伤害增加了300点，武功" + GetObjectName('A07M') + "提升到" + I2S(GetUnitAbilityLevel(u, 'A07M')) + "重")
			call setTitleNumber(i , 29)
		endif
		if GetUnitAbilityLevel(u, 'A07W') >= 6 and GetUnitAbilityLevel(u, 'A0DN') >= 1 and GetUnitAbilityLevel(u, 'A08R') >= 4 and not isTitle(i , 30) then
			call SetPlayerName(p, "〓无忌〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call SetUnitAbilityLevel(u, 'A08R', IMinBJ(GetUnitAbilityLevel(u, 'A08R') + 3, 9))
			call SetUnitAbilityLevel(u, 'A07W', 7)
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07W' * 5, GetUnitAbilityLevel(u, 'A07W'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A08R' * 5, GetUnitAbilityLevel(u, 'A08R'))
			call ModifyHeroStat(1, u, 0, 1000)
			call ModifyHeroStat(2, u, 0, 500)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：无忌，内力增加了1000点，真实伤害增加了500点，武功" + GetObjectName('A08R') + "提升到9重，" + GetObjectName('A07W') + "提升到7重，获得伴侣白猿")
			// 送白猿
			call unitadditembyidswapped('I0CS' , u)
			call setTitleNumber(i , 30)
		endif
	endif
	set p=null
endfunction
function determineHengShan2Title takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer idd= 0
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 15) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A04M') >= 7 and GetUnitAbilityLevel(u, 'A04N') >= 7 and GetUnitAbilityLevel(u, 'A04P') >= 7 and not isTitle(i , 31) then
			call SetPlayerName(p, "〓莫大先生〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 31)
			set L7[i]=1
			loop
				exitwhen L7[i] > wugongshu[i]
				if ( I7[20 * ( i - 1 ) + L7[i]] != 'AEfk' ) then
					if ( ( L7[i] == wugongshu[i] ) ) then
						call SetUnitAbilityLevel(u, 'A04M', 9)
						call SetUnitAbilityLevel(u, 'A04N', 9)
						call SetUnitAbilityLevel(u, 'A04P', 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A04M' * 5, 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A04N' * 5, 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A04P' * 5, 9)
						call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：莫大先生，武功" + GetObjectName('A04M') + "提升到9重，" + GetObjectName('A04N') + "提升到9重，" + GetObjectName('A04P') + "提升到9重")
					endif
				else
					if GetUnitAbilityLevel(u, 'A026') >= 6 then
						set idd='A04R'
					else
						set idd='A026'
					endif
					call UnitAddAbility(u, idd)
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：莫大先生，学会武功" + GetObjectName(idd))
					call UnitMakeAbilityPermanent(u, true, idd)
					set I7[20 * ( i - 1 ) + L7[i]]=idd
					exitwhen true
				endif
				set L7[i]=L7[i] + 1
			endloop
		endif
	endif
	set p=null
endfunction
function determineShenLongTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 16) - 1)])) != 0) then // INLINED!!
		// 学九阳+龙象，神龙教主
		if GetUnitAbilityLevel(u, 'A0DN') >= 1 and GetUnitAbilityLevel(u, 'S002') >= 1 and not isTitle(i , 32) then
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(1, u, 0, 400)
			call ModifyHeroStat(2, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：神龙教主，招式伤害增加了200点，内力增加了400点，真实伤害增加了300点")
			call SetPlayerName(p, "〓神龙教主〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 32)
		endif
	endif
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 17) - 1)])) != 0) then // INLINED!!
		// 学九阴+小无相，教主夫人
		if GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A083') >= 1 and not isTitle(i , 33) then
			call ModifyHeroStat(0, u, 0, 400)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：教主夫人，招式伤害增加了400点，内力增加了200点，真实伤害增加了300点")
			call SetPlayerName(p, "〓教主夫人〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 33)
		endif
	endif
	set p=null
endfunction
function determineTaiShanTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 18) - 1)])) != 0) then // INLINED!!
		// 天门道长，学会小无相
		if GetUnitAbilityLevel(u, 'A083') >= 1 and not isTitle(i , 34) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 600)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：天门道长，招式伤害增加了300点，内力增加了600点")
			call SetPlayerName(p, "〓天门道长〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 34)
		endif
	endif
	set p=null
endfunction
function determineTieZhangTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 19) - 1)])) != 0) then // INLINED!!
		// 学乾坤+双手+铁掌令，铁掌水上漂
		if GetUnitAbilityLevel(u, 'A07W') >= 1 and GetUnitAbilityLevel(u, 'A07U') >= 1 and UnitHaveItem(u , 'I0EJ') and not isTitle(i , 35) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 100)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：铁掌水上漂，招式伤害增加了300点，内力增加了200点，真实伤害增加了100点")
			call SetPlayerName(p, "〓铁掌水上漂〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 35)
		endif
	endif
	set p=null
endfunction
function determineTangMenTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 20) - 1)])) != 0) then // INLINED!!
		// 学小无相+冰魄银针，搜魂侠
		if GetUnitAbilityLevel(u, 'A083') >= 1 and GetUnitAbilityLevel(u, 'A07A') >= 1 and not isTitle(i , 36) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：搜魂侠，招式伤害增加了300点，内力增加了200点，真实伤害增加了300点")
			call SetPlayerName(p, "〓搜魂侠〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 36)
		endif
	endif
	set p=null
endfunction
function determineWuDuTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 21) - 1)])) != 0) then // INLINED!!
		// 学龙象+葵花，婆婆姊姊
		if GetUnitAbilityLevel(u, LONG_XIANG) >= 1 and GetUnitAbilityLevel(u, KUI_HUA) >= 1 and not isTitle(i , 45) then
			call ModifyHeroStat(0, u, 0, 300)
			call ModifyHeroStat(1, u, 0, 300)
			call ModifyHeroStat(2, u, 0, 300)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：婆婆姊姊，招式伤害增加了300点，内力增加了300点，真实伤害增加了300点")
			call SetPlayerName(p, "〓婆婆姊姊〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 45)
		endif
	endif
	set p=null
endfunction
function determineTaoHuaDaoTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer idd
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 22) - 1)])) != 0) then // INLINED!!
		// 学九阴内功+打狗棒法，女中诸葛
		if GetUnitAbilityLevel(u, JIU_YIN) >= 1 and GetUnitAbilityLevel(u, DA_GOU) >= 1 and not isTitle(i , 46) then
			
			set wuxing[i]=wuxing[i] + 50
			set L7[i]=1
			loop
				exitwhen L7[i] > wugongshu[i]
				if ( I7[20 * ( i - 1 ) + L7[i]] != 'AEfk' ) then
					if ( ( L7[i] == wugongshu[i] ) ) then
						call SetUnitAbilityLevel(u, 'A0EE', 9)
						call SetUnitAbilityLevel(u, 'A0EG', 9)
						call SetUnitAbilityLevel(u, 'A0EI', 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0EE' * 5, 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0EG' * 5, 9)
						call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0EI' * 5, 9)
						call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：女中诸葛，武功" + GetObjectName('A0EE') + "提升到9重，" + GetObjectName('A0EG') + "提升到9重，" + GetObjectName('A0EI') + "提升到9重")
					endif
				else
					if GetUnitAbilityLevel(u, 'A0EK') >= 6 then
						set idd='A0EL'
					else
						set idd='A0EK'
					endif
					call UnitAddAbility(u, idd)
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：女中诸葛，学会武功" + GetObjectName(idd))
					if Player(i - 1) == GetLocalPlayer() and idd == 'A0EL' then
						call s__Frame_show(qimen_widget)
					endif
					call UnitMakeAbilityPermanent(u, true, idd)
					set I7[20 * ( i - 1 ) + L7[i]]=idd
					exitwhen true
				endif
				set L7[i]=L7[i] + 1
			endloop
			call SetPlayerName(p, "〓女中诸葛〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 46)
		endif
		if GetUnitAbilityLevel(u, 'A06H') >= 3 and GetUnitAbilityLevel(u, 'A018') >= 3 and UnitHaveItem(u , 'I09D') and not isTitle(i , 39) then
			call SetPlayerName(p, "〓东邪〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call ModifyHeroStat(1, u, 0, 240)
			call ModifyHeroStat(2, u, 0, 300)
			call SetUnitAbilityLevel(u, 'A06H', 9)
			call SetUnitAbilityLevel(u, 'A018', 9)
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A06H' * 5, GetUnitAbilityLevel(u, 'A06H'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A018' * 5, GetUnitAbilityLevel(u, 'A018'))
			call unitadditembyidswapped('I04Q' , u)
			call unitadditembyidswapped('I04Q' , u)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：东邪，内力增加了240点，真实伤害增加了300点，武功" + GetObjectName('A06H') + "提升到9重，" + GetObjectName('A018') + "提升到9重，获得物品" + GetObjectName('I04Q') + "x2")
			call setTitleNumber(i , 39)
		endif
	endif
	set p=null
endfunction
function determineYeLuoTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 23) - 1)])) != 0) then // INLINED!!
		// 学神行百变+60W金钱，爵爷
		if GetUnitAbilityLevel(u, SHEN_XING_BAI_BIAN) >= 1 and GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) >= 600000 and not isTitle(i , 47) then
			call ModifyHeroStat(0, u, 0, 400)
			call ModifyHeroStat(1, u, 0, 400)
			call ModifyHeroStat(2, u, 0, 200)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：爵爷，招式伤害增加了400点，内力增加了400点，真实伤害增加了200点")
			call SetPlayerName(p, "〓爵爷〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 47)
		endif
	endif
	set p=null
endfunction
function determineXueShanTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 24) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, 'A07O') > 0 and GetUnitAbilityLevel(u, 'A0D8') > 0 and not isTitle(i , 48) then
			call ModifyHeroStat(0, u, 0, 400)
			call ModifyHeroStat(2, u, 0, 200)
			call SetUnitAbilityLevel(u, 'A0EZ', 9)
			call SetUnitAbilityLevel(u, 'A0EX', 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：石破天惊，招式伤害增加了400点，真实伤害增加了200点，武功" + GetObjectName('A0EZ') + "提升到9重，" + GetObjectName('A0EX') + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0EZ' * 5, GetUnitAbilityLevel(u, 'A0EZ'))
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0EX' * 5, GetUnitAbilityLevel(u, 'A0EX'))
			call SetPlayerName(p, "〓石破天惊〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 48)
		endif
	endif
	set p=null
endfunction
function determineRuYangTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 25) - 1)])) != 0) then // INLINED!!
		if touKanCounter[i] > 10 and not isTitle(i , 49) then
			call ModifyHeroStat(0, u, 0, 200)
			call ModifyHeroStat(2, u, 0, 400)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：绍敏郡主，招式伤害增加了200点，真实伤害增加了400点")
			call SetPlayerName(p, "〓绍敏郡主〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 49)
		endif
	endif
	set p=null
endfunction
function determineSongShanTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 26) - 1)])) != 0) then // INLINED!!
		if GetUnitAbilityLevel(u, HAN_BING_ZHEN_QI) > 0 and UnitHaveItem(u , ITEM_HAN_PO_JIAN) and not isTitle(i , 50) then
			call ModifyHeroStat(0, u, 0, 400)
			call ModifyHeroStat(2, u, 0, 200)
			call SetUnitAbilityLevel(u, HAN_BING_SHEN_ZHANG, 9)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：左盟主，招式伤害增加了400点，真实伤害增加了200点，武功" + GetObjectName(HAN_BING_SHEN_ZHANG) + "提升到9重")
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), HAN_BING_SHEN_ZHANG * 5, GetUnitAbilityLevel(u, HAN_BING_SHEN_ZHANG))
			call SetPlayerName(p, "〓左盟主〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call setTitleNumber(i , 50)
		endif
	endif
endfunction
function determineJiangHuTitle takes unit u returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A0D2') >= 1 and GetUnitAbilityLevel(u, 'A0D6') >= 1 and GetUnitAbilityLevel(u, 'A0D4') >= 1 and GetUnitAbilityLevel(u, 'A07N') >= 4 and GetUnitAbilityLevel(u, 'A0D3') >= 4 and GetUnitAbilityLevel(u, 'A0D1') >= 4 and not isTitle(i , 37) then
		call SetPlayerName(p, "〓真·九阴真人〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(1, u, 0, 2900)
		call SetUnitAbilityLevel(u, 'A07N', 9)
		call SetUnitAbilityLevel(u, 'A0D3', 9)
		call SetUnitAbilityLevel(u, 'A0D1', 9)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：真·九阴真人，内力增加了2900点，武功" + GetObjectName('A07N') + "提升到9重，" + GetObjectName('A0D3') + "提升到9重，" + GetObjectName('A0D1') + "提升到9重")
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07N' * 5, GetUnitAbilityLevel(u, 'A07N'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0D3' * 5, GetUnitAbilityLevel(u, 'A0D3'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0D1' * 5, GetUnitAbilityLevel(u, 'A0D1'))
		call setTitleNumber(i , 37)
	endif
	if GetUnitAbilityLevel(u, 'A089') >= 5 and GetUnitAbilityLevel(u, 'A084') >= 1 and UnitHaveItem(u , 'I09B') and not isTitle(i , 38) then
		call SetPlayerName(p, "〓西毒〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(0, u, 0, 600)
		call ModifyHeroStat(2, u, 0, 360)
		call unitadditembyidswapped('I070' , u)
		call SetUnitAbilityLevel(u, 'A089', IMinBJ(GetUnitAbilityLevel(u, 'A089') + 2, 9))
		// 奖励逆九阴
		call unitadditembyidswapped('I09G' , u)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：西毒，招式伤害增加了600点，真实伤害增加了360点，武功" + GetObjectName('A089') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A089') + 2, 9)) + "重，获得物品：" + GetObjectName('I070') + ",获得物品：" + GetObjectName('I09G'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A089' * 5, GetUnitAbilityLevel(u, 'A089'))
		call setTitleNumber(i , 38)
	endif
	
	if GetUnitAbilityLevel(u, 'A06P') >= 5 and GetUnitAbilityLevel(u, 'A0CH') >= 3 and udg_runamen[i] != 5 and not isTitle(i , 40) then
		call SetPlayerName(p, "〓南帝〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(1, u, 0, 480)
		call ModifyHeroStat(2, u, 0, 600)
		call SetUnitAbilityLevel(u, 'A06P', 9)
		call SetUnitAbilityLevel(u, 'A0CH', 7)
		// 奖励医疗篇
		call unitadditembyidswapped('I09H' , u)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：南帝，内力增加了480点，真实伤害增加了600点，武功" + GetObjectName('A06P') + "提升到9重，" + GetObjectName('A0CH') + "提升到7重，获得物品：" + GetObjectName('I09H'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A06P' * 5, GetUnitAbilityLevel(u, 'A06P'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0CH' * 5, GetUnitAbilityLevel(u, 'A0CH'))
		call setTitleNumber(i , 40)
	endif
	if GetUnitAbilityLevel(u, 'A07N') >= 5 and GetUnitAbilityLevel(u, 'A0D1') >= 5 and GetUnitAbilityLevel(u, 'A0D3') >= 5 and GetUnitAbilityLevel(u, 'A07G') >= 3 and ( GetUnitTypeId(u) == 'O023' or GetUnitTypeId(u) == 'O02H' or GetUnitTypeId(u) == 'O02I' or GetUnitTypeId(u) == 'O003' or GetUnitTypeId(u) == 'O002' ) and not isTitle(i , 41) then
		call SetPlayerName(p, "〓瑶琴〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(0, u, 0, 700)
		call ModifyHeroStat(1, u, 0, 200)
		call SetUnitAbilityLevel(u, 'A0D1', 9)
		call SetUnitAbilityLevel(u, 'A0D3', 7)
		// 九阴白骨爪加3级
		call SetUnitAbilityLevel(u, 'A07N', IMinBJ(GetUnitAbilityLevel(u, 'A07N') + 3, 9))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：瑶琴，内力增加了200点，招式伤害增加了700点，武功" + GetObjectName('A0D1') + "提升到9重，" + GetObjectName('A0D3') + "提升到7重，武功" + GetObjectName('A07N') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07N') + 3, 9)) + "重")
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0D1' * 5, GetUnitAbilityLevel(u, 'A0D1'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A0D3' * 5, GetUnitAbilityLevel(u, 'A0D3'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07N' * 5, GetUnitAbilityLevel(u, 'A07N'))
		call setTitleNumber(i , 41)
	endif
	//自创武功命名为虾米神拳
	if s__ZiZhiWuGong_name[zizhiwugong[i]] == "虾米神拳" and GetUnitAbilityLevel(u, 'A036') >= 1 and GetUnitAbilityLevel(u, 'A07I') >= 5 and udg_runamen[i] == 11 and not isTitle(i , 42) then
		call SetPlayerName(p, "〓小虾米〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(0, u, 0, 1000)
		call ModifyHeroStat(1, u, 0, 1000)
		call ModifyHeroStat(2, u, 0, 1000)
		call SetUnitAbilityLevel(u, 'A07I', 9)
		// 奖励野球拳残章
		call unitadditembyidswapped('I068' , u)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：小虾米，招式伤害增加了1000点，内力增加了1000点，真实伤害增加了1000点，武功" + GetObjectName('A07I') + "提升到9重，获得物品：" + GetObjectName('I068'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07I' * 5, GetUnitAbilityLevel(u, 'A07I'))
		call setTitleNumber(i , 42)
	endif
	if GetUnitAbilityLevel(u, 'A07E') >= 5 and GetUnitAbilityLevel(u, 'A017') >= 5 and GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A07U') >= 1 and udg_runamen[i] == 11 and not isTitle(i , 43) then
		// 不能是丐帮，降龙5级、空明拳5级、九阴真经、双手互博
		// 奖励招式300、内力500、真实300，降龙加3级，空明加3级
		call SetPlayerName(p, "〓郭大侠〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(0, u, 0, 300)
		call ModifyHeroStat(1, u, 0, 500)
		call ModifyHeroStat(2, u, 0, 300)
		call SetUnitAbilityLevel(u, 'A07E', IMinBJ(GetUnitAbilityLevel(u, 'A07E') + 3, 9))
		call SetUnitAbilityLevel(u, 'A017', IMinBJ(GetUnitAbilityLevel(u, 'A017') + 3, 9))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：郭大侠，招式伤害增加了300点，内力增加了500点，真实伤害增加了300点，武功" + GetObjectName('A07E') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A07E') + 3, 9)) + "重，" + GetObjectName('A017') + "提升到" + I2S(IMinBJ(GetUnitAbilityLevel(u, 'A017') + 3, 9)) + "重，学习双手互搏后攻击时几率刷新所有武功CD")
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A07E' * 5, GetUnitAbilityLevel(u, 'A07E'))
		call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A017' * 5, GetUnitAbilityLevel(u, 'A017'))
		call setTitleNumber(i , 43)
	endif
	if GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A0DN') >= 1 and GetUnitAbilityLevel(u, 'A07O') >= 1 and GetUnitAbilityLevel(u, 'A07R') >= 1 and GetUnitAbilityLevel(u, 'A07T') >= 1 and GetUnitAbilityLevel(u, 'A07Q') >= 1 and GetUnitAbilityLevel(u, 'A07W') >= 1 and GetUnitAbilityLevel(u, 'A07U') >= 1 and not isTitle(i , 44) then
		// 神仙姐姐：九阴、九阳、罗汉、吸星、葵花、斗转、乾坤、双手
		call SetPlayerName(p, "〓神仙姐姐〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call ModifyHeroStat(0, u, 0, 300)
		call ModifyHeroStat(1, u, 0, 500)
		call ModifyHeroStat(2, u, 0, 300)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：神仙姐姐，招式伤害增加了300点，内力增加了500点，真实伤害增加了300点，升重速度得到了提升")
		call setTitleNumber(i , 44)
	endif
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 26) - 1)])) != 0) and (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 4) - 1)])) != 0) and (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 7) - 1)])) != 0) and (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 15) - 1)])) != 0) and (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 18) - 1)])) != 0) and not isTitle(i , 51) then // INLINED!!
		// 五岳盟主 同时获得恒山、泰山、嵩山、华山、衡山掌门
		call ModifyHeroStat(0, u, 0, 2000)
		call ModifyHeroStat(1, u, 0, 2000)
		call ModifyHeroStat(2, u, 0, 2000)
		set wuxing[i]=wuxing[i] + 30
		set gengu[i]=gengu[i] + 30
		set danpo[i]=danpo[i] + 30
		set fuyuan[i]=fuyuan[i] + 30
		set jingmai[i]=jingmai[i] + 30
		set yishu[i]=yishu[i] + 30
		set juexuelingwu[i]=juexuelingwu[i] + 30
		call SetPlayerName(p, "〓五岳盟主〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" + I2S(i) + "获得了称号：五岳盟主，三围各增加2000点，全性格属性增加30点，绝学领悟点增加30点")
		call setTitleNumber(i , 51)
	endif
	set p=null
endfunction
//武功升重及掌门称号系统
function WuGongShengChong takes unit u,integer id,real r returns nothing
 local integer level= GetUnitAbilityLevel(u, id)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	
	// 武功升重
	call kungfuLevelUp(u , id , r)
	
	//掌门系统
	if ( IsUnitType(u, UNIT_TYPE_HERO) != null ) then
		call becomeChief(u , 1 , "少林方丈" , 170 , 190 , 480)
		call becomeChief(u , 2 , "古墓掌门" , 240 , 240 , 0)
		call becomeChief(u , 3 , "丐帮帮主" , 480 , 0 , 0)
		call becomeChief(u , 4 , "华山掌门" , 0 , 170 , 290)
		call becomeChief(u , 5 , "全真掌教" , 0 , 360 , 0)
		call becomeChief(u , 6 , "血刀掌门" , 0 , 0 , 1200)
		call becomeChief(u , 7 , "恒山掌门" , 0 , 460 , 0)
		call becomeChief(u , 8 , "峨眉掌门" , 240 , 170 , 0)
		call becomeChief(u , 9 , "武当掌门" , 240 , 0 , 600)
		call becomeChief(u , 10 , "星宿掌门" , 0 , 600 , 300)
		call becomeChief(u , 12 , "灵鹫宫主" , 220 , 220 , 220)
		call becomeChief(u , 13 , "慕容家主" , 100 , 280 , 300)
		call becomeChief(u , 14 , "明教教主" , 210 , 310 , 160)
		call becomeChief(u , 15 , "衡山掌门" , 350 , 260 , 100)
		call becomeChief(u , 16 , "男神龙" , 350 , 0 , 200)
		call becomeChief(u , 17 , "女神龙" , 200 , 350 , 0)
		call becomeChief(u , 18 , "泰山掌门" , 320 , 220 , 120)
		call becomeChief(u , 19 , "铁掌帮主" , 300 , 0 , 225)
		call becomeChief(u , 20 , "唐门门主" , 0 , 225 , 300)
		call becomeChief(u , 21 , "五毒教主" , 300 , 225 , 0)
		call becomeChief(u , 22 , "桃花岛主" , 225 , 0 , 300)
		call becomeChief(u , 23 , "野螺掌派" , 225 , 300 , 0)
		call becomeChief(u , 24 , "雪山掌门" , 225 , 0 , 300)
		call becomeChief(u , 25 , "汝阳王" , 200 , 200 , 200)
		call becomeChief(u , 26 , "嵩山掌门" , 0 , 600 , 0)
		
		call determineShaoLinTitle(u)
		call determineGuMuTitle(u)
		call determineGaiBangTitle(u)
		call determineHuaShanTitle(u)
		call determineQuanZhenTitle(u)
		call determineXueDaoTitle(u)
		call determineHengShanTitle(u)
		call determineEMeiTitle(u)
		call determineWuDangTitle(u)
		call determineXingXiuTitle(u)
		call determineLingJiuTitle(u)
		call determineMuRongTitle(u)
		call determineMingJiaoTitle(u)
		call determineHengShan2Title(u)
		call determineShenLongTitle(u)
		call determineTaiShanTitle(u)
		call determineTieZhangTitle(u)
		call determineTangMenTitle(u)
		call determineWuDuTitle(u)
		call determineTaoHuaDaoTitle(u)
		call determineYeLuoTitle(u)
		call determineXueShanTitle(u)
		call determineRuYangTitle(u)
		call determineSongShanTitle(u)
		call determineJiangHuTitle(u)
		
	endif
	
	set p=null
endfunction

function PassiveWuGongAction takes unit playerControllingUnit,unit enemy,real possibility,real range,boolexpr filter,code callback,integer abilityId,real upgradeSpeed returns nothing
 local location loc= GetUnitLoc(playerControllingUnit)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(playerControllingUnit))
	if ( GetRandomInt(1, 100) <= fuyuan[i] / 5 + possibility ) then
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc , filter), callback)
		call WuGongShengChong(playerControllingUnit , abilityId , upgradeSpeed)
	endif
	call RemoveLocation(loc)
	set loc=null
endfunction

function WanBuff_1 takes integer buffnum,integer num,unit uc,integer id,integer orderid,unit l__ut,string s returns nothing
 local unit u
 local player p
 local location loc
	if ( buffnum == num ) then
		set p=GetOwningPlayer(uc)
		set loc=GetUnitLoc(l__ut)
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
    	set u=bj_lastCreatedUnit
    	call ShowUnitHide(u)
		call UnitAddAbility(u, id)
		if ( num == 12 or num == 14 ) then
			call IncUnitAbilityLevel(u, id)
		endif
    	call IssueTargetOrderById(u, orderid, l__ut)
    	call UnitApplyTimedLife(u, 'BHwe', 2.)
    	call CreateTextTagLocBJ(s, loc, 60., 12., 65., 55., 42., 0)
		call Nw(3. , bj_lastCreatedTextTag)
    	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
		call RemoveLocation(loc)
	endif
	set loc=null
	set p=null
	set u=null
endfunction
function WanBuff takes unit u,unit l__ut,integer buffnum returns nothing
    call WanBuff_1(buffnum , 1 , u , 'A077' , $D008F , l__ut , "内伤")
    call WanBuff_1(buffnum , 2 , u , 'A079' , $D02BC , l__ut , "走火入魔")
    call WanBuff_1(buffnum , 3 , u , 'A075' , $D022F , l__ut , "流血")
    call WanBuff_1(buffnum , 4 , u , 'A06I' , $D00DD , l__ut , "混乱")
    call WanBuff_1(buffnum , 5 , u , 'A0AZ' , $D006B , l__ut , "昏迷")
    call WanBuff_1(buffnum , 6 , u , 'A076' , $D006B , l__ut , "重伤")
    call WanBuff_1(buffnum , 7 , u , 'A078' , $D022F , l__ut , "血流不止")
    call WanBuff_1(buffnum , 8 , u , 'A0AY' , $D00DE , l__ut , "麻痹")
    call WanBuff_1(buffnum , 9 , u , 'A019' , $D00B5 , l__ut , "破防")
    call WanBuff_1(buffnum , 10 , u , 'A05N' , $D00DE , l__ut , "神经错乱")
    call WanBuff_1(buffnum , 11 , u , 'A05L' , $D007F , l__ut , "封穴")
    call WanBuff_1(buffnum , 12 , u , 'A05L' , $D007F , l__ut , "穴位全封")
	call WanBuff_1(buffnum , 13 , u , 'A074' , $D022F , l__ut , "中毒")
	call WanBuff_1(buffnum , 14 , u , 'A074' , $D022F , l__ut , "深度中毒")
    call WanBuff_1(buffnum , 15 , u , 'A097' , $D00DE , l__ut , "致盲")
    call WanBuff_1(buffnum , 16 , u , 'A0DV' , $D00DE , l__ut , "虚弱")
    call WanBuff_1(buffnum , 17 , u , 'A0EW' , $D007F , l__ut , "冰冻")
endfunction
// 加密
function encryptInt takes integer src,player p returns string
 local string playerName= LoadStr(YDHT, GetHandleId(p), GetHandleId(p))
 local integer hash= StringHash(playerName + priKey)
	return I2S(hash + src)
endfunction
function decryptInt takes string src,player p returns integer
 local string playerName= LoadStr(YDHT, GetHandleId(p), GetHandleId(p))
    local integer hash= StringHash(playerName + priKey)
    local integer decrypt= S2I(src) - hash
    if decrypt > 90000000 or decrypt < 0 then
        return 0
    endif
    return decrypt
endfunction
function transformInt takes integer i returns integer
    local string s= DzAPI_Map_GetMapConfig("hashKey")
    local integer hash= 0
    if s == null or s == "" then
        set hash=68
    else
        set hash=S2I(s)
    endif
    return i * hash + GetRandomInt(1, 63)
endfunction
function untransformInt takes integer i returns integer
    local string s= DzAPI_Map_GetMapConfig("hashKey")
    local integer hash= 0
    if s == null or s == "" then
        set hash=68
    else
        set hash=S2I(s)
    endif
    return i / hash
endfunction
// 将整数转换为62进制字符
function encodeChar takes integer i returns string
    if i == 0 then
        return "a"
    elseif i == 1 then
        return "b"
    elseif i == 2 then
        return "c"
    elseif i == 3 then
        return "d"
    elseif i == 4 then
        return "e"
    elseif i == 5 then
        return "f"
    elseif i == 6 then
        return "g"
    elseif i == 7 then
        return "h"
    elseif i == 8 then
        return "i"
    elseif i == 9 then
        return "j"
    elseif i == 10 then
        return "k"
    elseif i == 11 then
        return "l"
    elseif i == 12 then
        return "m"
    elseif i == 13 then
        return "n"
    elseif i == 14 then
        return "o"
    elseif i == 15 then
        return "p"
    elseif i == 16 then
        return "q"
    elseif i == 17 then
        return "r"
    elseif i == 18 then
        return "s"
    elseif i == 19 then
        return "t"
    elseif i == 20 then
        return "u"
    elseif i == 21 then
        return "v"
    elseif i == 22 then
        return "w"
    elseif i == 23 then
        return "x"
    elseif i == 24 then
        return "y"
    elseif i == 25 then
        return "z"
    elseif i == 26 then
        return "A"
    elseif i == 27 then
        return "B"
    elseif i == 28 then
        return "C"
    elseif i == 29 then
        return "D"
    elseif i == 30 then
        return "E"
    elseif i == 31 then
        return "F"
    elseif i == 32 then
        return "G"
    elseif i == 33 then
        return "H"
    elseif i == 34 then
        return "I"
    elseif i == 35 then
        return "J"
    elseif i == 36 then
        return "K"
    elseif i == 37 then
        return "L"
    elseif i == 38 then
        return "M"
    elseif i == 39 then
        return "N"
    elseif i == 40 then
        return "O"
    elseif i == 41 then
        return "P"
    elseif i == 42 then
        return "Q"
    elseif i == 43 then
        return "R"
    elseif i == 44 then
        return "S"
    elseif i == 45 then
        return "T"
    elseif i == 46 then
        return "U"
    elseif i == 47 then
        return "V"
    elseif i == 48 then
        return "W"
    elseif i == 49 then
        return "X"
    elseif i == 50 then
        return "Y"
    elseif i == 51 then
        return "Z"
    elseif i == 52 then
        return "0"
    elseif i == 53 then
        return "1"
    elseif i == 54 then
        return "2"
    elseif i == 55 then
        return "3"
    elseif i == 56 then
        return "4"
    elseif i == 57 then
        return "5"
    elseif i == 58 then
        return "6"
    elseif i == 59 then
        return "7"
    elseif i == 60 then
        return "8"
    elseif i == 61 then
        return "9"
    endif
    return ""
endfunction
// 将62进制字符转换为整数
function decodeChar takes string s returns integer
    if s == "a" then
        return 0
    elseif s == "b" then
        return 1
    elseif s == "c" then
        return 2
    elseif s == "d" then
        return 3
    elseif s == "e" then
        return 4
    elseif s == "f" then
        return 5
    elseif s == "g" then
        return 6
    elseif s == "h" then
        return 7
    elseif s == "i" then
        return 8
    elseif s == "j" then
        return 9
    elseif s == "k" then
        return 10
    elseif s == "l" then
        return 11
    elseif s == "m" then
        return 12
    elseif s == "n" then
        return 13
    elseif s == "o" then
        return 14
    elseif s == "p" then
        return 15
    elseif s == "q" then
        return 16
    elseif s == "r" then
        return 17
    elseif s == "s" then
        return 18
    elseif s == "t" then
        return 19
    elseif s == "u" then
        return 20
    elseif s == "v" then
        return 21
    elseif s == "w" then
        return 22
    elseif s == "x" then
        return 23
    elseif s == "y" then
        return 24
    elseif s == "z" then
        return 25
    elseif s == "A" then
        return 26
    elseif s == "B" then
        return 27
    elseif s == "C" then
        return 28
    elseif s == "D" then
        return 29
    elseif s == "E" then
        return 30
    elseif s == "F" then
        return 31
    elseif s == "G" then
        return 32
    elseif s == "H" then
        return 33
    elseif s == "I" then
        return 34
    elseif s == "J" then
        return 35
    elseif s == "K" then
        return 36
    elseif s == "L" then
        return 37
    elseif s == "M" then
        return 38
    elseif s == "N" then
        return 39
    elseif s == "O" then
        return 40
    elseif s == "P" then
        return 41
    elseif s == "Q" then
        return 42
    elseif s == "R" then
        return 43
    elseif s == "S" then
        return 44
    elseif s == "T" then
        return 45
    elseif s == "U" then
        return 46
    elseif s == "V" then
        return 47
    elseif s == "W" then
        return 48
    elseif s == "X" then
        return 49
    elseif s == "Y" then
        return 50
    elseif s == "Z" then
        return 51
    elseif s == "0" then
        return 52
    elseif s == "1" then
        return 53
    elseif s == "2" then
        return 54
    elseif s == "3" then
        return 55
    elseif s == "4" then
        return 56
    elseif s == "5" then
        return 57
    elseif s == "6" then
        return 58
    elseif s == "7" then
        return 59
    elseif s == "8" then
        return 60
    elseif s == "9" then
        return 61
    endif
    return - 1
endfunction
// 将整数转换为62进制字符串
function encodeInt takes integer i returns string
    local string result= ""
    local integer temp= i
    local integer remainder
    if i == 0 then
        return "MAGIC"
    endif
    loop
        set remainder=ModuloInteger(temp, 62)
        set temp=temp / 62
        set result=result + encodeChar(remainder)
        if temp < 1 then
            exitwhen true
        endif
    endloop
    return result
endfunction
// 将62进制字符串转为整数
function decodeInt takes string s returns integer
    local integer result= 0
    local integer i= 0
    local integer temp
    local integer char
    local integer k= 1
    if s == null or s == "" or s == "MAGIC" then
        return 0
    endif
    loop
        exitwhen i > StringLength(s) - 1
        set char=decodeChar(SubString(s, i, i + 1))
        set temp=char * k
        set result=result + temp
        set k=k * 62
        set i=i + 1
    endloop
    return result
endfunction
function newEncryptInt takes integer i returns string
    return encodeInt(transformInt(i))
endfunction
function newDecryptInt takes string s returns integer
    if s == "" or s == null then
        return 0
    endif
    return untransformInt(decodeInt(s))
endfunction
// 网易商城相关的逻辑
function refreshInterUI takes integer i returns nothing
 local integer j= 1
 local integer id= 0
	
	loop
		exitwhen j > interAbilityCount[i]
		if Player(i - 1) == GetLocalPlayer() then
			call s__Frame_hide(interAbilityLock[j])
		endif
		set id=LoadInteger(YDHT, interAbilityKey + i, j)
        if Player(i - 1) == GetLocalPlayer() then
            if id != 0 and id != 'AEfk' then
                call DzFrameSetTexture(s__Frame_id[(interAbilityWidget[j])], (EXExecuteScript("(require'jass.slk').ability[" + I2S(id) + "].Art")), 0) // INLINED!!
                call DzFrameSetAlpha(s__Frame_id[(interAbilityWidget[j])], (255)) // INLINED!!
            endif
        endif
		set j=j + 1
	endloop
endfunction
function checkPurchase takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_TALENT) or udg_isTest[i - 1] then
            set talent_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_TIEZHANG) or udg_isTest[i - 1] then
            set tiezhang_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_TANGMEN) or udg_isTest[i - 1] then
            set tangmen_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_WUDU) or udg_isTest[i - 1] then
            set wudu_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_TAOHUA) or udg_isTest[i - 1] then
            set taohua_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_RUYANG) or udg_isTest[i - 1] then
            set ruyang_flag[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_DOUBLE_POINT) or udg_isTest[i - 1] then
            set mall_addition[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_LEVEL_AWARD) or udg_isTest[i - 1] then
            set level_award[i]=1
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_WUKONG) or udg_isTest[i - 1] then
            set wukong_flag[i]=1
            call SetPlayerTechResearched(Player(i - 1), 'R004', 1)
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_PANDA) or udg_isTest[i - 1] then
            set panda_flag[i]=1
            call SetPlayerTechResearched(Player(i - 1), 'R005', 1)
        endif
        if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_NEIHUA) or udg_isTest[i - 1] then
            if neihua_flag[i] == 0 then
                set interAbilityCount[i]=interAbilityCount[i] + 5
                call refreshInterUI(i)
                set neihua_flag[i]=1
            endif
        endif
        set i=i + 1
    endloop
endfunction
function mallInit takes nothing returns nothing
    local timer t= CreateTimer()
    local integer i= 1
    loop
        exitwhen i > 5
        set tiezhang_flag[i]=0
        set tangmen_flag[i]=0
        set wudu_flag[i]=0
        set taohua_flag[i]=0
        set ruyang_flag[i]=0
        set talent_flag[i]=0
        set mall_addition[i]=0
        set level_award[i]=0
        set map_award_status[i]=0
        set panda_flag[i]=0
        set wukong_flag[i]=0
        set i=i + 1
    endloop
    call TimerStart(t, 1, true, function checkPurchase)
    set t=null
endfunction//---------------------------------
// 游戏逻辑处理
// 1. 基地保护逻辑
// 2. 选择英雄及门派
// 3. 设置游戏模式和难度
// 4. 游戏界面显示相关
// 5. 游戏胜利和失败
// 6. 玩家英雄阵亡和复活
// 7. 刷怪相关
// 8. 鸟的技能
// 9. 英雄升级
// 10. 各类回复
// 11. 远程传送
// 12. 古董系统
// 13. 剑意系统
// 14. 积分和声望换物品、武学精要
// 15. 学习和遗忘武功（含激活残章）
// 16. 合成物品
// 17. 伴侣系统
// 18. 整理地图上物品
// 19. 其他琐碎逻辑
// 20. F2 F3 F4回城
//---------------------------------

//基地保护机制
function IsJiDiBaoHu takes nothing returns boolean
	return ( GetTriggerUnit() == udg_ZhengPaiWL ) and GetEventDamage() > GetUnitState(udg_ZhengPaiWL, UNIT_STATE_MAX_LIFE) * 0.03
endfunction
function JiDiBaoHu takes nothing returns nothing
	call WuDi(udg_ZhengPaiWL)
	call SetUnitLifePercentBJ(udg_ZhengPaiWL, GetUnitLifePercent(udg_ZhengPaiWL) - 3.00)
endfunction
//云大救家
function Trig_YunDaXianShenConditions takes nothing returns boolean
	return ( ( GetTriggerUnit() == udg_ZhengPaiWL ) and ( GetUnitLifePercent(udg_ZhengPaiWL) <= 25.00 ) and ( udg_yunyangxianshen == false ) )
endfunction
function Trig_YunDaXianShenActions takes nothing returns nothing
	set udg_yunyangxianshen=true
	call CreateNUnitsAtLoc(1, 'Hblm', Player(5), OffsetLocation(GetUnitLoc(udg_ZhengPaiWL), 0, 200), 90.00)
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|cFFFF6600基地严重受创，云杨现身相助")
	call UnitApplyTimedLife(GetLastCreatedUnit(), 'BHwe', 20.00)
	call UnitAddAbility(udg_ZhengPaiWL, 'Avul')
	call YDWEPolledWaitNull(20.00)
	call UnitRemoveAbilityBJ('Avul', udg_ZhengPaiWL)
endfunction
//买基地无敌
function BuyJiDiWuDi takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I07X'
endfunction
function JiDiWuDi takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff33在正义之士的庇护下，武林暂时无敌了（20秒后解除）")
	call SetUnitInvulnerable(udg_ZhengPaiWL, true)
	call YDWEPolledWaitNull(20.)
	call SetUnitInvulnerable(udg_ZhengPaiWL, false)
endfunction
//基地挨打
function JiDiAiDa_Conditions takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetAttacker())) == MAP_CONTROL_COMPUTER )
endfunction
function laojiayouren takes nothing returns boolean
	return ( IsUnitAlly(GetFilterUnit(), Player(0)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) or GetUnitTypeId(GetFilterUnit()) == 'n00X' ) and ( GetPlayerController(GetOwningPlayer(GetFilterUnit())) == MAP_CONTROL_USER )
endfunction
function JiDiAiDa_Actions takes nothing returns nothing
	//==============反仇恨机制定义单位组==============
 local group g= CreateGroup()
	//==============反仇恨机制定义单位组==============
	if GetRandomInt(1, 50) == 48 then
		call PingMinimapForForce(bj_FORCE_ALL_PLAYERS, GetUnitX(udg_ZhengPaiWL), GetUnitY(udg_ZhengPaiWL), 1)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFCCFF00正派武林受到攻击，请赶紧回防")
	endif
	// 魔教教主不可以被关进监狱
	if GetRandomInt(30, 50) == 45 and GetUnitTypeId(GetAttacker()) != 'nbds' then
		call SetUnitPosition(GetAttacker(), GetRectCenterX(udg_jail), GetRectCenterY(udg_jail))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFCCFFCC正派武林将攻击单位抓进了监狱")
	endif
	call GroupEnumUnitsInRange(g, GetUnitX(udg_ZhengPaiWL), GetUnitY(udg_ZhengPaiWL), 800, Condition(function laojiayouren))
	if ( ( IsUnitGroupEmptyBJ(g) == false ) ) then
		call UnitAddAbility(udg_ZhengPaiWL, 'A00S')
		call YDWEPolledWaitNull(5.00)
		call UnitRemoveAbility(udg_ZhengPaiWL, 'A00S')
	endif
	call DestroyGroup(g)
	set g=null
endfunction
//购买城防
function BuyChengFang takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896147 ) )
endfunction
function ShengChengFang takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if ( ( GetPlayerTechCountSimple('R000', Player(5)) <= 29 ) ) then
		call SetPlayerTechResearchedSwap('R000', ( GetPlayerTechCountSimple('R000', Player(5)) + 1 ), Player(5))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|cFFFFD700在玩家：" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "的无私奉献下，正派武林的城防得到加强了" ) ))
		set i=1
		loop
			exitwhen i >= 6
			set shoujiajf[i]=shoujiajf[i] + 15
			set i=i + 1
		endloop
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "升级城防，每位玩家守家积分+15")
		// set shoujiajf[i] = shoujiajf[i] + $F
		// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|CFF34FF00守家积分+15")
	else
		call AdjustPlayerStateBJ($4E20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF0000城防已达最高，无法继续升级|r")
	endif
endfunction
//高级城防
function BuyGaoChengFang takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896917 ) )
endfunction
function ShengGaoChengFang takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if ( ( udg_boshu >= 18 ) ) then
		if ( ( GetPlayerTechCountSimple('R002', Player(5)) <= 9 ) ) then
			call SetPlayerTechResearchedSwap('R002', ( GetPlayerTechCountSimple('R002', Player(5)) + 1 ), Player(5))
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|cFFFFD700在玩家：" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "的无私奉献下，正派武林的高级城防得到加强了" ) ))
			set i=1
			loop
				exitwhen i >= 6
				set shoujiajf[i]=shoujiajf[i] + 25
				set i=i + 1
			endloop
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "升级高级城防，每位玩家守家积分+25")
			// set shoujiajf[i] = shoujiajf[i] + 25
			// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|CFF34FF00守家积分+25")
		else
			call AdjustPlayerStateBJ($C350, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF0000高级城防已达最高，无法继续升级|r")
		endif
	else
		call AdjustPlayerStateBJ($C350, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF000018波进攻怪以后才能使用此功能哦|r")
	endif
endfunction

//选择英雄
function fx takes nothing returns boolean
	return ( ( ( udg_hashero[( 1 + GetPlayerId(GetTriggerPlayer()) )] == false ) and ( IsUnitInGroup(GetTriggerUnit(), i7) ) ) )
endfunction
function playAttackAnimation takes unit u returns nothing
	call SetUnitAnimation(u, "attack")
	call YDWEPolledWaitNull(2)
	call ResetUnitAnimation(u)
endfunction
// - 差值 等级 累计游戏评分 称号 奖励
// - 10000	    1级	    5000	不堪一击	三围+10
// - 15000	    2级	    15000	毫不足虑	特攻+2
// - 20000	    3级	    30000	不足挂齿	六围+1
// - 25000	    4级	    50000	初学乍练	暴击率+2%
// - 30000	    5级	    75000	勉勉强强	伤害加成+2%
// - 35000	    6级	    105000	初窥门径	三围+15
// - 40000	    7级	    140000	初出茅庐	特攻+3
// - 45000	    8级	    180000	略知一二	六围+1
// - 50000	    9级	    225000	普普通通	暴击率+3%
// - 55000	    10级	275000	平平常常	伤害加成+3%
// - 60000	    11级	330000	平淡无奇	三围+10
// - 65000	    12级	390000	粗懂皮毛	特攻+2
// - 70000	    13级	455000	半生不熟	六围+1
// - 75000	    14级	525000	登堂入室	暴击率+2%
// - 80000	    15级	600000	略有小成	伤害加成+2%
// - 85000	    16级	680000	已有小成	三围+15
// - 90000	    17级	765000	鹤立鸡群	特攻+3
// - 95000	    18级	855000	驾轻就熟	六围+1
// - 100000		19级	950000	青出於蓝	暴击率+3%
// - 105000		20级	1050000	融会贯通	伤害加成+3%
// - 110000		21级	1155000	心领神会	三围+10
// - 115000		22级	1265000	炉火纯青	特攻+2
// - 120000		23级	1380000	了然於胸	六围+1
// - 125000		24级	1500000	略有大成	暴击率+2%
// - 130000		25级	1625000	已有大成	伤害加成+2%
// - 135000		26级	1755000	豁然贯通	三围+15
// - 140000		27级	1890000	非比寻常	特攻+3
// - 145000		28级	2030000	出类拔萃	六围+1
// - 150000		29级	2175000	罕有敌手	暴击率+3%
// - 155000		30级	2325000	技冠群雄	伤害加成+3%
// - 160000		31级	2480000	神乎其技	三围+10
// - 165000		32级	2640000	出神入化	特攻+2
// - 170000		33级	2805000	傲视群雄	六围+1
// - 175000		34级	2975000	登峰造极	暴击率+2%
// - 180000		35级	3150000	无与伦比	伤害加成+2%
// - 185000		36级	3330000	所向披靡	三围+15
// - 190000		37级	3515000	一代宗师	特攻+3
// - 195000		38级	3705000	精深奥妙	六围+1
// - 200000		39级	3900000	神功盖世	暴击率+3%
// - 205000		40级	4100000	举世无双	伤害加成+3%
// - 210000		41级	4305000	惊世骇俗	三围+10
// - 215000		42级	4515000	撼天动地	特攻+2
// - 220000		43级	4730000	震古铄今	六围+1
// - 225000		44级	4950000	超凡入圣	暴击率+2%
// - 230000		45级	5175000	威镇寰宇	伤害加成+2%
// - 235000		46级	5405000	空前绝后	三围+15
// - 240000		47级	5640000	天人合一	特攻+3
// - 245000		48级	5880000	深藏不露	六围+1
// - 250000		49级	6125000	深不可测	暴击率+3%
// - 255000		50级	6375000	返璞归真	伤害加成+3%
function jianghuLevelAward takes integer i returns nothing
 local integer level= decryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( "totalPoint"))) , Player(i - 1)) // INLINED!!
	if level >= 5000 then
		set jianghuLevel[i]=1
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
	endif
	if level >= 15000 then
		set jianghuLevel[i]=2
		set special_attack[i]=special_attack[i] + 2
	endif
	if level >= 30000 then
		set jianghuLevel[i]=3
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 50000 then
		set jianghuLevel[i]=4
		set udg_baojilv[i]=udg_baojilv[i] + 0.02
	endif
	if level >= 75000 then
		set jianghuLevel[i]=5
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.02
	endif
	if level >= 105000 then
		set jianghuLevel[i]=6
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
	endif
	if level >= 140000 then
		set jianghuLevel[i]=7
		set special_attack[i]=special_attack[i] + 3
	endif
	if level >= 180000 then
		set jianghuLevel[i]=8
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 225000 then
		set jianghuLevel[i]=9
		set udg_baojilv[i]=udg_baojilv[i] + 0.03
	endif
	if level >= 275000 then
		set jianghuLevel[i]=10
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.03
	endif
	if level >= 330000 then
		set jianghuLevel[i]=11
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
	endif
	if level >= 390000 then
		set jianghuLevel[i]=12
		set special_attack[i]=special_attack[i] + 2
	endif
	if level >= 455000 then
		set jianghuLevel[i]=13
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 525000 then
		set jianghuLevel[i]=14
		set udg_baojilv[i]=udg_baojilv[i] + 0.02
	endif
	if level >= 600000 then
		set jianghuLevel[i]=15
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.02
	endif
	if level >= 680000 then
		set jianghuLevel[i]=16
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
	endif
	if level >= 765000 then
		set jianghuLevel[i]=17
		set special_attack[i]=special_attack[i] + 3
	endif
	if level >= 855000 then
		set jianghuLevel[i]=18
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 950000 then
		set jianghuLevel[i]=19
		set udg_baojilv[i]=udg_baojilv[i] + 0.03
	endif
	if level >= 1050000 then
		set jianghuLevel[i]=20
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.03
	endif
	if level >= 1155000 then
		set jianghuLevel[i]=21
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
	endif
	if level >= 1265000 then
		set jianghuLevel[i]=22
		set special_attack[i]=special_attack[i] + 2
	endif
	if level >= 1380000 then
		set jianghuLevel[i]=23
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 1500000 then
		set jianghuLevel[i]=24
		set udg_baojilv[i]=udg_baojilv[i] + 0.02
	endif
	if level >= 1625000 then
		set jianghuLevel[i]=25
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.02
	endif
	if level >= 1755000 then
		set jianghuLevel[i]=26
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
	endif
	if level >= 1890000 then
		set jianghuLevel[i]=27
		set special_attack[i]=special_attack[i] + 3
	endif
	if level >= 2030000 then
		set jianghuLevel[i]=28
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 2175000 then
		set jianghuLevel[i]=29
		set udg_baojilv[i]=udg_baojilv[i] + 0.03
	endif
	if level >= 2325000 then
		set jianghuLevel[i]=30
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.03
	endif
	if level >= 2480000 then
		set jianghuLevel[i]=31
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
	endif
	if level >= 2640000 then
		set jianghuLevel[i]=32
		set special_attack[i]=special_attack[i] + 2
	endif
	if level >= 2805000 then
		set jianghuLevel[i]=33
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 2975000 then
		set jianghuLevel[i]=34
		set udg_baojilv[i]=udg_baojilv[i] + 0.02
	endif
	if level >= 3150000 then
		set jianghuLevel[i]=35
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.02
	endif
	if level >= 3330000 then
		set jianghuLevel[i]=36
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
	endif
	if level >= 3515000 then
		set jianghuLevel[i]=37
		set special_attack[i]=special_attack[i] + 3
	endif
	if level >= 3705000 then
		set jianghuLevel[i]=38
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 3900000 then
		set jianghuLevel[i]=39
		set udg_baojilv[i]=udg_baojilv[i] + 0.03
	endif
	if level >= 4100000 then
		set jianghuLevel[i]=40
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.03
	endif
	if level >= 4305000 then
		set jianghuLevel[i]=41
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 10)
	endif
	if level >= 4515000 then
		set jianghuLevel[i]=42
		set special_attack[i]=special_attack[i] + 2
	endif
	if level >= 4730000 then
		set jianghuLevel[i]=43
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 4950000 then
		set jianghuLevel[i]=44
		set udg_baojilv[i]=udg_baojilv[i] + 0.02
	endif
	if level >= 5175000 then
		set jianghuLevel[i]=45
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.02
	endif
	if level >= 5405000 then
		set jianghuLevel[i]=46
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, 15)
	endif
	if level >= 5640000 then
		set jianghuLevel[i]=47
		set special_attack[i]=special_attack[i] + 3
	endif
	if level >= 5880000 then
		set jianghuLevel[i]=48
		set wuxing[i]=wuxing[i] + 1
		set gengu[i]=gengu[i] + 1
		set fuyuan[i]=fuyuan[i] + 1
		set danpo[i]=danpo[i] + 1
		set jingmai[i]=jingmai[i] + 1
		set yishu[i]=yishu[i] + 1
	endif
	if level >= 6125000 then
		set jianghuLevel[i]=49
		set udg_baojilv[i]=udg_baojilv[i] + 0.03
	endif
	if level >= 6375000 then
		set jianghuLevel[i]=50
		set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + 0.03
	endif
	call DzAPI_Map_StoreString(Player(i - 1) , "jhLevel" , encryptInt(jianghuLevel[i] , Player(i - 1)))
endfunction
function heroAddThreeAttribute takes integer i returns nothing
 local integer addition= 0
	if talent_three_attribute[i] == 1 then
		set addition=20
	elseif talent_three_attribute[i] == 2 then
		set addition=50
	elseif talent_three_attribute[i] == 3 then
		set addition=100
	elseif talent_three_attribute[i] == 4 then
		set addition=150
	elseif talent_three_attribute[i] == 5 then
		set addition=200
	endif
	if addition > 0 then
		call ModifyHeroStat(bj_HEROSTAT_STR, udg_hero[i], bj_MODIFYMETHOD_ADD, addition)
		call ModifyHeroStat(bj_HEROSTAT_AGI, udg_hero[i], bj_MODIFYMETHOD_ADD, addition)
		call ModifyHeroStat(bj_HEROSTAT_INT, udg_hero[i], bj_MODIFYMETHOD_ADD, addition)
	endif
endfunction
function heroAddArmor takes integer i returns nothing
 local integer addition= 0
	if talent_armor[i] == 1 then
		set addition=20
	elseif talent_armor[i] == 2 then
		set addition=40
	elseif talent_armor[i] == 3 then
		set addition=60
	elseif talent_armor[i] == 4 then
		set addition=80
	elseif talent_armor[i] == 5 then
		set addition=100
	endif
	if addition > 0 then
		call YDWEGeneralBounsSystemUnitSetBonus(udg_hero[i] , 2 , 0 , addition)
	endif
endfunction
function heroAddAttributes takes integer i returns nothing
	call heroAddThreeAttribute(i)
	call heroAddArmor(i)
endfunction
function isSelectHero takes unit u returns boolean
 local integer i= 1
	loop
		exitwhen i > 9
		if u == K4[i] then
			return true
		endif
		set i=i + 1
	endloop
	return false
endfunction
function SelectHero takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
 local unit u= GetTriggerUnit()
 local effect eff= null
	if not isSelectHero(u) then
		return
	endif
	if ( GetUnitTypeId(L4[i]) == GetUnitTypeId(u) ) then
		if u == K4[8] and kongYaoSkinFlag[i] == 0 then
			call DisplayTimedTextToPlayer(p, 0, 0, 10, "该英雄需要完成S1通行证（正常）后解锁")
			return
		endif
		if u == K4[9] and qiXiaoSkinFlag[i] == 0 then
			call DisplayTimedTextToPlayer(p, 0, 0, 10, "该英雄需要商城购买并完成S1通行证（进阶）后解锁")
			return
		endif
		set Q4=GetRandomLocInRect(Ge)
		call CreateNUnitsAtLoc(1, GetUnitTypeId(u), p, Q4, bj_UNIT_FACING)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		if ( u == K4[1] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00若蝶|r，请选择门派后开启江湖之旅")
			call addAllAttrs(i , 2)
			set wuxing[i]=wuxing[i] + 6
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( u == K4[2] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00潇侠|r，请选择门派后开启江湖之旅")
			call addAllAttrs(i , 2)
			set fuyuan[i]=fuyuan[i] + 6
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( ( u == K4[3] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00莫言|r，请选择门派后开启江湖之旅")
			call addAllAttrs(i , 2)
			set danpo[i]=danpo[i] + 6
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( ( u == K4[4] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00浪云|r，请选择门派后开启江湖之旅")
			call addAllAttrs(i , 2)
			set jingmai[i]=jingmai[i] + 6
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( ( u == K4[5] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00魔君|r，请选择门派后开启江湖之旅")
			call addAllAttrs(i , 2)
			set gengu[i]=gengu[i] + 6
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( u == K4[6] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00兰馨|r，请选择门派后开启江湖之旅|r\n")
			call addAllAttrs(i , 3)
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( u == K4[7] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00瑾轩|r，请选择门派后开启江湖之旅|r\n")
			call addAllAttrs(i , 3)
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( u == K4[8] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00空瑶|r，请选择门派后开启江湖之旅|r\n")
			call addAllAttrs(i , 3)
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		elseif ( u == K4[9] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "恭喜获得英雄：|CFFCCFF00启萧|r，请选择门派后开启江湖之旅|r\n")
			call addAllAttrs(i , 3)
			set udg_xinggeA[i]=GetRandomInt(3, 5)
			set udg_xinggeB[i]=GetRandomInt(3, 5)
			call RemoveUnit(vipbanlv[i])
		endif
		call SelectUnitRemoveForPlayer(u, p)
		call SelectUnitAddForPlayer(bj_lastCreatedUnit, p)
		call AddSpecialEffectTargetUnitBJEx("overhead" , bj_lastCreatedUnit , "Abilities\\Spells\\Other\\Awaken\\Awaken.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set udg_hashero[i]=true
		set udg_hero[i]=bj_lastCreatedUnit
		call heroAddAttributes(i)
		// 多通奖励100移速
		call h__SetUnitMoveSpeed(udg_hero[i], GetUnitMoveSpeed(udg_hero[i]) + extraSpeed[i - 1])
		// 单通奖励称号
		if GetPlayerName(Player(i - 1)) == "非我莫属xq" then
			call AddSpecialEffectTargetEx("[ch]7.mdl" , bj_lastCreatedUnit , "overhead")
		elseif GetPlayerName(Player(i - 1)) == "zeikale" or GetPlayerName(Player(i - 1)) == "zeikala" then
			call AddSpecialEffectTargetEx("[ch]9.mdl" , bj_lastCreatedUnit , "overhead")
		elseif GetPlayerName(Player(i - 1)) == "粘合小捣蛋" then
			call AddSpecialEffectTargetEx("shuizhudandan.mdx" , bj_lastCreatedUnit , "overhead")
		elseif GetPlayerName(Player(i - 1)) == "jymeng" then
			set eff=AddSpecialEffectTargetEx("jinmengxiaoyao.mdx" , bj_lastCreatedUnit , "overhead")
		else
			if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 18 then
				call AddSpecialEffectTargetEx("yujianjiahu4.mdx" , bj_lastCreatedUnit , "overhead")
			endif
		endif
		if wing1Flag[i] == 1 then
			call DestroyEffect(vd[i])
			call AddSpecialEffectTargetUnitBJ("chest", udg_hero[i], "wing_red_no6.mdx")
			set vd[i]=bj_lastCreatedEffect
			set udg_baojilv[i]=udg_baojilv[i] + 0.02
		endif
		if wing2Flag[i] == 1 then
			call DestroyEffect(vd[i])
			call AddSpecialEffectTargetUnitBJ("chest", udg_hero[i], "wing_bluewhite_no1.mdx")
			set vd[i]=bj_lastCreatedEffect
			call addAllAttrs(i , 1)
		endif
		// 江湖等级奖励
		// call jianghuLevelAward(i)
		set O4=O4 + 1
		call RemoveLocation(Q4)
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|CFF00FFFF提示：|r输入|CFF00EE00-random|r可随机选择门派|r")
	else
		set L4[i]=u
		if ( ( u == K4[1] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00若蝶|r\n额外属性：|cFF00FF00悟性\n|r")
		elseif ( ( u == K4[2] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00潇侠|r\n额外属性：|cFF00FF00福缘\n|r")
		elseif ( ( u == K4[3] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00莫言|r\n额外属性：|cFF00FF00胆魄\n|r")
		elseif ( ( u == K4[4] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00浪云|r\n额外属性：|cFF00FF00经脉\n|r")
		elseif ( ( u == K4[5] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00魔君|r\n额外属性：|cFF00FF00根骨\n|r")
		elseif ( ( u == K4[6] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00兰馨|r\n额外属性：|cFF00FF00全属性\n|r")
		elseif ( ( u == K4[7] ) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00瑾轩|r\n额外属性：|cFF00FF00全属性\n|r")
		elseif ( u == K4[8] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00空瑶|r\n额外属性：|cFF00FF00全属性\n|r特性：|cFF00FF00初始攻击速度+10%\n|r")
		elseif ( u == K4[9] ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFCCFF00启萧|r\n额外属性：|cFF00FF00全属性\n|r特性：|cFF00FF00初始攻击范围+250\n\r")
		endif
		call playAttackAnimation(u)
	endif
	set p=null
	set u=null
	set eff=null
endfunction
//选择门派加入
function WuMenPai_Condition takes nothing returns boolean
	return (IsUnitType((GetLeavingUnit() ), ( UNIT_TYPE_HERO)) != null) and udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetLeavingUnit()))] == 0 and GetPlayerController(GetOwningPlayer(GetLeavingUnit())) == MAP_CONTROL_USER // INLINED!!
endfunction
//自由门派
function WuMenPai_Action takes nothing returns nothing
 local unit u= GetLeavingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	set udg_runamen[i]=11
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "选择了〓自由门派〓|r")
	call SetPlayerName(p, "〓自由门派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦），请在NPC郭靖处选择副职")
	call UnitAddAbility(u, 'A05R')
	call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
	call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
	if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
		call UnitAddAbility(u, 'A040')
		call UnitAddAbility(u, 'A041')
		call UnitAddAbility(u, 'A042')
	endif
	set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
	call UnitRemoveAbility(u, 'Avul')
	set Q4=GetRandomLocInRect(He)
	call SetUnitPositionLoc(u, Q4)
	call PanCameraToTimedLocForPlayer(p, Q4, 0)
	call createPartnerAndTownPortalDummy(i , Q4)
	call commonAddLumber(p , 30)
	set udg_shuxing[i]=udg_shuxing[i] + 5
	call RemoveLocation(Q4)
	call UnitAddItemByIdSwapped(1227896394, u)
	set u=null
	set p=null
endfunction
// 加入门派的itemid
function ox takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( ( GetItemTypeId(GetManipulatedItem()) == 1227894833 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894834 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894835 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894836 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894837 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894838 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894839 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894840 ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894841 ) or ( GetItemTypeId(GetManipulatedItem()) == 'I09E' ) or ( GetItemTypeId(GetManipulatedItem()) == 1227894849 ) or ( GetItemTypeId(GetManipulatedItem()) == 'I09N' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0A2' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0CK' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0CX' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0E1' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0EH' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0EO' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0AA' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0AG' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0F0' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0AD' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0ET' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0EV' ) or ( GetItemTypeId(GetManipulatedItem()) == 'I0EY' ) ) ) // INLINED!!
endfunction
function JiaRuMenPai takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( udg_runamen[i] != 0 ) ) then
		if udg_runamen[i] == 11 and GetUnitLevel(u) <= 2 and GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) >= 30 then
			// 自由改投慕容
			if GetItemTypeId(GetManipulatedItem()) == 'I09E' then
				set udg_runamen[i]=13
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓姑苏慕容〓，大家一起膜拜他|r")
				call SetPlayerName(p, "〓姑苏慕容〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				call commonAddLumber(p , - 30)
			endif
			// 自由改投铁掌帮
			if GetItemTypeId(GetManipulatedItem()) == 'I0E1' then
				if tiezhang_flag[i] == 1 then
					set gengu[i]=gengu[i] + 3
					set danpo[i]=danpo[i] + 2
					set udg_runamen[i]=19
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓铁掌帮〓，大家一起膜拜他|r")
					call SetPlayerName(p, "〓铁掌帮〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					set udg_shuxing[i]=udg_shuxing[i] - 5
					call commonAddLumber(p , - 30)
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00选择铁掌帮")
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00尚未解锁，不能选择铁掌帮")
				endif
			endif
			// 自由改投唐门
			if GetItemTypeId(GetManipulatedItem()) == 'I0EO' then
				if tangmen_flag[i] == 1 then
					set wuxing[i]=wuxing[i] + 3
					set fuyuan[i]=fuyuan[i] + 2
					set udg_runamen[i]=20
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓唐门〓，大家一起膜拜他|r")
					call SetPlayerName(p, "〓唐门〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					set udg_shuxing[i]=udg_shuxing[i] - 5
					call commonAddLumber(p , - 30)
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00选择唐门")
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00尚未解锁，不能选择唐门")
				endif
			endif
			// 自由改投五毒教
			if GetItemTypeId(GetManipulatedItem()) == 'I0AA' then
				if wudu_flag[i] == 1 then
					call addAllAttrs(i , 1)
					set udg_runamen[i]=21
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓五毒教〓，大家一起膜拜他|r")
					call SetPlayerName(p, "〓五毒教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					call UnitAddItemById(udg_hero[i], ITEM_HAN_SHA)
					set udg_shuxing[i]=udg_shuxing[i] - 5
					call commonAddLumber(p , - 30)
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00选择五毒教")
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00尚未解锁，不能选择五毒教")
				endif
			endif
			// 自由改投桃花岛
			if GetItemTypeId(GetManipulatedItem()) == 'I0ET' then
				if taohua_flag[i] == 1 then
					call addAllAttrs(i , 1)
					set udg_runamen[i]=22
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓桃花岛〓，大家一起膜拜他|r")
					call SetPlayerName(p, "〓桃花岛〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					call SaveInteger(YDHT, GetHandleId(udg_hero[i]), BI_BO_POINT, 50)
					if Player(i - 1) == GetLocalPlayer() then
						call s__Frame_show(bibo_image)
					endif
					set udg_shuxing[i]=udg_shuxing[i] - 5
					call commonAddLumber(p , - 30)
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00选择桃花岛")
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00尚未解锁，不能选择桃花岛")
				endif
			endif
			// 自由改投汝阳王府
			if GetItemTypeId(GetManipulatedItem()) == 'I0F0' then
				if ruyang_flag[i] == 1 then
					call addAllAttrs(i , 1)
					set udg_runamen[i]=25
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "改拜入了〓汝阳王府〓，大家一起膜拜他|r")
					call SetPlayerName(p, "〓汝阳王府〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					set udg_shuxing[i]=udg_shuxing[i] - 5
					call commonAddLumber(p , - 30)
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00选择汝阳王府")
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 5, "|cFF66CC00尚未解锁，不能选择汝阳王府")
				endif
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你已经加过门派了|r")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894833 ) ) then
		if ( ( GetUnitTypeId(u) != 'O002' ) and ( GetUnitTypeId(u) != 'O003' ) ) then
			set udg_runamen[i]=1
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓少林派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓少林派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=( gengu[i] + 3 )
			set jingmai[i]=( jingmai[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894834 ) ) then
		if ( ( GetUnitTypeId(u) != 'O000' ) ) then
			set udg_runamen[i]=3
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓丐帮〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓丐帮〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set danpo[i]=( danpo[i] + 3 )
			set jingmai[i]=( jingmai[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894835 ) ) then
		if ( ( GetUnitTypeId(u) != 'O002' ) ) then
			set udg_runamen[i]=4
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓华山派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓华山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set wuxing[i]=( wuxing[i] + 3 )
			set danpo[i]=( danpo[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894836 ) ) then
		if ( ( GetUnitTypeId(u) != 'O004' ) and ( GetUnitTypeId(u) != 'O003' ) ) then
			set udg_runamen[i]=5
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓全真教〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓全真教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set jingmai[i]=( jingmai[i] + 3 )
			set fuyuan[i]=( fuyuan[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
		// 明教
	elseif GetItemTypeId(GetManipulatedItem()) == 'I09N' then
		set udg_runamen[i]=14
		set wuxing[i]=( wuxing[i] + 3 )
		set jingmai[i]=( jingmai[i] + 2 )
		set fuyuan[i]=( fuyuan[i] + 2 )
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓明教〓，请在NPC郭靖处选择副职|r")
		call SetPlayerName(p, "〓明教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
		call UnitAddAbility(u, 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(u, 'A040')
			call UnitAddAbility(u, 'A041')
			call UnitAddAbility(u, 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(u, 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(u, Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, u)
		// 灵鹫
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0EH' then
		set udg_runamen[i]=12
		set danpo[i]=( danpo[i] + 2 )
		set jingmai[i]=( jingmai[i] + 2 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓灵鹫宫〓，请在NPC郭靖处选择副职|r")
		call SetPlayerName(p, "〓灵鹫宫〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
		call UnitAddAbility(u, 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(u, 'A040')
			call UnitAddAbility(u, 'A041')
			call UnitAddAbility(u, 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(u, 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(u, Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, u)
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894837 ) ) then
		if ( ( GetUnitTypeId(u) != 'O001' ) and ( GetUnitTypeId(u) != 'O002' ) ) then
			set udg_runamen[i]=6
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓血刀门〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓血刀门〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=( gengu[i] + 2 )
			set danpo[i]=( danpo[i] + 3 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894838 ) ) then
		if ( ( GetUnitTypeId(u) != 'O004' ) and ( GetUnitTypeId(u) != 'O000' ) and ( GetUnitTypeId(u) != 'O001' ) ) then
			set udg_runamen[i]=7
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓恒山派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓恒山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set yishu[i]=( yishu[i] + 3 )
			set fuyuan[i]=( fuyuan[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894839 ) ) then
		if ( ( GetUnitTypeId(u) != 'O004' ) ) then
			set udg_runamen[i]=8
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓峨眉派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓峨眉派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set yishu[i]=( yishu[i] + 1 )
			set jingmai[i]=( jingmai[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 3 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894840 ) ) then
		if ( ( GetUnitTypeId(u) != 'O001' ) ) then
			set udg_runamen[i]=$A
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓星宿派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓星宿派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			set Q4=GetRandomLocInRect(He)
			call UnitRemoveAbility(u, 'Avul')
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set danpo[i]=( danpo[i] + 2 )
			set yishu[i]=( yishu[i] + 1 )
			set jingmai[i]=( jingmai[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894841 ) ) then
		if ( ( GetUnitTypeId(u) != 'O003' ) ) then
			set udg_runamen[i]=9
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓武当派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓武当派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call UnitRemoveAbility(u, 'Avul')
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=( gengu[i] + 1 )
			set jingmai[i]=( jingmai[i] + 2 )
			set fuyuan[i]=( fuyuan[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 1227894849 ) ) then
		if ( ( GetUnitTypeId(u) != 'O000' ) ) then
			set udg_runamen[i]=2
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓古墓派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓古墓派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set wuxing[i]=( wuxing[i] + 2 )
			set jingmai[i]=( jingmai[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0A2' ) ) then
		if ( ( GetUnitTypeId(u) != 'O002' ) and ( GetUnitTypeId(u) != 'O003' ) ) then
			set udg_runamen[i]=15
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓衡山派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓衡山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set wuxing[i]=( wuxing[i] + 3 )
			set yishu[i]=( yishu[i] + 2 )
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0CK' ) ) then
		if ( GetUnitTypeId(u) == 'O000' or GetUnitTypeId(u) == 'O001' or GetUnitTypeId(u) == 'O004' or GetUnitTypeId(u) == 'O02J' or GetUnitTypeId(u) == 'O031' ) then
			set udg_runamen[i]=16
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓神龙教〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓神龙教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=gengu[i] + 2
			set fuyuan[i]=fuyuan[i] + 2
			set danpo[i]=danpo[i] + 1
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			set udg_runamen[i]=17
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓神龙教〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓神龙教〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=gengu[i] + 2
			set fuyuan[i]=fuyuan[i] + 2
			set danpo[i]=danpo[i] + 1
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0CX' ) ) then
		if ( GetUnitTypeId(u) != 'O003' ) then
			set udg_runamen[i]=18
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓泰山派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓泰山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set gengu[i]=gengu[i] + 3
			set wuxing[i]=wuxing[i] + 1
			set yishu[i]=yishu[i] + 1
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000你的角色不能加入该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0EV' ) ) then
		if not udg_fpgz then
			set udg_runamen[i]=23
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓野螺派〓，请在NPC郭靖处选择副职|r")
			call SetPlayerName(p, "〓野螺派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			call UnitAddAbility(u, 'A05R')
			call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
			call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
			if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
				call UnitAddAbility(u, 'A040')
				call UnitAddAbility(u, 'A041')
				call UnitAddAbility(u, 'A042')
			endif
			set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
			call UnitRemoveAbility(u, 'Avul')
			set Q4=GetRandomLocInRect(He)
			call SetUnitPositionLoc(u, Q4)
			call PanCameraToTimedLocForPlayer(p, Q4, 0)
			call createPartnerAndTownPortalDummy(i , Q4)
			set danpo[i]=danpo[i] + 5
			call RemoveLocation(Q4)
			call UnitAddItemByIdSwapped(1227896394, u)
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff0000返璞归真模式不能手动选择该门派")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0EY' ) ) then
		set udg_runamen[i]=24
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓雪山派〓，请在NPC郭靖处选择副职|r")
		call SetPlayerName(p, "〓雪山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
		call UnitAddAbility(u, 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(u, 'A040')
			call UnitAddAbility(u, 'A041')
			call UnitAddAbility(u, 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(u, 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(u, Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		call addAllAttrs(i , 1)
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, u)
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0AD' ) ) then
		set udg_runamen[i]=26
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933恭喜加入〓嵩山派〓，请在NPC郭靖处选择副职|r")
		call SetPlayerName(p, "〓嵩山派〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
		call UnitAddAbility(u, 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(u, 'A040')
			call UnitAddAbility(u, 'A041')
			call UnitAddAbility(u, 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(u, 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(u, Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		set danpo[i]=danpo[i] + 3
		set jingmai[i]=jingmai[i] + 3
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, u)
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0AG' ) ) then
		call randomMenpai(p , 1)
	endif
	set p=null
	set u=null
endfunction

// 设置游戏难度和经验获得率的函数
function setDifficultyAndExpRate takes integer difficulty returns nothing
	set udg_nandu=difficulty
	if difficulty > 6 then
		set difficulty=6
	endif
	call SetPlayerHandicapXPBJ(Player(0), 200.00 - 20.00 * difficulty)
	call SetPlayerHandicapXPBJ(Player(1), 200.00 - 20.00 * difficulty)
	call SetPlayerHandicapXPBJ(Player(2), 200.00 - 20.00 * difficulty)
	call SetPlayerHandicapXPBJ(Player(3), 200.00 - 20.00 * difficulty)
	call SetPlayerHandicapXPBJ(Player(4), 200.00 - 20.00 * difficulty)
endfunction
//主机选择模式
function Trig_____________u_Func002C takes nothing returns boolean
	return ( GetPlayerController(Player(0)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING )
endfunction
// 限定时间不选难度，自动选
function ChooseMoshi_Auto takes nothing returns nothing
 local timer t= GetExpiredTimer()
	if moshiFlag == false then
		call DialogDisplayBJ(false, udg_index, Player(0))
		set udg_teshushijian=true
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机默认选择了|cff00FFFF正常|r模式")
	endif
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
function ChooseMoShi takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF40主机开始选择游戏模式")
	if ( (( GetPlayerController(Player(0)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING )) ) then // INLINED!!
		call DialogClear(udg_index)
		call DialogSetMessage(udg_index, "请选择游戏模式，20秒时间")
		set udg_index1=DialogAddButtonBJ(udg_index, "|cFFCC0066正常模式")
		set udg_index3=DialogAddButtonBJ(udg_index, "|cFF6600FF挑战模式（3倍积分）")
		set udg_index4=DialogAddButtonBJ(udg_index, "|cff91e226返璞归真（6倍积分）")
		set udg_index2=DialogAddButtonBJ(udg_index, "|cFFCC7766养老模式（30倍伤害，无积分）")
		call DialogDisplayBJ(true, udg_index, Player(0))
		// 开启计时器，20s不选模式默认选择特殊模式
		call TimerStart(CreateTimer(), 20, false, function ChooseMoshi_Auto)
	endif
endfunction

// 时间到了，默认挑战模式
function TiaoZhanMoshi_Auto takes nothing returns nothing
 local timer t= GetExpiredTimer()
	if tiaoZhanFlag == false then
		call DialogDisplayBJ(false, udg_tiaoZhan, Player(0))
		set udg_teshushijian=true
		set udg_sutong=true
		set tiaoZhanIndex=1
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机默认选择了|cff00FFFF快速通关模式")
	endif
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
// 挑战模式二级弹窗
function TiaoZhanMoshi takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF40主机开始选择游戏模式")
	if ( (( GetPlayerController(Player(0)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING )) ) then // INLINED!!
		call DialogClear(udg_tiaoZhan)
		call DialogSetMessage(udg_tiaoZhan, "请选择一个挑战模式，20秒时间")
		set udg_tiaoZhan0=DialogAddButtonBJ(udg_tiaoZhan, "|cFF00CC00快速通关")
		set udg_tiaoZhan1=DialogAddButtonBJ(udg_tiaoZhan, "|cFFCC0066无技能书商店")
		set udg_tiaoZhan2=DialogAddButtonBJ(udg_tiaoZhan, "|cFF0066CC无尽BOSS战")
		set udg_tiaoZhan4=DialogAddButtonBJ(udg_tiaoZhan, "|cFF6600CC无书速通")
		call DialogDisplayBJ(true, udg_tiaoZhan, Player(0))
		// 开启计时器，20s不选模式默认选择特殊模式
		call TimerStart(CreateTimer(), 20, false, function TiaoZhanMoshi_Auto)
	endif
endfunction
// 挑战模式点击选择模式的动作
function TiaoZhanMoshi_Action takes nothing returns nothing
 local integer i= 0
	if GetClickedButton() == udg_tiaoZhan0 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机选择了|cFF00CC00快速通关|r模式")
		set udg_teshushijian=true
		set udg_sutong=true
		set tiaoZhanIndex=1
	endif
	if GetClickedButton() == udg_tiaoZhan1 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机选择了|cFFCC0066无技能书商店|r模式")
		set udg_teshushijian=true
		set udg_sutong=false
		set tiaoZhanIndex=2
		// 移除技能书商店
		loop
			exitwhen i > 3
			call RemoveUnit(udg_sellSkillBook[i])
			set i=i + 1
		endloop
	endif
	if GetClickedButton() == udg_tiaoZhan2 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机选择了|cFF0066CC无尽BOSS战|r模式")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "无尽BOSS战模式下玩家可以到名门挑战NPC处进行无尽BOSS挑战，如果不主动发起挑战，将在开局1小时自动开始")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "无尽BOSS战模式下开局5分钟后游戏难度自动调整为最高难度")
		set udg_teshushijian=true
		set udg_sutong=false
		set tiaoZhanIndex=3
		set ShiFouShuaGuai=false // 无尽BOSS战模式不刷怪
endif
	if GetClickedButton() == udg_tiaoZhan4 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "主机选择了|cFF6600CC无书速通|r模式")
		set udg_teshushijian=true
		set udg_sutong=true
		set tiaoZhanIndex=4
		// 移除技能书商店
		loop
			exitwhen i > 3
			call RemoveUnit(udg_sellSkillBook[i])
			set i=i + 1
		endloop
	endif
	// 已选挑战模式
	set tiaoZhanFlag=true
endfunction
//  =====================挑战模式结束========================================
function ChooseMoShi_Action takes nothing returns nothing
 local integer i= 1
	if GetClickedButton() == udg_index1 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了正常模式")
		set udg_teshushijian=true
	endif
	if GetClickedButton() == udg_index2 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了养老模式")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF养老模式下，伤害为其他模式下的30倍，通关和打伤害均不给积分")
		set udg_teshushijian=true
		set udg_yanglao=true
	endif
	if GetClickedButton() == udg_index3 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了挑战模式")
		call TiaoZhanMoshi()
	endif
	if GetClickedButton() == udg_index4 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了返璞归真-挑战模式")
		set udg_fpgz=true
		loop
			exitwhen i > 5
			// set special_attack[i] = 25
			set i=i + 1
		endloop
		call TiaoZhanMoshi()
		// 移除等级奖励
		call RemoveUnit(gg_unit_N00F_0085)
	endif
	// 已选难度
	set moshiFlag=true
endfunction
// 超时默认难度选择难1
function ChooseNanDu_Auto takes nothing returns nothing
 local timer t= GetExpiredTimer()
	if nanduFlag == 0 then
		call DialogDisplayBJ(false, udg_nan, Player(0))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF默认选择了难度|cFF999900小试牛刀")
		call SetPlayerTechResearched(Player(12), 'R001', 0)
		call SetPlayerTechResearched(Player(6), 'R001', 0)
		call SetPlayerTechResearched(Player(15), 'R001', 0)
		call setDifficultyAndExpRate(0)
		set get_zdl=5
	endif
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
function ChooseNanDu takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF40主机开始选择游戏难度")
	if ( (( GetPlayerController(Player(0)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING )) ) then // INLINED!!
		call DialogClear(udg_nan)
		call DialogSetMessage(udg_nan, "请选择游戏难度")
		set udg_nan0=DialogAddButtonBJ(udg_nan, "|cFF00CC00小试牛刀")
		set udg_nan2=DialogAddButtonBJ(udg_nan, "|cFFFF6600登堂入室")
		set udg_nan7=DialogAddButtonBJ(udg_nan, "|cFF999900决战江湖")
		set udg_nan8=DialogAddButtonBJ(udg_nan, "|cffa12abe问鼎天下")
		call DialogDisplayBJ(true, udg_nan, Player(0))
		// 开启计时器，20s不选难度默认选择难1
		call TimerStart(CreateTimer(), 20, false, function ChooseNanDu_Auto)
	endif
endfunction
function ChooseNanDu_Action takes nothing returns nothing
	if GetClickedButton() == udg_nan0 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFF00CC00小试牛刀")
		call SetPlayerTechResearched(Player(12), 'R001', 0)
		call SetPlayerTechResearched(Player(6), 'R001', 0)
		call SetPlayerTechResearched(Player(15), 'R001', 0)
		call setDifficultyAndExpRate(0)
		set get_zdl=5
	endif
	if GetClickedButton() == udg_nan2 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFFFF6600登堂入室")
		call SetPlayerTechResearched(Player(12), 'R001', 2)
		call SetPlayerTechResearched(Player(6), 'R001', 2)
		call SetPlayerTechResearched(Player(15), 'R001', 2)
		call setDifficultyAndExpRate(2)
		set get_zdl=10
	endif
	if GetClickedButton() == udg_nan7 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFF999900决战江湖")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF999900该模式下进攻怪具有|cFFFF0000抽血术加强版")
		call SetPlayerTechResearched(Player(12), 'R001', 5)
		call SetPlayerTechResearched(Player(6), 'R001', 5)
		call SetPlayerTechResearched(Player(15), 'R001', 5)
		call setDifficultyAndExpRate(6)
		set get_zdl=15
		set topDegreeFlag=true
	endif
	if GetClickedButton() == udg_nan8 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cffa12abe问鼎天下")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cffa12abe该模式下进攻怪具有|cFFFF0000抽血术加强版")
		call SetPlayerTechResearched(Player(12), 'R001', 7)
		call SetPlayerTechResearched(Player(6), 'R001', 7)
		call SetPlayerTechResearched(Player(15), 'R001', 7)
		call setDifficultyAndExpRate(8)
		set get_zdl=20
		set topDegreeFlag=true
	endif
	if udg_boshu < 5 then
		set nanduFlag=1
	else
		set nanduFlag=2
	endif
endfunction

//系统窗口
function SystemWindow takes nothing returns nothing
 local integer i= 0
 local string s= null
	call CreateMultiboardBJ(5, 20, "系统窗口")
	call MultiboardSetItemsStyle(bj_lastCreatedMultiboard, true, false)
	call MultiboardSetItemsWidth(bj_lastCreatedMultiboard, .07)
	set i=1
	loop
		exitwhen i >= 6
		if udg_MaxDamage[i] < 10000. then
			set s=R2S(udg_MaxDamage[i])
		elseif udg_MaxDamage[i] < 100000000. then
			set s=R2S(udg_MaxDamage[i]) + "万"
		elseif udg_MaxDamage[i] / 10000. < 100000000. then
			set s=R2S(udg_MaxDamage[i]) + "亿"
		elseif udg_MaxDamage[i] / 100000000. < 100000000. then
			set s=R2S(udg_MaxDamage[i]) + "万亿"
		else
			set s=R2S(udg_MaxDamage[i]) + "亿亿"
		endif
		call MultiboardSetTitleText(bj_lastCreatedMultiboard, "|cFFFFCC33系统窗口")
		call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 3 , "|c00FF0080" + GetPlayerName(Player(i - 1)))
		call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 3 , "|c0000FF00" + "等级：" + I2S(GetUnitLevel(udg_hero[i])))
		call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 3 , "|cFF00CCFF" + udg_menpainame[udg_runamen[i]])
		call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 3 , "|cFFFF6600" + "最高伤害：" + s)
		set s="|c00FFEE99"
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			set s=s + "丹"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			set s=s + "锻"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			set s=s + "兵"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			set s=s + "鉴"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_QI) - 1)])) != 0) then // INLINED!!
			set s=s + "气"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) then // INLINED!!
			set s=s + "宝"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
			set s=s + "丫"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			set s=s + "武"
		endif
		call DuoMianBan(bj_lastCreatedMultiboard , 5 , 4 * i - 3 , s)
		if ( I7[20 * ( i - 1 ) + 1] != 'AEfk' ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 1]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 2] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 2]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 3] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 3]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 4] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 4]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 5] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 5]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 6] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 6]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 7] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 7]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 8] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 8]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 9] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 9]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 10] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 10]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 11] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 11]))
		endif
		set i=i + 1
	endloop
	call MultiboardDisplay(bj_lastCreatedMultiboard, true)
endfunction
function uuyy takes nothing returns nothing
 local integer i= 0
 local string s= null
 local string title= ""
	set i=1
	loop
		exitwhen i >= 6
		if udg_MaxDamage[i] < 10000. then
			set s=I2S(R2I(udg_MaxDamage[i] / 1.))
		elseif udg_MaxDamage[i] < 100000000. then
			set s=I2S(R2I(udg_MaxDamage[i] / 10000.)) + "万"
		elseif udg_MaxDamage[i] / 10000. < 100000000. then
			set s=I2S(R2I(udg_MaxDamage[i] / 100000000.)) + "亿"
		elseif udg_MaxDamage[i] / 100000000. < 100000000. then
			set s=I2S(R2I(udg_MaxDamage[i] / 1000000000000.)) + "万亿"
		else
			set s=I2S(R2I(udg_MaxDamage[i] / 10000000000000000.)) + "亿亿"
		endif
		if tiaoZhanIndex == 3 then
			set title="|cFFFFCC33系统窗口|r 无尽BOSS倒计时：" + I2S(next_endless_time - passed_time)
		else
			set title="|cFFFFCC33系统窗口|r"
		endif
		call MultiboardSetTitleText(bj_lastCreatedMultiboard, title)
		call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 3 , "|c00FF0080" + GetPlayerName(Player(i - 1)))
		call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 3 , "|c0000FF00" + "等级：" + I2S(GetUnitLevel(udg_hero[i])))
		call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 3 , "|cFF00CCFF" + udg_menpainame[udg_runamen[i]])
		call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 3 , "|cFFFF6600" + "最高伤害：" + s)
		set s="|c00FFEE99"
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			set s=s + "丹"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			set s=s + "锻"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			set s=s + "兵"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			set s=s + "鉴"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_QI) - 1)])) != 0) then // INLINED!!
			set s=s + "气"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) then // INLINED!!
			set s=s + "宝"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
			set s=s + "丫"
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			set s=s + "武"
		endif
		call DuoMianBan(bj_lastCreatedMultiboard , 5 , 4 * i - 3 , s)
		if ( I7[20 * ( i - 1 ) + 1] != 'AEfk' ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 1]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 2] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 2]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 3] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 3]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 4] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 2 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 4]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 5] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 5]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 6] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 6]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 7] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 7]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 8] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 4 , 4 * i - 1 , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 8]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 9] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 1 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 9]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 10] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 2 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 10]))
		endif
		if ( ( I7[20 * ( i - 1 ) + 11] != 'AEfk' ) ) then
			call DuoMianBan(bj_lastCreatedMultiboard , 3 , 4 * i , "|c0000FF00" + GetObjectName(I7[20 * ( i - 1 ) + 11]))
		endif
		set i=i + 1
	endloop
endfunction
//最大伤害
function wy takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) != MAP_CONTROL_USER ) and ( GetEventDamage() > udg_MaxDamage[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )] ) )
endfunction
function SetMaxDamage takes nothing returns nothing
	set udg_MaxDamage[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]=GetEventDamage()
endfunction
//玩家离开
function Xx takes nothing returns nothing
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=6
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitRemoveItemSwapped(UnitItemInSlotBJ(GetEnumUnit(), bj_forLoopBIndex), GetEnumUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
	call RemoveUnit(GetEnumUnit())
endfunction
function PlayerLeave takes nothing returns nothing
	call ForGroupBJ(( AddPlayerUnitIntoGroup(( GetTriggerPlayer() ) , null) ), function Xx)
	call yv(bj_lastCreatedMultiboard , 4 , ( ( 1 + GetPlayerId(GetTriggerPlayer()) ) + 2 ) , 100. , 20. , 100. , 0)
	call DuoMianBan(bj_lastCreatedMultiboard , 5 , ( ( 1 + GetPlayerId(GetTriggerPlayer()) ) * 4 - 2 ) , "离开")
endfunction
//F9显示
function Qx takes nothing returns nothing
	// call CreateQuestBJ(0,"|cFFFF00001.53版本更新内容","|cff00ff00新增元素|n|r|cffffff00开放新门派|r：泰山派|n|cffffff00装备调整|r：七绝护符、天璇护腕、神行鞋和神迹戒变更为神器|n|cff00ff00平衡性调整|n|r|cffffff00门派调整|r：全面平衡各门派伤害和升重速度|n|cffffff00删除了救火任务和青龙团队副本。|n积分兑换金钱和珍稀币随难度不同而不同。|n历练3的声望要求降至3200，十恶不赦基础血量降至30000。|n杀矮子王爆江湖忠，杀南海神尼爆九阴锻骨篇。|n大量游戏细节优化调整。|r|cff00ff00|nBUG修复|n|r|cffffff00修复部分装备不能正确加攻速和移速的BUG。|n修复部分武功属性要求显示不正确的BUG。|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	// call CreateQuestBJ(0,"|cFFFF00001.54版本更新内容","|cff00ff00平衡性调整|n|r|cffffff00降低天柱云气触发概率。|n略微提升泰山十八盘的升重速度和触发概率。|n降低号令天下令的声望加成。|n缩小独孤九剑范围、减少时间、提升伤害。|n泰山派岱宗如何触发概率由100%改为15%。|n略微提高神行鞋爆率。|n其他细节优化。|r|cff00ff00|nBUG修复|n|r|cffffff00修复泰山十八盘+小无相无效的BUG。|n修正剑意和新手帮助的描述错误。|n修复神行鞋无CD的BUG。|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFFFF0000人物属性", "招式伤害：影响人物的所有武功的威力，中后期影响较大\n内力：加成武功伤害百分比，中后期影响较大\n真实伤害：造成不受内力影响的实际伤害，前期影响较大\n绝学领悟力：影响绝学的发挥效果和威力\n根骨：影响任务和武功学习条件，同时提高技能暴击力\n悟性：影响任务和武功学习条件，同时决定技能升级的概率\n经脉：影响任务和武功学习条件，同时提高法力回复速度\n福缘：影响任务和武功学习条件，同时提高被动武学触发概率\n胆魄：影响任务和武功学习条件，同时提高杀怪回复能力\n医术：影响任务和武功学习条件，同时提高自然生命回复速度", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFFFF6600人物武功", "门派武功：加入门派后每个英雄都会有3个武功，第一个武功在3级获得，其他武功在前一个武功2重后英雄升级时自动领悟\n门派心法：每个门派都有两种心法，可以在完成历练2后二选其一修习，需要第3个门派武功达到3级\n江湖武功：分为武功和心法两大类，需要通过使用武功秘籍获得\n绝学和绝内：后期厉害的大招，也需要通过使用武功秘籍获得\n绝阵：开放部分门派绝阵，请到聚贤庄寻找", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFF00FF00游戏指令1", "输入“hg/hc”：|cFFCCFF33回程|r\n输入“q”：|cFFCCFF33传送到基地上方|r\n输入“3”：|cFFCCFF33传送到基地下方|r\n输入“4”：|cFFCCFF33传送到监狱|r\n输入“1”：|cFFCCFF33定点（学乾坤大挪移）|r\n输入“2”：|cFFCCFF33传送到乾坤定点地方|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFF00FF00游戏指令2", "按键Esc：|cFFCCFF33查看人物属性|r\n输入“sj”：|cFFCCFF33恢复视角|r\n输入“bl”：|cFFCCFF33查看伴侣属性|r\n输入“jy”：|cFFCCFF33将剑意转化为性格属性|r\n输入“up”：|cFFCCFF33非特殊事件模式下提高难度（只能提不能降）|r\n输入“fb”：|cFFCCFF33查询副本重置时间|r\n输入“yx”：|cFFCCFF33查询宝宝携带草药的总药性|r\n游戏开始2分钟内输入“sw”：|cFFCCFF33试玩模式|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFF0000FF游戏指令3", "输入“cksx”：|cFFCCFF33查看剩余自由属性点数|r\n输入属性拼音首字母如“gg”：|cFFCCFF33根骨+1|r\n输入属性拼音首字母加数值如“fy5”：|cFFCCFF33福缘+5|r\n输入“ckwq”：|cFFCCFF33查询自制武器属性|r\n输入“ckwg”：|cFFCCFF33查询自创武功|r\n输入“ckjn”：|cFFCCFF33查询人物性格和技能升重进度|r\n输入“ck”：|cFFCCFF33查询技能伤害|r\n输入“ckjf”：|cFFCCFF33查询守家积分|r\n输入“ckch”：|cFFCCFF33查询已获得称号|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(0, "|cFF0000FF游戏指令4", "输入“cx”：|cFFCCFF33查看存档|r\n输入“ckzs”：|cFFCCFF33查看专属获取方式及效果|r\n输入“-clear或-clean”：|cFFCCFF33清理地图物品（不包括技能书）|r\n输入“sort”：|cFFCCFF33自动整理地图物品|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(2, "|cFFFF00CC称号系统", "在游戏中，可以获得两种称号：门派称号和副职称号\n门派称号：如果你的所有门派武学和门派内功均达到6级（部分武功可能低于6级），可以获得各门派的掌门称号；在获得掌门之前达成一定的条件，获得掌门称号时还可以获得额外的门派称号，具体门派称号的获得方法可以参考论坛的攻略。\n副职称号：游戏中的副职达到一定条件时，可以分别获得相应的副职大师称号，增加与该副职相关的额外能力，具体副职大师称号的获得方法可以参考论坛的攻略", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	//call CreateQuestBJ(2,"|cFFFFFF00武器系统","在游戏中，每一把武器都有自己的耐久度，每击杀一个单位耐久度减1，耐久度为0后武器破损消失\n如果副职选择兵器师，则武器不减少耐久度。\n每个玩家对每一种武器有一定的熟练度，每击杀一个单位增加一定熟练度，不同武器熟练度上限不同，熟练度上升武功的伤害将随之上升\n副职选择兵器师大幅提升武器的熟练度上限\n对某种武器极不熟练时伤害要低于不拿武器时的伤害","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(2, "|cFFFF0000副职玩法", "玩家可在NPC郭靖处选择自己的副职，加入副职后会获得一些独特的能力\n副职满足一定条件后，可以获得相应的大师称号，获得大师后会额外获得一些能力\n炼丹师：可使用炼丹系统并可多服食五颗丹药\n锻造师：可使用镶嵌和锻造系统\n兵器师：镇妖死亡不掉落，拾取和冶炼兵器不受历练限制\n练气师：每提升一次等级增加4-12点招式伤害或内力或真实伤害\n寻宝师：副本双倍掉落\n鉴定师：爆双倍古董，可以使用古董换书，古董以最高价卖出\n丫鬟：携带两把武器及两件衣服\n精武师：技能升级到九重获得额外自创武学点，可以打出奇武\n更多大师获得方式和作用请到NPC随风而逝de风处查看", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(2, "|cFFFF6600称号系统", "玩家4个门派武功全部达到6级可获得掌门称号（部分武功例外）\n达到一定条件，可同时获得其他称号\n有一些称号与掌门无关，具体可参考基地右边新手教官\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(2, "|cFF00FF00隐藏门派", "游戏中有两个隐藏门派：姑苏慕容和灵鹫宫\n隐藏门派的选择方式:自由3级前基地左下角积分兑换加入灵鹫宫，慕容世家选人后输入jzjh.uuu9.com或3级前去找慕容复\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	call CreateQuestBJ(2, "|cFF0000FF游戏网站", "专区论坛：|cFFCCFF33jzjhbbs.uuu9.com|r\n游戏作者：|cFFCCFF33云杨 Zei_kale|r\n游戏QQ群：|cFFCCFF33159030768, 369925013\n\n关注武侠，支持作者，详情请在网站和论坛查询", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
endfunction

function hy takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'nbds'
endfunction
//是否达到胜利条件
function IsVictory takes nothing returns nothing
	if ( ( de == false ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3) <= 10. ) ) then
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3, 100.)
		else
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3) - 10. ))
		endif
		if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2) <= 10. ) ) then
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2, 100.)
		else
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2) - 10. ))
		endif
		if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E) <= .1 ) ) then
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E, 100.)
		else
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E) - 10. ))
		endif
		if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A) <= .0 ) ) then
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A, 70.)
		else
			call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A) - 10. ))
		endif
		call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06, 1)
		if ( ( udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)] != null ) ) then
			call DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)])
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]))
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , 150. , 110.))
			call CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060), 100., 11., LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060))
			set ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]=bj_lastCreatedTextTag
		endif
		call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06) + 1 ))
		if ( ( udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)] != null ) ) then
			call DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)])
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]))
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , 150. , 110.))
			call CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060), 100., 11., LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060))
			set ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]=bj_lastCreatedTextTag
		endif
		call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06) + 1 ))
		if ( ( udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)] != null ) ) then
			call DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)])
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]))
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , 150. , 110.))
			call CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060), 100., 11., LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060))
			set ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]=bj_lastCreatedTextTag
		endif
		call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06) + 1 ))
		if ( ( udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)] != null ) ) then
			call DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)])
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]))
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , 150. , 110.))
			call CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060), 100., 11., LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060))
			set ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]=bj_lastCreatedTextTag
		endif
		call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06) + 1 ))
		if ( ( udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)] != null ) ) then
			call DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)])
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]))
			call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , 150. , 110.))
			call CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060), 100., 11., LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5E9EB4B3), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $63F0AAA2), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $5CF6751E), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $6329FB8A))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
			call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $72C3E060))
			set ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $566CDF06)]=bj_lastCreatedTextTag
		endif
	endif
endfunction
//失败动作
function Lose takes nothing returns nothing
 local integer i= 0
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF00B2决战江湖" + VERSION + "的游戏总评分：" + ( I2S(ae) + "分（战败）" ) ))
	set i=1
	loop
		exitwhen i >= 6
		set udg_MeiJuJiFen[i]=udg_MeiJuJiFen[i] + ae / 100
		call YDWE_PreloadSL_Set(Player(i - 1) , "总积分" , 1 , udg_MeiJuJiFen[i])
		call YDWE_PreloadSL_Save(Player(i - 1) , "JueZhan" , "JiangHu" + I2S(i) , 1)
		set i=i + 1
	endloop
	call CustomDefeatBJ(Player(0), "没有能守护住正派武林!")
	call CustomDefeatBJ(Player(1), "没有能守护住正派武林!")
	call CustomDefeatBJ(Player(2), "没有能守护住正派武林!")
	call CustomDefeatBJ(Player(3), "没有能守护住正派武林!")
	call CustomDefeatBJ(Player(4), "没有能守护住正派武林!")
endfunction
// 无尽模式失败
function endlessFail takes nothing returns nothing
 local timer t= endless_timer
 local integer count= LoadInteger(YDHT, GetHandleId(t), 0)
 local timerdialog l__tg= LoadTimerDialogHandle(YDHT, GetHandleId(t), 1)
	// 如果5分钟挑战成功次数仍不变，视为挑战失败
	if count == endless_count then
		call Lose()
	endif
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	call DestroyTimerDialog(l__tg)
	set t=null
	set l__tg=null
endfunction
//胜利动作
function Victory takes nothing returns nothing
 local timer ky
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
 local integer i= 0
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	if udg_yanglao then
		set i=1
		loop
			exitwhen i >= 6
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00养老模式下无积分")
			set i=i + 1
		endloop
	else
		// 速通模式3倍积分
		if tiaoZhanIndex == 1 then
			set get_zdl=get_zdl * 3
		endif
		// 无技能商店3倍积分
		if tiaoZhanIndex == 2 then
			set get_zdl=get_zdl * 3
		endif
		if tiaoZhanIndex == 3 then
			set get_zdl=5
			set endless_count=endless_count + 1
			call endlessFail()
		endif
		// 无书速通模式5倍积分
		if tiaoZhanIndex == 4 then
			set get_zdl=get_zdl * 5
		endif
		// 返璞归真模式额外2倍积分
		if udg_fpgz then
			set get_zdl=get_zdl * 2
		endif
		// 全局存档，积分倍数
		if S2I(jfBeishu) >= 1 then
			set get_zdl=get_zdl * S2I(jfBeishu)
		endif
		set get_zdl=get_zdl * ( 1 + activityPointAddition )
		set damage_jf=damage_jf * ( 1 + activityPointAddition )
		set i=1
		loop
			exitwhen i >= 6
			if saveFlag[i - 1] == false then
				if mall_addition[i] == 0 then
					call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00获得战斗力和积分：" + I2S(( get_zdl + damage_jf ) * extraDoubleJf[i - 1]))
				else
					call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00开启了双倍积分，获得战斗力和积分：" + I2S(( get_zdl + damage_jf ) * ( 1 + mall_addition[i] ) * extraDoubleJf[i - 1]))
				endif
				// 计算战斗力和积分
				set udg_zdl[i - 1]=udg_zdl[i - 1] + ( get_zdl + damage_jf ) * ( 1 + mall_addition[i] ) * extraDoubleJf[i - 1]
				set udg_jf[i - 1]=udg_jf[i - 1] + ( get_zdl + damage_jf ) * ( 1 + mall_addition[i] ) * extraDoubleJf[i - 1]
				if tiaoZhanIndex != 3 then
					set udg_success[i - 1]=udg_success[i - 1] + 1
				endif
				// 保存战斗力、积分、通关次数到服务器
				call DzAPI_Map_StoreInteger(Player(i - 1) , "zdl" , udg_zdl[i - 1])
				call DzAPI_Map_StoreInteger(Player(i - 1) , "jf" , udg_jf[i - 1])
				call DzAPI_Map_StoreInteger(Player(i - 1) , "success" , udg_success[i - 1])
				// 保存通关门派存档，速通且难7，去除3个vip门派
				if ( tiaoZhanIndex == 1 or tiaoZhanIndex == 4 ) and topDegreeFlag then
					// 初始化存档
					if singleSuccess[i - 1] == "" then
						set singleSuccess[i - 1]=initMpSaveStr
					endif
					// 如果字符串长度<门派总数，后面补0
					loop
						exitwhen StringLength(singleSuccess[i - 1]) >= DENOMINATION_NUMBER
						set singleSuccess[i - 1]=singleSuccess[i - 1] + "0"
					endloop
					if manySuccess[i - 1] == "" then
						set manySuccess[i - 1]=initMpSaveStr
					endif
					loop
						exitwhen StringLength(manySuccess[i - 1]) >= DENOMINATION_NUMBER
						set manySuccess[i - 1]=manySuccess[i - 1] + "0"
					endloop
					// 单通
					if udg_wanjiashu == 1 then
						set singleSuccess[i - 1]=SubString(singleSuccess[i - 1], 0, udg_runamen[i] - 1) + "1" + SubString(singleSuccess[i - 1], udg_runamen[i], DENOMINATION_NUMBER)
						call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00本局单通门派：" + udg_menpainame[udg_runamen[i]])
						call DzAPI_Map_StoreString(Player(i - 1) , "singleSuccess" , singleSuccess[i - 1])
					endif
					// 多通（单通也算多通）
					if udg_wanjiashu >= 1 then
						set manySuccess[i - 1]=SubString(manySuccess[i - 1], 0, udg_runamen[i] - 1) + "1" + SubString(manySuccess[i - 1], udg_runamen[i], DENOMINATION_NUMBER)
						call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00本局多通门派：" + udg_menpainame[udg_runamen[i]])
						call DzAPI_Map_StoreString(Player(i - 1) , "manySuccess" , manySuccess[i - 1])
					endif
				endif
				if tiaoZhanIndex == 3 then
					call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFF99CC00当前击败无尽BOSS数：" + I2S(endless_count))
					if endless_count > decryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( "endless"))) , Player(i - 1)) then // INLINED!!
						call DzAPI_Map_StoreString(Player(i - 1) , "endless" , encryptInt(endless_count , Player(i - 1)))
					endif
				endif
				if tiaoZhanIndex != 3 then
					// 保存到房间需要判断是否读取成功，怕炸档覆盖
					if GetPlayerServerValueSuccess(Player(i - 1)) then
						// 保存到房间
						call DzAPI_Map_Stat_SetStat(Player(i - 1), "zdl", I2S(udg_zdl[i - 1]))
						call DzAPI_Map_Stat_SetStat(Player(i - 1), "jf", I2S(udg_jf[i - 1]))
						call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFE890D" + GetPlayerName(Player(i - 1)) + "|CFF99CC00数据保存成功")
						set saveFlag[i - 1]=true // 已保存，再杀大屁股不保存
else
						call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFE890D" + GetPlayerName(Player(i - 1)) + "|CFFFF0303数据保存失败")
					endif
				endif
			endif
			set i=i + 1
		endloop
	endif
	if tiaoZhanIndex != 3 then
		// 获胜标识
		set is_victory=true
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF00B2决战江湖" + VERSION + "的游戏总评分：" + ( I2S(ae) + "分（通关）" ) ))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2恭喜你们通关，游戏将在2分钟后结束\n游戏专区论坛：jzjhbbs.uuu9.com\n游戏交流QQ群：159030768  369925013  341305274\n关注武侠，让决战江湖走得更远，期待你的参与，详情请在专区论坛查询")
		set de=true
		call SaveReal(YDHT, id * cx, - $5E9EB4B3, 40.)
		call SaveReal(YDHT, id * cx, - $63F0AAA2, 70.)
		call SaveReal(YDHT, id * cx, - $5CF6751E, 100.)
		call SaveReal(YDHT, id * cx, - $6329FB8A, 70.)
		set ky=CreateTimer()
		call SaveReal(YDHT, GetHandleId(ky), - $5E9EB4B3, LoadReal(YDHT, id * cx, - $5E9EB4B3))
		call SaveReal(YDHT, GetHandleId(ky), - $63F0AAA2, LoadReal(YDHT, id * cx, - $63F0AAA2))
		call SaveReal(YDHT, GetHandleId(ky), - $5CF6751E, LoadReal(YDHT, id * cx, - $5CF6751E))
		call SaveReal(YDHT, GetHandleId(ky), - $6329FB8A, LoadReal(YDHT, id * cx, - $6329FB8A))
		call TimerStart(ky, .04, true, function IsVictory)
		call YDWEPolledWaitNull(60.)
		call SaveInteger(YDHT, id, - $1317DA19, cx)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF00B2决战江湖" + VERSION + "的游戏总评分：" + ( I2S(ae) + "分（通关）" ) ))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2恭喜你们通关，游戏将在1分钟后结束\n游戏专区论坛：jzjhbbs.uuu9.com\n游戏交流QQ群：159030768  369925013  341305274 \n关注武侠，让决战江湖走得更远，期待你的参与，详情请在专区论坛查询")
		call YDWEPolledWaitNull(60.)
		call SaveInteger(YDHT, id, - $1317DA19, cx)
		call CustomVictoryBJ(Player(0), true, true)
		call CustomVictoryBJ(Player(1), true, true)
		call CustomVictoryBJ(Player(2), true, true)
		call CustomVictoryBJ(Player(3), true, true)
		call CustomVictoryBJ(Player(4), true, true)
		call FlushChildHashtable(YDHT, id * cx)
	endif
	set ky=null
endfunction

//玩家英雄阵亡
function Ex takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function PlayerDeath takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real time= 15
	if ( ge[i] ) then
		set time=8
	endif
	if GetUnitAbilityLevel(u, DA_GONG_GAO_CHENG) >= 1 and GetUnitAbilityLevel(u, SHEN_XING_BAI_BIAN) >= 1 then
		set time=time / 2
	endif
	// 死亡彩蛋
	set heroDeathCounter[i]=heroDeathCounter[i] + 1
	if heroDeathCounter[i] == 5 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2玩家" + GetPlayerName(p) + "解锁了|CFF00FF00彩蛋：超鬼，|CFFFF00B2复活时间减少2秒")
	endif
	if heroDeathCounter[i] >= 5 then
		set time=time - 2
	endif
	// 蜜蜂皮肤效果工蜂之怒——死亡后暴击伤害+5%
	if GetUnitTypeId(P4[i]) == 'n00J' then
		set udg_baojishanghai[i]=udg_baojishanghai[i] + 0.05
	endif
	call StartTimerBJ(udg_revivetimer[i], false, time)
	call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, p)
	call CreateTimerDialogBJ(bj_lastStartedTimer, "复活倒计时:")
	set R7[i]=bj_lastCreatedTimerDialog
	set he[i]=true
	set N8[i]=0
	call GroupRemoveUnit(k9, u)
	call GroupRemoveUnit(xianglongGroup, u)
	call GroupRemoveUnit(s9, u)
	call GroupRemoveUnit(r9, u)
	if ( UnitHaveItem(u , 'I02S') or UnitHaveItem(u , 1227895373) or UnitHaveItem(u , 1227895377) or UnitHaveItem(u , 1227895378) or UnitHaveItem(u , 1227895376) ) then
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(p, 0, 0, "|cFFff0000养武消失了")
		endif
	endif
	set u=null
	set p=null
endfunction
//五个玩家复活
function PlayerReviveA takes nothing returns nothing
 local real x= GetUnitX(udg_hero[1])
 local real y= GetUnitY(udg_hero[1])
	call DestroyTimerDialog(R7[1])
	set Q4=GetRectCenter(He)
	if GetUnitAbilityLevel(udg_hero[1], GUI_XI_GONG) >= 1 and GetUnitAbilityLevel(udg_hero[1], DA_GONG_GAO_CHENG) >= 1 then
		call ReviveHero(udg_hero[1], CheckX(x), CheckY(y), true)
	else
		call ReviveHeroLoc(udg_hero[1], Q4, true)
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[1]), Q4, 0)
	endif
	call RemoveLocation(Q4)
	set he[1]=false
	if ( ( ( UnitHaveItem(udg_hero[1] , 'I02S') ) or ( UnitHaveItem(udg_hero[1] , 1227895373) ) or ( UnitHaveItem(udg_hero[1] , 1227895377) ) or ( UnitHaveItem(udg_hero[1] , 1227895378) ) or ( UnitHaveItem(udg_hero[1] , 1227895376) ) ) ) then
		if not (YDWEBitwise_AND(deputy[(1 )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call RemoveItem(FetchUnitItem(udg_hero[1] , 'I02S'))
			call RemoveItem(FetchUnitItem(udg_hero[1] , 1227895373))
			call RemoveItem(FetchUnitItem(udg_hero[1] , 1227895377))
			call RemoveItem(FetchUnitItem(udg_hero[1] , 1227895378))
			call RemoveItem(FetchUnitItem(udg_hero[1] , 1227895376))
		endif
	endif
	if GetUnitAbilityLevel(udg_hero[1], 'A035') > 0 then
		call UnitRemoveAbility(udg_hero[1], 'A035')
		call UnitAddAbility(udg_hero[1], 'A034')
		call SetUnitAbilityLevel(udg_hero[1], 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[1])), 'A034' * 5))
	endif
	call AddCharacterABuff(udg_hero[1] , udg_xinggeA[1])
	call AddCharacterBBuff(udg_hero[1] , udg_xinggeB[1])
endfunction
function PlayerReviveB takes nothing returns nothing
 local real x= GetUnitX(udg_hero[2])
 local real y= GetUnitY(udg_hero[2])
	call DestroyTimerDialog(R7[2])
	set Q4=GetRectCenter(He)
	if GetUnitAbilityLevel(udg_hero[2], GUI_XI_GONG) >= 1 and GetUnitAbilityLevel(udg_hero[2], DA_GONG_GAO_CHENG) >= 1 then
		call ReviveHero(udg_hero[2], CheckX(x), CheckY(y), true)
	else
		call ReviveHeroLoc(udg_hero[2], Q4, true)
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[2]), Q4, 0)
	endif
	call RemoveLocation(Q4)
	set he[2]=false
	if ( ( ( UnitHaveItem(udg_hero[2] , 'I02S') ) or ( UnitHaveItem(udg_hero[2] , 1227895373) ) or ( UnitHaveItem(udg_hero[2] , 1227895377) ) or ( UnitHaveItem(udg_hero[2] , 1227895378) ) or ( UnitHaveItem(udg_hero[2] , 1227895376) ) ) ) then
		if not (YDWEBitwise_AND(deputy[(2 )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call RemoveItem(FetchUnitItem(udg_hero[2] , 'I02S'))
			call RemoveItem(FetchUnitItem(udg_hero[2] , 1227895373))
			call RemoveItem(FetchUnitItem(udg_hero[2] , 1227895377))
			call RemoveItem(FetchUnitItem(udg_hero[2] , 1227895378))
			call RemoveItem(FetchUnitItem(udg_hero[2] , 1227895376))
		endif
	endif
	if GetUnitAbilityLevel(udg_hero[2], 'A035') > 0 then
		call UnitRemoveAbility(udg_hero[2], 'A035')
		call UnitAddAbility(udg_hero[2], 'A034')
		call SetUnitAbilityLevel(udg_hero[2], 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[2])), 'A034' * 5))
	endif
	call AddCharacterABuff(udg_hero[2] , udg_xinggeA[2])
	call AddCharacterBBuff(udg_hero[2] , udg_xinggeB[2])
endfunction
function PlayerReviveC takes nothing returns nothing
 local real x= GetUnitX(udg_hero[3])
 local real y= GetUnitY(udg_hero[3])
	call DestroyTimerDialog(R7[3])
	set Q4=GetRectCenter(He)
	if GetUnitAbilityLevel(udg_hero[3], GUI_XI_GONG) >= 1 and GetUnitAbilityLevel(udg_hero[3], DA_GONG_GAO_CHENG) >= 1 then
		call ReviveHero(udg_hero[3], CheckX(x), CheckY(y), true)
	else
		call ReviveHeroLoc(udg_hero[3], Q4, true)
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[3]), Q4, 0)
	endif
	call RemoveLocation(Q4)
	set he[3]=false
	if ( ( ( UnitHaveItem(udg_hero[3] , 'I02S') ) or ( UnitHaveItem(udg_hero[3] , 1227895373) ) or ( UnitHaveItem(udg_hero[3] , 1227895377) ) or ( UnitHaveItem(udg_hero[3] , 1227895378) ) or ( UnitHaveItem(udg_hero[3] , 1227895376) ) ) ) then
		if not (YDWEBitwise_AND(deputy[(3 )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call RemoveItem(FetchUnitItem(udg_hero[3] , 'I02S'))
			call RemoveItem(FetchUnitItem(udg_hero[3] , 1227895373))
			call RemoveItem(FetchUnitItem(udg_hero[3] , 1227895377))
			call RemoveItem(FetchUnitItem(udg_hero[3] , 1227895378))
			call RemoveItem(FetchUnitItem(udg_hero[3] , 1227895376))
		endif
	endif
	if GetUnitAbilityLevel(udg_hero[3], 'A035') > 0 then
		call UnitRemoveAbility(udg_hero[3], 'A035')
		call UnitAddAbility(udg_hero[3], 'A034')
		call SetUnitAbilityLevel(udg_hero[3], 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[3])), 'A034' * 5))
	endif
	call AddCharacterABuff(udg_hero[3] , udg_xinggeA[3])
	call AddCharacterBBuff(udg_hero[3] , udg_xinggeB[3])
endfunction
function PlayerReviveD takes nothing returns nothing
 local real x= GetUnitX(udg_hero[4])
 local real y= GetUnitY(udg_hero[4])
	call DestroyTimerDialog(R7[4])
	set Q4=GetRectCenter(He)
	if GetUnitAbilityLevel(udg_hero[4], GUI_XI_GONG) >= 1 and GetUnitAbilityLevel(udg_hero[4], DA_GONG_GAO_CHENG) >= 1 then
		call ReviveHero(udg_hero[4], CheckX(x), CheckY(y), true)
	else
		call ReviveHeroLoc(udg_hero[4], Q4, true)
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[4]), Q4, 0)
	endif
	call RemoveLocation(Q4)
	set he[4]=false
	if ( ( ( UnitHaveItem(udg_hero[4] , 'I02S') ) or ( UnitHaveItem(udg_hero[4] , 1227895373) ) or ( UnitHaveItem(udg_hero[4] , 1227895377) ) or ( UnitHaveItem(udg_hero[4] , 1227895378) ) or ( UnitHaveItem(udg_hero[4] , 1227895376) ) ) ) then
		if not (YDWEBitwise_AND(deputy[(4 )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call RemoveItem(FetchUnitItem(udg_hero[4] , 'I02S'))
			call RemoveItem(FetchUnitItem(udg_hero[4] , 1227895373))
			call RemoveItem(FetchUnitItem(udg_hero[4] , 1227895377))
			call RemoveItem(FetchUnitItem(udg_hero[4] , 1227895378))
			call RemoveItem(FetchUnitItem(udg_hero[4] , 1227895376))
		endif
	endif
	if GetUnitAbilityLevel(udg_hero[4], 'A035') > 0 then
		call UnitRemoveAbility(udg_hero[4], 'A035')
		call UnitAddAbility(udg_hero[4], 'A034')
		call SetUnitAbilityLevel(udg_hero[4], 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[4])), 'A034' * 5))
	endif
	call AddCharacterABuff(udg_hero[4] , udg_xinggeA[4])
	call AddCharacterBBuff(udg_hero[4] , udg_xinggeB[4])
endfunction
function PlayerReviveE takes nothing returns nothing
 local real x= GetUnitX(udg_hero[5])
 local real y= GetUnitY(udg_hero[5])
	call DestroyTimerDialog(R7[5])
	set Q4=GetRectCenter(He)
	if GetUnitAbilityLevel(udg_hero[5], GUI_XI_GONG) >= 1 and GetUnitAbilityLevel(udg_hero[5], DA_GONG_GAO_CHENG) >= 1 then
		call ReviveHero(udg_hero[5], CheckX(x), CheckY(y), true)
	else
		call ReviveHeroLoc(udg_hero[5], Q4, true)
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[5]), Q4, 0)
	endif
	call RemoveLocation(Q4)
	set he[5]=false
	if ( ( ( UnitHaveItem(udg_hero[5] , 'I02S') ) or ( UnitHaveItem(udg_hero[5] , 1227895373) ) or ( UnitHaveItem(udg_hero[5] , 1227895377) ) or ( UnitHaveItem(udg_hero[5] , 1227895378) ) or ( UnitHaveItem(udg_hero[5] , 1227895376) ) ) ) then
		if not (YDWEBitwise_AND(deputy[(5 )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call RemoveItem(FetchUnitItem(udg_hero[5] , 'I02S'))
			call RemoveItem(FetchUnitItem(udg_hero[5] , 1227895373))
			call RemoveItem(FetchUnitItem(udg_hero[5] , 1227895377))
			call RemoveItem(FetchUnitItem(udg_hero[5] , 1227895378))
			call RemoveItem(FetchUnitItem(udg_hero[5] , 1227895376))
		endif
	endif
	if GetUnitAbilityLevel(udg_hero[5], 'A035') > 0 then
		call UnitRemoveAbility(udg_hero[5], 'A035')
		call UnitAddAbility(udg_hero[5], 'A034')
		call SetUnitAbilityLevel(udg_hero[5], 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[5])), 'A034' * 5))
	endif
	call AddCharacterABuff(udg_hero[5] , udg_xinggeA[5])
	call AddCharacterBBuff(udg_hero[5] , udg_xinggeB[5])
endfunction

function CA takes nothing returns nothing
	set udg_counter1=udg_counter1 + 1
	set q7[udg_counter1]=GetUnitTypeId(GetEnumUnit())
	set r7[udg_counter1]=GetEnumUnit()
	set m7[udg_counter1]=GetUnitLoc(GetEnumUnit())
endfunction
function cA takes nothing returns nothing
	set m7[0]=GetRectCenter(Ge)
	set nn7=CountUnitsInGroup(( AddPlayerUnitIntoGroup(( Player(12) ) , null) ))
	set o7=CountUnitsInGroup(( AddPlayerUnitIntoGroup(( Player(15) ) , null) ))
	call ForGroupBJ(( AddPlayerUnitIntoGroup(( Player(12) ) , null) ), function CA)
	call ForGroupBJ(( AddPlayerUnitIntoGroup(( Player(15) ) , null) ), function CA)
endfunction
//怪物死后重新刷怪
function EA takes nothing returns nothing
	//圣兽死后不刷新
	if GetTriggerUnit() != gg_unit_n00M_0131 then
		call YDWEPolledWaitNull(.02)
		set s7=1
		//call BJDebugMsg(GetUnitName(GetTriggerUnit()))
		//call BJDebugMsg(I2S(GetUnitTypeId(GetTriggerUnit())))
		loop
			exitwhen s7 > ( nn7 + o7 )
			if ( ( GetTriggerUnit() == r7[s7] ) ) then
				if ( ( s7 <= nn7 ) ) then
					//call BJDebugMsg("s7="+I2S(s7))
					//call BJDebugMsg(I2S(q7[s7]))
					if ( ( GetUnitTypeId(GetTriggerUnit()) != 'n000' ) ) then
						call CreateNUnitsAtLoc(1, 'n000', Player(12), m7[0], bj_UNIT_FACING)
						call UnitApplyTimedLifeBJ(( ( .18 - ( .01 * I2R(O4) ) ) * I2R(GetUnitPointValueByType(GetUnitTypeId(GetTriggerUnit()))) ), 'BTLF', bj_lastCreatedUnit)
						set r7[s7]=bj_lastCreatedUnit
						return
					else
						call CreateNUnitsAtLoc(1, q7[s7], Player(12), m7[s7], bj_UNIT_FACING)
						set r7[s7]=bj_lastCreatedUnit
						return
					endif
				else
					if ( ( GetUnitTypeId(GetTriggerUnit()) != 'n000' ) ) then
						call CreateNUnitsAtLoc(1, 'n000', Player(12), m7[0], bj_UNIT_FACING)
						call UnitApplyTimedLifeBJ(( ( .18 - ( .01 * I2R(O4) ) ) * I2R(GetUnitPointValueByType(GetUnitTypeId(GetTriggerUnit()))) ), 'BTLF', bj_lastCreatedUnit)
						set r7[s7]=bj_lastCreatedUnit
						return
					else
						call CreateNUnitsAtLoc(1, q7[s7], Player(15), m7[s7], bj_UNIT_FACING)
						set r7[s7]=bj_lastCreatedUnit
						return
					endif
				endif
			endif
			set s7=s7 + 1
		endloop
	endif
endfunction
function GA takes nothing returns boolean
	return ( ShiFouShuaGuai )
endfunction
//BOSS成长
function BOSSChengZhang takes nothing returns nothing
 local timer t= GetExpiredTimer()
	if udg_boss[udg_boshu / 4] != null then
		if IsUnitAliveBJ(udg_boss[udg_boshu / 4]) then
			if GetUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0DB') == 0 then
				call UnitAddAbility(udg_boss[udg_boshu / 4], 'A0DB')
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教BOSS" + GetUnitName(udg_boss[udg_boshu / 4]) + "已加强")
			else
				if GetUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0DB') < 10 then
					call IncUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0DB')
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教BOSS" + GetUnitName(udg_boss[udg_boshu / 4]) + "已加强")
				endif
			endif
			if GetUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0CP') == 0 then
				call UnitAddAbility(udg_boss[udg_boshu / 4], 'A0CP')
			else
				if GetUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0CP') < 6 then
					call IncUnitAbilityLevel(udg_boss[udg_boshu / 4], 'A0CP')
				else
					call UnitAddAbility(udg_boss[udg_boshu / 4], 'A0C1')
				endif
			endif
		else
			call PauseTimer(t)
			call DestroyTimer(t)
		endif
	else
		call PauseTimer(t)
		call DestroyTimer(t)
	endif
	set t=null
endfunction
//玩家等级大于波数*4
function LevelGuoGao takes nothing returns boolean
 local integer i= 0
 local integer totallevel= 0
 local real r= 0.
	loop
		exitwhen i > 11
		if udg_hero[i] != null then
			set totallevel=totallevel + GetUnitLevel(udg_hero[i])
		endif
		set i=i + 1
	endloop
	return udg_teshushijian and I2R(totallevel) > udg_boshu * 4 * I2R(GetNumPlayer()) and udg_nandu > 1
endfunction
//刷怪
function HA takes nothing returns nothing
 local timer t= CreateTimer()
 local integer i= 0
	// 试玩结束
	if ShiFouShuaGuai == false then
		call PauseTimer(shiWanTimer)
		call DestroyTimer(shiWanTimer)
		call DestroyTimerDialog(shiWanTimerDialog)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033试玩结束，开始刷怪" ))
	endif
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033邪教势力：第" + ( I2S(udg_boshu) + "|CFFFF0033波" ) ))
	if udg_boshu == 9 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能神圣护甲和10倍暴击" ))
	elseif udg_boshu == 11 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能咆哮和重击" ))
	elseif udg_boshu == 12 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪为空军" ))
	elseif udg_boshu == 13 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能噬血术" ))
	elseif udg_boshu == 14 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪为绞肉车，死亡后会产生小蜘蛛" ))
	elseif udg_boshu == 15 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪为空军，拥有技能20倍暴击" ))
	elseif udg_boshu == 16 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能精灵之火" ))
	elseif udg_boshu == 17 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能狂战士和30倍暴击" ))
	elseif udg_boshu == 18 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪血量很高，并拥有技能嘲讽" ))
	elseif udg_boshu == 19 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能狂热" ))
	elseif udg_boshu == 20 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能变相移动" ))
	elseif udg_boshu == 21 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能反魔法外壳" ))
	elseif udg_boshu == 22 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能重击" ))
	elseif udg_boshu == 23 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能90%闪避" ))
	elseif udg_boshu == 24 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能卡布恩（自爆）" ))
	elseif udg_boshu == 25 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能闪电攻击" ))
	elseif udg_boshu == 26 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪拥有技能神圣护甲" ))
	elseif udg_boshu == 27 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：下一波怪血量很高，并拥有技能永久献祭和重生" ))
	elseif udg_boshu == 28 then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033※警告※：本波为最后一波进攻，本波结束后教主即将出现" ))
	endif
	if LevelGuoGao() then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※邪教全力进攻※")
	endif
	call StopMusic(false)
	call PlayMusicBJ(yh)
	call EnableTrigger(Yi)
	call YDWEPolledWaitNull(60.)
	if ( ( O4 > 1 ) ) then
		call EnableTrigger(Zi)
		if ModuloInteger(udg_boshu, 4) == 0 and udg_boshu < 28 then
			call CreateNUnitsAtLocFacingLocBJ(1, u7[( udg_boshu / 4 )], Player(6), v7[8], v7[3])
			call GroupAddUnit(w7, bj_lastCreatedUnit)
			call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[3])
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教趁我方不备，偷偷地派出BOSS从背后杀过来了，请准备防御")
		endif
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教趁我方不备，偷偷地从背后杀过来了")
	endif
	if ( ( ModuloInteger(udg_boshu, 4) == 0 ) and ( udg_boshu < 30 ) ) then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教派出BOSS前来进攻，请准备防御")
		call CreateNUnitsAtLocFacingLocBJ(1, u7[( udg_boshu / 4 )], Player(6), v7[6], v7[4])
		if udg_boshu == 4 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0C2')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0C2', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0C5')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0C5', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0C7')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0C7', IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 8 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CF')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CF', IMinBJ(udg_nandu * 2, 9))
			//call UnitAddAbility(bj_lastCreatedUnit,'A0CM')
			//call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0CM',IMinBJ(udg_nandu*2,9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0DA')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0DA', IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 12 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CI')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CI', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CJ')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CJ', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CN')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CN', IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 16 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0C8')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0C8', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0C9')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0C9', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CB')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CB', IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 20 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CH')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CH', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0DE')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0DE', IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 24 then
			call UnitAddAbility(bj_lastCreatedUnit, 'A0CK')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0CK', IMinBJ(udg_nandu * 2, 9))
			call UnitAddAbility(bj_lastCreatedUnit, 'A0DH')
			call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A0DH', IMinBJ(udg_nandu * 2, 9))
		endif
		set udg_boss[udg_boshu / 4]=bj_lastCreatedUnit
		call TimerStart(t, 20, true, function BOSSChengZhang)
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	elseif ( ( ModuloInteger(udg_boshu, 4) != 0 ) and ( udg_boshu < 28 ) ) then
		if LevelGuoGao() then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，邪教派出BOSS前来进攻，请准备防御")
			call CreateNUnitsAtLocFacingLocBJ(1, u7[( udg_boshu / 4 ) + 1], Player(6), v7[6], v7[4])
			set udg_boss[udg_boshu / 4]=bj_lastCreatedUnit
			call TimerStart(t, 20, true, function BOSSChengZhang)
			call GroupAddUnit(w7, bj_lastCreatedUnit)
			call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
		endif
	endif
	call YDWEPolledWaitNull(10.)
	if ( ( ue > 0 ) ) then
		call ConditionalTriggerExecute(dj)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033名门高手开始进攻，大家要小心应付了！")
	endif
	call DisableTrigger(Yi)
	call YDWEPolledWaitNull(10.)
	if ( ( O4 > 1 ) ) then
		call DisableTrigger(Zi)
	endif
	set udg_boshu=udg_boshu + 1
	call StopMusic(false)
	call PlayMusicBJ(xh)
	if not udg_sutong then
		call YDWEPolledWaitNull(145 - GetNumPlayer() * 10)
	endif
	if ( ( udg_boshu >= 29 ) ) then
		call StopMusic(false)
		call PlayMusicBJ(zh)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033西域势力最后BOSS即将发起最后进攻，请作好防守准备")
		call CreateNUnitsAtLocFacingLocBJ(1, u7[8], Player(6), v7[6], v7[4])
		set udg_boss[udg_boshu / 4]=bj_lastCreatedUnit
		call TimerStart(t, 20, true, function BOSSChengZhang)
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	else
		if ( ( x7 >= 1 ) ) then
			call TriggerExecute(ij)
		else
			call TriggerExecute(hj)
		endif
	endif
	set t=null
endfunction
//试玩模式
function BeforeAttack takes nothing returns boolean
	return ( hd == false )
endfunction
function SetShiWan takes nothing returns nothing
	set ShiFouShuaGuai=false
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF00FF00玩家一选择了试玩模式，1小时内怪物不会进攻主城，大家可以尽情的去体验玩法了")
	// 30分钟后刷怪，避免挂机
	// set shiWanTimer = CreateTimer()
	// call TimerStart(shiWanTimer, 3600, false, function HA)
	// set shiWanTimerDialog = createTimerDialog(shiWanTimer, "试玩倒计时")
endfunction
function JiaJiNeng takes unit u returns nothing
	if udg_boshu >= 8 then
		call UnitAddAbility(u, 'A0CX')
		if udg_boshu >= 18 then
			call UnitAddAbility(u, 'A0CY')
			if udg_boshu >= 28 then
				call UnitAddAbility(u, 'A0CZ')
			endif
		endif
	endif
endfunction
function mutatedAttacker takes unit u returns nothing
 local integer i= GetRandomInt(1, 100)
	if udg_nandu >= 6 then
		if i <= 80 then
			call SetUnitVertexColor(u, 225, 0, 0, 255)
			call SaveInteger(YDHT, GetHandleId(u), StringHash("color"), 1)
			call SetUnitScale(u, 1.5, 1.5, 1.5)
		elseif i <= 95 then
			call SetUnitVertexColor(u, 0, 225, 0, 255)
			call SaveInteger(YDHT, GetHandleId(u), StringHash("color"), 2)
			call SetUnitScale(u, 1.7, 1.7, 1.7)
		else
			call SetUnitVertexColor(u, 0, 0, 225, 255)
			call SaveInteger(YDHT, GetHandleId(u), StringHash("color"), 3)
			call SetUnitScale(u, 1.9, 1.9, 1.9)
		endif
	endif
endfunction
function lA takes nothing returns nothing
	call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[6], v7[4])
	call GroupAddUnit(w7, bj_lastCreatedUnit)
	if GetRandomInt(70, 100) == 87 then
		call mutatedAttacker(bj_lastCreatedUnit)
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[7], v7[4])
	call GroupAddUnit(w7, bj_lastCreatedUnit)
	if GetRandomInt(70, 100) == 87 then
		call mutatedAttacker(bj_lastCreatedUnit)
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[5], v7[4])
	call GroupAddUnit(w7, bj_lastCreatedUnit)
	if GetRandomInt(70, 100) == 87 then
		call mutatedAttacker(bj_lastCreatedUnit)
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	if LevelGuoGao() then
		call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[6], v7[4])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
		call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[7], v7[4])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
		call CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[5], v7[4])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
	endif
endfunction
function KA takes nothing returns nothing
	call CreateNUnitsAtLocFacingLocBJ(1, y7[( udg_boshu + 1 )], Player(6), v7[8], v7[3])
	call GroupAddUnit(w7, bj_lastCreatedUnit)
	if GetRandomInt(70, 100) == 87 then
		call mutatedAttacker(bj_lastCreatedUnit)
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[3])
	if LevelGuoGao() then
		call CreateNUnitsAtLocFacingLocBJ(1, y7[( udg_boshu + 1 )], Player(6), v7[8], v7[3])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[3])
	endif
endfunction
function MA takes nothing returns boolean
	return ( ShiFouShuaGuai )
endfunction
function NA takes nothing returns nothing
 local integer i= 1
 local integer j= 1
 local integer l= 0
 local real r1= 0
 local real r2= 0
 local real rr3= 1.
 local real rr4= 1.
	if ( ( ue == 1 ) ) then
		set r1=1.26
		set r2=1.4
	elseif ( ( ue == 2 ) ) then
		set r1=1.28
		set r2=1.43
	elseif ( ( ue == 3 ) ) then
		set r1=1.3
		set r2=1.46
	elseif ( ( ue == 4 ) ) then
		set r1=1.32
		set r2=1.49
	elseif ( ( ue == 5 ) ) then
		set r1=1.34
		set r2=1.52
	endif
	loop
		exitwhen i > ue
		loop
			exitwhen j > udg_boshu
			if ( j < udg_boshu ) then
				set rr3=rr3 * r1
				set rr4=rr4 * r2
			endif
			set j=j + 1
		endloop
		set l=GetRandomInt(1, 11)
		call CreateNUnitsAtLocFacingLocBJ(1, ve[l], Player(6), v7[GetRandomInt(5, 8)], v7[4])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
		call SetHeroLevelBJ(bj_lastCreatedUnit, ( 4 * udg_boshu ), false)
		call YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit , 3 , 0 , R2I(I2R(xe[l]) * ( rr3 * 3.3 )))
		call YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit , 2 , 0 , ( ( ( udg_boshu - 1 ) * ye[l] * 9 ) / 10 ) * ue)
		//call YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit,1,0,R2I(I2R(ze[l])*rr4))
		call unitadditembyidswapped(Ae[udg_boshu] , bj_lastCreatedUnit)
		set i=i + 1
	endloop
	//set ue=0
endfunction
function PA takes nothing returns nothing
	call DestroyTimerDialog(z7[1])
	call ConditionalTriggerExecute(Xi)
endfunction
function RA takes nothing returns nothing
	call DestroyTimerDialog(z7[2])
	call ConditionalTriggerExecute(Xi)
	//set x7=0
endfunction
function TA takes nothing returns nothing
 local integer i= 0
	call DestroyTimerDialog(z7[3])
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFDDA0DD西域邪教开始了进攻正派武林，玩家务必要确保正派武林不被摧毁，否则游戏失败|r")
	if udg_teshushijian and tiaoZhanIndex != 3 then
		call ChooseNanDu() // 第一次选择难度
endif
	call ConditionalTriggerExecute(Xi)
endfunction
function VA takes nothing returns nothing
	call StartTimerBJ(A7[1], false, ( 30. + I2R(ie) ))
	call CreateTimerDialogBJ(bj_lastStartedTimer, "邪教下次进攻时间")
	set z7[1]=bj_lastCreatedTimerDialog
	set ie=0
endfunction
function XA takes nothing returns nothing
	call StartTimerBJ(A7[2], false, ( x7 * 60. + 30. + I2R(ie) ))
	call CreateTimerDialogBJ(bj_lastStartedTimer, "邪教下次进攻时间")
	set z7[2]=bj_lastCreatedTimerDialog
	set ie=0
	set x7=0
endfunction
function ZA takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227894853 ) )
endfunction
function ea takes nothing returns nothing
	set x7=x7 + 1
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF00FF4C在武林弟子的奋力帮助下，邪教的进攻势力被延缓了，大家有1分钟的时间，赶紧去做任务吧~")
	call PlaySoundOnUnitBJ(Dh, 100, GetTriggerUnit())
	set shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] + 10
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00FF4C守家积分+10")
endfunction
function ja takes nothing returns boolean
	return ( ( IsUnitInGroup(GetTriggerUnit(), w7) ) )
endfunction
function ka takes nothing returns nothing
	call GroupRemoveUnit(w7, GetTriggerUnit())
endfunction
//练功房刷怪
function na takes nothing returns boolean
	return ( ( ( GetOwningPlayer(GetFilterUnit()) == Player(7) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function qa takes nothing returns nothing
 local integer j= IMinBJ(IMaxBJ(udg_boshu, 1), 28)
	// 无尽BOSS模式永远刷第1、2波怪
	if tiaoZhanIndex == 3 then
		set j=GetRandomInt(1, 2)
	endif
	if ( ( CountUnitsInGroup(wv(Ie , Condition(function na))) <= 3 ) ) then
		call CreateNUnitsAtLoc(12, y7[j], Player(7), v7[1], bj_UNIT_FACING)
	endif
	if ( ( CountUnitsInGroup(wv(Re , Condition(function na))) <= 3 ) ) then
		call CreateNUnitsAtLoc(12, y7[j], Player(7), v7[$A], bj_UNIT_FACING)
	endif
	if ( ( CountUnitsInGroup(wv(le , Condition(function na))) <= 3 ) ) then
		call CreateNUnitsAtLoc(12, y7[j], Player(7), v7[2], bj_UNIT_FACING)
	endif
endfunction
//练功房
function sa takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895350 ) ) // INLINED!!
endfunction
function ua takes nothing returns nothing
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房二")
	call SetUnitPosition(GetTriggerUnit(), 4750, - 3650)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 4250, - 3650, 0)
endfunction
function wa takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895351 ) ) // INLINED!!
endfunction
function xa takes nothing returns nothing
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房三")
	call SetUnitPosition(GetTriggerUnit(), 5920, - 4750)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 5920, - 4750, 0)
endfunction
function za takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895361 ) ) // INLINED!!
endfunction
function Aa takes nothing returns nothing
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房一")
	call SetUnitPosition(GetTriggerUnit(), 3730, - 4690)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 3730, - 4690, 0)
endfunction

//切换背包
function Ba takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 1093677134 ) )
endfunction
function ba takes nothing returns nothing
	set B7=1
	loop
		exitwhen B7 > 6
		call UnitAddItem(b7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], UnitItemInSlotBJ(C7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], B7))
		set B7=B7 + 1
	endloop
	set B7=1
	loop
		exitwhen B7 > 6
		call UnitAddItem(C7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], UnitItemInSlotBJ(GetTriggerUnit(), B7))
		set B7=B7 + 1
	endloop
	set B7=1
	loop
		exitwhen B7 > 6
		call UnitAddItem(GetTriggerUnit(), UnitItemInSlotBJ(b7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], B7))
		set B7=B7 + 1
	endloop
endfunction
//鸟的贩卖技能
function ca takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 1093679433 ) )
endfunction
function Da takes nothing returns nothing
	call CreateNUnitsAtLoc(1, 'nvul', GetOwningPlayer(GetTriggerUnit()), v7[9], bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddItem(bj_lastCreatedUnit, CreateItem(GetItemTypeId(GetSpellTargetItem()), 0, 0))
	call UnitDropItemTarget(bj_lastCreatedUnit, UnitItemInSlotBJ(bj_lastCreatedUnit, 1), Rs)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
	call RemoveItem(GetSpellTargetItem())
	call PlaySoundOnUnitBJ(Ih, 100, GetTriggerUnit())
	call AddSpecialEffectTargetUnitBJEx("overhead" , GetTriggerUnit() , "Abilities\\Spells\\Items\\ResourceItems\\ResourceEffectTarget.mdl")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
endfunction
// 鸟切换皮肤的技能
function isSwitchSkin takes nothing returns boolean
	return GetSpellAbilityId() == 'A0B7' or GetSpellAbilityId() == 'A0B8' or GetSpellAbilityId() == 'A0BH' or GetSpellAbilityId() == 'A0FF'
endfunction
function resetWuKongCd takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer i= LoadInteger(YDHT, GetHandleId(t), 0)
 local unit u= P4[i]
 local integer id= 'A0BD'
	// CD重置
	call EXSetAbilityState(EXGetUnitAbility(u, id), 1, wukongSkillCd[i])
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function switchSkin takes nothing returns nothing
	// local unit u = GetTriggerUnit()
	// local player p = GetOwningPlayer(u)
	// local location loc = GetUnitLoc(u)
	// local integer i = 1 + GetPlayerId(p)
	// if GetSpellAbilityId() == 'A0B7' then
	//     call CreateNUnitsAtLoc(1, 'n00W', p, loc, GetUnitFacing(u))
	// else
	//     call CreateNUnitsAtLoc(1, 'n00V', p, loc, GetUnitFacing(u))
	// endif
	// set P4[i] = bj_lastCreatedUnit
	// set B7=1
	// loop
	//     exitwhen B7>6
	//     call UnitAddItem(P4[i], UnitItemInSlotBJ(u, B7))
	//     set B7=B7+1
	// endloop
	// call RemoveUnit(u)
	// call RemoveLocation(loc)
	// set loc = null
	// set u = null
	// set p = null
 local unit u= GetTriggerUnit()
 local timer t= null
	if GetSpellAbilityId() == 'A0B7' then
		call YDWEUnitTransform(u , 'AEme' , 'n00W')
		set t=CreateTimer()
		call SaveInteger(YDHT, GetHandleId(t), 0, 1 + GetPlayerId(GetOwningPlayer(u)))
		call TimerStart(t, 0.01, false, function resetWuKongCd)
	elseif GetSpellAbilityId() == 'A0B8' then
		call YDWEUnitTransform(u , 'AEme' , 'n00V')
	elseif GetSpellAbilityId() == 'A0BH' then
		call YDWEUnitTransform(u , 'AEme' , 'n00J')
	elseif GetSpellAbilityId() == 'A0FF' then
		call YDWEUnitTransform(u , 'AEme' , 'n018')
	endif
	// 添加更换皮肤魔法书并设置魔法书和里面技能永久性
	call UnitAddAbility(u, 'A0BB')
	call UnitMakeAbilityPermanent(u, true, 'A0BB')
	call UnitMakeAbilityPermanent(u, true, 'A0B7')
	call UnitMakeAbilityPermanent(u, true, 'A0B8')
	call UnitMakeAbilityPermanent(u, true, 'A0BH')
	call UnitMakeAbilityPermanent(u, true, 'A0FF')
	// 添加速通存档奖励魔法书
	call UnitAddAbility(u, 'A0E0')
	call UnitMakeAbilityPermanent(u, true, 'A0E1')
	call UnitMakeAbilityPermanent(u, true, 'A0E2')
	call UnitMakeAbilityPermanent(u, true, 'A0E3')
	call UnitMakeAbilityPermanent(u, true, 'A0E4')
	call UnitMakeAbilityPermanent(u, true, 'A0E5')
	call UnitMakeAbilityPermanent(u, true, 'A0E6')
	call UnitMakeAbilityPermanent(u, true, 'A0E7')
	call UnitMakeAbilityPermanent(u, true, 'A0E8')
	call UnitMakeAbilityPermanent(u, true, 'A0E9')
	call UnitMakeAbilityPermanent(u, true, 'A0EA')
	set u=null
	set t=null
endfunction
// 鸟使用地图指令
function isCmd takes nothing returns boolean
	return GetSpellAbilityId() == 'A0DZ'
endfunction
function cmd takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 0
	// ckjn指令
	if GetSpellAbilityId() == 'A0DZ' then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000人物性格：你学武资质" + XingGeA(udg_xinggeA[i]) + "，态度" + XingGeB(udg_xinggeB[i]))
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		set j=1
		loop
			exitwhen j > wugongshu[i]
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "第" + I2S(GetUnitAbilityLevel(udg_hero[i], I7[( i - 1 ) * 20 + j])) + "重，升级进度：" + LoadStr(YDHT, GetHandleId(p), I7[( i - 1 ) * 20 + j] * 2))
			set j=j + 1
		endloop
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	endif
	set u=null
	set p=null
endfunction
//切换物品
function IsQieHuanItem takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A00M' ) and ( he[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == false ) )
endfunction
function QieHuanItem takes nothing returns nothing
	call UnitAddItem(Vs, UnitItemInSlotBJ(GetTriggerUnit(), 1))
	call UnitAddItem(GetTriggerUnit(), UnitItemInSlotBJ(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], 1))
	call UnitAddItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], UnitItemInSlotBJ(Vs, 1))
endfunction

//英雄达到某等级
function Ja takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function HeroLevel takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_QI) - 1)])) != 0) ) then // INLINED!!
		if GetRandomInt(1, 3) == 1 then
			call ModifyHeroStat(0, u, 0, GetRandomInt(4, 12))
		elseif GetRandomInt(1, 2) == 1 then
			call ModifyHeroStat(1, u, 0, GetRandomInt(4, 12))
		else
			call ModifyHeroStat(2, u, 0, GetRandomInt(4, 12))
		endif
		if ( GetUnitLevel(u) >= 80 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_QI) - 1)])) != 0) then // INLINED!!
			call Deputy_setMaster(i , LIAN_QI)
			set juexuelingwu[i]=juexuelingwu[i] + 50
			// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓练气大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得练气大师")
			call SetPlayerName(p, "〓练气大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		endif
	endif
	if ( ( GetUnitTypeId(u) == 'O004' ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 0 , 400)
	else
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 0 , 350)
	endif
	if ( ( GetUnitTypeId(u) == 'O000' ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 0 , 40)
	else
		call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 0 , 35)
	endif
	if ( ( GetUnitTypeId(u) == 'O001' ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , 5)
	else
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , 4)
	endif
	if ( ( GetUnitLevel(u) >= 3 ) and ( Z8[i] == false ) ) then
		set Z8[i]=true
		set d8[i]=1
		loop
			exitwhen d8[i] > DENOMINATION_NUMBER //门派数
if ( udg_runamen[i] == d8[i] ) then
				// 自由3级自动学技能begin
				if d8[i] == 11 then
					// 送一本中原武学散篇
					call UnitAddItemById(u, 'I0F2')
					if GetRandomInt(1, 100) <= 50 then
						set denomFirst[d8[i]]=LoadInteger(YDHT, StringHash("武学") + GetRandomInt(1, 18), 2)
					else
						set denomFirst[d8[i]]=LoadInteger(YDHT, StringHash("武学") + GetRandomInt(39, 41), 2)
					endif
					call UnitAddAbility(u, denomFirst[d8[i]])
					call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName(denomFirst[d8[i]]))
				endif
				// 自由3级自动学技能end
				if d8[i] != 11 then
					call UnitAddAbility(u, denomFirst[d8[i]])
					call UnitMakeAbilityPermanent(u, true, denomFirst[d8[i]])
					call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName(denomFirst[d8[i]]))
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" + I2S(1 + GetPlayerId(p)) + "成为" + udg_menpainame[udg_runamen[i]] + "初级弟子")
					call SetPlayerName(p, "〓" + udg_menpainame[udg_runamen[i]] + "初级弟子〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				endif
				if ( udg_runamen[i] == 11 ) then
					set udg_shuxing[i]=udg_shuxing[i] + 5
					call DisplayTextToPlayer(p, 0, 0, "|cff00FF66自由门派3级奖励5点自由属性点、必定获得奇武秘籍一本")
					call unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(42, 46), 1) , u)
					// call unitadditembyidswapped('I071',u) // 创建传功给玩家
					// =====送技能书begin
					// if GetRandomInt(1,100)<=90 then
					// 	call unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学")+GetRandomInt(19, 36), 1), u)
					// else
					// 	call unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学")+GetRandomInt(1, 18), 1), u)
					// endif
					//======送技能书end
					// 自由自动学的技能补属性begin
					set S9=1
					loop
						exitwhen S9 > 20
						if ( denomFirst[d8[i]] == MM9[S9] ) then
							set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
							call ModifyHeroStat(1, u, 0, udg_jueneiminjie[S9])
							set udg_baojilv[i]=udg_baojilv[i] + udg_jueneibaojilv[S9]
							set juexuelingwu[i]=juexuelingwu[i] + udg_jueneijxlw[S9]
							set udg_shanghaixishou[i]=udg_shanghaixishou[i] + udg_jueneishxs[S9]
						endif
						set S9=S9 + 1
					endloop
					// 自由自动学的技能补属性end
				endif
				// 填充技能格子
				set L7[i]=1
				loop
					exitwhen L7[i] > wugongshu[i]
					if ( I7[( GetPlayerId(p) * 20 + L7[i] )] != 'AEfk' ) then
					else
						set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomFirst[d8[i]]
						exitwhen true
					endif
					set L7[i]=L7[i] + 1
				endloop
			endif
			set d8[i]=d8[i] + 1
		endloop
	endif
	if ( ( GetUnitLevel(u) >= 3 ) and GetUnitAbilityLevel(u, denomFirst[udg_runamen[i]]) >= 2 and ( e9[i] == false ) ) then
		set e9[i]=true
		set d8[i]=1
		loop
			exitwhen d8[i] > DENOMINATION_NUMBER
			if d8[i] != 11 then
				if ( ( udg_runamen[i] == d8[i] ) ) then
					call UnitAddAbility(u, denomThird[d8[i]])
					call UnitMakeAbilityPermanent(u, true, denomThird[d8[i]])
					call DisplayTextToPlayer(p, 0, 0, ( "|cff00FF66恭喜领悟技能：" + GetObjectName(denomThird[d8[i]]) ))
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" + I2S(1 + GetPlayerId(p)) + "成为" + udg_menpainame[udg_runamen[i]] + "中级弟子")
					call SetPlayerName(p, "〓" + udg_menpainame[udg_runamen[i]] + "中级弟子〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					set L7[i]=1
					loop
						exitwhen L7[i] > wugongshu[i]
						if ( ( I7[( ( GetPlayerId(p) * 20 ) + L7[i] )] != 'AEfk' ) ) then
						else
							set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomThird[d8[i]]
							exitwhen true
						endif
						set L7[i]=L7[i] + 1
					endloop
				endif
			endif
			set d8[i]=d8[i] + 1
		endloop
	endif
	if ( ( GetUnitLevel(u) >= 3 ) and GetUnitAbilityLevel(u, denomThird[udg_runamen[i]]) >= 2 and ( d9[i] == false ) ) then
		set d9[i]=true
		set d8[i]=1
		loop
			exitwhen d8[i] > DENOMINATION_NUMBER
			if d8[i] != 11 then
				if ( ( udg_runamen[i] == d8[i] ) ) then
					call UnitAddAbility(u, denomSecond[d8[i]])
					call DisplayTextToPlayer(p, 0, 0, ( "|cff00FF66恭喜领悟技能：" + GetObjectName(denomSecond[d8[i]]) ))
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" + I2S(1 + GetPlayerId(p)) + "成为" + udg_menpainame[udg_runamen[i]] + "高级弟子")
					call SetPlayerName(p, "〓" + udg_menpainame[udg_runamen[i]] + "高级弟子〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					call UnitMakeAbilityPermanent(u, true, denomSecond[d8[i]])
					set L7[i]=1
					loop
						exitwhen L7[i] > wugongshu[i]
						if ( ( I7[( ( GetPlayerId(p) * 20 ) + L7[i] )] != 'AEfk' ) ) then
						else
							set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomSecond[d8[i]]
							exitwhen true
						endif
						set L7[i]=L7[i] + 1
					endloop
				endif
			endif
			set d8[i]=d8[i] + 1
		endloop
	endif
	if ( ( GetUnitLevel(u) == 10 ) ) then
		// 自由10级自动学绝内
		if udg_runamen[i] == 11 then
			set denomThird[udg_runamen[i]]=LoadInteger(YDHT, StringHash("武学") + GetRandomInt(29, 36), 2) // 37逆九阴和38医疗篇去除
call UnitAddAbility(u, denomThird[udg_runamen[i]])
			call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName(denomThird[udg_runamen[i]]))
			// 自由自动学的技能补属性begin
			set S9=1
			loop
				exitwhen S9 > 20
				if ( denomThird[udg_runamen[i]] == MM9[S9] ) then
					set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
					call ModifyHeroStat(1, u, 0, udg_jueneiminjie[S9])
					set udg_baojilv[i]=udg_baojilv[i] + udg_jueneibaojilv[S9]
					set juexuelingwu[i]=juexuelingwu[i] + udg_jueneijxlw[S9]
					set udg_shanghaixishou[i]=udg_shanghaixishou[i] + udg_jueneishxs[S9]
				endif
				set S9=S9 + 1
			endloop
			// 自由自动学的技能补属性end
			set L7[i]=1
			loop
				exitwhen L7[i] > wugongshu[i]
				if ( ( I7[( ( GetPlayerId(p) * 20 ) + L7[i] )] != 'AEfk' ) ) then
				else
					set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomThird[udg_runamen[i]]
					exitwhen true
				endif
				set L7[i]=L7[i] + 1
			endloop
		endif
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了10级，你可以前往全真教（小地图指示点）完成历练1任务（大战江南七怪）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		set loc=GetRectCenter(Te)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitLevel(u) == 25 ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了25级，你可以前往少林后山（小地图指示点）完成历练2任务（挑战十八罗汉）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		set loc=GetRectCenter(ag)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitLevel(u) == 40 ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了40级，你可以前往武林城外（小地图指示点）完成历练3任务（勇闯十恶不赦岛）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		set loc=GetRectCenter(Bg)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitLevel(u) == 55 ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了55级，你可以前往光明顶（小地图指示点）完成历练4任务（勇闯光明顶）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		set loc=GetRectCenter(Lg)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitLevel(u) == 70 ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了70级，你可以前往少林寺后山（小地图指示点）完成历练5任务（华山论剑）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		set loc=GetRectCenter(Rg)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	endif
	if ( GetUnitLevel(u) >= 80 and jiawuxue[i] == false ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00恭喜你升到了80级，获得7个自创武学点，在通过历练5以后你可以到聚贤庄游坦之处自创武学")
		set wuxuedian[i]=wuxuedian[i] + 5
		if udg_vip[i] >= 1 then
			set wuxuedian[i]=wuxuedian[i] + 2
		endif
		// 单通8门派奖励
		if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 8 and not udg_fpgz then
			set wuxuedian[i]=wuxuedian[i] + 10
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通8个门派，额外获得10个自创武学点")
		endif
		set jiawuxue[i]=true
		set zizhiwugong[i]=sc__ZiZhiWuGong_create(0 , 0 , GetRandomInt(1, 10) , 0 , 0)
	endif
	set u=null
	set p=null
	set loc=null
endfunction

//杀怪回血
function Ma takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER ) )
endfunction
function KillGuaiJiaXie takes nothing returns nothing
	if GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )], 'A03Z') < 1 then
		call SetWidgetLife(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )], ( GetUnitState(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )], UNIT_STATE_LIFE) + ( shaguaihufui[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] + ( ( I2R(danpo[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]) / 2000. ) * GetUnitState(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )], UNIT_STATE_MAX_LIFE) ) ) ))
	endif
endfunction
//每秒回血回蓝
function YiShuHuiXie takes nothing returns nothing
	set c7=1
	loop
		exitwhen c7 > 5
		if ( ( GetPlayerController(Player(- 1 + ( c7 ))) == MAP_CONTROL_USER ) ) and UnitHasBuffBJ(udg_hero[c7], 'B014') == false then
			call SetUnitLifePercentBJ(udg_hero[c7], GetUnitLifePercent(udg_hero[c7]) + I2R(yishu[c7]) / 2000. + 10 * GetUnitAbilityLevel(udg_hero[c7], 'A0D4') + guixihuixie[c7])
			if ( UnitHaveItem(udg_hero[c7] , 'I01D') ) then
				call SetUnitLifePercentBJ(udg_hero[c7], GetUnitLifePercent(udg_hero[c7]) + 6)
			endif
			if talent_recover_hp[c7] > 0 then
				call SetUnitLifePercentBJ(udg_hero[c7], GetUnitLifePercent(udg_hero[c7]) + talent_recover_hp[c7])
			endif
			call SetUnitLifeBJ(udg_hero[c7], GetUnitState(udg_hero[c7], UNIT_STATE_LIFE) + shengminghuifu[c7])
			call SetUnitManaBJ(udg_hero[c7], GetUnitStateSwap(UNIT_STATE_MANA, udg_hero[c7]) + ( .3 * I2R(yishu[c7]) ) + falihuifu[c7] + 5 * GetUnitAbilityLevel(udg_hero[c7], 'A0D4'))
		endif
		set c7=c7 + 1
	endloop
endfunction
//伤害回复
function Ra takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function Sa takes nothing returns nothing
	if GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], 'A03Z') < 1 then
		call SetWidgetLife(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], ( GetUnitState(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], UNIT_STATE_LIFE) + ( ( shanghaihuifu[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] / 10. ) + ( ( I2R(danpo[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )]) / 1500. ) * GetUnitState(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], UNIT_STATE_MAX_LIFE) ) ) ))
	endif
endfunction
//伤害吸收
function Ua takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function Va takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real damage= GetEventDamage()
 local real r= ( 1 - RMinBJ(udg_shanghaixishou[i], max_damage_absorb[i]) ) * damage
 local real coeff= 30
	
	// 嵩山-寒冰神掌
	if GetUnitAbilityLevel(u, HAN_BING_SHEN_ZHANG) >= 1 then
		if GetUnitAbilityLevel(u, XI_SUI_JING) >= 1 then
			set coeff=20
		endif
		if damage > GetUnitState(u, UNIT_STATE_MAX_LIFE) * coeff / 100 then
			set damage=GetUnitState(u, UNIT_STATE_MAX_LIFE) * coeff / 100
			call EXSetEventDamage(damage)
		endif
	endif
	call SetWidgetLife(udg_hero[i], ( GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + ( RMinBJ(udg_shanghaixishou[i], max_damage_absorb[i]) * damage ) ))
	if ( ( UnitHasBuffBJ(GetTriggerUnit(), 1110454340) ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 1093678930) != 0 ) ) then
		call SetWidgetLife(udg_hero[i], ( GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + ( .3 * damage ) ))
	endif
	if UnitHaveItem(udg_hero[i] , 'I09Z') then
		if GetUnitAbilityLevel(udg_hero[i], 'A03O') != 0 then
			set r=r / 3
		endif
		// 通神
		if GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) >= R2I(r) / 20 then
			call commonAddGold(p , - R2I(r) / 20)
			call SetWidgetLife(udg_hero[i], RMinBJ(( GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + r ), GetUnitState(udg_hero[i], UNIT_STATE_MAX_LIFE)))
		else
			call commonAddGold(p , GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * ( - 1 ))
			call SetWidgetLife(udg_hero[i], RMinBJ(( GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + 5 * I2R(GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)) ), GetUnitState(udg_hero[i], UNIT_STATE_MAX_LIFE)))
		endif
	endif
	set u=null
	set p=null
endfunction

//传送至桃花岛
function mB takes nothing returns boolean
	return ( GetItemTypeId(GetManipulatedItem()) == 'I09V' or GetItemTypeId(GetManipulatedItem()) == 'I0DI' ) and (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) // INLINED!!
endfunction
function nB takes nothing returns nothing
	call SetUnitPosition(GetTriggerUnit(), 9631, 1139)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 9631, 1139, 0)
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入Star桃花岛")
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00”源思英年,巴巴西洛普,雪陆文出；源思英年,巴巴西洛普,雪陆文出！“")
endfunction
//终南山
function GQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896148 ) ) // INLINED!!
endfunction
function HQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < $A ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足10级无法传送")
	else
		if ( shengwang[i] < 500 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足500无法传送")
		else
			set loc=GetRectCenter(Te)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入终南山")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//少林寺后山
function lQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896149 ) ) // INLINED!!
endfunction
function JQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < 25 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足25级无法传送")
	else
		if ( ( shengwang[i] < $5DC ) ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足1500无法传送")
		else
			set loc=GetRectCenter(ag)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入少林寺后山")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//塞外
function LQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896150 ) ) // INLINED!!
endfunction
function MQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < 40 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足40级无法传送")
	else
		if ( ( shengwang[i] < 2800 ) ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足2800无法传送")
		else
			set loc=GetRectCenter(Bg)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入塞外")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//光明顶
function OQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896151 ) ) // INLINED!!
endfunction
function PQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < 55 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足55级无法传送")
	else
		if ( ( shengwang[i] < 4800 ) ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足4800无法传送")
		else
			set loc=GetRectCenter(Lg)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入光明顶")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//少林寺后山
function RQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896152 ) ) // INLINED!!
endfunction
function SQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < 70 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足70级无法传送")
	else
		if ( ( shengwang[i] < 6500 ) ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足6500无法传送")
		else
			set loc=GetRectCenter(Rg)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入少林寺后山")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//边疆
function UQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896385 ) ) // INLINED!!
endfunction
function VQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( GetUnitLevel(u) < 100 ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足100级无法传送")
	else
		if ( ( shengwang[i] < 9000 ) ) and GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足9000无法传送")
		else
			set loc=GetRectCenter(Zg)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			call DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入边疆")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//驿站传送
function IsYiZhan takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and ( GetItemTypeId(GetManipulatedItem()) == 'I0BP' or GetItemTypeId(GetManipulatedItem()) == 'I0BQ' or GetItemTypeId(GetManipulatedItem()) == 'I0BR' or GetItemTypeId(GetManipulatedItem()) == 'I0BS' or GetItemTypeId(GetManipulatedItem()) == 'I0BT' or GetItemTypeId(GetManipulatedItem()) == 'I0BU' or GetItemTypeId(GetManipulatedItem()) == 'I0BV' or GetItemTypeId(GetManipulatedItem()) == 'I0BW' or GetItemTypeId(GetManipulatedItem()) == 'I0BX' or GetItemTypeId(GetManipulatedItem()) == 'I0AF' or GetItemTypeId(GetManipulatedItem()) == 'I0EX' ) // INLINED!!
endfunction
function YiZhanChuanSong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 'I0BP' then
		call SetUnitPosition(udg_hero[i], 3763, - 9091)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), 3763, - 9091, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至牛妖幻境")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BQ' then
		call SetUnitPosition(udg_hero[i], 1446, - 2317)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), 1446, - 2317, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至初入江湖")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BR' then
		call SetUnitPosition(udg_hero[i], 1863, 0)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), 1863, 0, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至少林寺外")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BS' then
		call SetUnitPosition(udg_hero[i], - 1476, 8139)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 1476, 8139, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至光明顶下")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BT' then
		call SetUnitPosition(udg_hero[i], - 2400, - 3900)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 2400, - 3900, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至江南水乡")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BU' then
		call SetUnitPosition(udg_hero[i], - 4400, - 2950)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 4400, - 2950, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至全真三子")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BV' then
		call SetUnitPosition(udg_hero[i], - 5960, - 160)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 5960, - 160, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至雁门关内")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BW' then
		call SetUnitPosition(udg_hero[i], - 13000, - 15500)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 13000, - 15500, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至大辽国")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BX' then
		call SetUnitPosition(udg_hero[i], - 9000, - 14000)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 9000, - 14000, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至聚贤庄")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0EX' then
		call SetUnitPosition(udg_hero[i], 7271, 2955)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), 7271, 2955, 0)
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至蒙古大营")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0AF' then
		if xiuxing[i] <= 5 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00修行达到6才可以进入,你的修行不足，请前往地图指示点修行去吧")
			call AdjustPlayerStateBJ(100, p, PLAYER_STATE_RESOURCE_GOLD)
		else
			call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至琉球岛")
			call SetUnitPosition(udg_hero[i], 10943, 6760)
			call PanCameraToTimedForPlayer(p, 10943, 6760, 0)
			call DisplayTextToPlayer(p, 0, 0, "|cffff0000你已深入到海外琉球岛，看看有什么发现吧")
		endif
	endif
	set p=null
	set u=null
endfunction

//古董价格
function s5 takes nothing returns nothing
	set gudong[1]=1227896115
	set nd[1]=500
	set od[1]=6000
	set gudong[2]=1227896116
	set nd[2]=500
	set od[2]=6000
	set gudong[3]=1227896117
	set nd[3]=500
	set od[3]=6000
	set gudong[4]=1227896118
	set nd[4]=1000
	set od[4]=$4E20
	set gudong[5]=1227896119
	set nd[5]=1000
	set od[5]=$4E20
	set gudong[6]=1227896120
	set nd[6]=1000
	set od[6]=$4E20
	set gudong[7]=1227896121
	set nd[7]=7000
	set od[7]=$C350
	set gudong[8]=1227896129
	set nd[8]=7000
	set od[8]=$C350
	set gudong[9]=1227896130
	set nd[9]=7000
	set od[9]=$C350
	set gudong[10]='I05C'
	set nd[10]=$4E20
	set od[10]=$186A0
endfunction
//古董价格变动
function u5 takes nothing returns nothing
	// 随机猪地点
	// local location loc=GetRandomLocInRect(GetPlayableMapRect())
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cfffff000古董商人收购价格发生变动了~开始自动整理地图上的物品，也可以输入sort命令手动整理哦~")
	// 随机出现猪
	// call CreateNUnitsAtLoc(1,'nshf',Player(6),loc,bj_UNIT_FACING)
	// call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS,loc,5.)
	// call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cfffff000地图上随机位置出现了一只小猪，打掉有珍稀币送哦~")
	// call RemoveLocation(loc)
	set pd[1]=GetRandomInt(nd[1], od[1])
	set pd[2]=GetRandomInt(nd[2], od[2])
	set pd[3]=GetRandomInt(nd[3], od[3])
	set pd[4]=GetRandomInt(nd[4], od[4])
	set pd[5]=GetRandomInt(nd[5], od[5])
	set pd[6]=GetRandomInt(nd[6], od[6])
	set pd[7]=GetRandomInt(nd[7], od[7])
	set pd[8]=GetRandomInt(nd[8], od[8])
	set pd[9]=GetRandomInt(nd[9], od[9])
	set pd[10]=GetRandomInt(nd[10], od[10])
endfunction
//查询古董价格
function w5 takes nothing returns boolean
	return ( GetItemTypeId(GetManipulatedItem()) == 'I050' )
endfunction
function x5 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1
	set i=1
	loop
		exitwhen i > 10
		call createitemloc(gudong[i] , v7[9])
		if ( UnitHaveItem(u , gudong[i]) ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cff00ff00" + GetItemName(bj_lastCreatedItem) + "：" + I2S(pd[i]) + " ( " + I2S(nd[i]) + " ， " + I2S(od[i]) + " )")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 30, GetItemName(bj_lastCreatedItem) + "：" + I2S(pd[i]) + " ( " + I2S(nd[i]) + " ， " + I2S(od[i]) + " )")
		endif
		call RemoveItem(bj_lastCreatedItem)
		set i=i + 1
	endloop
	set u=null
	set p=null
endfunction
//卖古董
function B5 takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896114 ) )
endfunction
function b5 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1
 local integer j= 1
	set j=1
	loop
		exitwhen j > 6
		set i=1
		loop
			exitwhen i > 10
			if ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == gudong[i] ) ) then
				if not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(p) )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
					call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|CFF00FF00卖出" + ( GetItemName(UnitItemInSlotBJ(u, j)) + ( "，获得金钱+" + I2S(pd[i]) ) ) ))
					call commonAddGold(GetOwningPlayer(GetTriggerUnit()) , pd[i])
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|CFF00FF00你是鉴定师，以最高价格卖出" + ( GetItemName(UnitItemInSlotBJ(u, j)) + ( "，获得金钱+" + I2S(od[i]) ) ) ))
					call commonAddGold(GetOwningPlayer(GetTriggerUnit()) , od[i])
				endif
				call RemoveItem(UnitItemInSlotBJ(u, j))
			endif
			set i=i + 1
		endloop
		set j=j + 1
	endloop
	set u=null
	set p=null
endfunction
//收集古董
function CollectGuDong_Conditions takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I093' ) ) or ( ( GetItemTypeId(GetManipulatedItem()) == 'I094' ) ) or ( ( GetItemTypeId(GetManipulatedItem()) == 'I095' ) ) or ( ( GetItemTypeId(GetManipulatedItem()) == 'I096' ) )
endfunction
function CollectGuDong_Actions takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 'I093' then
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			if udg_gudongD == 0 then
				call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套D等级古董，我将送你一本秘籍")
				set udg_gudongD=1
			else
				if UnitHaveItem(u , 'I053') and UnitHaveItem(u , 'I054') and UnitHaveItem(u , 'I055') then
					call RemoveItem(FetchUnitItem(u , 'I053'))
					call RemoveItem(FetchUnitItem(u , 'I054'))
					call RemoveItem(FetchUnitItem(u , 'I055'))
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本江湖秘籍送给你了")
					call unitadditembyidswapped(udg_jianghu[GetRandomInt(1, 18)] , u)
					set udg_jdds[i]=udg_jdds[i] + 2
					if udg_jdds[i] <= 10 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
						call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" + I2S(udg_jdds[i]) + "分，得到10分可获得鉴定大师哦")
					endif
					//if Ce[1+GetPlayerId(p)]==4 then
					// call unitadditembyidswapped(udg_jianghu[GetRandomInt(1,18)],u)
					// call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本江湖秘籍吧")
					//endif
					set udg_gudongD=0
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套D古董哦")
				endif
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I094' then
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			if udg_gudongC == 0 then
				call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套C等级古董，我将送你一本秘籍")
				set udg_gudongC=1
			else
				if UnitHaveItem(u , 'I056') and UnitHaveItem(u , 'I057') and UnitHaveItem(u , 'I058') then
					call RemoveItem(FetchUnitItem(u , 'I056'))
					call RemoveItem(FetchUnitItem(u , 'I057'))
					call RemoveItem(FetchUnitItem(u , 'I058'))
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本绝学秘籍送给你了")
					call unitadditembyidswapped(udg_juexue[GetRandomInt(1, 10)] , u)
					set udg_jdds[i]=udg_jdds[i] + 4
					if udg_jdds[i] <= 10 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
						call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" + I2S(udg_jdds[i]) + "分，得到10分可获得鉴定大师哦")
					endif
					//   if Ce[1+GetPlayerId(p)]==4 then
					// call unitadditembyidswapped(udg_juexue[GetRandomInt(1,10)],u)
					// call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本绝学秘籍吧")
					//endif
					set udg_gudongC=0
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套C古董哦")
				endif
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I095' then
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			if udg_gudongB == 0 then
				call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套B等级古董，我将送你一本秘籍")
				set udg_gudongB=1
			else
				if UnitHaveItem(u , 'I059') and UnitHaveItem(u , 'I05A') and UnitHaveItem(u , 'I05B') then
					call RemoveItem(FetchUnitItem(u , 'I059'))
					call RemoveItem(FetchUnitItem(u , 'I05A'))
					call RemoveItem(FetchUnitItem(u , 'I05B'))
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本绝内秘籍送给你了")
					call unitadditembyidswapped(udg_juenei[GetRandomInt(1, 8)] , u)
					set udg_jdds[i]=udg_jdds[i] + 6
					if udg_jdds[i] <= 10 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
						call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" + I2S(udg_jdds[i]) + "分，得到10分可获得鉴定大师哦")
					endif
					//   if Ce[1+GetPlayerId(p)]==4 then
					// call unitadditembyidswapped(udg_juenei[GetRandomInt(1,8)],u)
					// call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本绝内秘籍吧")
					//endif
					set udg_gudongB=0
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套B古董哦")
				endif
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I096' then
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
			if udg_gudongA == 0 then
				call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集两个A等级古董，我将送你一本秘籍")
				set udg_gudongA=1
			else
				if UnitHaveItem(u , 'I05C') then
					call RemoveItem(FetchUnitItem(u , 'I05C'))
					if UnitHaveItem(u , 'I05C') then
						call RemoveItem(FetchUnitItem(u , 'I05C'))
						call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本残章送给你了")
						call unitadditembyidswapped(udg_canzhang[GetRandomInt(1, 10)] , u)
						set udg_jdds[i]=udg_jdds[i] + 10
						if udg_jdds[i] <= 10 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
							call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" + I2S(udg_jdds[i]) + "分，得到10分可获得鉴定大师哦")
						endif
						//   if Ce[1+GetPlayerId(p)]==4 then
						// call unitadditembyidswapped(udg_canzhang[GetRandomInt(1,10)],u)
						// call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本残章吧")
						//endif
						set udg_gudongA=0
					else
						call UnitAddItemById(u, 'I05C')
						call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐两个A古董哦")
					endif
				else
					call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐两个A古董哦")
				endif
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		endif
	endif
	if udg_jdds[i] >= 10 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
		set wuxing[i]=wuxing[i] + 10 // 悟性加10
call Deputy_setMaster(i , JIAN_DING)
		// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓鉴定大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得鉴定大师")
		call SetPlayerName(p, "〓鉴定大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	endif
	set u=null
	set p=null
endfunction


//--------守家积分换物品系统开始--------//
function IsJiFenHuan takes item it returns boolean
	if GetItemTypeId(it) == 'I06O' or GetItemTypeId(it) == 'I0A0' or GetItemTypeId(it) == 'I06S' or GetItemTypeId(it) == 'I06T' or GetItemTypeId(it) == 'I06R' or GetItemTypeId(it) == 'I06U' or GetItemTypeId(it) == 'I06P' or GetItemTypeId(it) == 'I06Q' then
		return true
	endif
	return false
endfunction
function JiFenHuan takes unit u,item it,integer id1,integer num,integer id2 returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer lumber= 0
 local integer gold= 0
	if GetItemTypeId(it) == id1 then
		if ( shoujiajf[i] >= num ) then
			set shoujiajf[i]=shoujiajf[i] - num
			if id1 == 'I06S' or id1 == 'I06T' or id1 == 'I06R' or id1 == 'I06U' or id1 == 'I06Q' then
				call unitadditembyidswapped(id2 , u)
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem))
			elseif id1 == 'I06P' then
				set lumber=IMaxBJ(8, 20 - udg_nandu * 2)
				call commonAddLumber(p , lumber)
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得珍稀币+" + I2S(lumber))
			elseif id1 == 'I06O' then
				set gold=IMaxBJ(2000, 8000 - udg_nandu * 1000)
				call commonAddGold(p , gold)
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得金钱+" + I2S(gold))
			elseif id1 == 'I0A0' then
				call unitadditembyidswapped(id2 , udg_hero[i])
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem))
			endif
			call DisplayTextToPlayer(p, 0, 0, "|cFF00CCff当前剩余守家积分：" + I2S(shoujiajf[i]))
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00守家积分不足")
		endif
	endif
	set p=null
endfunction
function BuyKuanDong takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and IsJiFenHuan(GetManipulatedItem()) )
endfunction
function KuanDongHua takes nothing returns nothing
 local unit u= GetTriggerUnit()
	call JiFenHuan(u , GetManipulatedItem() , 'I06O' , 20 , 300)
	call JiFenHuan(u , GetManipulatedItem() , 'I0A0' , 50 , 'I04T')
	call JiFenHuan(u , GetManipulatedItem() , 'I06S' , 200 , YaoCao[GetRandomInt(1, 12)])
	call JiFenHuan(u , GetManipulatedItem() , 'I06T' , 100 , 'I02N')
	call JiFenHuan(u , GetManipulatedItem() , 'I06R' , 300 , 'I06K')
	call JiFenHuan(u , GetManipulatedItem() , 'I06U' , 600 , 'I02L')
	call JiFenHuan(u , GetManipulatedItem() , 'I06P' , 100 , 5)
	call JiFenHuan(u , GetManipulatedItem() , 'I06Q' , 200 , 'I06N')
	set u=null
endfunction
//--------江湖声望换物品系统开始--------//
function IsShengWangHuan takes item it returns boolean
	if GetItemTypeId(it) == 'I0AO' or GetItemTypeId(it) == 'I0AP' or GetItemTypeId(it) == 'I0AQ' or GetItemTypeId(it) == 'I0AR' then
		return true
	endif
	return false
endfunction
function ShengWangHuan takes unit u,item it,integer id1,integer num,integer id2 returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetItemTypeId(it) == id1 then
		if ( shengwang[i] >= num ) then
			set shengwang[i]=shengwang[i] - num
			call unitadditembyidswapped(id2 , u)
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem))
			call DisplayTextToPlayer(p, 0, 0, "|cFF00CCff当前剩余江湖声望：" + I2S(shengwang[i]))
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00江湖声望不足")
		endif
	endif
	set p=null
endfunction
function BuyKuanDong_1 takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and IsShengWangHuan(GetManipulatedItem()) )
endfunction
function KuanDongHua_1 takes nothing returns nothing
 local unit u= GetTriggerUnit()
	call ShengWangHuan(u , GetManipulatedItem() , 'I0AO' , 200 , 'I06K')
	call ShengWangHuan(u , GetManipulatedItem() , 'I0AP' , 4000 , 'I08W')
	call ShengWangHuan(u , GetManipulatedItem() , 'I0AQ' , 2000 , 'I0AS')
	call ShengWangHuan(u , GetManipulatedItem() , 'I0AR' , 1000 , udg_canzhang[GetRandomInt(1, 10)])
	set u=null
endfunction
function IsWuXueJingYao takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0AS' )
endfunction
function WuXueJingYao takes nothing returns nothing
 local player p= GetOwningPlayer(GetTriggerUnit())
 local integer i= 1 + GetPlayerId(p)
 local unit u= udg_hero[i]
 local integer j= GetRandomInt(1, 8)
 local integer level= GetUnitAbilityLevel(u, I7[( i - 1 ) * 20 + j])
	if I7[( i - 1 ) * 20 + j] != 'A05R' then
		call IncUnitAbilityLevel(u, I7[( i - 1 ) * 20 + j])
		if GetUnitAbilityLevel(u, I7[( i - 1 ) * 20 + j]) == level then
			call unitadditembyidswapped('I0AS' , GetTriggerUnit())
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00随机到九重或无法升重的技能，使用武学精要失败")
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00恭喜技能" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "升重")
		endif
	else
		call unitadditembyidswapped('I0AS' , GetTriggerUnit())
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00随机到凌波微步，使用武学精要失败")
	endif
	set u=null
	set p=null
endfunction

// 内化被动武学条件
function isInternalize takes nothing returns boolean
	return GetSpellAbilityId() == 'A0F8'
endfunction
function canInternalize takes integer id returns boolean
	return id == 'A05G' or id == 'A07M' or id == 'S000' or id == 'A09E' or id == 'A09M' or id == 'A09U' or id == 'A0C9' or id == 'A0C8' or id == 'A0CA' or id == 'A08W' or id == 'A0CF' or id == 'A0CH' or id == 'A0CI' or id == 'A0CJ' or id == 'A0CK' or id == 'A0CD' or id == 'A0C7' or id == 'A0C2' or id == 'A04D' or id == 'A0BP' or id == 'A08T' or id == 'A02B' or id == 'A02G' or id == 'A0CC' or id == 'A07W' or id == 'A04M' or id == 'A04P' or id == 'A04R' or id == 'A059' or id == 'A056' or id == 'A08E' or id == 'A08G' or id == 'A06Y' or id == 'A070' or id == 'A0DP' or id == 'A09A' or id == 'A0B1' or id == 'A0BL' or id == 'A0DT' or id == 'A0EG' or id == 'A0EI' or id == ZAO_LEI_PI or id == BA_MIAN_LING_LONG or id == DA_GONG_GAO_CHENG or id == XUE_SHAN_JIAN_FA or id == JIN_WU_DAO_FA or id == XUAN_MING_SHEN_ZHANG or id == 'A07Q' or id == 'A07S' or id == 'A07T' or id == 'A07O' or id == 'A07R' or id == 'A082' or id == 'A084' or id == 'S002' or id == 'A07X' or id == 'A083' or id == 'A09D' or id == 'A0D2' or id == 'A0D6' or id == 'A0D1' or id == 'A0D3' or id == 'A03O' or id == 'A0CE' or id == 'A06S' or id == 'A036' or id == SONG_SHAN_JIAN_FA
endfunction
// 内化被动武学动作
function internalize takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 1
	if alreadyInternalizedCount[i] < interAbilityCount[i] then
		call DialogSetMessage(interDialog[i], "请选择要内化的武功（内化后无法遗忘）！")
		loop
			exitwhen j > 11
			if I7[( i - 1 ) * 20 + 1] != 'AEfk' and canInternalize(I7[( i - 1 ) * 20 + j]) then
				call SaveButtonHandle(YDHT, interButtonKey + i, j, DialogAddButtonBJ(interDialog[i], GetObjectName(I7[( i - 1 ) * 20 + j])))
			endif
			set j=j + 1
		endloop
		call SaveButtonHandle(YDHT, interButtonKey + i, 12, DialogAddButtonBJ(interDialog[i], "取消"))
		call DialogDisplay(p, interDialog[i], true)
	else
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000内化被动武功已达到上限！")
	endif
	set u=null
	set p=null
endfunction
function doInternalize takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
 local integer j= 1
	loop
		exitwhen j > 11
		if GetClickedButton() == LoadButtonHandle(YDHT, interButtonKey + i, j) then
			call SetPlayerAbilityAvailable(p, I7[( i - 1 ) * 20 + j], false)
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cff00ff00内化武功：" + GetObjectName(I7[( i - 1 ) * 20 + j]))
			set alreadyInternalizedCount[i]=alreadyInternalizedCount[i] + 1
			call SaveInteger(YDHT, interAbilityKey + i, alreadyInternalizedCount[i], I7[( i - 1 ) * 20 + j])
			set I7[( i - 1 ) * 20 + j]='AEfk'
			call refreshInterUI(i)
		endif
		set j=j + 1
	endloop
	call FlushChildHashtable(YDHT, interButtonKey + i)
	call DialogClear(interDialog[i])
	set p=null
endfunction
//遗忘武功
function YiWangJiNeng takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 1093678417 ) )
endfunction
function ForgetAbility takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 1
	if ( ( UnitHaveItem(u , 'I06K') ) ) or udg_yiwang[i] == true then
		call DialogSetMessage(K7[i], "请选择遗忘的武功（遗忘后无法找回）！")
		if ( ( I7[( i - 1 ) * 20 + 1] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 1]))
			set S4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 2] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 2]))
			set T4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 3] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 3]))
			set U4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 4] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 4]))
			set V4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 5] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 5]))
			set W4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 6] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 6]))
			set X4[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 7] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 7]))
			set J7[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 8] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 8]))
			set J78[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 9] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 9]))
			set J79[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 10] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 10]))
			set J710[i]=bj_lastCreatedButton
		endif
		if ( ( I7[( i - 1 ) * 20 + 11] != 'AEfk' ) ) then
			call DialogAddButtonBJ(K7[i], GetObjectName(I7[( i - 1 ) * 20 + 11]))
			set J711[i]=bj_lastCreatedButton
		endif
		call DialogAddButtonBJ(K7[i], "取消")
		set l7[i]=bj_lastCreatedButton
		call DialogDisplay(p, K7[i], true)
	else
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000遗忘武功需要消耗道具遗忘之石！")
	endif
	set u=null
	set p=null
endfunction
function Forget takes player p,integer num returns nothing
 local integer i= 1 + GetPlayerId(p)
 local integer level= 0
 local integer add= 0
 local group g= null
 local unit enumUnit= null
	if I7[( i - 1 ) * 20 + num] == 'A03N' and UnitHasBuffBJ(udg_hero[i], 'BOwk') then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|CFFFF9933" + GetObjectName(I7[( i - 1 ) * 20 + num]) + "施展期间不能遗忘！！！")
	else
		set S9=1
		loop
			exitwhen S9 > 20
			if ( ( I7[20 * ( i - 1 ) + num] == MM9[S9] ) ) then
				set udg_shanghaijiacheng[i]=( udg_shanghaijiacheng[i] - udg_jueneishjc[S9] )
				call ModifyHeroStat(1, udg_hero[i], 1, udg_jueneiminjie[S9])
				set juexuelingwu[i]=( juexuelingwu[i] - udg_jueneijxlw[S9] )
				set udg_baojilv[i]=( udg_baojilv[i] - udg_jueneibaojilv[S9] )
				set udg_shanghaixishou[i]=( udg_shanghaixishou[i] - udg_jueneishxs[S9] )
			endif
			set S9=S9 + 1
		endloop
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|CFFFF9933成功遗忘技能：" + GetObjectName(I7[( i - 1 ) * 20 + num]))
		call UnitRemoveAbility(udg_hero[i], I7[20 * ( i - 1 ) + num])
		if I7[( i - 1 ) * 20 + num] == 'A03P' then
			call UnitRemoveAbility(udg_hero[i], 'A03M')
		endif
		// 须弥山掌
		if I7[( i - 1 ) * 20 + num] == 'A03T' then
			call UnitRemoveAbility(udg_hero[i], 'A0DB')
		endif
		// 圣火令神功
		if I7[( i - 1 ) * 20 + num] == 'A034' then
			call UnitRemoveAbility(udg_hero[i], 'A035')
			set g=CreateGroup()
			call GroupEnumUnitsOfPlayer(g, p, null)
			loop
				set enumUnit=FirstOfGroup(g)
				exitwhen enumUnit == null
				if GetUnitTypeId(enumUnit) == 'e013' then
					call KillUnit(enumUnit)
				endif
				call GroupRemoveUnit(g, enumUnit)
			endloop
			call DestroyGroup(g)
		endif
		if I7[20 * ( i - 1 ) + num] == 'A02B' then
			set udg_zhemei[i]=0
		endif
		if I7[( i - 1 ) * 20 + num] == QI_MEN_SHU_SHU then
			if Player(i - 1) == GetLocalPlayer() then
				call s__Frame_hide(qimen_widget)
			endif
		endif
		if I7[( i - 1 ) * 20 + num] == 'A0B6' then // 六合经
call UnitRemoveAbility(udg_hero[i], 'A0B5')
			set liuHeFlag[i]=0
		endif
		if I7[20 * ( i - 1 ) + num] == 'A0DP' then // 归元吐纳功
set level=GetUnitAbilityLevel(udg_hero[i], I7[20 * ( i - 1 ) + num])
			set fuyuan[i]=fuyuan[i] - 2 * level
			set gengu[i]=gengu[i] - 2 * level
			set wuxing[i]=wuxing[i] - 2 * level
			set jingmai[i]=jingmai[i] - 2 * level
			set danpo[i]=danpo[i] - 2 * level
			set yishu[i]=yishu[i] - 2 * level
		endif
		set I7[20 * ( i - 1 ) + num]='AEfk'
		call RemoveItem(FetchUnitItem(P4[i] , 'I06K'))
		// 嫁衣神功 增加三围
		if GetUnitAbilityLevel(udg_hero[i], JIA_YI_SHEN_GONG) > 0 then
			set add=GetUnitAbilityLevel(udg_hero[i], JIA_YI_SHEN_GONG) + GetRandomInt(1, 5)
			if isTitle(i , 49) then
				// 绍敏郡主称号 增加值翻倍
				set add=add * 2
			endif
			if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
				// 郡主称号 增加值翻倍
				set add=add * 2
			endif
			call ModifyHeroStat(0, udg_hero[i], 0, add)
			call ModifyHeroStat(1, udg_hero[i], 0, add)
			call ModifyHeroStat(2, udg_hero[i], 0, add)
			call DisplayTextToPlayer(p, 0, 0, "|cffffcc00发动了嫁衣神功，|r 增加三围：" + I2S(add))
			call WuGongShengChong(udg_hero[i] , JIA_YI_SHEN_GONG , 150)
		endif
	endif
	set g=null
	set enumUnit=null
endfunction
function jB takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetClickedButton() == S4[i] ) ) then
		call Forget(p , 1)
	elseif ( ( GetClickedButton() == T4[i] ) ) then
		call Forget(p , 2)
	elseif ( ( GetClickedButton() == U4[i] ) ) then
		call Forget(p , 3)
	elseif ( ( GetClickedButton() == V4[i] ) ) then
		call Forget(p , 4)
	elseif ( ( GetClickedButton() == W4[i] ) ) then
		call Forget(p , 5)
	elseif ( ( GetClickedButton() == X4[i] ) ) then
		call Forget(p , 6)
	elseif ( ( GetClickedButton() == J7[i] ) ) then
		call Forget(p , 7)
	elseif ( ( GetClickedButton() == J78[i] ) ) then
		call Forget(p , 8)
	elseif ( ( GetClickedButton() == J79[i] ) ) then
		call Forget(p , 9)
	elseif ( ( GetClickedButton() == J710[i] ) ) then
		call Forget(p , 10)
	elseif ( ( GetClickedButton() == J711[i] ) ) then
		call Forget(p , 11)
	endif
	call DialogClear(K7[i])
	set p=null
endfunction
function GetBookNum takes integer id returns integer
 local integer i= 1
	loop
		exitwhen i > MAX_WU_GONG_NUM
		if LoadInteger(YDHT, StringHash("武学") + i, 1) == id then
			return i
		endif
		set i=i + 1
	endloop
	return 0
endfunction
function LearnJiNeng takes unit l__ut,item it returns nothing
 local player p= GetOwningPlayer(l__ut)
 local integer i= 1 + GetPlayerId(p)
 local unit u= udg_hero[i]
 local integer num= GetBookNum(GetItemTypeId(it))
 local integer id= LoadInteger(YDHT, StringHash("武学") + num, 2)
 local integer dp1= LoadInteger(YDHT, StringHash("武学") + num, 4)
 local integer fy1= LoadInteger(YDHT, StringHash("武学") + num, 5)
 local integer gg1= LoadInteger(YDHT, StringHash("武学") + num, 6)
 local integer jm1= LoadInteger(YDHT, StringHash("武学") + num, 7)
 local integer wx1= LoadInteger(YDHT, StringHash("武学") + num, 8)
 local integer ys1= LoadInteger(YDHT, StringHash("武学") + num, 9)
	if ( GetUnitAbilityLevel(u, id) > 0 ) then
		call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经拥有此武功了")
		call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
	else
		if ( danpo[i] >= dp1 and fuyuan[i] >= fy1 and gengu[i] >= gg1 and jingmai[i] >= jm1 and wuxing[i] >= wx1 and yishu[i] >= ys1 ) then
			if id == 'A03Q' then
				call UnitAddAbility(u, id)
				call UnitMakeAbilityPermanent(u, true, id)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得" + GetObjectName(id))
				call AddPlayerTechResearched(p, 'Rhri', 1)
			else
				set L7[i]=1
				loop
					exitwhen L7[i] > wugongshu[i]
					if ( I7[20 * ( i - 1 ) + L7[i]] != 'AEfk' ) then
						if ( ( L7[i] == wugongshu[i] ) ) then
							call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习技能已达上限，请先遗忘部分技能")
							call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
						endif
					else
						call UnitAddAbility(u, id)
						call UnitMakeAbilityPermanent(u, true, id)
						if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5) >= 2 then
							call SetUnitAbilityLevel(u, id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5))
						endif
						set I7[20 * ( i - 1 ) + L7[i]]=id
						if GetUnitAbilityLevel(u, id) >= 2 then
							call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "想起" + GetObjectName(id))
						else
							call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得" + GetObjectName(id))
						endif
						set S9=1
						loop
							exitwhen S9 > 20
							if ( id == MM9[S9] ) then
								set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
								call ModifyHeroStat(1, u, 0, udg_jueneiminjie[S9])
								set udg_baojilv[i]=udg_baojilv[i] + udg_jueneibaojilv[S9]
								set juexuelingwu[i]=juexuelingwu[i] + udg_jueneijxlw[S9]
								set udg_shanghaixishou[i]=udg_shanghaixishou[i] + udg_jueneishxs[S9]
							endif
							set S9=S9 + 1
						endloop
						exitwhen true
					endif
					set L7[i]=L7[i] + 1
				endloop
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习条件不足")
			if ( danpo[i] >= dp1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033胆魄缺少：" + I2S(dp1 - danpo[i]))
			endif
			if ( gengu[i] >= gg1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033根骨缺少：" + I2S(gg1 - gengu[i]))
			endif
			if ( fuyuan[i] >= fy1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033福缘缺少：" + I2S(fy1 - fuyuan[i]))
			endif
			if ( wuxing[i] >= wx1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033悟性缺少：" + I2S(wx1 - wuxing[i]))
			endif
			if ( jingmai[i] >= jm1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033经脉缺少：" + I2S(jm1 - jingmai[i]))
			endif
			if ( yishu[i] >= ys1 ) then
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033医术缺少：" + I2S(ys1 - yishu[i]))
			endif
			call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
		endif
	endif
	set p=null
	set u=null
endfunction
//学习武功
function IsWuGongBook takes nothing returns boolean
	return ( GetBookNum(GetItemTypeId(GetManipulatedItem())) != 0 )
endfunction
function BookLearnWuGong takes nothing returns nothing
	call LearnJiNeng(GetTriggerUnit() , GetManipulatedItem())
endfunction
//内功加成属性
function NeiGongJiaCheng takes integer i,integer id,real baoji,real shxs,integer jxlw,integer minjie,real shjc returns nothing
	set MM9[i]=id
	set udg_jueneibaojilv[i]=baoji
	set udg_jueneishxs[i]=shxs
	set udg_jueneijxlw[i]=jxlw
	set udg_jueneiminjie[i]=minjie
	set udg_jueneishjc[i]=shjc
endfunction
function NeiGongJiaChengS takes nothing returns nothing
	//序号、ID、暴击率、伤害吸收、绝学领悟、内力、伤害加成
	call NeiGongJiaCheng(1 , 'A0D8' , .15 , .2 , 5 , 30 , 1.)
	call NeiGongJiaCheng(2 , 1093679154 , .08 , .25 , 4 , 150 , .4)
	call NeiGongJiaCheng(3 , 'A083' , .05 , .3 , 3 , 100 , .3)
	call NeiGongJiaCheng(4 , 'A09D' , .06 , .4 , 4 , 120 , .8)
	call NeiGongJiaCheng(5 , 1093679152 , .12 , .2 , 3 , 130 , .7)
	call NeiGongJiaCheng(6 , 'A07X' , .16 , .15 , 3 , 60 , .5)
	call NeiGongJiaCheng(7 , 'A084' , .1 , .1 , 2 , 80 , .6)
	call NeiGongJiaCheng(8 , 1395666994 , .2 , .2 , 1 , 50 , .9)
	call NeiGongJiaCheng(9 , 'A07O' , .04 , 0 , 0 , 25 , .2)
	call NeiGongJiaCheng(10 , 'A07P' , .06 , 0 , 0 , 30 , .12)
	call NeiGongJiaCheng(11 , 'A07Q' , .08 , 0 , 0 , 30 , .14)
	call NeiGongJiaCheng(12 , 1093678930 , .06 , 0 , 0 , 20 , .15)
	call NeiGongJiaCheng(13 , 'A07S' , .1 , 0 , 0 , 40 , .25)
	call NeiGongJiaCheng(14 , 1093678932 , .1 , 0 , 0 , 30 , .3)
	call NeiGongJiaCheng(15 , 'A07U' , .07 , 0 , 0 , 50 , .18)
	call NeiGongJiaCheng(16 , 1093678935 , .09 , 0 , 0 , 50 , .1)
	call NeiGongJiaCheng(17 , 'A0DN' , .03 , 0 , 0 , 40 , .18)
	call NeiGongJiaCheng(18 , 'A0D2' , .2 , 0 , 0 , 80 , .5)
	call NeiGongJiaCheng(19 , 'A0D6' , .8 , 0 , 0 , 10 , .15)
	call NeiGongJiaCheng(20 , 'A0D4' , - 0.2 , 0 , 0 , - 40 , - 0.25)
endfunction
//------学习武功系统结束------
//------武功效果系统开始------
function uC takes nothing returns boolean
	return ( ( UnitHasBuffBJ(GetAttacker(), 'B002') ) )
endfunction
function vC takes nothing returns nothing
 local unit u= GetAttacker()
	call percentDamage(u , 0.1 , true)
	set u=null
endfunction
function xC takes nothing returns boolean
	return ( ( UnitHasBuffBJ(GetAttacker(), 1112437615) ) )
endfunction
function yC takes nothing returns nothing
 local unit u= GetAttacker()
	call percentDamage(u , 0.3 , true)
	set u=null
endfunction
function AC takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit()) and ( UnitHasBuffBJ(GetFilterUnit(), 'BEsh') or UnitHasBuffBJ(GetFilterUnit(), 'B01J') or UnitHasBuffBJ(GetFilterUnit(), 'B003') or UnitHasBuffBJ(GetFilterUnit(), 'Bcri') or UnitHasBuffBJ(GetFilterUnit(), 1110454324) or UnitHasBuffBJ(GetFilterUnit(), 1110454342) or UnitHasBuffBJ(GetFilterUnit(), 1110454343) )
endfunction
function aC takes nothing returns nothing
 local location loc= GetUnitLoc(GetEnumUnit())
 local location loc2= null
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 'BEsh') ) ) then
		call percentDamage(GetEnumUnit() , 0.1 , true)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 'B01J') ) ) then
		call percentDamage(GetEnumUnit() , 0.3 , true)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 'B003') ) ) then
		call percentDamage(GetEnumUnit() , 0.5 , true)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 'Bcri') ) ) then
		set loc2=pu(loc , 256. , GetRandomReal(0, 360.))
		call IssuePointOrderByIdLoc(GetEnumUnit(), $D0012, loc2)
		call RemoveLocation(loc2)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 1110454324) ) ) then
		call percentDamage(GetEnumUnit() , 1 , true)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 1110454342) ) ) then
		if ( ( ModuloInteger(GetUnitPointValue(GetEnumUnit()), 10) != 0 ) ) then
			call percentDamage(GetEnumUnit() , 1 , true)
		else
			call percentDamage(GetEnumUnit() , 3 , true)
		endif
		call CreateTextTagLocBJ("脑神丹效果", loc, 60., 12., 65., 55., 42., 0)
		call Nw(3. , bj_lastCreatedTextTag)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
	endif
	if ( ( UnitHasBuffBJ(GetEnumUnit(), 1110454343) ) ) then
		//if(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<=0.03*GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))then
		//	call SetWidgetLife(GetEnumUnit(),1.)
		//else
		call SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.03 * GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE))
		//endif
		call CreateTextTagLocBJ("化尸粉效果", loc, 60., 12., 65., 55., 42., 0)
		call Nw(3. , bj_lastCreatedTextTag)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
	endif
	call RemoveLocation(loc)
	set loc=null
	set loc2=null
endfunction
//每秒钟做一次
function BC takes nothing returns nothing
	call ForGroupBJ(wv(bj_mapInitialPlayableArea , Condition(function AC)), function aC)
endfunction
//-----激活残章-----
function ActCanZhang takes unit l__ut,item it,integer id1,integer lwd,integer id2,integer id3,integer id4,string s,integer flag returns integer
 local player p= GetOwningPlayer(l__ut)
 local integer i= 1 + GetPlayerId(p)
 local unit u= udg_hero[i]
	if ( GetUnitAbilityLevel(u, id1) <= 0 ) then
		call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你尚未学会该武功，无法激活隐藏招式")
		call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
	else
		if ( ( flag >= 1 ) ) then
			call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你之前已经激活过了")
			call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
		else
			if ( juexuelingwu[i] >= lwd and GetUnitAbilityLevel(u, id2) != 0 and GetUnitAbilityLevel(u, id3) != 0 and GetUnitAbilityLevel(u, id4) != 0 ) then
				set flag=1
				call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了" + s)
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033条件不足，激活失败")
				call unitadditembyidswapped(GetItemTypeId(it) , l__ut)
			endif
		endif
	endif
	set u=null
	set p=null
	return flag
endfunction
function CC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896371 ) )
endfunction
function cC takes nothing returns nothing
	set Jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07H' , 5 , 1093678935 , 'A07U' , 1093679152 , "反两仪刀法第1式：行气如虹" , Jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function EC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896370 ) )
endfunction
function FC takes nothing returns nothing
	set Id[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A085' , 5 , 'A07P' , 1093678930 , 1093679154 , "六脉神剑第1式：少商剑" , Id[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function HC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896369 ) )
endfunction
function IC takes nothing returns nothing
	set Qd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07L' , 5 , 1093679154 , 'A07Q' , 'A0DN' , "打狗棒法第1式：恶狗拦路" , Qd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function JC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896374 ) )
endfunction
function KC takes nothing returns nothing
	set ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07F' , 5 , 'A09D' , 1093679152 , 'A071' , "独孤九剑第1式：破剑式" , ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function MC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896372 ) )
endfunction
function NC takes nothing returns nothing
	set Od[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A086' , 5 , 'A083' , 'A07X' , 'A06M' , "胡家刀法第1式：八方藏刀式" , Od[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function PC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896368 ) )
endfunction
function QC takes nothing returns nothing
	set Pd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A089' , 5 , 'A084' , 'A0D2' , 'A07S' , "西毒棍法第1式：蛇盘青竹" , Pd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function SC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896377 ) )
endfunction
function TC takes nothing returns nothing
	set Kd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07J' , 5 , 'A06J' , 1093678932 , 1395666994 , "辟邪剑法第1式：流星赶月" , Kd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function VC takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227896376 ) )
endfunction
function WC takes nothing returns nothing
	set Ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07I' , 5 , 'A07N' , 'A0D8' , 'A07X' , "野球拳第1式：翻肘裂捶" , Ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function YC takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 1227896375
endfunction
function ZC takes nothing returns nothing
	set Nd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07E' , 5 , 'A0D8' , 'A07O' , 'A0DN' , "降龙十八掌第1式：神龙摆尾" , Nd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function ec takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I065' ) )
endfunction
function gc takes nothing returns nothing
	set Md[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A07G' , 5 , 'A06H' , 'A07S' , 'A084' , "黯然销魂掌第1式：无中生有" , Md[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
//九阳真经残卷
function isJiuYangCanJuan takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I0CW' ) )
endfunction
function jiuYangCanJuan takes nothing returns nothing
	set JYd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=ActCanZhang(GetTriggerUnit() , GetManipulatedItem() , 'A0DN' , 5 , 'A0DN' , 'A09D' , 'A07X' , "九阳真经残卷" , JYd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
//武魂石系统
function IsWuHunShi takes nothing returns boolean
	if ( GetItemTypeId(GetManipulatedItem()) == 'I09Q' ) then
		if ( De[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false and Ee[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false ) then
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFFFF0033未集齐决战套装或江湖套装，激活失败")
			return false
		else
			return true
		endif
	endif
	return false
endfunction
function WuHunShi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call DialogClear(wuhun)
	call RemoveItem(GetManipulatedItem())
	call DialogSetMessage(wuhun, "请选择要激活的残章")
	if Jd[i] == 0 then
		set wuhun1[1]=DialogAddButtonBJ(wuhun, "反两仪刀法")
	endif
	if Id[i] == 0 then
		set wuhun1[2]=DialogAddButtonBJ(wuhun, "六脉神剑")
	endif
	if Qd[i] == 0 then
		set wuhun1[3]=DialogAddButtonBJ(wuhun, "打狗棒法")
	endif
	if ld[i] == 0 then
		set wuhun1[4]=DialogAddButtonBJ(wuhun, "独孤九剑")
	endif
	if Od[i] == 0 then
		set wuhun1[5]=DialogAddButtonBJ(wuhun, "胡家刀法")
	endif
	if Pd[i] == 0 then
		set wuhun1[6]=DialogAddButtonBJ(wuhun, "西毒棍法")
	endif
	if Kd[i] == 0 then
		set wuhun1[7]=DialogAddButtonBJ(wuhun, "辟邪剑法")
	endif
	if Ld[i] == 0 then
		set wuhun1[8]=DialogAddButtonBJ(wuhun, "野球拳法")
	endif
	if Nd[i] == 0 then
		set wuhun1[9]=DialogAddButtonBJ(wuhun, "降龙十八掌")
	endif
	if Md[i] == 0 then
		set wuhun1[10]=DialogAddButtonBJ(wuhun, "黯然销魂掌")
	endif
	set wuhun1[11]=DialogAddButtonBJ(wuhun, "取消")
	call DialogDisplay(p, wuhun, true)
	set u=null
	set p=null
endfunction
function JiHuoCanZhang takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if GetClickedButton() == wuhun1[1] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了反两仪刀法第1式：行气如虹")
		set Jd[i]=1
	endif
	if GetClickedButton() == wuhun1[2] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了六脉神剑第1式：少商剑")
		set Id[i]=1
	endif
	if GetClickedButton() == wuhun1[3] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了打狗棒法第1式：恶狗拦路")
		set Qd[i]=1
	endif
	if GetClickedButton() == wuhun1[4] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了独孤九剑第1式：破剑式")
		set ld[i]=1
	endif
	if GetClickedButton() == wuhun1[5] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了胡家刀法第1式：八方藏刀式")
		set Od[i]=1
	endif
	if GetClickedButton() == wuhun1[6] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了西毒棍法第1式：蛇盘青竹")
		set Pd[i]=1
	endif
	if GetClickedButton() == wuhun1[7] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了辟邪剑法第1式：流星赶月")
		set Kd[i]=1
	endif
	if GetClickedButton() == wuhun1[8] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了野球拳第1式：翻肘裂捶")
		set Ld[i]=1
	endif
	if GetClickedButton() == wuhun1[9] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了降龙十八掌第1式：神龙摆尾")
		set Nd[i]=1
	endif
	if GetClickedButton() == wuhun1[10] then
		call DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了黯然销魂掌第1式：无中生有")
		set Md[i]=1
	endif
	if GetClickedButton() == wuhun1[11] then
		call UnitAddItemById(P4[i], 'I09Q')
	endif
	set p=null
endfunction
//学习门派内功
function pR takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895856 ) ) // INLINED!!
endfunction
function LearnNeiGong takes nothing returns nothing
 local button b= GetClickedButton()
 local unit u= LoadUnitHandle(YDHT, StringHash("门派内功"), 3)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer id= LoadInteger(YDHT, StringHash("门派内功"), 4)
 local player p= GetOwningPlayer(u)
	if b == LoadButtonHandle(YDHT, StringHash("门派内功"), 1) then
		call UnitAddAbility(u, denomFourth[id])
		call UnitMakeAbilityPermanent(u, true, denomFourth[id])
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, ( "|cff00FF66恭喜领悟技能：" + GetObjectName(denomFourth[id]) ))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" + I2S(1 + GetPlayerId(p)) + "成为" + udg_menpainame[udg_runamen[i]] + "长老")
		call SetPlayerName(p, "〓" + udg_menpainame[udg_runamen[i]] + "长老〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set L7[i]=1
		loop
			exitwhen L7[i] > wugongshu[i]
			if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
			else
				set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomFourth[id]
				exitwhen true
			endif
			set L7[i]=L7[i] + 1
		endloop
	elseif b == LoadButtonHandle(YDHT, StringHash("门派内功"), 2) then
		// 明教乾坤
		if denomFifth[id] == 'A07W' then
			if GetUnitAbilityLevel(u, 'A07W') >= 1 then
				call IncUnitAbilityLevel(u, denomFifth[id])
			else
				call UnitAddAbility(u, denomFifth[id])
				set L7[i]=1
				loop
					exitwhen L7[i] > wugongshu[i]
					if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
					else
						set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomFifth[id]
						exitwhen true
					endif
					set L7[i]=L7[i] + 1
				endloop
			endif
			call IncUnitAbilityLevel(u, denomFifth[id])
		else
			call UnitAddAbility(u, denomFifth[id])
			if denomFifth[id] == 'A0DP' then // 归元吐纳功
set fuyuan[i]=fuyuan[i] + 2
				set gengu[i]=gengu[i] + 2
				set wuxing[i]=wuxing[i] + 2
				set jingmai[i]=jingmai[i] + 2
				set danpo[i]=danpo[i] + 2
				set yishu[i]=yishu[i] + 2
			endif
			if denomFifth[id] == QI_MEN_SHU_SHU then
				if Player(i - 1) == GetLocalPlayer() then
					call s__Frame_show(qimen_widget)
				endif
			endif
			call UnitMakeAbilityPermanent(u, true, denomFifth[id])
			set L7[i]=1
			loop
				exitwhen L7[i] > wugongshu[i]
				if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
				else
					set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=denomFifth[id]
					exitwhen true
				endif
				set L7[i]=L7[i] + 1
			endloop
		endif
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, ( "|cff00FF66恭喜领悟技能：" + GetObjectName(denomFifth[id]) ))
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" + I2S(1 + GetPlayerId(p)) + "成为" + udg_menpainame[udg_runamen[i]] + "长老")
		call SetPlayerName(p, "〓" + udg_menpainame[udg_runamen[i]] + "长老〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	endif
	call DialogClear(udg_menpaineigong)
	call FlushChildHashtable(YDHT, StringHash("门派内功"))
	call DialogDestroy(udg_menpaineigong)
	set udg_menpaineigong=null
	set b=null
	set u=null
	set p=null
endfunction
function qR takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
 local button b1= null
 local button b2= null
 local trigger t= CreateTrigger()
 local integer j= 0
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, i)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( UnitHaveItem(GetTriggerUnit() , 1227895642) == false ) ) then
		call DisplayTextToPlayer(Player(- 1 + i), 0, 0, "|CFF34FF00你必须携带门派毕业卷才能获得修习资格")
	else
		if ( ( O8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call DisplayTextToPlayer(Player(- 1 + i), 0, 0, "|CFF34FF00你已经修行过了")
		else
			if GetUnitAbilityLevel(udg_hero[i], denomSecond[udg_runamen[i]]) < 2 and udg_runamen[i] != 25 then
				call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "你的" + GetAbilityName(denomSecond[udg_runamen[i]]) + "|r还没修炼到位")
			else
				set j=1
				loop
					exitwhen j > wugongshu[i]
					if ( I7[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) * 20 + j] ) != 'AEfk' then
						//call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"j="+I2S(j))
						if j == wugongshu[i] then
							call DisplayTextToPlayer(Player(- 1 + i), 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
						endif
					else
						set O8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
						call RemoveItem(FetchUnitItem(GetTriggerUnit() , 1227895642))
						set bj_forLoopBIndex=1
						set bj_forLoopBIndexEnd=DENOMINATION_NUMBER
						loop
							exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
							if ( ( udg_runamen[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 11 ) ) then
								call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "自由门派没有内功")
								exitwhen true
							else
								if ( ( udg_runamen[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == bj_forLoopBIndex ) ) then
									set udg_menpaineigong=DialogCreate()
									call DialogSetMessage(udg_menpaineigong, "请选择你要修习的内功")
									set b1=DialogAddButtonBJ(udg_menpaineigong, GetObjectName(denomFourth[bj_forLoopBIndex]))
									set b2=DialogAddButtonBJ(udg_menpaineigong, GetObjectName(denomFifth[bj_forLoopBIndex]))
									call SaveButtonHandle(YDHT, StringHash("门派内功"), 1, b1)
									call SaveButtonHandle(YDHT, StringHash("门派内功"), 2, b2)
									call SaveUnitHandle(YDHT, StringHash("门派内功"), 3, GetTriggerUnit())
									call SaveInteger(YDHT, StringHash("门派内功"), 4, bj_forLoopBIndex)
									call DialogDisplay(GetOwningPlayer(GetTriggerUnit()), udg_menpaineigong, true)
									call TriggerRegisterDialogEvent(t, udg_menpaineigong)
									call TriggerAddAction(t, function LearnNeiGong)
								endif
							endif
							set bj_forLoopBIndex=bj_forLoopBIndex + 1
						endloop
						exitwhen true
					endif
					set j=j + 1
				endloop
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
	set b1=null
	set b2=null
	set t=null
endfunction

//===========================================================================
//合成物品
function HeCheng_Conditions takes nothing returns boolean
	//call BJDebugMsg(I2S(GetUnitTypeId(GetTriggerUnit())))
	return (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) or GetItemTypeId(GetManipulatedItem()) == 'I099' or GetItemTypeId(GetManipulatedItem()) == 'I09A' or GetItemTypeId(GetManipulatedItem()) == 'I09B' or GetItemTypeId(GetManipulatedItem()) == 'I09D' or GetItemTypeId(GetManipulatedItem()) == 'I0DL' or GetItemTypeId(GetManipulatedItem()) == 'I0DJ' or GetItemTypeId(GetManipulatedItem()) == 'I02T' // INLINED!!
endfunction
function HeCheng_Actions takes nothing returns nothing
	//二合一
	//if GetItemTypeId(GetManipulatedItem()) == 'I09C' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
 //   	call YDWENewItemsFormula( 'I09C', 1, 'I09P', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I00B' )
	//endif
	//if GetItemTypeId(GetManipulatedItem()) == 'I098' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
 //   	call YDWENewItemsFormula( 'I098', 1, 'I09P', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I00D' )
	//endif
	// if GetItemTypeId(GetManipulatedItem()) == 'I00B' or GetItemTypeId(GetManipulatedItem()) == 'I00D' then
	// 	call YDWENewItemsFormula( 'I00B', 1, 'I00D', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I00D' )
	// endif
	if GetItemTypeId(GetManipulatedItem()) == 'I02S' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
		call YDWENewItemsFormula('I02S' , 1 , 'I09P' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I02M')
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I02M' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
		call YDWENewItemsFormula('I02M' , 1 , 'I09P' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I02Q')
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I02Q' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
		call YDWENewItemsFormula('I02Q' , 1 , 'I09P' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I02R')
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I02R' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
		call YDWENewItemsFormula('I02R' , 1 , 'I09P' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I02P')
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I099' or GetItemTypeId(GetManipulatedItem()) == 'I09A' then
		call YDWENewItemsFormula('I099' , 1 , 'I09A' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I09C')
	endif
	// 新手神器lv1+星云合成lv2
	if GetItemTypeId(GetManipulatedItem()) == 'I0DJ' or GetItemTypeId(GetManipulatedItem()) == 'I01I' then
		call YDWENewItemsFormula('I0DJ' , 1 , 'I01I' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I0DL')
	endif
	// 新手神器lv2+七绝合成新手神器
	if GetItemTypeId(GetManipulatedItem()) == 'I0DL' or GetItemTypeId(GetManipulatedItem()) == 'I01J' then
		call YDWENewItemsFormula('I0DL' , 1 , 'I01J' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I0DB')
	endif
	// 4大雁合成神雕
	if GetItemTypeId(GetManipulatedItem()) == 'I02T' then
		call YDWENewItemsFormula('I02T' , 1 , 'I02T' , 1 , 'I02T' , 1 , 'I02T' , 1 , 'ches' , 0 , 'ches' , 0 , 'I04A')
	endif
	//三合一
	if GetItemTypeId(GetManipulatedItem()) == 'I053' or GetItemTypeId(GetManipulatedItem()) == 'I058' or GetItemTypeId(GetManipulatedItem()) == 'I05A' then
		call YDWENewItemsFormula('I053' , 1 , 'I058' , 1 , 'I05A' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I05C')
	endif
	//四合一
	//五合一
	//六合一
	if GetItemTypeId(GetManipulatedItem()) == 'I02P' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
		call YDWENewItemsFormula('I02P' , 1 , 'I09P' , 1 , 'I09P' , 1 , 'I09P' , 1 , 'I09P' , 1 , 'I09P' , 1 , 'I08V')
	endif
endfunction
//锻造大师补属性
function DZDSBuShuXing takes unit u returns nothing
 local integer ii7= 0
 local integer ii8= 0
 local integer ii9= 0
 local item it= null
 local integer j= 1
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	loop
		exitwhen j >= 7
		set it=UnitItemInSlotBJ(u, j)
		set ii7=ModuloInteger(( GetItemUserData(it) / 100 ), 10)
		set ii8=ModuloInteger(( GetItemUserData(it) / 10 ), 10)
		set ii9=ModuloInteger(( GetItemUserData(it) / 1 ), 10)
		//call BJDebugMsg("第"+I2S(j)+"格子物品的数值为"+I2S(ii7*100+ii8*10+ii9))
		if ( ii7 == 1 ) then
			set gengu[i]=gengu[i] + 2
		elseif ( ii7 == 2 ) then
			set wuxing[i]=wuxing[i] + 2
		elseif ( ii7 == 3 ) then
			set jingmai[i]=jingmai[i] + 2
		elseif ( ii7 == 4 ) then
			set fuyuan[i]=fuyuan[i] + 2
		elseif ( ii7 == 5 ) then
			set danpo[i]=danpo[i] + 2
		elseif ( ii7 == 6 ) then
			set yishu[i]=yishu[i] + 2
		endif
		if ( ii8 == 1 ) then
			set gengu[i]=gengu[i] + 2
		elseif ( ii8 == 2 ) then
			set wuxing[i]=wuxing[i] + 2
		elseif ( ii8 == 3 ) then
			set jingmai[i]=jingmai[i] + 2
		elseif ( ii8 == 4 ) then
			set fuyuan[i]=fuyuan[i] + 2
		elseif ( ii8 == 5 ) then
			set danpo[i]=danpo[i] + 2
		elseif ( ii8 == 6 ) then
			set yishu[i]=yishu[i] + 2
		endif
		if ( ii9 == 1 ) then
			set gengu[i]=gengu[i] + 2
		elseif ( ii9 == 2 ) then
			set wuxing[i]=wuxing[i] + 2
		elseif ( ii9 == 3 ) then
			set jingmai[i]=jingmai[i] + 2
		elseif ( ii9 == 4 ) then
			set fuyuan[i]=fuyuan[i] + 2
		elseif ( ii9 == 5 ) then
			set danpo[i]=danpo[i] + 2
		elseif ( ii9 == 6 ) then
			set yishu[i]=yishu[i] + 2
		endif
		set j=j + 1
	endloop
	set it=null
endfunction
//为合成的武器增加耐久度
function WuPinHeCheng takes nothing returns nothing
 local item it= (bj_lastCombinedItem) // INLINED!!
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and LoadBoolean(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetItemTypeId(it)) == false and udg_dzds[i] < 4 then // INLINED!!
		set udg_dzds[i]=udg_dzds[i] + 1
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF66FF00恭喜您锻造成功第" + I2S(udg_dzds[i]) + "件装备，锻造成功4件装备可以获得锻造大师哦")
		call SaveBoolean(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetItemTypeId(it), true)
	endif
	if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and udg_dzds[i] >= 4 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
		call Deputy_setMaster(i , DUAN_ZAO)
		call DZDSBuShuXing(udg_hero[i])
		// call SaveStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit())),"〓锻造大师〓"+LoadStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit()))))
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "获得锻造大师")
		call SetPlayerName(GetOwningPlayer(GetTriggerUnit()), "〓锻造大师〓" + LoadStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit()))))
	endif
	set it=null
endfunction

function HeCheng2_Dzds takes integer i returns nothing
	if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and udg_dzds[i] < 4 then // INLINED!!
		set udg_dzds[i]=udg_dzds[i] + 1
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF66FF00恭喜您锻造成功第" + I2S(udg_dzds[i]) + "件装备，锻造成功4件装备可以获得锻造大师哦")
	endif
	if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and udg_dzds[i] >= 4 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
		call Deputy_setMaster(i , DUAN_ZAO)
		call DZDSBuShuXing(udg_hero[i])
		// call SaveStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit())),"〓锻造大师〓"+LoadStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit()))))
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "获得锻造大师")
		call SetPlayerName(GetOwningPlayer(GetTriggerUnit()), "〓锻造大师〓" + LoadStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit()))))
	endif
endfunction
//合成物品2，自由或者副职锻造可以合成
function HeCheng2_Conditions takes nothing returns boolean
	return ( udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 11 or (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) ) and isPet(GetUnitTypeId(GetTriggerUnit())) // INLINED!!
endfunction
function HeCheng2_Actions takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	
	// 张无忌杀猪刀I0CI,郭靖环戒I0CH，乔峰草鞋I0DO，
	// 大侠套+琥珀项链合成游侠印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0CI' or GetItemTypeId(GetManipulatedItem()) == 'I0CH' or GetItemTypeId(GetManipulatedItem()) == 'I0DO' or GetItemTypeId(GetManipulatedItem()) == 'I01X' then
		if UnitHaveItem(u , 'I0CI') and UnitHaveItem(u , 'I0CH') and UnitHaveItem(u , 'I0DO') and UnitHaveItem(u , 'I01X') then
			call RemoveItem(FetchUnitItem(u , 'I0CI'))
			call RemoveItem(FetchUnitItem(u , 'I0CH'))
			call RemoveItem(FetchUnitItem(u , 'I0DO'))
			call RemoveItem(FetchUnitItem(u , 'I01X'))
			call unitadditembyidswapped('I0E8' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0CI', 1, 'I0CH', 1, 'I0DO', 1, 'I01X', 1, 'ches', 0, 'ches', 0, 'I0E8' )
	endif
	// 游侠印记+七星戒指合成小侠印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0E8' or GetItemTypeId(GetManipulatedItem()) == 'I01P' then
		if UnitHaveItem(u , 'I0E8') and UnitHaveItem(u , 'I01P') then
			call RemoveItem(FetchUnitItem(u , 'I0E8'))
			call RemoveItem(FetchUnitItem(u , 'I01P'))
			call unitadditembyidswapped('I0E9' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0E8', 1, 'I01P', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I0E9' )
	endif
	// 小侠印记+梦蝶项链合成名侠印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0E9' or GetItemTypeId(GetManipulatedItem()) == 'I01C' then
		if UnitHaveItem(u , 'I0E9') and UnitHaveItem(u , 'I01C') then
			call RemoveItem(FetchUnitItem(u , 'I0E9'))
			call RemoveItem(FetchUnitItem(u , 'I01C'))
			call unitadditembyidswapped('I0EA' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0E9', 1, 'I01C', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I0EA' )
	endif
	// 名侠印记+云海链合成大侠印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0EA' or GetItemTypeId(GetManipulatedItem()) == 'I010' then
		if UnitHaveItem(u , 'I0EA') and UnitHaveItem(u , 'I010') then
			call RemoveItem(FetchUnitItem(u , 'I0EA'))
			call RemoveItem(FetchUnitItem(u , 'I010'))
			// call createitemloc('I0EB',loc)
			call unitadditembyidswapped('I0EB' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0EA', 1, 'I010', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I0EB' )
	endif
	// 大侠印记+重生链合成巨侠印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0EB' or GetItemTypeId(GetManipulatedItem()) == 'I00W' then
		if UnitHaveItem(u , 'I0EB') and UnitHaveItem(u , 'I00W') then
			call RemoveItem(FetchUnitItem(u , 'I0EB'))
			call RemoveItem(FetchUnitItem(u , 'I00W'))
			// call createitemloc('I0EC',loc)
			call unitadditembyidswapped('I0EC' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0EB', 1, 'I00W', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I0EC' )
	endif
	// 巨侠印记+号令天下+野球拳合成虾米印记
	if GetItemTypeId(GetManipulatedItem()) == 'I0EC' or GetItemTypeId(GetManipulatedItem()) == 'I06F' or GetItemTypeId(GetManipulatedItem()) == 'I03A' then
		if UnitHaveItem(u , 'I0EC') and UnitHaveItem(u , 'I06F') and UnitHaveItem(u , 'I03A') then
			call RemoveItem(FetchUnitItem(u , 'I0EC'))
			call RemoveItem(FetchUnitItem(u , 'I06F'))
			call RemoveItem(FetchUnitItem(u , 'I03A'))
			call unitadditembyidswapped('I0ED' , u)
			call HeCheng2_Dzds(i)
			// call createitemloc('I0ED',loc)
		endif
		// call YDWENewItemsFormula( 'I0EC', 1, 'I06F', 1, 'I03A', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'I0ED' )
	endif
	// 虾米印记+绿扳指+江湖情合成十四天书
	if GetItemTypeId(GetManipulatedItem()) == 'I0ED' or GetItemTypeId(GetManipulatedItem()) == 'I00L' or GetItemTypeId(GetManipulatedItem()) == 'I08W' then
		if UnitHaveItem(u , 'I0ED') and UnitHaveItem(u , 'I00L') and UnitHaveItem(u , 'I08W') then
			call RemoveItem(FetchUnitItem(u , 'I0ED'))
			call RemoveItem(FetchUnitItem(u , 'I00L'))
			call RemoveItem(FetchUnitItem(u , 'I08W'))
			// call createitemloc('I0EE',loc)
			call unitadditembyidswapped('I0EE' , u)
			call HeCheng2_Dzds(i)
		endif
		// call YDWENewItemsFormula( 'I0ED', 1, 'I00L', 1, 'I08W', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'I0EE' )
	endif
	set u=null
endfunction

//伴侣属性
function BanLvShuXing_1 takes integer num,integer id1,integer id2,integer blgg,integer blwx,integer bljm,integer blfy,integer bldp,integer blys returns nothing
	set R8[num]=id1
	set S8[num]=id2
	set udg_blgg[num]=blgg
	set udg_blwx[num]=blwx
	set udg_bljm[num]=bljm
	set udg_blfy[num]=blfy
	set udg_bldp[num]=bldp
	set udg_blys[num]=blys
endfunction
function LO takes nothing returns nothing
	call BanLvShuXing_1(1 , 1697656885 , 1227895865 , 2 , 0 , 0 , 0 , 3 , 0)
	call BanLvShuXing_1(2 , 1697656886 , 1227895874 , 2 , 2 , 2 , 2 , 2 , 2)
	call BanLvShuXing_1(3 , 1697656887 , 1227895380 , 0 , 0 , 0 , 0 , 1 , 1)
	call BanLvShuXing_1(4 , 1697656888 , 1227895864 , 0 , 2 , 2 , 1 , 0 , 0)
	call BanLvShuXing_1(5 , 1697656889 , 1227895858 , 2 , 0 , 1 , 0 , 0 , 0)
	call BanLvShuXing_1(6 , 1697656898 , 1227895859 , 0 , 2 , 0 , 0 , 0 , 1)
	call BanLvShuXing_1(7 , 1697656897 , 1227895857 , 0 , 0 , 0 , 2 , 0 , 0)
	call BanLvShuXing_1(8 , 1697656899 , 1227895873 , 2 , 2 , 2 , 2 , 2 , 2)
	call BanLvShuXing_1(9 , 1697656900 , 1227895863 , 2 , 0 , 0 , 2 , 1 , 0)
	call BanLvShuXing_1(10 , 1697656901 , 1227895862 , 0 , 1 , 3 , 0 , 0 , 1)
	call BanLvShuXing_1(11 , 1697656902 , 1227895861 , 1 , 1 , 0 , 0 , 0 , 2)
	call BanLvShuXing_1(12 , 1697656903 , 1227895860 , 0 , 0 , 2 , 1 , 1 , 0)
	call BanLvShuXing_1(13 , 'e01B' , 'I0CP' , 2 , 2 , 2 , 2 , 2 , 2)
	call BanLvShuXing_1(14 , 'e01C' , 'I0CS' , 3 , 3 , 3 , 3 , 3 , 3) //白猿
endfunction
//结成伴侣
function NO takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PERMANENT ) )
endfunction
function OO takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 1
 local location loc= GetUnitLoc(u)
	if ( (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) ) then // INLINED!!
		loop
			exitwhen j > MAX_BAN_LV_NUM
			if ( ( GetUnitTypeId(k8[i]) == R8[j] ) ) then
				set jingmai[i]=( jingmai[i] - udg_bljm[j] )
				set fuyuan[i]=( fuyuan[i] - udg_blfy[j] )
				set wuxing[i]=( wuxing[i] - udg_blwx[j] )
				set yishu[i]=( yishu[i] - udg_blys[j] )
				set gengu[i]=( gengu[i] - udg_blgg[j] )
				set danpo[i]=( danpo[i] - udg_bldp[j] )
			endif
			set j=j + 1
		endloop
		call RemoveUnit(k8[i])
		set j=1
		loop
			exitwhen j > MAX_BAN_LV_NUM
			if ( ( GetItemTypeId(GetManipulatedItem()) == S8[j] ) ) then
				call PlaySoundOnUnitBJ(Fh, 100, u)
				call CreateNUnitsAtLoc(1, R8[j], p, loc, bj_UNIT_FACING)
				call zw(bj_lastCreatedUnit , u , 1. , 250. , 1000. , 1500. , 75)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00恭喜你与" + GetUnitName(bj_lastCreatedUnit) + "结成伴侣")
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00查看伴侣属性输入“bl”")
				set k8[i]=bj_lastCreatedUnit
				set jingmai[i]=( jingmai[i] + udg_bljm[j] )
				set fuyuan[i]=( fuyuan[i] + udg_blfy[j] )
				set wuxing[i]=( wuxing[i] + udg_blwx[j] )
				set yishu[i]=( yishu[i] + udg_blys[j] )
				set gengu[i]=( gengu[i] + udg_blgg[j] )
				set danpo[i]=( danpo[i] + udg_bldp[j] )
				call RemoveLocation(loc)
			endif
			set j=j + 1
		endloop
	else
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
	endif
	set u=null
	set p=null
	set loc=null
endfunction

//整理物品
function SO takes nothing returns nothing
 local location loc= null
 local integer j= 1
 local integer id= GetItemTypeId(GetEnumItem())
	if ( ( GetWidgetLife(GetEnumItem()) == 101. ) ) then //D古董
set loc=GetRectCenter(nh)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 102. ) ) then //C古董
set loc=GetRectCenter(oh)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 103. ) ) then //B古董
set loc=GetRectCenter(ph)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 104. ) ) then //A古董
set loc=GetRectCenter(qh)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 105. ) ) then //C草药
set loc=GetRectCenter(rh)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 106. ) ) then //B草药
set loc=GetRectCenter(sh)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 107. ) ) then //A草药
set loc=GetRectCenter(th)
		call SetItemPositionLoc(GetEnumItem(), loc)
		call RemoveLocation(loc)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 108. ) ) then // 遗忘之石、熔炼石、装备打孔符
call SetItemPosition(GetEnumItem(), - 1819., 484.)
	elseif ( ( GetWidgetLife(GetEnumItem()) == 109. ) ) then //18种江湖武功
call SetItemPosition(GetEnumItem(), - 300., - 300.)
	else
		set j=1
		loop
			exitwhen j > 10
			if id == udg_juexue[j] then
				call SetItemPosition(GetEnumItem(), - 300., - 500.)
				return
			endif
			set j=j + 1
		endloop
		set j=1
		loop
			exitwhen j > 8
			if id == udg_juenei[j] then
				call SetItemPosition(GetEnumItem(), - 300., - 700.)
				return
			endif
			set j=j + 1
		endloop
		set j=1
		loop
			exitwhen j > 11
			if id == udg_canzhang[j] then
				call SetItemPosition(GetEnumItem(), - 300., - 900.)
				return
			endif
			set j=j + 1
		endloop
		set j=1
		loop
			exitwhen j > 15
			if id == udg_qiwu[j] then
				call SetItemPosition(GetEnumItem(), - 300., - 1100.)
				return
			endif
			set j=j + 1
		endloop
	endif
	set loc=null
endfunction
function TO takes nothing returns nothing
	call EnumItemsInRectBJ(bj_mapInitialPlayableArea, function SO)
endfunction

//------轻功系统------//
function Trig_ttConditions takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02U' ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true )
endfunction
function qinggongxiaoshi takes nothing returns nothing
 local timer tm= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	call DestroyEffect((udg_JTX[GetPlayerId(GetOwningPlayer(u)) + 1])) // INLINED!!
	call PauseTimer(tm)
	call DestroyTimer(tm)
	set u=null
	set tm=null
endfunction
function Trig_ttActions takes nothing returns nothing
 local location d1= GetUnitLoc(GetTriggerUnit())
 local location d2= GetSpellTargetLoc()
 local real agi= I2R(GetHeroAgi(GetTriggerUnit(), false))
 local real l__jd= AngleBetweenPoints(d1, d2)
 local real distance= 500 + I2R(GetHeroStr(GetTriggerUnit(), false)) / 3
 local real velocity= 48.027 * Pow(agi, 0.3131)
 local real lasttime= 5.0
 local timer tm= CreateTimer()
	if velocity > 1000 then
		set velocity=1000
	endif
	if distance > 2000 then
		set distance=2000
	endif
	call SaveReal(YDHT, GetHandleId(GetTriggerUnit()), StringHash("轻功distance"), distance)
	if distance > DistanceBetweenPoints(d1, d2) then
		set distance=DistanceBetweenPoints(d1, d2)
	endif
	set lasttime=distance / velocity
	call SaveReal(YDHT, GetHandleId(GetTriggerUnit()), StringHash("轻功velocity"), velocity)
	call SaveUnitHandle(YDHT, GetHandleId(tm), 0, GetTriggerUnit())
	call SetUnitFacing(GetTriggerUnit(), l__jd)
	call DestroyEffect((AddSpecialEffectTargetUnitBJEx("origin" , GetTriggerUnit() , "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"))) // INLINED!!
	set udg_JTX[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1]=AddSpecialEffectTargetEx("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl" , GetTriggerUnit() , "origin")
	call SetUnitAnimation(GetTriggerUnit(), "walk")
	call YDWEJumpTimer(GetTriggerUnit() , l__jd , distance , lasttime , 0.03 , 100)
	call TimerStart(tm, lasttime, false, function qinggongxiaoshi)
	call RemoveLocation(d1)
	call RemoveLocation(d2)
	set d1=null
	set d2=null
	set tm=null
endfunction
//伤害测试桩
// 伤害超过一定位数加积分
function shangHaiBonus takes real damage returns nothing
	// 伤害位数，转成字符串要减去后面的.000四个长度
 local integer n= StringLength(R2S(damage)) - 4
 local integer a= n - 13
 local integer i= 0
	// 极限伤害积分
	set damage_jf=5 * a * ( a + 1 )
	// 超过17位只算17位奖励
	if n > 17 then
		set damage_jf=5 * 4 * ( 4 + 1 )
	endif
	call BJDebugMsg("|CFF1CE6B9所有人额外奖励积分" + I2S(damage_jf))
endfunction
function IsCeShiShangHai takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I0B7'
endfunction
function CeShiJieShu takes nothing returns nothing
 local timer t= GetExpiredTimer()
	set ceshi=false
	call SetUnitOwner(gg_unit_N00I_0116, Player(5), true)
	call BJDebugMsg("|cff00ff00测试总伤害为" + R2S(ceshizongshanghai) + ",伤害位数：" + I2S(( StringLength(R2S(ceshizongshanghai)) - 4 )))
	if ceshizongshanghai > max_damage[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
		// 保存最高伤害到服务器
		call DzAPI_Map_StoreReal(Player(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))) , "maxDamage" , ceshizongshanghai)
	endif
	// 计算积分，伤害超过13位触发
	if StringLength(R2S(ceshizongshanghai)) - 4 > 13 and ceshizongshanghai > curMaxDamage and not udg_yanglao then
		set curMaxDamage=ceshizongshanghai
		call shangHaiBonus(ceshizongshanghai)
	endif
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
function CeShiShangHai takes nothing returns nothing
 local timer t= CreateTimer()
	set ceshi=true
	set ceshizongshanghai=0
	call BJDebugMsg(GetUnitName(gg_unit_N00I_0116))
	call SetUnitOwner(gg_unit_N00I_0116, Player(6), true)
	call TimerStart(t, 10, false, function CeShiJieShu)
	set t=null
endfunction
function IsCalcShangHai takes nothing returns boolean
	return ceshi
endfunction
function CalcShangHai takes nothing returns nothing
	set ceshizongshanghai=ceshizongshanghai + GetEventDamage()
endfunction
//抽血术
function ChouXie_Condition takes nothing returns boolean
	return IsUnitInGroup(GetAttacker(), w7) and GetPlayerTechCountSimple('R001', Player(6)) >= 5 and GetOwningPlayer(GetTriggerUnit()) != Player(12) and GetTriggerUnit() != udg_ZhengPaiWL and GetUnitTypeId(GetTriggerUnit()) != 'Hblm' and GetUnitTypeId(GetTriggerUnit()) != 'o02F' and GetUnitTypeId(GetTriggerUnit()) != 'o02G'
endfunction
function ChouXie_Action takes nothing returns nothing
	if udg_nandu == 5 then
		// 难6
		if GetRandomInt(1, 100) <= 20 then
			call SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) - 6.)
		endif
	elseif udg_nandu >= 6 and udg_nandu < 8 then
		// 难7
		if GetRandomInt(1, 100) <= 60 then
			call SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) - 6.)
		endif
	elseif udg_nandu >= 8 then
		// 难8
		if GetRandomInt(1, 100) <= 60 then
			call SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) - 7.)
		endif
	endif
endfunction
function addTotalPoint takes integer point returns nothing
 local integer addition= point * ( 1 + GetPlayerTechCountSimple('R001', Player(6)) )
 local integer j= 1
	set ae=ae + addition
	loop
		exitwhen j > 5
		if GetPlayerController(Player(j - 1)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(j - 1)) == PLAYER_SLOT_STATE_PLAYING then
			// 将评分存入服务器
			call DzAPI_Map_StoreString(Player(j - 1) , "totalPoint" , encryptInt(decryptInt((DzAPI_Map_GetServerValue((Player(j - 1) ), "S" + ( "totalPoint"))) , Player(j - 1)) + addition , Player(j - 1))) // INLINED!!
		endif
		set j=j + 1
	endloop
endfunction
//杀怪(进攻怪及练功房)
function ey takes nothing returns boolean
	return ( ( IsUnitEnemy(GetDyingUnit(), GetOwningPlayer(GetKillingUnit())) ) and ( ( GetOwningPlayer(GetTriggerUnit()) == Player(6) ) or ( GetOwningPlayer(GetTriggerUnit()) == Player(7) ) ) )
endfunction
function KillGuai takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
 local integer i= 1
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	if ( ( GetOwningPlayer(GetTriggerUnit()) == Player(7) ) ) then
		// 富可敌国令
		if ( ( UnitHaveItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , 1227896391) ) ) then
			set T7=GetRandomReal(.95, ( .95 + ( I2R(fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]) / 50. ) ))
			set U7=( T7 * ( 45. * ( I2R(( udg_boshu + 1 )) / 1. ) ) )
			call commonAddGold(GetOwningPlayer(GetKillingUnit()) , R2I(U7))
		else
			set T7=GetRandomReal(.95, ( .95 + ( I2R(fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]) / 50. ) ))
			set U7=( T7 * ( 15. * ( I2R(( udg_boshu + 1 )) / 1. ) ) )
			call commonAddGold(GetOwningPlayer(GetKillingUnit()) , R2I(U7))
		endif
		// 神偷世家令
		if ( ( UnitHaveItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , 'I06I') ) ) then
			if ( ( GetRandomInt(1, 100) <= 25 ) ) then
				call commonAddLumber(GetOwningPlayer(GetKillingUnit()) , 1)
			endif
		endif
		// 号令或者天书加快声望获取
		if ( ( UnitHaveItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , 1227896390) ) ) or ( ( UnitHaveItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , 1227900229) ) ) then
			call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , ( udg_boshu / 7 + 1 ))
		endif
		// 养精蓄锐令
		if ( ( UnitHaveItem(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , 1227896392) ) ) then
			call AddHeroXP(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )], ( GetUnitLevel(GetTriggerUnit()) * 30 ), true)
		endif
	else
		set T7=GetRandomReal(.95, ( .95 + ( I2R(fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]) / 50. ) ))
		set U7=( T7 * ( 25. * ( I2R(( udg_boshu + 1 )) / 1. ) ) )
		call commonAddGold(GetOwningPlayer(GetKillingUnit()) , R2I(U7))
		if ( ( GetUnitPointValue(GetTriggerUnit()) == 102 ) ) then
			set i=1
			loop
				exitwhen i >= 6
				set shoujiajf[i]=shoujiajf[i] + 15 * ( 10 - GetNumPlayer() ) / 10
				set i=i + 1
			endloop
			call addTotalPoint(10)
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀名门高手，每位玩家获得守家积分+" + I2S(shoujiajf[i] + 15 * ( 10 - GetNumPlayer() ) / 10))
			call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
			if ( ( GetRandomInt(1, 50) <= 5 ) ) then
				call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
				if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
					call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
				endif
			endif
			if ( ( GetRandomInt(1, 50) <= 2 ) ) then
				call createitemloc(1227897138 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 100) <= 10 ) ) then
					call createitemloc('I06N' , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, 90) <= 10 ) ) then
						call createitemloc('I06K' , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						if ( ( GetRandomInt(1, 80) <= 10 ) ) then
							call createitemloc(1227896397 , LoadLocationHandle(YDHT, id * cx, $1769D332))
						endif
					endif
				endif
			endif
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			//判断是否为进攻BOSS
			if ( ( GetUnitPointValue(GetTriggerUnit()) == 101 ) ) then
				set i=1
				loop
					exitwhen i >= 6
					set shoujiajf[i]=shoujiajf[i] + 30 * ( 10 - GetNumPlayer() ) / 10
					set i=i + 1
				endloop
				call addTotalPoint(25)
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀BOSS，每位玩家获得守家积分+" + I2S(shoujiajf[i] + 30 * ( 10 - GetNumPlayer() ) / 10))
				if GetRandomInt(1, 100) <= 50 then
					set udg_shuxing[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]=( udg_shuxing[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] + 1 )
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF33CC00" + GetPlayerName(GetOwningPlayer(GetKillingUnit())) + "|cFF33CC00击杀了BOSS" + GetUnitName(GetTriggerUnit()) + "|cFF33CC00获得了一个自由属性点")
				endif
				call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
				call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
				call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
				if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
					call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
					call createitemloc(YaoCao[GetRandomInt(1, 12)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
				endif
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if GetKillingUnit() != null then
					set shoujiajf[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]=( shoujiajf[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] + 1 )
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//魔教救人
function MoJiaoJiuRen_1 takes nothing returns nothing
	call SetUnitPosition(GetEnumUnit(), - 910, 750)
endfunction
function MoJiaoJiuRen takes nothing returns nothing
	call DisplayTextToForce(GetPlayersAll(), "|CFFCCFF00魔教潜入监狱救走了被抓住的敌人")
	call ForGroupBJ(YDWEGetUnitsInRectOfPlayerNull(udg_jail , Player(6)), function MoJiaoJiuRen_1)
endfunction
//杀怪加声望
function Xa takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER ) )
endfunction
function Ya takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
 local real x
 local real y
 local integer coeff= 1
	// 天赋：冲州过府：增加每次杀怪获取的声望值
	if ( UnitHasBuffBJ(GetKillingUnit(), 'B01U') ) then
		set coeff=coeff * ( 2 + bigTalent[i] )
	endif
	call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , udg_boshu / ( 8 - coeff ) + 1)
	if ( ModuloInteger(GetUnitPointValue(u), $A) == 1 ) then
		call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 8 * coeff)
	endif
	if ( p == Player(6) ) then
		set zd=zd + GetRandomInt(1, 2)
		if ( zd >= 100 ) then
			set zd=0
			set x=GetUnitX(u)
			set y=GetUnitY(u)
call CreateItem((gudong[GetRandomInt(1, ( 6 + ( udg_boshu / 5 ) ))] ), (( x )*1.0), (( y)*1.0)) // INLINED!!
		endif
	endif
	// 熊猫杀怪加木材
	if ( GetUnitTypeId(P4[i]) == 'n00V' and GetRandomInt(1, 100) <= 10 ) then
		call AdjustPlayerStateBJ(1, GetOwningPlayer(GetKillingUnit()), PLAYER_STATE_RESOURCE_LUMBER)
	endif
	set u=null
	set p=null
endfunction
function dB takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER ) )
endfunction
function eB takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 1)
	if ( ( ModuloInteger(GetUnitPointValue(GetTriggerUnit()), 10) == 1 ) ) then
		call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 5)
	elseif ( ( ModuloInteger(GetUnitPointValue(GetTriggerUnit()), 10) == 2 ) ) then
		call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 10)
	endif
	if ( GetUnitTypeId(P4[i]) == 'n00V' and GetRandomInt(1, 100) <= 10 ) then
		call commonAddLumber(GetOwningPlayer(GetKillingUnit()) , 1)
	endif
endfunction
//经验符
function oQ takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'texp' )
endfunction
function pQ takes nothing returns nothing
	call AddHeroXP(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], 200000, true)
endfunction
//购买等级
function rQ takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I05Z' )
endfunction
function sQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( GetUnitLevel(udg_hero[i]) >= 100 ) then
		call AdjustPlayerStateBJ(10000, p, PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFCC00等级高于100无法购买等级")
	else
		call SetHeroLevel(udg_hero[i], GetUnitLevel(udg_hero[i]) + 1, true)
	endif
	set u=null
	set p=null
endfunction
//新手大礼包
function uQ takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896394 ) )
endfunction
function vQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	// 地图等级
 local integer level= DzAPI_Map_GetMapLevel(Player(GetPlayerId(p)))
	// 地图等级小于等级5级的或者返璞归真模式额外送一个新手神器
	call unitadditembyidswapped('I0DJ' , u) // 新手神器
// 大侠套 张无忌杀猪刀I0CI,郭靖环戒I0CH，乔峰草鞋I0DO，
call unitadditembyidswapped('I0CI' , u)
	call unitadditembyidswapped('I0CH' , u)
	call unitadditembyidswapped('I0DO' , u)
	call commonAddGold(p , 30000)
	call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得新手神器、大侠套和3万金币")
	// 测试版送一个新手神器
	if testVersion then
		call unitadditembyidswapped('I0DJ' , u) // 新手神器
call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00测试版本使用新手大礼包获得新手神器")
	endif
	if ( ( GetRandomInt(1, 12) <= 3 ) ) then
		call commonAddGold(p , 20000)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得金钱+20000")
	else
		if ( ( GetRandomInt(1, 9) <= 3 ) ) then
			call UnitAddItemById(u, udg_jianghu[GetRandomInt(1, 18)])
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得随机江湖武功")
		else
			if ( ( GetRandomInt(1, 6) <= 3 ) ) then
				call UnitAddAbility(u, 1093679441)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得神行状态")
				call YDWEPolledWaitNull(300.)
				call UnitRemoveAbility(u, 1093679441)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000失去神行效果")
			else
				call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 0 , 20000)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得狂暴状态")
				call YDWEPolledWaitNull(120.)
				call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 1 , 20000)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000失去狂暴效果")
			endif
		endif
	endif
	set u=null
	set p=null
endfunction
//装备打孔
function xQ takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I06N' ) )
endfunction
function yQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i11= 0
 local integer i12= 0
	if ( ( ( GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_ARTIFACT ) or ( GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_PURCHASABLE ) or ( GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_CHARGED ) ) ) then
		set i12=ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) / 1000, 10)
		set i11=ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) / 100, 10)
		if ( i11 > 0 ) then
			set i12=i12 + 1
		endif
		set i11=ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) / 10, 10)
		if ( i11 > 0 ) then
			set i12=i12 + 1
		endif
		set i11=ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)), 10)
		if ( i11 > 0 ) then
			set i12=i12 + 1
		endif
		if ( i12 < 3 ) then
			call SetItemUserData(UnitItemInSlotBJ(u, 1), ( GetItemUserData(UnitItemInSlotBJ(u, 1)) + $3E8 ))
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cff00ffff打孔成功！")
		else
			call unitadditembyidswapped('I06N' , u)
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000第一格物品不能再打孔了")
		endif
	else
		call unitadditembyidswapped('I06N' , u)
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000第一格物品不是装备")
	endif
	set u=null
	set p=null
endfunction
// 判断某玩家是否可以加入副职
// 如果未加入副职，可以加入
// 如果已加入副职且该副职成为宗师，可以重新加入
function canJoinDeputy takes integer i returns boolean
 local integer j= 1
	if deputy[i] == 0 then
		return true
	endif
	loop
		exitwhen j > MAX_DEPUTY
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( j) - 1)])) != 0) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( j) - 1)])) != 0) then // INLINED!!
			return false
		endif
		set j=j + 1
	endloop
	return true
endfunction
function notYetJoinDeputy takes integer i,integer whichDeputy returns boolean
	if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( whichDeputy) - 1)])) != 0) then // INLINED!!
		call DisplayTimedTextToPlayer(Player(i - 1), 0, 0, 5., "|cffffff00已经加入过该副职了，不能重复加入")
		return false
	endif
	return true
endfunction
//加入副职
function AQ takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I08Q' or GetItemTypeId(GetManipulatedItem()) == 'I0A4' or GetItemTypeId(GetManipulatedItem()) == 'I0A5' or GetItemTypeId(GetManipulatedItem()) == 'I0A6' or GetItemTypeId(GetManipulatedItem()) == 'I0A7' or GetItemTypeId(GetManipulatedItem()) == 'I08S' or GetItemTypeId(GetManipulatedItem()) == 'I08T' or GetItemTypeId(GetManipulatedItem()) == 'I0CG' ) )
endfunction
function aQ takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if canJoinDeputy(i) then
		if ( GetItemTypeId(GetManipulatedItem()) == 'I08Q' ) and notYetJoinDeputy(i , LIAN_DAN) then
			set yishu[i]=yishu[i] + 3
			call Deputy_setDeputy(i , LIAN_DAN)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为炼丹师，获得医术+3")
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I08S' ) and notYetJoinDeputy(i , DUAN_ZAO) then
			set gengu[i]=( gengu[i] + 5 )
			call Deputy_setDeputy(i , DUAN_ZAO)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为锻造师，获得根骨+3")
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I08T' ) and notYetJoinDeputy(i , BING_QI) then
			set danpo[i]=( danpo[i] + 3 )
			call Deputy_setDeputy(i , BING_QI)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为兵器师，获得胆魄+3")
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0A4' ) and notYetJoinDeputy(i , JIAN_DING) then
			set wuxing[i]=wuxing[i] + 3
			call Deputy_setDeputy(i , JIAN_DING)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为鉴定师，获得悟性+3")
			call UnitAddAbility(P4[i], 'A08O')
			call UnitMakeAbilityPermanent(P4[i], true, 'A08O')
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0A5' ) and notYetJoinDeputy(i , LIAN_QI) then
			set jingmai[i]=jingmai[i] + 3
			call Deputy_setDeputy(i , LIAN_QI)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为练气师，获得经脉+3")
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0A6' ) and notYetJoinDeputy(i , XUN_BAO) then
			set fuyuan[i]=fuyuan[i] + 3
			call Deputy_setDeputy(i , XUN_BAO)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为寻宝师，获得福缘+3")
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0A7' ) and notYetJoinDeputy(i , YA_HUAN) then
			call Deputy_setDeputy(i , YA_HUAN)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为丫鬟，获得全属性+1")
			set danpo[i]=danpo[i] + 1
			set wuxing[i]=wuxing[i] + 1
			set gengu[i]=gengu[i] + 1
			set fuyuan[i]=fuyuan[i] + 1
			set jingmai[i]=jingmai[i] + 1
			set yishu[i]=yishu[i] + 1
		elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0CG' ) and notYetJoinDeputy(i , JING_WU) then
			call Deputy_setDeputy(i , JING_WU)
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffffff00恭喜成为精武师，获得全属性+1")
			set danpo[i]=danpo[i] + 1
			set wuxing[i]=wuxing[i] + 1
			set gengu[i]=gengu[i] + 1
			set fuyuan[i]=fuyuan[i] + 1
			set jingmai[i]=jingmai[i] + 1
			set yishu[i]=yishu[i] + 1
		endif
	else
		call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5., "|cffff0000你已经加入副职了，只有成为宗师才可以再次加入")
	endif
endfunction
//结拜系统
function MaiHuangZhi_Conditions takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I000' ) )
endfunction
function MaiHuangZhi takes nothing returns nothing
	call unitadditembyidswapped('I05Y' , GetTriggerUnit())
	call unitadditembyidswapped('I05Y' , GetTriggerUnit())
endfunction
function IsHuangZhi takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I05Y' ) )
endfunction
function ShaoHuangZhi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( Bd[i] ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 20., "|cffff0000你已经使用过黄纸了，还是等等另外一个人的响应吧")
		call unitadditembyidswapped('I05Y' , GetTriggerUnit())
	else
		set Bd[i]=true
		set ad=ad + 1
		set bd[ad]=udg_hero[i]
		if ( ( ModuloInteger(ad, 2) == 0 ) ) then
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20., ( "|cffff66ff恭喜" + ( GetPlayerName(GetOwningPlayer(bd[( ad - 1 )])) + ( "和" + ( GetPlayerName(GetOwningPlayer(bd[ad])) + "结拜为兄弟" ) ) ) ))
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 20., "|cffff66ff使用成功，等待另外一位玩家与你结拜....")
		endif
	endif
	set u=null
	set p=null
endfunction
function kT takes nothing returns boolean
	return ( Bd[( 1 + GetPlayerId(GetTriggerPlayer()) )] )
endfunction
function mT takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetTriggerPlayer())
 local integer j= 1
 local real x
 local real y
	loop
		exitwhen j > 6
		if ( udg_hero[i] == bd[j] ) then
			if ( ModuloInteger(j, 2) == 0 ) then
				if ( bd[j - 1] != null ) then
					set x=GetUnitX(bd[j - 1])
					set y=GetUnitY(bd[j - 1])
					call SetUnitPosition(udg_hero[i], x, y)
					call PanCameraToTimedForPlayer(GetTriggerPlayer(), x, y, 0)
				endif
			else
				if ( bd[j + 1] != null ) then
					set x=GetUnitX(bd[j + 1])
					set y=GetUnitY(bd[j + 1])
					call SetUnitPosition(udg_hero[i], x, y)
					call PanCameraToTimedForPlayer(GetTriggerPlayer(), x, y, 0)
				endif
			endif
		endif
		set j=j + 1
	endloop
endfunction
function qT takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and ( GetItemTypeId(GetManipulatedItem()) == 'I0BO' or GetItemTypeId(GetManipulatedItem()) == 'I07S' ) or GetItemTypeId(GetManipulatedItem()) == 'I07W' )
endfunction
function rT takes nothing returns nothing
 local player p= GetOwningPlayer(GetTriggerUnit())
	if GetItemTypeId(GetManipulatedItem()) == 'I07W' then
		if tiaoZhanIndex != 3 then
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|cffdd0b0b只有无尽BOSS战模式才可以进行此项挑战")
		elseif udg_boss[7] != null and IsUnitAliveBJ(udg_boss[7]) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15, "|cffdd0b0b当前BOSS尚未挑战完成")
		else
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30., "|cff00ffff有玩家开始挑战无尽BOSS，大家要小心应付了！")
			set next_endless_time=passed_time + 1
		endif
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I07S' then
		set ue=5
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30., "|cff00ffff有玩家开始预约名门挑战，本波进攻怪物将会增加名门高手，大家要小心应付了！")
	endif
	if GetItemTypeId(GetManipulatedItem()) == 'I0BO' then
		set ue=0
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30., "|cff00ffff有玩家取消了预约名门挑战，下波进攻怪物将不会增加名门高手，大家要小心应付了！")
	endif
	set p=null
endfunction
// 攻破城门
function cT takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'hmtt' ) )
endfunction
function DT takes nothing returns nothing
	call ModifyGateBJ(1, Gt)
	call YDWEPolledWaitNull(( ( .18 - ( .01 * I2R(O4) ) ) * 2000. ))
	call ModifyGateBJ(0, Gt)
endfunction
//爆炸
function FT takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0BU') != 0 ) )
endfunction
function GT takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function HT takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163, GetEnumUnit())
	call SetWidgetLife(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163), ( GetUnitState(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163), UNIT_STATE_LIFE) - ( 200. * I2R(GetUnitLevel(GetEnumUnit())) ) ))
endfunction
function IT takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call AddSpecialEffectLocBJEx(loc , "war3mapImported\\ChaosExplosion.mdl")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300. , loc , Condition(function GT)), function HT)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
// 流星
function JT takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A0BY') != 0 ) and ( GetRandomInt(1, 70) <= 5 ) )
endfunction
function KT takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 1697656919, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call UnitAddAbility(bj_lastCreatedUnit, 1093681754)
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D7)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	call ShowUnitHide(bj_lastCreatedUnit)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
// 冰缓
function MT takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A0C0') != 0 ) and ( GetRandomInt(1, 70) <= 5 ) )
endfunction
function NT takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 1697656918, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
//辽国进攻
function LiaoGuoJinGong_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer j= LoadInteger(YDHT, GetHandleId(t), 0)
 local integer jmax= 40
	if j < jmax then
		call CreateNUnitsAtLocFacingLocBJ(1, 'hkni', Player(6), Location(- 5600, 100), v7[4])
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D000F, udg_ZhengPaiWL)
		call SaveInteger(YDHT, GetHandleId(t), 0, j + 1)
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	set t=null
endfunction
function LiaoGuoJinGong takes nothing returns nothing
 local timer t
	if ShiFouShuaGuai then
		if Sd[1] != 2 and Sd[2] != 2 and Sd[3] != 2 and Sd[4] != 2 and Sd[5] != 2 and udg_teshushijian and udg_nandu > 1 then
			set t=CreateTimer()
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※边境入侵※")
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，辽国派出骑兵前来进攻，请准备防御")
			call TimerStart(t, 2., true, function LiaoGuoJinGong_1)
		endif
	endif
	set t=null
endfunction
//灵鹫宫进攻：触发条件，有玩家选择了灵鹫宫
function LingJiuGongJinGong takes nothing returns nothing
	if ShiFouShuaGuai then
		if ( udg_runamen[1] == 12 or udg_runamen[2] == 12 or udg_runamen[3] == 12 or udg_runamen[4] == 12 or udg_runamen[5] == 12 ) and udg_teshushijian and udg_nandu > 1 then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※灵鹫宫劫※")
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，灵鹫宫派出高手前来进攻，请准备防御")
			call CreateNUnitsAtLocFacingLocBJ(1, 'ngh2', Player(6), Location(1800, - 100), v7[4])
			call GroupAddUnit(w7, bj_lastCreatedUnit)
			call IssueTargetOrderById(bj_lastCreatedUnit, $D000F, udg_ZhengPaiWL)
			call CreateNUnitsAtLocFacingLocBJ(1, 'nfsp', Player(6), Location(1800, - 100), v7[4])
			call GroupAddUnit(w7, bj_lastCreatedUnit)
			call IssueTargetOrderById(bj_lastCreatedUnit, $D000F, udg_ZhengPaiWL)
			call CreateNUnitsAtLocFacingLocBJ(1, 'nmgd', Player(6), Location(1800, - 100), v7[4])
			call GroupAddUnit(w7, bj_lastCreatedUnit)
			call IssueTargetOrderById(bj_lastCreatedUnit, $D000F, udg_ZhengPaiWL)
		endif
	endif
endfunction
function isF2TownPortal takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'O02W' or GetUnitTypeId(GetTriggerUnit()) == 'O02X' or GetUnitTypeId(GetTriggerUnit()) == 'O02Y'
endfunction
function f2TownPortal takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if GetUnitTypeId(GetTriggerUnit()) == 'O02X' then
		call SetUnitPosition(udg_hero[i], - 869, 796)
		call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), - 869, 796, 0)
	elseif GetUnitTypeId(GetTriggerUnit()) == 'O02Y' then
		call SetUnitPosition(udg_hero[i], - 869, - 2000)
		call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), - 869, - 2000, 0)
	else
		call SetUnitPosition(udg_hero[i], - 1174, - 678)
		call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), - 1174, - 678, 0)
	endif
	call ClearSelectionForPlayer(GetOwningPlayer(GetTriggerUnit()))
	call SelectUnitForPlayerSingle(udg_hero[i], GetOwningPlayer(GetTriggerUnit()))
endfunction
// 吃书类物品排泄
// 吃书类的问题使用之后不会自动移除，而会将生命值设置为0，然后缩小模型
// 而生命值为0的物品无法被移除，因此要排泄这类物品，需要捕捉单位丢弃物品事件
// 然后将物品的生命值设置为1后再移除
function isDeadItem takes nothing returns boolean
	return GetWidgetLife(GetManipulatedItem()) < 0.5
endfunction
function removeDeadItem_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local item it= LoadItemHandle(YDHT, GetHandleId(t), 0)
	call SetWidgetLife(it, 1)
	call RemoveItem(it)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set it=null
endfunction
function removeDeadItem takes nothing returns nothing
 local timer t= CreateTimer()
	call SaveItemHandle(YDHT, GetHandleId(t), 0, GetManipulatedItem())
	call TimerStart(t, 0, false, function removeDeadItem_1)
	set t=null
endfunction

function GameLogic_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer j= 1
 local timer tm= CreateTimer()
 local timerdialog td= null
	call TimerStart(tm, 1000, true, null)
	set td=CreateTimerDialogBJ(tm, "监狱救人:")
	call TimerDialogDisplay(td, true)
	set j=1
	loop
		exitwhen j > 5
		// 每个玩家默认可以内化一个武功
		set interAbilityCount[j]=1
		set alreadyInternalizedCount[j]=0
		set interDialog[j]=DialogCreate()
		set j=j + 1
	endloop
	//选择英雄
	set Jh=CreateTrigger()
	call TriggerRegisterPlayerSelectionEventBJ(Jh, Player(0), true)
	call TriggerRegisterPlayerSelectionEventBJ(Jh, Player(1), true)
	call TriggerRegisterPlayerSelectionEventBJ(Jh, Player(2), true)
	call TriggerRegisterPlayerSelectionEventBJ(Jh, Player(3), true)
	call TriggerRegisterPlayerSelectionEventBJ(Jh, Player(4), true)
	call TriggerAddCondition(Jh, Condition(function fx))
	call TriggerAddAction(Jh, function SelectHero)
	// 加入门派
	set Mh=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Mh, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Mh, Condition(function ox))
	call TriggerAddAction(Mh, function JiaRuMenPai)
	// 伤害测试
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsCeShiShangHai))
	call TriggerAddAction(t, function CeShiShangHai)
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t, gg_unit_N00I_0116, EVENT_UNIT_DAMAGED)
	call TriggerAddCondition(t, Condition(function IsCalcShangHai))
	call TriggerAddAction(t, function CalcShangHai)
	// 自由门派
	set Mh=CreateTrigger()
	call YDWETriggerRegisterLeaveRectSimpleNull(Mh , udg_xuanmenpai)
	call TriggerAddCondition(Mh, Condition(function WuMenPai_Condition))
	call TriggerAddAction(Mh, function WuMenPai_Action)
	// 玩家英雄阵亡
	set Th=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Th, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Th, Condition(function Ex))
	call TriggerAddAction(Th, function PlayerDeath)
	// 玩家英雄复活
	set Uh=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Uh, udg_revivetimer[1])
	call TriggerAddAction(Uh, function PlayerReviveA)
	set Vh=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Vh, udg_revivetimer[2])
	call TriggerAddAction(Vh, function PlayerReviveB)
	set Wh=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Wh, udg_revivetimer[3])
	call TriggerAddAction(Wh, function PlayerReviveC)
	set Xh=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Xh, udg_revivetimer[4])
	call TriggerAddAction(Xh, function PlayerReviveD)
	set Yh=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Yh, udg_revivetimer[5])
	call TriggerAddAction(Yh, function PlayerReviveE)
	// 生成F9信息
	set Zh=CreateTrigger()
	call TriggerRegisterTimerEventSingle(Zh, 5)
	call TriggerAddAction(Zh, function Qx)
	// 玩家离开游戏
	set fi=CreateTrigger()
	call TriggerRegisterPlayerEventLeave(fi, Player(0))
	call TriggerRegisterPlayerEventLeave(fi, Player(1))
	call TriggerRegisterPlayerEventLeave(fi, Player(2))
	call TriggerRegisterPlayerEventLeave(fi, Player(3))
	call TriggerRegisterPlayerEventLeave(fi, Player(4))
	call TriggerAddAction(fi, function PlayerLeave)
	// 杀进攻怪及练功房怪
	set gi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gi, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(gi, Condition(function ey))
	call TriggerAddAction(gi, function KillGuai)
	// 击杀最终BOSS游戏胜利
	set hi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(hi, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(hi, Condition(function hy))
	call TriggerAddAction(hi, function Victory)
	// 老家灭了游戏失败
	set ii=CreateTrigger()
	call TriggerRegisterUnitEvent(ii, udg_ZhengPaiWL, EVENT_UNIT_DEATH)
	call TriggerAddAction(ii, function Lose)
	// 购买老家无敌
	set ji=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ji, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ji, Condition(function BuyJiDiWuDi))
	call TriggerAddAction(ji, function JiDiWuDi)
	// 首次显示系统窗口信息
	set ki=CreateTrigger()
	call TriggerRegisterTimerEventSingle(ki, 10.)
	call TriggerAddAction(ki, function SystemWindow)
	// 刷新系统窗口信息
	set mi=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(mi, 1.)
	call TriggerAddAction(mi, function uuyy)
	// 计算玩家最大伤害
	set ni=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(ni)
	call TriggerAddCondition(ni, Condition(function wy))
	call TriggerAddAction(ni, function SetMaxDamage)
	// 开启试玩模式
	set oi=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(oi, Player(0), "sw", true)
	call TriggerAddCondition(oi, Condition(function BeforeAttack))
	call TriggerAddAction(oi, function SetShiWan)
	// 购买城防
	set pi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(pi, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(pi, Condition(function BuyChengFang))
	call TriggerAddAction(pi, function ShengChengFang)
	// 购买高级城防
	set ri=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ri, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ri, Condition(function BuyGaoChengFang))
	call TriggerAddAction(ri, function ShengGaoChengFang)
	// 积分换物品
	set si=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(si, Condition(function BuyKuanDong))
	call TriggerAddAction(si, function KuanDongHua)
	// 声望换物品
	set si=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(si, Condition(function BuyKuanDong_1))
	call TriggerAddAction(si, function KuanDongHua_1)
	// FIXME 使用武学精要（目前有BUG）
	set si=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(si, Condition(function IsWuXueJingYao))
	call TriggerAddAction(si, function WuXueJingYao)
	//将地图上初始所有单位加入单位组
	set Vi=CreateTrigger()
	call TriggerRegisterTimerEventSingle(Vi, 2.)
	call TriggerAddAction(Vi, function cA)
	//怪物死后重新刷怪
	set Wi=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(Wi, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerRegisterPlayerUnitEventSimple(Wi, Player(15), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddAction(Wi, function EA)
	//刷进攻怪
	set Xi=CreateTrigger()
	call TriggerAddCondition(Xi, Condition(function GA))
	call TriggerAddAction(Xi, function HA)
	//刷正面的进攻怪
	set Yi=CreateTrigger()
	call DisableTrigger(Yi)
	call TriggerRegisterTimerEventPeriodic(Yi, 3.)
	call TriggerAddAction(Yi, function lA)
	//刷背面的进攻怪
	set Zi=CreateTrigger()
	call DisableTrigger(Zi)
	call TriggerRegisterTimerEventPeriodic(Zi, 2.)
	call TriggerAddAction(Zi, function KA)
	// 刷名门
	set dj=CreateTrigger()
	call TriggerAddCondition(dj, Condition(function MA))
	call TriggerAddAction(dj, function NA)
	// 时间到刷怪
	set ej=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(ej, A7[1])
	call TriggerAddAction(ej, function PA)
	set fj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(fj, A7[2])
	call TriggerAddAction(fj, function RA)
	set gj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gj, A7[3])
	call TriggerAddAction(gj, function TA)
	set hj=CreateTrigger()
	call TriggerAddAction(hj, function VA)
	set ij=CreateTrigger()
	call TriggerAddAction(ij, function XA)
	// 停怪
	set jj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(jj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(jj, Condition(function ZA))
	call TriggerAddAction(jj, function ea)
	// 将死亡单位从单位组移除
	set mj=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(mj, Player(6), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(mj, Condition(function ja))
	call TriggerAddAction(mj, function ka)
	// 练功房刷怪
	set nj=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(nj, 8.)
	call TriggerAddAction(nj, function qa)
	// 进入练功房
	set oj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(oj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(oj, Condition(function sa))
	call TriggerAddAction(oj, function ua)
	// 进入练功房
	set pj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(pj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(pj, Condition(function wa))
	call TriggerAddAction(pj, function xa)
	// 进入练功房
	set qj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(qj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(qj, Condition(function za))
	call TriggerAddAction(qj, function Aa)
	// 切换背包
	set rj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(rj, EVENT_PLAYER_UNIT_SPELL_CAST)
	call TriggerAddCondition(rj, Condition(function Ba))
	call TriggerAddAction(rj, function ba)
	// 鸟的贩卖技能
	set sj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(sj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(sj, Condition(function ca))
	call TriggerAddAction(sj, function Da)
	// 鸟的换肤技能
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isSwitchSkin))
	call TriggerAddAction(t, function switchSkin)
	// 鸟使用指令技能
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isCmd))
	call TriggerAddAction(t, function cmd)
	// 轻功系统
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function Trig_ttConditions))
	call TriggerAddAction(t, function Trig_ttActions)
	// 切换物品
	set tj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(tj, EVENT_PLAYER_UNIT_SPELL_CAST)
	call TriggerAddCondition(tj, Condition(function IsQieHuanItem))
	call TriggerAddAction(tj, function QieHuanItem)
	// 英雄达到某等级
	set vj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vj, EVENT_PLAYER_HERO_LEVEL)
	call TriggerAddCondition(vj, Condition(function Ja))
	call TriggerAddAction(vj, function HeroLevel)
	// 杀怪回血
	set wj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(wj, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(wj, Condition(function Ma))
	call TriggerAddAction(wj, function KillGuaiJiaXie)
	// 每秒回血回蓝
	set xj=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(xj, 1.)
	call TriggerAddAction(xj, function YiShuHuiXie)
	// 攻击回复（伤害回复）
	set yj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(yj, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(yj, Condition(function Ra))
	call TriggerAddAction(yj, function Sa)
	// 伤害吸收
	set zj=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(zj)
	call TriggerAddCondition(zj, Condition(function Ua))
	call TriggerAddAction(zj, function Va)
	// 杀怪加声望
	set Aj=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(Aj, Player(6), EVENT_PLAYER_UNIT_DEATH)
	call TriggerRegisterPlayerUnitEventSimple(Aj, Player(7), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Aj, Condition(function Xa))
	call TriggerAddAction(Aj, function Ya)
	set aj=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(aj, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(aj, Condition(function dB))
	call TriggerAddAction(aj, function eB)
	// 遗忘武功
	set Bj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Bj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Bj, Condition(function YiWangJiNeng))
	call TriggerAddAction(Bj, function ForgetAbility)
	// 为合成的物品补属性
	set t=CreateTrigger()
	call YDWESyStemItemCombineRegistTrigger(t)
	call TriggerAddAction(t, function WuPinHeCheng)
	// 选择遗忘的武功
	set bj=CreateTrigger()
	call TriggerRegisterDialogEvent(bj, K7[1])
	call TriggerRegisterDialogEvent(bj, K7[2])
	call TriggerRegisterDialogEvent(bj, K7[3])
	call TriggerRegisterDialogEvent(bj, K7[4])
	call TriggerRegisterDialogEvent(bj, K7[5])
	call TriggerAddAction(bj, function jB)
	// 内化武功
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isInternalize))
	call TriggerAddAction(t, function internalize)
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, interDialog[1])
	call TriggerRegisterDialogEvent(t, interDialog[2])
	call TriggerRegisterDialogEvent(t, interDialog[3])
	call TriggerRegisterDialogEvent(t, interDialog[4])
	call TriggerRegisterDialogEvent(t, interDialog[5])
	call TriggerAddAction(t, function doInternalize)
	// 传送至桃花岛
	set Cj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Cj, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Cj, Condition(function mB))
	call TriggerAddAction(Cj, function nB)
	// 学习武功
	set cj=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(cj, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(cj, Condition(function IsWuGongBook))
	call TriggerAddAction(cj, function BookLearnWuGong)
	// 初始化内功加成
	set fk=CreateTrigger()
	call TriggerRegisterTimerEventSingle(fk, 0.1)
	call TriggerAddAction(fk, function NeiGongJiaChengS)
	set pk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(pk, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(pk, Condition(function uC))
	call TriggerAddAction(pk, function vC)
	set qk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(qk, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(qk, Condition(function xC))
	call TriggerAddAction(qk, function yC)
	set rk=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(rk, 1.)
	call TriggerAddAction(rk, function BC)
	set sk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(sk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(sk, Condition(function CC))
	call TriggerAddAction(sk, function cC)
	set tk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(tk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(tk, Condition(function EC))
	call TriggerAddAction(tk, function FC)
	set uk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(uk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(uk, Condition(function HC))
	call TriggerAddAction(uk, function IC)
	set vk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(vk, Condition(function JC))
	call TriggerAddAction(vk, function KC)
	set wk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(wk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(wk, Condition(function MC))
	call TriggerAddAction(wk, function NC)
	set xk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(xk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(xk, Condition(function PC))
	call TriggerAddAction(xk, function QC)
	set yk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(yk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(yk, Condition(function SC))
	call TriggerAddAction(yk, function TC)
	set zk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(zk, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(zk, Condition(function VC))
	call TriggerAddAction(zk, function WC)
	set Ak=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ak, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Ak, Condition(function YC))
	call TriggerAddAction(Ak, function ZC)
	set ak=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(ak, Condition(function ec))
	call TriggerAddAction(ak, function gc)
	set ak=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(ak, Condition(function isJiuYangCanJuan))
	call TriggerAddAction(ak, function jiuYangCanJuan)
	set ak=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(ak, Condition(function IsWuHunShi))
	call TriggerAddAction(ak, function WuHunShi)
	set Bk=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(Bk)
	call TriggerAddCondition(Bk, Condition(function IsUnitBoss))
	call TriggerAddAction(Bk, function BossFangJiNeng)
	// 预约名门和取消预约
	set Gs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Gs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Gs, Condition(function qT))
	call TriggerAddAction(Gs, function rT)
	// 攻破城门
	set Ks=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ks, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ks, Condition(function cT))
	call TriggerAddAction(Ks, function DT)
	// 爆炸
	set Ht=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ht, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ht, Condition(function FT))
	call TriggerAddAction(Ht, function IT)
	// 流星
	set It=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(It, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(It, Condition(function JT))
	call TriggerAddAction(It, function KT)
	// 冰缓
	set Jt=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Jt, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(Jt, Condition(function MT))
	call TriggerAddAction(Jt, function NT)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsYiZhan))
	call TriggerAddAction(t, function YiZhanChuanSong)
	//抽血术
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function ChouXie_Condition))
	call TriggerAddAction(t, function ChouXie_Action)
	// 初始化伴侣属性
	set uq=CreateTrigger()
	call TriggerRegisterTimerEventSingle(uq, .2)
	call TriggerAddAction(uq, function LO)
	// 结成伴侣
	set vq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(vq, Condition(function NO))
	call TriggerAddAction(vq, function OO)
	// 整理物品
	set xq=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(xq, 400.)
	call TriggerAddAction(xq, function TO)
	// 吃经验符
	set kr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(kr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(kr, Condition(function oQ))
	call TriggerAddAction(kr, function pQ)
	// 购买等级
	set mr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(mr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(mr, Condition(function rQ))
	call TriggerAddAction(mr, function sQ)
	// 新手大礼包
	set nr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(nr, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(nr, Condition(function uQ))
	call TriggerAddAction(nr, function vQ)
	// 装备打孔
	set pr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(pr, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(pr, Condition(function xQ))
	call TriggerAddAction(pr, function yQ)
	// 加入副职
	set qr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(qr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(qr, Condition(function AQ))
	call TriggerAddAction(qr, function aQ)
	// 传送到钟南山
	set tr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(tr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(tr, Condition(function GQ))
	call TriggerAddAction(tr, function HQ)
	// 传送到少林寺后山（25级）
	set ur=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ur, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ur, Condition(function lQ))
	call TriggerAddAction(ur, function JQ)
	// 传送到塞外
	set vr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(vr, Condition(function LQ))
	call TriggerAddAction(vr, function MQ)
	// 传送到光明顶
	set wr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(wr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(wr, Condition(function OQ))
	call TriggerAddAction(wr, function PQ)
	// 传送到少林寺后山（70级）
	set xr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(xr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(xr, Condition(function RQ))
	call TriggerAddAction(xr, function SQ)
	// 传送到边疆
	set yr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(yr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(yr, Condition(function UQ))
	call TriggerAddAction(yr, function VQ)
	// 学习门派内功
	set br=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(br, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(br, Condition(function pR))
	call TriggerAddAction(br, function qR)
	// 初始化古董价格区间
	set rs=CreateTrigger()
	call TriggerRegisterTimerEventSingle(rs, .5)
	call TriggerAddAction(rs, function s5)
	// 古董价格变动
	set ss=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(ss, 200.)
	call TriggerAddAction(ss, function u5)
	// 查询古董价格
	set ts=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ts, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ts, Condition(function w5))
	call TriggerAddAction(ts, function x5)
	// 卖古董
	set vs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(vs, Condition(function B5))
	call TriggerAddAction(vs, function b5)
	// 收集古董
	set vs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(vs, Condition(function CollectGuDong_Conditions))
	call TriggerAddAction(vs, function CollectGuDong_Actions)
	// 合成物品
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function HeCheng_Conditions))
	call TriggerAddAction(t, function HeCheng_Actions)
	// 合成物品2
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function HeCheng2_Conditions))
	call TriggerAddAction(t, function HeCheng2_Actions)
	// 买黄纸
	set cs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(cs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(cs, Condition(function MaiHuangZhi_Conditions))
	call TriggerAddAction(cs, function MaiHuangZhi)
	// 烧黄纸
	set Ds=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ds, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Ds, Condition(function IsHuangZhi))
	call TriggerAddAction(Ds, function ShaoHuangZhi)
	// 跳到结拜兄弟/夫妻处
	set Es=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(Es, Player(0), "~", true)
	call TriggerRegisterPlayerChatEvent(Es, Player(1), "~", true)
	call TriggerRegisterPlayerChatEvent(Es, Player(2), "~", true)
	call TriggerRegisterPlayerChatEvent(Es, Player(3), "~", true)
	call TriggerRegisterPlayerChatEvent(Es, Player(4), "~", true)
	call TriggerRegisterPlayerChatEvent(Es, Player(5), "~", true)
	call TriggerAddCondition(Es, Condition(function kT))
	call TriggerAddAction(Es, function mT)
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, udg_index)
	call TriggerAddAction(t, function ChooseMoShi_Action)
	// 挑战模式弹窗
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, udg_tiaoZhan)
	call TriggerAddAction(t, function TiaoZhanMoshi_Action)
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, wuhun)
	call TriggerAddAction(t, function JiHuoCanZhang)
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, udg_nan)
	call TriggerAddAction(t, function ChooseNanDu_Action)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsJiDiBaoHu))
	call TriggerAddAction(t, function JiDiBaoHu)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function Trig_YunDaXianShenConditions))
	call TriggerAddAction(t, function Trig_YunDaXianShenActions)
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t, udg_ZhengPaiWL, EVENT_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function JiDiAiDa_Conditions))
	call TriggerAddAction(t, function JiDiAiDa_Actions)
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, 1000.00)
	call TriggerAddAction(t, function MoJiaoJiuRen)
	// F2回城 F3城前 F4城后
	set t=CreateTrigger()
	call TriggerRegisterPlayerSelectionEventBJ(t, Player(0), true)
	call TriggerRegisterPlayerSelectionEventBJ(t, Player(1), true)
	call TriggerRegisterPlayerSelectionEventBJ(t, Player(2), true)
	call TriggerRegisterPlayerSelectionEventBJ(t, Player(3), true)
	call TriggerRegisterPlayerSelectionEventBJ(t, Player(4), true)
	call TriggerAddCondition(t, Condition(function isF2TownPortal))
	call TriggerAddAction(t, function f2TownPortal)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(t, Condition(function isDeadItem))
	call TriggerAddAction(t, function removeDeadItem)
	set t=null
endfunction
//----------------------------------------------
//游戏细节处理——一般情况下不需要修改
// 1. 用移动模拟攻击、巡逻模拟移动 对地面
//----------------------------------------------
//右键点击己方单位
function uuxx takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetOrderedUnit())) == MAP_CONTROL_USER ) and ( IsPlayerAlly(GetOwningPlayer(GetOrderedUnit()), GetOwningPlayer(GetOrderTargetUnit())) ) and ( GetIssuedOrderId() == $D0003 ) )
endfunction
function vvxx takes nothing returns nothing
	call IssuePointOrderById(GetOrderedUnit(), $D0003, GetUnitX(GetOrderTargetUnit()), GetUnitY(GetOrderTargetUnit()))
endfunction
//优化速度加快
function Ax takes nothing returns nothing
	call Cheat("DooConV")
endfunction
//友方单位A基地
function Ux takes nothing returns boolean
	return ( ( GetTriggerUnit() == udg_ZhengPaiWL ) and ( IsUnitAlly(GetAttacker(), Player(5)) ) )
endfunction
function Vx takes nothing returns nothing
	call IssueImmediateOrderById(GetAttacker(), $D0004)
endfunction
function ga takes nothing returns nothing
	call IssuePointOrderByIdLoc(GetEnumUnit(), $D000F, v7[4])
endfunction
function ha takes nothing returns nothing
	call ForGroup(w7, function ga)
endfunction
function onUpdate takes nothing returns nothing
	call SavePlayerHandle(YDLOC, 0x4481DC09, 0xBAB343BB, GetLocalPlayer())
	call SetCameraFieldForPlayer(LoadPlayerHandle(YDLOC, 0x4481DC09, 0xBAB343BB), CAMERA_FIELD_TARGET_DISTANCE, I2R(LoadInteger(YDHT, GetHandleId(Player(0)), 0xA816E128)), 0.00)
	call SetCameraFieldForPlayer(LoadPlayerHandle(YDLOC, 0x4481DC09, 0xBAB343BB), CAMERA_FIELD_ANGLE_OF_ATTACK, 304.00, 0.00)
	// call SaveReal(YDLOC, 0x4481DC09, 0xED01DBD2, (I2R(( DzGetMouseX() - DzGetWindowX() )) / ( I2R(DzGetWindowWidth()) / 0.80 ))) // INLINED!!
	// call SaveReal(YDLOC, 0x4481DC09, 0x8EBA3885, (I2R(( ( DzGetWindowHeight() + DzGetWindowY() ) - DzGetMouseY() )) / ( I2R(DzGetWindowHeight()) / 0.60 ))) // INLINED!!
endfunction
function changeCameraDistance takes nothing returns nothing
	call SavePlayerHandle(YDLOC, 0x4F134CEC, 0xBAB343BB, DzGetTriggerKeyPlayer())
	if ( ( DzGetWheelDelta() > 0 ) ) then
		if ( ( LoadInteger(YDHT, GetHandleId(Player(0)), 0xA816E128) > 400 ) ) then
			call SaveInteger(YDHT, GetHandleId(Player(0)), 0xA816E128, ( LoadInteger(YDHT, GetHandleId(Player(0)), 0xA816E128) - 100 ))
		else
		endif
	else
		if ( ( LoadInteger(YDHT, GetHandleId(Player(0)), 0xA816E128) < 3500 ) ) then
			call SaveInteger(YDHT, GetHandleId(Player(0)), 0xA816E128, ( LoadInteger(YDHT, GetHandleId(Player(0)), 0xA816E128) + 100 ))
		else
		endif
	endif
endfunction
function registerWheelEvent takes nothing returns nothing
	if GetLocalPlayer() == GetLocalPlayer() then
		call DzFrameSetUpdateCallbackByCode(function onUpdate)
		call DzTriggerRegisterMouseWheelEventByCode(null, false, function changeCameraDistance)
	endif
endfunction
function GameDetail_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
 local timer tm= CreateTimer()
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	call TriggerAddCondition(t, Condition(function uuxx))
	call TriggerAddAction(t, function vvxx)
	// 友方单位A基地
	set ei=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ei, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(ei, Condition(function Ux))
	call TriggerAddAction(ei, function Vx)
	// 让怪A基地
	set kj=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(kj, 5.)
	call TriggerAddAction(kj, function ha)
	// 游戏优化
	set Qh=CreateTrigger()
	call TriggerRegisterTimerEventSingle(Qh, .0)
	call TriggerAddAction(Qh, function Ax)
	// 为本地玩家注册滚轮事件（滚轮缩放视角）
	call TimerStart(tm, 0.05, false, function registerWheelEvent)
	set tm=null
	set t=null
endfunction
//---------------------------------
// 武器和装备相关
	//鸟拿东西显示附加属性
    //英雄拿东西显示附加属性
    //英雄放下东西显示失去附加属性
    //英雄穿上装备
    //英雄脱下装备
	//只能穿一件衣服或武器的判断
	//集齐套装
	//失去套装
	//镇妖升级
	//镶嵌宝石系统
	// 携带养吾剑破防
//---------------------------------
//鸟拿东西显示附加属性
function Zy takes nothing returns boolean
	return ( not IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) and GetItemUserData(GetManipulatedItem()) > 0 )
endfunction
function dz takes nothing returns nothing
 local item it= GetManipulatedItem()
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer ii1= ModuloInteger(( GetItemUserData(it) / 100000000 ), 10)
 local integer ii2= ModuloInteger(( GetItemUserData(it) / 10000000 ), 10)
 local integer ii3= ModuloInteger(( GetItemUserData(it) / 1000000 ), 10)
 local integer ii4= ModuloInteger(( GetItemUserData(it) / 100000 ), 10)
 local integer ii5= ModuloInteger(( GetItemUserData(it) / 10000 ), 10)
 local integer ii6= ModuloInteger(( GetItemUserData(it) / 1000 ), 10)
 local integer ii7= ModuloInteger(( GetItemUserData(it) / 100 ), 10)
 local integer ii8= ModuloInteger(( GetItemUserData(it) / 10 ), 10)
 local integer ii9= ModuloInteger(( GetItemUserData(it) / 1 ), 10)
 local integer j= 0
 local integer l= 0
 local integer m= 0
 local integer n= 0
 local integer o= 0
	call DisplayTimedTextToPlayer(p, 0, 0, 15., GetItemName(it) + "|cff66cc33附加属性：|r")
	if ( ii2 == 1 ) then
		set j=j + ii3 * 300
	elseif ( ii2 == 2 ) then
		set l=l + ii3 * 40
	elseif ( ii2 == 3 ) then
		set m=m + ii3 * 40
	elseif ( ii2 == 4 ) then
		set n=n + ii3 * 25
	elseif ( ii2 == 5 ) then
		set o=o + ii3 * 25
	endif
	if ( ii4 == 1 ) then
		set j=j + ii5 * 300
	elseif ( ii4 == 2 ) then
		set l=l + ii5 * 40
	elseif ( ii4 == 3 ) then
		set m=m + ii5 * 40
	elseif ( ii4 == 4 ) then
		set n=n + ii5 * 25
	elseif ( ii4 == 5 ) then
		set o=o + ii5 * 25
	endif
	if ( j > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff攻击+" + I2S(j))
	endif
	if ( l > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff防御+" + I2S(l))
	endif
	if ( m > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff招式伤害+" + I2S(m))
	endif
	if ( n > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff内力+" + I2S(n))
	endif
	if ( o > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff真实伤害+" + I2S(o))
	endif
	call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff装备剩余凹槽：" + I2S(ii6))
	call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff镶嵌效果：")
	if ( ii7 == 1 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
		endif
	elseif ( ii7 == 2 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
		endif
	elseif ( ii7 == 3 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
		endif
	elseif ( ii7 == 4 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
		endif
	elseif ( ii7 == 5 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
		endif
	elseif ( ii7 == 6 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
		endif
	endif
	if ( ii8 == 1 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
		endif
	elseif ( ii8 == 2 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
		endif
	elseif ( ii8 == 3 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
		endif
	elseif ( ii8 == 4 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
		endif
	elseif ( ii8 == 5 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
		endif
	elseif ( ii8 == 6 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
		endif
	endif
	if ( ii9 == 1 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
		endif
	elseif ( ii9 == 2 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
		endif
	elseif ( ii9 == 3 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
		endif
	elseif ( ii9 == 4 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
		endif
	elseif ( ii9 == 5 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
		endif
	elseif ( ii9 == 6 ) then
		if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
		endif
	endif
	if ( ii1 == 1 ) then
		call DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得青龙套件")
	elseif ( ii1 == 2 ) then
		call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得朱雀套件")
	elseif ( ii1 == 3 ) then
		call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得玄武套件")
	elseif ( ii1 == 4 ) then
		call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得白虎套件")
	endif
	set u=null
	set p=null
	set it=null
endfunction
//英雄拿上东西显示附加属性
function fz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function gz takes nothing returns nothing
 local item it= GetManipulatedItem()
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer ii1= ModuloInteger(( GetItemUserData(it) / 100000000 ), 10)
 local integer ii2= ModuloInteger(( GetItemUserData(it) / 10000000 ), 10)
 local integer ii3= ModuloInteger(( GetItemUserData(it) / 1000000 ), 10)
 local integer ii4= ModuloInteger(( GetItemUserData(it) / 100000 ), 10)
 local integer ii5= ModuloInteger(( GetItemUserData(it) / 10000 ), 10)
 local integer ii6= ModuloInteger(( GetItemUserData(it) / 1000 ), 10)
 local integer ii7= ModuloInteger(( GetItemUserData(it) / 100 ), 10)
 local integer ii8= ModuloInteger(( GetItemUserData(it) / 10 ), 10)
 local integer ii9= ModuloInteger(( GetItemUserData(it) / 1 ), 10)
 local integer j= 0
 local integer l= 0
 local integer m= 0
 local integer n= 0
 local integer o= 0
 local integer q= 0
	if ( GetItemUserData(it) > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., GetItemName(it) + "|cff66cc33获得附加属性：|r")
		if ( ii2 == 1 ) then
			set j=j + ii3 * 300
		elseif ( ii2 == 2 ) then
			set l=l + ii3 * 40
		elseif ( ii2 == 3 ) then
			set m=m + ii3 * 40
		elseif ( ii2 == 4 ) then
			set n=n + ii3 * 25
		elseif ( ii2 == 5 ) then
			set o=o + ii3 * 25
		endif
		if ( ii4 == 1 ) then
			set j=j + ii5 * 300
		elseif ( ii4 == 2 ) then
			set l=l + ii5 * 40
		elseif ( ii4 == 3 ) then
			set m=m + ii5 * 40
		elseif ( ii4 == 4 ) then
			set n=n + ii5 * 25
		elseif ( ii4 == 5 ) then
			set o=o + ii5 * 25
		endif
		if ( j > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff攻击+" + I2S(j))
			call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 0 , j)
		endif
		if ( l > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff防御+" + I2S(l))
			call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , l)
		endif
		if ( m > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff招式伤害+" + I2S(m))
			call ModifyHeroStat(0, u, 0, m)
		endif
		if ( n > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff内力+" + I2S(n))
			call ModifyHeroStat(1, u, 0, n)
		endif
		if ( o > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff真实伤害+" + I2S(o))
			call ModifyHeroStat(2, u, 0, o)
		endif
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff装备剩余凹槽：" + I2S(ii6))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff镶嵌效果：")
		if ( ii7 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] + 3
			endif
		elseif ( ii7 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] + 3
			endif
		elseif ( ii7 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] + 3
			endif
		elseif ( ii7 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] + 3
			endif
		elseif ( ii7 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] + 3
			endif
		elseif ( ii7 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] + 3
			endif
		endif
		if ( ii8 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] + 3
			endif
		elseif ( ii8 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] + 3
			endif
		elseif ( ii8 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] + 3
			endif
		elseif ( ii8 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] + 3
			endif
		elseif ( ii8 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] + 3
			endif
		elseif ( ii8 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] + 3
			endif
		endif
		if ( ii9 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] + 3
			endif
		elseif ( ii9 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] + 3
			endif
		elseif ( ii9 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] + 3
			endif
		elseif ( ii9 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] + 3
			endif
		elseif ( ii9 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] + 3
			endif
		elseif ( ii9 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] + 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] + 3
			endif
		endif
		if ( ii1 == 1 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得青龙套件")
		elseif ( ii1 == 2 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得朱雀套件")
		elseif ( ii1 == 3 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得玄武套件")
		elseif ( ii1 == 4 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得白虎套件")
		endif
		set k7=1
		loop
		exitwhen k7 > 6
		if ( GetItemUserData(UnitItemInSlotBJ(u, k7)) / $5F5E100 == ii1 and UnitItemInSlotBJ(u, k7) != GetManipulatedItem() ) then
			set q=q + 1
		endif
		set k7=k7 + 1
		endloop
		if ( q == 2 ) then
			if ( ii1 == 1 ) then
				call ModifyHeroStat(0, u, 0, $C8)
				set juexuelingwu[i]=( juexuelingwu[i] + 1 )
				set udg_baojilv[i]=( udg_baojilv[i] + .04 )
				call UnitAddAbility(u, 1093677106)
				call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 0 , 1000)
				set gengu[i]=( gengu[i] + 2 )
				set wuxing[i]=( wuxing[i] + 1 )
				set special_attack[i]=special_attack[i] + 30
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐青龙套装：")
				call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF招式伤害+200")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击率+4%")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF攻击速度+50%")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF攻击+1000")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF根骨+2")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF特攻+30")
			elseif ( ii1 == 2 ) then
				call ModifyHeroStat(1, u, 0, $96)
				set juexuelingwu[i]=( juexuelingwu[i] + 1 )
				set udg_baojishanghai[i]=( udg_baojishanghai[i] + .5 )
				set shaguaihufui[i]=( shaguaihufui[i] + 1000. )
				call UnitAddAbility(u, 1093677107)
				set yishu[i]=( yishu[i] + 1 )
				set jingmai[i]=( jingmai[i] + 2 )
				set special_attack[i]=special_attack[i] + 30
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐朱雀套装：")
				call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF内力+150")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击伤害+50%")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF杀怪回复+1000")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF法术回复+10")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF医术+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF经脉+2")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF特攻+30")
			elseif ( ii1 == 3 ) then
				call ModifyHeroStat(0, u, 0, $96)
				set juexuelingwu[i]=( juexuelingwu[i] + 1 )
				call UnitAddAbility(u, 1093677108)
				call UnitAddAbility(u, 1093677109)
				call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , $C8)
				set wuxing[i]=( wuxing[i] + 2 )
				set danpo[i]=( danpo[i] + 1 )
				set special_attack[i]=special_attack[i] + 30
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐玄武套装：")
				call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF招式伤害+150")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF气血+30000")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF气血回复+600")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF防御+200")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性+2")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF特攻+30")
			elseif ( ii1 == 4 ) then
				call ModifyHeroStat(1, u, 0, $C8)
				call ModifyHeroStat(2, u, 0, 100)
				call UnitAddAbility(u, 1093677110)
				set juexuelingwu[i]=( juexuelingwu[i] + 2 )
				set fuyuan[i]=( fuyuan[i] + 2 )
				set danpo[i]=( danpo[i] + 1 )
				set special_attack[i]=special_attack[i] + 30
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐白虎套装：")
				call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF内力+200")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+2")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF真实伤害+100")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF移动速度最大化")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF福缘+2")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄+1")
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF特攻+30")
			endif
		else
			if ( ii1 == 1 ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF33ffff获得青龙套件，（已收集到" + ( I2S(q + 1) ) + "件）" ))
			elseif ( ii1 == 2 ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF33ffff获得朱雀套件，（已收集到" + ( I2S(q + 1) ) + "件）" ))
			elseif ( ii1 == 3 ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF33ffff获得玄武套件，（已收集到" + ( I2S(q + 1) ) + "件）" ))
			elseif ( ii1 == 4 ) then
				call DisplayTextToPlayer(p, 0, 0, ( "|cFF33ffff获得白虎套件，（已收集到" + ( I2S(q + 1) ) + "件）" ))
			endif
		endif
	endif
	set u=null
	set p=null
	set it=null
endfunction
function iz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function jz takes nothing returns nothing
 local item it= GetManipulatedItem()
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer ii1= ModuloInteger(( GetItemUserData(it) / 100000000 ), 10)
 local integer ii2= ModuloInteger(( GetItemUserData(it) / 10000000 ), 10)
 local integer ii3= ModuloInteger(( GetItemUserData(it) / 1000000 ), 10)
 local integer ii4= ModuloInteger(( GetItemUserData(it) / 100000 ), 10)
 local integer ii5= ModuloInteger(( GetItemUserData(it) / 10000 ), 10)
 local integer ii6= ModuloInteger(( GetItemUserData(it) / 1000 ), 10)
 local integer ii7= ModuloInteger(( GetItemUserData(it) / 100 ), 10)
 local integer ii8= ModuloInteger(( GetItemUserData(it) / 10 ), 10)
 local integer ii9= ModuloInteger(( GetItemUserData(it) / 1 ), 10)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 0
 local integer l= 0
 local integer m= 0
 local integer n= 0
 local integer o= 0
 local integer q= 0
	if ( GetItemUserData(it) > 0 ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 15., GetItemName(it) + "|cff66cc33失去附加属性：|r")
		if ( ii2 == 1 ) then
			set j=j + ii3 * 300
		elseif ( ii2 == 2 ) then
			set l=l + ii3 * 40
		elseif ( ii2 == 3 ) then
			set m=m + ii3 * 40
		elseif ( ii2 == 4 ) then
			set n=n + ii3 * 25
		elseif ( ii2 == 5 ) then
			set o=o + ii3 * 25
		endif
		if ( ii4 == 1 ) then
			set j=j + ii5 * 300
		elseif ( ii4 == 2 ) then
			set l=l + ii5 * 40
		elseif ( ii4 == 3 ) then
			set m=m + ii5 * 40
		elseif ( ii4 == 4 ) then
			set n=n + ii5 * 25
		elseif ( ii4 == 5 ) then
			set o=o + ii5 * 25
		endif
		if ( j > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff攻击+" + I2S(j))
			call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 1 , j)
		endif
		if ( l > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff防御+" + I2S(l))
			call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 1 , l)
		endif
		if ( m > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff招式伤害+" + I2S(m))
			call ModifyHeroStat(0, u, 1, m)
		endif
		if ( n > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff内力+" + I2S(n))
			call ModifyHeroStat(1, u, 1, n)
		endif
		if ( o > 0 ) then
			call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff真实伤害+" + I2S(o))
			call ModifyHeroStat(2, u, 1, o)
		endif
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff装备剩余凹槽：" + I2S(ii6))
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff镶嵌效果：")
		if ( ii7 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] - 3
			endif
		elseif ( ii7 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] - 3
			endif
		elseif ( ii7 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] - 3
			endif
		elseif ( ii7 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] - 3
			endif
		elseif ( ii7 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] - 3
			endif
		elseif ( ii7 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] - 3
			endif
		endif
		if ( ii8 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] - 3
			endif
		elseif ( ii8 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] - 3
			endif
		elseif ( ii8 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] - 3
			endif
		elseif ( ii8 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] - 3
			endif
		elseif ( ii8 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] - 3
			endif
		elseif ( ii8 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] - 3
			endif
		endif
		if ( ii9 == 1 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+1")
				set gengu[i]=gengu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff根骨+3")
				set gengu[i]=gengu[i] - 3
			endif
		elseif ( ii9 == 2 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+1")
				set wuxing[i]=wuxing[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff悟性+3")
				set wuxing[i]=wuxing[i] - 3
			endif
		elseif ( ii9 == 3 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+1")
				set jingmai[i]=jingmai[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff经脉+3")
				set jingmai[i]=jingmai[i] - 3
			endif
		elseif ( ii9 == 4 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+1")
				set fuyuan[i]=fuyuan[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff福缘+3")
				set fuyuan[i]=fuyuan[i] - 3
			endif
		elseif ( ii9 == 5 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+1")
				set danpo[i]=danpo[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff胆魄+3")
				set danpo[i]=danpo[i] - 3
			endif
		elseif ( ii9 == 6 ) then
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+1")
				set yishu[i]=yishu[i] - 1
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 15., "|cFFff66ff医术+3")
				set yishu[i]=yishu[i] - 3
			endif
		endif
		set k7=1
		loop
			exitwhen k7 > 6
			if ( GetItemUserData(UnitItemInSlotBJ(u, k7)) / $5F5E100 == ii1 and UnitItemInSlotBJ(u, k7) != GetManipulatedItem() ) then
				set q=q + 1
			endif
			set k7=k7 + 1
		endloop
		if ( q == 2 ) then
			if ( ii1 == 1 ) then
				call ModifyHeroStat(0, u, 1, $C8)
				set juexuelingwu[i]=( juexuelingwu[i] - 1 )
				set udg_baojilv[i]=( udg_baojilv[i] - .04 )
				call UnitRemoveAbility(u, 1093677106)
				call YDWEGeneralBounsSystemUnitSetBonus(u , 3 , 1 , 1000)
				set gengu[i]=( gengu[i] - 2 )
				set wuxing[i]=( wuxing[i] - 1 )
				set special_attack[i]=special_attack[i] - 30
				call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去青龙套装")
			elseif ( ii1 == 2 ) then
				call ModifyHeroStat(1, u, 1, $96)
				set juexuelingwu[i]=( juexuelingwu[i] - 1 )
				set udg_baojishanghai[i]=( udg_baojishanghai[i] - .5 )
				set shaguaihufui[i]=( shaguaihufui[i] - 1000. )
				call UnitRemoveAbility(u, 1093677107)
				set yishu[i]=( yishu[i] - 1 )
				set jingmai[i]=( jingmai[i] - 2 )
				set special_attack[i]=special_attack[i] - 30
				call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去朱雀套装")
			elseif ( ii1 == 3 ) then
				call ModifyHeroStat(0, u, 1, $96)
				set juexuelingwu[i]=( juexuelingwu[i] - 1 )
				call UnitRemoveAbility(u, 1093677108)
				call UnitRemoveAbility(u, 1093677109)
				call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 1 , $C8)
				set wuxing[i]=( wuxing[i] - 2 )
				set danpo[i]=( danpo[i] - 1 )
				set special_attack[i]=special_attack[i] - 30
				call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去玄武套装")
			elseif ( ii1 == 4 ) then
				call ModifyHeroStat(1, u, 1, $C8)
				call ModifyHeroStat(2, u, 1, 100)
				call UnitRemoveAbility(u, 1093677110)
				set juexuelingwu[i]=( juexuelingwu[i] - 2 )
				set fuyuan[i]=( fuyuan[i] - 2 )
				set danpo[i]=( danpo[i] - 1 )
				set special_attack[i]=special_attack[i] - 30
				call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去白虎套装")
			endif
		endif
	endif
	set u=null
	set p=null
	set it=null
endfunction
//穿上装备
function mz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT ) or ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE ) or ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_CHARGED ) ) ) // INLINED!!
endfunction
function nz takes nothing returns nothing
 local integer i=( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )
 local integer id=GetItemTypeId(GetManipulatedItem())
 local integer j= 1
	loop
		exitwhen j >= 30
		if id == s__ShopWeapon_id[shopweapon[j]] then //在smelt_weapon里
call sc__ShopWeapon_PickUpWeapon(shopweapon[j],GetTriggerUnit() , GetManipulatedItem())
			exitwhen true
		endif
		set j=j + 1
	endloop
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 0 , R2I(LoadReal(YDHT, id, StringHash("攻击力"))))
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , R2I(LoadReal(YDHT, id, StringHash("防御"))))
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 1 , 0 , R2I(LoadReal(YDHT, id, StringHash("法力上限"))))
	call ModifyHeroStat(0, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("招式伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("招式伤害"))))
	call ModifyHeroStat(1, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("内力"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("内力"))))
	call ModifyHeroStat(2, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("真实伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("真实伤害"))))
	set udg_baojishanghai[i]=( udg_baojishanghai[i] + LoadReal(YDHT, id, StringHash("暴击伤害")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击伤害")) )
	set udg_baojilv[i]=( udg_baojilv[i] + LoadReal(YDHT, id, StringHash("暴击率")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击率")) )
	set juexuelingwu[i]=juexuelingwu[i] + R2I(LoadReal(YDHT, id, StringHash("绝学领悟"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("绝学领悟")))
	set gengu[i]=gengu[i] + R2I(LoadReal(YDHT, id, StringHash("根骨"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("根骨")))
	set danpo[i]=danpo[i] + R2I(LoadReal(YDHT, id, StringHash("胆魄"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("胆魄")))
	set wuxing[i]=wuxing[i] + R2I(LoadReal(YDHT, id, StringHash("悟性"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("悟性")))
	set yishu[i]=yishu[i] + R2I(LoadReal(YDHT, id, StringHash("医术"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("医术")))
	set jingmai[i]=jingmai[i] + R2I(LoadReal(YDHT, id, StringHash("经脉"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("经脉")))
	set fuyuan[i]=fuyuan[i] + R2I(LoadReal(YDHT, id, StringHash("福缘"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("福缘")))
	set shanghaihuifu[i]=shanghaihuifu[i] + LoadReal(YDHT, id, StringHash("伤害回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("伤害回复"))
	set shaguaihufui[i]=shaguaihufui[i] + LoadReal(YDHT, id, StringHash("杀怪回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("杀怪回复"))
	set shengminghuifu[i]=shengminghuifu[i] + LoadReal(YDHT, id, StringHash("生命回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("生命回复"))
	set falihuifu[i]=falihuifu[i] + LoadReal(YDHT, id, StringHash("法力回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("法力回复"))
	set special_attack[i]=special_attack[i] + R2I(LoadReal(YDHT, id, StringHash("特殊攻击"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("特殊攻击")))
endfunction
//脱下装备
function pz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT ) or ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE ) or ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_CHARGED ) ) ) // INLINED!!
endfunction
function qz takes nothing returns nothing
 local integer i=( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )
 local integer id=GetItemTypeId(GetManipulatedItem())
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 1 , R2I(LoadReal(YDHT, id, StringHash("攻击力"))))
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 1 , R2I(LoadReal(YDHT, id, StringHash("防御"))))
	call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 1 , 1 , R2I(LoadReal(YDHT, id, StringHash("法力上限"))))
	call ModifyHeroStat(0, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("招式伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("招式伤害"))))
	call ModifyHeroStat(1, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("内力"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("内力"))))
	call ModifyHeroStat(2, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("真实伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("真实伤害"))))
	set udg_baojishanghai[i]=( udg_baojishanghai[i] - LoadReal(YDHT, id, StringHash("暴击伤害")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击伤害")) )
	set udg_baojilv[i]=( udg_baojilv[i] - LoadReal(YDHT, id, StringHash("暴击率")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击率")) )
	set juexuelingwu[i]=juexuelingwu[i] - R2I(LoadReal(YDHT, id, StringHash("绝学领悟"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("绝学领悟")))
	set gengu[i]=gengu[i] - R2I(LoadReal(YDHT, id, StringHash("根骨"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("根骨")))
	set danpo[i]=danpo[i] - R2I(LoadReal(YDHT, id, StringHash("胆魄"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("胆魄")))
	set wuxing[i]=wuxing[i] - R2I(LoadReal(YDHT, id, StringHash("悟性"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("悟性")))
	set yishu[i]=yishu[i] - R2I(LoadReal(YDHT, id, StringHash("医术"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("医术")))
	set jingmai[i]=jingmai[i] - R2I(LoadReal(YDHT, id, StringHash("经脉"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("经脉")))
	set fuyuan[i]=fuyuan[i] - R2I(LoadReal(YDHT, id, StringHash("福缘"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("福缘")))
	set shanghaihuifu[i]=shanghaihuifu[i] - LoadReal(YDHT, id, StringHash("伤害回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("伤害回复"))
	set shaguaihufui[i]=shaguaihufui[i] - LoadReal(YDHT, id, StringHash("杀怪回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("杀怪回复"))
	set shengminghuifu[i]=shengminghuifu[i] - LoadReal(YDHT, id, StringHash("生命回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("生命回复"))
	set falihuifu[i]=falihuifu[i] - LoadReal(YDHT, id, StringHash("法力回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("法力回复"))
	set special_attack[i]=special_attack[i] - R2I(LoadReal(YDHT, id, StringHash("特殊攻击"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("特殊攻击")))
endfunction
//江湖忠
function UnitHaveJueZhanBa takes nothing returns boolean
	return ( ( UnitHaveItem(GetAttacker() , 'I08V') ) )
endfunction
function JueZhanBaXiaoGuo takes nothing returns nothing
 local unit u= GetTriggerUnit()
	if ( ( ModuloInteger(GetUnitPointValue(u), 100) == 0 ) ) then
		call percentDamage(u , 5 , true)
	else
		call percentDamage(u , 1 , true)
	endif
	set u=null
endfunction
//决战霸
function UnitHaveJiangHuZhong takes nothing returns boolean
	return ( ( UnitHaveItem(GetTriggerUnit() , 'I090') ) )
endfunction
function JiangHuZhongXiaoGuo takes nothing returns nothing
local unit u= GetAttacker()
	if ( ( ModuloInteger(GetUnitPointValue(u), 100) == 0 ) ) then
		call percentDamage(u , 5 , true)
	else
		call percentDamage(u , 1 , true)
	endif
	set u=null
endfunction
// 养吾剑自带破甲效果
function UnitHaveYangWuJian takes nothing returns boolean
	return ( ( UnitHasDenomWeapon(GetAttacker() , 'I0E0') ) ) and udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] == 4
endfunction
function YangWuJianXiaoGuo takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
	call WanBuff(u , uc , 9)
	set u=null
	set uc=null
endfunction
//穿武器或衣服
function Mz takes nothing returns boolean
	return ( ( ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT ) or GetItemTypeId(GetManipulatedItem()) == 'I0DB' or GetItemTypeId(GetManipulatedItem()) == 'I0DJ' or GetItemTypeId(GetManipulatedItem()) == 'I0DL' or ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE ) ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function ItemChongFu takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer newbee_counter= 0
	set E8=1
	set udg_wuqishu[i]=0
	set udg_yifushu[i]=0
	loop
		exitwhen E8 > 6
		if ( GetItemTypeId(UnitItemInSlotBJ(u, E8)) == 'I0DB' or GetItemTypeId(UnitItemInSlotBJ(u, E8)) == 'I0DJ' or GetItemTypeId(UnitItemInSlotBJ(u, E8)) == 'I0DL' ) then
		    set newbee_counter=newbee_counter + 1
		    if newbee_counter >= 2 then
                call UnitRemoveItem(u, GetManipulatedItem())
                call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000最多只能携带一件新手神器")
                exitwhen true
            endif
        else
            if ( GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_ARTIFACT ) then
                set udg_wuqishu[i]=udg_wuqishu[i] + 1
            endif
            if ( GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_PURCHASABLE ) then
                set udg_yifushu[i]=udg_yifushu[i] + 1
            endif
            if ( GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_ARTIFACT or GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_PURCHASABLE ) then
                if ( ( GetItemType(UnitItemInSlotBJ(u, E8)) == GetItemType(GetManipulatedItem()) ) and ( UnitItemInSlotBJ(u, E8) != GetManipulatedItem() ) and not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) and not isTitle(i , 11) ) then // INLINED!!
                    call UnitRemoveItemSwapped(UnitItemInSlotBJ(u, E8), u)
                    call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000非丫鬟角色最多只能携带一件武器和衣服")
                endif
            endif
		endif
		set E8=E8 + 1
	endloop
	if ( (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) or isTitle(i , 11) ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
		if GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT and udg_wuqishu[i] >= 3 then
			call UnitRemoveItemSwapped(GetManipulatedItem(), u)
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000丫鬟最多只能携带两件武器")
		endif
		if GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE and udg_yifushu[i] >= 3 then
			call UnitRemoveItemSwapped(GetManipulatedItem(), u)
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000丫鬟最多只能穿两件衣服")
		endif
	endif
	set u=null
	set p=null
endfunction
//-------套装系统开始--------
function Pz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( ( GetItemLevel(GetManipulatedItem()) == 1 ) or ( GetItemLevel(GetManipulatedItem()) == 3 ) or ( GetItemLevel(GetManipulatedItem()) == 6 ) ) ) // INLINED!!
endfunction
function Qz takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( F8[i] == false ) and ( UnitHaveItem(u , 'I01L') ) and ( UnitHaveItem(u , 'I01M') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※精钢套装※|R\n|CFFB2FF00招式伤害+150\n暴击率+4%\n暴击伤害+30%\n杀怪回复+500\n根骨+1\n胆魄+1\n特殊攻击+15|R")
		set F8[i]=true
		call ModifyHeroStat(0, u, 0, $96)
		set udg_baojilv[i]=( udg_baojilv[i] + .04 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] + .3 )
		set shaguaihufui[i]=( shaguaihufui[i] + 500. )
		set gengu[i]=( gengu[i] + 1 )
		set danpo[i]=( danpo[i] + 1 )
		set special_attack[i]=special_attack[i] + 15
	endif
	if ( ( XNKL[i] == false ) and ( UnitHaveItem(u , 'I0A8') ) and ( UnitHaveItem(u , 'I0A9') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※新年快乐套装※|R\n|CFFB2FF00全属性+1000\n全性格属性+5\n特殊攻击+15|R")
		set XNKL[i]=true
		call ModifyHeroStat(0, u, 0, 1000)
		call ModifyHeroStat(1, u, 0, 1000)
		call ModifyHeroStat(2, u, 0, 1000)
		set jingmai[i]=( jingmai[i] + 5 )
		set fuyuan[i]=( fuyuan[i] + 5 )
		set wuxing[i]=( wuxing[i] + 5 )
		set yishu[i]=( yishu[i] + 5 )
		set gengu[i]=( gengu[i] + 5 )
		set danpo[i]=( danpo[i] + 5 )
		set special_attack[i]=special_attack[i] + 15
	endif
	// 张无忌杀猪刀I0CI,郭靖环戒I0CH，乔峰草鞋I0DO，合成大侠套装：全属性+1，三围+50
	if ( ( daxia[i] == false ) and ( UnitHaveItem(u , 'I0CI') ) and ( UnitHaveItem(u , 'I0CH') ) and ( UnitHaveItem(u , 'I0DO') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※大侠套装※|R\n|CFFB2FF00全属性+50\n全性格属性+1\n特殊攻击+10|R")
		set daxia[i]=true
		call ModifyHeroStat(0, u, 0, 50)
		call ModifyHeroStat(1, u, 0, 50)
		call ModifyHeroStat(2, u, 0, 50)
		set jingmai[i]=( jingmai[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		set wuxing[i]=( wuxing[i] + 1 )
		set yishu[i]=( yishu[i] + 1 )
		set gengu[i]=( gengu[i] + 1 )
		set danpo[i]=( danpo[i] + 1 )
		set special_attack[i]=special_attack[i] + 10
	endif
	if ( ( H8[i] == false ) and ( UnitHaveItem(u , 1227895118) ) and ( UnitHaveItem(u , 1227895119) ) and ( UnitHaveItem(u , 1227895120) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※七星套装※|R\n|CFFB2FF00招式伤害+200\n魔法上限+15\n法力恢复+5\n气血+10000\n每秒恢复+130\n医术+1\n悟性+1\n特殊攻击+18|R")
		set H8[i]=true
		call ModifyHeroStat(0, u, 0, $C8)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 0 , 15)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 0 , $2710)
		call UnitAddAbility(u, 1093678424)
		call UnitAddAbility(u, 1093678425)
		set wuxing[i]=( wuxing[i] + 1 )
		set yishu[i]=( yishu[i] + 1 )
		set special_attack[i]=special_attack[i] + 18
	endif
	if ( ( I8[i] == false ) and ( UnitHaveItem(u , 'I01Q') ) and ( UnitHaveItem(u , 'I01R') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※破军套装※|R\n|CFFB2FF00攻击速度+30%\n气血+10000\n每秒回复+400\n防御+30\n胆魄+1\n福缘+1\n特殊攻击+10")
		set I8[i]=true
		call UnitAddAbility(u, 1093678426)
		call UnitAddAbility(u, 1093678640)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 0 , $2710)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , 30)
		set danpo[i]=( danpo[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		set special_attack[i]=special_attack[i] + 10
	endif
	if ( ( l8[i] == false ) and ( UnitHaveItem(u , 'I00X') ) and ( UnitHaveItem(u , 'I00Y') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※绝恋套装※|R\n|CFFB2FF00招式伤害+150\n真实伤害+100\n绝学领悟力+1\n气血+15000\n每秒回复+300\n伤害回复+300\n全性格属性+1\n特殊攻击+20")
		set l8[i]=true
		call ModifyHeroStat(0, u, 0, $96)
		call ModifyHeroStat(2, u, 0, 100)
		set juexuelingwu[i]=( juexuelingwu[i] + 1 )
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 0 , $3A98)
		call UnitAddAbility(u, 1093678641)
		set shanghaihuifu[i]=( shanghaihuifu[i] + 300. )
		set jingmai[i]=( jingmai[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		set wuxing[i]=( wuxing[i] + 1 )
		set yishu[i]=( yishu[i] + 1 )
		set gengu[i]=( gengu[i] + 1 )
		set danpo[i]=( danpo[i] + 1 )
		set special_attack[i]=special_attack[i] + 20
	endif
	if ( ( G8[i] == false ) and ( UnitHaveItem(u , 'I00Z') ) and ( UnitHaveItem(u , 'I010') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※倾城套装※|R\n|CFFB2FF00防御+170\n绝学领悟力+1\n暴击率+4%\n暴击伤害+30%\n杀怪回复+600\n全性格属性+1\n特殊攻击+25")
		set G8[i]=true
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , $AA)
		set juexuelingwu[i]=( juexuelingwu[i] + 1 )
		set udg_baojilv[i]=( udg_baojilv[i] + .04 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] + .3 )
		set shaguaihufui[i]=( shaguaihufui[i] + 600. )
		set jingmai[i]=( jingmai[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		set wuxing[i]=( wuxing[i] + 1 )
		set yishu[i]=( yishu[i] + 1 )
		set gengu[i]=( gengu[i] + 1 )
		set danpo[i]=( danpo[i] + 1 )
		set special_attack[i]=special_attack[i] + 25
	endif
	if ( ( Ee[i] == false ) and ( UnitHaveItem(u , 'I08V') ) and ( UnitHaveItem(u , 'I08W') ) and ( UnitHaveItem(u , 'I08X') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※江湖套装※|R\n|CFFB2FF00内力+300\n真实伤害+200\n暴击伤害+150%\n法力恢复+10\n暴击率+20%\n绝学领悟力+4\n全性格属性+3\n武功伤害+60%\n特殊攻击+40")
		set Ee[i]=true
		call ModifyHeroStat(1, u, 0, 300)
		call ModifyHeroStat(2, u, 0, $C8)
		call UnitAddAbility(u, 1093681741)
		set udg_baojilv[i]=( udg_baojilv[i] + .2 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] + 1.5 )
		set juexuelingwu[i]=( juexuelingwu[i] + 4 )
		set jingmai[i]=( jingmai[i] + 3 )
		set fuyuan[i]=( fuyuan[i] + 3 )
		set wuxing[i]=( wuxing[i] + 3 )
		set yishu[i]=( yishu[i] + 3 )
		set gengu[i]=( gengu[i] + 3 )
		set danpo[i]=( danpo[i] + 3 )
		set udg_shanghaijiacheng[i]=( udg_shanghaijiacheng[i] + .6 )
		set special_attack[i]=special_attack[i] + 40
	endif
	if ( ( De[i] == false ) and ( UnitHaveItem(u , 'I090') ) and ( UnitHaveItem(u , 'I08Z') ) and ( UnitHaveItem(u , 'I08Y') ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffFF4d00※决战套装※|R\n|CFFB2FF00招式伤害+1000\n伤害回复+600\n气血+100000\n每秒恢复+1000\n防御+1000\n绝学领悟力+4\n全性格属性+3\n伤害吸收+30%\n特殊攻击+40")
		set De[i]=true
		call ModifyHeroStat(0, u, 0, 1000)
		set shanghaihuifu[i]=( shanghaihuifu[i] + 600. )
		call UnitAddAbility(u, 1093681742)
		call UnitAddAbility(u, 1093681743)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , 1000)
		set juexuelingwu[i]=( juexuelingwu[i] + 4 )
		set jingmai[i]=( jingmai[i] + 3 )
		set fuyuan[i]=( fuyuan[i] + 3 )
		set wuxing[i]=( wuxing[i] + 3 )
		set yishu[i]=( yishu[i] + 3 )
		set gengu[i]=( gengu[i] + 3 )
		set danpo[i]=( danpo[i] + 3 )
		set udg_shanghaixishou[i]=( udg_shanghaixishou[i] + .3 )
		set special_attack[i]=special_attack[i] + 40
	endif
	set u=null
	set p=null
endfunction
//失去套装
function Sz takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( ( GetItemLevel(GetManipulatedItem()) == 1 ) or ( GetItemLevel(GetManipulatedItem()) == 3 ) or ( GetItemLevel(GetManipulatedItem()) == 6 ) ) ) // INLINED!!
endfunction
function Tz takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call YDWEPolledWaitNull(.01)
	if ( ( F8[i] ) and ( ( UnitHaveItem(u , 'I01L') == false ) or ( UnitHaveItem(u , 'I01M') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去精钢套装属性|R")
		set F8[i]=false
		call ModifyHeroStat(0, u, 1, $96)
		set udg_baojilv[i]=( udg_baojilv[i] - .04 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] - .3 )
		set shaguaihufui[i]=( shaguaihufui[i] - 500. )
		set gengu[i]=( gengu[i] - 1 )
		set danpo[i]=( danpo[i] - 1 )
		set special_attack[i]=special_attack[i] - 15
	endif
	if ( ( XNKL[i] ) and ( ( UnitHaveItem(u , 'I0A8') == false ) or ( UnitHaveItem(u , 'I0A9') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去新年快乐套装属性|R")
		set XNKL[i]=false
		call ModifyHeroStat(0, u, 1, 1000)
		call ModifyHeroStat(1, u, 1, 1000)
		call ModifyHeroStat(2, u, 1, 1000)
		set jingmai[i]=( jingmai[i] - 5 )
		set fuyuan[i]=( fuyuan[i] - 5 )
		set wuxing[i]=( wuxing[i] - 5 )
		set yishu[i]=( yishu[i] - 5 )
		set gengu[i]=( gengu[i] - 5 )
		set danpo[i]=( danpo[i] - 5 )
		set special_attack[i]=special_attack[i] - 15
	endif
	if ( ( daxia[i] ) and ( UnitHaveItem(u , 'I0CI') == false ) or ( UnitHaveItem(u , 'I0CH') == false ) or ( UnitHaveItem(u , 'I0DO') == false ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去大侠套装属性|R")
		set daxia[i]=false
		call ModifyHeroStat(0, u, 1, 50)
		call ModifyHeroStat(1, u, 1, 50)
		call ModifyHeroStat(2, u, 1, 50)
		set jingmai[i]=( jingmai[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 1 )
		set wuxing[i]=( wuxing[i] - 1 )
		set yishu[i]=( yishu[i] - 1 )
		set gengu[i]=( gengu[i] - 1 )
		set danpo[i]=( danpo[i] - 1 )
		set special_attack[i]=special_attack[i] - 10
	endif
	if ( ( H8[i] ) and ( ( UnitHaveItem(u , 1227895118) == false ) or ( UnitHaveItem(u , 1227895119) == false ) or ( UnitHaveItem(u , 1227895120) == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去七星套装属性|R")
		set H8[i]=false
		call ModifyHeroStat(0, u, 1, $C8)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 1 , 15)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 1 , $2710)
		call UnitRemoveAbility(u, 1093678424)
		call UnitRemoveAbility(u, 1093678425)
		set wuxing[i]=( wuxing[i] - 1 )
		set yishu[i]=( yishu[i] - 1 )
		set special_attack[i]=special_attack[i] - 18
	endif
	if ( ( I8[i] ) and ( ( UnitHaveItem(u , 'I01Q') == false ) or ( UnitHaveItem(u , 'I01R') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去破军套装属性|R")
		set I8[i]=false
		call UnitRemoveAbility(u, 1093678426)
		call UnitRemoveAbility(u, 1093678640)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 1 , $2710)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 1 , 30)
		set danpo[i]=( danpo[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 1 )
		set special_attack[i]=special_attack[i] - 10
	endif
	if ( ( l8[i] ) and ( ( UnitHaveItem(u , 'I00X') == false ) or ( UnitHaveItem(u , 'I00Y') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去绝恋套装属性|R")
		set l8[i]=false
		call ModifyHeroStat(0, u, 1, $96)
		call ModifyHeroStat(2, u, 1, 100)
		set juexuelingwu[i]=( juexuelingwu[i] - 1 )
		call YDWEGeneralBounsSystemUnitSetBonus(u , 0 , 1 , $3A98)
		call UnitRemoveAbility(u, 1093678641)
		set shanghaihuifu[i]=( shanghaihuifu[i] - 300. )
		set jingmai[i]=( jingmai[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 1 )
		set wuxing[i]=( wuxing[i] - 1 )
		set yishu[i]=( yishu[i] - 1 )
		set gengu[i]=( gengu[i] - 1 )
		set danpo[i]=( danpo[i] - 1 )
		set special_attack[i]=special_attack[i] - 20
	endif
	if ( ( G8[i] ) and ( ( UnitHaveItem(u , 'I00Z') == false ) or ( UnitHaveItem(u , 'I010') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去倾城套装属性|R")
		set G8[i]=false
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 1 , $AA)
		set juexuelingwu[i]=( juexuelingwu[i] - 1 )
		set udg_baojilv[i]=( udg_baojilv[i] - .04 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] - .3 )
		set shaguaihufui[i]=( shaguaihufui[i] - 600. )
		set jingmai[i]=( jingmai[i] - 1 )
		set fuyuan[i]=( fuyuan[i] - 1 )
		set wuxing[i]=( wuxing[i] - 1 )
		set yishu[i]=( yishu[i] - 1 )
		set gengu[i]=( gengu[i] - 1 )
		set danpo[i]=( danpo[i] - 1 )
		set special_attack[i]=special_attack[i] - 25
	endif
	if ( ( Ee[i] ) and ( ( UnitHaveItem(u , 'I08V') == false ) or ( UnitHaveItem(u , 'I08W') == false ) or ( UnitHaveItem(u , 'I08X') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去江湖套装属性|R")
		set Ee[i]=false
		call ModifyHeroStat(1, u, 1, 300)
		call ModifyHeroStat(2, u, 1, $C8)
		call UnitRemoveAbility(u, 1093681741)
		set udg_baojilv[i]=( udg_baojilv[i] - .2 )
		set udg_baojishanghai[i]=( udg_baojishanghai[i] - 1.5 )
		set juexuelingwu[i]=( juexuelingwu[i] - 4 )
		set jingmai[i]=( jingmai[i] - 3 )
		set fuyuan[i]=( fuyuan[i] - 3 )
		set wuxing[i]=( wuxing[i] - 3 )
		set yishu[i]=( yishu[i] - 3 )
		set gengu[i]=( gengu[i] - 3 )
		set danpo[i]=( danpo[i] - 3 )
		set udg_shanghaijiacheng[i]=( udg_shanghaijiacheng[i] - .6 )
		set special_attack[i]=special_attack[i] - 40
	endif
	if ( ( De[i] ) and ( ( UnitHaveItem(u , 'I090') == false ) or ( UnitHaveItem(u , 'I08Z') == false ) or ( UnitHaveItem(u , 'I08Y') == false ) ) ) then
		call DisplayTimedTextToPlayer(p, 0, 0, 10., "|cffff00ff失去决战套装属性|R")
		set De[i]=false
		call ModifyHeroStat(0, u, 1, 1000)
		set shanghaihuifu[i]=( shanghaihuifu[i] - 600. )
		call UnitRemoveAbility(u, 1093681742)
		call UnitRemoveAbility(u, 1093681743)
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 1 , 1000)
		set juexuelingwu[i]=( juexuelingwu[i] - 4 )
		set jingmai[i]=( jingmai[i] - 3 )
		set fuyuan[i]=( fuyuan[i] - 3 )
		set wuxing[i]=( wuxing[i] - 3 )
		set yishu[i]=( yishu[i] - 3 )
		set gengu[i]=( gengu[i] - 3 )
		set danpo[i]=( danpo[i] - 3 )
		set udg_shanghaixishou[i]=( udg_shanghaixishou[i] - .3 )
		set special_attack[i]=special_attack[i] - 40
	endif
	set u=null
	set p=null
endfunction
//镇妖升级
function DoHaveZhenYao takes unit uc,unit l__ut returns boolean
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(uc)) )]
	if ( uc == null or GetUnitTypeId(l__ut) == 'n000' or GetUnitPointValue(l__ut) == 10 ) then
		return false
	else
		if UnitHaveItem(u , 'I02S') or UnitHaveItem(u , 'I02M') or UnitHaveItem(u , 'I02Q') or UnitHaveItem(u , 'I02R') then
			return true
		endif
	endif
	set u=null
	return false
endfunction
function Vz takes nothing returns boolean
	return DoHaveZhenYao(GetKillingUnit() , GetTriggerUnit())
endfunction
function ZhenYaoLevelUp takes unit u,integer id,integer id2,integer value returns nothing
 local integer i= 0
	call SetWidgetLife(FetchUnitItem(u , id), GetWidgetLife(FetchUnitItem(u , id)) - 1)
	if UnitHaveItem(u , id) then
		if ( 500000. - GetWidgetLife(FetchUnitItem(u , id)) < I2R(value) ) then
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "成长值：" + ( I2S(R2I(500000. - GetWidgetLife(FetchUnitItem(u , id)))) + " / " + I2S(value) ))
		else
			set i=GetItemUserData(FetchUnitItem(u , id))
			call RemoveItem(FetchUnitItem(u , id))
			call createitemloc(id2 , v7[9])
			call SetItemUserData(bj_lastCreatedItem, i)
			call UnitAddItem(u, bj_lastCreatedItem)
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFF33FF00恭喜养武等级获得提升")
		endif
	endif
endfunction
function Wz takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )]
	call ZhenYaoLevelUp(u , 'I02S' , 'I02M' , 200)
	call ZhenYaoLevelUp(u , 'I02M' , 'I02Q' , 500)
	call ZhenYaoLevelUp(u , 'I02Q' , 'I02R' , 800)
	call ZhenYaoLevelUp(u , 'I02R' , 'I02P' , 1200)
	set u=null
endfunction
//-------镶嵌宝石系统开始-------//
function IsXiangQian takes item it,unit u returns boolean
	if GetItemTypeId(it) == 'I05R' or GetItemTypeId(it) == 'I05Q' or GetItemTypeId(it) == 'I05M' or GetItemTypeId(it) == 'I05O' or GetItemTypeId(it) == 'I05P' or GetItemTypeId(it) == 'I05N' then
		if not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00你不是锻造师，不可以镶嵌宝石")
			call AdjustPlayerStateBJ(20000, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
			return false
	    else
	        return true
        endif
    endif
    return false
endfunction
function kA takes nothing returns boolean
	return IsXiangQian(GetManipulatedItem() , GetTriggerUnit())
endfunction
function XiangQian takes unit u,item it,item it2,integer id,integer i returns nothing
 local player p= GetOwningPlayer(u)
 local integer ii1= ModuloInteger(GetItemUserData(it) / 1000, 10)
 local integer ii2= ModuloInteger(GetItemUserData(it) / 100, 10)
 local integer ii3= ModuloInteger(GetItemUserData(it) / 10, 10)
 local integer k= 1 + GetPlayerId(p)
	if GetItemTypeId(it2) == id then
		if ( ii1 == 0 ) then
			call commonAddGold(p , 20000)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你的第一格物品无法镶嵌宝石")
		else
			call SetItemPositionLoc(it, v7[9])
			if ( ii2 == 0 ) then
				call SetItemUserData(it, GetItemUserData(it) + 100 * i - 1000)
			else
				if ( ii3 == 0 ) then
					call SetItemUserData(it, GetItemUserData(it) + 10 * i - 1000)
				else
					call SetItemUserData(it, GetItemUserData(it) + 1 * i - 1000)
				endif
			endif
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00镶嵌成功")
			if (YDWEBitwise_AND(deputy[(k )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and udg_dzds[k] < 4 then // INLINED!!
                set udg_dzds[k]=udg_dzds[k] + 1
                call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您锻造成功第" + I2S(udg_dzds[k]) + "件装备，锻造成功4件装备可以获得锻造大师哦")
            endif
            if (YDWEBitwise_AND(deputy[(k )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) and udg_dzds[k] >= 4 and not ( (YDWEBitwise_AND(master[(k )] , ((1 ) * YDWEBitwise__C2[( ( DUAN_ZAO) - 1)])) != 0) ) then // INLINED!!
                call Deputy_setMaster(k , DUAN_ZAO)
                call DZDSBuShuXing(udg_hero[k])
                call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得锻造大师")
            endif
			call UnitAddItem(u, it)
		endif
	endif
	set p=null
endfunction
function mA takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local item it= UnitItemInSlotBJ(u, 1)
	call XiangQian(u , it , GetManipulatedItem() , 'I05M' , 1)
	call XiangQian(u , it , GetManipulatedItem() , 'I05P' , 2)
	call XiangQian(u , it , GetManipulatedItem() , 'I05O' , 3)
	call XiangQian(u , it , GetManipulatedItem() , 'I05Q' , 4)
	call XiangQian(u , it , GetManipulatedItem() , 'I05R' , 5)
	call XiangQian(u , it , GetManipulatedItem() , 'I05N' , 6)
	set u=null
	set it=null
endfunction
//-------镶嵌宝石系统结束-------//
function Equipment_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
//鸟拿东西显示附加属性
	set zi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(zi, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(zi, Condition(function Zy))
	call TriggerAddAction(zi, function dz)
	//英雄拿东西显示附加属性
	set Ai=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ai, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Ai, Condition(function fz))
	call TriggerAddAction(Ai, function gz)
	//英雄放下东西显示失去附加属性
	set ai=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ai, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(ai, Condition(function iz))
	call TriggerAddAction(ai, function jz)
	//英雄穿上装备
	set Bi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Bi, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Bi, Condition(function mz))
	call TriggerAddAction(Bi, function nz)
	//英雄脱下装备
	set bi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(bi, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(bi, Condition(function pz))
	call TriggerAddAction(bi, function qz)
	//只能穿一件衣服或武器的判断
	set li=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(li, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(li, Condition(function Mz))
	call TriggerAddAction(li, function ItemChongFu)
	//集齐套装
	set Ji=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ji, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Ji, Condition(function Pz))
	call TriggerAddAction(Ji, function Qz)
	//失去套装
	set Ki=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ki, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(Ki, Condition(function Sz))
	call TriggerAddAction(Ki, function Tz)
	//镇妖升级
	set Li=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Li, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Li, Condition(function Vz))
	call TriggerAddAction(Li, function Wz)
	//镶嵌宝石系统
	set Pi=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Pi, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Pi, Condition(function kA))
	call TriggerAddAction(Pi, function mA)
	// 携带养吾剑破防
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function UnitHaveYangWuJian))
	call TriggerAddAction(t, function YangWuJianXiaoGuo)
	set t=null
endfunction
//杀野猪首领
function WI takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nqb3' ) )
endfunction
function XI takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) <= 20 ) ) then
			call createitemloc('I021' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( e8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
		call unitadditembyidswapped(1227896391 , GetKillingUnit())
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call unitadditembyidswapped(1227895347 , GetKillingUnit())
		else
			call unitadditembyidswapped(1227895346 , GetKillingUnit())
		endif
		// call AddHeroXP(GetKillingUnit(),$96,true)
		call AddHeroXP(u, 1500, true) // 奖励经验
call commonAddGold(p , 1500) // 奖励金钱
call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00完成任务获得经验+1500、金钱+1500、江湖声望+50、富可敌国令和" + GetItemName(bj_lastCreatedItem) ))
		call commonAddReputation(p , 50) // 奖励声望
set e8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	endif
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
	set u=null
	set p=null
endfunction
// 杀狼
function isKillWolf takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nwlt' ) )
endfunction
function killWolf takes nothing returns nothing
	// 张无忌杀猪刀I0CI,郭靖环戒I0CH，乔峰草鞋I0DO
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 10 , 'I0CI' , 'I0CH' , 'I0DO' , 0 , 0 , 0)
endfunction
//杀豺狼
function ZI takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ngns' ) )
endfunction
function dl takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 0 , 0 , 0 , 0 , 0 , 8 , YaoCao[1])
endfunction
//杀江南水怪
function fl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'hwat' ) )
endfunction
function gl takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 0 , 0 , 0 , 0 , 0 , 8 , YaoCao[2])
endfunction
//FB1
function il takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'oshm' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'nass' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'odoc' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'orai' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'otau' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'odkt' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'uaco' )
endfunction
function jl takes nothing returns nothing
	if ( GetUnitTypeId(GetTriggerUnit()) == 'oshm' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'nass' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 8 , 'I02J' , 'I02I' , 0 , 0 , 8 , YaoCao[3])
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 1 , 'I01W' , 0 , 0 , 0 , 0 , 0)
	elseif ( GetUnitTypeId(GetTriggerUnit()) == 'odoc' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I01U' , 'I01Z' , 0 , 0 , 0 , 0)
	elseif ( GetUnitTypeId(GetTriggerUnit()) == 'orai' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I01S' , 'I01Y' , 'I01X' , 0 , 0 , 0)
		//火功头陀
	elseif ( GetUnitTypeId(GetTriggerUnit()) == 'otau' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I02Z' , 'I03D' , 0 , 0 , 0 , 0)
		if GetRandomReal(1, 100) <= 3. or ( GetRandomReal(1, 100) <= 6. and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) ) then // INLINED!!
			call CreateItem('I0C5', GetUnitX(GetKillingUnit()), GetUnitY(GetKillingUnit()))
		endif
	elseif ( GetUnitTypeId(GetTriggerUnit()) == 'odkt' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I02U' , 'I03G' , 'I02W' , 0 , 0 , 0)
		//毒手药王
	elseif ( GetUnitTypeId(GetTriggerUnit()) == 'uaco' ) then
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I02L' , 'I02N' , 'I02K' , 0 , 0 , 0)
		if GetRandomReal(1, 100) <= 50. or (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			call CreateItem('I0CB', GetUnitX(GetKillingUnit()), GetUnitY(GetKillingUnit()))
		endif
	endif
endfunction
//FB2
function al takes nothing returns boolean
	return ( ( ( GetUnitTypeId(GetTriggerUnit()) == 'efon' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'nowb' ) ) )
endfunction
function Bl takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 8 , 'I01I' , 'I02E' , 'I02H' , 0 , 0 , 0)
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 2 , 'I01J' , 0 , 0 , 0 , 0 , 0) // 七绝爆率提高到2%
endfunction
//杀唐文亮
function cl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nbdw' ) )
endfunction
function KillTangWenLiang takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I01L' , 'I01M' , 'I01Q' , 'I01R' , 10 , 'I0EP')
endfunction
//杀关能
function Fl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ndrw' ) )
endfunction
function Gl takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 1227895118 , 1227895120 , 1227895119 , 0 , 0 , 0)
endfunction
//杀李莫愁
function Il takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1702258030 ) )
endfunction
function ll takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 1227895621 , 1227895626 , 0 , 0 , 0 , 0)
endfunction
//杀木灵子
function Kl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1700884333 ) )
endfunction
function Ll takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I03L' , 1227895382 , 0 , 0 , 0 , 0)
endfunction
//杀狄云
function Nl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852007777 ) )
endfunction
function Ol takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 1227895603 , 1227895627 , 0 , 0 , 0 , 0)
endfunction
//杀林朝英
function Ql takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ndqs' ) )
endfunction
function Rl takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
 local location loc2= null
 local integer i= 1
	loop
		exitwhen i >= 6
		call commonAddReputation(Player(i - 1) , 50)
		set i=i + 1
	endloop
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff00击杀林朝英，所有玩家获得江湖声望+50")
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , udg_jianghu[GetRandomInt(1, 18)] , 0 , 0 , 0 , 0 , 0)
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I0C4' , 'I0C5' , 'I0C8' , 'I0CJ' , 0 , 0)
	if (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I0C4' , 'I0C5' , 'I0C8' , 'I0CJ' , 0 , 0)
	endif
	if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
		call createitemloc(YaoCao[9] , loc)
	endif
	set i=0
	loop
		exitwhen i >= 5
		call commonAddLumber(Player(i) , 16 * ( 10 - GetNumPlayer() ) / 10)
		set i=i + 1
	endloop
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀林朝英，每位玩家奖励珍稀" + I2S(16 * ( 10 - GetNumPlayer() ) / 10) + "个")
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(gudong[GetRandomInt(4, 6)] , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(gudong[GetRandomInt(1, 6)] , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(gudong[GetRandomInt(1, 6)] , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(1227895897 , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(1227895897 , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(1227895897 , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(1227895897 , loc2)
	call RemoveLocation(loc2)
	set loc2=pu(loc , GetRandomReal(30., 200.) , GetRandomReal(0, 360.))
	call createitemloc(1227895897 , loc2)
	call RemoveLocation(loc2)
	call RemoveLocation(loc)
	set loc=null
	set loc2=null
endfunction
//杀古墓弟子
function Tl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ndqv' ) )
endfunction
function Ul takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 25 , 1227895897 , 0 , 0 , 0 , 15 , YaoCao[11])
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] / 4 , gudong[GetRandomInt(1, 6)] , 0 , 0 , 0 , 0 , 0)
endfunction
//FB3杀南海鳄神
function Wl takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nsqo' ) )
endfunction
function Xl takes nothing returns nothing
	call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 1227895095 , 1227895107 , 1227895097 , 0 , 0 , 0)
endfunction
//FB3杀叶二娘
function Zl takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'nhrr' )
endfunction
function dd1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 60) <= 20 ) ) then
			call createitemloc('I04E' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $77543A28, 0)
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		else
			if ( ( GetRandomInt(1, 50) <= 25 ) ) then
				call createitemloc(1227895096 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				call createitemloc(1227895106 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3杀段延庆
function f1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nubw' ) )
endfunction
function g1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 60) <= 30 ) ) then
			call createitemloc(1227895878 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $77543A28, 0)
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		else
			call createitemloc(1227895108 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3杀梅超风
function i1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1702061422 ) )
endfunction
function j1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 60) <= 20 ) ) then
			call createitemloc(1227895624 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if ( ( GetRandomInt(1, 50) <= 25 ) ) then
				call createitemloc('I03I' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				call createitemloc('I02X' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3杀云中鹤
function m1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nomg' ) )
endfunction
function nn1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc(1227895105 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc(1227895094 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		//擒龙控鹤
		if GetRandomReal(1, 100) <= 50. or (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			call createitemloc('I0CC' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3杀张无忌
function p1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1701672039 ) )
endfunction
function q1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc('I030' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc(1227895385 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3杀武三通
function t1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1970169187 ) )
endfunction
function u1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc('I03F' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc(1227895601 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//杀门派叛徒和武林恶徒
function ww1 takes nothing returns boolean
	return ( ( ( GetUnitTypeId(GetTriggerUnit()) == 'nfor' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'nnwr' ) ) )
endfunction
function z1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 500) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) ) then
			call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
		if ( ( GetUnitTypeId(GetTriggerUnit()) == 'nfor' ) ) then
			if ( ( Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < $A ) ) then
				set Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "门派叛徒：" + ( I2S(Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
			else
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "门派叛徒：" + ( I2S(Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
			endif
		else
			if ( ( Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < $A ) ) then
				set Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "武林恶徒：" + ( I2S(Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
			else
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "武林恶徒：" + ( I2S(Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//杀极恶领主
function a1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nfov' ) )
endfunction
function B1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	call createitemloc('I02S' , LoadLocationHandle(YDHT, id * cx, $1769D332))
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
	call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
	call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 6))
	call SaveInteger(YDHT, id * cx, - $77543A28, 0)
	call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
	call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
	call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
	call SaveInteger(YDHT, id * cx, $44078039, 0)
	call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
	call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call SaveLocationHandle(YDHT, id * cx, - $185C9FC2, pu(LoadLocationHandle(YDHT, id * cx, $1769D332) , GetRandomReal(30., 120.) , ( GetRandomReal(0, 360.) )))
	call createitemloc('texp' , LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call createitemloc(YaoCao[10] , LoadLocationHandle(YDHT, id * cx, $1769D332))
	if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
		call createitemloc(YaoCao[10] , LoadLocationHandle(YDHT, id * cx, $1769D332))
	endif
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $185C9FC2))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//边境掉落
function C1 takes nothing returns nothing
	if ( ( GetRandomInt(1, 4) == 1 ) ) then
		set Zd=1227896396
	else
		if ( ( GetRandomInt(1, 3) == 1 ) ) then
			set Zd=1227896397
		else
			if ( ( GetRandomInt(1, 2) == 1 ) ) then
				set Zd='I06K'
			else
				set Zd='I02S'
			endif
		endif
	endif
	call createitemloc(Zd , v7[$B])
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33边境刷新掉落：|cFF33FFFF" + GetItemName(bj_lastCreatedItem) ))
	call RemoveItem(bj_lastCreatedItem)
endfunction
//边境掉落
function D1 takes nothing returns boolean
	return ( ( RectContainsUnit(df, GetTriggerUnit()) ) )
endfunction
function E1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) <= 5 ) ) then
			call createitemloc(Zd , LoadLocationHandle(YDHT, id * cx, $1769D332))
			if ( ( Zd == 'I02S' ) ) then
				call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
				call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
				call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 6))
				call SaveInteger(YDHT, id * cx, - $77543A28, 0)
				call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
				call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
				call SaveInteger(YDHT, id * cx, $44078039, 0)
				call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
				call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//杀扫地神僧
function G1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nsrh' ) )
endfunction
function H1 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(GetKillingUnit())
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
	call commonAddReputation(p , 100)
	call DisplayTextToPlayer(p, 0, 0, "|cff00ff00击杀扫地神僧，获得江湖声望+100")
	if ( GetRandomInt(1, 1000) <= fuyuan[i] or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		call createitemloc(udg_juexue[GetRandomInt(1, 10)] , loc)
		call createitemloc(YaoCao[9] , loc)
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			// 无相劫指 须弥山掌 枯荣禅功
			call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I0C3' , 'I0C9' , 'I0CD' , 0 , 0 , 0)
		endif
		call BaoWuDiaoLuo(GetKillingUnit() , GetTriggerUnit() , 100 , 'I0C3' , 'I0C9' , 'I0CD' , 0 , 0 , 0)
		if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call createitemloc(YaoCao[9] , loc)
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
endfunction
//FB4杀南海神尼
function l1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nelb' ) )
endfunction
function J1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		call createitemloc('I09I' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		if ( ( GetRandomInt(1, 50) <= 30 ) ) then
			call createitemloc(YaoCao[6] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call createitemloc('I0EQ' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
    call createitemloc(YaoCao[6] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB4杀公孙止
function L1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nfpu' ) )
endfunction
function MM1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 60) <= 25 ) ) then
			call createitemloc(1227895089 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 6))
			call SaveInteger(YDHT, id * cx, - $77543A28, 0)
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		else
			if ( ( GetRandomInt(1, 50) <= 30 ) ) then
				call createitemloc(1227895091 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				call createitemloc(1227895371 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB4杀裘千仞
function O1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nmgr' ) )
endfunction
function P1 takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if GetRandomInt(0, 100) <= 5 then
			call createitemloc(1227895090 , loc)
			call SetItemUserData(bj_lastCreatedItem, ( GetRandomInt(1, 6) * $989680 ) + ( GetRandomInt(1, 5) * $F4240 ) + ( GetRandomInt(0, 2) * $3E8 ))
		else
			call createitemloc('I099' , loc)
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set loc=null
endfunction
//FB4杀裘千尺
function R1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nhfp' ) )
endfunction
function S1 takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if GetRandomInt(0, 100) <= 5 then
			call createitemloc(1227895372 , loc)
		else
			call createitemloc('I09A' , loc)
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set loc=null
endfunction
//FB4杀长须老鬼
function U1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nrzb' ) )
endfunction
function V1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) <= 25 ) ) then
			call createitemloc('I014' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if ( ( GetRandomInt(1, 75) <= 25 ) ) then
				call createitemloc(1227895093 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 50) <= 25 ) ) then
					call createitemloc('I00Z' , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					call createitemloc('I010' , LoadLocationHandle(YDHT, id * cx, $1769D332))
				endif
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5杀李秋水
function X1 takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852270642 ) )
endfunction
function Y1 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc('I00V' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00U' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
		call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
		call SaveInteger(YDHT, id * cx, $44078039, 0)
		call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
		call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5杀天山童姥
function dJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852207984 ) )
endfunction
function eJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		// 60%获得重生，40%获得神行鞋
		if ( ( GetRandomInt(0, 100) <= 60 ) ) then
			call createitemloc('I00W' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00T' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		// 20%爆玉扳指
		if ( GetRandomInt(0, 100) <= 20 ) then
			call createitemloc('I0DT' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
		call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
		call SaveInteger(YDHT, id * cx, $44078039, 0)
		call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
		call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5杀无崖子
function gJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852663652 ) )
endfunction
function hJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc('I00P' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00O' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		// 掉落珍珑棋局
		// if GetRandomReal(1, 100)<=3. or (GetRandomReal(1, 100)<=6. and Ce[1+GetPlayerId(GetOwningPlayer(GetKillingUnit()))]==8) then
		// 	call createitemloc('I0CA',LoadLocationHandle(YDHT,id*cx,$1769D332))
		// endif
		call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
		call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 7))
		call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
		call SaveInteger(YDHT, id * cx, $44078039, 0)
		call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
		call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5杀闪电蜥蜴
function jJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853058166 ) )
endfunction
function kJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		call createitemloc(1227895861 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5杀千山雪母或者年兽
function nJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nsbm' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'n00C' ) )
endfunction
function oJ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
	if ( GetRandomInt(1, 1000) <= fuyuan[i] or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		// call createitemloc(1227895860,loc)
		if GetUnitTypeId(u) == 'nsbm' then
			call createitemloc(1227895860 , loc)
		elseif GetUnitTypeId(u) == 'n00C' then
			call createitemloc(1227895860 , loc)
			// if GetRandomInt(1,2)==1 then
			// 	call createitemloc('I0A8',loc)
			// else
			// 	call createitemloc('I0A9',loc)
			// endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
endfunction
//杀黄裳
function qJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1752395892 ) )
endfunction
function rJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 200)
	call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnit()), 0, 0, "|cff00ff00击杀黄裳，获得江湖声望+200")
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 80) <= $A ) ) then
			call createitemloc(1227895635 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if ( ( GetRandomInt(1, 70) <= $A ) ) then
				call createitemloc('I03M' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 60) <= $A ) ) then
					call createitemloc(1227895637 , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, 50) <= $A ) ) then
						call createitemloc(1227895634 , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						if ( ( GetRandomInt(1, 40) <= $A ) ) then
							call createitemloc(1227895632 , LoadLocationHandle(YDHT, id * cx, $1769D332))
						else
							if ( ( GetRandomInt(1, 30) <= $A ) ) then
								call createitemloc(1227895633 , LoadLocationHandle(YDHT, id * cx, $1769D332))
							else
								if ( ( GetRandomInt(1, 20) <= $A ) ) then
									call createitemloc(1227895631 , LoadLocationHandle(YDHT, id * cx, $1769D332))
								else
									call createitemloc(1227895636 , LoadLocationHandle(YDHT, id * cx, $1769D332))
								endif
							endif
						endif
					endif
				endif
			endif
		endif
		call createitemloc(YaoCao[12] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call createitemloc(YaoCao[12] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB6杀令狐冲
function tJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1751672179 ) )
endfunction
function uJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc('I00I' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00N' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		call SaveInteger(YDHT, id * cx, - $5E9EB4B3, GetRandomInt(1, 4))
		call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 8))
		call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 8))
		call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
		call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
		call SaveInteger(YDHT, id * cx, $44078039, 0)
		call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
		call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB6杀风清扬
function wJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1851942252 ) )
endfunction
function xJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc(1227895874 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00G' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, GetRandomInt(1, 4))
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB6杀独孤求败
function zJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852142199 ) )
endfunction
function AJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call createitemloc(1227895873 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call createitemloc('I00C' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, GetRandomInt(1, 4))
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		endif
		call createitemloc(YaoCao[8] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		if (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call createitemloc(YaoCao[8] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB6杀东方不败
function BJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1969976430 ) )
endfunction
function bJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 125) <= 25 ) ) then
			call createitemloc('I00D' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if ( ( GetRandomInt(1, 100) <= 25 ) ) then
				call createitemloc('I00B' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 75) <= 25 ) ) then
					call createitemloc('I00F' , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, 50) <= 25 ) ) then
						call createitemloc('I00L' , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						call createitemloc(1227894856 , LoadLocationHandle(YDHT, id * cx, $1769D332))
					endif
				endif
			endif
		endif
		call SaveInteger(YDHT, id * cx, - $5E9EB4B3, GetRandomInt(1, 4))
		call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 8))
		call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
		call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 8))
		call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
		call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
		call SaveInteger(YDHT, id * cx, $44078039, 0)
		call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
		call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//杀矮人得决战魁、杀矮子王得江湖忠
function IsAiRen takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'hrif' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'Hmkg' ) )
endfunction
function KillAiRen takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	if GetUnitTypeId(u) == 'hrif' then
		if GetRandomReal(0, 30) <= 2 then
			call createitemloc('I08Y' , loc)
		endif
	else
		call createitemloc('I08V' , loc)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
endfunction
//杀牛妖得残章第一式
function cJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'njgb' ) )
endfunction
function DJ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local integer i= 0
	set i=GetRandomInt(1, 10)
	if GetRandomReal(0, 27) <= 3 then
		call createitemloc(udg_canzhang[i] , loc)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
endfunction
//杀渣小庸只掉落江湖套
function FJ takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852207203 ) )
endfunction
function GJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		//渣小庸只掉落江湖套
		if ( ( GetRandomInt(1, 75) <= 25 ) ) then
			call createitemloc('I08X' , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if GetRandomInt(1, 50) <= 30 then
				call createitemloc('I08Z' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				call createitemloc('I090' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3
//杀熊、桃花岛哑仆、灭火（救火）
function JK takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'nfrl' or GetUnitTypeId(GetTriggerUnit()) == 'nvil' or GetUnitTypeId(GetTriggerUnit()) == 'nlv3'
endfunction
function KK takes nothing returns nothing
 local unit u= GetKillingUnit()
 local unit uc= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(uc)
	if GetUnitTypeId(uc) == 'nfrl' then
		if GetRandomInt(1, 50) <= 3 then
			call createitemloc('I02C' , loc)
		endif
		if GetRandomInt(1, 50) <= 3 then
			call createitemloc('I02O' , loc)
		endif
		if ( ( rd[i] == 1 ) ) then
			set ud[i]=ud[i] + 1
			if ud[i] >= 30 then
				set rd[i]=2
				call unitadditembyidswapped(1227895372 , u)
				call PlaySoundOnUnitBJ(Hh, 100, u)
				call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得江湖声望+150和" + GetItemName(bj_lastCreatedItem) ))
				call commonAddReputation(p , 150)
			else
				call DisplayTextToPlayer(p, 0, 0, ( "熊：" + ( I2S(ud[i]) + " / 30" ) ))
			endif
		endif
	elseif GetUnitTypeId(uc) == 'nvil' then
		if LoadInteger(YDHT, StringHash("哑仆任务"), i) == 1 then
			call SaveInteger(YDHT, StringHash("哑仆"), i, LoadInteger(YDHT, StringHash("哑仆"), i) + 1)
			if LoadInteger(YDHT, StringHash("哑仆"), i) >= 10 then
				call SaveInteger(YDHT, StringHash("哑仆任务"), i, 0)
				call SaveInteger(YDHT, StringHash("哑仆"), i, 0)
				call unitadditembyidswapped('I09V' , u)
				call PlaySoundOnUnitBJ(Hh, 100, u)
				call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得" + GetItemName(bj_lastCreatedItem) ))
			else
				call DisplayTextToPlayer(p, 0, 0, ( "哑仆：" + I2S(LoadInteger(YDHT, StringHash("哑仆"), i)) + " / 10" ))
			endif
		endif
		// 寻宝摧心掌爆率翻倍
		if GetRandomInt(1, 100) <= 10 or ( (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= 20 ) then // INLINED!!
			call unitadditembyidswapped('I09K' , u)
		endif
		// 寻宝新手神器爆率翻倍
		if GetRandomInt(1, 100) <= 10 or ( (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= 20 ) then // INLINED!!
			call unitadditembyidswapped('I0DJ' , u)
		endif
	elseif GetUnitTypeId(uc) == 'nlv3' then
		if GetRandomInt(0, 100) <= 100 - GetNumPlayer() * 10 then
			call commonAddLumber(Player(0) , 2)
			call commonAddLumber(Player(1) , 2)
			call commonAddLumber(Player(2) , 2)
			call commonAddLumber(Player(3) , 2)
			call commonAddLumber(Player(4) , 2)
		endif
		if GetRandomReal(1, 100) <= 2.5 then
			call unitadditembyidswapped('I09I' , u)
		endif
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set p=null
	set loc=null
endfunction
//-------副本系统开始-------//
function IsFuBen takes item it returns boolean
	if GetItemTypeId(it) == 'I02F' or GetItemTypeId(it) == 'I03V' or GetItemTypeId(it) == 'I04C' or GetItemTypeId(it) == 'I04I' or GetItemTypeId(it) == 'I04V' or GetItemTypeId(it) == 'I05L' then
		return true
	endif
	return false
endfunction
function ShenMiGuaiWu takes unit u,location loc,integer FBNum,integer gw1,integer gw2,integer gw3 returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	if ( GetRandomInt(1, 100) <= 20 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) ) then // INLINED!!
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入神秘怪物：|cFF33FFFF无")
	else
		if ( ( GetRandomInt(1, 60) <= 20 ) ) then
			call CreateNUnitsAtLoc(1, gw1, Player(12), loc, bj_UNIT_FACING)
		elseif ( ( GetRandomInt(1, 40) <= 20 ) ) then
			call CreateNUnitsAtLoc(1, gw2, Player(12), loc, bj_UNIT_FACING)
		else
			call CreateNUnitsAtLoc(1, gw3, Player(12), loc, bj_UNIT_FACING)
		endif
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33载入神秘怪物：|cFF33FFFF" + GetUnitName(bj_lastCreatedUnit) ))
		set p8[FBNum]=bj_lastCreatedUnit
	endif
endfunction
function XiYouDiaoLuo takes unit u,integer FBNum,integer dl1,integer dl2,integer dl3,integer dl4 returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	if ( ( GetRandomInt(1, 100) <= 20 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) ) ) then // INLINED!!
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入稀有掉落：|cFF33FFFF无")
		set q8[FBNum]='crys'
	else
		if ( ( GetRandomInt(1, 60) <= 15 ) ) then
			set q8[FBNum]=dl1
		elseif ( ( GetRandomInt(1, 45) <= 15 ) ) then
			set q8[FBNum]=dl2
		elseif ( ( GetRandomInt(1, 30) <= 25 ) ) then
			set q8[FBNum]=dl3
		else
			set q8[FBNum]=dl4
		endif
		call createitemloc(q8[FBNum] , v7[$B])
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33载入稀有掉落：|cFF33FFFF" + GetItemName(bj_lastCreatedItem) ))
		call RemoveItem(bj_lastCreatedItem)
	endif
endfunction
function QiYuanNPC takes unit u,integer FBNum,integer id,integer id2,rect rt1,rect rt2,rect rt3,rect rt4,rect rt5,rect rt6 returns nothing
 local location loc3= null
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	if ( ( GetRandomInt(1, 100) <= 50 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) ) ) then // INLINED!!
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入奇缘NPC：|cFF33FFFF无")
	else
		if ( id != 'crys' ) then
			if ( ( GetRandomInt(1, 120) <= 20 ) ) then
				set loc3=GetRectCenter(rt1)
			elseif ( ( GetRandomInt(1, 100) <= 20 ) ) then
				set loc3=GetRectCenter(rt2)
			elseif ( ( GetRandomInt(1, 80) <= 20 ) ) then
				set loc3=GetRectCenter(rt3)
			elseif ( ( GetRandomInt(1, 60) <= 20 ) ) then
				set loc3=GetRectCenter(rt4)
			elseif ( ( GetRandomInt(1, 40) <= 20 ) ) then
				set loc3=GetRectCenter(rt5)
			else
				set loc3=GetRectCenter(rt6)
			endif
			if GetRandomInt(1, 2) == 1 then
				call CreateNUnitsAtLoc(1, id, Player(15), loc3, bj_UNIT_FACING)
			else
				call CreateNUnitsAtLoc(1, id2, Player(15), loc3, bj_UNIT_FACING)
			endif
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33载入奇缘NPC：|cFF33FFFF" + GetUnitName(bj_lastCreatedUnit) ))
			set r8[FBNum]=bj_lastCreatedUnit
			call RemoveLocation(loc3)
		endif
	endif
	set loc3=null
endfunction
function EnterFB takes unit u,integer goldnum,rect rt0,rect rt1,rect rt2,integer FBNum,string FBName returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
 local location loc2= null
 local integer array gws
 local integer array dls
 local integer array qys
 local rect array qylocs
	//神秘怪物
	set gws[1]='otau'
	set gws[2]='odkt'
	set gws[3]='uaco'
	set gws[4]=1702258030
	set gws[5]=1700884333
	set gws[6]=1852007777
	set gws[7]=1701672039 // 张无忌
set gws[8]=1702061422 // 梅超风
set gws[9]=1970169187 // 武三通
set gws[10]='nelb'
	set gws[11]='nhfp'
	set gws[12]='nmgr'
	set gws[13]=1853058166
	set gws[14]='nsbm' // 蜘蛛
set gws[15]='nsbm' // 年兽n00C，原来是nsbm
set gws[16]=1852142199
	set gws[17]=1851942252
	set gws[18]=1751672179
	//稀有掉落
	set dls[1]='I021'
	set dls[2]='I01L'
	set dls[3]='I01M'
	set dls[4]=1227895110
	set dls[5]=1227895109
	set dls[6]='I02S'
	set dls[7]=1227895111
	set dls[8]=1227895371
	set dls[9]='I02S'
	set dls[10]='I02S'
	set dls[11]=1227895380
	set dls[12]=1227895857
	set dls[13]=1227895859
	set dls[14]='I042'
	set dls[15]='I014'
	set dls[16]='I014'
	set dls[17]='I00Q'
	set dls[18]='I00S'
	set dls[19]='I00R'
	set dls[20]='I00R'
	set dls[21]='I00K'
	set dls[22]='I00M'
	set dls[23]='I00M'
	set dls[24]='I00J'
	set dls[25]='crys'
	set dls[26]='crys'
	set dls[27]='crys'
	set dls[28]='crys'
	//奇缘NPC
	set qys[1]=1865429068
	set qys[2]='o02T'
	set qys[3]=1865429071
	set qys[4]=1865429059
	set qys[5]=1865429073
	set qys[6]=1865429073
	set qys[7]=1865429076
	set qys[8]='o026'
	set qys[9]=1865429080
	set qys[10]=1865429080
	set qys[11]='crys'
	set qys[12]='crys'
	set qylocs[1]=gf
	set qylocs[2]=hf
	set qylocs[3]=jf
	set qylocs[4]=kf
	set qylocs[5]=mf
	set qylocs[6]=nf
	set qylocs[7]=Af
	set qylocs[8]=af
	set qylocs[9]=Bf
	set qylocs[10]=bf
	set qylocs[11]=Cf
	set qylocs[12]=cf
	set qylocs[13]=Zf
	set qylocs[14]=Zf
	set qylocs[15]=Zf
	set qylocs[16]=Zf
	set qylocs[17]=Zf
	set qylocs[18]=Zf
	set qylocs[19]=Fg
	set qylocs[20]=Fg
	set qylocs[21]=Fg
	set qylocs[22]=Fg
	set qylocs[23]=Fg
	set qylocs[24]=Fg
	set qylocs[25]=Pg
	set qylocs[26]=Pg
	set qylocs[27]=Pg
	set qylocs[28]=Pg
	set qylocs[29]=Pg
	set qylocs[30]=Pg
	set qylocs[31]=Pg
	set qylocs[32]=Pg
	set qylocs[33]=Pg
	set qylocs[34]=Pg
	set qylocs[35]=Pg
	set qylocs[36]=Pg
	if ( xiuxing[i] <= FBNum - 2 ) then
		call AdjustPlayerStateBJ(goldnum, p, PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00修行达到" + I2S(FBNum - 1) + "才可以进入,你的修行不足，请前往地图指示点修行去吧")
		set loc=GetRectCenter(rt0)
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	else
		if ( ( (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
			set loc=GetRectCenter(rt1)
			set loc2=GetRectCenter(rt2)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			if ( ( m8[FBNum] == false ) ) then
				call RemoveUnit(r8[FBNum])
				set q8[FBNum]='crys'
				call RemoveUnit(p8[FBNum])
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC00开始载入动态副本：|r |cFF99FFCC" + FBName + "|r")
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFcc99ff――――――――――")
				call ShenMiGuaiWu(u , loc2 , FBNum , gws[FBNum * 3 - 2] , gws[FBNum * 3 - 1] , gws[FBNum * 3])
				call XiYouDiaoLuo(u , FBNum , dls[FBNum * 4 - 3] , dls[FBNum * 4 - 2] , dls[FBNum * 4 - 1] , dls[FBNum * 4])
				call QiYuanNPC(u , FBNum , qys[FBNum * 2 - 1] , qys[FBNum * 2] , qylocs[FBNum * 6 - 5] , qylocs[FBNum * 6 - 4] , qylocs[FBNum * 6 - 3] , qylocs[FBNum * 6 - 2] , qylocs[FBNum * 6 - 1] , qylocs[FBNum * 6])
				call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33小怪武功：|cFF33FFFF暂未制作此玩法")
				call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33BOSS武功：|cFF33FFFF暂未制作此玩法")
				call StartTimerBJ(Hd[FBNum], false, 75.)
				call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF0033副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[FBNum]))) + "秒" ) ))
				set m8[FBNum]=true
				call YDWEPolledWaitNull(75.)
				set m8[FBNum]=false
			else
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC00进入动态副本：|r |cFF99FFCC" + FBName + "|r")
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFcc99ff――――――――――")
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33神秘怪物：|cFF33FFFF" + GetUnitName(p8[FBNum]) ))
				call createitemloc(q8[FBNum] , v7[$B])
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33稀有掉落：|cFF33FFFF" + GetItemName(bj_lastCreatedItem) ))
				call RemoveItem(bj_lastCreatedItem)
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, ( "|cFFFFCC33载入奇缘NPC：|cFF33FFFF" + GetUnitName(r8[FBNum]) ))
				call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33小怪武功：|cFF33FFFF暂未制作此玩法")
				call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33BOSS武功：|cFF33FFFF暂未制作此玩法")
				call DisplayTimedTextToPlayer(p, 0, 0, 30, ( "|cFFFF0033副本重置倒计时：|cFF33FFFF" + ( I2S(R2I(TimerGetRemaining(Hd[FBNum]))) + "秒" ) ))
			endif
			call RemoveLocation(loc)
			call RemoveLocation(loc2)
		else
			call AdjustPlayerStateBJ(100, p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00只能由主角亲自购买前往")
		endif
	endif
	set p=null
	set u=null
	set loc=null
	set loc2=null
endfunction
//进入FB
function IL takes nothing returns boolean
	return IsFuBen(GetManipulatedItem())
endfunction
function lL takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local item it= GetManipulatedItem()
	if GetItemTypeId(it) == 'I02F' then
		call EnterFB(u , 100 , Te , Ze , ef , 1 , "马贼洞")
	elseif GetItemTypeId(it) == 'I03V' then
		call EnterFB(u , 300 , Te , yf , zf , 2 , "崆峒山")
	elseif GetItemTypeId(it) == 'I04C' then
		call EnterFB(u , 1000 , ag , Xf , Yf , 3 , "塞北")
	elseif GetItemTypeId(it) == 'I04I' then
		call EnterFB(u , 3000 , Bg , Eg , Dg , 4 , "绝情谷")
	elseif GetItemTypeId(it) == 'I04V' then
		call EnterFB(u , 6000 , Lg , Ng , Og , 5 , "逍遥宫")
	elseif GetItemTypeId(it) == 'I05L' then
		call EnterFB(u , 10000 , Rg , Wg , Xg , 6 , "黑木崖")
	endif
	set u=null
	set it=null
endfunction
function KL takes nothing returns boolean
	return ( ( RectContainsUnit(of, GetTriggerUnit()) ) )
endfunction
function LL takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
	if ( ( GetRandomInt(1, 1000) <= fuyuan[i] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) >= 98 ) and ( q8[1] != 'crys' ) ) then
			call createitemloc(q8[1] , loc)
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(loc)
	set p=null
	set u=null
	set loc=null
endfunction
//-------副本系统结束-------//
//-------各种副本开始-------//
//韦小宝赌博
function NL takes nothing returns boolean
	// FIXME leak
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1865429068 ) and ( DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()), GetUnitLoc(udg_hero[( 1 + GetPlayerId(GetTriggerPlayer()) )])) <= 250. ) )
endfunction
function OL takes nothing returns nothing
	set s8=GetTriggerPlayer()
	set t8=true
	call RemoveUnit(GetTriggerUnit())
	call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, "|cFFFFCC33韦小宝想邀请你同他赌一局，你是否愿意呢？|cFF33FFFF15秒钟内操作键盘选择  \n↑：同意并将身上的钱全部下注\n←：同意并将身上50%的钱下注\n→：同意并将身上25%的钱下注\n↓：拒绝")
	call YDWEPolledWaitNull(15.)
	set t8=false
endfunction
function QL takes nothing returns boolean
	return ( ( GetTriggerPlayer() == s8 ) and ( t8 ) )
endfunction
function RL takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetRandomInt(1, 10) <= 5 ) ) then
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(s8, PLAYER_STATE_RESOURCE_GOLD) * 2 ))
		call DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	else
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, 0)
		call DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			// FIXME leak
			call createitemloc('I0C2' , GetUnitLoc(udg_hero[i]))
		endif
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	endif
	set s8=Player(15)
	set p=null
endfunction
function TL takes nothing returns boolean
	return ( ( GetTriggerPlayer() == s8 ) and ( t8 ) )
endfunction
function UL takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetRandomInt(1, $A) <= 7 ) ) then
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 5 / 4 ))
		call DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	else
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 3 / 4 ))
		call DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			// FIXME leak
			call createitemloc('I0C2' , GetUnitLoc(udg_hero[i]))
		endif
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	endif
	set s8=Player(15)
	set p=null
endfunction
function WL takes nothing returns boolean
	return ( ( GetTriggerPlayer() == s8 ) and ( t8 ) )
endfunction
function XL takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetRandomInt(1, $A) <= 6 ) ) then
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 3 / 2 ))
		call DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	else
		call SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) / 2 ))
		call DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) then // INLINED!!
			// FIXME leak
			call createitemloc('I0C2' , GetUnitLoc(udg_hero[i]))
		endif
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	endif
	set s8=Player(15)
	set p=null
endfunction
function ZL takes nothing returns boolean
	return ( ( GetTriggerPlayer() == s8 ) and ( t8 ) )
endfunction
function dM takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家放弃和韦小宝赌博")
	set s8=Player(15)
endfunction
//FB2稀有掉落
function iM takes nothing returns boolean
	return ( ( RectContainsUnit(xf, GetTriggerUnit()) ) )
endfunction
function jM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) >= 98 ) and ( q8[2] != 'crys' ) ) then
			call createitemloc(q8[2] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			if ( ( q8[2] == 'I02S' ) ) then
				call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
				call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
				call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 6))
				call SaveInteger(YDHT, id * cx, - $77543A28, 0)
				call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
				call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
				call SaveInteger(YDHT, id * cx, $44078039, 0)
				call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
				call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB2奇缘NPC
function mM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895639 ) ) // INLINED!!
endfunction
function nM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call RemoveUnit(r8[2])
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, GetUnitLoc(GetTriggerUnit()))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A033')
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00C4)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function pM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895640 ) ) // INLINED!!
endfunction
function qM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call RemoveUnit(r8[2])
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, GetUnitLoc(GetTriggerUnit()))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093678673)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, GetTriggerUnit())
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//进入古墓
function sM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function tM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( shengwang[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= 800 ) and ( fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= 15 ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Gf))
		call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	else
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入古墓条件：\n福缘15，江湖声望800")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function vM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function wM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(If))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function yM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function zM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function aM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function BM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Jf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function CM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function cM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Sf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function EM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function FM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Pf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function HM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function IM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Wf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function JM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function KM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Uf))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB3稀有掉落
function PM takes nothing returns boolean
	return ( ( RectContainsUnit(Nf, GetTriggerUnit()) ) )
endfunction
function QM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) <= 5 ) and ( q8[3] != 'crys' ) ) then
			call createitemloc(q8[3] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			if ( ( q8[3] == 'I02S' ) ) then
				call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
				call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
				call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 6))
				call SaveInteger(YDHT, id * cx, - $77543A28, 0)
				call SaveInteger(YDHT, id * cx, - $2D2EBEF5, 0)
				call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
				call SaveInteger(YDHT, id * cx, $44078039, 0)
				call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
				call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
			endif
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//高昌迷宫
function SM takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895876 ) )
endfunction
function TM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		if ( ( shengwang[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= $7D0 ) and ( fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= 18 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(zg))
			call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入高昌迷宫条件：\n福缘18，江湖声望2000")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function VM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function WM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(dg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function YM takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function ZM takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(fg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function eN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function fN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(hg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function hN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function iN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(kg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function kN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function mN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(mg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function oN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function pN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(og))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function rN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function sN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(rg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function uN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function vN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(tg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function xN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function yN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(vg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function AN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function aN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(tg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function bN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function CN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(vg))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function DN takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function EN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(og))
	call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//藏经阁
function GN takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895880 ) )
endfunction
function HN takes nothing returns boolean
	return ( ( GetUnitTypeId(GetFilterUnit()) == 'nsrh' ) )
endfunction
function IN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) == false ) ) then // INLINED!!
		call AdjustPlayerStateBJ($4E20, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	else
		if ( ( CountUnitsInGroup(wv(cg , Condition(function HN))) == 0 ) ) then
			call AdjustPlayerStateBJ($4E20, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00扫地神僧目前不在藏经阁，你稍作等待再来吧")
		else
			if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 3 ) ) then
				call AdjustPlayerStateBJ($4E20, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
				call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你尚未完成历练3之勇闯十恶不赦岛任务")
			else
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Cg))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFADFF2F进入藏经阁")
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB4稀有掉落
function MN takes nothing returns boolean
	return ( ( RectContainsUnit(Gg, GetTriggerUnit()) ) )
endfunction
function NN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) >= 98 ) and ( q8[4] != 'crys' ) ) then
			call createitemloc(q8[4] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//绝情谷底买丹
function PN takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895885 ) )
endfunction
function QN takes nothing returns nothing
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		call unitadditembyidswapped(1227895371 , GetTriggerUnit())
	else
		call AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10., "|CFFFF0000该道具只能由主角亲自购买")
	endif
endfunction
function SN takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895884 ) )
endfunction
function TN takes nothing returns nothing
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		call unitadditembyidswapped(1227895372 , GetTriggerUnit())
	else
		call AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10., "|CFFFF0000该道具只能由主角亲自购买")
	endif
endfunction
function VN takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895883 ) )
endfunction
function WN takes nothing returns nothing
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		call unitadditembyidswapped('I02N' , GetTriggerUnit())
	else
		call AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10., "|CFFFF0000该道具只能由主角亲自购买")
	endif
endfunction
//绝情谷底异种
function YN takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nmpg' ) )
endfunction
function ZN takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetKillingUnit()))
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set u9=( u9 + 1 )
	if ( ( u9 >= 7 ) ) then
		set u9=0
		if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
			set MM7=2
		else
			set MM7=1
		endif
		set N7=1
		loop
			exitwhen N7 > MM7
			if ( ( GetRandomInt(1, 100) <= 25 ) ) then
				call createitemloc('I04Q' , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 60) <= 20 ) ) then
					call createitemloc('I04O' , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, 50) <= 25 ) ) then
						call createitemloc('I04N' , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						call createitemloc('I04P' , LoadLocationHandle(YDHT, id * cx, $1769D332))
					endif
				endif
			endif
			set N7=N7 + 1
		endloop
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "下次出现灵丹：" + ( I2S(u9) + " / 7" ) ))
	endif
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//进入绝情谷底
function eO takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895882 ) )
endfunction
function fO takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		if ( ( shengwang[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= $BB8 ) and ( danpo[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] >= 20 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ig))
			call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入绝情谷底条件：\n胆魄20，江湖声望3000")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB5稀有掉落
function kO takes nothing returns boolean
	return ( ( RectContainsUnit(Mg, GetTriggerUnit()) ) )
endfunction
function mO takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) >= 98 ) and ( q8[5] != 'crys' ) ) then
			call createitemloc(q8[5] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 7))
			call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 7))
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//探索琅环玉洞
function oO takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227895895 ) )
endfunction
function pO takes nothing returns nothing
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		if ( ( GetRandomInt(1, 60) <= 35 ) ) then
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10., "|CFFFF0000经过一番探索，竟然什么都没有得到，看来你的诚意还不够哦~")
		else
			if ( ( GetRandomInt(1, 40) <= $A ) ) then
				call unitadditembyidswapped(1227895865 , GetTriggerUnit())
			else
				if ( ( GetRandomInt(1, 30) <= $A ) ) then
					call unitadditembyidswapped(1227895864 , GetTriggerUnit())
				else
					if ( ( GetRandomInt(1, 20) <= $A ) ) then
						call unitadditembyidswapped(1227895863 , GetTriggerUnit())
					else
						call unitadditembyidswapped(1227895862 , GetTriggerUnit())
					endif
				endif
			endif
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + ( "在探索琅环玉洞时，无意中竟然得到了" + GetItemName(bj_lastCreatedItem) ) ))
		endif
	else
		call AdjustPlayerStateBJ($7530, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10., "|CFFFF0000只能有主角亲自探索")
	endif
endfunction
//梦回前朝
function rO takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896133 ) )
endfunction
function sO takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) == false ) ) then // INLINED!!
		call AdjustPlayerStateBJ($9C40, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	else
		if ( ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 5 ) or ( shengwang[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 5500 ) ) ) then
			call AdjustPlayerStateBJ($9C40, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00条件不足")
		else
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Vg))
			call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFADFF2F回到了前朝")
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//FB6稀有掉落
function xO takes nothing returns boolean
	return ( ( RectContainsUnit(Yg, GetTriggerUnit()) ) )
endfunction
function yO takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetRandomInt(1, 1000) <= fuyuan[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) or ( GetRandomInt(1, 100) <= 30 and (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
		set MM7=2
	else
		set MM7=1
	endif
	set N7=1
	loop
		exitwhen N7 > MM7
		if ( ( GetRandomInt(1, 100) >= 98 ) and ( q8[6] != 'crys' ) ) then
			call createitemloc(q8[6] , LoadLocationHandle(YDHT, id * cx, $1769D332))
			call SaveInteger(YDHT, id * cx, - $5E9EB4B3, GetRandomInt(1, 4))
			call SaveInteger(YDHT, id * cx, $648579A8, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $180E5D51, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, - $77543A28, GetRandomInt(1, 5))
			call SaveInteger(YDHT, id * cx, - $2D2EBEF5, GetRandomInt(1, 8))
			call SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			call SaveInteger(YDHT, id * cx, - $4E51D54A, 0)
			call SaveInteger(YDHT, id * cx, $44078039, 0)
			call SaveInteger(YDHT, id * cx, - $6F9D2AE1, 0)
			call SetItemUserData(bj_lastCreatedItem, ( ( ( ( ( ( ( ( ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) * $5F5E100 ) + ( LoadInteger(YDHT, id * cx, $648579A8) * $989680 ) ) + ( LoadInteger(YDHT, id * cx, - $180E5D51) * $F4240 ) ) + ( LoadInteger(YDHT, id * cx, - $77543A28) * $186A0 ) ) + ( LoadInteger(YDHT, id * cx, - $2D2EBEF5) * $2710 ) ) + ( LoadInteger(YDHT, id * cx, 1732931645) * $3E8 ) ) + ( LoadInteger(YDHT, id * cx, - $4E51D54A) * 100 ) ) + ( LoadInteger(YDHT, id * cx, $44078039) * $A ) ) + LoadInteger(YDHT, id * cx, - $6F9D2AE1) ))
		endif
		set N7=N7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//大辽国
function AO takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function aO takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	call SetUnitPosition(udg_hero[i], - 13000, - 15500)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), - 13000, - 15500, 0)
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00ff33传送至大辽国")
endfunction
//聚贤山庄
function bO takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function CO takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	call SetUnitPosition(udg_hero[i], - 9000, - 14000)
	call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), - 9000, - 14000, 0)
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00ff33传送至聚贤庄")
	//call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000聚贤山庄（当前版本暂未开放此地图）")
endfunction
//大清藏宝洞
function DO takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function EO takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	//call SetUnitPosition(udg_hero[i],2091,-13158)
	//call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()),2091,-13158,0)
	//call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000你已进入到大清藏宝洞，看看有什么发现吧")
	call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000大清藏宝洞（当前版本暂未开放此地图）")
endfunction
//琉球岛
function GO takes nothing returns boolean
	return ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) // INLINED!!
endfunction
function HO takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if xiuxing[i] <= 5 then
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00修行达到6才可以进入,你的修行不足，请前往地图指示点修行去吧")
	else
		call SetUnitPosition(udg_hero[i], 10943, 6760)
		call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 10943, 6760, 0)
		call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000你已深入到海外琉球岛，看看有什么发现吧")
		//call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000琉球岛（当前版本暂未开放此地图）")
	endif
endfunction
//一品居
function lO takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 1227897137 ) )
endfunction
function JO takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( xiuxing[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] <= 5 ) ) then
		call AdjustPlayerStateBJ($C350, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00修行达到6才可以进入,你的修行不足，请前往地图指示点修行去吧")
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Zg))
		call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	else
		if ( ( UnitHaveItem(GetTriggerUnit() , 1227897138) == false ) ) then
			call AdjustPlayerStateBJ($C350, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00需要一品居请帖才可以进入")
		else
			if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(vh))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 1227897138))
			else
				call AdjustPlayerStateBJ($C350, Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), PLAYER_STATE_RESOURCE_GOLD)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00只能由主角亲自购买前往")
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//------------------九阳真经系统----------------------------
//特殊事件：九阳真经系统
//事件1：开局5分钟少林藏经阁出现尹克西和潇湘子（夜间隐身）   击杀尹克西和潇湘子: 两本奇武——潇湘子的《寿木长生功》或尹克西的《黄沙万里鞭法》 全击杀事件结束
//事件2：事件1后10~25分钟内的随机时间，若尹克西和潇湘子未全死，九阳真经被二人偷走，觉远大师和张君宝去追  击杀觉远大师和张君宝：几率获得奇武《九阳真经散篇》 不击杀事件结束，少林高价卖《九阳真经残卷》
//事件3：事件2后10~25分钟内的随机时间，如果觉远大师和张君宝都被击杀，则尹克西和潇湘子逃走并将经书藏入白猿腹中，二人斗殴而死   击杀白猿——得到伴侣白猿 事件结束
//事件4：事件3后10~30分钟内的随机时， 若白猿存活，发生曾阿牛剖腹取书事件，白猿死亡，FB BOSS 替换为曾阿牛——此后可以重复刷新，击杀后获得《九阳真经残卷》
//尹克西和潇湘子在藏经阁偷取九阳神功
//尹克西坐标：6100,-1900
//潇湘子坐标：6100,-2500
//偷书成功
function stealSuccess takes nothing returns nothing
 local unit ykx= LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 0)
 local unit xxz= LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 1)
	if ( IsUnitAliveBJ(ykx) or IsUnitAliveBJ(xxz) ) then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：潇湘子和尹克西将九阳真经从少林寺藏经阁中窃出，震惊武林！！少林寺已派出觉远和张君宝缉拿潇湘子和尹克西！")
		call ExecuteFunc("seekStealers")
	else
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：由于潇湘子和尹克西被江湖英雄击杀，九阳真经未从少林寺藏经阁中窃出！")
	endif
	call RemoveUnit(ykx)
	call RemoveUnit(xxz)
	call DestroyQuest(defeatStealer)
	call PauseTimer(jiuyangTimer1)
	call DestroyTimer(jiuyangTimer1)
	set ykx=null
	set xxz=null
endfunction
function stealJiuYang takes nothing returns nothing
 local unit ykx= null
 local unit xxz= null
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：小道消息称潇湘子和尹克西潜入少林寺藏经阁窃取九阳神功秘籍，目前还无法证实消息的真实性")
	set defeatStealer=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "击杀潇湘子和尹克西", "传闻潇湘子和尹克西正在少林寺藏经阁窃取九阳真经，目前尚不知真实性如何。少侠们可以前往藏经阁一探究竟。（提示：不一定要击杀潇湘子和尹克西）", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	//尹克西
	call CreateNUnitsAtLoc(1, 'nrog', Player(12), Location(6100, - 1900), bj_UNIT_FACING)
	set ykx=bj_lastCreatedUnit
	//潇湘子
	call CreateNUnitsAtLoc(1, 'nban', Player(12), Location(6100, - 2500), bj_UNIT_FACING)
	set xxz=bj_lastCreatedUnit
	set jiuyangTimer1=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 0, ykx)
	call SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 1, xxz)
	call TimerStart(jiuyangTimer1, GetRandomInt(600, 1500), false, function stealSuccess)
	set ykx=null
	set xxz=null
endfunction
//击杀尹克西和潇湘子后几率获得奇武：潇湘子的《寿木长生功》或尹克西的《黄沙万里鞭法》，江湖声望+1000
function isKillStealer takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'nrog' or GetUnitTypeId(GetTriggerUnit()) == 'nban'
endfunction
function killStealer takes nothing returns nothing
	call dropItem(GetKillingUnit() , 'I0CT' , 'I0CU' , 50)
endfunction
//随后张无忌将经书从白猿腹中取出，白猿死亡，副本7BOSS变为张无忌，击杀后得到《九阳真经残卷》
function baiYuanDeath takes nothing returns nothing
	if ( IsUnitAliveBJ(gg_unit_n00M_0131) ) then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：传闻有一名叫曾阿牛的武林新秀从百年古猿腹中得到了《九阳神功残卷》！")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：百年古猿死去，曾阿牛出现在地图上！")
		call RemoveUnit(gg_unit_n00M_0131)
		call ShowUnit(gg_unit_n00N_0132, true)
	endif
	call PauseTimer(jiuyangTimer3)
	call DestroyTimer(jiuyangTimer3)
endfunction
//不击杀尹克西和潇湘子的话二人将经书偷走，觉远大师和张君宝去追经书，若不打败觉远大师和张君宝，经书将被二人追回，经书重回少林寺藏经阁中
function seekSuccess takes nothing returns nothing
 local unit jyds= LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 0)
 local unit zjb= LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 1)
	// local integer i = GetRandomInt(1200, 3000)
 local integer i= GetRandomInt(600, 1800)
	if ( IsUnitAliveBJ(jyds) or IsUnitAliveBJ(zjb) ) then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：觉远和张君宝已成功缉拿潇湘子和尹克西并夺回九阳真经，九阳真经现已归还藏经阁！")
		// 少林寺出现觉远卖九阳真经残卷，300木头，九阳散篇100木头
		call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'o02V', 2844, - 1500, 300)
	else
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：觉远和张君宝被不知名江湖人士打败，潇湘子和尹克西逃跑！")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：潇湘子和尹克西互殴而死，九阳真经不知所终！传闻潇湘子和尹克西将窃走的九阳真经藏入白猿腹中！")
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：白猿在地图上出现！！！")
		call ShowUnit(gg_unit_n00M_0131, true)
		set jiuyangTimer3=CreateTimer()
		call TimerStart(jiuyangTimer3, i, false, function baiYuanDeath)
	endif
	call PauseTimer(jiuyangTimer2)
	call DestroyTimer(jiuyangTimer2)
	call RemoveUnit(jyds)
	call RemoveUnit(zjb)
	call DestroyQuest(defeatSeeker)
	set jyds=null
	set zjb=null
endfunction
//觉远大师坐标：-1000 -14300
//张君宝坐标：-1000 -13300
//尹克西坐标：-2000 -14300 中立无敌NPC
//潇湘子坐标：-2000 -13300 中立无敌NPC
function seekStealers takes nothing returns nothing
 local unit ykx= null
 local unit xxz= null
 local unit jyds= null
 local unit zjb= null
 local integer i= GetRandomInt(600, 1500)
	call CreateNUnitsAtLoc(1, 'nrog', Player(12), Location(- 2000, - 14300), bj_UNIT_FACING)
	set ykx=bj_lastCreatedUnit
	call CreateNUnitsAtLoc(1, 'nban', Player(12), Location(- 2000, - 13300), bj_UNIT_FACING)
	set xxz=bj_lastCreatedUnit
	call CreateNUnitsAtLoc(1, 'n00K', Player(12), Location(- 1000, - 14300), bj_UNIT_FACING)
	set jyds=bj_lastCreatedUnit
	call CreateNUnitsAtLoc(1, 'n00L', Player(12), Location(- 1000, - 13300), bj_UNIT_FACING)
	set zjb=bj_lastCreatedUnit
	call UnitAddAbility(ykx, 'Avul')
	call UnitAddAbility(xxz, 'Avul')
	set defeatSeeker=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "打败觉远大师和张君宝", "传闻潇湘子和尹克西已将九阳真经从少林寺藏经阁窃出，觉远大师和张君宝正在追赶。少侠们对九阳真经感兴趣吗？（提示：可以打败觉远大师和张君宝帮助潇湘子和尹克西逃跑，否则九阳真经将被追回藏经阁）", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	set jiuyangTimer2=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 0, jyds)
	call SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 1, zjb)
	call TimerStart(jiuyangTimer2, GetRandomInt(600, 1500), false, function seekSuccess)
	set ykx=null
	set xxz=null
	set jyds=null
	set zjb=null
endfunction
//若打败觉远大师和张君宝，可几率获得奇武《九阳真经散篇》，江湖声望-1000
function isKillSeeker takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'n00K' or GetUnitTypeId(GetTriggerUnit()) == 'n00L'
endfunction
function killSeeker takes nothing returns nothing
	//击杀者声望-500
	set shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=IMaxBJ(0, shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] - 500)
	call dropItem(GetKillingUnit() , 'I0CV' , 0 , 50)
endfunction
//并且在地图上出现副本7——白猿，击杀后得到伴侣——白猿
function isKillBaiYuan takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'n00M'
endfunction
function killBaiYuan takes nothing returns nothing
	call dropItem(GetKillingUnit() , 'I0CS' , 0 , 100)
endfunction
//击杀曾阿牛后得到九阳残卷
function isKillANiu takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'n00N'
endfunction
function killANiu takes nothing returns nothing
	call dropItem(GetKillingUnit() , 'I0CW' , 'I09Q' , 50)
endfunction
//------------------九阳真经系统结束----------------------------
//-------各种副本结束-------//
function Instances_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	set Kn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Kn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Kn, Condition(function WI))
	call TriggerAddAction(Kn, function XI)
	set Ln=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ln, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ln, Condition(function ZI))
	call TriggerAddAction(Ln, function dl)
	// 杀野狼
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isKillWolf))
	call TriggerAddAction(t, function killWolf)
	set Mn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Mn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Mn, Condition(function fl))
	call TriggerAddAction(Mn, function gl)
	set Nn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Nn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Nn, Condition(function il))
	call TriggerAddAction(Nn, function jl)
	set Tn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Tn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Tn, Condition(function al))
	call TriggerAddAction(Tn, function Bl)
	set Un=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Un, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Un, Condition(function cl))
	call TriggerAddAction(Un, function KillTangWenLiang)
	set Vn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Vn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Vn, Condition(function Fl))
	call TriggerAddAction(Vn, function Gl)
	set Wn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Wn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Wn, Condition(function Il))
	call TriggerAddAction(Wn, function ll)
	set Xn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Xn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Xn, Condition(function Kl))
	call TriggerAddAction(Xn, function Ll)
	set Yn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Yn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Yn, Condition(function Nl))
	call TriggerAddAction(Yn, function Ol)
	set Zn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Zn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Zn, Condition(function Ql))
	call TriggerAddAction(Zn, function Rl)
	set do=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(do, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(do, Condition(function Tl))
	call TriggerAddAction(do, function Ul)
	set eo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(eo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(eo, Condition(function Wl))
	call TriggerAddAction(eo, function Xl)
	set fo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(fo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(fo, Condition(function Zl))
	call TriggerAddAction(fo, function dd1)
	set go=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(go, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(go, Condition(function f1))
	call TriggerAddAction(go, function g1)
	set ho=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ho, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ho, Condition(function i1))
	call TriggerAddAction(ho, function j1)
	set io=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(io, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(io, Condition(function m1))
	call TriggerAddAction(io, function nn1)
	set jo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(jo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(jo, Condition(function p1))
	call TriggerAddAction(jo, function q1)
	set ko=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ko, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ko, Condition(function t1))
	call TriggerAddAction(ko, function u1)
	set mo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(mo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(mo, Condition(function ww1))
	call TriggerAddAction(mo, function z1)
	set no=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(no, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(no, Condition(function a1))
	call TriggerAddAction(no, function B1)
	set oo=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(oo, 500.)
	call TriggerAddAction(oo, function C1)
	set po=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(po, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(po, Condition(function D1))
	call TriggerAddAction(po, function E1)
	set qo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(qo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(qo, Condition(function G1))
	call TriggerAddAction(qo, function H1)
	set ro=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ro, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ro, Condition(function l1))
	call TriggerAddAction(ro, function J1)
	set so=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(so, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(so, Condition(function L1))
	call TriggerAddAction(so, function MM1)
	set to=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(to, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(to, Condition(function O1))
	call TriggerAddAction(to, function P1)
	set uo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(uo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(uo, Condition(function R1))
	call TriggerAddAction(uo, function S1)
	set vo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(vo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(vo, Condition(function U1))
	call TriggerAddAction(vo, function V1)
	set wo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(wo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(wo, Condition(function X1))
	call TriggerAddAction(wo, function Y1)
	set xo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(xo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(xo, Condition(function dJ))
	call TriggerAddAction(xo, function eJ)
	set yo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(yo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(yo, Condition(function gJ))
	call TriggerAddAction(yo, function hJ)
	set zo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(zo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(zo, Condition(function jJ))
	call TriggerAddAction(zo, function kJ)
	set Ao=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ao, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ao, Condition(function nJ))
	call TriggerAddAction(Ao, function oJ)
	set ao=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ao, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ao, Condition(function qJ))
	call TriggerAddAction(ao, function rJ)
	set Bo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Bo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Bo, Condition(function tJ))
	call TriggerAddAction(Bo, function uJ)
	set bo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(bo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(bo, Condition(function wJ))
	call TriggerAddAction(bo, function xJ)
	set Co=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Co, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Co, Condition(function zJ))
	call TriggerAddAction(Co, function AJ)
	set co=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(co, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(co, Condition(function BJ))
	call TriggerAddAction(co, function bJ)
	set Do=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Do, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Do, Condition(function cJ))
	call TriggerAddAction(Do, function DJ)
	set Do=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Do, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Do, Condition(function IsAiRen))
	call TriggerAddAction(Do, function KillAiRen)
	set Eo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Eo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Eo, Condition(function FJ))
	call TriggerAddAction(Eo, function GJ)
	set Wo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Wo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Wo, Condition(function JK))
	call TriggerAddAction(Wo, function KK)
	set sp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(sp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(sp, Condition(function IL))
	call TriggerAddAction(sp, function lL)
	set tp=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(tp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(tp, Condition(function KL))
	call TriggerAddAction(tp, function LL)
	set vp=CreateTrigger()
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(0), true)
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(1), true)
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(2), true)
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(3), true)
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(4), true)
	call TriggerRegisterPlayerSelectionEventBJ(vp, Player(5), true)
	call TriggerAddCondition(vp, Condition(function NL))
	call TriggerAddAction(vp, function OL)
	set wp=CreateTrigger()
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(0), 0, 3)
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(1), 0, 3)
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(2), 0, 3)
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(3), 0, 3)
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(4), 0, 3)
	call TriggerRegisterPlayerKeyEventBJ(wp, Player(5), 0, 3)
	call TriggerAddCondition(wp, Condition(function QL))
	call TriggerAddAction(wp, function RL)
	set xp=CreateTrigger()
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(0), 0, 0)
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(1), 0, 0)
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(2), 0, 0)
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(3), 0, 0)
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(4), 0, 0)
	call TriggerRegisterPlayerKeyEventBJ(xp, Player(5), 0, 0)
	call TriggerAddCondition(xp, Condition(function TL))
	call TriggerAddAction(xp, function UL)
	set yp=CreateTrigger()
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(0), 0, 1)
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(1), 0, 1)
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(2), 0, 1)
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(3), 0, 1)
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(4), 0, 1)
	call TriggerRegisterPlayerKeyEventBJ(yp, Player(5), 0, 1)
	call TriggerAddCondition(yp, Condition(function WL))
	call TriggerAddAction(yp, function XL)
	set zp=CreateTrigger()
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(0), 0, 2)
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(1), 0, 2)
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(2), 0, 2)
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(3), 0, 2)
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(4), 0, 2)
	call TriggerRegisterPlayerKeyEventBJ(zp, Player(5), 0, 2)
	call TriggerAddCondition(zp, Condition(function ZL))
	call TriggerAddAction(zp, function dM)
	set ap=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(ap, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ap, Condition(function iM))
	call TriggerAddAction(ap, function jM)
	set Bp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Bp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Bp, Condition(function mM))
	call TriggerAddAction(Bp, function nM)
	set bp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(bp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(bp, Condition(function pM))
	call TriggerAddAction(bp, function qM)
	set Cp=CreateTrigger()
	call TriggerAddRect(Cp , Ff)
	call TriggerAddCondition(Cp, Condition(function sM))
	call TriggerAddAction(Cp, function tM)
	set cp=CreateTrigger()
	call TriggerAddRect(cp , Hf)
	call TriggerAddCondition(cp, Condition(function vM))
	call TriggerAddAction(cp, function wM)
	set Dp=CreateTrigger()
	call TriggerAddRect(Dp , lf)
	call TriggerAddCondition(Dp, Condition(function yM))
	call TriggerAddAction(Dp, function zM)
	set Ep=CreateTrigger()
	call TriggerAddRect(Ep , Kf)
	call TriggerAddCondition(Ep, Condition(function aM))
	call TriggerAddAction(Ep, function BM)
	set Fp=CreateTrigger()
	call TriggerAddRect(Fp , Of)
	call TriggerAddCondition(Fp, Condition(function CM))
	call TriggerAddAction(Fp, function cM)
	set Gp=CreateTrigger()
	call TriggerAddRect(Gp , Qf)
	call TriggerAddCondition(Gp, Condition(function EM))
	call TriggerAddAction(Gp, function FM)
	set Hp=CreateTrigger()
	call TriggerAddRect(Hp , Tf)
	call TriggerAddCondition(Hp, Condition(function HM))
	call TriggerAddAction(Hp, function IM)
	set Ip=CreateTrigger()
	call TriggerAddRect(Ip , Vf)
	call TriggerAddCondition(Ip, Condition(function JM))
	call TriggerAddAction(Ip, function KM)
	set Jp=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(Jp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Jp, Condition(function PM))
	call TriggerAddAction(Jp, function QM)
	set Kp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Kp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Kp, Condition(function SM))
	call TriggerAddAction(Kp, function TM)
	set Lp=CreateTrigger()
	call TriggerAddRect(Lp , eg)
	call TriggerAddCondition(Lp, Condition(function VM))
	call TriggerAddAction(Lp, function WM)
	set Mp=CreateTrigger()
	call TriggerAddRect(Mp , gg)
	call TriggerAddCondition(Mp, Condition(function YM))
	call TriggerAddAction(Mp, function ZM)
	set Np=CreateTrigger()
	call TriggerAddRect(Np , ig)
	call TriggerAddCondition(Np, Condition(function eN))
	call TriggerAddAction(Np, function fN)
	set Op=CreateTrigger()
	call TriggerAddRect(Op , jg)
	call TriggerAddCondition(Op, Condition(function hN))
	call TriggerAddAction(Op, function iN)
	set Pp=CreateTrigger()
	call TriggerAddRect(Pp , ng)
	call TriggerAddCondition(Pp, Condition(function kN))
	call TriggerAddAction(Pp, function mN)
	set Qp=CreateTrigger()
	call TriggerAddRect(Qp , pg)
	call TriggerAddCondition(Qp, Condition(function oN))
	call TriggerAddAction(Qp, function pN)
	set Rp=CreateTrigger()
	call TriggerAddRect(Rp , qg)
	call TriggerAddCondition(Rp, Condition(function rN))
	call TriggerAddAction(Rp, function sN)
	set Sp=CreateTrigger()
	call TriggerAddRect(Sp , sg)
	call TriggerAddCondition(Sp, Condition(function uN))
	call TriggerAddAction(Sp, function vN)
	set Tp=CreateTrigger()
	call TriggerAddRect(Tp , ug)
	call TriggerAddCondition(Tp, Condition(function xN))
	call TriggerAddAction(Tp, function yN)
	set Up=CreateTrigger()
	call TriggerAddRect(Up , wg)
	call TriggerAddCondition(Up, Condition(function AN))
	call TriggerAddAction(Up, function aN)
	set Vp=CreateTrigger()
	call TriggerAddRect(Vp , xg)
	call TriggerAddCondition(Vp, Condition(function bN))
	call TriggerAddAction(Vp, function CN)
	set Wp=CreateTrigger()
	call TriggerAddRect(Wp , yg)
	call TriggerAddCondition(Wp, Condition(function DN))
	call TriggerAddAction(Wp, function EN)
	set Xp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Xp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Xp, Condition(function GN))
	call TriggerAddAction(Xp, function IN)
	set Zp=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(Zp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Zp, Condition(function MN))
	call TriggerAddAction(Zp, function NN)
	set dq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(dq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(dq, Condition(function PN))
	call TriggerAddAction(dq, function QN)
	set eq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(eq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(eq, Condition(function SN))
	call TriggerAddAction(eq, function TN)
	set fq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(fq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(fq, Condition(function VN))
	call TriggerAddAction(fq, function WN)
	set gq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gq, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(gq, Condition(function YN))
	call TriggerAddAction(gq, function ZN)
	set hq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(hq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(hq, Condition(function eO))
	call TriggerAddAction(hq, function fO)
	set jq=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(jq, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(jq, Condition(function kO))
	call TriggerAddAction(jq, function mO)
	set kq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(kq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(kq, Condition(function oO))
	call TriggerAddAction(kq, function pO)
	set mq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(mq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(mq, Condition(function rO))
	call TriggerAddAction(mq, function sO)
	set oq=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(oq, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(oq, Condition(function xO))
	call TriggerAddAction(oq, function yO)
	set pq=CreateTrigger()
	call TriggerAddRect(pq , gh)
	call TriggerAddCondition(pq, Condition(function AO))
	call TriggerAddAction(pq, function aO)
	set qq=CreateTrigger()
	call TriggerAddRect(qq , fh)
	call TriggerAddCondition(qq, Condition(function bO))
	call TriggerAddAction(qq, function CO)
	set rq=CreateTrigger()
	call TriggerAddRect(rq , jh)
	call TriggerAddCondition(rq, Condition(function DO))
	call TriggerAddAction(rq, function EO)
	set sq=CreateTrigger()
	call TriggerAddRect(sq , udg_liuqiu)
	call TriggerAddCondition(sq, Condition(function GO))
	call TriggerAddAction(sq, function HO)
	set tq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(tq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(tq, Condition(function lO))
	call TriggerAddAction(tq, function JO)
	//特殊事件：潇湘子和尹克西到藏经阁盗取九阳神功经书
	set t=CreateTrigger()
	// call TriggerRegisterTimerEventSingle(t, GetRandomInt(60, 1800))
	call TriggerRegisterTimerEventSingle(t, 300)
	call TriggerAddAction(t, function stealJiuYang)
	//击杀潇湘子和尹克西，获得奇武，事件结束
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isKillStealer))
	call TriggerAddAction(t, function killStealer)
	//击杀觉远大师和张君宝，获得奇武，事件结束
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isKillSeeker))
	call TriggerAddAction(t, function killSeeker)
	//击杀白猿，获得伴侣白猿
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isKillBaiYuan))
	call TriggerAddAction(t, function killBaiYuan)
	//击杀曾阿牛，获得九阳残卷
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isKillANiu))
	call TriggerAddAction(t, function killANiu)
	set t=null
endfunction
//-------------- 历练系统 ----------------
// 历练1：大战江南七怪
// 历练2：十八罗汉阵
// 历练3：十恶不赦
// 历练4：挑战光明顶
// 历练5：华山论剑
// 历练6：古龙传奇
//----------------------------------------
//大战江南七怪
function XQ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895630 ) ) // INLINED!!
endfunction
function YQ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetRectCenter(tf)
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( xiuxing[i] >= 1 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
		else
			if ( J8[i] == 0 ) then
				set J8[i]=1
				call PlaySoundOnUnitBJ(bh, 100, u)
				call AdjustPlayerStateBJ(- R2I(0.1 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC看在钱的面子上，我就通融通融你吧，请前往挑战|r|cFFADFF2F江南七怪|r\n")
				call PingMinimapLocForForce(ov(p), loc, 5.)
				call RemoveLocation(loc)
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC请前往挑战|r|cFFADFF2F江南七怪|r\n")
			endif
		endif
	else
		if ( GetUnitLevel(u) < 10 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足10级无法接取该任务")
		else
			if ( shengwang[i] < 500 ) then
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足500无法接取该任务")
			else
				if ( xiuxing[i] >= 1 ) then
					call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
				else
					if ( J8[i] == 0 ) then
						set J8[i]=1
						call PlaySoundOnUnitBJ(bh, 100, u)
						call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC请前往挑战|r|cFFADFF2F江南七怪|r\n")
						call PingMinimapLocForForce(ov(p), loc, 5.)
						call RemoveLocation(loc)
					else
						call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC请前往挑战|r|cFFADFF2F江南七怪|r\n")
					endif
				endif
			endif
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function dR takes nothing returns boolean
	return ( J8[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] == 1 and ( GetUnitTypeId(GetTriggerUnit()) == 'owar' or GetUnitTypeId(GetTriggerUnit()) == 'nw2w' or GetUnitTypeId(GetTriggerUnit()) == 'ohun' or GetUnitTypeId(GetTriggerUnit()) == 'opeo' or GetUnitTypeId(GetTriggerUnit()) == 'nogm' or GetUnitTypeId(GetTriggerUnit()) == 'hsor' or GetUnitTypeId(GetTriggerUnit()) == 'ntkt' ) )
endfunction
function eR takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetUnitTypeId(GetTriggerUnit()) == 'owar' then
		set LLguaiA[i]=1
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'nw2w' then
		set LLguaiG[i]=1
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JING_WU) - 1)])) != 0) or GetRandomReal(1, 100) <= 50.0 then // INLINED!!
			call CreateItem('I0C6', GetUnitX(u), GetUnitY(u))
		endif
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'ohun' then
		set LLguaiB[i]=1
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'opeo' then
		set LLguaiC[i]=1
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'nogm' then
		set LLguaiD[i]=1
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'hsor' then
		set LLguaiE[i]=1
	endif
	if GetUnitTypeId(GetTriggerUnit()) == 'ntkt' then
		set LLguaiF[i]=1
	endif
	if LLguaiA[i] == 1 and LLguaiB[i] == 1 and LLguaiC[i] == 1 and LLguaiD[i] == 1 and LLguaiE[i] == 1 and LLguaiF[i] == 1 and LLguaiG[i] == 1 then
		set xiuxing[i]=1
		if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
			call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 2)
			call SetUnitAcquireRange(GetKillingUnit(), 700)
		endif
		set udg_lilianxishu[i]=1.7
		set danpo[i]=( danpo[i] + 1 )
		set gengu[i]=( gengu[i] + 1 )
		set fuyuan[i]=( fuyuan[i] + 1 )
		set jingmai[i]=( jingmai[i] + 1 )
		set wuxing[i]=( wuxing[i] + 1 )
		set yishu[i]=( yishu[i] + 1 )
		set J8[i]=2
		
		call PlaySoundOnUnitBJ(Hh, 100, u)
		call unitadditembyidswapped(1227895371 , u)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务大战江南七怪，修行+1，全性格属性+1，奖励乾坤丹一个")
		if ( GetRandomInt(1, 30) <= fuyuan[i] - 5 ) then
			call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , u)
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		endif
		// 单通5门派奖励
		if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 5 then
			set udg_shuxing[i]=udg_shuxing[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
		endif
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00韩小莹：" + ( I2S(LLguaiE[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00全金发：" + ( I2S(LLguaiC[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00张阿生：" + ( I2S(LLguaiF[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00南希仁：" + ( I2S(LLguaiB[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00韩宝驹：" + ( I2S(LLguaiD[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00朱聪：" + ( I2S(LLguaiG[i]) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00柯镇恶：" + ( I2S(LLguaiA[i]) + " / 1" ) ))
	endif
	set u=null
	set p=null
endfunction
//十八罗汉阵
function gR takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895641 ) ) // INLINED!!
endfunction
function hR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetFilterUnit()) == 1852862003 ) )
endfunction
function iR takes nothing returns nothing
	call RemoveUnit(GetEnumUnit())
endfunction
function jR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 2 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
		else
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Mf))
			call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(1200. , LoadLocationHandle(YDHT, id * cx, $5E83114F) , Condition(function hR)), function iR)
			call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call AdjustPlayerStateBJ(- R2I(0.2 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00戒律主持：|r |cFF99FFCC看在钱的面子上，我就通融通融你吧，想证明自己的能力就要通关少林|r|cFFADFF2F十八罗汉阵")
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call YDWEPolledWaitNull(2)
			call SaveInteger(YDHT, id, - $1317DA19, cx)
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call YDWEPolledWaitNull(4.)
			call SaveInteger(YDHT, id, - $1317DA19, cx)
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call YDWEPolledWaitNull(6.)
			call SaveInteger(YDHT, id, - $1317DA19, cx)
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
			call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		endif
		
	else
		if ( ( GetUnitLevel(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) < 25 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000等级不足25级无法接取该任务")
		else
			if ( ( shengwang[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 1500 ) ) then
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000江湖声望不足1500无法接取该任务")
			else
				if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 1 ) ) then
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你必须先完成历练1任务")
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Te))
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 2 ) ) then
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
					else
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Mf))
						call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(1200. , LoadLocationHandle(YDHT, id * cx, $5E83114F) , Condition(function hR)), function iR)
						call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00戒律主持：|r |cFF99FFCC想证明自己的能力就要通关少林|r|cFFADFF2F十八罗汉阵")
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call YDWEPolledWaitNull(2)
						call SaveInteger(YDHT, id, - $1317DA19, cx)
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call YDWEPolledWaitNull(4.)
						call SaveInteger(YDHT, id, - $1317DA19, cx)
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call YDWEPolledWaitNull(6.)
						call SaveInteger(YDHT, id, - $1317DA19, cx)
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRandomLocInRect(Mf))
						call CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
					endif
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
	set u=null
	set p=null
endfunction
function mR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852862003 ) and ( xiuxing[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] <= 1 ) )
endfunction
function nR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set N8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( N8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( N8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 18 ) ) then
		set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2
		if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
			call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 3)
			call SetUnitAcquireRange(GetKillingUnit(), 800)
		endif
		set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2.6
		set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] != 11 then
			call unitadditembyidswapped(1227895642 , GetKillingUnit())
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务十八罗汉阵，获得修行+1，全性格属性+1，门派毕业卷")
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务十八罗汉阵，获得修行+1，全性格属性+1")
		endif
		// 动态调整难度
		call dynamicDifficultyAdjustment(2)
		// 单通5门派奖励
		if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
			set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
		endif
		
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "十八罗汉：" + ( I2S(N8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 18" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//十恶不赦
function sR takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895879 ) ) // INLINED!!
endfunction
function tR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 3 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
		else
			if ( ( h9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ag))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F150秒内|r|cFF99FFCC击杀超过100只，才能完成任务")
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ag))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call AdjustPlayerStateBJ(- R2I(0.3 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F看在钱的面子上，我就通融通融你吧，十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F150秒内|r|cFF99FFCC击杀超过100只，才能完成任务")
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call StartTimerBJ(f9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 150.)
				call CreateTimerDialogBJ(bj_lastStartedTimer, "闯关倒计时:")
				call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
				set g9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
				set h9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
				set i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
			endif
		endif
	else
		if ( ( GetUnitLevel(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) < 40 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000等级不足40级无法接取该任务")
		else
			if ( ( shengwang[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 2800 ) ) then
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000江湖声望不足2800无法接取该任务")
			else
				if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 2 ) ) then
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你必须先完成历练2任务")
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(ag))
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 3 ) ) then
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
					else
						if ( ( h9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ag))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F150秒内|r|cFF99FFCC击杀超过100只，才能完成任务")
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						else
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ag))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F150秒内|r|cFF99FFCC击杀超过100只，才能完成任务")
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call StartTimerBJ(f9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 150.)
							call CreateTimerDialogBJ(bj_lastStartedTimer, "闯关倒计时:")
							call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
							set g9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
							set h9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
							set i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
						endif
					endif
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
	set u=null
	set p=null
endfunction
function vR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ndtb' ) and ( h9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function wR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 100 ) ) then
		call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
		if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
			call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 4)
			call SetUnitAcquireRange(GetKillingUnit(), 900)
		endif
		set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4.2
		set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set h9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯十恶不赦岛，获得修行+1，全性格属性+1，脱胎换骨丹1个，你可以前往藏经阁了")
		// 单通5门派奖励
		if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
			set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
		endif
		call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
		call DestroyTimer(f9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call unitadditembyidswapped(1227895374 , GetKillingUnit())
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "十恶不赦：" + ( I2S(i9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 100" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function yR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 1)
	call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set h9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function AR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 2)
	call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set h9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function BR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 3)
	call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set h9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function CR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 4)
	call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set h9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function DR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 5)
	call DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set h9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//挑战光明顶
function FR takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895893 ) ) // INLINED!!
endfunction
function GR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 4 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
		else
			if ( ( T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Jg))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Jg))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				set LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				call AdjustPlayerStateBJ(- R2I(0.4 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00看在钱的面子上，我就通融通融你吧,当前进度：")
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
				call StartTimerBJ(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 240.)
				call CreateTimerDialogBJ(bj_lastStartedTimer, "攻打光明顶倒计时:")
				call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
				set dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
				set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
			endif
		endif
		
	else
		if ( ( GetUnitLevel(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) < 55 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000等级不足55级无法接取该任务")
		else
			if ( ( shengwang[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 4800 ) ) then
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000江湖声望不足4800无法接取该任务")
			else
				if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 3 ) ) then
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你必须先完成历练3任务")
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 4 ) ) then
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
					else
						if ( ( T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Jg))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						else
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Jg))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
							set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
							set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
							set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
							set LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
							call StartTimerBJ(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 240.)
							call CreateTimerDialogBJ(bj_lastStartedTimer, "攻打光明顶倒计时:")
							call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
							set dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
							set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
						endif
					endif
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
	set u=null
	set p=null
endfunction
function IR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853056884 ) and ( T9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function lR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
			// 动态调整难度
			call dynamicDifficultyAdjustment(4)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 5)
				call SetUnitAcquireRange(GetKillingUnit(), 1000)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7.
			set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function KR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nsgb' ) and ( T9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function LR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
			// 动态调整难度
			call dynamicDifficultyAdjustment(4)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 5)
				call SetUnitAcquireRange(GetKillingUnit(), 1000)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7.
			set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function NR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nsgn' ) and ( T9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function OR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
			// 动态调整难度
			call dynamicDifficultyAdjustment(4)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 5)
				call SetUnitAcquireRange(GetKillingUnit(), 1000)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7.
			set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function QR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ntkc' ) and ( T9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function RR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
			// 动态调整难度
			call dynamicDifficultyAdjustment(4)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 5)
				call SetUnitAcquireRange(GetKillingUnit(), 1000)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7.
			set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function TR takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nwzr' ) and ( T9[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function UR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		set LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) and ( LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
			// 动态调整难度
			call dynamicDifficultyAdjustment(4)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 5)
				call SetUnitAcquireRange(GetKillingUnit(), 1000)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7.
			set T9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(Z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00紫杉龙王：" + ( I2S(LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00青翼蝠王：" + ( I2S(LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00金毛狮王：" + ( I2S(LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00白眉鹰王：" + ( I2S(LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00阳顶天：" + ( I2S(LLguaiE[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//任务失败
function WR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 1)
	call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set T9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function YR takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 2)
	call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set T9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function dS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 3)
	call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set T9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function fS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 4)
	call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set T9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function hS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 5)
	call DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set T9[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//华山论剑
function jS takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895896 ) ) // INLINED!!
endfunction
function kS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 5 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
		else
			if ( ( ed[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Qg))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Qg))
				call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
				call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
				set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
				set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
				set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
				call AdjustPlayerStateBJ(- R2I(0.5 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00看在钱的面子上，我就通融通融你吧,当前进度：")
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
				call StartTimerBJ(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 280.)
				call CreateTimerDialogBJ(bj_lastStartedTimer, "华山论剑倒计时")
				call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
				set gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
				set ed[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
			endif
		endif
		
	else
		if ( ( GetUnitLevel(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) < 70 ) ) then
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000等级不足70级无法接取该任务")
		else
			if ( ( shengwang[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 6500 ) ) then
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000江湖声望不足6500无法接取该任务")
			else
				if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] < 4 ) ) then
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你必须先完成历练4任务")
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Lg))
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 5 ) ) then
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你已经完成这个任务了")
					else
						if ( ( ed[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Qg))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						else
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Qg))
							call SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), LoadLocationHandle(YDHT, id * cx, $5E83114F))
							call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
							set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
							set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
							set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00当前进度：")
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 1 )) + " / 1" ) ))
							call StartTimerBJ(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], false, 280.)
							call CreateTimerDialogBJ(bj_lastStartedTimer, "华山论剑倒计时")
							call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
							set gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=bj_lastCreatedTimerDialog
							set ed[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
						endif
					endif
				endif
			endif
		endif
	endif
	set u=null
	set p=null
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function nS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1869050475 ) and ( ed[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function oS takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local location loc= null
	if ( ( LLguaiA[i] == 1 ) ) then
		set LLguaiA[i]=2
		if ( ( LLguaiA[i] == 2 ) and ( LLguaiB[i] == 2 ) and ( LLguaiC[i] == 2 ) and ( LLguaiD[i] == 2 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[i]=5
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 6)
				call SetUnitAcquireRange(GetKillingUnit(), 1100)
			endif
			set udg_lilianxishu[i]=12.
			set ed[i]=false
			set danpo[i]=( danpo[i] + 1 )
			set gengu[i]=( gengu[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 1 )
			set jingmai[i]=( jingmai[i] + 1 )
			set wuxing[i]=( wuxing[i] + 1 )
			set yishu[i]=( yishu[i] + 1 )
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			// 单通5门派奖励
			if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[i]=udg_shuxing[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[i])
			set loc=GetRectCenter(Rg)
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function qS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853058150 ) and ( ed[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function rS takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local location loc= null
	if ( ( LLguaiB[i] == 1 ) ) then
		set LLguaiB[i]=2
		if ( ( LLguaiA[i] == 2 ) and ( LLguaiB[i] == 2 ) and ( LLguaiC[i] == 2 ) and ( LLguaiD[i] == 2 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[i]=5
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 6)
				call SetUnitAcquireRange(GetKillingUnit(), 1100)
			endif
			set udg_lilianxishu[i]=12.
			set ed[i]=false
			set danpo[i]=( danpo[i] + 1 )
			set gengu[i]=( gengu[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 1 )
			set jingmai[i]=( jingmai[i] + 1 )
			set wuxing[i]=( wuxing[i] + 1 )
			set yishu[i]=( yishu[i] + 1 )
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			// 单通5门派奖励
			if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[i]=udg_shuxing[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[i])
			set loc=GetRectCenter(Rg)
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function tS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853323879 ) and ( ed[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function uS takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local location loc= null
	if ( ( LLguaiC[i] == 1 ) ) then
		set LLguaiC[i]=2
		if ( ( LLguaiA[i] == 2 ) and ( LLguaiB[i] == 2 ) and ( LLguaiC[i] == 2 ) and ( LLguaiD[i] == 2 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[i]=5
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 6)
				call SetUnitAcquireRange(GetKillingUnit(), 1100)
			endif
			set udg_lilianxishu[i]=12.
			set ed[i]=false
			set danpo[i]=( danpo[i] + 1 )
			set gengu[i]=( gengu[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 1 )
			set jingmai[i]=( jingmai[i] + 1 )
			set wuxing[i]=( wuxing[i] + 1 )
			set yishu[i]=( yishu[i] + 1 )
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			// 单通5门派奖励
			if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[i]=udg_shuxing[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[i])
			set loc=GetRectCenter(Rg)
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function wS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853320818 ) and ( ed[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function xS takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local location loc= null
	if ( ( LLguaiD[i] == 1 ) ) then
		set LLguaiD[i]=2
		if ( ( LLguaiA[i] == 2 ) and ( LLguaiB[i] == 2 ) and ( LLguaiC[i] == 2 ) and ( LLguaiD[i] == 2 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[i]=5
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 6)
				call SetUnitAcquireRange(GetKillingUnit(), 1100)
			endif
			set udg_lilianxishu[i]=12.
			set ed[i]=false
			set danpo[i]=( danpo[i] + 1 )
			set gengu[i]=( gengu[i] + 1 )
			set fuyuan[i]=( fuyuan[i] + 1 )
			set jingmai[i]=( jingmai[i] + 1 )
			set wuxing[i]=( wuxing[i] + 1 )
			set yishu[i]=( yishu[i] + 1 )
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			// 单通5门派奖励
			if LoadInteger(YDHT, i, StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[i]=udg_shuxing[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[i])
			set loc=GetRectCenter(Rg)
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00黄药师：" + ( I2S(( LLguaiA[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00欧阳锋：" + ( I2S(( LLguaiB[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00一灯大师：" + ( I2S(( LLguaiC[i] - 1 )) + " / 1" ) ))
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00洪七公：" + ( I2S(( LLguaiD[i] - 1 )) + " / 1" ) ))
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//任务失败
function zS takes nothing returns boolean
	return ( ( ed[1] ) )
endfunction
function AS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 1)
	call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Rg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set ed[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function BS takes nothing returns boolean
	return ( ( ed[2] ) )
endfunction
function bS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 2)
	call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Rg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set ed[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function cS takes nothing returns boolean
	return ( ( ed[3] ) )
endfunction
function DS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 3)
	call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Rg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set ed[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function FS takes nothing returns boolean
	return ( ( ed[4] ) )
endfunction
function GS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 4)
	call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Rg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set ed[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function IS takes nothing returns boolean
	return ( ( ed[5] ) )
endfunction
function lS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $63F0AAA2, 5)
	call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	if ( ( RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)]) ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Rg))
		call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call PanCameraToTimedLocForPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $63F0AAA2) )), 0, 0, "|cFFFF0000时间到，任务失败了")
	set ed[LoadInteger(YDHT, id * cx, - $63F0AAA2)]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $63F0AAA2)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//古龙传奇
function KS takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896386 ) ) // INLINED!!
endfunction
function LS takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if GetUnitAbilityLevel(u, BA_MIAN_LING_LONG) >= 1 then
		if ( xiuxing[i] >= 6 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
		elseif ( Rd[i] ) then
			set loc=GetRectCenter(dh)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：" + I2S(LLguaiA[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：" + I2S(LLguaiB[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪：" + I2S(LLguaiC[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤：" + I2S(LLguaiD[i] - 2) + " / 1")
			call RemoveLocation(loc)
		else
			set loc=GetRectCenter(dh)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			set LLguaiA[i]=2
			set LLguaiB[i]=2
			set LLguaiC[i]=2
			set LLguaiD[i]=2
			call AdjustPlayerStateBJ(- R2I(0.6 * GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00看在钱的面子上，我就通融通融你吧，当前进度：")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪： 0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤： 0 / 1")
			call StartTimerBJ(fd[i], false, 120.)
			call CreateTimerDialogBJ(bj_lastStartedTimer, "紫禁决战倒计时")
			call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
			set gd[i]=bj_lastCreatedTimerDialog
			set Rd[i]=true
		endif
	else
		if ( GetUnitLevel(u) < 100 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足100级无法接取该任务")
		elseif ( shengwang[i] < 9000 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足9000无法接取该任务")
		elseif ( xiuxing[i] < 5 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你必须先完成历练5任务")
			set loc=GetRectCenter(Rg)
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		elseif ( xiuxing[i] >= 6 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
		elseif ( Rd[i] ) then
			set loc=GetRectCenter(dh)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：" + I2S(LLguaiA[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：" + I2S(LLguaiB[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪：" + I2S(LLguaiC[i] - 2) + " / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤：" + I2S(LLguaiD[i] - 2) + " / 1")
			call RemoveLocation(loc)
		else
			set loc=GetRectCenter(dh)
			call SetUnitPositionLoc(u, loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			set LLguaiA[i]=2
			set LLguaiB[i]=2
			set LLguaiC[i]=2
			set LLguaiD[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪： 0 / 1")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤： 0 / 1")
			call StartTimerBJ(fd[i], false, 120.)
			call CreateTimerDialogBJ(bj_lastStartedTimer, "紫禁决战倒计时")
			call TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
			set gd[i]=bj_lastCreatedTimerDialog
			set Rd[i]=true
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function NS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1852794732 ) and ( Rd[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function OS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
		set LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=6
			// 动态调整难度
			call dynamicDifficultyAdjustment(6)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 7)
				call SetUnitAcquireRange(GetKillingUnit(), 1200)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=20.
			set Rd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Zg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function QS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853252716 ) and ( Rd[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function RS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
		set LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=6
			// 动态调整难度
			call dynamicDifficultyAdjustment(6)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 7)
				call SetUnitAcquireRange(GetKillingUnit(), 1200)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=20.
			set Rd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Zg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function TS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nrvi' ) and ( Rd[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function US takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
		set LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=6
			// 动态调整难度
			call dynamicDifficultyAdjustment(6)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 7)
				call SetUnitAcquireRange(GetKillingUnit(), 1200)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=20.
			set Rd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Zg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function WS takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1851944036 ) and ( Rd[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] ) )
endfunction
function XS takes nothing returns nothing
 local integer id=GetHandleId(GetTriggeringTrigger())
 local integer cx=LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	if ( ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
		set LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
		if ( ( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) and ( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			set xiuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=6
			// 动态调整难度
			call dynamicDifficultyAdjustment(6)
			if GetUnitAbilityLevel(GetKillingUnit(), 'A03Q') != 0 then
				call SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 'Rhri', 7)
				call SetUnitAcquireRange(GetKillingUnit(), 1200)
			endif
			set udg_lilianxishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=20.
			set Rd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=false
			set danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( danpo[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( gengu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( jingmai[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( wuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			set yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( yishu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			// 单通5门派奖励
			if LoadInteger(YDHT, LoadInteger(YDHT, id * cx, - $5E9EB4B3), StringHash("单通门派数量")) >= 5 then
				set udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=udg_shuxing[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1
				call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|CFF34FF00单通5个门派，额外获得1自由属性")
			endif
			call DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call DestroyTimer(fd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Zg))
			call SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)], LoadLocationHandle(YDHT, id * cx, $5E83114F))
			call PanCameraToTimedLocForPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), LoadLocationHandle(YDHT, id * cx, $5E83114F), 0)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
			call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, "|cFFFFCC00当前进度：")
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00楚留香：" + ( I2S(( LLguaiA[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00叶孤城：" + ( I2S(( LLguaiB[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00西门吹雪：" + ( I2S(( LLguaiC[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
		call DisplayTextToPlayer(Player(- 1 + LoadInteger(YDHT, id * cx, - $5E9EB4B3)), 0, 0, ( "|cFFFFCC00陆小凤：" + ( I2S(( LLguaiD[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 2 )) + " / 1" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//任务失败
function RenWuFail takes integer i returns nothing
	call DestroyTimerDialog(gd[i])
	if ( RectContainsUnit(eh, udg_hero[i]) ) then
		call SetUnitPosition(udg_hero[i], - 9984, 700)
		call PanCameraToTimedForPlayer(Player(i - 1), - 9984, 700, 0)
	endif
	call DisplayTextToPlayer(Player(i - 1), 0, 0, "|cFFFF0000时间到，任务失败了")
	set Rd[i]=false
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[i])
endfunction
function ZS takes nothing returns boolean
	return Rd[1]
endfunction
function d5 takes nothing returns nothing
	call RenWuFail(1)
endfunction
function f5 takes nothing returns boolean
	return Rd[2]
endfunction
function g5 takes nothing returns nothing
	call RenWuFail(2)
endfunction
function i5 takes nothing returns boolean
	return Rd[3]
endfunction
function j5 takes nothing returns nothing
	call RenWuFail(3)
endfunction
function m5 takes nothing returns boolean
	return Rd[4]
endfunction
function nn5 takes nothing returns nothing
	call RenWuFail(4)
endfunction
function p5 takes nothing returns boolean
	return Rd[5]
endfunction
function q5 takes nothing returns nothing
	call RenWuFail(5)
endfunction
function Experiences_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	set zr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(zr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(zr, Condition(function XQ))
	call TriggerAddAction(zr, function YQ)
	set Ar=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(Ar, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ar, Condition(function dR))
	call TriggerAddAction(Ar, function eR)
	set ar=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ar, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ar, Condition(function gR))
	call TriggerAddAction(ar, function jR)
	set Br=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Br, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Br, Condition(function mR))
	call TriggerAddAction(Br, function nR)
	
	set Cr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Cr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Cr, Condition(function sR))
	call TriggerAddAction(Cr, function tR)
	set cr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(cr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(cr, Condition(function vR))
	call TriggerAddAction(cr, function wR)
	set Dr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Dr, f9[1])
	call TriggerAddAction(Dr, function yR)
	set Er=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Er, f9[2])
	call TriggerAddAction(Er, function AR)
	set Fr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Fr, f9[3])
	call TriggerAddAction(Fr, function BR)
	set Gr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Gr, f9[4])
	call TriggerAddAction(Gr, function CR)
	set Hr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Hr, f9[5])
	call TriggerAddAction(Hr, function DR)
	set Ir=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ir, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Ir, Condition(function FR))
	call TriggerAddAction(Ir, function GR)
	set lr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(lr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(lr, Condition(function IR))
	call TriggerAddAction(lr, function lR)
	set Jr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Jr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Jr, Condition(function KR))
	call TriggerAddAction(Jr, function LR)
	set Kr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Kr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Kr, Condition(function NR))
	call TriggerAddAction(Kr, function OR)
	set Lr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Lr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Lr, Condition(function QR))
	call TriggerAddAction(Lr, function RR)
	set Mr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Mr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Mr, Condition(function TR))
	call TriggerAddAction(Mr, function UR)
	set Nr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Nr, Z9[1])
	call TriggerAddAction(Nr, function WR)
	set Pr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Pr, Z9[2])
	call TriggerAddAction(Pr, function YR)
	set Qr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Qr, Z9[3])
	call TriggerAddAction(Qr, function dS)
	set Rr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Rr, Z9[4])
	call TriggerAddAction(Rr, function fS)
	set Sr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Sr, Z9[5])
	call TriggerAddAction(Sr, function hS)
	set Tr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Tr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Tr, Condition(function jS))
	call TriggerAddAction(Tr, function kS)
	set Ur=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Ur, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Ur, Condition(function nS))
	call TriggerAddAction(Ur, function oS)
	set Vr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Vr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Vr, Condition(function qS))
	call TriggerAddAction(Vr, function rS)
	set Wr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Wr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Wr, Condition(function tS))
	call TriggerAddAction(Wr, function uS)
	set Xr=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Xr, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Xr, Condition(function wS))
	call TriggerAddAction(Xr, function xS)
	set Yr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Yr, fd[1])
	call TriggerAddCondition(Yr, Condition(function zS))
	call TriggerAddAction(Yr, function AS)
	set Zr=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Zr, fd[2])
	call TriggerAddCondition(Zr, Condition(function BS))
	call TriggerAddAction(Zr, function bS)
	set ds=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(ds, fd[3])
	call TriggerAddCondition(ds, Condition(function cS))
	call TriggerAddAction(ds, function DS)
	set es=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(es, fd[4])
	call TriggerAddCondition(es, Condition(function FS))
	call TriggerAddAction(es, function GS)
	set fs=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(fs, fd[5])
	call TriggerAddCondition(fs, Condition(function IS))
	call TriggerAddAction(fs, function lS)
	set gs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(gs, Condition(function KS))
	call TriggerAddAction(gs, function LS)
	set hs=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(hs, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(hs, Condition(function NS))
	call TriggerAddAction(hs, function OS)
	set is=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(is, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(is, Condition(function QS))
	call TriggerAddAction(is, function RS)
	set js=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(js, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(js, Condition(function TS))
	call TriggerAddAction(js, function US)
	set ks=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ks, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(ks, Condition(function WS))
	call TriggerAddAction(ks, function XS)
	set ms=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(ms, fd[1])
	call TriggerAddCondition(ms, Condition(function ZS))
	call TriggerAddAction(ms, function d5)
	set ns=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(ns, fd[2])
	call TriggerAddCondition(ns, Condition(function f5))
	call TriggerAddAction(ns, function g5)
	set os=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(os, fd[3])
	call TriggerAddCondition(os, Condition(function i5))
	call TriggerAddAction(os, function j5)
	set ps=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(ps, fd[4])
	call TriggerAddCondition(ps, Condition(function m5))
	call TriggerAddAction(ps, function nn5)
	set qs=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(qs, fd[5])
	call TriggerAddCondition(qs, Condition(function p5))
	call TriggerAddAction(qs, function q5)
	set t=null
endfunction
//--------------------------
//游戏中的任务
//--------------------------
//店小二新手任务
function IJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I025' ) ) // INLINED!!
endfunction
function lJ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if ( ( O7[i] == 0 ) ) then
		if ( ( GetRandomInt(1, 100) <= 35 ) ) then
			set loc=GetRectCenter(Pe)
			set O7[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC我这有一壶上等女儿红专程送给襄阳城郭靖的，你能帮我跑一趟吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往正派武林主城的|cFFADFF2F郭靖|r\n")
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		elseif ( ( GetRandomInt(1, 70) <= 35 ) ) then
			set loc=GetRectCenter(Qe)
			set O7[i]=2
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC旁边树林里的野狼经常来袭击村民，你能帮助我们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F6只野狼|r\n")
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		else
			set O7[i]=3
			set loc=GetRectCenter(Re)
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC听说少林寺的练功房升级特别快，为何不去看看呢|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F练功房|r，可以通过主城传送\n")
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		endif
	elseif ( ( O7[i] == 1 ) ) then
		set loc=GetRectCenter(Pe)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC你怎么还不出发啊？|r\n|cFFFFCC00提示：|r |cFF99FFCC前往正派武林主城的|cFFADFF2F郭靖|r\n")
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	elseif ( ( O7[i] == 2 ) ) then
		set loc=GetRectCenter(Qe)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC请帮助我们杀死野狼吧|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F6只野狼|r\n")
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	elseif ( ( O7[i] == 3 ) ) then
		set loc=GetRectCenter(Re)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC听说少林寺的练功房升级特别快，为何不去看看呢|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F练功房|r，可以通过主城传送")
		call PingMinimapLocForForce(ov(p), loc, 5.)
		call RemoveLocation(loc)
	elseif ( ( O7[i] == 4 ) ) then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC你已经完成新手任务了")
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//郭靖——环戒
function KJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( O7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 1 ) ) // INLINED!!
endfunction
function LJ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetRandomInt(1, 100) <= 60 then
		call unitadditembyidswapped('I024' , GetTriggerUnit())
	else
		call unitadditembyidswapped('I0CH' , GetTriggerUnit())
	endif
	call AddHeroXP(u, 100, true)
	call commonAddReputation(p , 10)
	call PlaySoundOnUnitBJ(Hh, 100, u)
	call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得经验+100、江湖声望+10和" + GetItemName(bj_lastCreatedItem) ))
	set O7[i]=4
	set u=null
	set p=null
endfunction
// 狼皮任务
//杀狼任务——青铜刀
function TI takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nwlt' ) ) // 狼死触发
endfunction
function UI takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( O7[i] == 2 ) ) then
		set P7[i]=( P7[i] + 1 )
		if ( ( P7[i] >= 6 ) ) then
			set P7[i]=0
			set O7[i]=4
			if GetRandomInt(1, 100) <= 60 then
				call unitadditembyidswapped('I020' , GetTriggerUnit())
			else
				call unitadditembyidswapped('I0CI' , GetTriggerUnit())
			endif
			call AddHeroXP(GetKillingUnit(), 100, true)
			call commonAddReputation(p , 50)
			call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得经验+100、江湖声望+50和" + GetItemName(bj_lastCreatedItem) ))
		else
			call DisplayTextToPlayer(p, 0, 0, ( "野狼：" + ( I2S(P7[i]) + " / 6" ) ))
		endif
	endif
	set wolfSkinCount[i]=( wolfSkinCount[i] + 1 )
	call DisplayTextToPlayer(p, 0, 0, ( "狼皮数量：" + ( I2S(wolfSkinCount[i]) + " /10" ) ))
	set u=null
	set p=null
endfunction
// 完成狼皮任务，靠近店小二提交任务
function isFinishWolfSkin takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) // INLINED!!
endfunction
function finishWolfSkin takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer count= 0
local integer l__xp= 0
local integer gold= 0
local integer sw= 0
if wolfSkinCount[i] >= 10 then
		set count=wolfSkinCount[i] / 10 // 取整
set l__xp=1000 * count
		set gold=2000 * count
		set sw=50 * count
		call AddHeroXP(u, l__xp, true) // 奖励经验
call commonAddGold(p , gold) // 奖励金钱
call commonAddReputation(p , sw) // 奖励声望
call PlaySoundOnUnitBJ(Hh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得经验+" + I2S(l__xp) + "、金钱" + I2S(gold) + "、江湖声望" + I2S(sw) ))
		set wolfSkinCount[i]=wolfSkinCount[i] - count * 10
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC即将入冬，请大侠帮忙收集一些狼皮|r\n|cFFFFCC00提示：|r |cFF99FFCC可以杀多点一次性交任务|r\n")
	endif
	set u=null
	set p=null
endfunction
//少林练功房——养精蓄锐令/乔峰草鞋
function NJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( O7[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 3 ) ) // INLINED!!
endfunction
function OJ takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetRandomInt(1, 100) <= 60 then
		call unitadditembyidswapped('I06H' , GetTriggerUnit())
	else
		call unitadditembyidswapped('I0DO' , GetTriggerUnit())
	endif
	call AddHeroXP(u, 100, true)
	call commonAddReputation(p , $A)
	call PlaySoundOnUnitBJ(Hh, 100, u)
	call DisplayTextToPlayer(p, 0, 0, ( "|CFF34FF00完成任务获得经验+100、江湖声望+10和" + GetItemName(bj_lastCreatedItem) ))
	set O7[i]=4
	set u=null
	set p=null
endfunction
//寻找物品
function IsWuPin takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0BB' // INLINED!!
endfunction
function LookForWuPin takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer id= LoadInteger(YDHT, GetHandleId(p), StringHash("item"))
 local string s
	if ( xunwu[i] == 0 ) then
		if xiuxing[i] <= 2 then
			if GetRandomInt(1, 2) == 1 then
				// 6烈火衣去掉
				set id=ZhuangBei[GetRandomInt(1, 5)]
			else
				// 12是霓云去掉，有点坑
				if GetRandomInt(1, 18) < 12 then
					set id=ShiPin[GetRandomInt(1, 11)]
				else
					set id=ShiPin[GetRandomInt(13, 18)]
				endif
				
			endif
		elseif xiuxing[i] <= 4 then
			if GetRandomInt(1, 2) == 1 then
				set id=ZhuangBei[GetRandomInt(7, 9)]
			else
				set id=ShiPin[GetRandomInt(9, 33)]
			endif
		else
			if GetRandomInt(1, 3) == 1 then
				set id=ZhuangBei[GetRandomInt(10, 14)]
			else
				set id=ShiPin[GetRandomInt(34, 44)]
			endif
		endif
		set xunwu[i]=1
		call SaveInteger(YDHT, GetHandleId(p), StringHash("item"), id)
		set s=GetObjectName(id)
		call PlaySoundOnUnitBJ(bh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC我需要" + s + "，你能帮我找来么|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骐寻找|cFFADFF2F" + s + "|r\n")
	else
		set s=GetObjectName(id)
		call PlaySoundOnUnitBJ(bh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC帮我找到" + s + "了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骐寻找|cFFADFF2F" + s + "|r\n")
	endif
	set u=null
	set p=null
endfunction
function IsFangQiWuPin takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0BC' // INLINED!!
endfunction
function FangQiWuPin takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( xunwu[i] == 0 ) then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC当前没有接任务哦|r\n")
	else
		set shengwang[i]=shengwang[i] - 100
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC堂堂大侠，居然找不到小女子需要的东西吗|r\n")
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00放弃任务，声望减少100|r\n")
		call PlaySoundOnUnitBJ(Gh, 100, u)
		set xunwu[i]=0
	endif
	set u=null
	set p=null
endfunction
function IsWanChengWuPin takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0BD' // INLINED!!
endfunction
function WanChengWuPin takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer id= LoadInteger(YDHT, GetHandleId(p), StringHash("item"))
	if xunwu[i] == 1 and UnitHaveItem(u , id) and id != 0 then
		call RemoveItem(FetchUnitItem(u , id))
		call commonAddReputation(p , 40 * ( xiuxing[i] + 1 ))
		call AddHeroXP(udg_hero[i], 15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * ( xiuxing[i] + 1 ), true)
		set xunwu[i]=0
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC谢谢你的帮助|r\n")
		if GetRandomInt(1, 10) <= xiuxing[i] + 1 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" + I2S(40 * ( xiuxing[i] + 1 )) + "点，经验" + I2S(15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * ( xiuxing[i] + 1 )) + "点|r\n")
		else
			call unitadditembyidswapped('I04T' , udg_hero[i])
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" + I2S(40 * ( xiuxing[i] + 1 )) + "点，经验" + I2S(15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * ( xiuxing[i] + 1 )) + "点，九阳丹一颗|r\n")
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) then // INLINED!!
			if udg_xbds[i] < 3 then
				set udg_xbds[i]=udg_xbds[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您完成了" + I2S(udg_xbds[i]) + "次寻宝任务，完成4次可获得寻宝大师哦")
			else
				if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) then // INLINED!!
					call Deputy_setMaster(i , XUN_BAO)
					// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓寻宝大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得寻宝大师")
					call SetPlayerName(p, "〓寻宝大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				endif
			endif
		endif
	elseif xunwu[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC还没有找到小女子需要的东西吗|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC当前没有接任务哦|r\n")
	endif
	set u=null
	set p=null
endfunction
// 随机兑换武功秘籍
function isBuyWuGongBook takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I0AI' or GetItemTypeId(GetManipulatedItem()) == 'I0AH' or GetItemTypeId(GetManipulatedItem()) == 'I0AJ' ) )
endfunction
function buyWuGongBook takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	if GetItemTypeId(GetManipulatedItem()) == 'I0AI' then
		call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00这本江湖秘籍送给你了")
		call unitadditembyidswapped(udg_jianghu[GetRandomInt(1, 18)] , u)
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0AH' then
		call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00这本绝学秘籍送给你了")
		call unitadditembyidswapped(udg_juexue[GetRandomInt(1, 10)] , u)
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0AJ' then
		call DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00这本绝内秘籍送给你了")
		call unitadditembyidswapped(udg_juenei[GetRandomInt(1, 8)] , u)
	endif
	set u=null
	set p=null
endfunction
// 速战速决任务，奖励加速出怪物品
function IsQuickFight takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I0D1' ) )
endfunction
function QuickFight takes nothing returns nothing
 local unit u= GetTriggerUnit()
	call unitadditembyidswapped('I0D2' , u)
	set u=null
endfunction
// 加速出怪物品使用
function IsJiaSuChuGuai takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I0D2' ) )
endfunction
function JiaSuChuGuai takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
	// 判断是否15波之后、是否特殊模式
	if udg_boshu > 15 and udg_boshu <= 26 and udg_teshushijian then
		set udg_sutong=true
		set udg_boshu=26
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033已经跳到26波，请大家注意防守")
	else
		call createitemloc('I0D2' , loc)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033特殊模式下超过15波、不超过26波才能跳")
	endif
	call RemoveLocation(loc)
	set loc=null
endfunction
// 猪年杀猪任务
// function IsKillYang takes nothing returns boolean
// 	return(GetUnitTypeId(GetTriggerUnit())=='nshf')
// endfunction
// function KillYang takes nothing returns nothing
// 	local unit u=GetKillingUnit()
// 	local integer i=GetRandomInt(1,15)
// 	if i==6 then
// 		call unitadditembyidswapped('I0A8',udg_hero[1+GetPlayerId(GetOwningPlayer(u))])
// 		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cfffff000有玩家打掉了小猪，获得了珍稀物品【新年】")
// 	elseif i==4 then
// 		call unitadditembyidswapped('I0A9',udg_hero[1+GetPlayerId(GetOwningPlayer(u))])
// 		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cfffff000有玩家打掉了小猪，获得了珍稀物品【快乐】")
// 	else
// 		call commonAddLumber(GetOwningPlayer(u), 88)
// 		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cfffff000有玩家打掉了小猪，获得了88个珍稀币")
// 	endif
// 	set u=null
// endfunction
// ==============等级福利商店=====================//

function IsLevelReward takes nothing returns boolean
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0DG'
endfunction
function LevelReward takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= GetPlayerId(p)
	// 获取玩家对应的地图等级
 local integer level= DzAPI_Map_GetMapLevel(Player(i))
	if ( level < 3 and level_award[i + 1] != 1 ) or map_award_status[i + 1] == 1 then
		call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|CFFFE890D可能你不符合条件或者已经领取过了哦！")
		return
	endif
	set map_award_status[i + 1]=1
	if ( level >= 3 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped(mapLevelReward[1] , u) // 养精蓄锐令牌
endif
	if ( level >= 5 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped('I02T' , u) // 大雁
endif
	if ( level >= 8 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped(mapLevelReward[GetRandomInt(8, 10)] , u)
	endif
	if ( level >= 10 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped('I019' , u) // 白虎符
endif
	if ( level >= 11 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped('I06Z' , u) // 续命
endif
	if ( level >= 14 or level_award[i + 1] == 1 ) then
		if GetRandomInt(1, 2) == 1 then
			call commonAddGold(p , 50000) // 奖励5w金钱
else
			call commonAddLumber(p , 25) // 奖励25木头
endif
	endif
	if ( level >= 25 or level_award[i + 1] == 1 ) then
		call unitadditembyidswapped('I070' , u) // 通犀地龙丸
endif
	set u=null
	set p=null
endfunction
// 扣除积分并存档方法
function jfChange takes integer i,integer l__jf returns nothing
	// 累加本局可用积分
	set jf_useMax[i]=jf_useMax[i] + l__jf
	// 扣除对应的积分
	set udg_jf[i]=udg_jf[i] - l__jf
	// 保存到服务器
	call DzAPI_Map_StoreInteger(Player(i) , "jf" , udg_jf[i])
endfunction
//============积分商店=============//
// 随机一个AB性格加一:5积分；明教一局：20积分；精钢剑：4积分；随机一本奇武：4积分；桃花岛传送符（永久版）：4积分；重置门派称号：14积分；号令天下：10积分
function isJfShop takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I0DC' or GetItemTypeId(GetManipulatedItem()) == 'I0DD' or GetItemTypeId(GetManipulatedItem()) == 'I0DE' or GetItemTypeId(GetManipulatedItem()) == 'I0DF' or GetItemTypeId(GetManipulatedItem()) == 'I0DH' or GetItemTypeId(GetManipulatedItem()) == 'I0EL' ) )
endfunction
function jfShop takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= GetPlayerId(p)
	// 精钢剑4积分、随机性格5积分、随机奇武4积分、桃花岛传送4积分、重置门派称号14积分、号令天下10积分、加强天赋15积分
 local integer jf1= 4
 local integer jf2= 5
 local integer jf3= 4
 local integer jf4= 4
 local integer jf5= 14
 local integer jf6= 10
 local integer jf7= 15
	
	if ( ( GetItemTypeId(GetManipulatedItem()) == 'I0DC' ) ) and udg_jf[i] >= jf1 and ( jf_useMax[i] + jf1 ) <= jf_max then
		call unitadditembyidswapped('I01L' , u) // 创建精钢剑给玩家
call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00获取精钢剑，扣除4积分")
		call jfChange(i , jf1)
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0EL' ) ) and udg_jf[i] >= jf7 and ( jf_useMax[i] + jf7 ) <= jf_max then
		if bigTalent[i + 1] != 1 and talent_flag[i + 1] == 1 then
			set bigTalent[i + 1]=1
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00激活加强天赋系统")
			call jfChange(i , jf7)
		else
			if talent_flag[i + 1] != 1 then
				call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00激活失败，尚未解锁天赋系统")
			else
				call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00已经激活，不能重复激活")
			endif
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0DD' ) ) and udg_jf[i] >= jf2 and ( jf_useMax[i] + jf2 ) <= jf_max then
		if udg_xinggeA[i + 1] == 5 and udg_xinggeB[i + 1] == 5 then
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00AB性格已经满级，不扣除积分")
		else
			// 随机一个AB性格加1
			if GetRandomInt(1, 2) == 1 then
				if udg_xinggeA[i + 1] < 5 then
					set udg_xinggeA[i + 1]=udg_xinggeA[i + 1] + 1
					call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00A性格+1，扣除5积分")
				else
					if udg_xinggeB[i + 1] < 5 then
						set udg_xinggeB[i + 1]=udg_xinggeB[i + 1] + 1
						call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00B性格+1，扣除5积分")
					endif
				endif
			else
				if udg_xinggeB[i + 1] < 5 then
					set udg_xinggeB[i + 1]=udg_xinggeB[i + 1] + 1
					call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00B性格+1，扣除5积分")
				else
					if udg_xinggeA[i + 1] < 5 then
						set udg_xinggeA[i + 1]=udg_xinggeA[i + 1] + 1
						call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00A性格+1，扣除5积分")
					endif
				endif
			endif
			// 重置英雄性格buff
			call AddCharacterABuff(udg_hero[i + 1] , udg_xinggeA[i + 1])
			call AddCharacterBBuff(udg_hero[i + 1] , udg_xinggeB[i + 1])
			// 积分变更
			call jfChange(i , jf2)
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0DE' ) ) and udg_jf[i] >= jf3 and ( jf_useMax[i] + jf3 ) <= jf_max then
		if not udg_fpgz then
			if jfQiWu[i] >= jfQiWuLimit[i] then
				call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|CFFFE890D一局游戏只能兑换3本奇武，单通11个门派额外兑换1本！")
			else
				// 随机一本奇武，去掉珍珑棋局49
				if GetRandomInt(42, 56) < 49 then
					call unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(42, 48), 1) , u)
				else
					call unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(50, 56), 1) , u)
				endif
				call jfChange(i , jf3)
				call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00B随机获取一本奇武，扣除4积分")
			endif
			set jfQiWu[i]=jfQiWu[i] + 1
		else
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00返璞归真模式下无法兑换奇武")
		endif
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0DF' ) ) and udg_jf[i] >= jf4 and ( jf_useMax[i] + jf4 ) <= jf_max then
		// 桃花岛传送符，不限次数
		call unitadditembyidswapped('I0DI' , u)
		call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00获取桃花岛传送符，扣除4积分")
		call jfChange(i , jf4)
	elseif ( ( GetItemTypeId(GetManipulatedItem()) == 'I0DH' ) ) and udg_jf[i] >= jf6 and ( jf_useMax[i] + jf6 ) <= jf_max then
		// 号令
		// call unitadditembyidswapped('I06F',u) 
		if GetUnitLevel(udg_hero[i + 1]) <= 2 then
			call randomMenpai(p , 2)
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00重选随机门派，扣除10积分")
			call jfChange(i , jf6)
		else
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC003级以下才能重新随机门派")
		endif
		
	else
		call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|CFFFE890D不好意思你的积分不够了哦，或者已经或者已经达到本局使用上限50！")
	endif
	
	set u=null
	set p=null
endfunction

function isJfShop2 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I0EG' ) )
endfunction
function jfShop2 takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= GetPlayerId(p)
 local integer jf7= 200
call BJDebugMsg("兑换奖励：" + R2S(bonus_wugong[i]))
	
	if ( ( GetItemTypeId(GetManipulatedItem()) == 'I0EG' ) ) and udg_jf[i] >= jf7 then
		if bonus_wugong[i] >= 0.3 then
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00伤害兑换已达上限")
		else
			// 每次购买加10%武功加成和10%爆伤
			set bonus_wugong[i]=bonus_wugong[i] + .1
			set bonus_baoshang[i]=bonus_baoshang[i] + .1
			// 加上购买伤害，这里只记录当局兑换的永久加成，初始化记录存档的加成
			set udg_shanghaijiacheng[i + 1]=udg_shanghaijiacheng[i + 1] + .1
			set udg_baojishanghai[i + 1]=udg_baojishanghai[i + 1] + .1
			// 伤害加成存档
			call DzAPI_Map_StoreReal(Player(i) , "wugong" , bonus_wugong[i])
			call DzAPI_Map_StoreReal(Player(i) , "baoshang" , bonus_baoshang[i])
			call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00武功伤害加10%，暴击伤害加10%")
			// 扣除对应的积分
			set udg_jf[i]=udg_jf[i] - jf7
			// 保存到服务器
			call DzAPI_Map_StoreInteger(Player(i) , "jf" , udg_jf[i])
		endif
	else
		call DisplayTimedTextToPlayer(Player(i), 0, 0, 5, "|cFF66CC00积分不足")
	endif
	set u=null
	set p=null
endfunction

// 倚天剑任务，教训张无忌emtg，出现张无忌加强版e01G
function IsYiTian takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0CZ' // INLINED!!
endfunction
function YiTian takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
	if yitianflag[i] == 0 then
		if udg_runamen[i] == 8 then
			set yitianflag[i]=1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00灭绝师太：|r |cFF99FFCC帮我教训一下张无忌|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助灭绝师太解决|cFFADFF2F张无忌（副本3神秘怪物）|r\n")
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00灭绝师太：|r |cFF99FFCC你不是峨眉派中人，无法接此任务|r\n")
		endif
	elseif yitianflag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00灭绝师太：|r |cFF99FFCC还没教训张无忌吗？|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助灭绝师太解决|cFFADFF2F张无忌（副本3神秘怪物）|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00灭绝师太：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set u=null
	set p=null
endfunction
function IsWanChengYiTian takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'emtg' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'e01G' )
endfunction
function WanChengYiTian takes nothing returns nothing
 local player p= GetOwningPlayer(GetKillingUnit())
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(GetTriggerUnit())
	if GetUnitTypeId(GetTriggerUnit()) == 'emtg' then
		if yitianflag[i] == 1 then
			set yitianflag[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00张无忌：小子，刚才我只用了三分力")
			call CreateNUnitsAtLoc(1, 'e01G', Player(12), loc, bj_UNIT_FACING)
		endif
	elseif GetUnitTypeId(GetTriggerUnit()) == 'e01G' then
		call createitemloc('I00B' , loc)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00教训张无忌完成，奖励|cFFFF00CC倚天剑|r")
	endif
	call RemoveLocation(loc)
	set p=null
	set loc=null
endfunction
// 全真专属任务，杀林朝英ndqs
function isQuanZhenOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0E4' // INLINED!!
endfunction
function quanZhenOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
	if quanZhenFlag[i] == 0 then
		if udg_runamen[i] == 5 then
			if GetUnitLevel(udg_hero[i]) >= 90 then
				set quanZhenFlag[i]=1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC古墓深处，林朝英女侠可以为你解惑|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F林朝英（古墓Boss）|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC等你90级再来|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC你不是全真派中人，无法接此任务|r\n")
		endif
	elseif quanZhenFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC你已接受任务|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F林朝英（古墓Boss）|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set u=null
	set p=null
endfunction
// 林朝英和王重阳死亡事件
function isLcyAndWcy takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'ndqs' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'o02Q' )
endfunction
function lcyAndWcy takes nothing returns nothing
 local player p= GetOwningPlayer(GetKillingUnit())
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(GetTriggerUnit())
	if GetUnitTypeId(GetTriggerUnit()) == 'ndqs' then
		if quanZhenFlag[i] == 1 then
			set quanZhenFlag[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00王重阳：何方鼠辈，竟敢偷袭朝英！！")
			call CreateNUnitsAtLoc(1, 'o02Q', Player(12), loc, bj_UNIT_FACING)
		endif
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o02Q' then
		call createitemloc('I0DP' , loc)
		
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你的实力得到王重阳认可，获得|cFFFF00CC七星道袍|r")
	endif
	call RemoveLocation(loc)
	set p=null
	set loc=null
endfunction
// 慕容专属任务I0DR
function isMuRongOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0DR' // INLINED!!
	// return((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)and(GetItemTypeId(GetManipulatedItem())=='I0DR'))
endfunction
function muRongOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
	if muRongOnlyFlag[i] == 0 then
		if udg_runamen[i] == 13 then
			if isTitle(i , 26) and GetHeroLevel(udg_hero[i]) > 100 then
				set muRongOnlyFlag[i]=1 // 慕容任务标记已完成
call unitadditembyidswapped('I0DS' , u)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00慕容复：|r |cFF99FFCC你小子没让我失望，这是你的奖励！|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00慕容复：|r |cFF99FFCC你还没有慕容龙城的实力或者等级未超过100级，请继续努力！|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00慕容复：|r |cFF99FFCC你不是慕容世家中人，无法接此任务|r\n")
		endif
	else
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00慕容复：|r |cFF99FFCC你已完成任务|r\n")
	endif
	set u=null
	set p=null
endfunction
// 恒山拂尘I0DU专属，教训田伯光o02U
function isHengShanOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0DW' // INLINED!!
endfunction
function hengShanOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
 local location loc= Location(0, 0)
 local integer rn= 0
	if hengShanOnlyFlag[i] == 0 then
		// 必须是恒山派
		if udg_runamen[i] == 7 then
			// GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD) >= 200000 
			if GetHeroLevel(udg_hero[i]) >= 90 then
				set hengShanOnlyFlag[i]=1
				// 田伯光随机出现在黄蓉、林朝英、灭绝师太附近
				set rn=GetRandomInt(1, 3)
				if rn == 1 then
					set loc=Location(- 3500, 121) // 黄蓉附近
elseif rn == 2 then
					set loc=Location(- 1165, 11193) // 灭绝附近
else
					set loc=Location(- 9373, - 2769) // 林朝英附近
endif
				call CreateNUnitsAtLoc(1, 'o02U', Player(12), loc, bj_UNIT_FACING)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC田伯光竟敢欺负仪琳小师妹，帮忙教训一顿。|r\n|cFFFFCC00提示：|r |cFF99FFCC教训|cFFADFF2F田伯光（随机出现在黄蓉、林朝英、灭绝师太附近）|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你的等级未达到90级|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你不是恒山派中人，无法接此任务|r\n")
		endif
	elseif hengShanOnlyFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC田伯光竟敢欺负仪琳小师妹，帮忙教训一顿。|r\n|cFFFFCC00提示：|r |cFF99FFCC教训|cFFADFF2F田伯光（随机出现在黄蓉、林朝英、灭绝师太附近）|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set u=null
	set p=null
	set loc=null
endfunction
// 华山：养吾剑I0EO，等级大于90级挑战令狐冲
function isHuaShanOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0DV' // INLINED!!
	// return((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)and(GetItemTypeId(GetManipulatedItem())=='I0DV'))
endfunction
function huaShanOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
 local location loc= Location(1252, - 10800)
	if huaShanOnlyFlag[i] == 0 then
		// 必须是华山派
		if udg_runamen[i] == 4 then
			if GetUnitLevel(udg_hero[i]) >= 90 then
				set huaShanOnlyFlag[i]=1
				call CreateNUnitsAtLoc(1, 'h00N', Player(12), loc, bj_UNIT_FACING)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC请开始你的历练|r\n|cFFFFCC00提示：|r |cFF99FFCC打败|cFFADFF2F令狐冲|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你的等级没到90级|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你不是华山派中人，无法接此任务|r\n")
		endif
	elseif huaShanOnlyFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC请开始你的历练|r\n|cFFFFCC00提示：|r |cFF99FFCC打败|cFFADFF2F令狐冲|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set loc=null
	set u=null
	set p=null
endfunction
//衡山：镇岳尚方I0DY，令狐冲接任务，江南水乡解决费彬n00S，剑加青龙光环
function isHengShan2Only takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0E5' // INLINED!!
endfunction
function hengShan2Only takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
 local location loc= Location(- 4022, - 5210)
	if hengshan2OnlyFlag[i] == 0 then
		// 必须是衡山派
		if udg_runamen[i] == 15 then
			if GetUnitLevel(udg_hero[i]) >= 90 then
				set hengshan2OnlyFlag[i]=1
				call CreateNUnitsAtLoc(1, 'n00S', Player(12), loc, bj_UNIT_FACING)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC大嵩阳手费彬出现在江南水乡，帮忙解决他|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F费彬|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你的等级没到90级|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你不是衡山派中人，无法接此任务|r\n")
		endif
	elseif hengshan2OnlyFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC大嵩阳手费彬出现在江南水乡，帮忙解决他|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F费彬|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set loc=null
	set u=null
	set p=null
endfunction
//泰山：东灵铁剑I0E2，令狐冲接任务，雁门关解决玉玑子n00T，永久触发泰山十八盘
function isTaiShanOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0E6' // INLINED!!
endfunction
function taiShanOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
 local location loc= Location(- 5280, 50)
	if taiShanOnlyFlag[i] == 0 then
		// 必须是泰山派
		if udg_runamen[i] == 18 then
			if GetUnitLevel(udg_hero[i]) >= 90 then
				set taiShanOnlyFlag[i]=1
				call CreateNUnitsAtLoc(1, 'n00T', Player(12), loc, bj_UNIT_FACING)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC玉玑子出现在雁门关，帮忙抢回掌门铁剑|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F玉玑子|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你的等级没到90级|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你不是泰山派中人，无法接此任务|r\n")
		endif
	elseif taiShanOnlyFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC玉玑子出现在雁门关，帮忙抢回掌门铁剑|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F玉玑子|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00令狐冲：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set loc=null
	set u=null
	set p=null
endfunction
// 令狐冲、田伯光、洪安通、费彬死亡掉落
function isLingHuChongDeath takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'h00N' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'o02U' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'n00R' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'n00S' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'n00T' )
endfunction
function lingHuChongDeath takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(GetTriggerUnit())
	if GetUnitTypeId(GetTriggerUnit()) == 'h00N' then
		set huaShanOnlyFlag[i]=2 // 华山历练完成
call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00令狐冲：恭喜你通过历练，奖励|cFFFF00CC养吾剑|r一把")
		call unitadditembyidswapped('I0E0' , u)
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o02U' then
		set hengShanOnlyFlag[i]=2
		call unitadditembyidswapped('I0DU' , u)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00令狐冲：你已经教训了田伯光，奖励|cFFFF00CC拂尘|r一把")
	elseif GetUnitTypeId(GetTriggerUnit()) == 'n00R' then
		set shenLongOnlyFlag[i]=2
		call unitadditembyidswapped('I0DZ' , u)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00韦小宝：感谢你赶跑了洪安通，奖励|cFFFF00CC毒龙鞭|r一把")
	elseif GetUnitTypeId(GetTriggerUnit()) == 'n00S' then
		set hengshan2OnlyFlag[i]=2
		call unitadditembyidswapped('I0DY' , u)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00令狐冲：多谢少侠为帮忙杀了费彬，奖励|cFFFF00CC镇岳尚方|r一把")
	elseif GetUnitTypeId(GetTriggerUnit()) == 'n00T' then
		set taiShanOnlyFlag[i]=2
		call unitadditembyidswapped('I0E2' , u)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00令狐冲：多谢少侠为帮忙抢回掌门铁剑，奖励|cFFFF00CC东灵铁剑|r一把")
	endif
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
endfunction
// 	神龙：毒龙鞭I0DZ，韦小宝卖，金钱20w，木头300
function isShenLongOnly takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0E3' // INLINED!!
	// return((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)and(GetItemTypeId(GetManipulatedItem())=='I0E3'))
endfunction
function shenLongOnly takes nothing returns nothing
 local unit u= GetTriggerUnit()
local player p= GetOwningPlayer(u)
local integer i= 1 + GetPlayerId(p)
 local location loc= Location(10524, 324)
	if shenLongOnlyFlag[i] == 0 then
		// 必须是神龙教
		if udg_runamen[i] == 16 or udg_runamen[i] == 17 then
			if GetUnitLevel(udg_hero[i]) >= 40 then
				set shenLongOnlyFlag[i]=1
				// 桃花岛出现洪安通
				call CreateNUnitsAtLoc(1, 'n00R', Player(12), loc, bj_UNIT_FACING)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韦小宝：|r |cFF99FFCC洪安通要来找我麻烦，求大侠帮忙打发走，据说他从神龙岛偷渡到桃花岛了。|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F洪安通（桃花岛）|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韦小宝：|r |cFF99FFCC你的等级不足40级|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00韦小宝：|r |cFF99FFCC你不是神龙教中人，无法接此任务|r\n")
		endif
	elseif shenLongOnlyFlag[i] == 1 then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韦小宝：|r |cFF99FFCC洪安通要来找我麻烦，求大侠帮忙打发走，据说他从神龙岛偷渡到桃花岛了。|r\n|cFFFFCC00提示：|r |cFF99FFCC解决|cFFADFF2F洪安通（桃花岛）|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韦小宝：|r |cFF99FFCC你已经完成任务了|r\n")
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//杀人系统
function IsYangShou takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0BF' // INLINED!!
endfunction
function KillYangShou takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer id= LoadInteger(YDHT, GetHandleId(p), StringHash("life"))
 local integer j= GetRandomInt(1, xiuxing[i] * 3 + 3)
 local string s
	if ( yangshou[i] == 0 ) then
		set id=udg_yangshou[j]
		set yangshou[i]=1
		call SaveInteger(YDHT, GetHandleId(p), StringHash("life"), id)
		call SaveInteger(YDHT, GetHandleId(p), StringHash("life") * 2, ( j - 1 ) / 3)
		set s=GetObjectName(id)
		call PlaySoundOnUnitBJ(bh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC老夫夜观天象，" + s + "阳寿已尽，速去与老夫解决他|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骏解决|cFFADFF2F" + s + "|r\n")
	else
		set s=GetObjectName(id)
		call PlaySoundOnUnitBJ(bh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC解决" + s + "了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骏解决|cFFADFF2F" + s + "|r\n")
	endif
	set u=null
	set p=null
endfunction
function IsFangQiYangShou takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 'I0BE' // INLINED!!
endfunction
function FangQiYangShou takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( yangshou[i] == 0 ) then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC当前没有接任务|r\n")
	else
		set shengwang[i]=shengwang[i] - 100
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC堂堂大侠，竟解决不了一个小喽啰|r\n")
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00放弃任务，声望减少100|r\n")
		call PlaySoundOnUnitBJ(Gh, 100, u)
		set yangshou[i]=0
	endif
	set u=null
	set p=null
endfunction
function IsWanChengYangShou takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == LoadInteger(YDHT, GetHandleId(GetOwningPlayer(GetKillingUnit())), StringHash("life")) and yangshou[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 1
endfunction
function WanChengYangShou takes nothing returns nothing
 local unit u= GetKillingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer id= LoadInteger(YDHT, GetHandleId(p), StringHash("life"))
 local integer j= GetRandomInt(40, 60)
 local integer l= LoadInteger(YDHT, GetHandleId(p), StringHash("life") * 2)
	call commonAddReputation(p , j * ( l + 1 ))
	call commonAddGold(p , 5000 * ( l + 1 ))
	call commonAddLumber(p , 10 * ( l + 1 ))
	//call AddHeroXP(udg_hero[i],200*GetHeroLevel(udg_hero[i])*GetHeroLevel(udg_hero[i])*(xiuxing[i]+1),true)
	
	set yangshou[i]=0
	if GetRandomInt(1, 10) <= l + 1 then
		call unitadditembyidswapped('I04T' , udg_hero[i])
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" + I2S(j * ( l + 1 )) + "点，金钱" + I2S(5000 * ( l + 1 )) + "，珍稀币" + I2S(10 * ( l + 1 )) + "，九阳丹一颗|r\n")
	else
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" + I2S(j * ( l + 1 )) + "点，金钱" + I2S(5000 * ( l + 1 )) + "，珍稀币" + I2S(10 * ( l + 1 )))
	endif
	set u=null
	set p=null
endfunction
//帮郭靖求婚任务、偷玉箫任务、寻找杨过
function IsQiuHun takes nothing returns boolean
	return ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I09T' or GetItemTypeId(GetManipulatedItem()) == 'I09U' or GetItemTypeId(GetManipulatedItem()) == 'I09L' or GetItemTypeId(GetManipulatedItem()) == 'I09M' or GetItemTypeId(GetManipulatedItem()) == 'I0AW' or GetItemTypeId(GetManipulatedItem()) == 'I0AT' or GetItemTypeId(GetManipulatedItem()) == 'I0AV' or GetItemTypeId(GetManipulatedItem()) == 'I0EK' ) // INLINED!!
endfunction
function QiuHun_Action takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 'I09T' then
		if ( qiuhun[i] == 0 ) then
			set qiuhun[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC我要教郭靖兄弟九阴真经帮助他向蓉儿求婚，可是九阴真经突然找不到了|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2F九阴真经上下卷（九阴真经和九阴白骨爪）|r\n")
		else
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC帮我找到经书了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2F九阴真经上下卷（九阴真经和九阴白骨爪）|r\n")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0EK' then
		if ( xidujuexue[i] == 0 ) then
			set xidujuexue[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC我听说老毒物把他的绝学西毒棍法和蛤蟆功整理成书了，你能帮我找来么？|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2F蛤蟆功和西毒棍法|r\n")
		else
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC我听说老毒物把他的绝学西毒棍法和蛤蟆功整理成书了，你能帮我找来么？|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2FcFFADFF2F蛤蟆功和西毒棍法|r\n")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0AT' and udg_runamen[i] == 2 then
		if ( zhaoyangguo[i] == 0 ) then
			set zhaoyangguo[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC少侠如果见到过儿，把玉蜂交给他，他就知道我没有死了|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助小龙女找到|cFFADFF2F杨过|r\n")
			call unitadditembyidswapped('I0AU' , u)
		elseif ( zhaoyangguo[i] == 1 ) then
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC见到过儿了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助小龙女找到|cFFADFF2F杨过|r\n")
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC感谢少侠相助，帮我找到了过儿|r\n")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0AV' and udg_runamen[i] == 2 then
		if ( zhaoyangguo[i] == 0 ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你还没有到小龙女处接任务|r\n")
		elseif ( zhaoyangguo[i] == 1 ) then
			if UnitHaveItem(u , 'I0AU') then
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC太好了，姑姑没有死！谢谢少侠，这本残章送给你了|r\n")
				call RemoveItem(FetchUnitItem(u , 'I0AU'))
				call unitadditembyidswapped('I065' , u)
				set zhaoyangguo[i]=2
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC姑姑已经死去多年，哪里来的狂小子在胡言乱语|r\n")
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC感谢少侠相助，帮我找到了姑姑|r\n")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I09U' then
		if ( touxiao[i] == 0 ) then
			set touxiao[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC黄老邪把我关在这好久，天天吹箫烦死了，你能帮我把他的玉箫偷来吗？|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通偷到|cFFADFF2F玉箫|r\n")
		else
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC帮我偷到玉箫了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通偷到|cFFADFF2F玉箫|r\n")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I09L' then
		if GetUnitAbilityLevel(u, 'A0D1') >= 1 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你已经掌握此武功了")
		else
			if UnitHaveItem(u , 'I03I') and GetUnitAbilityLevel(u, 'A07S') >= 1 and wuxing[i] >= 35 then
				call RemoveItem(FetchUnitItem(u , 'I03I'))
				call unitadditembyidswapped('I09J' , u)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC看你资质不错，书的这几页就是摧坚神抓的修习法门|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你的条件不足|r\n")
			endif
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I0AW' and linganran[i] == 0 then
		if GetUnitAbilityLevel(u, 'A07G') >= 1 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC少侠，你已经掌握此武功了")
		else
			if fuyuan[i] >= 25 and wuxing[i] >= 25 then
				call unitadditembyidswapped('I039' , u)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC看你资质不错，这本黯然销魂掌的秘籍就给你了|r\n")
				set linganran[i]=1
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC少侠，你的条件不足|r\n")
			endif
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I09M' then
		if GetUnitAbilityLevel(u, 'A0D4') >= 1 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC年轻人，你已经掌握此武功了")
		else
			if UnitHaveItem(u , 'I02X') and yishu[i] >= 35 then
				call RemoveItem(FetchUnitItem(u , 'I02X'))
				call unitadditembyidswapped('I09H' , u)
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC看你资质不错，书的这几页就是医疗篇的修习法门|r\n")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC年轻人，你的条件不足|r\n")
			endif
		endif
		call ShowUnitHide(gg_unit_n00E_0066)
	endif
	set u=null
	set p=null
endfunction
function IsQiuHunWan takes nothing returns boolean
	return ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( ( qiuhun[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and UnitHaveItem(GetTriggerUnit() , 'I02X') and UnitHaveItem(GetTriggerUnit() , 'I03I') ) or ( touxiao[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and UnitHaveItem(GetTriggerUnit() , 'I0A1') ) or ( xidujuexue[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and UnitHaveItem(GetTriggerUnit() , 'I03C') and UnitHaveItem(GetTriggerUnit() , 'I03O') ) ) // INLINED!!
endfunction
function QiuHunWanCheng takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	//call BJDebugMsg("有没有？")
	if qiuhun[i] == 1 and UnitHaveItem(u , 'I02X') and UnitHaveItem(u , 'I03I') then
		set L7[i]=1
		loop
			exitwhen L7[i] > wugongshu[i]
			if ( I7[( i - 1 ) * 20 + L7[i]] != 'AEfk' ) then
				if L7[i] == wugongshu[i] then
					call RemoveItem(FetchUnitItem(u , 'I02X'))
					call RemoveItem(FetchUnitItem(u , 'I03I'))
					call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你找到了，不能让你白跑，我把这遗忘技能的法门传给你，今后你遗忘技能就不需要遗忘之石了|r\n")
					set udg_yiwang[i]=true
					set qiuhun[i]=0
					exitwhen true
				endif
			else
				call UnitAddAbility(u, 'A017')
				set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A017'
				call RemoveItem(FetchUnitItem(u , 'I02X'))
				call RemoveItem(FetchUnitItem(u , 'I03I'))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你找到了，不能让你白跑，我这七十二路空明拳传给你了|r\n")
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得空明拳")
				set qiuhun[i]=0
				exitwhen true
			endif
			set L7[i]=L7[i] + 1
		endloop
	elseif xidujuexue[i] == 1 and UnitHaveItem(u , 'I03C') and UnitHaveItem(u , 'I03O') then
		set xidujuexue[i]=0
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被找到了|r\n")
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC这个铁掌令是我上次和裘千仞老儿过招的时候得到的，就送给你了吧|r\n")
		call unitadditembyidswapped('I0EJ' , u)
		call RemoveItem(FetchUnitItem(u , 'I03O'))
		call RemoveItem(FetchUnitItem(u , 'I03C'))
	elseif touxiao[i] == 1 and UnitHaveItem(u , 'I0A1') then
		set L7[i]=1
		loop
			exitwhen L7[i] > wugongshu[i]
			if ( I7[( i - 1 ) * 20 + L7[i]] != 'AEfk' ) then
				if L7[i] == wugongshu[i] then
					call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你学的武功太多了，遗忘一些再过来找我吧|r\n")
					exitwhen true
				endif
			else
				call UnitAddAbility(u, 'A018')
				set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A018'
				call RemoveItem(FetchUnitItem(u , 'I0A1'))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你偷到了，不能让你白跑，我把从黄老邪那偷学的碧海潮生曲传给你|r\n")
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得碧海潮生曲")
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC这把玉箫其实是一把难得的神器，就送给你了吧|r\n")
				call unitadditembyidswapped('I09D' , u)
				set touxiao[i]=0
				exitwhen true
			endif
			set L7[i]=L7[i] + 1
		endloop
	endif
	set u=null
	set p=null
endfunction
//---------帮郭靖求婚结束
//-------任务系统-------
//鲁有脚送信任务
function QJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895898 ) ) // INLINED!!
endfunction
function RJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 3 ) ) then
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000你无法再接取此任务了")
	else
		if ( ( jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
			if ( ( GetRandomInt(1, 100) <= 35 ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
				set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
				call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F黄蓉|r\n")
				call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				if ( ( GetRandomInt(1, 70) <= 35 ) ) then
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Xe))
					set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2
					call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F达摩祖师|r\n")
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Pe))
					call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F郭靖\n")
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				endif
			endif
		else
			if ( ( jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Bg))
				call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F黄蓉|r\n")
				call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				if ( ( jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Xe))
					call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F达摩祖师|r\n")
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Pe))
						call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F郭靖\n")
						call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
					endif
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function TJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( jd[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 1 ) ) // INLINED!!
endfunction
function UJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( GetRandomInt(1, 50) <= 25 ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 0 , 0 , 500)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、生命+500\n")
	else
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 0 , $C8)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、攻击+200")
		else
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , 30)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、防御+30\n")
		endif
	endif
	if ( ( GetRandomInt(1, 50) <= 40 ) ) then
		call unitadditembyidswapped(YaoCao[5] , GetTriggerUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	endif
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	set kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 60)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function WJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( jd[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 2 ) ) // INLINED!!
endfunction
function XJ takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( GetRandomInt(1, 50) <= 25 ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 0 , 0 , 500)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、生命+500\n")
	else
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 0 , $C8)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、攻击+200")
		else
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , 30)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、防御+30\n")
		endif
	endif
	if ( ( GetRandomInt(1, 50) <= 40 ) ) then
		call unitadditembyidswapped(YaoCao[5] , GetTriggerUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	endif
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	set kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 60)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function ZJ takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( jd[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 3 ) ) // INLINED!!
endfunction
function dK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( GetRandomInt(1, 50) <= 25 ) ) then
		call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 0 , 0 , 500)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、生命+500\n")
	else
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 0 , $C8)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、攻击+200")
		else
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , 30)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得经验+3000、江湖声望+60、防御+30\n")
		endif
	endif
	if ( ( GetRandomInt(1, 50) <= 40 ) ) then
		call unitadditembyidswapped(YaoCao[5] , GetTriggerUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	endif
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	set jd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	set kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( kd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 60)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function fK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895352 ) ) // INLINED!!
endfunction
//击杀野猪首领
function gK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( e8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Se))
		set e8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00耶律齐：|r |cFF99FFCC我一生酷爱打猎，平时有时间就会出来试试身手，你愿意一同前往吗|r\n|cFFFFCC00提示：|r |cFF99FFCC击杀山林中的|cFFADFF2F野猪首领|r\n")
		call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	else
		if ( ( e8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Se))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC击杀山林中的|cFFADFF2F野猪首领|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function iK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895353 ) ) // INLINED!!
endfunction
//林远图押镖任务
function jK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		if ( ( GetRandomInt(1, 70) <= $A ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Te))
			set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
			call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给全真教的丘掌门吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教的|cFFADFF2F丘处机|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			if ( ( GetRandomInt(1, 60) <= $A ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ue))
				set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2
				call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC全真教山下附近的豺狼经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教山下的杀死10只|cFFADFF2F豺狼|r\n")
				call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				if ( ( GetRandomInt(1, 50) <= $A ) ) then
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ve))
					set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=3
					call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给燕子坞的慕容复吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的|cFFADFF2F慕容复|r\n")
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( GetRandomInt(1, 40) <= $A ) ) then
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(We))
						set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=4
						call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC燕子坞的蝎子王经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的杀死3只|cFFADFF2F蝎子王|r\n")
						call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
					else
						if ( ( GetRandomInt(1, 30) <= $A ) ) then
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Xe))
							set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=5
							call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给少林寺的达摩祖师吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F达摩祖师|r\n")
							call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						else
							if ( ( GetRandomInt(1, 20) <= $A ) ) then
								call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ye))
								set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=6
								call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
								call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给雁门关的乔峰吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往雁门关的|cFFADFF2F乔峰|r\n")
								call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
								call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							else
								set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=7
								call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Je))
								call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
								call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC西域邪教持续骚扰我中原武林，是时候给他们一点颜色了|r\n|cFFFFCC00提示：|r |cFF99FFCC守住武林正派，杀死10只|cFFADFF2F进攻的西域教徒|r\n")
								call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
								call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							endif
						endif
					endif
				endif
			endif
		endif
	else
		if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Te))
			call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给全真教的邱掌门吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教的|cFFADFF2F丘处机|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
				call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ue))
				call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC全真教山下附近的豺狼经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教山下的杀死10只|cFFADFF2F豺狼|r\n")
				call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
			else
				if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 3 ) ) then
					call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ve))
					call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给燕子坞的慕容复吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的|cFFADFF2F慕容复|r\n")
					call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
					call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
				else
					if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 4 ) ) then
						call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(We))
						call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC燕子坞的蝎子王经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的杀死5只|cFFADFF2F蝎子王|r\n")
						call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
						call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
					else
						if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 5 ) ) then
							call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Xe))
							call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
							call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给少林寺的达摩祖师吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F达摩祖师|r\n")
							call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
							call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
						else
							if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 6 ) ) then
								call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Ye))
								call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
								call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给雁门关的乔峰吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往雁门关的|cFFADFF2F乔峰|r\n")
								call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
								call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
							else
								if ( ( g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 7 ) ) then
									call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Je))
									call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
									call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC西域邪教持续骚扰我中原武林，是时候给他们一点颜色了|r\n|cFFFFCC00提示：|r |cFF99FFCC守住武林正派，杀死10只|cFFADFF2F进攻的西域教徒|r\n")
									call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
									call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
								endif
							endif
						endif
					endif
				endif
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function mK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 1 ) ) // INLINED!!
endfunction
function nK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
	set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
		call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function pK takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'ngns' ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] == 2 ) )
endfunction
function qK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetKillingUnit())
	set h8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( h8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( h8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= $A ) ) then
		set h8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
		set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
		call AddHeroXP(GetKillingUnit(), 3000, true)
		set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
			call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "豺狼：" + ( I2S(h8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function sK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 3 ) ) // INLINED!!
endfunction
function tK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
	set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
		call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function vK takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 'nanb' ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] == 4 ) )
endfunction
function wK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set i8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( i8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( i8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 3 ) ) then
		set i8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
		set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
		call AddHeroXP(GetKillingUnit(), 3000, true)
		if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
			call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "蝎子王：" + ( I2S(i8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 3" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function yK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 5 ) ) // INLINED!!
endfunction
function zK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
	set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
		call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function aK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 6 ) ) // INLINED!!
endfunction
function BK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
	set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
	call AddHeroXP(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0), 3000, true)
	set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
		call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function CK takes nothing returns boolean
	return GetKillingUnit() != null and ( ( g8[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] == 7 ) )
endfunction
function cK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set j8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( j8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( j8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= $A ) ) then
		set j8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+50，经验值+3000")
		set g8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 50)
		call AddHeroXP(GetKillingUnit(), 3000, true)
		set qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
		if ( ( GetRandomInt(1, 35) <= ( fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] - 5 ) ) ) then
			call unitadditembyidswapped(gudong[GetRandomInt(1, 3)] , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "西域邪教：" + ( I2S(j8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function EK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895364 ) ) // INLINED!!
endfunction
function FK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( qd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 3 ) ) then
		if ( ( o8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == false ) ) then
			if ( ( GetRandomInt(1, 100) <= 25 ) ) then
				call unitadditembyidswapped('I01U' , GetTriggerUnit())
				set o8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
				call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem) ))
			else
				if ( ( GetRandomInt(1, 60) <= 20 ) ) then
					call unitadditembyidswapped('I01Z' , GetTriggerUnit())
					set o8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
					call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
					call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem) ))
				else
					if ( ( GetRandomInt(1, 60) <= 30 ) ) then
						call unitadditembyidswapped(1227895124 , GetTriggerUnit())
						set o8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
						call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem) ))
					else
						call unitadditembyidswapped(1227895109 , GetTriggerUnit())
						set o8[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=true
						call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
						call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem) ))
					endif
				endif
			endif
			call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
			if ( ( GetRandomInt(1, $B4) <= $A ) ) then
				call createitemloc(1227895627 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, $AA) <= $A ) ) then
					call createitemloc(1227895385 , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, $A0) <= $A ) ) then
						call createitemloc('I03D' , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						if ( ( GetRandomInt(1, $96) <= $A ) ) then
							call createitemloc(1227895382 , LoadLocationHandle(YDHT, id * cx, $1769D332))
						else
							if ( ( GetRandomInt(1, $8C) <= $A ) ) then
								call createitemloc(1227895624 , LoadLocationHandle(YDHT, id * cx, $1769D332))
							else
								if ( ( GetRandomInt(1, $82) <= $A ) ) then
									call createitemloc(1227895621 , LoadLocationHandle(YDHT, id * cx, $1769D332))
								else
									if ( ( GetRandomInt(1, 120) <= $A ) ) then
										call createitemloc(1227895603 , LoadLocationHandle(YDHT, id * cx, $1769D332))
									else
										if ( ( GetRandomInt(1, 110) <= $A ) ) then
											call createitemloc('I02W' , LoadLocationHandle(YDHT, id * cx, $1769D332))
										else
											if ( ( GetRandomInt(1, 100) <= $A ) ) then
												call createitemloc(1227895601 , LoadLocationHandle(YDHT, id * cx, $1769D332))
											else
												if ( ( GetRandomInt(1, 90) <= $A ) ) then
													call createitemloc('I03G' , LoadLocationHandle(YDHT, id * cx, $1769D332))
												else
													if ( ( GetRandomInt(1, 80) <= $A ) ) then
														call createitemloc('I02U' , LoadLocationHandle(YDHT, id * cx, $1769D332))
													else
														if ( ( GetRandomInt(1, 70) <= $A ) ) then
															call createitemloc(1227895626 , LoadLocationHandle(YDHT, id * cx, $1769D332))
														else
															if ( ( GetRandomInt(1, 60) <= $A ) ) then
																call createitemloc('I030' , LoadLocationHandle(YDHT, id * cx, $1769D332))
															else
																if ( ( GetRandomInt(1, 50) <= $A ) ) then
																	call createitemloc('I02X' , LoadLocationHandle(YDHT, id * cx, $1769D332))
																else
																	if ( ( GetRandomInt(1, 40) <= $A ) ) then
																		call createitemloc('I03I' , LoadLocationHandle(YDHT, id * cx, $1769D332))
																	else
																		if ( ( GetRandomInt(1, 30) <= $A ) ) then
																			call createitemloc('I02Z' , LoadLocationHandle(YDHT, id * cx, $1769D332))
																		else
																			if ( ( GetRandomInt(1, 20) <= $A ) ) then
																				call createitemloc('I03L' , LoadLocationHandle(YDHT, id * cx, $1769D332))
																			else
																				call createitemloc('I03F' , LoadLocationHandle(YDHT, id * cx, $1769D332))
																			endif
																		endif
																	endif
																endif
															endif
														endif
													endif
												endif
											endif
										endif
									endif
								endif
							endif
						endif
					endif
				endif
			endif
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00获得" + GetItemName(bj_lastCreatedItem) ))
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC你已经领过奖励了\n")
		endif
	else
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC需要完成至少3次押镖任务才可以领取奖励哦")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//接杀熊、桃花岛哑仆的任务
function HK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896132 or GetItemTypeId(GetManipulatedItem()) == 'I09W' ) ) // INLINED!!
endfunction
function IK takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= null
	if GetItemTypeId(GetManipulatedItem()) == 1227896132 then
		if ( ( rd[i] == 0 ) ) then
			set loc=GetRectCenter(Nf)
			set rd[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00胡斐：|r |cFF99FFCC这一代时常有熊出没，能搞点熊皮来的话应该可以卖个好价钱|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F30只熊|r\n")
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		elseif ( ( rd[i] == 1 ) ) then
			set loc=GetRectCenter(Nf)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00胡斐：|r |cFF99FFCC这一代时常有熊出没，能搞点熊皮来的话应该可以卖个好价钱|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F30只熊|r\n")
			call PingMinimapLocForForce(ov(p), loc, 5.)
			call RemoveLocation(loc)
		elseif ( ( rd[i] == 2 ) ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFfff0000这个任务你已经完成过了")
		endif
	elseif GetItemTypeId(GetManipulatedItem()) == 'I09W' then
		if ( ( LoadInteger(YDHT, StringHash("哑仆任务"), i) == 0 ) ) then
			call SaveInteger(YDHT, StringHash("哑仆任务"), i, 1)
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC黄老邪把我腿打断的时候，桃花岛上的哑仆一直欺负我，你能帮我杀掉十个哑仆吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F十个哑仆|r\n")
		elseif ( ( LoadInteger(YDHT, StringHash("哑仆任务"), i) == 1 ) ) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC杀掉十个哑仆了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F十个哑仆|r\n")
		endif
	endif
	set u=null
	set p=null
	set loc=null
endfunction
//升10级自动奖励丹药
function PK takes nothing returns boolean
	return ( GetTriggerUnit() == udg_hero[1] or GetTriggerUnit() == udg_hero[2] or GetTriggerUnit() == udg_hero[3] or GetTriggerUnit() == udg_hero[4] or GetTriggerUnit() == udg_hero[5] ) and GetUnitLevel(GetTriggerUnit()) == 10 and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER
endfunction
function QK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	if ( ( GetRandomInt(1, 60) <= $A ) ) then
		call unitadditembyidswapped(1227895375 , GetTriggerUnit())
	else
		if ( ( GetRandomInt(1, 50) <= $A ) ) then
			call unitadditembyidswapped(1227895370 , GetTriggerUnit())
		else
			if ( ( GetRandomInt(1, 40) <= $A ) ) then
				call unitadditembyidswapped(1227895363 , GetTriggerUnit())
			else
				if ( ( GetRandomInt(1, 30) <= $A ) ) then
					call unitadditembyidswapped(1227895368 , GetTriggerUnit())
				else
					if ( ( GetRandomInt(1, 60) <= 30 ) ) then
						call unitadditembyidswapped(1227895369 , GetTriggerUnit())
					else
						call unitadditembyidswapped(1227895365 , GetTriggerUnit())
					endif
				endif
			endif
		endif
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00恭喜升到10级，获得" + GetItemName(bj_lastCreatedItem) ))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//采集断肠草
function SK takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895890 ) ) // INLINED!!
endfunction
function TK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Gg))
		set z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00公孙绿萼：|r |cFF99FFCC杨过中了情花剧毒，你能替我想想办法救救他吗|r\n|cFFFFCC00提示：|r |cFF99FFCC采集绝情谷副本中的|cFFADFF2F断肠草|r\n")
		call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	else
		if ( ( z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(Gg))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC采集绝情谷副本的|cFFADFF2F断肠草|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//采集到断肠草
function VK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	if ( ( GetItemTypeId(GetEnumItem()) == 'I04S' ) ) then
		call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $5E9EB4B3, ( LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $5E9EB4B3) + 1 ))
		set a9[LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $5E9EB4B3)]=GetEnumItem()
		set B9[LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $5E9EB4B3)]=GetItemLoc(GetEnumItem())
	endif
endfunction
function WK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, 0)
	call EnumItemsInRectBJ(Gg, function VK)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//断肠草
function YK takes nothing returns boolean
	return ( ( GetItemTypeId(GetManipulatedItem()) == 'I04S' ) )
endfunction
function ZK takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call SaveItemHandle(YDHT, id * cx, $1769D332, GetManipulatedItem())
	if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) == false ) ) then // INLINED!!
		set bj_forLoopAIndex=1
		set bj_forLoopAIndexEnd=12
		loop
			exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
			if ( ( GetManipulatedItem() == a9[bj_forLoopAIndex] ) ) then
				call createitemloc('I04S' , B9[bj_forLoopAIndex])
				set a9[bj_forLoopAIndex]=bj_lastCreatedItem
				call DisplayTimedTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, 15., "|CFFFF0000只能由主角来采集")
			endif
			set bj_forLoopAIndex=bj_forLoopAIndex + 1
		endloop
	else
		if ( ( z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			set A9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( A9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
			if ( ( A9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= $A ) ) then
				set z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2
				set A9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务请前往公孙绿萼换取奖励")
			else
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "断肠草：" + ( I2S(A9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]) + " / 10" ) ))
			endif
			call CreateNUnitsAtLoc(1, 1752196449, Player(15), v7[1], bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', GetRandomReal(20., 25.))
			set bj_forLoopAIndex=1
			set bj_forLoopAIndexEnd=12
			loop
				exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
				if ( ( LoadItemHandle(YDHT, id * cx, $1769D332) == a9[bj_forLoopAIndex] ) ) then
					set b9[bj_forLoopAIndex]=bj_lastCreatedUnit
				endif
				set bj_forLoopAIndex=bj_forLoopAIndex + 1
			endloop
		else
			set bj_forLoopAIndex=1
			set bj_forLoopAIndexEnd=12
			loop
				exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
				if ( ( LoadItemHandle(YDHT, id * cx, $1769D332) == a9[bj_forLoopAIndex] ) ) then
					call createitemloc('I04S' , B9[bj_forLoopAIndex])
					set a9[bj_forLoopAIndex]=bj_lastCreatedItem
					call DisplayTimedTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, 15., "|CFFFF0000身上没有该任务或已经完成了")
				endif
				set bj_forLoopAIndex=bj_forLoopAIndex + 1
			endloop
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//完成断肠草任务
function eL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( z9[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 2 ) ) // INLINED!!
endfunction
function fL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call PlaySoundOnUnitBJ(Hh, 100, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	set z9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 100)
	if ( ( GetRandomInt(1, 40) <= 20 ) ) then
		call unitadditembyidswapped('I00X' , GetTriggerUnit())
	else
		call unitadditembyidswapped('I00Y' , GetTriggerUnit())
	endif
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00完成任务江湖声望+100，并获得" + GetItemName(bj_lastCreatedItem) ))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function hL takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1752196449 ) )
endfunction
function iL takes nothing returns nothing
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=12
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( ( GetTriggerUnit() == b9[bj_forLoopAIndex] ) ) then
			call createitemloc('I04S' , B9[bj_forLoopAIndex])
			set a9[bj_forLoopAIndex]=bj_lastCreatedItem
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
endfunction
//护送耶律楚材
function kL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896387 ) ) // INLINED!!
endfunction
function mL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( Sd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(gh))
		set Sd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00完颜萍：|r |cFF99FFCC耶律楚材受伤了，你能帮个忙啊|r\n|cFFFFCC00提示：|r |cFF99FFCC护送耶律楚材回|cFFADFF2F大辽国|r\n")
		call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
		call SaveLocationHandle(YDHT, id * cx, 1231311908, GetRectCenter(hh))
		call CreateNUnitsAtLoc(1, 1853254706, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1231311908), bj_UNIT_FACING)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0012, LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1231311908))
	else
		if ( ( Sd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(gh))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC护送耶律楚材回|cFFADFF2F大辽国|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00你已经完成了这个任务了（不可重复接取）")
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function oL takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853254706 ) )
endfunction
function pL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetTriggerPlayer()) ))
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFF0000任务失败了")
	set Sd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function rL takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1853254706 ) )
endfunction
function sL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call PlaySoundOnUnitBJ(Hh, 100, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )])
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	set Sd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=2
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 150)
	set juexuelingwu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( juexuelingwu[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	call RemoveUnit(GetTriggerUnit())
	call commonAddGold(GetOwningPlayer(GetTriggerUnit()) , $7530)
	call commonAddLumber(GetOwningPlayer(GetTriggerUnit()) , 20)
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务江湖声望+150，并获得金钱+30000、稀有币+20、绝学领悟力+1")
	call ShowUnitShow(gg_unit_nvl2_0005)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//高昌迷宫任务
function uL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896388 ) ) // INLINED!!
endfunction
function vL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	if ( ( Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 0 ) ) then
		call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(xg))
		set Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=1
		call PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00苗人凤：|r |cFF99FFCC很多武林恶势力犯事之后都躲到了高昌迷宫里|r\n|cFFFFCC00提示：|r |cFF99FFCC分别杀死|cFFADFF2F10个门派叛徒和武林恶徒|r\n")
		call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	else
		if ( ( Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 1 ) ) then
			call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetRectCenter(xg))
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFFFFCC00苗人凤：|r |cFF99FFCC很多武林恶势力犯事之后都躲到了高昌迷宫里|r\n|cFFFFCC00提示：|r |cFF99FFCC分别杀死|cFFADFF2F10个门派叛徒和武林恶徒|r\n")
			call PingMinimapLocForForce(ov(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) ))), LoadLocationHandle(YDHT, id * cx, $5E83114F), 5.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
		else
			if ( ( Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] == 2 ) ) then
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|cFfff0000这个任务你无法再接取了")
			endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
// 完成高昌迷宫任务
function xL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( Td[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 1 ) and ( Vd[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == $A ) and ( Ud[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == $A ) ) // INLINED!!
endfunction
function yL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	// 号令初始爆率
 local integer gailv= 18
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	// 自由号令爆率提高
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 11 then
		set gailv=gailv + 20
	endif
	if GetRandomInt(1, 100) <= gailv + fuyuan[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
		// 号令I06F
		call unitadditembyidswapped(1227896390 , GetTriggerUnit())
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00运气不错，送你一个号令天下令牌\n")
	endif
	if ( ( GetRandomInt(1, 50) <= fuyuan[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] ) ) then
		call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
		if ( ( GetRandomInt(1, 100) <= $A ) ) then
			call createitemloc(1227896370 , LoadLocationHandle(YDHT, id * cx, $1769D332))
		else
			if ( ( GetRandomInt(1, 90) <= $A ) ) then
				call createitemloc(1227896371 , LoadLocationHandle(YDHT, id * cx, $1769D332))
			else
				if ( ( GetRandomInt(1, 80) <= $A ) ) then
					call createitemloc(1227896369 , LoadLocationHandle(YDHT, id * cx, $1769D332))
				else
					if ( ( GetRandomInt(1, 70) <= $A ) ) then
						call createitemloc(1227896374 , LoadLocationHandle(YDHT, id * cx, $1769D332))
					else
						if ( ( GetRandomInt(1, 60) <= $A ) ) then
							call createitemloc(1227896372 , LoadLocationHandle(YDHT, id * cx, $1769D332))
						else
							if ( ( GetRandomInt(1, 50) <= $A ) ) then
								call createitemloc(1227896368 , LoadLocationHandle(YDHT, id * cx, $1769D332))
							else
								if ( ( GetRandomInt(1, 40) <= $A ) ) then
									call createitemloc(1227896377 , LoadLocationHandle(YDHT, id * cx, $1769D332))
								else
									if ( ( GetRandomInt(1, 30) <= $A ) ) then
										call createitemloc(1227896376 , LoadLocationHandle(YDHT, id * cx, $1769D332))
									else
										if ( ( GetRandomInt(1, 20) <= $A ) ) then
											call createitemloc(1227896375 , LoadLocationHandle(YDHT, id * cx, $1769D332))
										else
											call createitemloc('I065' , LoadLocationHandle(YDHT, id * cx, $1769D332))
										endif
									endif
								endif
							endif
						endif
					endif
				endif
			endif
		endif
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+200和绝学隐藏招式残章一本\n")
		set Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	else
		call SaveLocationHandle(YDHT, id * cx, $1769D332, GetUnitLoc(GetTriggerUnit()))
		call createitemloc(gudong[GetRandomInt(4, 9)] , LoadLocationHandle(YDHT, id * cx, $1769D332))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $1769D332))
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "|CFF34FF00完成任务获得江湖声望+200和古董一个")
		set Td[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	endif
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 200)
	set Vd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	set Ud[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//辽国第一先锋任务+拯救阿紫任务
function AL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896389 or GetItemTypeId(GetManipulatedItem()) == 'I0AN' ) ) // INLINED!!
endfunction
function aL takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local location loc= GetRectCenter(mh)
	if ( GetItemTypeId(GetManipulatedItem()) == 1227896389 ) then
		if ( Wd[i] == 0 ) then
			set Wd[i]=1
			call PlaySoundOnUnitBJ(bh, 100, u)
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC最近辽国养兵蓄锐，似乎对大宋有所企图，若能擒住辽国第一先锋，百姓才能避免战祸|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F辽国第一先锋|r\n")
			call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS, loc, 5.)
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC最近辽国养兵蓄锐，似乎对大宋有所企图，若能擒住辽国第一先锋，百姓才能避免战祸|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F辽国第一先锋|r\n")
			call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS, loc, 5.)
			call RemoveLocation(loc)
		endif
	else
		if jiuazi[i] == 0 then
			if udg_runamen[i] == 10 then
				set jiuazi[i]=1
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC阿紫被丁老头抓走了，请英雄帮我击败丁春秋，救出阿紫|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F丁春秋|r\n")
			else
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC你不是星宿派中人，无法接此任务|r\n")
			endif
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC你已完成任务|r\n")
		endif
	endif
	set u=null
	set loc=null
endfunction
function bL takes nothing returns boolean
	return ( ( GetUnitTypeId(GetTriggerUnit()) == 1751543663 ) or ( GetUnitTypeId(GetTriggerUnit()) == 'odkt' ) or ( GetUnitTypeId(GetTriggerUnit()) == 'h00J' ) )
endfunction
function CL takes nothing returns nothing
 local player p= GetOwningPlayer(GetKillingUnit())
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(GetTriggerUnit())
	if GetUnitTypeId(GetTriggerUnit()) == 1751543663 and GetOwningPlayer(GetTriggerUnit()) == Player(12) then
		if ( ( Wd[i] == 1 ) ) then
			set Wd[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00恭喜击破辽国第一先锋，你可以回去领奖励了")
		elseif ( ( Wd[i] == 2 ) ) then
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你已经杀过这个怪了，还是先回去交任务把")
		endif
	elseif GetUnitTypeId(GetTriggerUnit()) == 'odkt' then
		if jiuazi[i] == 1 then
			set jiuazi[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00击败丁春秋，阿紫现身")
			call CreateNUnitsAtLoc(1, 'h00J', Player(12), loc, bj_UNIT_FACING)
		endif
	elseif GetUnitTypeId(GetTriggerUnit()) == 'h00J' then
		call createitemloc('I0AM' , loc)
		call SetItemUserData(bj_lastCreatedItem, GetRandomInt(1, 5) * $989680 + GetRandomInt(1, 5) * $F4240 + GetRandomInt(1, 5) * $186A0 + GetRandomInt(1, 5) * $2710)
		call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00击败阿紫，获得神木王鼎")
	endif
	call RemoveLocation(loc)
	set p=null
	set loc=null
endfunction
// 完成辽国军心任务
function DL takes nothing returns boolean
	return ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( Wd[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] == 2 ) ) // INLINED!!
endfunction
function EL takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
	call PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call unitadditembyidswapped(YaoCao[4] , GetTriggerUnit())
	if ( ( GetRandomInt(1, 75) <= 25 ) ) then
		//遗忘石
		call unitadditembyidswapped('I06K' , GetTriggerUnit())
	else
		if ( ( GetRandomInt(1, 50) <= 25 ) ) then
			//打孔符
			call unitadditembyidswapped('I06N' , GetTriggerUnit())
		else
			//神偷令
			call unitadditembyidswapped('I06I' , GetTriggerUnit())
		endif
	endif
	//三分之一概率双倍掉落
	if ( GetRandomInt(1, 3) == 1 ) then
		if ( ( GetRandomInt(1, 75) <= 25 ) ) then
			//遗忘石
			call unitadditembyidswapped('I06K' , GetTriggerUnit())
		else
			if ( ( GetRandomInt(1, 50) <= 25 ) ) then
				//打孔符
				call unitadditembyidswapped('I06N' , GetTriggerUnit())
			else
				//神偷令
				call unitadditembyidswapped('I06I' , GetTriggerUnit())
			endif
		endif
	endif
	call commonAddReputation(GetOwningPlayer(GetTriggerUnit()) , 250)
	set Wd[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
	call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, ( "|CFF34FF00完成任务获得江湖声望+250，金银花一个和" + GetItemName(bj_lastCreatedItem) ))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function Tasks_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	
	set bigTalent[1]=0
	set bigTalent[2]=0
	set bigTalent[3]=0
	set bigTalent[4]=0
	set bigTalent[5]=0
	
	set Fo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Fo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Fo, Condition(function IJ))
	call TriggerAddAction(Fo, function lJ)
	set Go=CreateTrigger()
	call TriggerAddRect(Go , Pe)
	call TriggerAddCondition(Go, Condition(function KJ))
	call TriggerAddAction(Go, function LJ)
	set Jn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Jn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Jn, Condition(function TI))
	call TriggerAddAction(Jn, function UI)
	set Ho=CreateTrigger()
	call TriggerAddRect(Ho , Re)
	call TriggerAddRect(Ho , Ie)
	call TriggerAddRect(Ho , le)
	call TriggerAddCondition(Ho, Condition(function NJ))
	call TriggerAddAction(Ho, function OJ)
	
	// 武功秘籍兑换
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isBuyWuGongBook))
	call TriggerAddAction(t, function buyWuGongBook)
	
	// 速战速决任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsQuickFight))
	call TriggerAddAction(t, function QuickFight)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(t, Condition(function IsJiaSuChuGuai))
	call TriggerAddAction(t, function JiaSuChuGuai)
	set t=CreateTrigger()
	// 猪年杀猪任务
	// call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
	// call TriggerAddCondition(t,Condition(function IsKillYang))
	// call TriggerAddAction(t,function KillYang)
	// 等级福利
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsLevelReward))
	call TriggerAddAction(t, function LevelReward)
	// 积分商店
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isJfShop))
	call TriggerAddAction(t, function jfShop)
	// 积分商店2
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isJfShop2))
	call TriggerAddAction(t, function jfShop2)
	// 杀人系统
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsWuPin))
	call TriggerAddAction(t, function LookForWuPin)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsFangQiWuPin))
	call TriggerAddAction(t, function FangQiWuPin)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsWanChengWuPin))
	call TriggerAddAction(t, function WanChengWuPin)
	// 寻宝系统
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsYangShou))
	call TriggerAddAction(t, function KillYangShou)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsFangQiYangShou))
	call TriggerAddAction(t, function FangQiYangShou)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function IsWanChengYangShou))
	call TriggerAddAction(t, function WanChengYangShou)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsQiuHun))
	call TriggerAddAction(t, function QiuHun_Action)
	set t=CreateTrigger()
	call TriggerAddRect(t , botong)
	call TriggerAddCondition(t, Condition(function IsQiuHunWan))
	call TriggerAddAction(t, function QiuHunWanCheng)
	set Io=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Io, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Io, Condition(function QJ))
	call TriggerAddAction(Io, function RJ)
	set lo=CreateTrigger()
	call TriggerAddRect(lo , Bg)
	call TriggerAddCondition(lo, Condition(function TJ))
	call TriggerAddAction(lo, function UJ)
	set Jo=CreateTrigger()
	call TriggerAddRect(Jo , Xe)
	call TriggerAddCondition(Jo, Condition(function WJ))
	call TriggerAddAction(Jo, function XJ)
	set Ko=CreateTrigger()
	call TriggerAddRect(Ko , Pe)
	call TriggerAddCondition(Ko, Condition(function ZJ))
	call TriggerAddAction(Ko, function dK)
	set Lo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Lo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Lo, Condition(function fK))
	call TriggerAddAction(Lo, function gK)
	set Mo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Mo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Mo, Condition(function iK))
	call TriggerAddAction(Mo, function jK)
	set No=CreateTrigger()
	call TriggerAddRect(No , Te)
	call TriggerAddCondition(No, Condition(function mK))
	call TriggerAddAction(No, function nK)
	set Oo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Oo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Oo, Condition(function pK))
	call TriggerAddAction(Oo, function qK)
	set Po=CreateTrigger()
	call TriggerAddRect(Po , Ve)
	call TriggerAddCondition(Po, Condition(function sK))
	call TriggerAddAction(Po, function tK)
	set Qo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Qo, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Qo, Condition(function vK))
	call TriggerAddAction(Qo, function wK)
	set Ro=CreateTrigger()
	call TriggerAddRect(Ro , Xe)
	call TriggerAddCondition(Ro, Condition(function yK))
	call TriggerAddAction(Ro, function zK)
	set So=CreateTrigger()
	call TriggerAddRect(So , Ye)
	call TriggerAddCondition(So, Condition(function aK))
	call TriggerAddAction(So, function BK)
	// 杀10个西域邪教单位
	set To=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(To, Player(6), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(To, Condition(function CK))
	call TriggerAddAction(To, function cK)
	// 押镖三次奖励
	set Uo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Uo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Uo, Condition(function EK))
	call TriggerAddAction(Uo, function FK)
	//接杀熊、桃花岛哑仆的任务
	set Vo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Vo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Vo, Condition(function HK))
	call TriggerAddAction(Vo, function IK)
	
	//升10级自动奖励丹药
	set Yo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Yo, EVENT_PLAYER_HERO_LEVEL)
	call TriggerAddCondition(Yo, Condition(function PK))
	call TriggerAddAction(Yo, function QK)
	// 接断肠草任务
	set Zo=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Zo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Zo, Condition(function SK))
	call TriggerAddAction(Zo, function TK)
	// 生成断肠草
	set dp=CreateTrigger()
	call TriggerRegisterTimerEventSingle(dp, 1.)
	call TriggerAddAction(dp, function WK)
	// 采集到断肠草
	set ep=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(ep, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(ep, Condition(function YK))
	call TriggerAddAction(ep, function ZK)
	// 完成断肠草任务
	set fp=CreateTrigger()
	call TriggerAddRect(fp , lg)
	call TriggerAddCondition(fp, Condition(function eL))
	call TriggerAddAction(fp, function fL)
	// 重新生成断肠草
	set gp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gp, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(gp, Condition(function hL))
	call TriggerAddAction(gp, function iL)
	// 护送耶律楚材任务
	set hp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(hp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(hp, Condition(function kL))
	call TriggerAddAction(hp, function mL)
	// 护送耶律楚材任务失败
	set jp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(jp, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(jp, Condition(function oL))
	call TriggerAddAction(jp, function pL)
	// 完成护送耶律楚材任务
	set kp=CreateTrigger()
	call TriggerAddRect(kp , gh)
	call TriggerAddCondition(kp, Condition(function rL))
	call TriggerAddAction(kp, function sL)
	// 高昌迷宫任务
	set mp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(mp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(mp, Condition(function uL))
	call TriggerAddAction(mp, function vL)
	// 完成高昌迷宫任务
	set np=CreateTrigger()
	call TriggerAddRect(np , kh)
	call TriggerAddCondition(np, Condition(function xL))
	call TriggerAddAction(np, function yL)
	//辽国第一先锋任务+拯救阿紫任务
	set op=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(op, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(op, Condition(function AL))
	call TriggerAddAction(op, function aL)
	// 击败辽国第一先锋、丁春秋、阿紫
	set pp=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(pp, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(pp, Condition(function bL))
	call TriggerAddAction(pp, function CL)
	// 完成辽国军心任务
	set qp=CreateTrigger()
	call TriggerAddRect(qp , Ye)
	call TriggerAddCondition(qp, Condition(function DL))
	call TriggerAddAction(qp, function EL)
	
	// 狼皮任务
	
	// 完成狼皮任务
	set t=CreateTrigger()
	// -4885,424
	// 1939,-2738
	call TriggerAddRect(t , Rect(1768., - 2500., 2088., - 2826.))
	// call TriggerAddRect(t,Rect(-5056.,192.,-4736.,512.))
	call TriggerAddCondition(t, Condition(function isFinishWolfSkin))
	call TriggerAddAction(t, function finishWolfSkin)
	
	// 倚天剑任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsYiTian))
	call TriggerAddAction(t, function YiTian)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function IsWanChengYiTian))
	call TriggerAddAction(t, function WanChengYiTian)
	
	// 全真专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isQuanZhenOnly))
	call TriggerAddAction(t, function quanZhenOnly)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isLcyAndWcy))
	call TriggerAddAction(t, function lcyAndWcy)
	
	// 慕容专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isMuRongOnly))
	call TriggerAddAction(t, function muRongOnly)
	
	// 恒山专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isHengShanOnly))
	call TriggerAddAction(t, function hengShanOnly)
	
	// 华山专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isHuaShanOnly))
	call TriggerAddAction(t, function huaShanOnly)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isLingHuChongDeath))
	call TriggerAddAction(t, function lingHuChongDeath)
	
	// 神龙教专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isShenLongOnly))
	call TriggerAddAction(t, function shenLongOnly)
	
	// 衡山派专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isHengShan2Only))
	call TriggerAddAction(t, function hengShan2Only)
	
	// 泰山派专属任务
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function isTaiShanOnly))
	call TriggerAddAction(t, function taiShanOnly)
	
	set t=null
endfunction

// 本局开放五个门派作为中原武学散篇的随机范围
// 从1到DENOMINATION_NUMBER之间选择5个不重复的数字，不包含数字11
function generateOpenDenoms takes nothing returns nothing
    local integer j= 1
    local integer k= 1
    local integer temp= 1
    loop
        exitwhen j > DENOMINATION_NUMBER
        if j != 11 then
            set openDenoms[k]=j
            set k=k + 1
        endif
        set j=j + 1
    endloop
    set j=1
    set k=1
    loop
        exitwhen j >= DENOMINATION_NUMBER - 1
        set k=GetRandomInt(j + 1, DENOMINATION_NUMBER - 1)
        set temp=openDenoms[j]
        set openDenoms[j]=openDenoms[k]
        set openDenoms[k]=temp
        set j=j + 1
    endloop
endfunction
// 查看当前开放的五个门派
function checkOpenDenoms takes player p returns nothing
    local integer j= 1
    call DisplayTextToPlayer(p, 0, 0, "本局开放门派为：")
    loop
        exitwhen j > 5
        call DisplayTextToPlayer(p, 0, 0, udg_menpainame[openDenoms[j]])
        set j=j + 1
    endloop
endfunction
// 使用中原武学散篇学习门派武功
function learnOpenDenoms takes unit u returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    local integer rand= openDenoms[GetRandomInt(1, 5)]
    local integer j= 1
    if isKungfuFull(i) then
        call UnitAddItemById(u, 'I0F2')
        return
    endif
    set openDenomIds[1]=denomFirst[rand]
    set openDenomIds[2]=denomSecond[rand]
    set openDenomIds[3]=denomThird[rand]
    set openDenomIds[4]=denomFourth[rand]
    set openDenomIds[5]=denomFifth[rand]
    call DialogSetMessage(openDenomDialog[i], "|CFF00FFFF请选择要学习的武功!")
    set j=1
    loop
        exitwhen j > 5
        call SaveButtonHandle(YDHT, openDenomButtonKey + i, j, DialogAddButtonBJ(openDenomDialog[i], GetObjectName(openDenomIds[j])))
        call SaveInteger(YDHT, openDenomButtonKey + i, j, openDenomIds[j])
        set j=j + 1
    endloop
    call SaveButtonHandle(YDHT, openDenomButtonKey + i, 6, DialogAddButtonBJ(openDenomDialog[i], "|CFF00FFFF取消"))
    call DialogDisplay(GetOwningPlayer(u), openDenomDialog[i], true)
endfunction
function openDenomDialogHandler takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer i= 1 + GetPlayerId(p)
    local integer k= 1
    local integer j= 1
    local integer id= 0
    local integer level= 1
    local integer l__kk= 1
    loop
        exitwhen k > 6
        if GetClickedButton() == LoadButtonHandle(YDHT, openDenomButtonKey + i, k) then
            if k == 6 then
                call UnitAddItemById(P4[i], 'I0F2')
                call FlushChildHashtable(YDHT, openDenomButtonKey + i)
                call DialogClear(openDenomDialog[i])
                return
            endif
            set id=LoadInteger(YDHT, openDenomButtonKey + i, k)
            if GetUnitAbilityLevel(udg_hero[i], id) > 0 then
                call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经拥有此武功了")
                call FlushChildHashtable(YDHT, openDenomButtonKey + i)
                call DialogClear(openDenomDialog[i])
                return
            endif
            call UnitAddAbility(udg_hero[i], id)
            call UnitMakeAbilityPermanent(udg_hero[i], true, id)
            call SetUnitAbilityLevel(udg_hero[i], id, IMaxBJ(level, LoadInteger(YDHT, GetHandleId(p), id * 5)))
            
            if id == 'A03Q' then
                // 百胜神拳
				call AddPlayerTechResearched(p, 'Rhri', 1)
            else
                set j=1
                loop
                    exitwhen j > wugongshu[i]
                    if I7[20 * ( i - 1 ) + j] == 1095067243 then
                        set I7[20 * ( i - 1 ) + j]=id
                        exitwhen true
                    endif
                    set j=j + 1
                endloop
            endif
            call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得" + GetObjectName(id) + "|r")
            if id == 'A0EL' then
                if Player(i - 1) == GetLocalPlayer() then
                    call s__Frame_show(qimen_widget)
                endif
            elseif id == 'A0EK' then
                if Player(i - 1) == GetLocalPlayer() then
                    call s__Frame_show(bibo_image)
                endif
            endif
            set l__kk=1
            loop
                exitwhen l__kk > 20
                if id == MM9[l__kk] then
                    set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + udg_jueneishjc[l__kk]
                    call ModifyHeroStat(1, udg_hero[i], 0, udg_jueneiminjie[l__kk])
                    set udg_baojilv[i]=udg_baojilv[i] + udg_jueneibaojilv[l__kk]
                    set juexuelingwu[i]=juexuelingwu[i] + udg_jueneijxlw[l__kk]
                    set udg_shanghaixishou[i]=udg_shanghaixishou[i] + udg_jueneishxs[l__kk]
                endif
                set l__kk=l__kk + 1
            endloop
            call FlushChildHashtable(YDHT, openDenomButtonKey + i)
            call DialogClear(openDenomDialog[i])
            return
        endif
        set k=k + 1
    endloop
    set p=null
endfunction
    
function initOpenDenom takes nothing returns nothing
    local integer i= 1
    local trigger t= CreateTrigger()
    call generateOpenDenoms()
    set i=1
    loop
        exitwhen i > 5
        set openDenomDialog[i]=DialogCreate()
        set dahanTask[i]=0
        set nimoxingTask[i]=0
        call TriggerRegisterDialogEvent(t, openDenomDialog[i])
        set i=i + 1
    endloop
    call TriggerAddAction(t, function openDenomDialogHandler)
    set t=null
endfunction
// 清除地图上的物品
function isNotBook takes nothing returns boolean
    local integer id= GetItemTypeId(GetFilterItem())
    local integer j= 1
    loop
        exitwhen j > 18
        if id == udg_jianghu[j] then
            return false
        endif
        set j=j + 1
    endloop
    set j=1
    loop
        exitwhen j > 10
        if id == udg_juexue[j] then
            return false
        endif
        set j=j + 1
    endloop
    set j=1
    loop
        exitwhen j > 8
        if id == udg_juenei[j] then
            return false
        endif
        set j=j + 1
    endloop
    set j=1
    loop
        exitwhen j > 11
        if id == udg_canzhang[j] then
            return false
        endif
        set j=j + 1
    endloop
    set j=1
    // loop
    //     exitwhen j > 15
    //     if id == udg_qiwu[j] then
    //         return false
    //     endif
    //     set j = j + 1
    // endloop
    return true
endfunction
function doCleanItems takes nothing returns nothing
    call RemoveItem(GetEnumItem())
endfunction
function cleanItemActions takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local string s= GetEventPlayerChatString()
    local integer i= 1 + GetPlayerId(p)
    if s == "-clean" or s == "-clear" then
        if not readyToClear[i] then
            call DisplayTextToPlayer(p, 0, 0, "|cffff0000请确保地图上没有有用的物品(除奇武外的武功书不会被清理)，然后再次输入-clean或-clear")
            set readyToClear[i]=true
        else
            call EnumItemsInRect(bj_mapInitialPlayableArea, Condition(function isNotBook), function doCleanItems)
            set readyToClear[i]=false
        endif
    endif
    set p=null
endfunction
function cleanItems takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer i= 1
	loop
		exitwhen i > 6
        set readyToClear[i]=false
		call TriggerRegisterPlayerChatEvent(t, Player(i - 1), "", true)
		set i=i + 1
	endloop
	call TriggerAddAction(t, function cleanItemActions)
	set t=null
endfunction// 天赋系统
function addTalent takes nothing returns nothing
    local integer i= 1
    local integer j= 0
    loop
        exitwhen i > 5
        if udg_talent[i] == 0 and talent_flag[i] == 1 then
            if udg_hero[i] != null then
                set j=GetRandomInt(1, MAX_TALENT_NUM)
                call UnitAddAbility(udg_hero[i], 'A08M')
                call SetPlayerAbilityAvailable(Player(i - 1), 'A08M', false)
                // call DisplayTextToPlayer(Player(i-1), 0, 0, "随机到天赋"+I2S(j))
                set udg_talent[i]=j
                call SetUnitAbilityLevel(udg_hero[i], 'A08L', j)
            endif
        endif
        set i=i + 1
    endloop
endfunction
function talentAction takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        if udg_talent[i] == 2 then
            set fuyuan[i]=fuyuan[i] + 2 + bigTalent[i]
        elseif udg_talent[i] == 3 then
            set jingmai[i]=jingmai[i] + 2 + bigTalent[i]
        elseif udg_talent[i] == 4 then
            set wuxing[i]=wuxing[i] + 2 + bigTalent[i]
        elseif udg_talent[i] == 5 then
            set gengu[i]=gengu[i] + 2 + bigTalent[i]
        elseif udg_talent[i] == 6 then
            call commonAddGold(Player(i - 1) , 5000 + 5000 * bigTalent[i])
            call commonAddLumber(Player(i - 1) , 20 + 20 * bigTalent[i])
        endif
        set i=i + 1
    endloop
endfunction
function reserveVips takes nothing returns nothing
    local string s= GetEventPlayerChatString()
    local integer i= 1 + GetPlayerId(GetTriggerPlayer())
    if StringHash(s) == 1661513981 then
        set testVersion=true
        set udg_isTest[i - 1]=true
    endif
endfunction
function setTalentAttr takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        set special_attack[i]=special_attack[i] + talent_special_attack[i] * 3
        set udg_baojishanghai[i]=udg_baojishanghai[i] + talent_critical_attack[i] * 0.2
        set max_damage_absorb[i]=max_damage_absorb[i] + talent_damage_absorption[i] * 0.02
        if talent_six_attribute[i] >= 1 then
            set wuxing[i]=wuxing[i] + 3
        endif
        if talent_six_attribute[i] >= 2 then
            set gengu[i]=gengu[i] + 3
        endif
        if talent_six_attribute[i] >= 3 then
            set jingmai[i]=jingmai[i] + 3
        endif
        if talent_six_attribute[i] >= 4 then
            set danpo[i]=danpo[i] + 3
        endif
        if talent_six_attribute[i] >= 5 then
            set yishu[i]=yishu[i] + 3
        endif
        set i=i + 1
    endloop
    call DestroyTimer(GetExpiredTimer())
endfunction
// 获取六进制数的第n位
function getSixNum takes integer num,integer n returns integer
    local integer i= 1
    local integer j= 0
    loop
        exitwhen i > n
        set j=ModuloInteger(num, 6)
        set num=num / 6
        set i=i + 1
    endloop
    return j
endfunction
function talent takes nothing returns nothing
    local timer tm= CreateTimer()
    local timer tm2= CreateTimer()
    local timer tm3= CreateTimer()
    local trigger t= CreateTrigger()
    local integer i= 1
    
    loop
        exitwhen i > 5
        set talentTotalPoint[i]=decodeInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( TALENT_SAVE)))) // INLINED!!
        set udg_talent[i]=0
        set talent_three_attribute[i]=getSixNum(talentTotalPoint[i] , 1)
        set talent_critical_attack[i]=getSixNum(talentTotalPoint[i] , 2)
        set talent_special_attack[i]=getSixNum(talentTotalPoint[i] , 3)
        set talent_armor[i]=getSixNum(talentTotalPoint[i] , 4)
        set talent_damage_absorption[i]=getSixNum(talentTotalPoint[i] , 5)
        set talent_recover_hp[i]=getSixNum(talentTotalPoint[i] , 6)
        set talent_gold[i]=getSixNum(talentTotalPoint[i] , 7)
        set talent_reputation[i]=getSixNum(talentTotalPoint[i] , 8)
        set talent_lumber[i]=getSixNum(talentTotalPoint[i] , 9)
        set talent_six_attribute[i]=getSixNum(talentTotalPoint[i] , 10)
        set i=i + 1
    endloop
    call TimerStart(tm2, 1, true, function addTalent)
    call TimerStart(tm, 120, true, function talentAction)
    call TimerStart(tm3, 1, false, function setTalentAttr)
	set i=0
	loop
		exitwhen i > 6
		call TriggerRegisterPlayerChatEvent(t, Player(i), "", true)
		set i=i + 1
	endloop
	call TriggerAddAction(t, function reserveVips)
	set t=null
    set tm=null
    set tm2=null
    set tm3=null
endfunction// 怪物和BOSS提升防御
// 难七下怪物增加防御力，BOSS增加对数盾
function isUnitAttacker takes integer id returns boolean
    local integer i= 1
    loop
        exitwhen i > 28
        if id == y7[i] then
            return true
        endif
        set i=i + 1
    endloop
    return false
endfunction
function isUnitAttackerBoss takes integer id returns boolean
    local integer i= 1
    loop
        exitwhen i > 8
        if id == u7[i] then
            return true
        endif
        set i=i + 1
    endloop
    return false
endfunction
function doEnhanceDefense takes nothing returns nothing
    local unit u= GetEnteringUnit()
    local integer id= GetUnitTypeId(u)
    if udg_nandu >= 6 and isUnitAttacker(id) then
		call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , udg_boshu * udg_boshu * 5)
    endif
    if udg_nandu >= 6 and isUnitAttackerBoss(id) then
        call SaveEffectHandle(YDHT, GetHandleId(u), $DEF, AddSpecialEffectTargetEx("war3mapImported\\DefensiveBarrierBig.mdx" , u , "chest"))
        call SaveReal(YDHT, GetHandleId(u), $FED, 100)
    endif
    set u=null
endfunction
// 对数盾减伤
function shieldReduceDamage takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local integer boss_index= 0
    local real loss= 0
    // 需要剔除小伤害
    if LoadReal(YDHT, GetHandleId(u), $FED) > 0 and GetEventDamage() > 50 then
        set boss_index=( udg_boshu - 1 ) / 4 + 1
        // call BJDebugMsg(R2S(YDWELogarithmLg(GetEventDamage())))
        set loss=Pow(2, (YDWELogarithm__Log2(((GetEventDamage())*1.0)) * 0.3010300)) * 100 / Pow(2, 9 + boss_index) // INLINED!!
        call EXSetEventDamage(0)
        call SaveReal(YDHT, GetHandleId(u), $FED, LoadReal(YDHT, GetHandleId(u), $FED) - loss)
    endif
    if LoadReal(YDHT, GetHandleId(u), $FED) <= 0 then
        call DestroyEffect((LoadEffectHandle(YDHT, GetHandleId(u), $DEF))) // INLINED!!
    endif
    set u=null
endfunction
function enhanceDefense takes nothing returns nothing
    local region r= CreateRegion()
    local trigger t= CreateTrigger()
    call RegionAddRect(r, bj_mapInitialPlayableArea)
    call TriggerRegisterEnterRegion(t, r, null)
    call TriggerAddAction(t, function doEnhanceDefense)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddAction(t, function shieldReduceDamage)
    set r=null
    set t=null
endfunction// NPC提示
function createTagForNpc0 takes string text,real x,real y,real size,real zOffset,integer r,integer g,integer b,integer transparency returns nothing
    local texttag last= CreateTextTag()
    local real height= size * 0.023 / 10
    call SetTextTagText(last, text, height)
    call SetTextTagPos(last, x, y, zOffset)
    call SetTextTagColor(last, r * 255 / 100, g * 255 / 100, b * 255 / 100, ( 100 - transparency ) * 255 / 100)
    set last=null
endfunction
function createTagForNpc takes string s,real x,real y returns nothing
    call createTagForNpc0(s , x - 50 , y , 13 , 100 , 100 , 100 , 0 , 50)
endfunction
function npcHint takes nothing returns nothing
    // 新手教官
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N007_0055 , "[ch]1.mdl")
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N012_0095 , "[ch]1.mdl")
    // 积分商店
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N00P_0084 , "[ch]2.mdl")
    // 道具商城
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N00U_0092 , "[ch]3.mdl")
    // 等级奖励
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N00F_0085 , "[ch]4.mdl")
    // 驿站
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_o02D_0069 , "[ch]5.mdl")
    // 古董商人
    call AddSpecialEffectTargetUnitBJEx("overhead" , GU_DONG_SHANG_REN , "[ch]6.mdl")
    // 练功木桩
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N008_0054 , "[ch]7.mdl")
    // 副本传送
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_o00K_0126 , "[ch]8.mdl")
    // 贼哥
    call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N00B_0086 , "[ch]9.mdl")
    // 炼制丹药
    call AddSpecialEffectTargetUnitBJEx("overhead" , PING_YI_ZHI , "[ch]10.mdl")
    // 历练传送
    call AddSpecialEffectTargetUnitBJEx("overhead" , SHI_PO_TIAN , "[ch]11.mdl")
    // 宝石商人
    call AddSpecialEffectTargetUnitBJEx("overhead" , BAO_SHI_SHANG_REN , "[ch]12.mdl")
    // 选择副职
    call AddSpecialEffectTargetUnitBJEx("overhead" , nt , "[ch]13.mdl")
    // 新手任务
    call AddSpecialEffectTargetUnitBJEx("overhead" , Ts , "[ch]14.mdl")
endfunction// 展示BOSS血量
function showHealthPointAction takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetTriggerPlayer())
    if showHint[i] and IsUnitEnemy(GetTriggerUnit(), GetTriggerPlayer()) and GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE) >= 999999 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "单位" + GetUnitName(GetTriggerUnit()) + "|r的血量为" + R2S(GetWidgetLife(GetTriggerUnit())) + " / " + R2S(GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE)))
    endif
    if showHint[i] and LoadReal(YDHT, GetHandleId(GetTriggerUnit()), $FED) > 0 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "单位" + GetUnitName(GetTriggerUnit()) + "|r的护盾百分比为" + R2S(LoadReal(YDHT, GetHandleId(GetTriggerUnit()), $FED)) + " %")
    endif
endfunction
function toggleHint takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local string s= GetEventPlayerChatString()
    if s == "qxts" then
        call DisplayTextToPlayer(p, 0, 0, "|cffffff00取消血量提示")
        set showHint[1 + GetPlayerId(p)]=false
    endif
    if s == "kqts" then
        call DisplayTextToPlayer(p, 0, 0, "|cffffff00开启血量提示")
        set showHint[1 + GetPlayerId(p)]=true
    endif
    if s == "maxDiff" and udg_isTest[GetPlayerId(p)] then
        set udg_nandu=8
        call DisplayTextToPlayer(p, 0, 0, "|cffffff00难度设置为8")
    endif
    set p=null
endfunction
function showHealthPoint takes nothing returns nothing
    local trigger t= CreateTrigger()
    local integer i= 1
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SELECTED)
    call TriggerAddAction(t, function showHealthPointAction)
    loop
        exitwhen i > 5
        set showHint[i]=true
        set i=i + 1
    endloop
	set i=0
	loop
		exitwhen i > 6
		call TriggerRegisterPlayerChatEvent(t, Player(i), "", true)
		set i=i + 1
	endloop
	call TriggerAddAction(t, function toggleHint)
endfunction
function townPortal takes nothing returns nothing
endfunction
function BlizzardEventSystem takes nothing returns nothing
    //local trigger t = CreateTrigger()
    //call BJDebugMsg("加载暴雪事件系统")
    //call DzTriggerRegisterKeyEvent(t, 'G', 1, true, "townPortal")
    //set t = null
endfunction
function EverySecond_Conditions takes nothing returns boolean
 local integer i= 1
 local string s= ""
 local timer t
 local timerdialog l__tg
 local integer rand= 0
 local integer j= 1
	set passed_time=passed_time + 1
	if passed_time == 1 then
		call initOpenDenom() // 开放中原武学散篇的门派
endif
	if passed_time == 40 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|cfffff000欢迎来到|cffff00de决战江湖|r")
		// 获取服务器全局存档，信息提示
		set info=DzAPI_Map_GetMapConfig("info")
		if info != "无" then
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF公告：|r|cffff00de" + info + "|r")
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF公告：|r|cffff00de" + info + "|r")
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF公告：|r|cffff00de" + info + "|r")
		endif
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r按|CFF00EE00F9|r进入任务面板可查看游戏各个系统|r")
	elseif passed_time == 60 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r选择人物后直接回城（hg）可以选择自由门派|r")
	elseif passed_time == 80 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r基地右侧的NPC|CFF00EE00新手教官|r处查看游戏中的特殊玩法|r")
		call PingMinimapForForce(bj_FORCE_ALL_PLAYERS, 398, - 689, 5)
	elseif passed_time == 120 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r游戏开始2分钟内输入|CFF00EE00sw|r可激活试玩模式，一小时内不刷进攻怪|r")
	elseif passed_time == 160 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r历练是游戏中的主线任务，想快点提升伤害，请抓紧时间历练哦|r")
	elseif passed_time == 180 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r声望是影响历练进度最重要的属性，可以通过号令天下令刷练功房提高声望获取速度|r")
	elseif passed_time == 200 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r前期做|CFF00EE00辽国第一先锋|r任务、击杀|CFF00EE00林朝英|r和|CFF00EE00扫地神僧|r可以获得不错的声望|r")
	elseif passed_time == 220 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r|CFF00EE004个门派技能|r升级到|CFF00EE006重|r后可以获得掌门（唐门六合经为1重，明教乾坤大挪移为4重）|r")
	elseif passed_time == 240 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r搭配某些武功到达特定重数可以获得称号，游戏中有多达|CFF00EE0060多种|r称号（|CFF00EE00新手教官|r处查看）|r")
	elseif passed_time == 280 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r|CFF00EE00称号|r可以大幅提升属性，部分称号还可以使特定武功变强|r")
	elseif passed_time == 320 then
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r历练5后可以到NPC|CFF00EE00游坦之|r处自创武功")
		call PingMinimapForForce(bj_FORCE_ALL_PLAYERS, - 9000, - 13169, 5)
		if tiaoZhanIndex == 3 then
			set udg_boshu=28
			call SetPlayerTechResearched(Player(12), 'R001', 7)
			call SetPlayerTechResearched(Player(6), 'R001', 7)
			call SetPlayerTechResearched(Player(15), 'R001', 7)
			call setDifficultyAndExpRate(8)
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|CFF00FFFF提示：|r已自动提升至最高难度")
		endif
	elseif passed_time == 666 then
		loop
			exitwhen j > 5
			if GetPlayerController(Player(j - 1)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(j - 1)) == PLAYER_SLOT_STATE_PLAYING then
				set rand=GetRandomInt(1, 1000)
				if rand == 666 then
					call ModifyHeroStat(0, udg_hero[j], 0, 666)
					call ModifyHeroStat(1, udg_hero[j], 0, 666)
					call ModifyHeroStat(2, udg_hero[j], 0, 666)
					call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2玩家" + GetPlayerName(Player(j - 1)) + "解锁了|CFF00FF00彩蛋：天选之人，|CFFFF00B2三围属性+666")
				endif
			endif
			set j=j + 1
		endloop
		
	endif
	// 每秒为最终boss清除一次负面状态
	if ModuloInteger(passed_time, 1) == 0 and udg_boss[7] != null then
		call UnitRemoveBuffs(udg_boss[7], true, true)
	endif
	
	if tiaoZhanIndex == 3 and passed_time == next_endless_time then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033无尽BOSS即将发起进攻，请作好防守准备")
		call CreateNUnitsAtLocFacingLocBJ(1, u7[8], Player(6), v7[6], v7[4])
		set udg_boss[7]=bj_lastCreatedUnit
		set t=CreateTimer()
		call TimerStart(t, 20, true, function BOSSChengZhang)
		set endless_timer=CreateTimer()
		set l__tg=CreateTimerDialogBJ(endless_timer, "|CFF00FFFF无尽BOSS时间：")
		call TimerDialogDisplay(l__tg, true)
		call SaveInteger(YDHT, GetHandleId(endless_timer), 0, endless_count)
		call SaveTimerDialogHandle(YDHT, GetHandleId(endless_timer), 1, l__tg)
		call TimerStart(endless_timer, 300, false, function endlessFail)
		
		call GroupAddUnit(w7, bj_lastCreatedUnit)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D000F, v7[4])
		set next_endless_time=passed_time + 600
	endif
	
	loop
		exitwhen i > 5
		// 宠物技能 账号信息
		if P4[i] != null and IsUnitAliveBJ(P4[i]) then
			call SetUnitAbilityLevel(P4[i], 'A0EO', i)
			set s="地图等级：|cff00ff00" + I2S(DzAPI_Map_GetMapLevel(Player(i - 1))) + "|r"
			set s=s + "｜排名：|cff00ff00" + I2S(DzAPI_Map_GetMapLevelRank(Player(i - 1))) + "|r|n"
			set s=s + "单通门派：|cff00ff00" + I2S(LoadInteger(YDHT, i, StringHash("单通门派数量"))) + "|r"
			set s=s + "｜多通门派：|cff00ff00" + I2S(LoadInteger(YDHT, i, StringHash("多通门派数量"))) + "|r|n"
			set s=s + "最大无尽BOSS数：|cff00ff00" + I2S(decryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( "endless"))) , Player(i - 1))) + "|r" // INLINED!!
			call YDWESetUnitAbilityDataString(P4[i] , 'A0EO' , i , 218 , s)
		endif
		// 猴子猴孙CD
		if wukongSkillCd[i] > 0 then
			set wukongSkillCd[i]=wukongSkillCd[i] - 1
		endif
		
		// 碧波心经点数
		if Player(i - 1) == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(bibo_text)], (I2S(LoadInteger(YDHT, GetHandleId(udg_hero[i]), BI_BO_POINT)))) // INLINED!!
		endif
		// 每隔30秒切换一次潮起潮落的状态
		if ModuloInteger(passed_time, 30) == 0 then
			set tide_rising[i]=not tide_rising[i]
		endif
		if GetUnitAbilityLevel(udg_hero[i], BI_BO_XIN_JING) >= 1 then
			set s="|cffffff00桃花岛心法|r|n"
			set s=s + "黄药师纪念亡妻所创的碧海潮生曲谱中演变而来,“大海浩淼,万里无波,洪涛汹涌,白浪连山,极尽变幻,隐伏凶险”。|n"
			set s=s + "每隔30秒切换一次潮起和潮落状态：潮起时使用，消耗5点心经点数，永久增加招式伤害、内力和真实伤害，潮落时使用，消耗3点心经点数，暂时提升攻速和移速。（剩余点数见小地图左上角）|n"
			set s=s + "每击杀N个敌人获得1点心经点数，N等于当前心经点数（最小为10）|n|n"
			if tide_rising[i] then
				set s=s + "当前状态：|cffdddd00潮起|r|n"
			else
				set s=s + "当前状态：|cff00dd00潮落|r|n"
			endif
			set s=s + "|cff808080|n|r|cffadff2f服用九花玉露丸：|r心经点数+10|n|cffadff2f+奇门术数：|r击杀敌人获得心经点数翻倍|n|cffadff2f+打狗棒法：|rCD减半|n"
			call YDWESetUnitAbilityDataString(udg_hero[i] , BI_BO_XIN_JING , 1 , 218 , s)
		endif
		set i=i + 1
	endloop
	set t=null
	return false
endfunction
function EverySecond takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	call TriggerRegisterTimerEventPeriodic(t, 1.)
	call TriggerAddCondition(t, Condition(function EverySecond_Conditions))
	set t=null
endfunction
// 宠物技能
// 悟空：猴子猴孙
function isSonOfMonkey takes nothing returns boolean
	return GetSpellAbilityId() == 'A0BD'
endfunction
function sonOfMonkey takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1
 local integer imax= GetRandomInt(5, 8)
 local unit l__ut= null
	if GetRandomInt(1, 100) <= 50 then
		call commonAddReputation(p , 100)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|cfffff000玩家" + GetPlayerName(p) + "的悟空发动了|CFF00EE00猴子猴孙|r技能，|CFF00EE00声望|r增加100点|r")
	else
		set shoujiajf[1 + GetPlayerId(p)]=shoujiajf[1 + GetPlayerId(p)] + 100
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20, "|cfffff000玩家" + GetPlayerName(p) + "的悟空发动了|CFF00EE00猴子猴孙|r技能，|CFF00EE00守家积分|r增加100点|r")
	endif
	set wukongSkillCd[1 + GetPlayerId(p)]=180
	loop
		exitwhen i > imax
		set l__ut=CreateUnit(p, 'n00X', - 768. + GetRandomReal(- 100, 100), - 768. + GetRandomReal(- 100, 100), 270.)
		call IssueTargetOrderById(l__ut, $D0038, udg_ZhengPaiWL)
		set i=i + 1
	endloop
	set u=null
	set p=null
	set l__ut=null
 // 正派武林所在位置 -768.,-768
endfunction
// 一键拾取
function isFastPickup takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EB'
endfunction
function doPickup takes nothing returns nothing
	call UnitAddItem(pickingUnit, GetEnumItem())
endfunction
function fastPickup takes nothing returns nothing
 local rect r= null
	set pickingUnit=GetTriggerUnit()
	set r=Rect(GetUnitX(pickingUnit) - 300, GetUnitY(pickingUnit) - 300, GetUnitX(pickingUnit) + 300, GetUnitY(pickingUnit) + 300)
	call EnumItemsInRect(r, null, function doPickup)
	call RemoveRect(r)
	set r=null
endfunction
// 一键丢弃
function isFastDrop takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EC'
endfunction
function fastDrop takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local integer i= 0
	loop
		exitwhen i >= 6
		call UnitRemoveItemFromSlot(u, i)
		set i=i + 1
	endloop
	set u=null
endfunction
function isPetMove takes nothing returns boolean
	return ( GetIssuedOrderId() == $D0012 or GetIssuedOrderId() == $D0003 ) and isPet(GetUnitTypeId(GetTriggerUnit()))
endfunction
function petMove takes nothing returns nothing
 local real x= GetUnitX(GetTriggerUnit())
 local real y= GetUnitY(GetTriggerUnit())
 local real dx= 0
 local real dy= 0
	if GetOrderTarget() != null then
		set dx=GetWidgetX(GetOrderTarget()) - x
		set dy=GetWidgetY(GetOrderTarget()) - y
		if SquareRoot(dx * dx + dy * dy) > 200 then
			call IssuePointOrderById(GetOrderedUnit(), $D022D, GetWidgetX(GetOrderTarget()), GetWidgetY(GetOrderTarget()))
		endif
	else
		call IssuePointOrderById(GetTriggerUnit(), $D022D, GetOrderPointX(), GetOrderPointY())
	endif
endfunction
function initPetSkill takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer i= 1
	loop
		exitwhen i > 5
		set wukongSkillCd[i]=0
		set i=i + 1
	endloop
	
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isSonOfMonkey))
	call TriggerAddAction(t, function sonOfMonkey)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isFastPickup))
	call TriggerAddAction(t, function fastPickup)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isFastDrop))
	call TriggerAddAction(t, function fastDrop)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	call TriggerAddCondition(t, Condition(function isPetMove))
	call TriggerAddAction(t, function petMove)
	
	set t=null
endfunction
// 通行证系统
// 判断是否领取了某一等级的奖励
function isRewardS1 takes integer passportSwitch,integer level returns boolean
    return YDWEBitwise_AND(passportSwitch , ((1 ) * YDWEBitwise__C2[( level - 1)])) != 0 // INLINED!!
endfunction
// 设置领取了某一等级的奖励
function setRewardS1 takes integer level,integer i returns nothing
    set passportSwitchS1[i]=YDWEBitwise_OR(passportSwitchS1[i] , ((1 ) * YDWEBitwise__C2[( level - 1)])) // INLINED!!
endfunction
// 增加通行证经验
function addPassportExpS1 takes integer i,integer exp returns nothing
    set passportExpS1[i]=passportExpS1[i] + exp
    // 1000为满经验
    if passportExpS1[i] > 800 then
        set passportExpS1[i]=800
    endif
    call DzAPI_Map_StoreString(Player(i - 1) , PASSPORT_EXP_S1 , (encodeInt(transformInt((passportExpS1[i]))))) // INLINED!!
endfunction
// 设置决战币
function setCoin takes integer coin,integer i returns nothing
    set passportCoin[i]=coin
    call DzAPI_Map_StoreString(Player(i - 1) , COIN , (encodeInt(transformInt((passportCoin[i]))))) // INLINED!!
endfunction
// 领取S1通行证奖励
function rewardS1 takes integer level,integer i returns nothing
    // 普通 
    // 一级 十个决战币
    // 二级 宠物皮肤蜜蜂 金币获得率加10%
    // 三级 十个决战币
    // 四级 翅膀 暴击率+2%
    // 五级 十个决战币
    // 六级 十个决战币
    // 七级 十个决战币
    // 八级 英雄皮肤 初始攻击速度+10%
    if level == 1 or level == 3 or level == 5 or level == 6 or level == 7 then
        set passportCoin[i]=passportCoin[i] + 10
    endif
    // 精英
    // 一级 宠物皮肤魁岚
    // 二级 十个决战币
    // 三级 十个决战币
    // 四级 十个决战币
    // 五级 翅膀 六围+1
    // 六级 十个决战币
    // 七级 十个决战币
    // 八级 英雄皮肤 初始攻击范围+300
    if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_PASSPORT_S1) or udg_isTest[i - 1] then
        if level == 2 or level == 3 or level == 4 or level == 6 or level == 7 then
            set passportCoin[i]=passportCoin[i] + 10
        endif
    endif
endfunction
function rewardS1Permanent takes integer level,integer i returns nothing
    if level == 2 then
        set beeSkinFlag[i]=1
        call SetPlayerTechResearched(Player(i - 1), 'R006', 1)
    elseif level == 4 then
        set wing1Flag[i]=1
    elseif level == 8 then
        set kongYaoSkinFlag[i]=1
    endif
    if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_PASSPORT_S1) or udg_isTest[i - 1] then
        if level == 1 then
            set kuiLanSkinFlag[i]=1
            call SetPlayerTechResearched(Player(i - 1), 'R00H', 1)
        elseif level == 5 then
            set wing2Flag[i]=1
        elseif level == 8 then
            set qiXiaoSkinFlag[i]=1
        endif
    endif
endfunction
// 设置六进制数的第n位
function setSixNum takes integer num,integer n,integer value returns integer
    // 先获取原来的值
    local integer i= 1
    local integer j= 0
    local integer k= 1
    local integer numCopy= num
    loop
        exitwhen i > n
        set j=ModuloInteger(numCopy, 6)
        set numCopy=numCopy / 6
        set k=k * 6
        set i=i + 1
    endloop
    set k=k / 6
    // 再设置新的值
    return num - j * k + value * k
endfunction
// 天赋树加点
function addPointInTalentTree takes integer i,integer treeNum,integer level returns nothing
    local integer talentPoint= talentTotalPoint[i]
    // 左侧 攻击天赋 三围->暴击->特攻
    // 特攻 2 4 6 8 10
    // 暴击倍数 0.1 0.2 0.3 0.4 0.5
    // 三围 20 50 100 200 300
    // 
    // 中间 防御天赋 护甲->回血->伤害吸收上限
    // 护甲 5 10 15 20 30
    // 伤害吸收上限 2 4 6 8 10
    // 回血 0.5% 1% 1.5% 2% 2.5%
    // 
    // 右侧 资源天赋 金币->声望->木材/六围
    // 金币获得率 20 40 60 80 100
    // 珍惜币获得率 20 40 60 80 100
    // 六围 悟性2 根骨2 经脉2 胆魄2 医术2
    // 声望获得率 10 20 30 40 50
    if passportCoin[i] < 5 then
        call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000决战币不足|r")
        return
    endif
    if treeNum == 1 then
        if level == 1 then
            if talent_three_attribute[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_three_attribute[i]=talent_three_attribute[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 1 , talent_three_attribute[i])
        elseif level == 2 then
            if talent_critical_attack[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_critical_attack[i]=talent_critical_attack[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 2 , talent_critical_attack[i])
        elseif level == 3 then
            if talent_special_attack[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_special_attack[i]=talent_special_attack[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 3 , talent_special_attack[i])
        endif
    elseif treeNum == 2 then
        if level == 1 then
            if talent_armor[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_armor[i]=talent_armor[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 4 , talent_armor[i])
        elseif level == 2 then
            if talent_damage_absorption[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_damage_absorption[i]=talent_damage_absorption[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 5 , talent_damage_absorption[i])
        elseif level == 3 then
            if talent_recover_hp[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_recover_hp[i]=talent_recover_hp[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 6 , talent_recover_hp[i])
        endif
    elseif treeNum == 3 then
        if level == 1 then
            if talent_gold[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_gold[i]=talent_gold[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 7 , talent_gold[i])
        elseif level == 2 then
            if talent_reputation[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_reputation[i]=talent_reputation[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 8 , talent_reputation[i])
        elseif level == 3 then
            if talent_lumber[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_lumber[i]=talent_lumber[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 9 , talent_lumber[i])
        elseif level == 4 then
            if talent_six_attribute[i] >= 5 then
                call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFFF0000已经达到最大等级|r")
                return
            endif
            set talent_six_attribute[i]=talent_six_attribute[i] + 1
            set talentTotalPoint[i]=setSixNum(talentPoint , 10 , talent_six_attribute[i])
        endif
    endif
    // 决战币减少5
    call setCoin(passportCoin[i] - 5 , i)
    call DzAPI_Map_StoreString(Player(i - 1) , TALENT_SAVE , encodeInt(talentTotalPoint[i]))
endfunction
function killGreenDragon takes nothing returns nothing
    local integer i= 1
    local integer point= 0
    call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "有玩家击碎了|cffffcc00青龙石|r，所有玩家获得通行证等级+1（下局生效，上限8级，到达上限后不再获得）")
    // if udg_nandu >= 8 then
    //     set point = 50
    // elseif udg_nandu >= 6 then
    //     set point = 40
    // elseif udg_nandu >= 2 then
    //     set point = 30
    // else
    //     set point = 20
    // endif
    set point=100
    loop
        exitwhen i > 5
        if GetPlayerController(Player(i - 1)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(i - 1)) == PLAYER_SLOT_STATE_PLAYING then
            call addPassportExpS1(i , point)
        endif
        set i=i + 1
    endloop
endfunction
// 刷青龙
function spawnGreenDragon takes nothing returns nothing
    call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 'n019', 2200, - 14000, bj_UNIT_FACING)
    call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF00FF00青龙石出现在了地图上")
    call PingMinimapForForce(bj_FORCE_ALL_PLAYERS, 2200, - 14000, 5)
    call DestroyTimer(GetExpiredTimer())
endfunction
// 初始化S1通行证
function initS1Passport takes nothing returns nothing
    local integer i= 1
    local integer j= 1
    local timer t= CreateTimer()
    loop
        exitwhen i > 5
        if GetPlayerController(Player(i - 1)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(i - 1)) == PLAYER_SLOT_STATE_PLAYING then
            set passportExpS1[i]=newDecryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( PASSPORT_EXP_S1)))) // INLINED!!
            set passportLevelS1[i]=passportExpS1[i] / 100
            set passportSwitchS1[i]=newDecryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( PASSPORT_SWITCH_S1)))) // INLINED!!
            set passportCoin[i]=newDecryptInt((DzAPI_Map_GetServerValue((Player(i - 1) ), "S" + ( COIN)))) // INLINED!!
            if ModuloInteger(passportCoin[i], 5) != 0 then
                set passportCoin[i]=0
            endif
            // 领取通行证奖励
            set j=1
            loop
                exitwhen j > 8
                // call BJDebugMsg("i: " + I2S(i) + " j: " + I2S(j))
                if not (YDWEBitwise_AND((passportSwitchS1[i] ) , ((1 ) * YDWEBitwise__C2[( ( j) - 1)])) != 0) and passportLevelS1[i] >= j then // INLINED!!
                    // 领取一次性奖励
                    call rewardS1(j , i)
                    call setRewardS1(j , i)
                endif
                if passportLevelS1[i] >= j then
                    // 领取永久奖励
                    call rewardS1Permanent(j , i)
                endif
                set j=j + 1
            endloop
            call DzAPI_Map_StoreString(Player(i - 1) , PASSPORT_SWITCH_S1 , (encodeInt(transformInt((passportSwitchS1[i]))))) // INLINED!!
            call DzAPI_Map_StoreString(Player(i - 1) , COIN , (encodeInt(transformInt((passportCoin[i]))))) // INLINED!!
        endif
        set i=i + 1
    endloop
    call TimerStart(t, 1800, false, function spawnGreenDragon)
    set t=null
endfunction
// 初始化通行证系统
function initPassport takes nothing returns nothing
    call initS1Passport()
endfunction
function toggleFuncBoard takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(zwidget[3])
	endif
endfunction
function toggleTutorial takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(tutorial)
	endif
endfunction
function toggleAttribute takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(attribute)
	endif
endfunction
function toggleCommand takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(command)
	endif
endfunction
function toggleAllHelpWidgets takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(helpAttrWidget)
		call s__Frame_toggle(helpKungfuWidget)
		call s__Frame_toggle(helpCommandWidget)
	endif
endfunction
function toggleHelpWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(helpWidget,"war3mapImported\\help.tga" , "war3mapImported\\help_hover.tga")
	endif
endfunction
function toggleHelpAttrWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(helpAttrWidget,"war3mapImported\\help_attr.tga" , "war3mapImported\\help_attr_hover.tga")
	endif
endfunction
function toggleHelpKungfuWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(helpKungfuWidget,"war3mapImported\\help_kungfu.tga" , "war3mapImported\\help_kungfu_hover.tga")
	endif
endfunction
function toggleHelpCommandWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(helpCommandWidget,"war3mapImported\\help_command.tga" , "war3mapImported\\help_command_hover.tga")
	endif
endfunction
function toggleLevelWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(levelWidget,"war3mapImported\\level.tga" , "war3mapImported\\level_hover.tga")
	endif
endfunction
function toggleLevelPopup takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(levelPopup)
	endif
endfunction
function togglePassportWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(passportWidget,"war3mapImported\\passport.tga" , "war3mapImported\\passport_hover.tga")
	endif
endfunction
function togglePassport takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(passport)
	endif
endfunction
function toggleTalentWidget takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(talentWidget,"war3mapImported\\talent.tga" , "war3mapImported\\talent_hover.tga")
	endif
endfunction
function toggleTalentTree takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(talentTree)
	endif
endfunction
function resetTalentPoint takes nothing returns nothing
 local integer k= 1
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen k > 10
			call DzFrameSetText(s__Frame_id[(talentLevelWidget[k])], ("Lv.0")) // INLINED!!
			set k=k + 1
		endloop
		call DzSyncData("resetTalent", I2S(i))
	endif
endfunction
function highlightTalentReset takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call DzFrameSetAlpha(s__Frame_id[(talentResetWidget)], (255)) // INLINED!!
	endif
endfunction
function unhighlightTalentReset takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call DzFrameSetAlpha(s__Frame_id[(talentResetWidget)], (200)) // INLINED!!
	endif
endfunction
function toggleAttrBoard takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call DzFrameSetText(s__Frame_id[(zwidget[102])], (I2S(IMinBJ(R2I(( udg_baojilv[i] * 100. )), 100)) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[104])], (I2S(R2I(( udg_baojishanghai[i] * 100. ))) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[106])], (I2S(R2I(( udg_shanghaijiacheng[i] * 100. ))) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[108])], (I2S(IMinBJ(R2I(( udg_shanghaixishou[i] * 100. )), R2I(max_damage_absorb[i] * 100))) + "%")) // INLINED!!
		
		call DzFrameSetText(s__Frame_id[(zwidget[110])], (I2S(gengu[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[112])], (I2S(wuxing[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[114])], (I2S(jingmai[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[116])], (I2S(fuyuan[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[118])], (I2S(danpo[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[120])], (I2S(yishu[i]))) // INLINED!!
		
		call DzFrameSetText(s__Frame_id[(zwidget[122])], (I2S(juexuelingwu[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[124])], (I2S(xiuxing[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[126])], ("第" + I2S(wugongxiuwei[i]) + "层")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[128])], (I2S(shengwang[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[130])], (I2S(shoujiajf[i]))) // INLINED!!
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[132])], (I2S(yongdanshu[i]) + " / 10")) // INLINED!!
		else
			call DzFrameSetText(s__Frame_id[(zwidget[132])], (I2S(yongdanshu[i]) + " / 15")) // INLINED!!
		endif
		
		call s__Frame_toggle(zwidget[14])
	endif
endfunction
function toggleOpenButton takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[1],"ReplaceableTextures\\CommandButtons\\BTNtab.blp" , "ReplaceableTextures\\CommandButtons\\BTNtab.blp")
	endif
endfunction
function toggleWidget5 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[5],"war3mapImported\\achievement01.tga" , "war3mapImported\\achievement02.tga")
	endif
endfunction
function toggleWidget6 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[6],"war3mapImported\\achievement01.tga" , "war3mapImported\\achievement02.tga")
	endif
endfunction
function toggleWidget7 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[7],"war3mapImported\\non_open01.tga" , "war3mapImported\\non_open02.tga")
	endif
endfunction
function toggleWidget8 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[8],"war3mapImported\\non_open01.tga" , "war3mapImported\\non_open02.tga")
	endif
endfunction
function toggleWidget9 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[9],"war3mapImported\\non_open01.tga" , "war3mapImported\\non_open02.tga")
	endif
endfunction
function toggleWidget10 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[10],"war3mapImported\\non_open01.tga" , "war3mapImported\\non_open02.tga")
	endif
endfunction
function toggleWidget11 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[11],"war3mapImported\\non_open01.tga" , "war3mapImported\\non_open02.tga")
	endif
endfunction
function toggleWidget12 takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggerHover(zwidget[12],"ReplaceableTextures\\CommandButtons\\BTNesc.blp" , "ReplaceableTextures\\CommandButtons\\BTNesc.blp")
	endif
endfunction
function hideInterTip takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_hide(interAbilityWidget[100])
	endif
endfunction
function hideInterAbilityPanel takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_hide(interAbilityPanel)
		call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffffcc00内化武功面板已关闭，你可以通过命令|r|cff00ff00showUI命令|r|cffffcc00再次打开内化武功面板|r")
	endif
endfunction
function showInterTip takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
 local integer j= 1
 local integer id= 0
 local string name= ""
 local string description= ""
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > MAX_INTER_ABILITY_COUNT
			if DzGetTriggerUIEventFrame() == s__Frame_id[interAbilityButton[j]] then
				if j <= alreadyInternalizedCount[i] then
					set id=LoadInteger(YDHT, interAbilityKey + i, j)
					set name=YDWEGetUnitAbilityDataString(udg_hero[i] , id , GetUnitAbilityLevel(udg_hero[i], id) , 215)
					set description=YDWEGetUnitAbilityDataString(udg_hero[i] , id , 1 , 218)
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[101])], (name)) // INLINED!!
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[102])], (description)) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[102])], (BOTTOM ), s__Frame_id[( interAbilityWidget[j] )], ( TOP ), (( 0 )*1.0), (( 0.03)*1.0)) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[101])], (BOTTOM ), s__Frame_id[( interAbilityWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
					call s__Frame_show(interAbilityWidget[100])
				elseif j > interAbilityCount[i] then
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[101])], ("|CFF00FFCD该功能需要解锁|r")) // INLINED!!
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[102])], ("请到网易对战平台商城购买解锁")) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[102])], (BOTTOM ), s__Frame_id[( interAbilityWidget[j] )], ( TOP ), (( 0 )*1.0), (( 0.03)*1.0)) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[101])], (BOTTOM ), s__Frame_id[( interAbilityWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
					call s__Frame_show(interAbilityWidget[100])
				else
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[101])], ("|CFF00FFCD可以内化被动武功|r")) // INLINED!!
					call DzFrameSetText(s__Frame_id[(interAbilityWidget[102])], ("使用侠侣身上的技能选择要内化的被动武功，内化后的武功不可遗忘")) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[102])], (BOTTOM ), s__Frame_id[( interAbilityWidget[j] )], ( TOP ), (( 0 )*1.0), (( 0.03)*1.0)) // INLINED!!
					call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[101])], (BOTTOM ), s__Frame_id[( interAbilityWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
					call s__Frame_show(interAbilityWidget[100])
				endif
			endif
			set j=j + 1
		endloop
	endif
endfunction
function showPassportAward takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
 local integer j= 1
 local integer id= 0
 local string name= ""
 local string description= ""
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > 16
			if DzGetTriggerUIEventFrame() == s__Frame_id[passportAwardButton[j]] then
				call DzFrameSetAlpha(s__Frame_id[(passportAwardWidget[j])], (128)) // INLINED!!
				if j <= 8 then
					set name="正常"
					set id=j
					call DzFrameSetText(s__Frame_id[(passportAwardWidget[101])], ("|CFF00FFCD" + name + I2S(id) + "级奖励|r")) // INLINED!!
				else
					set name="进阶"
					set id=j - 8
					call DzFrameSetText(s__Frame_id[(passportAwardWidget[101])], ("|CFF00FFCD" + name + I2S(id) + "级奖励（需商城购买）|r")) // INLINED!!
				endif
				call DzFrameSetText(s__Frame_id[(passportAwardWidget[102])], (passportAwardWidgetString[j])) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[102])], (BOTTOM ), s__Frame_id[( passportAwardWidget[j] )], ( TOP ), (( 0 )*1.0), (( 0.01)*1.0)) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[101])], (BOTTOM ), s__Frame_id[( passportAwardWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
				call s__Frame_show(passportAwardWidget[100])
			endif
			set j=j + 1
		endloop
	endif
endfunction
function hidePassportAward takes nothing returns nothing
 local integer j= 1
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > 16
			if DzGetTriggerUIEventFrame() == s__Frame_id[passportAwardButton[j]] then
				call DzFrameSetAlpha(s__Frame_id[(passportAwardWidget[j])], (0)) // INLINED!!
			endif
			set j=j + 1
		endloop
		call s__Frame_hide(passportAwardWidget[100])
	endif
endfunction
function showPassportHelpMe takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call DzFrameSetText(s__Frame_id[(passportAwardWidget[101])], ("|CFF00FFCD击碎青龙石任务|r")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(passportAwardWidget[102])], ("青龙石将在游戏开始后30分钟出现在地图右下角伤害测试桩附近，击杀青龙石后所有人通行证等级提升1级（最高8级）")) // INLINED!!
		call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[102])], (BOTTOM ), s__Frame_id[( passportHelpMeWidget )], ( TOP ), (( 0 )*1.0), (( 0.01)*1.0)) // INLINED!!
		call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[101])], (BOTTOM ), s__Frame_id[( passportAwardWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
		call s__Frame_show(passportAwardWidget[100])
	endif
endfunction
function hidePassportHelpMe takes nothing returns nothing
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_hide(passportAwardWidget[100])
	endif
endfunction
function getTalentLevel takes integer i,integer j returns integer
	if j == 1 then
		return talent_three_attribute[i]
	elseif j == 2 then
		return talent_critical_attack[i]
	elseif j == 3 then
		return talent_special_attack[i]
	elseif j == 4 then
		return talent_armor[i]
	elseif j == 5 then
		return talent_damage_absorption[i]
	elseif j == 6 then
		return talent_recover_hp[i]
	elseif j == 7 then
		return talent_gold[i]
	elseif j == 8 then
		return talent_reputation[i]
	elseif j == 9 then
		return talent_lumber[i]
	elseif j == 10 then
		return talent_six_attribute[i]
	endif
	return 0
endfunction
function getTalentDesc takes integer j,integer level returns string
	if level <= 0 then
		return "未激活"
	endif
	if level > 5 then
		return "已满级"
	endif
	if j == 1 then
		return talentThreeAttributeDesc[level]
	elseif j == 2 then
		return talentCriticalAttackDesc[level]
	elseif j == 3 then
		return talentSpecialAttackDesc[level]
	elseif j == 4 then
		return talentArmorDesc[level]
	elseif j == 5 then
		return talentDamageAbsorptionDesc[level]
	elseif j == 6 then
		return talentRecoverHpDesc[level]
	elseif j == 7 then
		return talentGoldDesc[level]
	elseif j == 8 then
		return talentReputationDesc[level]
	elseif j == 9 then
		return talentLumberDesc[level]
	elseif j == 10 then
		return talentSixAttributeDesc[level]
	endif
	return ""
endfunction
function showTalentTreeHint takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
 local integer j= 1
 local integer level= 0
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > 10
			if DzGetTriggerUIEventFrame() == s__Frame_id[talentItemButton[j]] then
				call DzFrameSetAlpha(s__Frame_id[(talentItemWidget[j])], (128)) // INLINED!!
			
				// 青色名称
				call DzFrameSetText(s__Frame_id[(talentItemWidget[101])], ("|CFF00FFCD" + talentName[j] + "|r")) // INLINED!!
				// 黄色等级
				set level=getTalentLevel(i , j)
				call DzFrameSetText(s__Frame_id[(talentItemWidget[102])], ("|CF0FFD700等级：" + I2S(level) + "/ 5|r")) // INLINED!!
				// 紫色描述
				call DzFrameSetText(s__Frame_id[(talentItemWidget[103])], ("|CFFA020F0" + getTalentDesc(j , level) + "|r")) // INLINED!!
				// 橙色下一级描述
				call DzFrameSetText(s__Frame_id[(talentItemWidget[104])], ("|CFFFFA500下一级：" + getTalentDesc(j , level + 1) + "|r")) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(talentItemWidget[104])], (BOTTOM ), s__Frame_id[( talentItemWidget[j] )], ( TOP ), (( 0 )*1.0), (( 0.01)*1.0)) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(talentItemWidget[103])], (BOTTOM ), s__Frame_id[( talentItemWidget[104] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(talentItemWidget[102])], (BOTTOM ), s__Frame_id[( talentItemWidget[103] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(talentItemWidget[101])], (BOTTOM ), s__Frame_id[( talentItemWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
				call s__Frame_show(talentItemWidget[100])
			endif
			set j=j + 1
		endloop
	endif
endfunction
function hideTalentTreeHint takes nothing returns nothing
 local integer j= 1
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > 10
			if DzGetTriggerUIEventFrame() == s__Frame_id[talentItemButton[j]] then
				call DzFrameSetAlpha(s__Frame_id[(talentItemWidget[j])], (0)) // INLINED!!
			endif
			set j=j + 1
		endloop
		call s__Frame_hide(talentItemWidget[100])
	endif
endfunction
function canAddPoint takes integer i,integer j returns boolean
 local integer level= getTalentLevel(i , j)
 local integer k= 0
 local integer preLevel= 0
	// 前置条件
	if j == 2 then
		set k=1
	elseif j == 3 then
		set k=2
	elseif j == 5 then
		set k=4
	elseif j == 6 then
		set k=5
	elseif j == 8 then
		set k=7
	elseif j == 9 or j == 10 then
		set k=8
	endif
	if k > 0 then
		set preLevel=getTalentLevel(i , k)
		if preLevel <= 0 then
			call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10, "|CFFFF0000上一项天赋还未激活|r")
			return false
		endif
	endif
	if level >= 5 then
		call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10, "|CFFFF0000已经达到最大等级|r")
		return false
	endif
	return true
endfunction
function talentTreeAddPoint takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
 local integer j= 1
 local integer level= 1
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		loop
			exitwhen j > 10
			if DzGetTriggerUIEventFrame() == s__Frame_id[talentItemButton[j]] and canAddPoint(i , j) then
				if passportCoin[i] >= 5 then
					
					// 更新等级相关的说明
					set level=getTalentLevel(i , j) + 1
					call DzFrameSetText(s__Frame_id[(talentLevelWidget[j])], ("Lv." + I2S(level))) // INLINED!!
					call DzFrameSetText(s__Frame_id[(talentItemWidget[102])], ("|CF0FFD700等级：" + I2S(level) + "/ 5|r")) // INLINED!!
					call DzFrameSetText(s__Frame_id[(talentItemWidget[103])], ("|CFFA020F0" + getTalentDesc(j , level) + "|r")) // INLINED!!
					call DzFrameSetText(s__Frame_id[(talentItemWidget[104])], ("|CFFFFA500下一级：" + getTalentDesc(j , level + 1) + "|r")) // INLINED!!
					call DzFrameSetText(s__Frame_id[(talentCoinText)], (I2S(passportCoin[i] - 5))) // INLINED!!
				endif
				call DzSyncData("talentPoint" + I2S(j), I2S(i))
			endif
			set j=j + 1
		endloop
	endif
endfunction
function doToggleQimenStatus takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set qimen_status[i]=qimen_status[i] + 1
	if qimen_status[i] == 3 then
		set qimen_status[i]=0
	endif
	if Player(i - 1) == GetLocalPlayer() then
		if qimen_status[i] == 0 then
			// call qimen_button.setText("伤害")
			call DzFrameSetTexture(s__Frame_id[(qimen_widget)], ("war3mapImported\\qm_sh.tga"), 0) // INLINED!!
		elseif qimen_status[i] == 1 then
			// call qimen_button.setText("六围")
			call DzFrameSetTexture(s__Frame_id[(qimen_widget)], ("war3mapImported\\qm_lw.tga"), 0) // INLINED!!
		elseif qimen_status[i] == 2 then
			// call qimen_button.setText("护体")
			call DzFrameSetTexture(s__Frame_id[(qimen_widget)], ("war3mapImported\\qm_ht.tga"), 0) // INLINED!!
		endif
	endif
endfunction
function toggleQimenStatus takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
	// call doToggleQimenStatus(i)
	call DzSyncData("qimen", I2S(i))
endfunction
function hideAddButtons takes integer i returns nothing
	call s__Frame_hide(plusWidget[1])
	call s__Frame_hide(plusWidget[2])
	call s__Frame_hide(plusWidget[3])
	call s__Frame_hide(plusWidget[4])
	call s__Frame_hide(plusWidget[5])
	call s__Frame_hide(plusWidget[6])
	call s__Frame_hide(plusButton[1])
	call s__Frame_hide(plusButton[2])
	call s__Frame_hide(plusButton[3])
	call s__Frame_hide(plusButton[4])
	call s__Frame_hide(plusButton[5])
	call s__Frame_hide(plusButton[6])
endfunction
function showAddButtons takes integer i returns nothing
	call s__Frame_show(plusWidget[1])
	call s__Frame_show(plusWidget[2])
	call s__Frame_show(plusWidget[3])
	call s__Frame_show(plusWidget[4])
	call s__Frame_show(plusWidget[5])
	call s__Frame_show(plusWidget[6])
	call s__Frame_show(plusButton[1])
	call s__Frame_show(plusButton[2])
	call s__Frame_show(plusButton[3])
	call s__Frame_show(plusButton[4])
	call s__Frame_show(plusButton[5])
	call s__Frame_show(plusButton[6])
endfunction
function addGengu takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set gengu[i]=gengu[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addWuxing takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set wuxing[i]=wuxing[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addJingmai takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set jingmai[i]=jingmai[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addFuyuan takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set fuyuan[i]=fuyuan[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addDanpo takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set danpo[i]=danpo[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addYishu takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set yishu[i]=yishu[i] + 1
	set udg_shuxing[i]=udg_shuxing[i] - 1
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
	endif
endfunction
function addAttr takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
 local integer frameId= DzGetTriggerUIEventFrame()
	if udg_shuxing[i] <= 0 and Player(i - 1) == GetLocalPlayer() then
		call hideAddButtons(i)
		return
	endif
	if frameId == s__Frame_id[plusButton[1]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[110])], (I2S(gengu[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("gengu", I2S(i))
	elseif frameId == s__Frame_id[plusButton[2]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[112])], (I2S(wuxing[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("wuxing", I2S(i))
	elseif frameId == s__Frame_id[plusButton[3]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[114])], (I2S(jingmai[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("jingmai", I2S(i))
	elseif frameId == s__Frame_id[plusButton[4]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[116])], (I2S(fuyuan[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("fuyuan", I2S(i))
	elseif frameId == s__Frame_id[plusButton[5]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[118])], (I2S(danpo[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("danpo", I2S(i))
	elseif frameId == s__Frame_id[plusButton[6]] then
		if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
			call DzFrameSetText(s__Frame_id[(zwidget[120])], (I2S(yishu[i] + 1))) // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i] - 1))) // INLINED!!
		endif
		call DzSyncData("yishu", I2S(i))
	endif
endfunction
function pressEsc takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerKeyPlayer())
	if DzGetTriggerKeyPlayer() == GetLocalPlayer() then
		call DzFrameSetText(s__Frame_id[(zwidget[102])], (I2S(IMinBJ(R2I(( udg_baojilv[i] * 100. )), 100)) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[104])], (I2S(R2I(( udg_baojishanghai[i] * 100. ))) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[106])], (I2S(R2I(( udg_shanghaijiacheng[i] * 100. ))) + "%")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[108])], (I2S(IMinBJ(R2I(( udg_shanghaixishou[i] * 100. )), R2I(max_damage_absorb[i] * 100))) + "%")) // INLINED!!
		
		call DzFrameSetText(s__Frame_id[(zwidget[110])], (I2S(gengu[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[112])], (I2S(wuxing[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[114])], (I2S(jingmai[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[116])], (I2S(fuyuan[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[118])], (I2S(danpo[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[120])], (I2S(yishu[i]))) // INLINED!!
		
		call DzFrameSetText(s__Frame_id[(zwidget[122])], (I2S(juexuelingwu[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[124])], (I2S(xiuxing[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[126])], ("第" + I2S(wugongxiuwei[i]) + "层")) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[128])], (I2S(shengwang[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[130])], (I2S(shoujiajf[i]))) // INLINED!!
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DzFrameSetText(s__Frame_id[(zwidget[132])], (I2S(yongdanshu[i]) + " / 10")) // INLINED!!
		else
			call DzFrameSetText(s__Frame_id[(zwidget[132])], (I2S(yongdanshu[i]) + " / 15")) // INLINED!!
		endif
		call DzFrameSetText(s__Frame_id[(zwidget[134])], (I2S(special_attack[i]))) // INLINED!!
		call DzFrameSetText(s__Frame_id[(zwidget[136])], (I2S(udg_shuxing[i]))) // INLINED!!
		
		call s__Frame_toggle(zwidget[14])
		if udg_shuxing[i] <= 0 then
			call hideAddButtons(i)
		else
			call showAddButtons(i)
		endif
	endif
endfunction
function releaseEsc takes nothing returns nothing
	if DzGetTriggerKeyPlayer() == GetLocalPlayer() then
		call s__Frame_hide(zwidget[14])
	endif
endfunction
function pressTab takes nothing returns nothing
	if DzGetTriggerKeyPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(zwidget[3])
	endif
endfunction
function toggleShowDamage takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(checkboxWidget[2])
		call DzSyncData("showDmg", I2S(i))
	endif
endfunction
function doToggleShowDamage takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	set showDamage[i]=not showDamage[i]
endfunction
function toggleShowAbilityEffect takes nothing returns nothing
 local integer i= 1 + GetPlayerId(DzGetTriggerUIEventPlayer())
	if DzGetTriggerUIEventPlayer() == GetLocalPlayer() then
		call s__Frame_toggle(checkboxWidget[4])
		call DzSyncData("showEffect", I2S(i))
	endif
endfunction
function doToggleShowEffect takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
	if IsPlayerInForce(Player(i - 1), showEffectForce) then
		call ForceRemovePlayer(showEffectForce, Player(i - 1))
	else
		call ForceAddPlayer(showEffectForce, Player(i - 1))
	endif
endfunction
// 加点1-三围
function addTalentPoint1 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 1 , 1)
endfunction
// 加点2-暴击伤害
function addTalentPoint2 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 1 , 2)
endfunction
// 加点3-特殊攻击
function addTalentPoint3 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 1 , 3)
endfunction
// 加点4-护甲
function addTalentPoint4 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 2 , 1)
endfunction
// 加点5-伤害吸收
function addTalentPoint5 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 2 , 2)
endfunction
// 加点6-气血回复
function addTalentPoint6 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 2 , 3)
endfunction
// 加点7-金钱
function addTalentPoint7 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 3 , 1)
endfunction
// 加点8-声望
function addTalentPoint8 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 3 , 2)
endfunction
// 加点9-木材
function addTalentPoint9 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 3 , 3)
endfunction
// 加点10-六围
function addTalentPoint10 takes nothing returns nothing
	call addPointInTalentTree(S2I(DzGetTriggerSyncData()) , 3 , 4)
endfunction
function calculateTotalPointFromPassport takes integer i returns integer
 local integer j= 1
 local integer coin= 0
	loop
		exitwhen j > 8
		if passportLevelS1[i] >= j and (YDWEBitwise_AND((passportSwitchS1[i] ) , ((1 ) * YDWEBitwise__C2[( ( j) - 1)])) != 0) then // INLINED!!
			if j == 1 or j == 3 or j == 5 or j == 6 or j == 7 then
				set coin=coin + 10
			endif
		
		
			// 精英
			// 一级 宠物皮肤魁岚
			// 二级 十个决战币
			// 三级 十个决战币
			// 四级 十个决战币
			// 五级 翅膀 六围+1
			// 六级 十个决战币
			// 七级 十个决战币
			// 八级 英雄皮肤 初始攻击范围+300
			if DzAPI_Map_HasMallItem(Player(i - 1), PROPERTY_PASSPORT_S1) or udg_isTest[i - 1] then
				if j == 2 or j == 3 or j == 4 or j == 6 or j == 7 then
					set coin=coin + 10
				endif
			endif
		endif
		set j=j + 1
	endloop
	return coin
endfunction
// 重置天赋点数
function doResetTalent takes nothing returns nothing
 local integer i= S2I(DzGetTriggerSyncData())
 local integer coin= calculateTotalPointFromPassport(i)
	set talentTotalPoint[i]=0
	set talent_three_attribute[i]=0
	set talent_critical_attack[i]=0
	set talent_special_attack[i]=0
	set talent_armor[i]=0
	set talent_damage_absorption[i]=0
	set talent_recover_hp[i]=0
	set talent_gold[i]=0
	set talent_reputation[i]=0
	set talent_lumber[i]=0
	set talent_six_attribute[i]=0
		call setCoin(coin , i)
	call DzAPI_Map_StoreString(Player(i - 1) , TALENT_SAVE , "MAGIC")
	if ( Player(i - 1) == GetLocalPlayer() ) then
		call DzFrameSetText(s__Frame_id[(talentCoinText)], (I2S(passportCoin[i]))) // INLINED!!
	endif
endfunction
function drawUI_Conditions takes nothing returns boolean
 local integer index= 100
 local integer ff0= DzFrameGetHeroManaBar(0)
 local integer ff1= DzFrameGetHeroBarButton(1)
 local integer ff2= DzFrameGetHeroBarButton(2)
 local integer ff3= DzFrameGetHeroBarButton(3)
 local integer fh1= DzFrameGetHeroHPBar(1)
 local integer fh2= DzFrameGetHeroHPBar(2)
 local integer fh3= DzFrameGetHeroHPBar(3)
 local integer fm1= DzFrameGetHeroManaBar(1)
 local integer fm2= DzFrameGetHeroManaBar(2)
 local integer fm3= DzFrameGetHeroManaBar(3)
 local integer k= 1
 local integer j= 1
	
	call DzFrameClearAllPoints(ff1)
	call DzFrameClearAllPoints(ff2)
	call DzFrameClearAllPoints(ff3)
	call DzFrameClearAllPoints(fh1)
	call DzFrameClearAllPoints(fh2)
	call DzFrameClearAllPoints(fh3)
	call DzFrameClearAllPoints(fm1)
	call DzFrameClearAllPoints(fm2)
	call DzFrameClearAllPoints(fm3)
	
	call DzFrameSetSize(ff1, 0.021, 0.028)
	call DzFrameSetSize(ff2, 0.021, 0.028)
	call DzFrameSetSize(ff3, 0.021, 0.028)
	call DzFrameSetSize(fh1, 0.01, 0.01)
	call DzFrameSetSize(fh2, 0.01, 0.01)
	call DzFrameSetSize(fh3, 0.01, 0.01)
	call DzFrameSetSize(fm1, 0.01, 0.01)
	call DzFrameSetSize(fm2, 0.01, 0.01)
	call DzFrameSetSize(fm3, 0.01, 0.01)
	
	call DzFrameSetPoint(ff1, LEFT, DzFrameGetMinimap(), TOPRIGHT, 0.008, - 0.001)
	call DzFrameSetPoint(ff2, 1, ff1, 7, 0, - 0.004)
	call DzFrameSetPoint(ff3, 1, ff2, 7, 0, - 0.004)
	call DzFrameSetPoint(fh1, 6, DzGetGameUI(), 8, .8, .6)
	call DzFrameSetPoint(fh2, 6, DzGetGameUI(), 8, .8, .6)
	call DzFrameSetPoint(fh3, 6, DzGetGameUI(), 8, .8, .6)
	call DzFrameSetPoint(fm1, 6, DzGetGameUI(), 8, .8, .6)
	call DzFrameSetPoint(fm2, 6, DzGetGameUI(), 8, .8, .6)
	call DzFrameSetPoint(fm3, 6, DzGetGameUI(), 8, .8, .6)
	
	call DzLoadToc("ui\\custom.toc")
	// 帮助按钮
	set helpWidget=s__Frame_newImage1(GUI , "war3mapImported\\help.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(helpWidget)], (3 ), s__Frame_id[( s__Frame_getFrame(DzFrameGetHeroBarButton(0)) )], ( 5 ), (( 0.05 )*1.0), (( - 0.005)*1.0)) // INLINED!!
	
	set helpButton=s__Frame_newTextButton(helpWidget)
	call DzFrameSetAllPoints(s__Frame_id[(helpButton)], s__Frame_id[(helpWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpButton)], (FRAME_EVENT_PRESSED ), ( function toggleAllHelpWidgets), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpButton)], (FRAME_MOUSE_ENTER ), ( function toggleHelpWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpButton)], (FRAME_MOUSE_LEAVE ), ( function toggleHelpWidget), false) // INLINED!!
	set helpAttrWidget=s__Frame_newImage1(GUI , "war3mapImported\\help_attr.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(helpAttrWidget)], (CENTER ), s__Frame_id[( helpWidget )], ( CENTER ), (( - 0.032 )*1.0), (( - 0.04)*1.0)) // INLINED!!
	call s__Frame_hide(helpAttrWidget)
	set helpAttrButton=s__Frame_newTextButton(helpAttrWidget)
	call DzFrameSetAllPoints(s__Frame_id[(helpAttrButton)], s__Frame_id[(helpAttrWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpAttrButton)], (FRAME_EVENT_PRESSED ), ( function toggleAttribute), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpAttrButton)], (FRAME_MOUSE_ENTER ), ( function toggleHelpAttrWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpAttrButton)], (FRAME_MOUSE_LEAVE ), ( function toggleHelpAttrWidget), false) // INLINED!!
	set helpCommandWidget=s__Frame_newImage1(GUI , "war3mapImported\\help_command.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(helpCommandWidget)], (CENTER ), s__Frame_id[( helpWidget )], ( CENTER ), (( 0.032 )*1.0), (( - 0.04)*1.0)) // INLINED!!
	call s__Frame_hide(helpCommandWidget)
	set helpCommandButton=s__Frame_newTextButton(helpCommandWidget)
	call DzFrameSetAllPoints(s__Frame_id[(helpCommandButton)], s__Frame_id[(helpCommandWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpCommandButton)], (FRAME_EVENT_PRESSED ), ( function toggleCommand), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpCommandButton)], (FRAME_MOUSE_ENTER ), ( function toggleHelpCommandWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpCommandButton)], (FRAME_MOUSE_LEAVE ), ( function toggleHelpCommandWidget), false) // INLINED!!
	set helpKungfuWidget=s__Frame_newImage1(GUI , "war3mapImported\\help_kungfu.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(helpKungfuWidget)], (CENTER ), s__Frame_id[( helpWidget )], ( CENTER ), (( 0 )*1.0), (( - 0.04 * 1.414)*1.0)) // INLINED!!
	call s__Frame_hide(helpKungfuWidget)
	set helpKungfuButton=s__Frame_newTextButton(helpKungfuWidget)
	call DzFrameSetAllPoints(s__Frame_id[(helpKungfuButton)], s__Frame_id[(helpKungfuWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpKungfuButton)], (FRAME_EVENT_PRESSED ), ( function toggleTutorial), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpKungfuButton)], (FRAME_MOUSE_ENTER ), ( function toggleHelpKungfuWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(helpKungfuButton)], (FRAME_MOUSE_LEAVE ), ( function toggleHelpKungfuWidget), false) // INLINED!!
	set tutorial=s__Frame_newImage1(GUI , "war3mapImported\\tutorial.tga" , 0.45 , 0.4)
	call DzFrameSetPoint(s__Frame_id[(tutorial)], (4 ), s__Frame_id[( GUI )], ( 4 ), (( 0.0 )*1.0), (( 0.0)*1.0)) // INLINED!!
	call s__Frame_hide(tutorial)
	set closeTutorialWidget=s__Frame_newImage1(tutorial , "war3mapImported\\close0.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closeTutorialWidget)], (CENTER ), s__Frame_id[( tutorial )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	set closeTutorialButton=s__Frame_newTextButton(closeTutorialWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeTutorialButton)], s__Frame_id[(closeTutorialWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeTutorialButton)], (FRAME_EVENT_PRESSED ), ( function toggleTutorial), false) // INLINED!!
	set command=s__Frame_newImage1(GUI , "war3mapImported\\command.tga" , 0.45 , 0.4)
	call DzFrameSetPoint(s__Frame_id[(command)], (4 ), s__Frame_id[( GUI )], ( 4 ), (( 0.0 )*1.0), (( 0.0)*1.0)) // INLINED!!
	call s__Frame_hide(command)
	set closeCommandWidget=s__Frame_newImage1(command , "war3mapImported\\close0.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closeCommandWidget)], (CENTER ), s__Frame_id[( command )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	set closeCommandButton=s__Frame_newTextButton(closeCommandWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeCommandButton)], s__Frame_id[(closeCommandWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeCommandButton)], (FRAME_EVENT_PRESSED ), ( function toggleCommand), false) // INLINED!!
	set attribute=s__Frame_newImage1(GUI , "war3mapImported\\attribute.tga" , 0.45 , 0.4)
	call DzFrameSetPoint(s__Frame_id[(attribute)], (4 ), s__Frame_id[( GUI )], ( 4 ), (( 0.0 )*1.0), (( 0.0)*1.0)) // INLINED!!
	call s__Frame_hide(attribute)
	set closeAttributeWidget=s__Frame_newImage1(attribute , "war3mapImported\\close0.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closeAttributeWidget)], (CENTER ), s__Frame_id[( attribute )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	set closeAttributeButton=s__Frame_newTextButton(closeAttributeWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeAttributeButton)], s__Frame_id[(closeAttributeWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeAttributeButton)], (FRAME_EVENT_PRESSED ), ( function toggleAttribute), false) // INLINED!!
	// 通行证按钮
	set passportWidget=s__Frame_newImage1(GUI , "war3mapImported\\passport.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(passportWidget)], (LEFT ), s__Frame_id[( helpWidget )], ( RIGHT ), (( 0.01 )*1.0), (( 0)*1.0)) // INLINED!!
	set passportButton=s__Frame_newTextButton(passportWidget)
	call DzFrameSetAllPoints(s__Frame_id[(passportButton)], s__Frame_id[(passportWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(passportButton)], (FRAME_EVENT_PRESSED ), ( function togglePassport), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(passportButton)], (FRAME_MOUSE_ENTER ), ( function togglePassportWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(passportButton)], (FRAME_MOUSE_LEAVE ), ( function togglePassportWidget), false) // INLINED!!
	// 通行证弹窗
	set passport=s__Frame_newImage1(GUI , "PassportS1.tga" , 0.35 , 0.3)
	call DzFrameSetPoint(s__Frame_id[(passport)], (CENTER ), s__Frame_id[( GUI )], ( CENTER ), (( 0.0 )*1.0), (( 0.05)*1.0)) // INLINED!!
	call s__Frame_hide(passport)
	set closePassportWidget=s__Frame_newImage1(passport , "war3mapImported\\close0.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closePassportWidget)], (CENTER ), s__Frame_id[( passport )], ( TOPRIGHT ), (( - 0.01 )*1.0), (( - 0.061)*1.0)) // INLINED!!
	set closePassportButton=s__Frame_newTextButton(closePassportWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closePassportButton)], s__Frame_id[(closePassportWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closePassportButton)], (FRAME_EVENT_PRESSED ), ( function togglePassport), false) // INLINED!!
	// 通行证弹窗帮助按钮
	set passportHelpMeWidget=s__Frame_newImage1(passport , "helpme.blp" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(passportHelpMeWidget)], (CENTER ), s__Frame_id[( passport )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.106)*1.0)) // INLINED!!
	set passportHelpMeButton=s__Frame_newTextButton(passportHelpMeWidget)
	call DzFrameSetAllPoints(s__Frame_id[(passportHelpMeButton)], s__Frame_id[(passportHelpMeWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(passportHelpMeButton)], (FRAME_MOUSE_ENTER ), ( function showPassportHelpMe), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(passportHelpMeButton)], (FRAME_MOUSE_LEAVE ), ( function hidePassportHelpMe), false) // INLINED!!
	// 通行证弹窗中的按钮
	loop
		exitwhen k > 16
		set passportAwardWidget[k]=s__Frame_newImage1(passport , "war3mapImported\\gradual.tga" , 0.028 , 0.032)
		// 8个一行
		if ModuloInteger(k, 8) == 1 then
			call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[k])], (LEFT ), s__Frame_id[( passport )], ( LEFT ), (( 0.053 )*1.0), (( - 0.04 - 0.05 * ( k - 1 ) / 8)*1.0)) // INLINED!!
		else
			call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[k])], (LEFT ), s__Frame_id[( passportAwardWidget[k - 1] )], ( RIGHT ), (( 0.0065 )*1.0), (( 0)*1.0)) // INLINED!!
		endif
		call DzFrameSetAlpha(s__Frame_id[(passportAwardWidget[k])], (0)) // INLINED!!
		set passportTickWidget[k]=s__Frame_newImage1(passport , "war3mapImported\\right.tga" , 0.018 , 0.024)
		call DzFrameSetPoint(s__Frame_id[(passportTickWidget[k])], (CENTER ), s__Frame_id[( passportAwardWidget[k] )], ( CENTER ), (( 0 )*1.0), (( - 0.016)*1.0)) // INLINED!!
		set passportAwardButton[k]=s__Frame_newTextButton(passportAwardWidget[k])
		call DzFrameSetAllPoints(s__Frame_id[(passportAwardButton[k])], s__Frame_id[(passportAwardWidget[k])]) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(passportAwardButton[k])], (FRAME_MOUSE_ENTER ), ( function showPassportAward), false) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(passportAwardButton[k])], (FRAME_MOUSE_LEAVE ), ( function hidePassportAward), false) // INLINED!!
		set j=1
		loop
			exitwhen j > 5
			if k <= 8 and passportLevelS1[j] < k then
				if Player(j - 1) == GetLocalPlayer() then
					call s__Frame_hide(passportTickWidget[k])
				endif
			endif
			if k > 8 then
				if passportLevelS1[j] < k - 8 then
					if Player(j - 1) == GetLocalPlayer() then
						call s__Frame_hide(passportTickWidget[k])
					endif
				endif
				if not DzAPI_Map_HasMallItem(Player(j - 1), PROPERTY_PASSPORT_S1) and not udg_isTest[j - 1] then
					if Player(j - 1) == GetLocalPlayer() then
						call s__Frame_hide(passportTickWidget[k])
					endif
				endif
			endif
			set j=j + 1
		endloop
		set k=k + 1
	endloop
	set passportAwardWidget[100]=s__Frame_newTips0(GUI , "tipbox")
	call s__Frame_hide(passportAwardWidget[100])
	set passportAwardWidget[101]=s__Frame_newText1(passportAwardWidget[100] , "" , "TXA14")
	call DzFrameSetSize(s__Frame_id[(passportAwardWidget[101])], ((0.16 )*1.0), (( 0)*1.0)) // INLINED!!
	set passportAwardWidget[102]=s__Frame_newText1(passportAwardWidget[100] , "" , "TXA11")
	call DzFrameSetSize(s__Frame_id[(passportAwardWidget[102])], ((0.16 )*1.0), (( 0)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[100])], (TOPLEFT ), s__Frame_id[( passportAwardWidget[101] )], ( TOPLEFT ), (( - 0.005 )*1.0), (( 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[100])], (BOTTOMRIGHT ), s__Frame_id[( passportAwardWidget[102] )], ( BOTTOMRIGHT ), (( 0.005 )*1.0), (( - 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[102])], (BOTTOM ), s__Frame_id[( passportAwardWidget[1] )], ( TOP ), (( 0 )*1.0), (( 0.01)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(passportAwardWidget[101])], (BOTTOM ), s__Frame_id[( passportAwardWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
	// 天赋树按钮
	set talentWidget=s__Frame_newImage1(GUI , "war3mapImported\\talent.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(talentWidget)], (LEFT ), s__Frame_id[( passportWidget )], ( RIGHT ), (( 0.01 )*1.0), (( 0)*1.0)) // INLINED!!
	set talentButton=s__Frame_newTextButton(talentWidget)
	call DzFrameSetAllPoints(s__Frame_id[(talentButton)], s__Frame_id[(talentWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentButton)], (FRAME_EVENT_PRESSED ), ( function toggleTalentTree), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentButton)], (FRAME_MOUSE_ENTER ), ( function toggleTalentWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentButton)], (FRAME_MOUSE_LEAVE ), ( function toggleTalentWidget), false) // INLINED!!
	// 天赋树弹窗
	set talentTree=s__Frame_newImage1(GUI , "war3mapImported\\TalentTree.tga" , 0.42 , 0.32)
	call DzFrameSetPoint(s__Frame_id[(talentTree)], (CENTER ), s__Frame_id[( GUI )], ( CENTER ), (( 0.0 )*1.0), (( 0.05)*1.0)) // INLINED!!
	call s__Frame_hide(talentTree)
	set closeTalentWidget=s__Frame_newImage1(talentTree , "war3mapImported\\close0.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closeTalentWidget)], (CENTER ), s__Frame_id[( talentTree )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	set closeTalentButton=s__Frame_newTextButton(closeTalentWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeTalentButton)], s__Frame_id[(closeTalentWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeTalentButton)], (FRAME_EVENT_PRESSED ), ( function toggleTalentTree), false) // INLINED!!
	set talentCoinIcon=s__Frame_newImage1(talentTree , "war3mapImported\\coin.blp" , 0.015 , 0.02)
	call DzFrameSetPoint(s__Frame_id[(talentCoinIcon)], (CENTER ), s__Frame_id[( talentTree )], ( TOPRIGHT ), (( - 0.06 )*1.0), (( - 0.02)*1.0)) // INLINED!!
	set j=1
	loop
		exitwhen j > 5
		if Player(j - 1) == GetLocalPlayer() then
			set talentCoinText=s__Frame_newText1(talentTree , I2S(passportCoin[j]) , "TXA14")
		endif
		set j=j + 1
	endloop
	call DzFrameSetPoint(s__Frame_id[(talentCoinText)], (LEFT ), s__Frame_id[( talentCoinIcon )], ( RIGHT ), (( 0.005 )*1.0), (( 0)*1.0)) // INLINED!!
	set talentResetWidget=s__Frame_newImage1(talentTree , "war3mapImported\\reset.blp" , 0.04 , 0.032)
	call DzFrameSetPoint(s__Frame_id[(talentResetWidget)], (CENTER ), s__Frame_id[( talentTree )], ( TOPLEFT ), (( 0.06 )*1.0), (( - 0.02)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(talentResetWidget)], (200)) // INLINED!!
	set talentResetButton=s__Frame_newTextButton(talentResetWidget)
	call DzFrameSetAllPoints(s__Frame_id[(talentResetButton)], s__Frame_id[(talentResetWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentResetButton)], (FRAME_EVENT_PRESSED ), ( function resetTalentPoint), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentResetButton)], (FRAME_MOUSE_ENTER ), ( function highlightTalentReset), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(talentResetButton)], (FRAME_MOUSE_LEAVE ), ( function unhighlightTalentReset), false) // INLINED!!
	// 天赋树弹窗中的按钮
	set k=1
	loop
		exitwhen k > 10
		set talentItemWidget[k]=s__Frame_newImage1(talentTree , "war3mapImported\\gradual.tga" , 0.028 , 0.032)
		// 8个一行
		if k == 1 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.071 )*1.0), (( - 0.088)*1.0)) // INLINED!!
		elseif k == 2 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.071 )*1.0), (( - 0.012)*1.0)) // INLINED!!
		elseif k == 3 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.071 )*1.0), (( 0.067)*1.0)) // INLINED!!
		elseif k == 4 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.201 )*1.0), (( - 0.088)*1.0)) // INLINED!!
		elseif k == 5 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.201 )*1.0), (( - 0.012)*1.0)) // INLINED!!
		elseif k == 6 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.201 )*1.0), (( 0.067)*1.0)) // INLINED!!
		elseif k == 7 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.33 )*1.0), (( - 0.088)*1.0)) // INLINED!!
		elseif k == 8 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.33 )*1.0), (( - 0.012)*1.0)) // INLINED!!
		elseif k == 9 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.311 )*1.0), (( 0.067)*1.0)) // INLINED!!
		elseif k == 10 then
			call DzFrameSetPoint(s__Frame_id[(talentItemWidget[k])], (LEFT ), s__Frame_id[( talentTree )], ( LEFT ), (( 0.348 )*1.0), (( 0.067)*1.0)) // INLINED!!
		endif
		call DzFrameSetAlpha(s__Frame_id[(talentItemWidget[k])], (0)) // INLINED!!
		set j=1
		loop
			exitwhen j > 5
			if Player(j - 1) == GetLocalPlayer() then
				set talentLevelWidget[k]=s__Frame_newText1(talentTree , "" , "TXA11")
				call DzFrameSetText(s__Frame_id[(talentLevelWidget[k])], ("Lv." + I2S(getTalentLevel(j , k)))) // INLINED!!
				call DzFrameSetPoint(s__Frame_id[(talentLevelWidget[k])], (CENTER ), s__Frame_id[( talentItemWidget[k] )], ( BOTTOMRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
			endif
			set j=j + 1
		endloop
		
		set talentItemButton[k]=s__Frame_newTextButton(talentItemWidget[k])
		call DzFrameSetAllPoints(s__Frame_id[(talentItemButton[k])], s__Frame_id[(talentItemWidget[k])]) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(talentItemButton[k])], (FRAME_MOUSE_ENTER ), ( function showTalentTreeHint), false) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(talentItemButton[k])], (FRAME_MOUSE_LEAVE ), ( function hideTalentTreeHint), false) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(talentItemButton[k])], (FRAME_EVENT_PRESSED ), ( function talentTreeAddPoint), false) // INLINED!!
		set k=k + 1
	endloop
	// 边框
	set talentItemWidget[100]=s__Frame_newTips0(GUI , "tipbox")
	call s__Frame_hide(talentItemWidget[100])
	// 名称
	set talentItemWidget[101]=s__Frame_newText1(talentItemWidget[100] , "" , "TXA14")
	call DzFrameSetSize(s__Frame_id[(talentItemWidget[101])], ((0.13 )*1.0), (( 0)*1.0)) // INLINED!!
	// 等级
	set talentItemWidget[102]=s__Frame_newText1(talentItemWidget[100] , "" , "TXA11")
	call DzFrameSetSize(s__Frame_id[(talentItemWidget[102])], ((0.13 )*1.0), (( 0)*1.0)) // INLINED!!
	// 描述
	set talentItemWidget[103]=s__Frame_newText1(talentItemWidget[100] , "" , "TXA11")
	call DzFrameSetSize(s__Frame_id[(talentItemWidget[103])], ((0.13 )*1.0), (( 0)*1.0)) // INLINED!!
	// 下一级描述
	set talentItemWidget[104]=s__Frame_newText1(talentItemWidget[100] , "" , "TXA11")
	call DzFrameSetSize(s__Frame_id[(talentItemWidget[104])], ((0.13 )*1.0), (( 0)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[100])], (TOPLEFT ), s__Frame_id[( talentItemWidget[101] )], ( TOPLEFT ), (( - 0.005 )*1.0), (( 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[100])], (BOTTOMRIGHT ), s__Frame_id[( talentItemWidget[104] )], ( BOTTOMRIGHT ), (( 0.005 )*1.0), (( - 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[104])], (BOTTOM ), s__Frame_id[( talentItemWidget[1] )], ( TOP ), (( 0 )*1.0), (( 0.01)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[103])], (BOTTOM ), s__Frame_id[( talentItemWidget[104] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[102])], (BOTTOM ), s__Frame_id[( talentItemWidget[103] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(talentItemWidget[101])], (BOTTOM ), s__Frame_id[( talentItemWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
	
	// 创建功能开启按钮背景
	//set zwidget[1] = Frame.newImage1(GUI, "ReplaceableTextures\\CommandButtons\\BTNtab.blp", 0.03, 0.04)
	//call zwidget[1].setPoint(1, Frame.getFrame(DzFrameGetHeroBarButton(3)), 7, 0.0, -0.012)
	//call zwidget[1].setAlpha(255)
	
	
	// 创建功能开启按钮
	//set zbutton[1] = Frame.newTextButton(zwidget[1])
	//call zbutton[1].setAllPoints(zwidget[1])
	//call zbutton[1].regEvent(FRAME_EVENT_PRESSED, function toggleFuncBoard)
	
	//call DzFrameSetScript(udg_UI_Gn_AN[1], 2, "Trig_GN_JiemianAActions", false)
	//call DzFrameSetScript(udg_UI_Gn_AN[1], 3, "Trig_GN_JiemianBActions", false)
	//call DzFrameSetScript(udg_UI_Gn_AN[1], 1, "Trig_GN_JiemianCActions", false)
	// 功能界面
	set zwidget[3]=s__Frame_newImage1(GUI , "war3mapImported\\jz01.tga" , 0.3 , 0.3)
	call DzFrameSetPoint(s__Frame_id[(zwidget[3])], (4 ), s__Frame_id[( GUI )], ( 4 ), (( 0.0 )*1.0), (( 0.08)*1.0)) // INLINED!!
	call s__Frame_hide(zwidget[3])
	
	// 关闭按钮贴图
	set zwidget[4]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\close.tga" , 0.02 , 0.02)
	call DzFrameSetPoint(s__Frame_id[(zwidget[4])], (4 ), s__Frame_id[( zwidget[3] )], ( 2 ), (( - 0.01 )*1.0), (( - 0.01)*1.0)) // INLINED!!
	
	// 关闭按钮
	set zbutton[2]=s__Frame_newTextButton(zwidget[4])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[2])], s__Frame_id[(zwidget[4])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[2])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	
	// 任务面板
	set zwidget[5]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\achievement01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[5])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.021)*1.0)) // INLINED!!
	
	set zbutton[3]=s__Frame_newTextButton(zwidget[5])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[3])], s__Frame_id[(zwidget[5])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[3])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[3])], (FRAME_MOUSE_ENTER ), ( function toggleWidget5), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[3])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget5), false) // INLINED!!
	
	// 地图成就
	set zwidget[6]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\achievement01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[6])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.061)*1.0)) // INLINED!!
	
	set zbutton[4]=s__Frame_newTextButton(zwidget[6])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[4])], s__Frame_id[(zwidget[6])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[4])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[4])], (FRAME_MOUSE_ENTER ), ( function toggleWidget6), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[4])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget6), false) // INLINED!!
	
	set zwidget[7]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\non_open01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[7])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.101)*1.0)) // INLINED!!
	
	set zbutton[5]=s__Frame_newTextButton(zwidget[7])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[5])], s__Frame_id[(zwidget[7])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[5])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[5])], (FRAME_MOUSE_ENTER ), ( function toggleWidget7), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[5])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget7), false) // INLINED!!
	
	set zwidget[8]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\non_open01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[8])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.141)*1.0)) // INLINED!!
	
	set zbutton[6]=s__Frame_newTextButton(zwidget[8])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[6])], s__Frame_id[(zwidget[8])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[6])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[6])], (FRAME_MOUSE_ENTER ), ( function toggleWidget8), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[6])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget8), false) // INLINED!!
	
	set zwidget[9]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\non_open01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[9])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.181)*1.0)) // INLINED!!
	
	set zbutton[7]=s__Frame_newTextButton(zwidget[9])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[7])], s__Frame_id[(zwidget[9])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[7])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[7])], (FRAME_MOUSE_ENTER ), ( function toggleWidget9), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[7])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget9), false) // INLINED!!
	
	set zwidget[10]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\non_open01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[10])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.221)*1.0)) // INLINED!!
	
	set zbutton[8]=s__Frame_newTextButton(zwidget[10])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[8])], s__Frame_id[(zwidget[10])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[8])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[8])], (FRAME_MOUSE_ENTER ), ( function toggleWidget10), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[8])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget10), false) // INLINED!!
	
	set zwidget[11]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\non_open01.tga" , 0.04 , 0.015)
	call DzFrameSetPoint(s__Frame_id[(zwidget[11])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.035 )*1.0), (( - 0.261)*1.0)) // INLINED!!
	
	set zbutton[9]=s__Frame_newTextButton(zwidget[11])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[9])], s__Frame_id[(zwidget[11])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[9])], (FRAME_EVENT_PRESSED ), ( function toggleFuncBoard), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[9])], (FRAME_MOUSE_ENTER ), ( function toggleWidget11), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[9])], (FRAME_MOUSE_LEAVE ), ( function toggleWidget11), false) // INLINED!!
	
	// 创建属性开启按钮背景
	set zwidget[12]=s__Frame_newImage1(GUI , "ReplaceableTextures\\CommandButtons\\BTNesc.blp" , 0.021 , 0.028)
	call DzFrameSetPoint(s__Frame_id[(zwidget[12])], (1 ), s__Frame_id[( s__Frame_getFrame(DzFrameGetHeroBarButton(3)) )], ( 7 ), (( 0.0 )*1.0), (( - 0.004)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(zwidget[12])], (255)) // INLINED!!
	
	// 创建属性介绍
	//set zwidget[13]= Frame.newText1(zwidget[12], "属性", "TXA10")
	//call zwidget[13].setPoint(4, zwidget[12], 4, 0, 0)
	
	
	// 内化武功面板
	set interAbilityPanel=s__Frame_newImage1(GUI , "war3mapImported\\inter.tga" , 0.166 , 0.06)
	call DzFrameSetPoint(s__Frame_id[(interAbilityPanel)], (CENTER ), s__Frame_id[( GUI )], ( CENTER ), (( 0 )*1.0), (( - 0.15)*1.0)) // INLINED!!
	set closeInterWidget=s__Frame_newImage1(interAbilityPanel , "war3mapImported\\close0.tga" , 0.012 , 0.016)
	call DzFrameSetPoint(s__Frame_id[(closeInterWidget)], (CENTER ), s__Frame_id[( interAbilityPanel )], ( TOPRIGHT ), (( 0 )*1.0), (( - 0.012)*1.0)) // INLINED!!
	set closeInterButton=s__Frame_newTextButton(closeInterWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeInterButton)], s__Frame_id[(closeInterWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeInterButton)], (FRAME_EVENT_PRESSED ), ( function hideInterAbilityPanel), false) // INLINED!!
	// 内化武功图片
	set interAbilityWidget[1]=s__Frame_newImage1(interAbilityPanel , "war3mapImported\\lock.tga" , 0.023 , 0.031)
	call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[1])], (LEFT ), s__Frame_id[( interAbilityPanel )], ( LEFT ), (( 0.014 )*1.0), (( - 0.004)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(interAbilityWidget[1])], (0)) // INLINED!!
	set interAbilityLock[1]=s__Frame_newImage1(interAbilityWidget[1] , "war3mapImported\\lock.tga" , 0.023 , 0.031)
	call DzFrameSetAllPoints(s__Frame_id[(interAbilityLock[1])], s__Frame_id[(interAbilityWidget[1])]) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(interAbilityLock[1])], (150)) // INLINED!!
	set index=2
	loop
		exitwhen index > MAX_INTER_ABILITY_COUNT
		set interAbilityWidget[index]=s__Frame_newImage1(interAbilityPanel , "war3mapImported\\lock.tga" , 0.023 , 0.031)
		call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[index])], (LEFT ), s__Frame_id[( interAbilityWidget[index - 1] )], ( RIGHT ), (( 0.002 )*1.0), (( 0)*1.0)) // INLINED!!
		call DzFrameSetAlpha(s__Frame_id[(interAbilityWidget[index])], (0)) // INLINED!!
		set interAbilityLock[index]=s__Frame_newImage1(interAbilityWidget[index] , "war3mapImported\\lock.tga" , 0.023 , 0.031)
		call DzFrameSetAllPoints(s__Frame_id[(interAbilityLock[index])], s__Frame_id[(interAbilityWidget[index])]) // INLINED!!
		call DzFrameSetAlpha(s__Frame_id[(interAbilityLock[index])], (150)) // INLINED!!
		set index=index + 1
	endloop
	set index=1
	loop
		exitwhen index > MAX_INTER_ABILITY_COUNT
		set interAbilityButton[index]=s__Frame_newTextButton(interAbilityWidget[index])
		call DzFrameSetAllPoints(s__Frame_id[(interAbilityButton[index])], s__Frame_id[(interAbilityWidget[index])]) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(interAbilityButton[index])], (FRAME_MOUSE_ENTER ), ( function showInterTip), false) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(interAbilityButton[index])], (FRAME_MOUSE_LEAVE ), ( function hideInterTip), false) // INLINED!!
		set index=index + 1
	endloop
	set index=1
	loop
		exitwhen index > 5
		call refreshInterUI(index)
		set index=index + 1
	endloop
	// 内化武功的说明
	set interAbilityWidget[100]=s__Frame_newTips0(GUI , "tipbox")
	call s__Frame_hide(interAbilityWidget[100])
	
	set interAbilityWidget[101]=s__Frame_newText1(interAbilityWidget[100] , "" , "TXA14")
	call DzFrameSetSize(s__Frame_id[(interAbilityWidget[101])], ((0.16 )*1.0), (( 0)*1.0)) // INLINED!!
	set interAbilityWidget[102]=s__Frame_newText1(interAbilityWidget[100] , "" , "TXA11")
	call DzFrameSetSize(s__Frame_id[(interAbilityWidget[102])], ((0.16 )*1.0), (( 0)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[100])], (TOPLEFT ), s__Frame_id[( interAbilityWidget[101] )], ( TOPLEFT ), (( - 0.005 )*1.0), (( 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[100])], (BOTTOMRIGHT ), s__Frame_id[( interAbilityWidget[102] )], ( BOTTOMRIGHT ), (( 0.005 )*1.0), (( - 0.005)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[102])], (BOTTOM ), s__Frame_id[( interAbilityWidget[1] )], ( TOP ), (( 0 )*1.0), (( 0.03)*1.0)) // INLINED!!
	call DzFrameSetPoint(s__Frame_id[(interAbilityWidget[101])], (BOTTOM ), s__Frame_id[( interAbilityWidget[102] )], ( TOP ), (( 0 )*1.0), (( 0.005)*1.0)) // INLINED!!
	
	// 属性界面
	set zwidget[14]=s__Frame_newImage1(GUI , "war3mapImported\\blackback.tga" , 0.3 , 0.4)
	call DzFrameSetPoint(s__Frame_id[(zwidget[14])], (4 ), s__Frame_id[( GUI )], ( 4 ), (( 0.0 )*1.0), (( 0.03)*1.0)) // INLINED!!
	call s__Frame_hide(zwidget[14])
	
	// 显示属性
	set attrStr[1]="暴击率："
	set attrStr[2]="0%"
	set attrStr[3]="暴击伤害："
	set attrStr[4]="0%"
	set attrStr[5]="伤害加成："
	set attrStr[6]="0%"
	set attrStr[7]="伤害吸收："
	set attrStr[8]="0%"
	set attrStr[9]="根骨："
	set attrStr[10]="0"
	set attrStr[11]="悟性："
	set attrStr[12]="0"
	set attrStr[13]="经脉："
	set attrStr[14]="0"
	set attrStr[15]="福缘："
	set attrStr[16]="0"
	set attrStr[17]="胆魄："
	set attrStr[18]="0"
	set attrStr[19]="医术："
	set attrStr[20]="0"
	set attrStr[21]="绝学领悟："
	set attrStr[22]="0"
	set attrStr[23]="修行："
	set attrStr[24]="0"
	set attrStr[25]="武学修为："
	set attrStr[26]="0"
	set attrStr[27]="江湖声望："
	set attrStr[28]="0"
	set attrStr[29]="守家积分："
	set attrStr[30]="0"
	set attrStr[31]="用丹数量："
	set attrStr[32]="0"
	set attrStr[33]="特殊攻击"
	set attrStr[34]="0"
	set attrStr[35]="自由属性"
	set attrStr[36]="0"
	set passportAwardWidgetString[1]="决战币+10"
	set passportAwardWidgetString[2]="解锁宠物皮肤-蜜蜂"
	set passportAwardWidgetString[3]="决战币+10"
	set passportAwardWidgetString[4]="解锁翅膀，效果：暴击率+2%"
	set passportAwardWidgetString[5]="决战币+10"
	set passportAwardWidgetString[6]="决战币+10"
	set passportAwardWidgetString[7]="决战币+10"
	set passportAwardWidgetString[8]="解锁英雄-空瑶，特性：初始攻击速度+10%"
	set passportAwardWidgetString[9]="解锁宠物皮肤-岚葵"
	set passportAwardWidgetString[10]="决战币+10"
	set passportAwardWidgetString[11]="决战币+10"
	set passportAwardWidgetString[12]="决战币+10"
	set passportAwardWidgetString[13]="解锁翅膀，效果：六种性格属性+1"
	set passportAwardWidgetString[14]="决战币+10"
	set passportAwardWidgetString[15]="决战币+10"
	set passportAwardWidgetString[16]="解锁英雄-启萧，特性：初始攻击范围+250"
	set talentName[1]="三围"
	set talentName[2]="暴击"
	set talentName[3]="特攻"
	set talentName[4]="护甲"
	set talentName[5]="伤害吸收"
	set talentName[6]="气血回复"
	set talentName[7]="金钱获得率"
	set talentName[8]="声望获得率"
	set talentName[9]="木材获得率"
	set talentName[10]="性格属性"
	set talentThreeAttributeDesc[1]="三围 + 20"
	set talentThreeAttributeDesc[2]="三围 + 50"
	set talentThreeAttributeDesc[3]="三围 + 100"
	set talentThreeAttributeDesc[4]="三围 + 150"
	set talentThreeAttributeDesc[5]="三围 + 200"
	set talentCriticalAttackDesc[1]="暴击伤害 + 20%"
	set talentCriticalAttackDesc[2]="暴击伤害 + 40%"
	set talentCriticalAttackDesc[3]="暴击伤害 + 60%"
	set talentCriticalAttackDesc[4]="暴击伤害 + 80%"
	set talentCriticalAttackDesc[5]="暴击伤害 + 100%"
	set talentSpecialAttackDesc[1]="特殊攻击 + 3"
	set talentSpecialAttackDesc[2]="特殊攻击 + 6"
	set talentSpecialAttackDesc[3]="特殊攻击 + 9"
	set talentSpecialAttackDesc[4]="特殊攻击 + 12"
	set talentSpecialAttackDesc[5]="特殊攻击 + 15"
	set talentArmorDesc[1]="护甲 + 20"
	set talentArmorDesc[2]="护甲 + 40"
	set talentArmorDesc[3]="护甲 + 60"
	set talentArmorDesc[4]="护甲 + 80"
	set talentArmorDesc[5]="护甲 + 100"
	set talentDamageAbsorptionDesc[1]="伤害吸收上限 + 2%"
	set talentDamageAbsorptionDesc[2]="伤害吸收上限 + 4%"
	set talentDamageAbsorptionDesc[3]="伤害吸收上限 + 6%"
	set talentDamageAbsorptionDesc[4]="伤害吸收上限 + 8%"
	set talentDamageAbsorptionDesc[5]="伤害吸收上限 + 10%"
	set talentRecoverHpDesc[1]="气血回复 + 1%"
	set talentRecoverHpDesc[2]="气血回复 + 2%"
	set talentRecoverHpDesc[3]="气血回复 + 3%"
	set talentRecoverHpDesc[4]="气血回复 + 4%"
	set talentRecoverHpDesc[5]="气血回复 + 5%"
	set talentGoldDesc[1]="金钱获得率 + 20%"
	set talentGoldDesc[2]="金钱获得率 + 40%"
	set talentGoldDesc[3]="金钱获得率 + 60%"
	set talentGoldDesc[4]="金钱获得率 + 80%"
	set talentGoldDesc[5]="金钱获得率 + 100%"
	set talentReputationDesc[1]="声望获得率 + 10%"
	set talentReputationDesc[2]="声望获得率 + 20%"
	set talentReputationDesc[3]="声望获得率 + 30%"
	set talentReputationDesc[4]="声望获得率 + 40%"
	set talentReputationDesc[5]="声望获得率 + 50%"
	set talentLumberDesc[1]="珍稀币获得率 + 15%"
	set talentLumberDesc[2]="珍稀币获得率 + 30%"
	set talentLumberDesc[3]="珍稀币获得率 + 45%"
	set talentLumberDesc[4]="珍稀币获得率 + 60%"
	set talentLumberDesc[5]="珍稀币获得率 + 75%"
	set talentSixAttributeDesc[1]="悟性 + 3"
	set talentSixAttributeDesc[2]="根骨 + 3"
	set talentSixAttributeDesc[3]="经脉 + 3"
	set talentSixAttributeDesc[4]="胆魄 + 3"
	set talentSixAttributeDesc[5]="医术 + 3"
	
	set index=101
	loop
		exitwhen index > 136
		// set avatarBack = Frame.newImage1(zwidget[14], null, 0.1, 0.09)
		// call avatarBack.setPoint(TOPLEFT, zwidget[14], TOPLEFT, 0.04, -0.02)
		// set avatar = Frame.newSprite(avatarBack, "war3mapImported\\lan10_hei.mdl")
		// call avatar.setAllPoints(avatarBack)
		set closeBtn=s__Frame_newCloseButton(zwidget[14])
		call DzFrameSetPoint(s__Frame_id[(closeBtn)], (TOPRIGHT ), s__Frame_id[( zwidget[14] )], ( TOPRIGHT ), (( - 0.01 )*1.0), (( - 0.01)*1.0)) // INLINED!!
		set zwidget[index]=s__Frame_newText1(zwidget[14] , attrStr[index - 100] , "TXA12")
		if ModuloInteger(index, 2) == 0 then
			call DzFrameSetPoint(s__Frame_id[(zwidget[index])], (TOPLEFT ), s__Frame_id[( zwidget[14] )], ( TOPLEFT ), (( 0.05 + 0.06 * ModuloInteger(index - 101, 4) )*1.0), (( - 0.097 + ( index - 97 ) / 4 * ( - 0.029 ))*1.0)) // INLINED!!
		else
			call DzFrameSetPoint(s__Frame_id[(zwidget[index])], (TOPLEFT ), s__Frame_id[( zwidget[14] )], ( TOPLEFT ), (( 0.05 + 0.065 * ModuloInteger(index - 101, 4) )*1.0), (( - 0.097 + ( index - 97 ) / 4 * ( - 0.029 ))*1.0)) // INLINED!!
		endif
		if ModuloInteger(index, 2) == 0 then
			call DzFrameSetTextColor(s__Frame_id[(zwidget[index])], DzGetColor(255, (55 ), ( 39 ), ( 14))) // INLINED!!
		else
			if index <= 108 then
				call DzFrameSetTextColor(s__Frame_id[(zwidget[index])], DzGetColor(255, (0 ), ( 25 ), ( 200))) // INLINED!!
			elseif index <= 120 then
				call DzFrameSetTextColor(s__Frame_id[(zwidget[index])], DzGetColor(255, (200 ), ( 25 ), ( 0))) // INLINED!!
			else
				call DzFrameSetTextColor(s__Frame_id[(zwidget[index])], DzGetColor(255, (200 ), ( 0 ), ( 200))) // INLINED!!
			endif
		endif
		set index=index + 1
	endloop
	set index=1
	loop
		exitwhen index > 6
		set plusWidget[index]=s__Frame_newImage1(zwidget[14] , "war3mapImported\\plus.tga" , 0.012 , 0.016)
		set plusButton[index]=s__Frame_newTextButton(plusWidget[index])
		call DzFrameSetPoint(s__Frame_id[(plusWidget[index])], (LEFT ), s__Frame_id[( zwidget[108 + index * 2] )], ( LEFT ), (( 0.025 )*1.0), (( 0.0)*1.0)) // INLINED!!
		call DzFrameSetAllPoints(s__Frame_id[(plusButton[index])], s__Frame_id[(plusWidget[index])]) // INLINED!!
		call DzFrameSetScriptByCode(s__Frame_id[(plusButton[index])], (FRAME_EVENT_PRESSED ), ( function addAttr), false) // INLINED!!
		set index=index + 1
	endloop
	
	
	// 创建属性开启按钮
	set zbutton[10]=s__Frame_newTextButton(zwidget[12])
	call DzFrameSetAllPoints(s__Frame_id[(zbutton[10])], s__Frame_id[(zwidget[12])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(zbutton[10])], (FRAME_EVENT_PRESSED ), ( function toggleAttrBoard), false) // INLINED!!
	
	set zwidget[1000]=s__Frame_newText1(zwidget[3] , "杀狼任务（5/6）" , "TXA15")
	call DzFrameSetPoint(s__Frame_id[(zwidget[1000])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.11 )*1.0), (( - 0.035)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(zwidget[1000])], DzGetColor(255, (0 ), ( 0 ), ( 0))) // INLINED!!
	
	set zwidget[1001]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\doing.tga" , 0.044 , 0.033)
	call DzFrameSetPoint(s__Frame_id[(zwidget[1001])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.235 )*1.0), (( - 0.027)*1.0)) // INLINED!!
	
	set zwidget[1002]=s__Frame_newText1(zwidget[3] , "狼皮任务（15/10）" , "TXA15")
	call DzFrameSetPoint(s__Frame_id[(zwidget[1002])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.11 )*1.0), (( - 0.09)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(zwidget[1002])], DzGetColor(255, (0 ), ( 0 ), ( 0))) // INLINED!!
	
	set zwidget[1003]=s__Frame_newImage1(zwidget[3] , "war3mapImported\\done.tga" , 0.044 , 0.033)
	call DzFrameSetPoint(s__Frame_id[(zwidget[1003])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.235 )*1.0), (( - 0.082)*1.0)) // INLINED!!
	
	set zwidget[1004]=s__Frame_newText1(zwidget[3] , "狼皮任务（15/10）" , "TXA15")
	call DzFrameSetPoint(s__Frame_id[(zwidget[1004])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.11 )*1.0), (( - 0.145)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(zwidget[1004])], DzGetColor(255, (0 ), ( 0 ), ( 0))) // INLINED!!
	
	set zwidget[1006]=s__Frame_newText1(zwidget[3] , "狼皮任务（15/10）" , "TXA15")
	call DzFrameSetPoint(s__Frame_id[(zwidget[1006])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.11 )*1.0), (( - 0.2)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(zwidget[1006])], DzGetColor(255, (0 ), ( 0 ), ( 0))) // INLINED!!
	
	set zwidget[1008]=s__Frame_newText1(zwidget[3] , "狼皮任务（15/10）" , "TXA15")
	call DzFrameSetPoint(s__Frame_id[(zwidget[1008])], (TOPLEFT ), s__Frame_id[( zwidget[3] )], ( TOPLEFT ), (( 0.11 )*1.0), (( - 0.255)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(zwidget[1008])], DzGetColor(255, (0 ), ( 0 ), ( 0))) // INLINED!!
	
	set bibo_image=s__Frame_newImage1(GUI , "ReplaceableTextures\\CommandButtons\\PASBTNbibodian.blp" , 0.02 , 0.02)
	call DzFrameSetPoint(s__Frame_id[(bibo_image)], (BOTTOMLEFT ), s__Frame_id[( s__Frame_getFrame(DzFrameGetMinimap()) )], ( TOPLEFT ), (( 0.05 )*1.0), (( 0.02)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(bibo_image)], (255)) // INLINED!!
	call s__Frame_hide(bibo_image)
	
	set bibo_text=s__Frame_newText1(bibo_image , "200" , "TXA10")
	call DzFrameSetPoint(s__Frame_id[(bibo_text)], (TOPRIGHT ), s__Frame_id[( bibo_image )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	call DzFrameSetTextColor(s__Frame_id[(bibo_text)], DzGetColor(255, (255 ), ( 255 ), ( 0))) // INLINED!!
	
	set qimen_widget=s__Frame_newImage1(GUI , "war3mapImported\\qm_sh.tga" , 0.04 , 0.02)
	call DzFrameSetPoint(s__Frame_id[(qimen_widget)], (BOTTOMLEFT ), s__Frame_id[( s__Frame_getFrame(DzFrameGetMinimap()) )], ( TOPLEFT ), (( 0.075 )*1.0), (( 0.02)*1.0)) // INLINED!!
	call s__Frame_hide(qimen_widget)
	
	set qimen_button=s__Frame_newTextButton(qimen_widget)
	call DzFrameSetAllPoints(s__Frame_id[(qimen_button)], s__Frame_id[(qimen_widget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(qimen_button)], (FRAME_EVENT_PRESSED ), ( function toggleQimenStatus), false) // INLINED!!
	
	// set qimen_text = Frame.newText1(qimen_button, "伤害", "TXA12")
	// call qimen_text.setAllPoints(qimen_button)
	
	
	// 按ESC查看人物属性
	// 27 = ESC, 9 = TAB
	call DzTriggerRegisterKeyEventByCode(null, 27, 1, false, function pressEsc)
	//call DzTriggerRegisterKeyEventByCode(null, 27, 0, false, function releaseEsc)
	
	// 按TAB查看任务
	//call DzTriggerRegisterKeyEventByCode(null, 9, 1, false, function pressTab)
	// 右侧显示伤害和特效的复选框
	set checkboxWidget[1]=s__Frame_newImage1(GUI , "war3mapImported\\damage_number.tga" , 0.09 , 0.03)
	call DzFrameSetPoint(s__Frame_id[(checkboxWidget[1])], (RIGHT ), s__Frame_id[( GUI )], ( RIGHT ), (( 0 )*1.0), (( 0.055)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(checkboxWidget[1])], (200)) // INLINED!!
	
	set checkboxWidget[2]=s__Frame_newImage1(GUI , "war3mapImported\\right.tga" , 0.018 , 0.024) // 对号
call DzFrameSetPoint(s__Frame_id[(checkboxWidget[2])], (RIGHT ), s__Frame_id[( checkboxWidget[1] )], ( RIGHT ), (( - 0.006 )*1.0), (( 0.004)*1.0)) // INLINED!!
	set checkboxButton[1]=s__Frame_newTextButton(checkboxWidget[1])
	call DzFrameSetAllPoints(s__Frame_id[(checkboxButton[1])], s__Frame_id[(checkboxWidget[1])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(checkboxButton[1])], (FRAME_EVENT_PRESSED ), ( function toggleShowDamage), false) // INLINED!!
	set checkboxWidget[3]=s__Frame_newImage1(GUI , "war3mapImported\\ability_effect.tga" , 0.09 , 0.03)
	call DzFrameSetPoint(s__Frame_id[(checkboxWidget[3])], (RIGHT ), s__Frame_id[( GUI )], ( RIGHT ), (( 0 )*1.0), (( 0.02)*1.0)) // INLINED!!
	call DzFrameSetAlpha(s__Frame_id[(checkboxWidget[3])], (200)) // INLINED!!
	set checkboxWidget[4]=s__Frame_newImage1(GUI , "war3mapImported\\right.tga" , 0.018 , 0.024) // 对号
call DzFrameSetPoint(s__Frame_id[(checkboxWidget[4])], (RIGHT ), s__Frame_id[( checkboxWidget[3] )], ( RIGHT ), (( - 0.006 )*1.0), (( 0.004)*1.0)) // INLINED!!
	set checkboxButton[2]=s__Frame_newTextButton(checkboxWidget[3])
	call DzFrameSetAllPoints(s__Frame_id[(checkboxButton[2])], s__Frame_id[(checkboxWidget[3])]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(checkboxButton[2])], (FRAME_EVENT_PRESSED ), ( function toggleShowAbilityEffect), false) // INLINED!!
	if GetNumPlayer() >= 2 then
		call s__Frame_hide(checkboxWidget[1])
		call s__Frame_hide(checkboxWidget[2])
		call s__Frame_hide(checkboxWidget[3])
		call s__Frame_hide(checkboxWidget[4])
	endif
	// 显示等级
	set levelWidget=s__Frame_newImage1(GUI , "war3mapImported\\level.tga" , 0.032 , 0.04)
	call DzFrameSetPoint(s__Frame_id[(levelWidget)], (LEFT ), s__Frame_id[( helpWidget )], ( RIGHT ), (( 0.005 )*1.0), (( 0)*1.0)) // INLINED!!
	call s__Frame_hide(levelWidget)
	set levelButton=s__Frame_newTextButton(levelWidget)
	call DzFrameSetAllPoints(s__Frame_id[(levelButton)], s__Frame_id[(levelWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(levelButton)], (FRAME_EVENT_PRESSED ), ( function toggleLevelPopup), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(levelButton)], (FRAME_MOUSE_ENTER ), ( function toggleLevelWidget), false) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(levelButton)], (FRAME_MOUSE_LEAVE ), ( function toggleLevelWidget), false) // INLINED!!
	// 江湖等级的弹出框
	set levelPopup=s__Frame_newImage1(GUI , "war3mapImported\\level_popup.tga" , 0.45 , 0.4)
	call DzFrameSetPoint(s__Frame_id[(levelPopup)], (CENTER ), s__Frame_id[( GUI )], ( CENTER ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	call s__Frame_hide(levelPopup)
	set closeLevelWidget=s__Frame_newImage1(levelPopup , "war3mapImported\\close.tga" , 0.018 , 0.024)
	call DzFrameSetPoint(s__Frame_id[(closeLevelWidget)], (CENTER ), s__Frame_id[( levelPopup )], ( TOPRIGHT ), (( 0 )*1.0), (( 0)*1.0)) // INLINED!!
	set closeLevelButton=s__Frame_newTextButton(closeLevelWidget)
	call DzFrameSetAllPoints(s__Frame_id[(closeLevelButton)], s__Frame_id[(closeLevelWidget)]) // INLINED!!
	call DzFrameSetScriptByCode(s__Frame_id[(closeLevelButton)], (FRAME_EVENT_PRESSED ), ( function toggleLevelPopup), false) // INLINED!!
	
	return false
endfunction
function toggleUI takes nothing returns nothing
 local string s= GetEventPlayerChatString()
 local player p= GetTriggerPlayer()
 local integer i= GetPlayerId(p) + 1
	if s == "hideUI" and p == GetLocalPlayer() then
		call DzFrameShow(DzFrameGetHeroBarButton(1), false)
		call DzFrameShow(DzFrameGetHeroBarButton(2), false)
		call DzFrameShow(DzFrameGetHeroBarButton(3), false)
		call DzFrameShow(DzFrameGetHeroBarButton(1), true)
		call DzFrameShow(DzFrameGetHeroBarButton(2), true)
		call DzFrameShow(DzFrameGetHeroBarButton(3), true)
		call s__Frame_hide(zwidget[12])
		call s__Frame_hide(helpWidget)
		call s__Frame_hide(interAbilityPanel)
		call s__Frame_hide(checkboxWidget[1])
		call s__Frame_hide(checkboxWidget[2])
		call s__Frame_hide(checkboxWidget[3])
		call s__Frame_hide(checkboxWidget[4])
	endif
	if s == "showUI" and p == GetLocalPlayer() then
		call DzFrameShow(DzFrameGetHeroBarButton(1), false)
		call DzFrameShow(DzFrameGetHeroBarButton(2), false)
		call DzFrameShow(DzFrameGetHeroBarButton(3), false)
		call s__Frame_show(zwidget[12])
		call s__Frame_show(helpWidget)
		call s__Frame_show(interAbilityPanel)
		call s__Frame_show(checkboxWidget[1])
		call s__Frame_show(checkboxWidget[2])
		call s__Frame_show(checkboxWidget[3])
		call s__Frame_show(checkboxWidget[4])
	endif
	set p=null
endfunction
function initUI takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer i= 1
 local integer id= 0
	
	call TriggerRegisterTimerEventSingle(t, 1.)
	call TriggerAddCondition(t, Condition(function drawUI_Conditions))
	
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "qimen", false)
	call TriggerAddAction(t, function doToggleQimenStatus)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "wuxing", false)
	call TriggerAddAction(t, function addWuxing)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "gengu", false)
	call TriggerAddAction(t, function addGengu)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "fuyuan", false)
	call TriggerAddAction(t, function addFuyuan)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "jingmai", false)
	call TriggerAddAction(t, function addJingmai)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "danpo", false)
	call TriggerAddAction(t, function addDanpo)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "yishu", false)
	call TriggerAddAction(t, function addYishu)
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "showDmg", false)
	call TriggerAddAction(t, function doToggleShowDamage)
	
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "showEffect", false)
	call TriggerAddAction(t, function doToggleShowEffect)
	// 同步天赋加点事件1-10
	// 同步天赋加点1
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint1", false)
	call TriggerAddAction(t, function addTalentPoint1)
	// 同步天赋加点2
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint2", false)
	call TriggerAddAction(t, function addTalentPoint2)
	// 同步天赋加点3
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint3", false)
	call TriggerAddAction(t, function addTalentPoint3)
	// 同步天赋加点4
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint4", false)
	call TriggerAddAction(t, function addTalentPoint4)
	// 同步天赋加点5
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint5", false)
	call TriggerAddAction(t, function addTalentPoint5)
	// 同步天赋加点6
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint6", false)
	call TriggerAddAction(t, function addTalentPoint6)
	// 同步天赋加点7
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint7", false)
	call TriggerAddAction(t, function addTalentPoint7)
	// 同步天赋加点8
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint8", false)
	call TriggerAddAction(t, function addTalentPoint8)
	// 同步天赋加点9
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint9", false)
	call TriggerAddAction(t, function addTalentPoint9)
	// 同步天赋加点10
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "talentPoint10", false)
	call TriggerAddAction(t, function addTalentPoint10)
	// 重置天赋点数
	set t=CreateTrigger()
	call DzTriggerRegisterSyncData(t, "resetTalent", false)
	call TriggerAddAction(t, function doResetTalent)
	set t=CreateTrigger()
	loop
		exitwhen i > 6
		call TriggerRegisterPlayerChatEvent(t, Player(i - 1), "", true)
		set i=i + 1
	endloop
	call TriggerAddAction(t, function toggleUI)
	// 去掉小地图旁边的按钮
	set i=0
	loop
		exitwhen i > 4
		set id=DzFrameGetMinimapButton(i)
		call DzFrameClearAllPoints(id)
		call DzFrameSetPoint(id, CENTER, DzGetGameUI(), CENTER, 0.8, 0.6)
		set i=i + 1
	endloop
	
	set t=null
endfunction// 彩蛋系统
// 初始化彩蛋系统
function initEgg takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        set heroDeathCounter[i]=0
        set i=i + 1
    endloop
endfunction
//-------各种丹药开始-------//
// 提示达到属性丹药使用上限
function reachDanLimitHint takes integer itemId,unit u returns nothing
	call unitadditembyidswapped(itemId , u)
	call PlaySoundOnUnitBJ(Gh, 100, u)
	call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
endfunction
//属性丹
function VO takes nothing returns boolean
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and ( GetItemTypeId(GetManipulatedItem()) == 1227895375 or GetItemTypeId(GetManipulatedItem()) == 1227895370 or GetItemTypeId(GetManipulatedItem()) == 1227895363 or GetItemTypeId(GetManipulatedItem()) == 1227895368 or GetItemTypeId(GetManipulatedItem()) == 1227895369 or GetItemTypeId(GetManipulatedItem()) == 1227895365 )
endfunction
function WO takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( yongdanshu[i] < 10 ) or ( yongdanshu[i] < 15 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) ) then // INLINED!!
		set yongdanshu[i]=yongdanshu[i] + 1
		call PlaySoundOnUnitBJ(Eh, 100, u)
		if GetItemTypeId(GetManipulatedItem()) == 1227895375 then
			set yishu[i]=yishu[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" + I2S(yishu[i]))
		elseif GetItemTypeId(GetManipulatedItem()) == 1227895370 then
			set wuxing[i]=wuxing[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" + I2S(wuxing[i]))
		elseif GetItemTypeId(GetManipulatedItem()) == 1227895363 then
			set gengu[i]=gengu[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" + I2S(gengu[i]))
		elseif GetItemTypeId(GetManipulatedItem()) == 1227895368 then
			set fuyuan[i]=fuyuan[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" + I2S(fuyuan[i]))
		elseif GetItemTypeId(GetManipulatedItem()) == 1227895369 then
			set jingmai[i]=jingmai[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" + I2S(jingmai[i]))
		elseif GetItemTypeId(GetManipulatedItem()) == 1227895365 then
			set danpo[i]=danpo[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+1|r")
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" + I2S(danpo[i]))
		endif
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 10" ) ))
		else
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 15" ) ))
		endif
	else
		call reachDanLimitHint(GetItemTypeId(GetManipulatedItem()) , u)
	endif
	set u=null
	set p=null
endfunction
//乾坤丹
function r0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895371 ) )
endfunction
function s0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( yongdanshu[i] < $A ) ) or ( yongdanshu[i] < 15 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) ) then // INLINED!!
		call DialogSetMessage(v8[i], "请选择要减1的属性")
		call DialogAddButtonBJ(v8[i], "根骨")
		set w8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "悟性")
		set y8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "福缘")
		set z8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "胆魄")
		set A8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "医术")
		set a8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "经脉")
		set x8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "取消")
		set B8[i]=bj_lastCreatedButton
		call DialogDisplay(p, v8[i], true)
		set b8[i]=true
	else
		call reachDanLimitHint(GetItemTypeId(GetManipulatedItem()) , u)
	endif
	set u=null
	set p=null
endfunction
function u0 takes nothing returns boolean
	return ( ( b8[( 1 + GetPlayerId(GetTriggerPlayer()) )] ) )
endfunction
function v0 takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	set b8[i]=false
	if ( ( GetClickedButton() == B8[i] ) ) then
		call unitadditembyidswapped(1227895371 , P4[i])
		call DialogClear(v8[i])
	else
		if ( ( GetClickedButton() == w8[i] ) ) then
			set gengu[i]=( gengu[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨-1|r")
		elseif ( ( GetClickedButton() == y8[i] ) ) then
			set wuxing[i]=( wuxing[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性-1|r")
		elseif ( ( GetClickedButton() == z8[i] ) ) then
			set fuyuan[i]=( fuyuan[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘-1|r")
		elseif ( ( GetClickedButton() == A8[i] ) ) then
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄-1|r")
		elseif ( ( GetClickedButton() == a8[i] ) ) then
			set yishu[i]=( yishu[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术-1|r")
		elseif ( ( GetClickedButton() == x8[i] ) ) then
			set jingmai[i]=( jingmai[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉-1|r")
		endif
		call DialogClear(v8[i])
		call DialogSetMessage(D8[i], "请选择要加3的属性")
		call DialogAddButtonBJ(D8[i], "根骨")
		set w8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(D8[i], "悟性")
		set y8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(D8[i], "福缘")
		set z8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(D8[i], "胆魄")
		set A8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(D8[i], "医术")
		set a8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(D8[i], "经脉")
		set x8[i]=bj_lastCreatedButton
		call DialogDisplay(p, D8[i], true)
		set C8[i]=true
	endif
	set p=null
endfunction
function x0 takes nothing returns boolean
	return ( ( C8[( 1 + GetPlayerId(GetTriggerPlayer()) )] ) )
endfunction
function y0 takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	set C8[i]=false
	if ( ( GetClickedButton() == w8[i] ) ) then
		set gengu[i]=( gengu[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨+3|r")
	elseif ( ( GetClickedButton() == y8[i] ) ) then
		set wuxing[i]=( wuxing[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性+3|r")
	elseif ( ( GetClickedButton() == z8[i] ) ) then
		set fuyuan[i]=( fuyuan[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘+3|r")
	elseif ( ( GetClickedButton() == A8[i] ) ) then
		set danpo[i]=( danpo[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄+3|r")
	elseif ( ( GetClickedButton() == a8[i] ) ) then
		set yishu[i]=( yishu[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术+3|r")
	elseif ( ( GetClickedButton() == x8[i] ) ) then
		set jingmai[i]=( jingmai[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉+3|r")
	endif
	call DialogClear(D8[i])
	set yongdanshu[i]=( yongdanshu[i] + 1 )
	call PlaySoundOnUnitBJ(Eh, 100, udg_hero[i])
	if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 10" ) ))
	else
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 15" ) ))
	endif
	set p=null
endfunction
function A0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895372 ) )
endfunction
function a0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( yongdanshu[i] < $A ) or ( yongdanshu[i] < 15 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) ) then // INLINED!!
		if ( ( GetRandomInt(1, 5) == 3 ) ) then
			if ( ( GetRandomInt(1, 6) == 1 ) ) then
				set yishu[i]=( yishu[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前医术为：|r|cFF99FFCC" + I2S(yishu[i]) ))
			elseif ( ( GetRandomInt(1, 5) == 2 ) ) then
				set wuxing[i]=( wuxing[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前悟性为：|r|cFF99FFCC" + I2S(wuxing[i]) ))
			elseif ( ( GetRandomInt(1, 4) == 3 ) ) then
				set gengu[i]=( gengu[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前根骨为：|r|cFF99FFCC" + I2S(gengu[i]) ))
			elseif ( ( GetRandomInt(1, 3) == 2 ) ) then
				set fuyuan[i]=( fuyuan[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前福缘为：|r|cFF99FFCC" + I2S(fuyuan[i]) ))
			elseif ( ( GetRandomInt(1, 2) == 2 ) ) then
				set jingmai[i]=( jingmai[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前经脉为：|r|cFF99FFCC" + I2S(jingmai[i]) ))
			else
				set danpo[i]=( danpo[i] + 1 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+1|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" + I2S(danpo[i]) ))
			endif
		elseif ( ( GetRandomInt(1, 4) == 3 ) ) then
			if ( ( GetRandomInt(1, 6) == 1 ) ) then
				set yishu[i]=( yishu[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前医术为：|r|cFF99FFCC" + I2S(yishu[i]) ))
			elseif ( ( GetRandomInt(1, 5) == 2 ) ) then
				set wuxing[i]=( wuxing[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前悟性为：|r|cFF99FFCC" + I2S(wuxing[i]) ))
			elseif ( ( GetRandomInt(1, 4) == 3 ) ) then
				set gengu[i]=( gengu[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前根骨为：|r|cFF99FFCC" + I2S(gengu[i]) ))
			elseif ( ( GetRandomInt(1, 3) == 2 ) ) then
				set fuyuan[i]=( fuyuan[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前福缘为：|r|cFF99FFCC" + I2S(fuyuan[i]) ))
			elseif ( ( GetRandomInt(1, 2) == 2 ) ) then
				set jingmai[i]=( jingmai[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前经脉为：|r|cFF99FFCC" + I2S(jingmai[i]) ))
			else
				set danpo[i]=( danpo[i] + 3 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+3|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" + I2S(danpo[i]) ))
			endif
		else
			if ( ( GetRandomInt(1, 6) == 1 ) ) then
				set yishu[i]=( yishu[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前医术为：|r|cFF99FFCC" + I2S(yishu[i]) ))
			elseif ( ( GetRandomInt(1, 5) == 2 ) ) then
				set wuxing[i]=( wuxing[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前悟性为：|r|cFF99FFCC" + I2S(wuxing[i]) ))
			elseif ( ( GetRandomInt(1, 4) == 3 ) ) then
				set gengu[i]=( gengu[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前根骨为：|r|cFF99FFCC" + I2S(gengu[i]) ))
			elseif ( ( GetRandomInt(1, 3) == 2 ) ) then
				set fuyuan[i]=( fuyuan[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前福缘为：|r|cFF99FFCC" + I2S(fuyuan[i]) ))
			elseif ( ( GetRandomInt(1, 2) == 2 ) ) then
				set jingmai[i]=( jingmai[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前经脉为：|r|cFF99FFCC" + I2S(jingmai[i]) ))
			else
				set danpo[i]=( danpo[i] + 2 )
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+2|r")
				call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" + I2S(danpo[i]) ))
			endif
		endif
		call PlaySoundOnUnitBJ(Eh, 100, u)
		set yongdanshu[i]=( yongdanshu[i] + 1 )
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 10" ) ))
		else
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 15" ) ))
		endif
	else
		call reachDanLimitHint(GetItemTypeId(GetManipulatedItem()) , u)
	endif
	set u=null
	set p=null
endfunction
//脱胎换骨丹
function b0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227895374 ) )
endfunction
function C0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( yongdanshu[i] < $A ) ) or ( yongdanshu[i] < 15 and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) ) then // INLINED!!
		call DialogSetMessage(v8[i], "请选择要+6的属性")
		call DialogAddButtonBJ(v8[i], "根骨")
		set w8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "悟性")
		set y8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "福缘")
		set z8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "胆魄")
		set A8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "医术")
		set a8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "经脉")
		set x8[i]=bj_lastCreatedButton
		call DialogAddButtonBJ(v8[i], "取消")
		set B8[i]=bj_lastCreatedButton
		call DialogDisplay(p, v8[i], true)
		set c8[i]=true
	else
		call reachDanLimitHint(GetItemTypeId(GetManipulatedItem()) , u)
	endif
	set u=null
	set p=null
endfunction
function D0 takes nothing returns boolean
	return ( ( c8[( 1 + GetPlayerId(GetTriggerPlayer()) )] ) )
endfunction
function E0 takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local integer i= 1 + GetPlayerId(p)
	set c8[i]=false
	if ( ( GetClickedButton() == B8[i] ) ) then
		call unitadditembyidswapped(1227895374 , udg_hero[i])
		call DialogClear(v8[i])
	else
		if ( ( GetClickedButton() == w8[i] ) ) then
			set gengu[i]=( gengu[i] + 6 )
			set wuxing[i]=( wuxing[i] - 1 )
			set fuyuan[i]=( fuyuan[i] - 1 )
			set yishu[i]=( yishu[i] - 1 )
			set jingmai[i]=( jingmai[i] - 1 )
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨+6|r")
		elseif ( ( GetClickedButton() == y8[i] ) ) then
			set wuxing[i]=( wuxing[i] + 6 )
			set gengu[i]=( gengu[i] - 1 )
			set fuyuan[i]=( fuyuan[i] - 1 )
			set yishu[i]=( yishu[i] - 1 )
			set jingmai[i]=( jingmai[i] - 1 )
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性+6|r")
		elseif ( ( GetClickedButton() == z8[i] ) ) then
			set fuyuan[i]=( fuyuan[i] + 6 )
			set gengu[i]=( gengu[i] - 1 )
			set wuxing[i]=( wuxing[i] - 1 )
			set yishu[i]=( yishu[i] - 1 )
			set jingmai[i]=( jingmai[i] - 1 )
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘+6|r")
		elseif ( ( GetClickedButton() == A8[i] ) ) then
			set danpo[i]=( danpo[i] + 6 )
			set gengu[i]=( gengu[i] - 1 )
			set wuxing[i]=( wuxing[i] - 1 )
			set fuyuan[i]=( fuyuan[i] - 1 )
			set yishu[i]=( yishu[i] - 1 )
			set jingmai[i]=( jingmai[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄+6|r")
		elseif ( ( GetClickedButton() == a8[i] ) ) then
			set yishu[i]=( yishu[i] + 6 )
			set gengu[i]=( gengu[i] - 1 )
			set wuxing[i]=( wuxing[i] - 1 )
			set fuyuan[i]=( fuyuan[i] - 1 )
			set jingmai[i]=( jingmai[i] - 1 )
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术+6|r")
		elseif ( ( GetClickedButton() == x8[i] ) ) then
			set gengu[i]=( gengu[i] - 1 )
			set wuxing[i]=( wuxing[i] - 1 )
			set fuyuan[i]=( fuyuan[i] - 1 )
			set yishu[i]=( yishu[i] - 1 )
			set jingmai[i]=( jingmai[i] + 6 )
			set danpo[i]=( danpo[i] - 1 )
			call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉+6|r")
		endif
		call DialogClear(v8[i])
		call DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC其它属性-1|r")
		set yongdanshu[i]=( yongdanshu[i] + 1 )
		call PlaySoundOnUnitBJ(Eh, 100, udg_hero[i])
		if not (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 10" ) ))
		else
			call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" + ( I2S(yongdanshu[i]) + " / 15" ) ))
		endif
	endif
	set p=null
endfunction
//黑玉断续膏
function G0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I04P' ) )
endfunction
function H0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	// 丫鬟也可以无限吃，不然先吃再丫鬟就不能郡主了
	if v9[i] == false or (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) or (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
		set v9[i]=true
		call PlaySoundOnUnitBJ(Eh, 100, u)
		call ModifyHeroStat(2, udg_hero[i], 0, 50)
		call DisplayTextToPlayer(Player(- 1 + ( i )), 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC真实伤害提升50|r")
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
			call Deputy_setMaster(i , YA_HUAN)
			// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓郡主〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得郡主")
			call SetPlayerName(p, "〓郡主〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		endif
	else
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
		call PlaySoundOnUnitBJ(Gh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	endif
	set u=null
	set p=null
endfunction
//天王保命丹
function l0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I04O' ) )
endfunction
function J0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( w9[i] == false or (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) ) ) then // INLINED!!
		set w9[i]=true
		call PlaySoundOnUnitBJ(Eh, 100, u)
		call UnitAddAbility(udg_hero[i], 1093678923)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC气血提升20000|r")
	else
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
		call PlaySoundOnUnitBJ(Gh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	endif
	set u=null
	set p=null
endfunction
//生生造化丹
function L0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I04N' ) )
endfunction
function M0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( y9[i] == false or (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) ) ) then // INLINED!!
		set y9[i]=true
		call PlaySoundOnUnitBJ(Eh, 100, u)
		call ModifyHeroStat(1, udg_hero[i], 0, 40)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC内力提升40|r")
	else
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
		call PlaySoundOnUnitBJ(Gh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	endif
	set u=null
	set p=null
endfunction
//九花玉露丸
function O0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I04Q' ) )
endfunction
function P0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( x9[i] == false or (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) ) ) then // INLINED!!
		set x9[i]=true
		call PlaySoundOnUnitBJ(Eh, 100, u)
		set juexuelingwu[i]=( juexuelingwu[i] + 1 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC绝学领悟力+1|r")
		// 碧波心经+九花玉露丸 碧波点数+10
		if GetUnitAbilityLevel(udg_hero[i], BI_BO_XIN_JING) >= 1 then
			call SaveInteger(YDHT, GetHandleId(udg_hero[i]), BI_BO_POINT, LoadInteger(YDHT, GetHandleId(udg_hero[i]), BI_BO_POINT) + 10)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用九花玉露丸|r|cFF99FFCC碧波心经点数+10|r")
		endif
	else
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
		call PlaySoundOnUnitBJ(Gh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	endif
	set u=null
	set p=null
endfunction
//绝元丹
function R0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896406 ) )
endfunction
function S0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call PlaySoundOnUnitBJ(Eh, 100, u)
	set juexuelingwu[i]=( juexuelingwu[i] + 2 )
	call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC绝学领悟力+2|r")
	set u=null
	set p=null
endfunction
//大还丹
function U0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896407 ) )
endfunction
function V0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call PlaySoundOnUnitBJ(Eh, 100, u)
	call ModifyHeroStat(1, udg_hero[i], 0, 100)
	call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC内力提升100|r")
	set u=null
	set p=null
endfunction
//无极丹
function X0 takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896408 ) )
endfunction
function Y0 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call PlaySoundOnUnitBJ(Eh, 100, u)
	call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC所有武功CD时间清除|r")
	call UnitResetCooldown(udg_hero[i])
	set u=null
	set p=null
endfunction
//续命八丸
function dP takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 'I06Z' ) )
endfunction
function eP takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( ge[i] ) ) then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已经使用过本道具了，重复使用无效果")
		call unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()) , u)
	else
		call PlaySoundOnUnitBJ(Eh, 100, u)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC复活时间减半|r")
		set ge[i]=true
	endif
	set u=null
	set p=null
endfunction
//通犀地龙丸
function gP takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896624 ) )
endfunction
function hP takes nothing returns nothing
	set ie=( ie + 60 )
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 10., "|cFFFFCC00使用通犀地龙丸成功|r|cFF99FFCC延迟下波进攻怪物60秒|r")
endfunction
//白云熊胆丸
function jP takes nothing returns boolean
	return ( ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and ( GetItemTypeId(GetManipulatedItem()) == 1227896409 ) )
endfunction
function kP takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetRandomInt(1, 6) == 1 ) ) then
		set yishu[i]=( yishu[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前医术为：|r|cFF99FFCC" + I2S(yishu[i]) ))
	elseif ( ( GetRandomInt(1, 5) == 2 ) ) then
		set wuxing[i]=( wuxing[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前悟性为：|r|cFF99FFCC" + I2S(wuxing[i]) ))
	elseif ( ( GetRandomInt(1, 4) == 3 ) ) then
		set gengu[i]=( gengu[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前根骨为：|r|cFF99FFCC" + I2S(gengu[i]) ))
	elseif ( ( GetRandomInt(1, 3) == 2 ) ) then
		set fuyuan[i]=( fuyuan[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前福缘为：|r|cFF99FFCC" + I2S(fuyuan[i]) ))
	elseif ( ( GetRandomInt(1, 2) == 2 ) ) then
		set jingmai[i]=( jingmai[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前经脉为：|r|cFF99FFCC" + I2S(jingmai[i]) ))
	else
		set danpo[i]=( danpo[i] + 3 )
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+3|r")
		call DisplayTextToPlayer(p, 0, 0, ( "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" + I2S(danpo[i]) ))
	endif
	set u=null
	set p=null
endfunction
//传功丹
function nP takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 1093679447 ) )
endfunction
function oP takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local unit l__ut= GetSpellTargetUnit()
 local integer j= GetPlayerId(GetOwningPlayer(l__ut))
	call DialogSetMessage(je[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )], "请选择想被传授的武功")
	set te[i]=j
	if ( I7[j * 20 + 1] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 1]))
		set ke[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 2] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 2]))
		set ne[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 3] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 3]))
		set oe[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 4] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 4]))
		set pe[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 5] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 5]))
		set qe[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 6] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 6]))
		set me[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 7] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 7]))
		set re[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 8] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 8]))
		set rre[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 9] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 9]))
		set re9[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 10] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 10]))
		set re10[i]=bj_lastCreatedButton
	endif
	if ( I7[j * 20 + 11] != 'AEfk' ) then
		call DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 11]))
		set re11[i]=bj_lastCreatedButton
	endif
	call DialogAddButtonBJ(je[i], "取消")
	set se[i]=bj_lastCreatedButton
	call DialogDisplay(p, je[i], true)
	set u=null
	set p=null
	set l__ut=null
endfunction
function QiuJiao takes player p,integer num returns nothing
 local integer i= 1 + GetPlayerId(p)
	set L7[i]=1
	loop
		exitwhen L7[i] > wugongshu[i]
	
		// if I7[te[i]*20+num] == 'A0DP' or I7[te[i]*20+num] == 'A0B6' then
		// 铁掌归元吐纳可以偷
		// if I7[te[i]*20+num] == 'A0B6' then
		//     call unitadditembyidswapped(1227896625,P4[i])
		// 	call DisplayTextToPlayer(p,0,0,"|CFFFF0033这个武功太高深了，看起来学不会的样子")
		// 	return
		// endif
		if ( I7[( i - 1 ) * 20 + L7[i]] != 'AEfk' ) then
			if ( L7[i] == wugongshu[i] ) then
				call unitadditembyidswapped(1227896625 , P4[i])
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习技能已达上限，请先遗忘部分技能")
				exitwhen true
			endif
		else
			if I7[( i - 1 ) * 20 + 1] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 2] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 3] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 4] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 5] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 6] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 7] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 8] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 9] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 10] != I7[te[i] * 20 + num] and I7[( i - 1 ) * 20 + 11] != I7[te[i] * 20 + num] then
				call UnitAddAbility(udg_hero[i], I7[te[i] * 20 + num])
				call UnitMakeAbilityPermanent(udg_hero[i], true, I7[te[i] * 20 + num])
				set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]=I7[te[i] * 20 + num]
				call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ( "|CFFFF0033传闻" + ( GetPlayerName(p) + ( ( "向" + ( GetPlayerName(Player(- 1 + ( ( te[i] + 1 ) ))) + "虚心求教，成功的学会了" ) ) + GetObjectName(I7[te[i] * 20 + num]) ) ) ))
				// 偷奇门术数和碧波心经显示UI
				if I7[te[i] * 20 + num] == QI_MEN_SHU_SHU then
					if p == GetLocalPlayer() then
						call s__Frame_show(qimen_widget)
					endif
				endif
				if I7[te[i] * 20 + num] == BI_BO_XIN_JING then
					if p == GetLocalPlayer() then
						call s__Frame_show(bibo_image)
					endif
				endif
			
				set S9=1
				loop
					exitwhen S9 > 20
					if ( ( I7[te[i] * 20 + num] == MM9[S9] ) ) then
						set udg_shanghaijiacheng[i]=( udg_shanghaijiacheng[i] + udg_jueneishjc[S9] )
						call ModifyHeroStat(1, udg_hero[i], 0, udg_jueneiminjie[S9])
						set udg_baojilv[i]=( udg_baojilv[i] + udg_jueneibaojilv[S9] )
						set juexuelingwu[i]=( juexuelingwu[i] + udg_jueneijxlw[S9] )
						set udg_shanghaixishou[i]=( udg_shanghaixishou[i] + udg_jueneishxs[S9] )
					endif
					set S9=S9 + 1
				endloop
				exitwhen true
			else
				call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经学会这种武功了")
				call unitadditembyidswapped(1227896625 , P4[i])
				exitwhen true
			endif
		endif
		set L7[i]=L7[i] + 1
	endloop
endfunction
function qP takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetTriggerPlayer()) )]
 local integer i= 1 + GetPlayerId(GetTriggerPlayer())
 local player p= GetTriggerPlayer()
	if ( ( GetClickedButton() == ke[i] ) ) then
		call QiuJiao(p , 1)
	elseif ( ( GetClickedButton() == ne[i] ) ) then
		call QiuJiao(p , 2)
	elseif ( ( GetClickedButton() == oe[i] ) ) then
		call QiuJiao(p , 3)
	elseif ( ( GetClickedButton() == pe[i] ) ) then
		call QiuJiao(p , 4)
	elseif ( ( GetClickedButton() == qe[i] ) ) then
		call QiuJiao(p , 5)
	elseif ( ( GetClickedButton() == me[i] ) ) then
		call QiuJiao(p , 6)
	elseif ( ( GetClickedButton() == re[i] ) ) then
		call QiuJiao(p , 7)
	elseif ( ( GetClickedButton() == rre[i] ) ) then
		call QiuJiao(p , 8)
	elseif ( ( GetClickedButton() == re9[i] ) ) then
		call QiuJiao(p , 9)
	elseif ( ( GetClickedButton() == re10[i] ) ) then
		call QiuJiao(p , 10)
	elseif ( ( GetClickedButton() == re11[i] ) ) then
		call QiuJiao(p , 11)
	elseif ( ( GetClickedButton() == se[i] ) ) then
		call unitadditembyidswapped(1227896625 , P4[i])
	endif
	call DialogClear(je[i])
	set u=null
	set p=null
endfunction
//十香软筋散
function sP takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A09X' ) )
endfunction
function tP takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function uP takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163, GetEnumUnit())
	call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163)))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB)), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5), bj_UNIT_FACING)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679450)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D006B, LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call ShowUnitHide(bj_lastCreatedUnit)
	call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5))
endfunction
function vP takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetSpellTargetLoc())
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800. , LoadLocationHandle(YDHT, id * cx, $5E83114F) , Condition(function tP)), function uP)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//三尸脑神丹
function xP takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A0A0' ) )
endfunction
function yP takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function zP takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163, GetEnumUnit())
	call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163)))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB)), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5), bj_UNIT_FACING)
	call UnitAddAbility(bj_lastCreatedUnit, 1093681457)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D00DD, LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $270B8163))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call ShowUnitHide(bj_lastCreatedUnit)
	call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $247CC5E5))
endfunction
function AP takes nothing returns nothing
 local location loc= GetSpellTargetLoc()
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600. , loc , Condition(function yP)), function zP)
	call RemoveLocation(loc)
	set loc=null
endfunction
//七星海棠
function BP takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A0A3' )
endfunction
function bP takes nothing returns nothing
 local unit u= GetSpellTargetUnit()
	call YDWEPolledWaitNull(.3)
	call percentDamage(u , 30 , false)
	set u=null
endfunction
//-------各种丹药结束-------//
//----------炼丹系统开始----------//
function isLianDanItem takes item it returns boolean
	return ( GetItemTypeId(it) == 'I07L' or GetItemTypeId(it) == 'I07M' or GetItemTypeId(it) == 'I07N' or GetItemTypeId(it) == 'I0F1' or GetItemTypeId(it) == 'I07O' or GetItemTypeId(it) == 'I07P' or GetItemTypeId(it) == 'I07Q' or GetItemTypeId(it) == 'I07R' or GetItemTypeId(it) == 'I07J' or GetItemTypeId(it) == 'I07I' or GetItemTypeId(it) == 'I07K' or GetItemTypeId(it) == 'I05K' )
endfunction
function CorresDan takes integer dan returns integer
	if ( dan == 'I07L' ) then
		return 'I06Y'
	elseif ( dan == 'I07N' ) then
		return 'I071'
	elseif ( dan == 'I07I' ) then
		return 'I06W'
	elseif ( dan == 'I07P' ) then
		return 'I074'
	elseif ( dan == 'I07Q' ) then
		return 'I06V'
	elseif ( dan == 'I07R' ) then
		return 'I075'
	elseif ( dan == 'I07K' ) then
		return 'I073'
	elseif ( dan == 'I05K' ) then
		return 'I072'
	elseif ( dan == 'I07J' ) then
		return 'I070'
	elseif ( dan == 'I07M' ) then
		return 'I06X'
	elseif ( dan == 'I07O' ) then
		return 'I06Z'
	endif
	return 0
endfunction
function EP takes nothing returns boolean
	if ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and isLianDanItem(GetManipulatedItem()) then
		if not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] , 'I0AM') == false then // INLINED!!
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00你不是炼丹师，并且未携带神木王鼎，不可以炼制丹药")
			call AdjustPlayerStateBJ(2000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			return false
		else
			return true
		endif
	endif
	return false
endfunction
function LianSomeDan takes unit u,item it,integer dan,integer ys,integer y1,integer y2,integer yy returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 0
 local integer yin= 0
 local integer yang= 0
 local integer que= 0
	if ( GetItemTypeId(it) == dan ) then
		if ( yishu[i] < ys ) then
			call AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000医术不足！")
		elseif ( UnitHaveItem(u , yy) == false ) then
			call AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000缺少炼制丹药的药引！")
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ff00炼制丹药中.......")
			set j=1
			loop
				exitwhen j > 6
				if ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[11] ) ) then
					set yin=yin + 5
					set yang=yang + 1
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[9] ) ) then
					set yang=yang + 4
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[10] ) ) then
					set yin=yin + 3
					set yang=yang + 4
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[8] ) ) then
					set yin=yin + 4
					set yang=yang + 3
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[7] ) ) then
					set yin=yin + 4
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[12] ) ) then
					set yin=yin + 1
					set yang=yang + 5
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[6] ) ) then
					set yin=yin + 2
					set yang=yang + 3
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[1] ) ) then
					set yin=yin + 2
					set yang=yang + 1
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[2] ) ) then
					set yin=yin + 1
					set yang=yang + 2
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[3] ) ) then
					set yin=yin + 3
					set yang=yang - 1
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[4] ) ) then
					set yin=yin - 1
					set yang=yang + 3
					call RemoveItem(UnitItemInSlotBJ(u, j))
				elseif ( ( GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[5] ) ) then
					set yin=yin + 3
					set yang=yang + 2
					call RemoveItem(UnitItemInSlotBJ(u, j))
				endif
				set j=j + 1
			endloop
			if ( yin >= y1 ) then
			else
				set que=y1 - yin
				call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ff33阴性缺" + I2S(y1 - yin) + "，炼制成功率降低了" + I2S(( y1 - yin ) * 5) + "%")
			endif
			if ( yang >= y2 ) then
			else
				set que=que + y2 - yang
				call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ff33阳性缺" + I2S(y2 - yang) + "，炼制成功率降低了" + I2S(( y2 - yang ) * 5) + "%")
			endif
			if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
				set que=que - 4
				call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ff33由于你是炼丹大师，炼制成功率提高20%")
			endif
			if ( GetRandomInt(1, 20) <= 20 - que ) then
				call unitadditembyidswapped(CorresDan(dan) , u)
				call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ffff恭喜炼制成功！")
				set biYuAddition[i]=biYuAddition[i] + 0.5
				set udg_ldds[i]=udg_ldds[i] + 1
				if ( udg_ldds[i] <= 4 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
					call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您炼成第" + I2S(udg_ldds[i]) + "颗丹药，炼成4颗可获得大师哦")
				endif
				if ( udg_ldds[i] >= 4 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
					call Deputy_setMaster(i , LIAN_DAN)
					// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓炼丹大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
					call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得炼丹大师")
					call SetPlayerName(p, "〓炼丹大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				endif
			else
				call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000炼制失败！")
			endif
		endif
	endif
	set u=null
	set p=null
endfunction
function removeAllHerbs takes integer i returns nothing
 local integer j= 1
 local integer k= 1
	loop
		exitwhen j > 6
		set k=1
		loop
			exitwhen k > 12
			if ( GetItemTypeId(UnitItemInSlotBJ(P4[i], j)) == YaoCao[k] ) then
				call RemoveItem(UnitItemInSlotBJ(P4[i], j))
			endif
			set k=k + 1
		endloop
		set j=j + 1
	endloop
endfunction
function FP takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 0
 local integer yin= 0
 local integer yang= 0
 local integer que= 0
 local integer yaoxing= 0
 local integer rand= 0
 local integer id= 0
	call LianSomeDan(u , GetManipulatedItem() , 'I07L' , 26 , 18 , 18 , YaoCao[8])
	call LianSomeDan(u , GetManipulatedItem() , 'I07N' , 15 , 10 , 10 , YaoCao[5])
	call LianSomeDan(u , GetManipulatedItem() , 'I07I' , 24 , 15 , 20 , YaoCao[9])
	call LianSomeDan(u , GetManipulatedItem() , 'I07P' , 15 , 18 , 19 , YaoCao[3])
	call LianSomeDan(u , GetManipulatedItem() , 'I07Q' , 30 , 10 , 24 , YaoCao[12])
	call LianSomeDan(u , GetManipulatedItem() , 'I07R' , 26 , 24 , 8 , YaoCao[11])
	call LianSomeDan(u , GetManipulatedItem() , 'I07K' , 22 , 20 , 12 , YaoCao[7])
	call LianSomeDan(u , GetManipulatedItem() , 'I05K' , 15 , 15 , 5 , YaoCao[2])
	call LianSomeDan(u , GetManipulatedItem() , 'I07J' , 15 , 12 , 12 , YaoCao[10])
	call LianSomeDan(u , GetManipulatedItem() , 'I07M' , 16 , 5 , 16 , YaoCao[4])
	call LianSomeDan(u , GetManipulatedItem() , 'I07O' , 22 , 15 , 15 , YaoCao[6])
	if ( GetItemTypeId(GetManipulatedItem()) ) == 'I0F1' then
		// 炼制随机丹药，随机策略为根据药性寻找最相近的丹药，如果相近度较高，则炼制成功，否则炼制失败
		if yishu[i] < 15 then
			call AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000医术不足，无法炼制随机丹药！")
			return
		endif
		// 药性不足10点，则炼制失败
		set yaoxing=YaoXing()
		set yang=ModuloInteger(yaoxing, 100)
		set yin=( yaoxing - yang ) / 100
		if yin + yang < 15 then
			call AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000药性不足15点，无法炼制随机丹药！")
			return
		endif
		call removeAllHerbs(i)
		if yin > yang then
			// 阴性大于阳性时，在I07R、I07K、I05K、I07J、I07O中随机选择一种丹药，药性分别为32、32、20、24、30
			if yin + yang >= 30 or ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and yin + yang >= 24 ) then // INLINED!!
				set rand=GetRandomInt(1, 3)
				if rand == 1 then
					set id='I07R'
				elseif rand == 2 then
					set id='I07K'
				else
					set id='I07O'
				endif
			elseif yin + yang >= 20 or ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and yin + yang >= 16 ) or GetRandomInt(1, 20) < yin + yang then // INLINED!!
				set rand=GetRandomInt(1, 2)
				if rand == 1 then
					set id='I05K'
				else
					set id='I07J'
				endif
			endif
		else
			// 阴性小于等于阳性时，在I07L、I07N、I07I、I07P、I07Q、I07M中随机选择一种丹药，药性分别为36、20、35、37、34、21
			if yin + yang >= 32 or ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and yin + yang >= 26 ) then // INLINED!!
				set rand=GetRandomInt(1, 4)
				if rand == 1 then
					set id='I07L'
				elseif rand == 2 then
					set id='I07I'
				elseif rand == 3 then
					set id='I07P'
				else
					set id='I07Q'
				endif
			elseif yin + yang >= 20 or ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and yin + yang >= 16 ) or GetRandomInt(1, 20) < yin + yang then // INLINED!!
				set rand=GetRandomInt(1, 2)
				if rand == 1 then
					set id='I07N'
				else
					set id='I07M'
				endif
			endif
		endif
		if id == 0 then
			call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cffff0000炼制失败！")
			return
		endif
		call unitadditembyidswapped(CorresDan(id) , u)
		call DisplayTimedTextToPlayer(p, 0, 0, 5., "|cff00ffff恭喜炼制成功！")
		set biYuAddition[i]=biYuAddition[i] + 0.5
		set udg_ldds[i]=udg_ldds[i] + 1
		if ( udg_ldds[i] <= 4 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您炼成第" + I2S(udg_ldds[i]) + "颗丹药，炼成4颗可获得大师哦")
		endif
		if ( udg_ldds[i] >= 4 ) and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
			call Deputy_setMaster(i , LIAN_DAN)
			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得炼丹大师")
			call SetPlayerName(p, "〓炼丹大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		endif
	endif
	set u=null
endfunction
//----------炼丹系统结束----------//
function ElixirSystem_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(t, Condition(function VO))
	call TriggerAddAction(t, function WO)
	set Cq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Cq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Cq, Condition(function r0))
	call TriggerAddAction(Cq, function s0)
	set cq=CreateTrigger()
	call TriggerRegisterDialogEvent(cq, v8[1])
	call TriggerRegisterDialogEvent(cq, v8[2])
	call TriggerRegisterDialogEvent(cq, v8[3])
	call TriggerRegisterDialogEvent(cq, v8[4])
	call TriggerRegisterDialogEvent(cq, v8[5])
	call TriggerAddCondition(cq, Condition(function u0))
	call TriggerAddAction(cq, function v0)
	set Dq=CreateTrigger()
	call TriggerRegisterDialogEvent(Dq, D8[1])
	call TriggerRegisterDialogEvent(Dq, D8[2])
	call TriggerRegisterDialogEvent(Dq, D8[3])
	call TriggerRegisterDialogEvent(Dq, D8[4])
	call TriggerRegisterDialogEvent(Dq, D8[5])
	call TriggerAddCondition(Dq, Condition(function x0))
	call TriggerAddAction(Dq, function y0)
	set Eq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Eq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Eq, Condition(function A0))
	call TriggerAddAction(Eq, function a0)
	set Fq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Fq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Fq, Condition(function b0))
	call TriggerAddAction(Fq, function C0)
	set Gq=CreateTrigger()
	call TriggerRegisterDialogEvent(Gq, v8[1])
	call TriggerRegisterDialogEvent(Gq, v8[2])
	call TriggerRegisterDialogEvent(Gq, v8[3])
	call TriggerRegisterDialogEvent(Gq, v8[4])
	call TriggerRegisterDialogEvent(Gq, v8[5])
	call TriggerAddCondition(Gq, Condition(function D0))
	call TriggerAddAction(Gq, function E0)
	set Hq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Hq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Hq, Condition(function G0))
	call TriggerAddAction(Hq, function H0)
	set Iq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Iq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Iq, Condition(function l0))
	call TriggerAddAction(Iq, function J0)
	set lq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(lq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(lq, Condition(function L0))
	call TriggerAddAction(lq, function M0)
	set Jq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Jq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Jq, Condition(function O0))
	call TriggerAddAction(Jq, function P0)
	set Kq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Kq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Kq, Condition(function R0))
	call TriggerAddAction(Kq, function S0)
	set Lq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Lq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Lq, Condition(function U0))
	call TriggerAddAction(Lq, function V0)
	set Mq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Mq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Mq, Condition(function X0))
	call TriggerAddAction(Mq, function Y0)
	set Nq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Nq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Nq, Condition(function dP))
	call TriggerAddAction(Nq, function eP)
	set Oq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Oq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Oq, Condition(function gP))
	call TriggerAddAction(Oq, function hP)
	set Pq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Pq, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(Pq, Condition(function jP))
	call TriggerAddAction(Pq, function kP)
	set Qq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Qq, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Qq, Condition(function nP))
	call TriggerAddAction(Qq, function oP)
	set Rq=CreateTrigger()
	call TriggerRegisterDialogEvent(Rq, je[1])
	call TriggerRegisterDialogEvent(Rq, je[2])
	call TriggerRegisterDialogEvent(Rq, je[3])
	call TriggerRegisterDialogEvent(Rq, je[4])
	call TriggerRegisterDialogEvent(Rq, je[5])
	call TriggerAddAction(Rq, function qP)
	set Sq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Sq, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Sq, Condition(function sP))
	call TriggerAddAction(Sq, function vP)
	set Tq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Tq, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Tq, Condition(function xP))
	call TriggerAddAction(Tq, function AP)
	set Uq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Uq, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Uq, Condition(function BP))
	call TriggerAddAction(Uq, function bP)
	set Wq=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Wq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(Wq, Condition(function EP))
	call TriggerAddAction(Wq, function FP)
	set t=null
endfunction
// 基于游戏时间的活动系统
function InitArray takes nothing returns nothing
	set NORMALMON[1]=31
	set NORMALMON[2]=28
	set NORMALMON[3]=31
	set NORMALMON[4]=30
	set NORMALMON[5]=31
	set NORMALMON[6]=30
	set NORMALMON[7]=31
	set NORMALMON[8]=31
	set NORMALMON[9]=30
	set NORMALMON[10]=31
	set NORMALMON[11]=30
	set NORMALMON[12]=31
    set WEEKSTR[0]="日"
    set WEEKSTR[1]="一"
    set WEEKSTR[2]="二"
    set WEEKSTR[3]="三"
    set WEEKSTR[4]="四"
    set WEEKSTR[5]="五"
    set WEEKSTR[6]="六"
endfunction
function MathMod takes integer dividend,integer divisor returns integer
    local integer modulus= dividend - ( dividend / divisor ) * divisor
    if ( modulus < 0 ) then
        set modulus=modulus + divisor
    endif
    return modulus
endfunction
function MathFloor takes real a returns integer
	return R2I(a)
endfunction
//  判断是否为闰年
function IsLeapYear takes integer y returns boolean
	if MathMod(y , 4) == 0 then
		if MathMod(y , 100) == 0 then
            if MathMod(y , 400) == 0 then
                return true
            else
                return false
            endif
		endif
		return true
	endif
	return false
endfunction
function Time_UpdateDate takes integer y,integer remainSec,integer dayBy2015 returns nothing
 local boolean bIsLeap= IsLeapYear(y)
    local real dayNum= I2R(remainSec) / ( 24 * 60 * 60 )
 local integer totalDay= (R2I(((dayNum)*1.0))) // INLINED!!
    local integer totalDayBase= 0
 local integer totalMonDay= 0
 local integer curMonDay= 0
 local integer m= 1
	if ( dayNum - I2R(totalDay) ) > 0 then
		set totalDay=totalDay + 1
	endif
	if totalDay == 0 then
		set totalDay=1
	endif
    set dayBy2015=dayBy2015 + totalDay
	loop
	exitwhen m > 12
		if bIsLeap and m == 2 then
			set curMonDay=NORMALMON[m] + 1
		else
			set curMonDay=NORMALMON[m]
		endif
        if totalDay <= curMonDay then
            set udg_Year=y
			set udg_Mon=m
			set udg_Day=totalDay
			set udg_Hour=MathMod((R2I(((remainSec / ( 60 * 60 ))*1.0))) , 24) // INLINED!!
			set udg_Min=MathMod((R2I(((remainSec / 60)*1.0))) , 60) // INLINED!!
			set udg_Sec=MathMod(remainSec , 60)
            set m=100
        endif
		set m=m + 1
        set totalDay=totalDay - curMonDay
	endloop
	set udg_Week=MathMod(MathMod(dayBy2015 , 7) + BASE2015_WEEKDAY , 7)
endfunction
function GetDate takes integer now returns nothing
 local integer remain= now - BASE2015_SEC + BJTIME
 local integer y= 2016
 local integer baseRemain= 0
    local integer dayBy2015= 0
    local integer baseDayBy2015= 0
	loop
	exitwhen y > 3000
		set baseRemain=remain
        set baseDayBy2015=dayBy2015
		if IsLeapYear(y) then
			set remain=remain - LeapSeconds
            set dayBy2015=dayBy2015 + 366
		else
			set remain=remain - NormalSeconds
            set dayBy2015=dayBy2015 + 365
		endif
		if remain < 0 then
			call Time_UpdateDate(y , baseRemain , baseDayBy2015)
			set y=10000
		endif
		set y=y + 1
	endloop
endfunction
function ShowDataByTime takes integer time returns nothing
    if not udg_bIsInit then
        call InitArray()
        set udg_bIsInit=true
    endif
    if time == 0 then
        set time=DzAPI_Map_GetGameStartTime()
    endif
    call GetDate(time)
    call BJDebugMsg("现在时间为" + I2S(udg_Year) + "年" + I2S(udg_Mon) + "月" + I2S(udg_Day) + "日" + I2S(udg_Hour) + "时" + I2S(udg_Min) + "分" + I2S(udg_Sec) + "秒  " + "星期" + WEEKSTR[udg_Week])
endfunction
function UpdateTimeAllTimer takes nothing returns nothing
    set udg_ServerTime=udg_ServerTime + 1
    call GetDate(udg_ServerTime)
endfunction
function UpdateTimeAll takes nothing returns nothing
    local timer t= CreateTimer()
    call InitArray()
    set udg_ServerTime=DzAPI_Map_GetGameStartTime()
    call GetDate(udg_ServerTime)
    call TimerStart(t, 1, true, function UpdateTimeAllTimer)
    set t=null
endfunction
function checkActivityAddition takes nothing returns nothing
    local integer time= DzAPI_Map_GetGameStartTime()
    if not udg_bIsInit then
        call InitArray()
        set udg_bIsInit=true
    endif
    call GetDate(time)
    call BJDebugMsg("现在时间为" + I2S(udg_Year) + "年" + I2S(udg_Mon) + "月" + I2S(udg_Day) + "日" + I2S(udg_Hour) + "时" + I2S(udg_Min) + "分" + I2S(udg_Sec) + "秒  " + "星期" + WEEKSTR[udg_Week])
    if udg_Year == 2019 and udg_Mon == 5 and ( udg_Day >= 1 and udg_Day <= 7 ) then
        set activityPointAddition=1
    endif
endfunction
//===============najitest===============
//=====================================@共用函数开始=====================================
function ID2S_naji takes integer i_naji returns string
    local integer z_naji
    local integer n_naji=0
    set Sdummy_naji[100]=""
    if Bid_naji == false then
        return Sdummy_naji[100]
    endif
    if i_naji != 0 then
        loop
            set z_naji=i_naji - ( i_naji / 256 ) * 256
            set i_naji=i_naji / 256
            set Sdummy_naji[100]=SubString(StringList_naji, z_naji, z_naji + 1) + Sdummy_naji[100]
            set n_naji=n_naji + 1
            exitwhen n_naji == 4
        endloop
        set Sdummy_naji[100]="'" + Sdummy_naji[100] + "'"
    else
        set Sdummy_naji[100]="null"
    endif
    return Sdummy_naji[100]
endfunction
function S2ID_naji takes string s_naji returns integer
    local integer l_naji=StringLength(s_naji)
    local integer i_naji=0
    local integer z_naji=0
    local integer n_naji=1
    local integer result_naji=0
    loop
        exitwhen z_naji > l_naji - 1
        set n_naji=R2I(Pow(256, l_naji - 1 - z_naji))
        set i_naji=1
        loop
            exitwhen i_naji > 255
            if SubString(s_naji, z_naji, z_naji + 1) == SubString(StringList_naji, i_naji, i_naji + 1) then
                set result_naji=result_naji + i_naji * n_naji
                set i_naji=256
            endif
            set i_naji=i_naji + 1
        endloop
        set z_naji=z_naji + 1
    endloop
    return result_naji
endfunction
function IDidentify_naji takes integer i_naji returns string
    local integer l_naji
    local integer a_naji=0
    local integer z_naji
    local integer n_naji=0
    local integer result=0
    set Sdummy_naji[100]=""
    if i_naji != 0 then
        loop
            set z_naji=i_naji - ( i_naji / 256 ) * 256
            set i_naji=i_naji / 256
            set Sdummy_naji[100]=SubString(StringList_naji, z_naji, z_naji + 1) + Sdummy_naji[100]
            set n_naji=n_naji + 1
            exitwhen n_naji == 4
        endloop
    else
        set Sdummy_naji[100]="null"
        return Sdummy_naji[100]
    endif
    set l_naji=StringLength(Sdummy_naji[100])
    set n_naji=1
    set z_naji=0
    loop
        exitwhen z_naji > l_naji - 1
        set n_naji=R2I(Pow(256, l_naji - 1 - z_naji))
        set a_naji=1
        loop
            exitwhen a_naji > 255
            if SubString(Sdummy_naji[100], z_naji, z_naji + 1) == SubString(StringList_naji, a_naji, a_naji + 1) then
                set result=result + a_naji * n_naji
                set a_naji=256
            endif
            set a_naji=a_naji + 1
        endloop
        set z_naji=z_naji + 1
    endloop
    return GetObjectName(result)
endfunction
function Distance_naji takes real x1_naji,real y1_naji,real x2_naji,real y2_naji returns real
    return SquareRoot(( y2_naji - y1_naji ) * ( y2_naji - y1_naji ) + ( x2_naji - x1_naji ) * ( x2_naji - x1_naji ))
endfunction
function Angle_naji takes real x1_naji,real y1_naji,real x2_naji,real y2_naji returns real
    local real r_naji
    set r_naji=57.29582 * Atan2(y2_naji - y1_naji, x2_naji - x1_naji)
    if r_naji < 0 then
        return 360 + r_naji
    endif
    return r_naji
endfunction
function DialogResetA3_naji takes nothing returns nothing
    call DialogClear(Dnaji_naji[2])
    if IsMapFlagSet(MAP_OBSERVERS_ON_DEATH) then
        set Button_naji[1]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF失败时作为观看者|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F1）|r", 768)
    else
        set Button_naji[1]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF失败时作为观看者|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F1）|r", 768)
    endif
    if IsMapFlagSet(MAP_LOCK_RESOURCE_TRADING) then
        set Button_naji[2]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定资源交易|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F2）|r", 769)
    else
        set Button_naji[2]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定资源交易|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F2）|r", 769)
    endif
    if IsMapFlagSet(MAP_RESOURCE_TRADING_ALLIES_ONLY) then
        set Button_naji[3]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF限定盟友资源交易|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F3）|r", 770)
    else
        set Button_naji[3]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF限定盟友资源交易|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F3）|r", 770)
    endif
    if IsMapFlagSet(MAP_LOCK_ALLIANCE_CHANGES) then
        set Button_naji[4]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定联盟设置|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F4）|r", 771)
    else
        set Button_naji[4]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定联盟设置|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F4）|r", 771)
    endif
    if IsMapFlagSet(MAP_ALLIANCE_CHANGES_HIDDEN) then
        set Button_naji[5]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF隐藏联盟设置|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F5）|r", 772)
    else
        set Button_naji[5]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF隐藏联盟设置|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F5）|r", 772)
    endif
    set Button_naji[100]=DialogAddButton(Dnaji_naji[2], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
endfunction
function DialogResetA2_naji takes nothing returns nothing
    call DialogClear(Dnaji_naji[1])
    if Bxy_naji then
        set Button_naji[1]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF坐标参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F1）|r", 768)
    else
        set Button_naji[1]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF坐标参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F1）|r", 768)
    endif
    if Bid_naji then
        set Button_naji[2]=DialogAddButton(Dnaji_naji[1], "|cff00FFFFID参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F2）|r", 769)
    else
        set Button_naji[2]=DialogAddButton(Dnaji_naji[1], "|cff00FFFFID参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F2）|r", 769)
    endif
    if Bpn_naji then
        set Button_naji[3]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF玩家名参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F3）|r", 770)
    else
        set Button_naji[3]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF玩家名参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F3）|r", 770)
    endif
    if Bir_naji then
        set Button_naji[4]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF数值显示|cffFFFF00（当前状态：|cffFF0000整数|cffFFFF00）|cff00FF00（F4）|r", 771)
    else
        set Button_naji[4]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF数值显示|cffFFFF00（当前状态：|cffFF0000实数|cffFFFF00）|cff00FF00（F4）|r", 771)
    endif
    if Bddm_naji then
        set Button_naji[5]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF伤害显示类型|cffFFFF00（当前状态：|cffFF0000游戏文本|cffFFFF00）|cff00FF00（F5）|r", 772)
    else
        set Button_naji[5]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF伤害显示类型|cffFFFF00（当前状态：|cffFF0000飘浮文字|cffFFFF00）|cff00FF00（F5）|r", 772)
    endif
    set Button_naji[0]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF返回上一层|cff00FF00（space）|r", 32)
    set Button_naji[100]=DialogAddButton(Dnaji_naji[1], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
endfunction
function DialogResetA_naji takes nothing returns nothing
    call DialogClear(Dnaji_naji[0])
    if IsTriggerEnabled(Ttest_naji[2]) then
        set Button_naji[1]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F1）|r", 768)
    else
        set Button_naji[1]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F1）|r", 768)
    endif
    if IsTriggerEnabled(Ttest_naji[15]) then
        set Button_naji[2]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF命令信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F2）|r", 769)
    else
        set Button_naji[2]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF命令信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F2）|r", 769)
    endif
    if IsTriggerEnabled(Ttest_naji[17]) then
        set Button_naji[3]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF寿命信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F3）|r", 770)
    else
        set Button_naji[3]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF寿命信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F3）|r", 770)
    endif
    if IsTriggerEnabled(Ttest_naji[26]) then
        set Button_naji[4]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF伤害信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F4）|r", 771)
    else
        set Button_naji[4]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF伤害信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F4）|r", 771)
    endif
    if IsTriggerEnabled(Ttest_naji[4]) then
        set Button_naji[5]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能无冷却不耗魔|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F5）|r", 772)
    else
        set Button_naji[5]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能无冷却不耗魔|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F5）|r", 772)
    endif
    if IsTriggerEnabled(Ttest_naji[71]) then
        set Button_naji[8]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF群体施法|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F6）|r", 773)
    else
        set Button_naji[8]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF群体施法|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F6）|r", 773)
    endif
    //=========================以下部分1.24以下的版本需删除==============================
    if IsTriggerEnabled(Ttest_naji[7]) then
        set Button_naji[6]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF句柄信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F7）|r", 774)
    else
        set Button_naji[6]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF句柄信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F7）|r", 774)
    endif
    //=========================以上部分1.24以下的版本需删除==============================
    if IsTriggerEnabled(Ttest_naji[61]) then
        set Button_naji[7]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF公共聊天系统|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F8）|r", 775)
    else
        set Button_naji[7]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF公共聊天系统|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F8）|r", 775)
    endif
    set Button_naji[0]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF系统信息调整|cff00FF00（space）|r", 32)
    set Button_naji[100]=DialogAddButton(Dnaji_naji[0], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
endfunction
//=====================================@共用函数结束=====================================
//=====================================#功能函数开始=====================================
function TestA82_naji takes nothing returns nothing
    call ExecuteFunc(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
endfunction
function TestA81_naji takes nothing returns nothing
    local integer i_naji
    if StringLength(GetEventPlayerChatString()) <= 6 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数输入错误！位数不足无法判断进制类型|r")
    elseif StringLength(GetEventPlayerChatString()) == 7 then
        set i_naji=S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0" + SubString(GetEventPlayerChatString(), 3, 7) + "|r→|cffFFFF00" + I2S(i_naji) + "|r")
    else
        set i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0" + SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())) + "|r→|cffFFFF00" + ID2S_naji(i_naji) + "|r")
    endif
endfunction
function TestA80_naji takes nothing returns nothing
    local group g_naji
    local unit u_naji
    local real x_naji
    local real y_naji
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    set g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            loop
                set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
                if Sdummy_naji[1] == "," then
                    if z_naji == 4 then
                        set x_naji=GetUnitX(u_naji)
                    else
                        set x_naji=S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
                    endif
                    if z_naji == StringLength(GetEventPlayerChatString()) - 1 then
                        set y_naji=GetUnitY(u_naji)
                    else
                        set y_naji=S2R(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
                    endif
                    exitwhen true
                endif
                set z_naji=z_naji - 1
                if z_naji <= 0 then
                    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数不足！请输入|cffFFFF002|cffFF0000位参数|r")
                    call DestroyGroup(g_naji)
                    set g_naji=null
                    set u_naji=null
                    return
                endif
            endloop
            call SetUnitX(u_naji, x_naji)
            call SetUnitY(u_naji, y_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00玩家选择单位的所有单位的坐标更改为|cffFF0000(" + R2S(x_naji) + "," + R2S(y_naji) + ")|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
endfunction
function TestA79_naji takes nothing returns nothing
    local group g_naji
    local unit u_naji
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local item it_naji
    if i_naji < 0 or i_naji >= 7 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数输入错误！请输入|cffFFFF001~6|cffFF0000间的整数|r")
        return
    elseif i_naji == 0 then
        set i_naji=1
    endif
    set g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    set u_naji=FirstOfGroup(g_naji)
    if u_naji != null then
        if UnitItemInSlot(u_naji, i_naji - 1) != null then
            set it_naji=UnitItemInSlot(u_naji, i_naji - 1)
            if GetItemType(it_naji) == ITEM_TYPE_PERMANENT then
                set Sdummy_naji[0]="永久"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_CHARGED then
                set Sdummy_naji[0]="可允"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_POWERUP then
                set Sdummy_naji[0]="能量提升"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_ARTIFACT then
                set Sdummy_naji[0]="人造"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_PURCHASABLE then
                set Sdummy_naji[0]="可购买"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_CAMPAIGN then
                set Sdummy_naji[0]="战役"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_MISCELLANEOUS then
                set Sdummy_naji[0]="混杂"
            endif
            if GetItemType(it_naji) == ITEM_TYPE_UNKNOWN then
                set Sdummy_naji[0]="未知"
            endif
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品名称：|cffFFFF00" + GetItemName(it_naji) + "|r")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0ID256进制/10进制：|cffFFFF00" + ID2S_naji(GetItemTypeId(it_naji)) + "/" + I2S(GetItemTypeId(it_naji)) + "|r")
            //=========================以下部分1.24以下的版本需删除==============================
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0存储地址：|cffFFFF00" + I2S(GetHandleId(it_naji)) + "|r")
            //=========================以上部分1.24以下的版本需删除==============================
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0所属玩家/cj索引：|cffFFFF00" + GetPlayerName(GetItemPlayer(it_naji)) + "/" + I2S(GetPlayerId(GetItemPlayer(it_naji))) + "|r")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0坐标：|cffFFFF00(" + R2S(GetItemX(it_naji)) + "," + R2S(GetItemY(it_naji)) + ")|r")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品分类：|cffFFFF00" + Sdummy_naji[0] + "|r")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品等级：|cffFFFF00" + I2S(GetItemLevel(it_naji)) + "|r")
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0自定义值：|cffFFFF00" + I2S(GetItemUserData(it_naji)) + "|r")
            set Sdummy_naji[0]=" "
            if IsItemPowerup(it_naji) then
                set Sdummy_naji[0]=Sdummy_naji[0] + "拾取自动使用，"
            endif
            if IsItemSellable(it_naji) then
                set Sdummy_naji[0]=Sdummy_naji[0] + "可出售，"
            endif
            if IsItemPawnable(it_naji) then
                set Sdummy_naji[0]=Sdummy_naji[0] + "可抵押，"
            endif
            if IsItemVisible(it_naji) then
                set Sdummy_naji[0]=Sdummy_naji[0] + "可见，"
            endif
            if IsItemInvulnerable(it_naji) then
                set Sdummy_naji[0]=Sdummy_naji[0] + "无敌的，"
            endif
            set Sdummy_naji[0]=SubString(Sdummy_naji[0], 1, StringLength(Sdummy_naji[0]) - 2)
            call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0可识别状态：|cffFFFF00" + Sdummy_naji[0] + "||r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" + I2S(i_naji) + "格物品栏|cffFF0000不存在物品|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
    set it_naji=null
endfunction
function TestA78_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if IsUnitInGroup(FirstOfGroup(g_naji), Gcd_naji[1]) then
            call GroupRemoveUnit(Gcd_naji[1], FirstOfGroup(g_naji))
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已取消玩家选择单位的|cffFF0000技能无冷却不耗蓝判定|r")
        else
            call SetUnitState(FirstOfGroup(g_naji), UNIT_STATE_MANA, GetUnitState(FirstOfGroup(g_naji), UNIT_STATE_MAX_MANA))
            call UnitResetCooldown(FirstOfGroup(g_naji))
            call GroupAddUnit(Gcd_naji[1], FirstOfGroup(g_naji))
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已启动玩家选择单位的|cffFF0000技能无冷却不耗蓝判定|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
endfunction
function TestA77_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if IsUnitInGroup(FirstOfGroup(g_naji), Gms_naji) then
            call GroupRemoveUnit(Gms_naji, FirstOfGroup(g_naji))
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已取消玩家选择单位的|cffFF0000群体施法判定|r")
        else
            call GroupAddUnit(Gms_naji, FirstOfGroup(g_naji))
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已启动玩家选择单位的|cffFF0000群体施法判定|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
endfunction
function TestA76_naji takes nothing returns nothing
    local unit u_naji
    local group g_naji
    local integer i_naji
    local integer z_naji
    local integer n_naji
    local real r_naji
    local boolean b_naji
    local location p_naji=GetSpellTargetLoc()
    if IsUnitInGroup(GetTriggerUnit(), Gms_naji) and ( GetSpellTargetUnit() != null or p_naji != null ) then
        set i_naji=GetUnitCurrentOrder(GetTriggerUnit())
        set z_naji=GetSpellAbilityId()
        set n_naji=GetUnitAbilityLevel(GetTriggerUnit(), z_naji)
        if GetSpellTargetUnit() != null then
            set g_naji=CreateGroup()
            set b_naji=IsUnitEnemy(GetSpellTargetUnit(), GetTriggerPlayer())
            call GroupEnumUnitsInRange(g_naji, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Distance_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetUnitX(GetSpellTargetUnit()) , GetUnitY(GetSpellTargetUnit())), null)
            loop
                exitwhen FirstOfGroup(g_naji) == null
                if IsUnitType(FirstOfGroup(g_naji), UNIT_TYPE_DEAD) == false and FirstOfGroup(g_naji) != GetSpellTargetUnit() and b_naji == IsUnitEnemy(FirstOfGroup(g_naji), GetTriggerPlayer()) then
                    set u_naji=CreateUnit(GetTriggerPlayer(), 'nvul', GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Angle_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetUnitX(FirstOfGroup(g_naji)) , GetUnitY(FirstOfGroup(g_naji))))
                    call UnitAddAbility(u_naji, 'Aloc')
                    call UnitAddAbility(u_naji, 'Abun')
                    call UnitAddAbility(u_naji, 'AIbm')
                    call UnitAddAbility(u_naji, 'AI2m')
                    call UnitAddAbility(u_naji, 'AImb')
                    call UnitAddAbility(u_naji, 'AImz')
                    call UnitAddAbility(u_naji, 'AImv')
                    call UnitRemoveAbility(u_naji, 'Awan')
                    if UnitAddAbility(u_naji, 'Arav') then
                        call UnitRemoveAbility(u_naji, 'Arav')
                    endif
                    call SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
                    call ShowUnit(u_naji, false)
                    call UnitApplyTimedLife(u_naji, 'BTLF', 10)
                    call SetUnitUseFood(u_naji, false)
                    call SetUnitPathing(u_naji, false)
                    call h__SetUnitMoveSpeed(u_naji, 522)
                    call SetUnitTurnSpeed(u_naji, 1)
                    call SetUnitFlyHeight(u_naji, GetUnitFlyHeight(GetTriggerUnit()), 0)
                    call UnitAddType(u_naji, UNIT_TYPE_ANCIENT)
                    call UnitAddType(u_naji, UNIT_TYPE_PEON)
                    call UnitAddAbility(u_naji, z_naji)
                    call SetUnitAbilityLevel(u_naji, z_naji, n_naji)
                    call IssueTargetOrderById(u_naji, i_naji, FirstOfGroup(g_naji))
                endif
                call GroupRemoveUnit(g_naji, FirstOfGroup(g_naji))
            endloop
            call DestroyGroup(g_naji)
            set g_naji=null
        else
            set r_naji=0
            loop
                exitwhen r_naji >= 2
                set u_naji=CreateUnit(GetTriggerPlayer(), 'nvul', GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Angle_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetLocationX(p_naji) , GetLocationY(p_naji)) - 30 + 60 * r_naji)
                call UnitAddAbility(u_naji, 'Aloc')
                call UnitAddAbility(u_naji, 'Abun')
                call UnitAddAbility(u_naji, 'AIbm')
                call UnitAddAbility(u_naji, 'AI2m')
                call UnitAddAbility(u_naji, 'AImb')
                call UnitAddAbility(u_naji, 'AImz')
                call UnitAddAbility(u_naji, 'AImv')
                call UnitRemoveAbility(u_naji, 'Awan')
                if UnitAddAbility(u_naji, 'Arav') then
                    call UnitRemoveAbility(u_naji, 'Arav')
                endif
                call SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
                call ShowUnit(u_naji, false)
                call UnitApplyTimedLife(u_naji, 'BTLF', 10)
                call SetUnitUseFood(u_naji, false)
                call SetUnitPathing(u_naji, false)
                call h__SetUnitMoveSpeed(u_naji, 522)
                call SetUnitTurnSpeed(u_naji, 1)
                call SetUnitFlyHeight(u_naji, GetUnitFlyHeight(GetTriggerUnit()), 0)
                call UnitAddType(u_naji, UNIT_TYPE_ANCIENT)
                call UnitAddType(u_naji, UNIT_TYPE_PEON)
                call UnitAddAbility(u_naji, z_naji)
                call SetUnitAbilityLevel(u_naji, z_naji, n_naji)
                call IssuePointOrderById(u_naji, i_naji, GetUnitX(GetTriggerUnit()) + Cos(0.01745 * ( Angle_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetLocationX(p_naji) , GetLocationY(p_naji)) - 30 + 60 * r_naji )) * Distance_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetLocationX(p_naji) , GetLocationY(p_naji)), GetUnitY(GetTriggerUnit()) + Sin(0.01745 * ( Angle_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetLocationX(p_naji) , GetLocationY(p_naji)) - 30 + 60 * r_naji )) * Distance_naji(GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetLocationX(p_naji) , GetLocationY(p_naji)))
                set r_naji=r_naji + 1
            endloop
        endif
    endif
    call RemoveLocation(p_naji)
    set p_naji=null
    set u_naji=null
endfunction
function TestA75_naji takes nothing returns nothing
    call RestartGame(true)
endfunction
function TestA74_naji takes nothing returns nothing
    local integer array i_naji
    local integer a_naji=2
    local integer b_naji=8
    local integer c_naji=8
    set i_naji[1]=S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
    set i_naji[2]=0
    set i_naji[3]=GetPlayerId(GetTriggerPlayer()) + 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
        if Sdummy_naji[1] == "," then
            set i_naji[a_naji]=S2I(SubString(GetEventPlayerChatString(), c_naji, b_naji))
            set a_naji=a_naji + 1
            set c_naji=b_naji + 1
            if a_naji >= 3 then
                set i_naji[3]=S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
                exitwhen true
            endif
        endif
        set b_naji=b_naji + 1
        if b_naji >= StringLength(GetEventPlayerChatString()) then
            set i_naji[a_naji]=S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
    endloop
    if i_naji[3] >= 1 and i_naji[3] <= 16 then
        call SetPlayerTechResearched(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
        call SetPlayerTechMaxAllowed(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
        call SetPlayerTechMaxAllowed(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
        if i_naji[2] == 0 then
            call SetPlayerAbilityAvailable(Player(i_naji[3] - 1), i_naji[1], false)
        else
            call SetPlayerAbilityAvailable(Player(i_naji[3] - 1), i_naji[1], true)
        endif
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已对|cff00FFFF" + GetPlayerName(Player(i_naji[3] - 1)) + "|cffFF0000执行对应行为，若没有效果，请确认你是否输入了|cffFFFF00正确的物编ID|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家参数输入数值错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
endfunction
function TestA73_naji takes nothing returns nothing
    local integer i_naji=S2ID_naji(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if StringLength(GetEventPlayerChatString()) <= 6 then
        if Iweather_naji >= 1 then
            loop
                call RemoveWeatherEffect(Weather_naji[Iweather_naji])
                set Iweather_naji=Iweather_naji - 1
                exitwhen Iweather_naji <= 0
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000删除|cffFFFF00所有已创建的全图天气|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00请输入|cffFF0000合法的天气ID|cffFFFF00，可点击|cffFF0000F9|cffFFFF00查看所有天气ID|r")
        endif
    else
        set Iweather_naji=Iweather_naji + 1
        set Weather_naji[Iweather_naji]=AddWeatherEffect(GetWorldBounds(), i_naji)
        call EnableWeatherEffect(Weather_naji[Iweather_naji], true)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已创建对应的天气。目前已有|cffFF0000" + I2S(Iweather_naji) + "|cffFFFF00个全图天气|r")
    endif
endfunction
function TestA72_naji takes nothing returns nothing
    call EnableUserControl(true)
    call ShowInterface(true, 0.01)
    call EnableOcclusion(true)
endfunction
function TestA71_naji takes nothing returns nothing
    if GetClickedButton() != Button_naji[100] then
        if GetClickedButton() == Button_naji[1] then
            if IsMapFlagSet(MAP_OBSERVERS_ON_DEATH) then
                call SetMapFlag(MAP_OBSERVERS_ON_DEATH, false)
            else
                call SetMapFlag(MAP_OBSERVERS_ON_DEATH, true)
            endif
        elseif GetClickedButton() == Button_naji[2] then
            if IsMapFlagSet(MAP_LOCK_RESOURCE_TRADING) then
                call SetMapFlag(MAP_LOCK_RESOURCE_TRADING, false)
            else
                call SetMapFlag(MAP_LOCK_RESOURCE_TRADING, true)
            endif
        elseif GetClickedButton() == Button_naji[3] then
            if IsMapFlagSet(MAP_RESOURCE_TRADING_ALLIES_ONLY) then
                call SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, false)
            else
                call SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, true)
            endif
        elseif GetClickedButton() == Button_naji[4] then
            if IsMapFlagSet(MAP_LOCK_ALLIANCE_CHANGES) then
                call SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES, false)
            else
                call SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES, true)
            endif
        elseif GetClickedButton() == Button_naji[5] then
            if IsMapFlagSet(MAP_ALLIANCE_CHANGES_HIDDEN) then
                call SetMapFlag(MAP_ALLIANCE_CHANGES_HIDDEN, false)
            else
                call SetMapFlag(MAP_ALLIANCE_CHANGES_HIDDEN, true)
            endif
        endif
        call DialogResetA3_naji()
        call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[2], true)
    endif
endfunction
function TestA70_naji takes nothing returns nothing
    call DialogResetA3_naji()
    call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[2], true)
endfunction
function TestA69_naji takes nothing returns nothing
    local real i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if i_naji >= 1 and i_naji <= 5 then
        call SetMapFlag(MAP_LOCK_SPEED, false)
        if i_naji == 1 then
            call SetGameSpeed(MAP_SPEED_SLOWEST)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000极慢|r")
        elseif i_naji == 2 then
            call SetGameSpeed(MAP_SPEED_SLOW)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000慢|r")
        elseif i_naji == 3 then
            call SetGameSpeed(MAP_SPEED_NORMAL)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000普通|r")
        elseif i_naji == 4 then
            call SetGameSpeed(MAP_SPEED_FAST)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000快|r")
        elseif i_naji == 5 then
            call SetGameSpeed(MAP_SPEED_FASTEST)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000极快|r")
        endif
    else
        call DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入错误！请输入|cffFFFF001~5|cffFF0000之间的整数|r")
    endif
endfunction
function TestA68_naji takes nothing returns nothing
    call EndGame(true)
endfunction
function TestA67_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call SetUnitScale(u_naji, r_naji, r_naji, r_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00玩家选择的所有单位的缩放更改为原模型默认的|cffFF0000" + R2S(r_naji) + "|cffFFFF00倍|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA66_naji takes nothing returns nothing
    local integer i_naji
    set i_naji=0
    loop
        call DisplayTimedTextToPlayer(Player(i_naji), 0, 0, 15, "                              |cff00FFFF" + GetPlayerName(GetTriggerPlayer()) + "：|r" + GetEventPlayerChatString())
        set i_naji=i_naji + 1
        exitwhen i_naji >= 16
    endloop
endfunction
function TestA65_naji takes nothing returns nothing
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0目标坐标：|cffFFFF00(" + R2S(GetCameraTargetPositionX()) + "," + R2S(GetCameraTargetPositionY()) + "," + R2S(GetCameraTargetPositionZ()) + ")|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0源坐标：|cffFFFF00(" + R2S(GetCameraEyePositionX()) + "," + R2S(GetCameraEyePositionY()) + "," + R2S(GetCameraEyePositionZ()) + ")|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0X轴旋转角度/弧度：|cffFFFF00" + R2S(57.295 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)) + "/" + R2S(GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Y轴旋转角度/弧度：|cffFFFF00" + R2S(57.295 * GetCameraField(CAMERA_FIELD_ROLL)) + "/" + R2S(GetCameraField(CAMERA_FIELD_ROLL)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Z轴旋转角度/弧度：|cffFFFF00" + R2S(57.295 * GetCameraField(CAMERA_FIELD_ROTATION)) + "/" + R2S(GetCameraField(CAMERA_FIELD_ROTATION)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Z轴偏移：|cffFFFF00" + R2S(GetCameraField(CAMERA_FIELD_ZOFFSET)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0镜头距离：|cffFFFF00" + R2S(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0远景截断距离：|cffFFFF00" + R2S(GetCameraField(CAMERA_FIELD_FARZ)) + "|r")
    call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0镜头区域：|cffFFFF00" + R2S(GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW)) + "|r")
endfunction
function TestA64_naji takes nothing returns nothing
    if GetLocalPlayer() == Ptest_naji then
        set Rcamera_naji[2]=57.29582 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)
        set Rcamera_naji[3]=57.29582 * GetCameraField(CAMERA_FIELD_ROTATION)
        if Bcamera_naji[1] then
            set Rcamera_naji[2]=Rcamera_naji[2] - 1
        endif
        if Bcamera_naji[2] then
            set Rcamera_naji[2]=Rcamera_naji[2] + 1
        endif
        if Bcamera_naji[3] then
            set Rcamera_naji[3]=Rcamera_naji[3] - 1
        endif
        if Bcamera_naji[4] then
            set Rcamera_naji[3]=Rcamera_naji[3] + 1
        endif
        call SetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK, Rcamera_naji[2], 0.01)
        call SetCameraField(CAMERA_FIELD_ROTATION, Rcamera_naji[3], 0.01)
        call PanCameraToTimed(Rcamera_naji[0], Rcamera_naji[1], 0)
    endif
endfunction
function TestA63_naji takes nothing returns nothing
    local integer i_naji=0
    if GetTriggerEventId() == EVENT_PLAYER_ARROW_UP_UP then
        set Bcamera_naji[1]=false
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_DOWN_UP then
        set Bcamera_naji[2]=false
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_LEFT_UP then
        set Bcamera_naji[3]=false
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_RIGHT_UP then
        set Bcamera_naji[4]=false
    endif
    loop
        set i_naji=i_naji + 1
        if i_naji >= 5 then
            call DestroyTimer(Tcamera_naji)
            set Tcamera_naji=null
            exitwhen true
        endif
        if Bcamera_naji[i_naji] then
            exitwhen true
        endif
    endloop
endfunction
function TestA62_naji takes nothing returns nothing
    if Tcamera_naji == null then
        set Tcamera_naji=CreateTimer()
        call TimerStart(Tcamera_naji, 0.01, true, function TestA64_naji)
    endif
    set Rcamera_naji[0]=GetCameraTargetPositionX()
    set Rcamera_naji[1]=GetCameraTargetPositionY()
    if GetTriggerEventId() == EVENT_PLAYER_ARROW_UP_DOWN then
        set Bcamera_naji[1]=true
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_DOWN_DOWN then
        set Bcamera_naji[2]=true
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_LEFT_DOWN then
        set Bcamera_naji[3]=true
    elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_RIGHT_DOWN then
        set Bcamera_naji[4]=true
    endif
endfunction
function TestA61_naji takes nothing returns nothing
    if Bcamera_naji[0] then
        set Bcamera_naji[0]=false
        call DestroyTimer(Tcamera_naji)
        call DisableTrigger(Ttest_naji[58])
        call DisableTrigger(Ttest_naji[59])
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000关闭|cffFFFF00镜头模式|r")
    else
        set Bcamera_naji[0]=true
        call EnableTrigger(Ttest_naji[58])
        call EnableTrigger(Ttest_naji[59])
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10, "|cffFF0000开启|cffFFFF00镜头模式|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10, "|cffFF0000用上下左右对镜头进行调整，镜头距离请用|cffFFFF00'cd|cffFF0000代码，重置镜头请用|cffFFFF00'cr|cffFF0000代码|r")
    endif
endfunction
function TestA60_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if GetLocalPlayer() == GetTriggerPlayer() then
            call SetCameraTargetController(FirstOfGroup(g_naji), 0, 0, false)
        endif
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已锁定|cffFF0000玩家选择的第一个单位|cffFFFF00的镜头，按下|cffFF0000Ctrl+C|cffFFFF00可解锁|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA59_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call UnitRemoveBuffs(u_naji, true, true)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已清除玩家选择的所有单位的|cffFF0000魔法效果|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA58_naji takes nothing returns nothing
    local integer i_naji=0
    call ClearTextMessages()
    loop
        call DisplayTextToPlayer(Player(i_naji), 0, 0, "|cffFFFF00你已经被|cffFF0000踢出游戏|r")
        set i_naji=i_naji + 1
        exitwhen i_naji >= 16
    endloop
endfunction
function TestA57_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
    if i_naji >= 0 and i_naji <= 15 then
        if GetPlayerSlotState(Player(i_naji)) == PLAYER_SLOT_STATE_PLAYING then
            if GetLocalPlayer() == Player(i_naji) then
                call TimerStart(CreateTimer(), 0, true, function TestA58_naji)
            endif
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已将|cffFF0000" + GetPlayerName(Player(i_naji)) + "|cffFFFF00踢出游戏！|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00这个玩家位|cffFF0000并不存在玩家|r")
        endif
    else
        call DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
endfunction
function TestA56_naji takes nothing returns nothing
    local integer i_naji=S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
    local group g_naji
    local item tt
    local integer z_naji=1
    if StringLength(GetEventPlayerChatString()) >= 8 then
        set z_naji=S2I(SubString(GetEventPlayerChatString(), 8, StringLength(GetEventPlayerChatString())))
        if z_naji <= 0 then
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值部分请输入|cffFFFF00大于0|cffFF0000的整数|r")
            return
        endif
    endif
    set g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已执行对应行为，若没有效果，请确定你输入了正确的|cffFF0000物体编辑器ID|r")
        if UnitAddAbility(FirstOfGroup(g_naji), i_naji) == false then
            if StringLength(GetEventPlayerChatString()) >= 8 then
                call SetUnitAbilityLevel(FirstOfGroup(g_naji), i_naji, z_naji)
            else
                call UnitRemoveAbility(FirstOfGroup(g_naji), i_naji)
                call UnitMakeAbilityPermanent(FirstOfGroup(g_naji), false, i_naji)
            endif
        else
            call UnitMakeAbilityPermanent(FirstOfGroup(g_naji), true, i_naji)
            call SetUnitAbilityLevel(FirstOfGroup(g_naji), i_naji, z_naji)
        endif
        loop
            call CreateUnit(GetTriggerPlayer(), i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)), 0)
            set tt=CreateItem(i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)))
            if tt != null then
                call SetItemPlayer(tt, GetTriggerPlayer(), false)
                set tt=null
            endif
            call CreateDestructable(i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)), 0, 1, 0)
            set z_naji=z_naji - 1
            exitwhen z_naji <= 0
        endloop
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
endfunction
function TestA55_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            if IsUnitInGroup(u_naji, Guw_naji) then
                call SetUnitPathing(u_naji, true)
                call GroupRemoveUnit(Guw_naji, u_naji)
            else
                call SetUnitPathing(u_naji, false)
                call GroupAddUnit(Guw_naji, u_naji)
            endif
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已切换玩家选择的所有单位的|cffFFFF00触碰|cffFF0000状态|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA54_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if GetLocalPlayer() == GetTriggerPlayer() then
        if r_naji > 0 then
            call SetCameraField(CAMERA_FIELD_FARZ, r_naji, 0)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家当前镜头的远景截断距离为|cffFFFF00" + R2S(r_naji) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值错误！|cffFFFF00请输入|cffFF0000大于0|cffFFFF00的实数|r")
        endif
    endif
endfunction
function TestA53_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
    local group g_naji=CreateGroup()
    local unit u_naji
    if i_naji >= 0 and i_naji <= 15 then
        call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
        if FirstOfGroup(g_naji) != null then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitOwner(u_naji, Player(i_naji), true)
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家选择的所有单位|cffFFFF00的所有者已改变为|cffFF0000" + GetPlayerName(Player(i_naji)) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
        endif
    else
        call DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA52_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
        if Sdummy_naji[1] == "," then
            set z_naji=S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
        set z_naji=z_naji - 1
        if z_naji <= 0 then
            set z_naji=GetPlayerId(GetTriggerPlayer()) + 1
            exitwhen true
        endif
    endloop
    if z_naji <= 0 or z_naji >= 17 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
        return
    endif
    if i_naji >= 0 and i_naji <= 15 then
        if IsPlayerAlly(Player(i_naji), GetTriggerPlayer()) then
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_PASSIVE, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_XP, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_SPELLS, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_REQUEST, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_RESPONSE, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_PASSIVE, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_XP, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_VISION, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_SPELLS, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_REQUEST, false)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_RESPONSE, false)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" + GetPlayerName(Player(z_naji - 1)) + "|cffFFFF00和|cffFF0000" + GetPlayerName(Player(i_naji)) + "|cffFFFF00成为|cffFF0000敌人|r")
        else
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_PASSIVE, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_XP, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_SPELLS, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_REQUEST, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_RESPONSE, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_PASSIVE, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_XP, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_VISION, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_SPELLS, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_REQUEST, true)
            call SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_RESPONSE, true)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" + GetPlayerName(Player(z_naji - 1)) + "|cffFFFF00和|cffFF0000" + GetPlayerName(Player(i_naji)) + "|cffFFFF00成为|cffFF0000同盟|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
endfunction
function TestA51_naji takes nothing returns nothing
    if GetLocalPlayer() == Ptest_naji then
        call ClearTextMessages()
        call ResetToGameCamera(0)
        loop
            call DestroyQuest(Q_naji[Iquest_naji])
            set Iquest_naji=Iquest_naji - 1
            exitwhen Iquest_naji == 0
        endloop
    endif
    loop
        call DestroyTrigger(Ttest_naji[Itrigger_naji])
        set Itrigger_naji=Itrigger_naji - 1
        exitwhen Itrigger_naji == 0
    endloop
    if Ttest_naji[0] != null then
        call DestroyTrigger(Ttest_naji[0])
    endif
    if Ibm_naji >= 1 then
        loop
            set Ibm_naji=Ibm_naji - 1
            call DestroyTextTag(Tbm_naji[Ibm_naji])
            set Tbm_naji[Ibm_naji]=null
            exitwhen Ibm_naji <= 0
        endloop
    endif
    loop
        call RemoveWeatherEffect(Weather_naji[Iweather_naji])
        set Iweather_naji=Iweather_naji - 1
        exitwhen Iweather_naji <= 0
    endloop
    call DialogDestroy(Dnaji_naji[0])
    call DialogDestroy(Dnaji_naji[1])
    call DialogDestroy(Dnaji_naji[2])
    call DestroyGroup(Gcd_naji[0])
    call DestroyGroup(Gcd_naji[1])
    call DestroyGroup(Gms_naji)
    call DestroyGroup(Guw_naji)
    call RemoveRegion(Rworld_naji)
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffFF0000已移除|cffFFFF00najitest|cffFF0000测试系统")
endfunction
function TestA50_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call KillUnit(u_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00杀死|cffFF0000玩家选择的所有单位|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA49_naji takes nothing returns nothing
    local real array r_naji
    local integer a_naji=1
    local integer b_naji=3
    local integer c_naji=3
    set r_naji[1]=1
    set r_naji[2]=GetPlayerId(GetTriggerPlayer()) + 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
        if Sdummy_naji[1] == "," then
            set r_naji[a_naji]=S2R(SubString(GetEventPlayerChatString(), c_naji, b_naji))
            set a_naji=a_naji + 1
            set c_naji=b_naji + 1
            if a_naji >= 2 and c_naji < StringLength(GetEventPlayerChatString()) then
                set r_naji[2]=S2R(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
                exitwhen true
            endif
        endif
        set b_naji=b_naji + 1
        if b_naji >= StringLength(GetEventPlayerChatString()) then
            set r_naji[a_naji]=S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
    endloop
    if R2I(r_naji[2]) >= 1 and R2I(r_naji[2]) <= 16 then
        call SetMapFlag(MAP_USE_HANDICAPS, true)
        call SetPlayerHandicap(Player(R2I(r_naji[2]) - 1), r_naji[1])
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已设置|cff00FFFF" + GetPlayerName(Player(R2I(r_naji[2]) - 1)) + "|cffFF0000的生命障碍为|cffFFFF00" + R2S(r_naji[1]) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家参数输入数值错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
endfunction
function TestA48_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    call SetTimeOfDayScale(r_naji / 100)
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置时间流逝速度为|cffFFFF00" + R2S(r_naji) + "%|r")
endfunction
function TestA47_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call SetUnitUserData(u_naji, i_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的自定义值为|cffFFFF00" + I2S(i_naji) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA46_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if i_naji >= 1 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                if IsUnitType(u_naji, UNIT_TYPE_HERO) then
                    call SetHeroInt(u_naji, i_naji, true)
                    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的智力为|cffFFFF00" + I2S(i_naji) + "|r")
                endif
            endloop
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA45_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
       if i_naji >= 1 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                if IsUnitType(u_naji, UNIT_TYPE_HERO) then
                    call SetHeroAgi(u_naji, i_naji, true)
                    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的敏捷为|cffFFFF00" + I2S(i_naji) + "|r")
                endif
            endloop
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA44_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if i_naji >= 1 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                if IsUnitType(u_naji, UNIT_TYPE_HERO) then
                    call SetHeroStr(u_naji, i_naji, true)
                    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的力量为|cffFFFF00" + I2S(i_naji) + "|r")
                endif
            endloop
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA43_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            if IsUnitType(u_naji, UNIT_TYPE_HERO) then
                if GetHeroSkillPoints(u_naji) + i_naji >= 0 then
                    call UnitModifySkillPoints(u_naji, i_naji)
                else
                    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF80C0" + GetUnitName(u_naji) + "|cffFF0000的剩余技能点不能|cffFFFF00低于0|cffFF0000！|r")
                endif
            endif
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000增加玩家选择的所有英雄的技能点数：|cffFFFF00" + I2S(i_naji) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA42_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            if UnitAddAbility(u_naji, 'Arav') then
                call UnitRemoveAbility(u_naji, 'Arav')
            endif
            call SetUnitFlyHeight(u_naji, r_naji, 0)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的飞行高度为|cffFFFF00" + R2S(r_naji) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA41_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if r_naji > 0 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitAcquireRange(u_naji, r_naji)
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的主动攻击范围为|cffFFFF00" + R2S(r_naji) + "|r")
        else
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitAcquireRange(u_naji, GetUnitDefaultAcquireRange(u_naji))
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认主动攻击范围|cffFF0000。请输入|cffFFFF00大于0|cffFF0000的实数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA40_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if r_naji >= 0 and r_naji <= 1 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitTurnSpeed(u_naji, r_naji)
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的转身速率为|cffFFFF00" + R2S(r_naji) + "|r")
        else
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitTurnSpeed(u_naji, GetUnitDefaultTurnSpeed(u_naji))
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认转身速率|cffFF0000。请输入|cffFFFF000~1|cffFF0000之间的实数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA39_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        if r_naji >= 0 and r_naji <= 522 then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call h__SetUnitMoveSpeed(u_naji, r_naji)
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的移动速度为|cffFFFF00" + R2S(r_naji) + "|r")
        else
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call h__SetUnitMoveSpeed(u_naji, GetUnitDefaultMoveSpeed(u_naji))
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认移动速度|cffFF0000。请输入|cffFFFF000~522|cffFF0000之间的实数|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA38_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if r_naji >= 0 and r_naji <= 24 then
        call SetFloatGameState(GAME_STATE_TIME_OF_DAY, r_naji)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000当前时间设置为|cffFFFF00" + R2S(r_naji) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000请输入|cffFFFF000~24|cffFF0000之间的实数|r")
    endif
endfunction
function TestA37_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    call SetRandomSeed(i_naji)
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000随机种子设置为|cffFFFF00" + I2S(i_naji) + "|r")
endfunction
function TestA36_naji takes nothing returns nothing
    local group g_naji
    local unit u_naji
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
        if Sdummy_naji[1] == "," then
            set z_naji=S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
        set z_naji=z_naji - 1
        if z_naji <= 0 then
            set z_naji=1
            exitwhen true
        endif
    endloop
    if z_naji <= 0 or z_naji >= 7 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~6|cffFF0000间的整数|r")
        return
    endif
    set g_naji=CreateGroup()
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    set u_naji=FirstOfGroup(g_naji)
    if u_naji != null then
        if UnitItemInSlot(u_naji, z_naji - 1) != null then
            if i_naji <= 0 then
                set i_naji=0
            endif
            call SetItemCharges(UnitItemInSlot(u_naji, z_naji - 1), i_naji)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" + I2S(z_naji) + "格物品栏|cffFF0000的可允次数设置为|cffFFFF00" + I2S(i_naji) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" + I2S(z_naji) + "格物品栏|cffFF0000不存在物品|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA35_naji takes nothing returns nothing
    loop
        set Ibm_naji=Ibm_naji - 1
        call DestroyTextTag(Tbm_naji[Ibm_naji])
        set Tbm_naji[Ibm_naji]=null
        exitwhen Ibm_naji <= 0
    endloop
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffFF0000已清除所有|cffFFFF00备忘文字|r")
endfunction
function TestA34_naji takes nothing returns nothing
    set Tbm_naji[Ibm_naji]=CreateTextTag()
    call SetTextTagText(Tbm_naji[Ibm_naji], SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())), 20 * 0.023 / 10)
    call SetTextTagPos(Tbm_naji[Ibm_naji], GetCameraTargetPositionX(), GetCameraTargetPositionY(), 0)
    call SetTextTagColor(Tbm_naji[Ibm_naji], 0, 255, 0, 255)
    set Ibm_naji=Ibm_naji + 1
endfunction
function TestA33_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if r_naji > 100 then
        set r_naji=1
    endif
    if r_naji < 0 then
        set r_naji=0
    endif
    set r_naji=r_naji / 100
    if GetLocalPlayer() == GetTriggerPlayer() then
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_AMBIENTSOUNDS, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_FIRE, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITMOVEMENT, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS, r_naji)
        call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UI, r_naji)
    endif
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的音效音量为：|cffFFFF00" + I2S(R2I(r_naji * 100)) + "%|r")
endfunction
function TestA32_naji takes nothing returns nothing
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000骰得点数：|cffFFFF00" + I2S(GetRandomInt(1, 100)) + "|r")
endfunction
function TestA31_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if i_naji > 100 then
        set i_naji=100
    endif
    if i_naji < 0 then
        set i_naji=0
    endif
    if GetLocalPlayer() == GetTriggerPlayer() then
        call SetMusicVolume(R2I(I2R(i_naji) * 1.27))
    endif
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的音乐音量为：|cffFFFF00" + I2S(i_naji) + "%|r")
endfunction
function TestA30_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            if IsUnitPaused(u_naji) then
                call PauseUnit(u_naji, false)
            else
                call PauseUnit(u_naji, true)
            endif
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已切换玩家选择的所有单位的|cffFFFF00暂停状态|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA29_naji takes nothing returns nothing
    local texttag tt
    if Bir_naji then
        set Sdummy_naji[0]=I2S(R2I(GetEventDamage()))
    else
        set Sdummy_naji[0]=R2S(GetEventDamage())
    endif
    if Bddm_naji then
        if Bpn_naji then
            set Sdummy_naji[3]=GetPlayerName(GetTriggerPlayer()) + "（玩家" + I2S(GetPlayerId(GetTriggerPlayer()) + 1) + "）"
            set Sdummy_naji[4]=GetPlayerName(GetOwningPlayer(GetEventDamageSource())) + "（玩家" + I2S(GetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1) + "）"
        else
            set Sdummy_naji[3]=""
            set Sdummy_naji[4]=""
        endif
        if Bxy_naji then
            set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
            set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetEventDamageSource())) + "," + R2S(GetWidgetY(GetEventDamageSource())) + "）"
        else
            set Sdummy_naji[1]=""
            set Sdummy_naji[2]=""
        endif
        call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000受到了|cffFFFF00" + Sdummy_naji[0] + "|cffFF8000点伤害！|cff00FFFF伤害来源为|r" + Sdummy_naji[4] + "|cffFFFF00" + GetUnitName(GetEventDamageSource()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetEventDamageSource())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
    else
        if GetLocalPlayer() == Ptest_naji then
            set tt=CreateTextTag()
            call SetTextTagText(tt, Sdummy_naji[0], 13 * 0.023 / 10)
            call SetTextTagPosUnit(tt, GetTriggerUnit(), 0)
            call SetTextTagColor(tt, 255, 0, 0, 255)
            call SetTextTagVelocity(tt, 150 * 0.071 / 128 * Cos(Rdummy_naji * 0.01745), 150 * 0.071 / 128 * Sin(Rdummy_naji * 0.01745))
            call SetTextTagPermanent(tt, false)
            call SetTextTagLifespan(tt, 1)
            call SetTextTagFadepoint(tt, 0.8)
            set tt=null
            set Rdummy_naji=Rdummy_naji + 30
            if Rdummy_naji >= 360 then
                set Rdummy_naji=Rdummy_naji - 360
            endif
        endif
    endif
endfunction
function TestA28_naji takes nothing returns nothing
    if GetUnitAbilityLevel(GetTriggerUnit(), 'Aloc') == 0 then
        call TriggerRegisterUnitEvent(Ttest_naji[0], GetTriggerUnit(), EVENT_UNIT_DAMAGED)
    endif
endfunction
function TestA27_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local integer i_naji=0
    local integer z_naji
    loop
        call GroupEnumUnitsOfPlayer(g_naji, Player(i_naji), null)
        set z_naji=0
        loop
            exitwhen FirstOfGroup(g_naji) == null
            call GroupRemoveUnit(g_naji, FirstOfGroup(g_naji))
            set z_naji=z_naji + 1
        endloop
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15, "|cff00FFFF(" + I2S(i_naji + 1) + ")|cffFF0000" + GetPlayerName(Player(i_naji)) + "|r：|cffFF80C0总单位数|cffFFFF00" + I2S(z_naji) + "|r：|cffFF80C0金钱|cffFFFF00" + I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_GOLD)) + "|r：|cffFF80C0木头|cffFFFF00" + I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_LUMBER)) + "|r：|cffFF80C0已用/可用人口|cffFFFF00" + I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_FOOD_USED)) + "|r/|cffFFFF00" + I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_FOOD_CAP)))
        set i_naji=i_naji + 1
        exitwhen i_naji >= 16
    endloop
    call DestroyGroup(g_naji)
    set g_naji=null
endfunction
function TestA26_naji takes nothing returns nothing
    if Bpause_naji then
        call PauseGame(false)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000继续游戏|r")
        set Bpause_naji=false
    else
        call PauseGame(true)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000暂停游戏|r")
        set Bpause_naji=true
    endif
endfunction
function TestA25_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call SetUnitTimeScale(u_naji, r_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的动画播放速率为|cffFFFF00" + R2S(r_naji) + "|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA24_naji takes nothing returns nothing
    local integer array i_naji
    local integer a_naji=1
    local integer b_naji=4
    local integer c_naji=4
    local group g_naji
    local unit u_naji
    set i_naji[1]=0
    set i_naji[2]=0
    set i_naji[3]=0
    set i_naji[4]=0
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
        if Sdummy_naji[1] == "," then
            set i_naji[a_naji]=S2I(SubString(GetEventPlayerChatString(), c_naji, b_naji))
            set a_naji=a_naji + 1
            set c_naji=b_naji + 1
            if a_naji >= 4 then
                set i_naji[4]=S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
                exitwhen true
            endif
        endif
        set b_naji=b_naji + 1
        if b_naji >= StringLength(GetEventPlayerChatString()) then
            set i_naji[a_naji]=S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
    endloop
    if i_naji[1] >= 0 and i_naji[1] <= 255 and i_naji[2] >= 0 and i_naji[2] <= 255 and i_naji[3] >= 0 and i_naji[3] <= 255 and i_naji[4] >= 0 and i_naji[4] <= 255 then
        set g_naji=CreateGroup()
        call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
        if FirstOfGroup(g_naji) != null then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitVertexColor(u_naji, i_naji[1], i_naji[2], i_naji[3], i_naji[4])
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的染色为|cffFFFF00" + I2S(i_naji[1]) + "|cffFF0000,|cffFFFF00" + I2S(i_naji[2]) + "|cffFF0000,|cffFFFF00" + I2S(i_naji[3]) + "|cffFF0000,|cffFFFF00" + I2S(i_naji[4]) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
        endif
        call DestroyGroup(g_naji)
        set g_naji=null
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF000~255|cffFF0000之间的整数|r")
    endif
    set u_naji=null
endfunction
function TestA23_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
        if Sdummy_naji[1] == "," then
            set z_naji=S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
        set z_naji=z_naji - 1
        if z_naji <= 0 then
            set z_naji=GetPlayerId(GetTriggerPlayer()) + 1
            exitwhen true
        endif
    endloop
    if z_naji <= 0 or z_naji >= 17 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
        return
    endif
    if i_naji >= 0 and i_naji <= 15 then
        if GetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL) then
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_CONTROL, false)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL, false)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" + GetPlayerName(Player(z_naji - 1)) + "|cffFFFF00失去了|cffFF0000" + GetPlayerName(Player(i_naji)) + "|cffFFFF00的|cffFF0000控制权|r")
        else
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_CONTROL, true)
            call SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL, true)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" + GetPlayerName(Player(z_naji - 1)) + "|cffFFFF00获得了|cffFF0000" + GetPlayerName(Player(i_naji)) + "|cffFFFF00的|cffFF0000控制权|r")
        endif
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
    endif
endfunction
function TestA22_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    local integer i_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    set u_naji=FirstOfGroup(g_naji)
    if u_naji != null then
        set i_naji=GetUnitTypeId(u_naji)
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
        if IsUnitType(u_naji, UNIT_TYPE_HERO) then
            set Sdummy_naji[0]=GetHeroProperName(u_naji)
        else
            set Sdummy_naji[0]="无"
        endif
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0单位名称/称谓：|cffFFFF00" + GetUnitName(u_naji) + "/" + Sdummy_naji[0] + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0ID256进制/10进制：|cffFFFF00" + ID2S_naji(GetUnitTypeId(u_naji)) + "/" + I2S(GetUnitTypeId(u_naji)) + "|r")
        //=========================以下部分1.24以下的版本需删除==============================
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0存储地址：|cffFFFF00" + I2S(GetHandleId(u_naji)) + "|r")
        //=========================以上部分1.24以下的版本需删除==============================
        if IsUnitRace(u_naji, RACE_HUMAN) then
            set Sdummy_naji[0]="人族"
        endif
        if IsUnitRace(u_naji, RACE_ORC) then
            set Sdummy_naji[0]="兽族"
        endif
        if IsUnitRace(u_naji, RACE_UNDEAD) then
            set Sdummy_naji[0]="不死族"
        endif
        if IsUnitRace(u_naji, RACE_NIGHTELF) then
            set Sdummy_naji[0]="暗夜精灵族"
        endif
        if IsUnitRace(u_naji, RACE_DEMON) then
            set Sdummy_naji[0]="恶魔"
        endif
        if IsUnitRace(u_naji, ConvertRace(0)) then
            set Sdummy_naji[0]="没有"
        endif
        if IsUnitRace(u_naji, ConvertRace(7)) then
            set Sdummy_naji[0]="其它"
        endif
        if IsUnitRace(u_naji, ConvertRace(8)) then
            set Sdummy_naji[0]="野外生物"
        endif
        if IsUnitRace(u_naji, ConvertRace(9)) then
            set Sdummy_naji[0]="平民"
        endif
        if IsUnitRace(u_naji, RACE_HUMAN) then
            set Sdummy_naji[0]="人族"
        endif
        if IsUnitRace(u_naji, ConvertRace(10)) then
            set Sdummy_naji[0]="动物"
        endif
        if IsUnitRace(u_naji, ConvertRace(11)) then
            set Sdummy_naji[0]="娜迦族"
        endif
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0种族/等级：|cffFFFF00" + Sdummy_naji[0] + "/" + I2S(GetUnitLevel(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0所属玩家/cj索引：|cffFFFF00" + GetPlayerName(GetOwningPlayer(u_naji)) + "/" + I2S(GetPlayerId(GetOwningPlayer(u_naji))) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0坐标：|cffFFFF00(" + R2S(GetUnitX(u_naji)) + "," + R2S(GetUnitY(u_naji)) + ")|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0面向角度/弧度：|cffFFFF00" + R2S(GetUnitFacing(u_naji)) + "/" + R2S(0.017 * GetUnitFacing(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0自定义值：|cffFFFF00" + I2S(GetUnitUserData(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0附加值：|cffFFFF00" + I2S(GetUnitPointValue(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0主动攻击范围当前/默认：|cffFFFF00" + R2S(GetUnitAcquireRange(u_naji)) + "/" + R2S(GetUnitDefaultAcquireRange(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0移动速度当前/默认：|cffFFFF00" + R2S(GetUnitMoveSpeed(u_naji)) + "/" + R2S(GetUnitDefaultMoveSpeed(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0转身速率当前/默认：|cffFFFF00" + R2S(GetUnitTurnSpeed(u_naji)) + "/" + R2S(GetUnitDefaultTurnSpeed(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0飞行高度当前/默认：|cffFFFF00" + R2S(GetUnitFlyHeight(u_naji)) + "/" + R2S(GetUnitDefaultFlyHeight(u_naji)) + "|r")
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0拥有buff数量全部/正面/负面：|cffFFFF00" + I2S(UnitCountBuffsEx(u_naji, true, true, false, false, true, true, false)) + "/" + I2S(UnitCountBuffsEx(u_naji, true, false, false, false, true, true, false)) + "/" + I2S(UnitCountBuffsEx(u_naji, false, true, false, false, true, true, false)) + "|r")
        set Sdummy_naji[0]=" "
        if IsUnitIdType(i_naji, UNIT_TYPE_MELEE_ATTACKER) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "近战，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_RANGED_ATTACKER) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "远程，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_STRUCTURE) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "建筑，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_HERO) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "英雄，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_GROUND) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "地面，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_FLYING) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "飞行，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_SUMMONED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "召唤单位，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_PLAGUED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "附带瘟疫，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_SNARED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "被束缚的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_STUNNED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "被眩晕的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_GIANT) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "泰坦，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_TAUREN) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "牛头人，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_UNDEAD) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "不死族，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_MECHANICAL) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "机械，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_ANCIENT) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "古树，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_PEON) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "工人，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_TOWNHALL) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "城镇大厅，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_SAPPER) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "地精工兵，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_POISONED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "中毒的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_POLYMORPHED) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "被变形的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_SLEEPING) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "被催眠的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_RESISTANT) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "有抗性皮肤的，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_ETHEREAL) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "处于虚无状态，"
        endif
        if IsUnitIdType(i_naji, UNIT_TYPE_MAGIC_IMMUNE) then
            set Sdummy_naji[0]=Sdummy_naji[0] + "魔法免疫，"
        endif
        set Sdummy_naji[0]=SubString(Sdummy_naji[0], 1, StringLength(Sdummy_naji[0]) - 2)
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0可识别类型：|cffFFFF00" + Sdummy_naji[0] + "||r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA21_naji takes nothing returns nothing
    if GetLocalPlayer() == GetTriggerPlayer() then
        call ResetToGameCamera(0)
    endif
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000重置镜头|r")
endfunction
function TestA20_naji takes nothing returns nothing
    if GetLocalPlayer() == GetTriggerPlayer() then
        call ClearTextMessages()
    endif
endfunction
function TestA19_naji takes nothing returns nothing
    if Bpn_naji then
        set Sdummy_naji[3]=GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "（玩家" + I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1) + "）"
    else
        set Sdummy_naji[3]=""
    endif
    if Bxy_naji then
        set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
        set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetKillingUnit())) + "," + R2S(GetWidgetY(GetKillingUnit())) + "）"
    else
        set Sdummy_naji[1]=""
        set Sdummy_naji[2]=""
    endif
    if GetTriggerPlayer() == null then
	    set unitnumber_lh=unitnumber_lh + 1
	    set createdunitnumber_lh=createdunitnumber_lh + 1
        call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0第一次进入地图,当前单位数：" + I2S(unitnumber_lh) + ",创建单位总数：" + I2S(createdunitnumber_lh) + "|r")
    else
        if Bpn_naji then
            set Sdummy_naji[4]=GetPlayerName(GetOwningPlayer(GetKillingUnit())) + "（玩家" + I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())) + 1) + "）"
        else
            set Sdummy_naji[4]=""
        endif
        set unitnumber_lh=unitnumber_lh - 1
        call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0死亡！凶手是：|r" + Sdummy_naji[4] + "|cffFFFF00" + GetUnitName(GetKillingUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetKillingUnit())) + "|cffFFFF00" + Sdummy_naji[2] + ",当前单位数：" + I2S(unitnumber_lh) + ",创建单位总数：" + I2S(createdunitnumber_lh) + "|r")
    endif
endfunction
function TestA18_naji takes nothing returns nothing
    call SetPlayerName(GetTriggerPlayer(), SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的名称为：|cffFFFF00" + GetPlayerName(GetTriggerPlayer()) + "|r")
endfunction
function TestA17_naji takes nothing returns nothing
    local location p_naji
    if Bpn_naji then
        set Sdummy_naji[3]=GetPlayerName(GetTriggerPlayer()) + "（玩家" + I2S(GetPlayerId(GetTriggerPlayer()) + 1) + "）"
    else
        set Sdummy_naji[3]=""
    endif
    if Bxy_naji then
        set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
        set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetOrderTarget())) + "," + R2S(GetWidgetY(GetOrderTarget())) + "）"
    else
        set Sdummy_naji[1]=""
        set Sdummy_naji[2]=""
    endif
    set Sdummy_naji[0]=OrderId2String(GetIssuedOrderId())
    if Sdummy_naji[0] == null then
        set Sdummy_naji[0]=UnitId2String(GetIssuedOrderId())
        if Sdummy_naji[0] == null then
            set Sdummy_naji[0]=IDidentify_naji(GetIssuedOrderId())
            if Sdummy_naji[0] == null or Sdummy_naji[0] == "Default string" then
                set Sdummy_naji[0]="null"
            else
                set Sdummy_naji[0]=Sdummy_naji[0] + "|cff00FF00" + ID2S_naji(GetIssuedOrderId())
            endif
        endif
    endif
    if GetOrderTargetUnit() == null then
        if GetOrderTargetDestructable() == null then
            if GetOrderTargetItem() == null then
                set p_naji=GetOrderPointLoc()
                if p_naji == null then
                    call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0发布了|cffFFFF00" + Sdummy_naji[0] + "|cffFF0000（" + I2S(GetIssuedOrderId()) + "）|r")
                else
                    call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0发布了|cffFFFF00" + Sdummy_naji[0] + "|cffFF0000（" + I2S(GetIssuedOrderId()) + "）|cff00FFFF目标点为|cffFFFF00（" + R2S(GetOrderPointX()) + "," + R2S(GetOrderPointY()) + "）|r")
                endif
                call RemoveLocation(p_naji)
                set p_naji=null
            else
                call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0发布了|cffFFFF00" + Sdummy_naji[0] + "|cffFF0000（" + I2S(GetIssuedOrderId()) + "）|cff00FFFF目标为|cffFFFF00" + GetItemName(GetOrderTargetItem()) + "|cffFF0000" + ID2S_naji(GetItemTypeId(GetOrderTargetItem())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
            endif
        else
            call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0发布了|cffFFFF00" + Sdummy_naji[0] + "|cffFF0000（" + I2S(GetIssuedOrderId()) + "）|cff00FFFF目标为|cffFFFF00" + GetDestructableName(GetOrderTargetDestructable()) + "|cffFF0000" + ID2S_naji(GetDestructableTypeId(GetOrderTargetDestructable())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
        endif
    else
        if Bpn_naji then
            set Sdummy_naji[4]=GetPlayerName(GetOwningPlayer(GetOrderTargetUnit())) + "（玩家" + I2S(GetPlayerId(GetOwningPlayer(GetOrderTargetUnit())) + 1) + "）"
        else
            set Sdummy_naji[4]=""
        endif
        call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF80C0发布了|cffFFFF00" + Sdummy_naji[0] + "|cffFF0000（" + I2S(GetIssuedOrderId()) + "）|cff00FFFF目标为|r" + Sdummy_naji[4] + "|cffFFFF00" + GetUnitName(GetOrderTargetUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetOrderTargetUnit())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
    endif
endfunction
function TestA16_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call RemoveUnit(u_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00删除|cffFF0000玩家选择的所有单位|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA15_naji takes nothing returns nothing
    local real r_naji=S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    if GetLocalPlayer() == GetTriggerPlayer() then
        if r_naji > 0 then
            call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, r_naji, 0)
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家当前镜头的镜头距离为|cffFFFF00" + R2S(r_naji) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值错误！|cffFFFF00请输入|cffFF0000大于0|cffFFFF00的实数|r")
        endif
    endif
endfunction
function TestA14_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji
    local unit u_naji
    if i_naji >= 0 then
        set g_naji=CreateGroup()
        call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
        if FirstOfGroup(g_naji) != null then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                call SetUnitAnimationByIndex(u_naji, i_naji)
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000播放玩家选择的所有单位的第|cffFFFF00" + I2S(i_naji) + "|cffFF0000号动作|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
        endif
        call DestroyGroup(g_naji)
        set g_naji=null
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF00大于0|cffFF0000的数值|r")
    endif
    set u_naji=null
endfunction
function TestA13_naji takes nothing returns nothing
    if Bfog_naji then
        call FogEnable(false)
        call FogMaskEnable(false)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000关闭|cffFFFF00阴影及战争迷雾|r")
        set Bfog_naji=false
    else
        call FogEnable(true)
        call FogMaskEnable(true)
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000开启|cffFFFF00阴影及战争迷雾|r")
        set Bfog_naji=true
    endif
endfunction
function TestA12_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local group g_naji
    local unit u_naji
    if i_naji >= 1 then
        set g_naji=CreateGroup()
        call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
        if FirstOfGroup(g_naji) != null then
            loop
                set u_naji=FirstOfGroup(g_naji)
                exitwhen u_naji == null
                call GroupRemoveUnit(g_naji, u_naji)
                if IsUnitType(u_naji, UNIT_TYPE_HERO) then
                    if GetUnitLevel(u_naji) <= i_naji then
                        call SetHeroLevel(u_naji, i_naji, true)
                    else
                        call UnitStripHeroLevel(u_naji, GetUnitLevel(u_naji) - i_naji)
                    endif
                endif
            endloop
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000将玩家选择的所有英雄等级设置为|cffFFFF00" + I2S(i_naji) + "|r")
        else
            call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
        endif
        call DestroyGroup(g_naji)
        set g_naji=null
        set u_naji=null
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF00大于1|cffFF0000的数值|r")
    endif
endfunction
function TestA11_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
        if Sdummy_naji[1] == "," then
            set z_naji=S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
        set z_naji=z_naji - 1
        if z_naji <= 0 then
            set z_naji=GetPlayerId(GetTriggerPlayer()) + 1
            exitwhen true
        endif
    endloop
    if z_naji <= 0 or z_naji >= 17 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~16|cffFF0000间的整数|r")
        return
    endif
    call SetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_LUMBER) + i_naji)
    if i_naji > 0 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" + GetPlayerName(Player(z_naji - 1)) + "|cffFF0000增加了|cffFFFF00" + I2S(i_naji) + "|cffFF0000木头|r")
    elseif i_naji < 0 then
        set i_naji=i_naji * - 1
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" + GetPlayerName(Player(z_naji - 1)) + "|cffFF0000减少了|cffFFFF00" + I2S(i_naji) + "|cffFF0000木头|r")
    endif
endfunction
function TestA10_naji takes nothing returns nothing
    local integer i_naji=S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
    local integer z_naji=StringLength(GetEventPlayerChatString()) - 1
    loop
        set Sdummy_naji[1]=SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
        if Sdummy_naji[1] == "," then
            set z_naji=S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
            exitwhen true
        endif
        set z_naji=z_naji - 1
        if z_naji <= 0 then
            set z_naji=GetPlayerId(GetTriggerPlayer()) + 1
            exitwhen true
        endif
    endloop
    if z_naji <= 0 or z_naji >= 17 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~16|cffFF0000间的整数|r")
        return
    endif
    call SetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_GOLD) + i_naji)
    if i_naji > 0 then
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" + GetPlayerName(Player(z_naji - 1)) + "|cffFF0000增加了|cffFFFF00" + I2S(i_naji) + "|cffFF0000黄金|r")
    elseif i_naji < 0 then
        set i_naji=i_naji * - 1
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" + GetPlayerName(Player(z_naji - 1)) + "|cffFF0000减少了|cffFFFF00" + I2S(i_naji) + "|cffFF0000黄金|r")
    endif
endfunction
//=========================以下部分1.24以下的版本需删除==============================
function TestA9_naji takes nothing returns nothing
    local location p_naji=Location(0, 0)
    set Rhandle_naji=Rhandle_naji + 0.1
    if Rhandle_naji >= 60 then
        set Sdummy_naji[2]=R2S(Rhandle_naji - I2R(R2I(Rhandle_naji / 60)) * 60)
        if S2R(Sdummy_naji[2]) == 60 then
            set Sdummy_naji[2]="0.0"
        else
            set Sdummy_naji[2]=SubString(" " + Sdummy_naji[2], 1, StringLength(Sdummy_naji[2]) - 1)
        endif
        set Sdummy_naji[1]=" " + R2S(Rhandle_naji / 60)
        set Sdummy_naji[1]=SubString(Sdummy_naji[1], 1, StringLength(Sdummy_naji[1]) - 4) + "分" + Sdummy_naji[2] + "秒"
    else
        set Sdummy_naji[1]=" " + R2S(Rhandle_naji)
        set Sdummy_naji[1]=SubString(Sdummy_naji[1], 1, StringLength(Sdummy_naji[1]) - 2) + "秒"
    endif
    call DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFFFF00基准值：|r" + I2S(Ihandle_naji) + "|cffFFFF00——当前值：|r" + I2S(GetHandleId(p_naji)) + "|cffFFFF00——差值：|r" + I2S(GetHandleId(p_naji) - Ihandle_naji) + "|cffFFFF00——开启时间：|r" + Sdummy_naji[1])
    call RemoveLocation(p_naji)
    set p_naji=null
endfunction
//=========================以上部分1.24以下的版本需删除==============================
function TestA7_naji takes nothing returns nothing
    local group g_naji=CreateGroup()
    local unit u_naji
    call GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), null)
    if FirstOfGroup(g_naji) != null then
        loop
            set u_naji=FirstOfGroup(g_naji)
            exitwhen u_naji == null
            call GroupRemoveUnit(g_naji, u_naji)
            call SetUnitState(u_naji, UNIT_STATE_LIFE, GetUnitState(u_naji, UNIT_STATE_MAX_LIFE))
            call SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
            call UnitResetCooldown(u_naji)
        endloop
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000恢复了所有玩家选择单位的|cffFFFF00生命/魔法/冷却|r")
    else
        call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
    endif
    call DestroyGroup(g_naji)
    set g_naji=null
    set u_naji=null
endfunction
function TestA6_naji takes nothing returns nothing
    local timer t_naji=GetExpiredTimer()
    local unit u_naji
    loop
        set u_naji=FirstOfGroup(Gcd_naji[0])
        exitwhen u_naji == null
        call GroupRemoveUnit(Gcd_naji[0], u_naji)
        call SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
        call UnitResetCooldown(u_naji)
    endloop
    call DestroyTimer(t_naji)
    set t_naji=null
    set u_naji=null
endfunction
function TestA5_naji takes nothing returns nothing
    local timer t_naji
    if IsUnitInGroup(GetTriggerUnit(), Gcd_naji[1]) then
        set t_naji=CreateTimer()
        call GroupAddUnit(Gcd_naji[0], GetTriggerUnit())
        call TimerStart(t_naji, 0, false, function TestA6_naji)
        set t_naji=null
    endif
endfunction
function TestA3_naji takes nothing returns nothing
    local location p_naji
    if Bpn_naji then
        set Sdummy_naji[3]=GetPlayerName(GetTriggerPlayer()) + "（玩家" + I2S(GetPlayerId(GetTriggerPlayer()) + 1) + "）"
    else
        set Sdummy_naji[3]=""
    endif
    if GetSpellTargetUnit() == null then
        if GetSpellTargetDestructable() == null then
            if GetSpellTargetItem() == null then
                set p_naji=GetSpellTargetLoc()
                if p_naji == null then
                    call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000施放了|cffFFFF00" + GetObjectName(GetSpellAbilityId()) + "|cffFF0000" + ID2S_naji(GetSpellAbilityId()) + "|r")
                else
                    call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000施放了|cffFFFF00" + GetObjectName(GetSpellAbilityId()) + "|cffFF0000" + ID2S_naji(GetSpellAbilityId()) + "|cff00FFFF目标点为|cffFFFF00（" + R2S(GetLocationX(p_naji)) + "," + R2S(GetLocationY(p_naji)) + "）|r")
                endif
                call RemoveLocation(p_naji)
                set p_naji=null
            else
                if Bxy_naji then
                    set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
                    set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetSpellTargetItem())) + "," + R2S(GetWidgetY(GetSpellTargetItem())) + "）"
                else
                    set Sdummy_naji[1]=""
                    set Sdummy_naji[2]=""
                endif
                call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000施放了|cffFFFF00" + GetObjectName(GetSpellAbilityId()) + "|cffFF0000" + ID2S_naji(GetSpellAbilityId()) + "|cff00FFFF目标为|cffFFFF00" + GetItemName(GetSpellTargetItem()) + "|cffFF0000" + ID2S_naji(GetItemTypeId(GetSpellTargetItem())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
            endif
        else
            if Bxy_naji then
                set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
                set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetSpellTargetDestructable())) + "," + R2S(GetWidgetY(GetSpellTargetDestructable())) + "）"
            else
                set Sdummy_naji[1]=""
                set Sdummy_naji[2]=""
            endif
            call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000施放了|cffFFFF00" + GetObjectName(GetSpellAbilityId()) + "|cffFF0000" + ID2S_naji(GetSpellAbilityId()) + "|cff00FFFF目标为|cffFFFF00" + GetDestructableName(GetSpellTargetDestructable()) + "|cffFF0000" + ID2S_naji(GetDestructableTypeId(GetSpellTargetDestructable())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
        endif
    else
        if Bpn_naji then
            set Sdummy_naji[4]=GetPlayerName(GetOwningPlayer(GetSpellTargetUnit())) + "（玩家" + I2S(GetPlayerId(GetOwningPlayer(GetSpellTargetUnit())) + 1) + "）"
        else
            set Sdummy_naji[4]=""
        endif
        if Bxy_naji then
            set Sdummy_naji[1]="（" + R2S(GetUnitX(GetTriggerUnit())) + "," + R2S(GetUnitY(GetTriggerUnit())) + "）"
            set Sdummy_naji[2]="（" + R2S(GetWidgetX(GetSpellTargetUnit())) + "," + R2S(GetWidgetY(GetSpellTargetUnit())) + "）"
        else
            set Sdummy_naji[1]=""
            set Sdummy_naji[2]=""
        endif
        call DisplayTextToPlayer(Ptest_naji, 0, 0, Sdummy_naji[3] + "|cffFFFF00" + GetUnitName(GetTriggerUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetTriggerUnit())) + "|cffFFFF00" + Sdummy_naji[1] + "|cffFF8000施放了|cffFFFF00" + GetObjectName(GetSpellAbilityId()) + "|cffFF0000" + ID2S_naji(GetSpellAbilityId()) + "|cff00FFFF目标为|r" + Sdummy_naji[4] + "|cffFFFF00" + GetUnitName(GetSpellTargetUnit()) + "|cffFF0000" + ID2S_naji(GetUnitTypeId(GetSpellTargetUnit())) + "|cffFFFF00" + Sdummy_naji[2] + "|r")
    endif
endfunction
function TestA8_naji takes nothing returns nothing
    if GetClickedButton() != Button_naji[0] and GetClickedButton() != Button_naji[100] then
        if GetClickedButton() == Button_naji[1] then
            if Bxy_naji then
                set Bxy_naji=false
            else
                set Bxy_naji=true
            endif
        elseif GetClickedButton() == Button_naji[2] then
            if Bid_naji then
                set Bid_naji=false
            else
                set Bid_naji=true
            endif
        elseif GetClickedButton() == Button_naji[3] then
            if Bpn_naji then
                set Bpn_naji=false
            else
                set Bpn_naji=true
            endif
        elseif GetClickedButton() == Button_naji[4] then
            if Bir_naji then
                set Bir_naji=false
            else
                set Bir_naji=true
            endif
        elseif GetClickedButton() == Button_naji[5] then
            if Bddm_naji then
                set Bddm_naji=false
            else
                set Bddm_naji=true
            endif
        endif
        call DialogResetA2_naji()
        call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[1], true)
    elseif GetClickedButton() == Button_naji[0] then
        call DialogResetA_naji()
        call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
    endif
endfunction
function TestA4_naji takes nothing returns nothing
    local location p_naji
    local group g_naji
    local integer i_naji
    local unit u_naji
    if GetClickedButton() != Button_naji[0] and GetClickedButton() != Button_naji[100] then
        if GetClickedButton() == Button_naji[1] then
            if IsTriggerEnabled(Ttest_naji[2]) then
                call DisableTrigger(Ttest_naji[2])
            else
                call EnableTrigger(Ttest_naji[2])
            endif
        elseif GetClickedButton() == Button_naji[2] then
            if IsTriggerEnabled(Ttest_naji[15]) then
                call DisableTrigger(Ttest_naji[15])
            else
                call EnableTrigger(Ttest_naji[15])
            endif
        elseif GetClickedButton() == Button_naji[3] then
            if IsTriggerEnabled(Ttest_naji[17]) then
                call DisableTrigger(Ttest_naji[17])
            else
                call EnableTrigger(Ttest_naji[17])
            endif
        elseif GetClickedButton() == Button_naji[4] then
            if IsTriggerEnabled(Ttest_naji[26]) then
                call DestroyTrigger(Ttest_naji[0])
                call DisableTrigger(Ttest_naji[26])
                set Rdummy_naji=0
            else
                set Ttest_naji[0]=CreateTrigger()
                call TriggerAddCondition(Ttest_naji[0], Condition(function TestA29_naji))
                call EnableTrigger(Ttest_naji[26])
                set g_naji=CreateGroup()
                set i_naji=0
                loop
                    call GroupEnumUnitsOfPlayer(g_naji, Player(i_naji), null)
                    loop
                        set u_naji=FirstOfGroup(g_naji)
                        exitwhen u_naji == null
                        call GroupRemoveUnit(g_naji, u_naji)
                        if GetUnitAbilityLevel(u_naji, 'Aloc') == 0 then
                            call TriggerRegisterUnitEvent(Ttest_naji[0], u_naji, EVENT_UNIT_DAMAGED)
                        endif
                    endloop
                    set i_naji=i_naji + 1
                    exitwhen i_naji >= 16
                endloop
                set Rdummy_naji=0
                call DestroyGroup(g_naji)
                set g_naji=null
            endif
        elseif GetClickedButton() == Button_naji[5] then
            if IsTriggerEnabled(Ttest_naji[4]) then
                call DestroyGroup(Gcd_naji[1])
                call DisableTrigger(Ttest_naji[4])
            else
                set Gcd_naji[1]=CreateGroup()
                call EnableTrigger(Ttest_naji[4])
            endif
    //=========================以下部分1.24以下的版本需删除==============================
        elseif GetClickedButton() == Button_naji[6] then
            if IsTriggerEnabled(Ttest_naji[7]) then
                call DisableTrigger(Ttest_naji[7])
            else
                call EnableTrigger(Ttest_naji[7])
                set Ihandle_naji=0
                set Rhandle_naji=0
                set p_naji=Location(0, 0)
                set Ihandle_naji=GetHandleId(p_naji)
                call EnableTrigger(Ttest_naji[7])
                call RemoveLocation(p_naji)
                set p_naji=null
            endif
    //=========================以上部分1.24以下的版本需删除==============================
        elseif GetClickedButton() == Button_naji[7] then
            if IsTriggerEnabled(Ttest_naji[61]) then
                call DisableTrigger(Ttest_naji[61])
            else
                call EnableTrigger(Ttest_naji[61])
            endif
        elseif GetClickedButton() == Button_naji[8] then
            if IsTriggerEnabled(Ttest_naji[71]) then
                call DestroyGroup(Gms_naji)
                call DisableTrigger(Ttest_naji[71])
            else
                set Gms_naji=CreateGroup()
                call EnableTrigger(Ttest_naji[71])
            endif
        endif
        call DialogResetA_naji()
        call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
    elseif GetClickedButton() == Button_naji[0] then
        call DialogResetA2_naji()
        call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[1], true)
    endif
    set u_naji=null
endfunction
function TestA2_naji takes nothing returns nothing
    call DialogResetA_naji()
    call DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
endfunction
//=====================================#功能函数结束=====================================
//=====================================$初始化函数开始=====================================
function TestA_naji takes nothing returns nothing
    local integer i_naji
    local integer row_naji=2769
    set Sdummy_naji[1]="2013/11/04"
    // 拥有测试权限
    if udg_isTest[GetPlayerId(GetTriggerPlayer())] or testVersion then
    // if udg_vip[1+GetPlayerId(GetTriggerPlayer())]>1 then
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00===============*****===============|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFF8000         开始初始化|cff00FFFFnajitest|cffFF8000测试代码|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFF80C0                代码版本：|cffFF0000V2.4|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00              更新日期：|cffFF0000" + Sdummy_naji[1] + "|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFFFF00       需要查看所有可用代码请按下|cffFF0000F9|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFFFF00     任意玩家输入|cffFF0000'remove|cffFFFF00可清除该系统|r")
    	call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00===============*****===============|r")
    	set Ptest_naji=GetTriggerPlayer()
    	set StringList_naji=".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
    	set Rworld_naji=CreateRegion()
    	call RegionAddRect(Rworld_naji, GetWorldBounds())
    	set Itrigger_naji=0
    	loop
    	    set Itrigger_naji=Itrigger_naji + 1
    	    set Ttest_naji[Itrigger_naji]=CreateTrigger()
    	    exitwhen Itrigger_naji >= 77
    	endloop
    	set Iquest_naji=0
    	loop
    	    set Iquest_naji=Iquest_naji + 1
    	    set Q_naji[Iquest_naji]=CreateQuest()
    	    call QuestSetIconPath(Q_naji[Iquest_naji], "Buildings\\Other\\TempArtB\\BTNTempB.blp")
    	    call QuestSetRequired(Q_naji[Iquest_naji], false)
    	    call QuestSetDiscovered(Q_naji[Iquest_naji], true)
    	    call QuestSetCompleted(Q_naji[Iquest_naji], false)
    	    exitwhen Iquest_naji >= 13
    	endloop
    	set i_naji=61
    	call QuestSetTitle(Q_naji[1], "|cffFF0000najitest帮助信息")
    	call QuestSetDescription(Q_naji[1], "|cff00FFFF注意：|r|n|cff00FFFF1、|cffFF0000*|cffFFFF00代表需要输入|cffFF80C0数字/文字，且其数量代表要输入多少个参数，参数之间用英文逗号隔开。多参数命令的第1参数必需输入，其它参数若空缺则系统会自动填补|r|n|cff00FFFF2、|cffFF0000(s)|cffFFFF00代表该代码功能可以同时作用|cffFF80C0玩家选择的所有单位|r|n|cff00FFFF3、|cffFFFF00很多功能都可以通过|cffFF80C0反复输入代码|cffFFFF00来切换|cffFF0000开/关|r|n|cff00FFFF4、|cffFFFF00为保持稳定，判定|cffFF80C0玩家选择单位|cffFFFF00没有同步系统数据，请确保在使用相关代码前|cffFF0000重新框选|cffFFFF00合适的单位|r|n|cff00FFFF5、|cffFFFF00大部分功能支持|cffFF0000负数|cffFFFF00，不支持负数的功能输入负值会|cffFF80C0还原默认设定|r|n|cff00FFFF6、|cffFFFF00使用者可以在任何时候|cffFF0000按下Esc|cffFFFF00重新获得用户控制权及关闭电影模式|r")
    	call QuestSetTitle(Q_naji[2], "|cffFF0000独立系统")
    	call QuestSetDescription(Q_naji[2], "|cffFFFF00'fengshu|cffFF0000(|rnajitest system|cffFF0000)|r|cffFFFF00'gms|cffFF0000(|r(Group Multiple Spell)|cffFF0000)|r|cffFFFF00'gcd|cffFF0000(|r(Group Cool Down)|cffFF0000)|r|n|n|cff00FFFF该系统包含众多测试功能，输入后会打开一个对话框")
    	call QuestSetTitle(Q_naji[3], "|cffFF0000单位-英雄（必须选择英雄）")
    	call QuestSetDescription(Q_naji[3], "|cffFFFF00'hl*|cffFF0000(|rset Hero(s) Level|cffFF0000)|r|cffFFFF00'hp*|cffFF0000(|radd Hero(s) skill Point|cffFF0000)|r|cffFFFF00'hs*|cffFF0000(|rset Hero(s) Str|cffFF0000)|r|cffFFFF00'ha*|cffFF0000(|rset Hero(s) Agi|cffFF0000)|r|cffFFFF00'hi*|cffFF0000(|rset Hero(s) Int|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[4], "|cffFF0000单位-数值（必须选择单位）")
    	call QuestSetDescription(Q_naji[4], "|cffFFFF00'uts*|cffFF0000(|rUnit(s) Time Scale|cffFF0000)|r|cffFFFF00'uic**|cffFF0000(|rset Unit's Item Charge|cffFF0000)|r|cffFFFF00'um*|cffFF0000(|rset Unit(s) Move speed|cffFF0000)|r|cffFFFF00'uus*|cffFF0000(|rset Unit(s) tUrn Speed|cffFF0000)|r|cffFFFF00'uar*|cffFF0000(|rset Unit(s) Acquire Range|cffFF0000)|r|cffFFFF00'ufh*|cffFF0000(|rset Unit(s) Fly Height|cffFF0000)|r|cffFFFF00'ud*|cffFF0000(|rset Unit(s) user Data|cffFF0000)|r|cffFFFF00'us*|cffFF0000(|rset Unit(s) Scale|cffFF0000)|r|cffFFFF00'uvc****|cffFF0000(|rset Unit(s) Vertax Color|cffFF0000)|r|cffFFFF00'uxy**|cffFF0000(|rset Unit(s) XY|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[5], "|cffFF0000单位-状态（必须选择单位）")
    	call QuestSetDescription(Q_naji[5], "|cffFFFF00'uh|cffFF0000(|rUnit(s) Healing|cffFF0000)|r|cffFFFF00'up|cffFF0000(|rUnit(s) Pause|cffFF0000)|r|cffFFFF00'ub|cffFF0000(|rUnit(s) Buff clear|cffFF0000)|r|cffFFFF00'uw|cffFF0000(|rUnit(s) Windwalk|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[6], "|cffFF0000单位-特殊（必须选择单位）")
    	call QuestSetDescription(Q_naji[6], "|cffFFFF00'ua*|cffFF0000(|rplay Unit(s) Animation by index|cffFF0000)|r|cffFFFF00'ui|cffFF0000(|rUnit Information|cffFF0000)|r|cffFFFF00'uo*|cffFF0000(|rset Unit(s) Owner|cffFF0000)|r|cffFFFF00'uk|cffFF0000(|rUnit(s) Killed|cffFF0000)|r|cffFFFF00'co**|cffFF0000(|rCreate Object|cffFF0000)|r|cffFFFF00'ul|cffFF0000(|rUnit camera Lock|cffFF0000)|r|cffFFFF00'ur|cffFF0000(|rUnit(s) Remove|cffFF0000)|r|cffFFFF00'uii*|cffFF0000(|rUnit's Item Information|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[7], "|cffFF0000玩家相关")
    	call QuestSetDescription(Q_naji[7], "|cffFFFF00'ag**/al**|cffFF0000(|rAdd Gold/Lumber|cffFF0000)|r|cffFFFF00'pc**|cffFF0000(|rPlayer Control|cffFF0000)|r|cffFFFF00'pa**|cffFF0000(|rset Player Alliance|cffFF0000)|r|cffFFFF00'pk*|cffFF0000(|rPlayer Kicked|cffFF0000)|r|cffFFFF00'ph**|cffFF0000(|rset Player Handicap|cffFF0000)|r|cffFFFF00'pn*|cffFF0000(|rPlayer Name|cffFF0000)|r|cffFFFF00'pt***|cffFF0000(|rPlayer Tech|cffFF0000)|r|cffFFFF00'psl|cffFF0000(|rPlayer Statistics List|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[8], "|cffFF0000镜头相关")
    	call QuestSetDescription(Q_naji[8], "|cffFFFF00'cm|cffFF0000(|rCamera Mode|cffFF0000)|r|cffFFFF00'cd*|cffFF0000(|rCamera Distance|cffFF0000)|r|cffFFFF00'cr|cffFF0000(|rCamera Reset|cffFF0000)|r|cffFFFF00'ci|cffFF0000(|rCamera Information|cffFF0000)|r|cffFFFF00'cz*|cffFF0000(|rset Camera farZ|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[9], "|cffFF0000其它")
    	call QuestSetDescription(Q_naji[9], "|cffFFFF00'fog|cffFF0000(|rFog|cffFF0000)|r|cffFFFF00'sc|cffFF0000(|rScreen Clear|cffFF0000)|r|cffFFFF00'rd|cffFF0000(|rRoll Dice|cffFF0000)|r|cffFFFF00'bm*|cffFF0000(|rBackup Message|cffFF0000)|r|cffFFFF00'cbm|cffFF0000(|rClear Backup Message|cffFF0000)|r|cffFFFF00'td*|cffFF0000(|rset Time of Day|cffFF0000)|r|cffFFFF00'ts*|cffFF0000(|rset Time of day Scale|cffFF0000)|r|cffFFFF00'we*|cffFF0000(|rWeather Effect|cffFF0000)|r|cffFFFF00'se*|cffFF0000(|rSystem Exchange|cffFF0000)|r|cffFFFF00'ef*|cffFF0000(|rExecute Function|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[10], "|cffFF0000游戏设置")
    	call QuestSetDescription(Q_naji[10], "|cffFFFF00'mv*|cffFF0000(|rMusic Volume|cffFF0000)|r|cffFFFF00'sv*|cffFF0000(|rSound Volume|cffFF0000)|r|cffFFFF00'pg|cffFF0000(|rPause Game|cffFF0000)|r|cffFFFF00'rs*|cffFF0000(|rset Random Seed|cffFF0000)|r|cffFFFF00'gg|cffFF0000(|rGood Game|cffFF0000)|r|cffFFFF00'gs*|cffFF0000(|rset Game Speed|cffFF0000)|r|cffFFFF00'mf|cffFF0000(|rset Map Flag|cffFF0000)|r|cffFFFF00're|cffFF0000(|rRestart|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[11], "|cffFF0000co命令帮助信息")
    	call QuestSetDescription(Q_naji[11], "|cffFF0000co命令可以创建单位、物品、可破坏物、添加删除技能、设置技能等级、删除buff。输入格式为'co+id+,+数值，数值对应创建物体的数量或技能等级，当没有输入数值时，默认为1。当单位已经拥有该技能，带有数值的'co命令会改变等级，不带数值的则会删除技能。|n|n|cffFFFF00Amov|cffFF0000(|r移动|cffFF0000)|r|cffFFFF00Abun|cffFF0000(|r货物保持|cffFF0000)|r|cffFFFF00Avul|cffFF0000(|r无敌|cffFF0000)|r|cffFFFF00AInv|cffFF0000(|r英雄物品栏|cffFF0000)|r|cffFFFF00ARal|cffFF0000(|r集结|cffFF0000)|r|cffFFFF00Arng|cffFF0000(|r复仇|cffFF0000)|r|cffFFFF00Awan|cffFF0000(|r游荡者|cffFF0000)|r|cffFFFF00Ane2|cffFF0000(|r选择单位|cffFF0000)|r|cffFFFF00Apiv|cffFF0000(|r永久隐形|cffFF0000)|r|cffFFFF00Adtg|cffFF0000(|r真实视域|cffFF0000)|r|cffFFFF00Aeth|cffFF0000(|r可见幽灵|cffFF0000)|r|cffFFFF00Arsk|cffFF0000(|r抗性皮肤|cffFF0000)|r|cffFFFF00Acmi|cffFF0000(|r魔法免疫|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[12], "|cffFF0000we命令帮助信息")
    	call QuestSetDescription(Q_naji[12], "|cffFF0000注意乱输4位ID会游戏崩溃！输入的ID未满4位时会清除所有已创建的全图天气。|r|n|n|cffFFFF00RA(h/l)r|cffFF0000(|r白杨谷(大/小)雨|cffFF0000)|r|cffFFFF00MEds|cffFF0000(|r达拉然之盾|cffFF0000)|r|cffFFFF00FD(b/g/r/w)(h/l)|cffFF0000(|r地下城(蓝/绿/红/白)(浓/薄)雾|cffFF0000)|r|cffFFFF00RL(h/l)r|cffFF0000(|r洛丹伦(大/小)雨|cffFF0000)|r|cffFFFF00SN(b/h/l)s|cffFF0000(|r诺森德(暴/大/小)雪|cffFF0000)|r|cffFFFF00WO(c/l)w|cffFF0000(|r边缘之地(大/小)风|cffFF0000)|r|cffFFFF00Lr(a/m)a|cffFF0000(|r(日/月)光|cffFF0000)|r|cffFFFF00WNcw|cffFF0000(|r大风|cffFF0000)|r")
    	call QuestSetTitle(Q_naji[13], "|cffFF0000najitest基本信息")
    	call QuestSetDescription(Q_naji[13], "|cffFFFF00脚本作者：|cffFF0000najizhimo|r|n|cffFFFF00当前使用者：|cffFF0000" + GetPlayerName(Ptest_naji) + "|r|n|cffFFFF00更新日期：|cffFF0000" + Sdummy_naji[1] + "|n|cffFFFF00可用代码数量：|cffFF0000" + I2S(i_naji) + "|r|n|cffFFFF00注册触发数量：|cffFF0000" + I2S(Itrigger_naji) + "|r|n|cffFFFF00创建任务数量：|cffFF0000" + I2S(Iquest_naji) + "|r|n|cffFFFF00脚本行数：|cffFF0000" + I2S(row_naji) + "|n|cffFFFF00对此系统有任何提议请到|cffFF80C0百度魔兽地图编辑器贴吧|cffFFFF00发贴|r|n|cffFFFF00任意玩家输入|cffFF0000'remove|cffFFFF00可清除该系统|r")
    	call FlashQuestDialogButton()
    	//=========================naji system开始==============================
    	    //'fengshu(najitest system)
    	set Dnaji_naji[0]=DialogCreate()
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[1], GetTriggerPlayer(), "'fengshu", true)
    	call TriggerAddCondition(Ttest_naji[1], Condition(function TestA2_naji))
    	call TriggerRegisterDialogEvent(Ttest_naji[3], Dnaji_naji[0])
    	call TriggerAddCondition(Ttest_naji[3], Condition(function TestA4_naji))
    	    //Display Ability
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[2], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[2], Condition(function TestA3_naji))
    	call DisableTrigger(Ttest_naji[2])
    	    //Display Order
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER, null)
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER, null)
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_ORDER, null)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[15], Condition(function TestA17_naji))
    	call DisableTrigger(Ttest_naji[15])
    	    //Display Life
    	call TriggerRegisterEnterRegion(Ttest_naji[17], Rworld_naji, null)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[17], Player(i_naji), EVENT_PLAYER_UNIT_DEATH, null)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[17], Condition(function TestA19_naji))
    	call DisableTrigger(Ttest_naji[17])
    	    //Display Damage
    	call TriggerRegisterEnterRegion(Ttest_naji[26], Rworld_naji, null)
    	call TriggerAddCondition(Ttest_naji[26], Condition(function TestA28_naji))
    	call DisableTrigger(Ttest_naji[26])
    	    //No cd mana Cost
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[4], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[4], Condition(function TestA5_naji))
    	call DisableTrigger(Ttest_naji[4])
    	set Gcd_naji[0]=CreateGroup()
    	set Gcd_naji[1]=null
    	//=========================以下部分1.24以下的版本需删除==============================
    	    //Display Handle
    	call TriggerRegisterTimerEvent(Ttest_naji[7], 0.1, true)
    	call TriggerAddCondition(Ttest_naji[7], Condition(function TestA9_naji))
    	call DisableTrigger(Ttest_naji[7])
    	//=========================以上部分1.24以下的版本需删除==============================
    	    //Observer
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[61], Player(i_naji), "", false)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call DisableTrigger(Ttest_naji[61])
    	call TriggerAddCondition(Ttest_naji[61], Condition(function TestA66_naji))
    	    //Multiple Spell
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerUnitEvent(Ttest_naji[71], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[71], Condition(function TestA76_naji))
    	call DisableTrigger(Ttest_naji[71])
    	set Gms_naji=null
    	    //系统信息调整
    	set Dnaji_naji[1]=DialogCreate()
    	call TriggerRegisterDialogEvent(Ttest_naji[6], Dnaji_naji[1])
    	call TriggerAddCondition(Ttest_naji[6], Condition(function TestA8_naji))
    	        //whether display widget XY
    	set Bxy_naji=true
    	        //whether display widget ID
    	set Bid_naji=true
    	        //whether display Player Name
    	set Bpn_naji=false
    	        //whether display Int or Real
    	set Bir_naji=true
    	        //change Display Damage Mode
    	set Bddm_naji=false
    	//=========================naji system结束==============================
    	//’uh(Unit(s) Healing)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[5], GetTriggerPlayer(), "'uh", true)
    	call TriggerAddCondition(Ttest_naji[5], Condition(function TestA7_naji))
    	//’ag**/al**(Add Gold/Lumber)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[8], GetTriggerPlayer(), "'ag", false)
    	call TriggerAddCondition(Ttest_naji[8], Condition(function TestA10_naji))
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[9], GetTriggerPlayer(), "'al", false)
    	call TriggerAddCondition(Ttest_naji[9], Condition(function TestA11_naji))
    	//’hl*(set Hero(s) Level)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[10], GetTriggerPlayer(), "'hl", false)
    	call TriggerAddCondition(Ttest_naji[10], Condition(function TestA12_naji))
    	//’fog(Fog)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[11], GetTriggerPlayer(), "'fog", true)
    	call TriggerAddCondition(Ttest_naji[11], Condition(function TestA13_naji))
    	if IsMapFlagSet(MAP_FOG_ALWAYS_VISIBLE) then
    	    set Bfog_naji=false
    	else
    	    set Bfog_naji=true
    	endif
    	//’ua*(play Unit(s) Animation by index)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[12], GetTriggerPlayer(), "'ua", false)
    	call TriggerAddCondition(Ttest_naji[12], Condition(function TestA14_naji))
    	//’cd(Camera Distance)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[13], Player(i_naji), "'cd", false)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[13], Condition(function TestA15_naji))
    	//'ur(Unit(s) Remove)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[14], GetTriggerPlayer(), "'ur", true)
    	call TriggerAddCondition(Ttest_naji[14], Condition(function TestA16_naji))
    	//'pn(Player Name)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[16], Player(i_naji), "'pn", false)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[16], Condition(function TestA18_naji))
    	//'sc(Screen Clear)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[18], Player(i_naji), "'sc", true)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[18], Condition(function TestA20_naji))
    	//'cr(Camera Reset)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[19], Player(i_naji), "'cr", true)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[19], Condition(function TestA21_naji))
    	//’ui(Unit Information)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[20], Player(i_naji), "'ui", true)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[20], Condition(function TestA22_naji))
    	//’pc**(Player Control)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[21], GetTriggerPlayer(), "'pc", false)
    	call TriggerAddCondition(Ttest_naji[21], Condition(function TestA23_naji))
    	//'uvc****(set Unit(s) Vertex Color)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[22], GetTriggerPlayer(), "'uvc", false)
    	call TriggerAddCondition(Ttest_naji[22], Condition(function TestA24_naji))
    	//’uts*(Unit(s) Time Scale)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[23], GetTriggerPlayer(), "'uts", false)
    	call TriggerAddCondition(Ttest_naji[23], Condition(function TestA25_naji))
    	//’pg(Pause Game)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[24], GetTriggerPlayer(), "'pg", true)
    	call TriggerAddCondition(Ttest_naji[24], Condition(function TestA26_naji))
    	set Bpause_naji=false
    	//'psl(Player Statistics List)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[25], GetTriggerPlayer(), "'psl", true)
    	call TriggerAddCondition(Ttest_naji[25], Condition(function TestA27_naji))
    	//'up(Unit(s) Pause)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[27], GetTriggerPlayer(), "'up", true)
    	call TriggerAddCondition(Ttest_naji[27], Condition(function TestA30_naji))
    	//'mv*(Music Volume)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[28], GetTriggerPlayer(), "'mv", false)
    	call TriggerAddCondition(Ttest_naji[28], Condition(function TestA31_naji))
    	//'rd(Roll Dice)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[29], GetTriggerPlayer(), "'rd", true)
    	call TriggerAddCondition(Ttest_naji[29], Condition(function TestA32_naji))
    	//'sv*(Sound Volume)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[30], GetTriggerPlayer(), "'sv", false)
    	call TriggerAddCondition(Ttest_naji[30], Condition(function TestA33_naji))
    	//'bm*(Backup Message)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[31], Player(i_naji), "'bm", false)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[31], Condition(function TestA34_naji))
    	set Ibm_naji=0
    	//'cbm(Clear Backup Message)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[32], GetTriggerPlayer(), "'cbm", true)
    	call TriggerAddCondition(Ttest_naji[32], Condition(function TestA35_naji))
    	//'uic**(set Unit's Item Charge)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[33], GetTriggerPlayer(), "'uic", false)
    	call TriggerAddCondition(Ttest_naji[33], Condition(function TestA36_naji))
    	//'rs*(set Random Seed)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[34], GetTriggerPlayer(), "'rs", false)
    	call TriggerAddCondition(Ttest_naji[34], Condition(function TestA37_naji))
    	//'td*(set Time of Day)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[35], GetTriggerPlayer(), "'td", false)
    	call TriggerAddCondition(Ttest_naji[35], Condition(function TestA38_naji))
    	//'um*(set Unit(s) Move speed)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[36], GetTriggerPlayer(), "'um", false)
    	call TriggerAddCondition(Ttest_naji[36], Condition(function TestA39_naji))
    	//'uus*(set Unit(s) tUrn Speed)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[37], GetTriggerPlayer(), "'uus", false)
    	call TriggerAddCondition(Ttest_naji[37], Condition(function TestA40_naji))
    	//'uar*(set Unit(s) Acquire Range)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[38], GetTriggerPlayer(), "'uar", false)
    	call TriggerAddCondition(Ttest_naji[38], Condition(function TestA41_naji))
    	//'ufh*(set Unit(s) Fly Height)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[39], GetTriggerPlayer(), "'ufh", false)
    	call TriggerAddCondition(Ttest_naji[39], Condition(function TestA42_naji))
    	//'hp*(add Hero(s) skill Point)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[40], GetTriggerPlayer(), "'hp", false)
    	call TriggerAddCondition(Ttest_naji[40], Condition(function TestA43_naji))
    	//'hs*(set Hero(s) Str)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[41], GetTriggerPlayer(), "'hs", false)
    	call TriggerAddCondition(Ttest_naji[41], Condition(function TestA44_naji))
    	//'ha*(set Hero(s) Agi)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[42], GetTriggerPlayer(), "'ha", false)
    	call TriggerAddCondition(Ttest_naji[42], Condition(function TestA45_naji))
    	//'hi*(set Hero(s) Int)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[43], GetTriggerPlayer(), "'hi", false)
    	call TriggerAddCondition(Ttest_naji[43], Condition(function TestA46_naji))
    	//'ud*(set Unit(s) user Data)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[44], GetTriggerPlayer(), "'ud", false)
    	call TriggerAddCondition(Ttest_naji[44], Condition(function TestA47_naji))
    	//'ts*(set Time of day Scale)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[45], GetTriggerPlayer(), "'ts", false)
    	call TriggerAddCondition(Ttest_naji[45], Condition(function TestA48_naji))
    	//'ph**(set Player Handicap)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[46], GetTriggerPlayer(), "'ph", false)
    	call TriggerAddCondition(Ttest_naji[46], Condition(function TestA49_naji))
    	//'uk(Unit(s) killed)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[47], GetTriggerPlayer(), "'uk", true)
    	call TriggerAddCondition(Ttest_naji[47], Condition(function TestA50_naji))
    	//'remove(remove najitest)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[48], Player(i_naji), "'remove", true)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[48], Condition(function TestA51_naji))
    	//’pa**(set Player Alliance)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[49], GetTriggerPlayer(), "'pa", false)
    	call TriggerAddCondition(Ttest_naji[49], Condition(function TestA52_naji))
    	//'uo*(set Unit(s) Owner)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[50], GetTriggerPlayer(), "'uo", false)
    	call TriggerAddCondition(Ttest_naji[50], Condition(function TestA53_naji))
    	//'cz*(set Camera farZ)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[51], GetTriggerPlayer(), "'cz", false)
    	call TriggerAddCondition(Ttest_naji[51], Condition(function TestA54_naji))
    	//'uw(Unit(s) Windwalk)
    	set Guw_naji=CreateGroup()
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[52], GetTriggerPlayer(), "'uw", true)
    	call TriggerAddCondition(Ttest_naji[52], Condition(function TestA55_naji))
    	//'co**(Create Object)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[53], GetTriggerPlayer(), "'co", false)
    	call TriggerAddCondition(Ttest_naji[53], Condition(function TestA56_naji))
    	//'pk*(Player Kicked)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[54], GetTriggerPlayer(), "'pk", false)
    	call TriggerAddCondition(Ttest_naji[54], Condition(function TestA57_naji))
    	//'ub(Unit(s) Buff clear)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[55], GetTriggerPlayer(), "'ub", true)
    	call TriggerAddCondition(Ttest_naji[55], Condition(function TestA59_naji))
    	//'ul(Unit camera Lock)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[56], GetTriggerPlayer(), "'ul", true)
    	call TriggerAddCondition(Ttest_naji[56], Condition(function TestA60_naji))
    	//'cm(Camera Mode)
    	set Tcamera_naji=null
    	set Bcamera_naji[0]=false
    	set Bcamera_naji[1]=false
    	set Bcamera_naji[2]=false
    	set Bcamera_naji[3]=false
    	set Bcamera_naji[4]=false
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[57], GetTriggerPlayer(), "'cm", true)
    	call TriggerAddCondition(Ttest_naji[57], Condition(function TestA61_naji))
    	call DisableTrigger(Ttest_naji[58])
    	call TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_UP_DOWN)
    	call TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_DOWN_DOWN)
    	call TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_LEFT_DOWN)
    	call TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_RIGHT_DOWN)
    	call TriggerAddCondition(Ttest_naji[58], Condition(function TestA62_naji))
    	call DisableTrigger(Ttest_naji[59])
    	call TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_UP_UP)
    	call TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_DOWN_UP)
    	call TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_LEFT_UP)
    	call TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_RIGHT_UP)
    	call TriggerAddCondition(Ttest_naji[59], Condition(function TestA63_naji))
    	//'ci(Camera Information)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[60], Player(i_naji), "'ci", true)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[60], Condition(function TestA65_naji))
    	//'us*(Unit(s) Scale)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[62], GetTriggerPlayer(), "'us", false)
    	call TriggerAddCondition(Ttest_naji[62], Condition(function TestA67_naji))
    	//'gg(Good Game)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[63], GetTriggerPlayer(), "'gg", true)
    	call TriggerAddCondition(Ttest_naji[63], Condition(function TestA68_naji))
    	//'gs*(set Game Speed)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[64], GetTriggerPlayer(), "'gs", false)
    	call TriggerAddCondition(Ttest_naji[64], Condition(function TestA69_naji))
    	//'mf(set Map Flag)
    	set Dnaji_naji[2]=DialogCreate()
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[65], GetTriggerPlayer(), "'mf", true)
    	call TriggerAddCondition(Ttest_naji[65], Condition(function TestA70_naji))
    	call TriggerRegisterDialogEvent(Ttest_naji[66], Dnaji_naji[2])
    	call TriggerAddCondition(Ttest_naji[66], Condition(function TestA71_naji))
    	//Esc
    	call TriggerRegisterPlayerEvent(Ttest_naji[67], GetTriggerPlayer(), EVENT_PLAYER_END_CINEMATIC)
    	call TriggerAddCondition(Ttest_naji[67], Condition(function TestA72_naji))
    	//'we(Weather Effect)
    	set Iweather_naji=0
    	set Weather_naji[0]=null
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[68], GetTriggerPlayer(), "'we", false)
    	call TriggerAddCondition(Ttest_naji[68], Condition(function TestA73_naji))
    	//'pt***(set Player Tech)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[69], GetTriggerPlayer(), "'pt", false)
    	call TriggerAddCondition(Ttest_naji[69], Condition(function TestA74_naji))
    	//'re(Restart)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[70], GetTriggerPlayer(), "'re", true)
    	call TriggerAddCondition(Ttest_naji[70], Condition(function TestA75_naji))
    	//'gms(Group Multiple Spell)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[72], GetTriggerPlayer(), "'gms", true)
    	call TriggerAddCondition(Ttest_naji[72], Condition(function TestA77_naji))
    	//'gcd(Group Cool Down)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[73], GetTriggerPlayer(), "'gcd", true)
    	call TriggerAddCondition(Ttest_naji[73], Condition(function TestA78_naji))
    	//'uii*(Unit's Item Information)
    	set i_naji=0
    	loop
    	    call TriggerRegisterPlayerChatEvent(Ttest_naji[74], Player(i_naji), "'uii", false)
    	    set i_naji=i_naji + 1
    	    exitwhen i_naji >= 16
    	endloop
    	call TriggerAddCondition(Ttest_naji[74], Condition(function TestA79_naji))
    	//'uxy**(set Unit(s) XY)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[75], GetTriggerPlayer(), "'uxy", false)
    	call TriggerAddCondition(Ttest_naji[75], Condition(function TestA80_naji))
    	//'se*(System Exchange)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[76], GetTriggerPlayer(), "'se", false)
    	call TriggerAddCondition(Ttest_naji[76], Condition(function TestA81_naji))
    	//'ef*(Execute Function)
    	call TriggerRegisterPlayerChatEvent(Ttest_naji[77], GetTriggerPlayer(), "'ef", false)
    	call TriggerAddCondition(Ttest_naji[77], Condition(function TestA82_naji))
    	call DestroyTrigger(GetTriggeringTrigger())
	endif
endfunction
function najitest takes nothing returns nothing
    local trigger t_naji=CreateTrigger()
    local integer i_naji=0
    loop
        call TriggerRegisterPlayerChatEvent(t_naji, Player(i_naji), "'fengshu", true)
        set i_naji=i_naji + 1
        exitwhen i_naji >= 16
    endloop
    call TriggerAddCondition(t_naji, Condition(function TestA_naji))
    set t_naji=null
endfunction
//=====================================$初始化函数结束=====================================
//===============najitest===============
//========================================================================
//键盘输入系统
//========================================================================
function getDeputyString takes integer i,integer l__deputy,string deputyStr returns string
	if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( l__deputy) - 1)])) != 0) then // INLINED!!
		return deputyStr
	endif
	return ""
endfunction
function getChiefString takes integer i,integer denomination,string chiefStr returns string
	if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( denomination) - 1)])) != 0) then // INLINED!!
		return chiefStr
	endif
	return ""
endfunction
function getTitleString takes integer i,integer title,string titleStr returns string
	if isTitle(i , title) then
		return titleStr
	endif
	return ""
endfunction
function KeyInput takes nothing returns nothing
 local string s= GetEventPlayerChatString()
 local item it= null
 local player p= GetTriggerPlayer()
 local integer i= GetPlayerId(p) + 1
 local integer j= 0
 local location loc= null
 local string str= null
 local real array shanghai
 local integer pId= GetPlayerId(p)
 local string spilt= ""
 local string tgs_menpai= ""
local string tgm_menpai= ""
local integer count= 0
	if s == "+" then
		call SetCameraFieldForPlayer(p, CAMERA_FIELD_TARGET_DISTANCE, ( GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) + 200.00 ), 1.00)
	endif
	if s == "-" then
		call SetCameraFieldForPlayer(p, CAMERA_FIELD_TARGET_DISTANCE, ( GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) - 200.00 ), 1.00)
	endif
	if s == "hg" or s == "HG" or s == "hc" or s == "HC" then
		call SetUnitPosition(udg_hero[i], - 1174, - 678)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 1174, - 678, 0)
	endif
	if s == "q" then
		call SetUnitPosition(udg_hero[i], - 869, 796)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 869, 796, 0)
	endif
	if s == "3" then
		call SetUnitPosition(udg_hero[i], - 869, - 2000)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), - 869, - 2000, 0)
	endif
	if s == "4" then
		call SetUnitPosition(udg_hero[i], 10692, - 14847)
		call PanCameraToTimedForPlayer(GetTriggerPlayer(), 10692, - 14847, 0)
	endif
	if SubStringBJ(s, 1, 2) == "wq" then
		if UnitHaveItem(udg_hero[i] , 'I0BH') == false then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前未装备自制武器")
		else
			set it=FetchUnitItem(udg_hero[i] , 'I0BH')
			call SaveStr(YDHT, GetHandleId(it), StringHash("武器名称"), SubStringBJ(s, 3, 40))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自制武器已更名为" + SubStringBJ(s, 3, 40))
		endif
	endif
	//if s == "randreal" then
	//	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	//	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	//	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	//	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	//	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	//endif
	if SubStringBJ(s, 1, 2) == "tx" then
		if S2I(SubStringBJ(s, 3, 4)) >= 1 and S2I(SubStringBJ(s, 3, 4)) <= 10 then
			set s__ZiZhiWuGong_texiao[zizhiwugong[i]]=S2I(SubStringBJ(s, 3, 4))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自创武功已更改为第" + SubStringBJ(s, 3, 40) + "种特效")
		endif
	endif
	if SubStringBJ(s, 1, 4) == "wing" then
		if S2I(SubStringBJ(s, 5, 5)) == 0 then
			call DestroyEffect(vd[i])
			set vd[i]=null
		endif
		if S2I(SubStringBJ(s, 5, 5)) == 1 then
			if wing1Flag[i] == 1 then
				call DestroyEffect(vd[i])
				call AddSpecialEffectTargetUnitBJ("chest", udg_hero[i], "wing_red_no6.mdx")
				set vd[i]=bj_lastCreatedEffect
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000未激活该翅膀")
			endif
		endif
		if S2I(SubStringBJ(s, 5, 5)) == 2 then
			if wing2Flag[i] == 1 then
				call DestroyEffect(vd[i])
				call AddSpecialEffectTargetUnitBJ("chest", udg_hero[i], "wing_bluewhite_no1.mdx")
				set vd[i]=bj_lastCreatedEffect
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000未激活该翅膀")
			endif
		endif
	endif
	if SubStringBJ(s, 1, 2) == "wg" then
		if GetUnitAbilityLevel(udg_hero[i], 'A036') == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前无自创武功")
		else
			set s__ZiZhiWuGong_name[zizhiwugong[i]]=SubStringBJ(s, 3, 40)
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自创武功已更名为" + SubStringBJ(s, 3, 40))
		endif
	endif
	// 查看称号
	if s == "ckch" or s == "CKCH" then
		set s=""
		set s=s + getDeputyString(i , LIAN_DAN , "炼丹大师 ")
		set s=s + getDeputyString(i , DUAN_ZAO , "锻造大师 ")
		set s=s + getDeputyString(i , BING_QI , "兵器大师 ")
		set s=s + getDeputyString(i , JIAN_DING , "鉴定大师 ")
		set s=s + getDeputyString(i , LIAN_QI , "练气大师 ")
		set s=s + getDeputyString(i , XUN_BAO , "寻宝大师 ")
		set s=s + getDeputyString(i , YA_HUAN , "郡主 ")
		set s=s + getDeputyString(i , JING_WU , "精武宗师 ")
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前已获得副职宗师：" + s)
		set s=""
		set s=s + getChiefString(i , 1 , "少林方丈 ")
		set s=s + getChiefString(i , 2 , "古墓掌门 ")
		set s=s + getChiefString(i , 3 , "丐帮帮主 ")
		set s=s + getChiefString(i , 4 , "华山掌门 ")
		set s=s + getChiefString(i , 5 , "全真掌教 ")
		set s=s + getChiefString(i , 6 , "血刀掌门 ")
		set s=s + getChiefString(i , 7 , "恒山掌门 ")
		set s=s + getChiefString(i , 8 , "峨眉掌门 ")
		set s=s + getChiefString(i , 9 , "武当掌门 ")
		set s=s + getChiefString(i , 10 , "星宿掌门 ")
		set s=s + getChiefString(i , 12 , "灵鹫宫主 ")
		set s=s + getChiefString(i , 13 , "慕容家主 ")
		set s=s + getChiefString(i , 14 , "明教教主 ")
		set s=s + getChiefString(i , 15 , "衡山掌门 ")
		set s=s + getChiefString(i , 16 , "男神龙 ")
		set s=s + getChiefString(i , 17 , "女神龙 ")
		set s=s + getChiefString(i , 18 , "泰山掌门 ")
		set s=s + getChiefString(i , 19 , "铁掌帮主 ")
		set s=s + getChiefString(i , 20 , "唐门门主 ")
		set s=s + getChiefString(i , 21 , "五毒教主 ")
		set s=s + getChiefString(i , 22 , "桃花岛主 ")
		set s=s + getChiefString(i , 23 , "野螺掌派 ")
		set s=s + getChiefString(i , 24 , "雪山掌门 ")
		set s=s + getChiefString(i , 25 , "汝阳王 ")
		set s=s + getChiefString(i , 26 , "嵩山掌门 ")
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00当前已获得掌门：" + s)
		set s=""
		set s=s + getTitleString(i , 1 , "扫地神僧 ")
		set s=s + getTitleString(i , 2 , "达摩祖师 ")
		set s=s + getTitleString(i , 3 , "大轮明王 ")
		set s=s + getTitleString(i , 4 , "金轮法王 ")
		set s=s + getTitleString(i , 5 , "神雕侠 ")
		set s=s + getTitleString(i , 6 , "小龙女 ")
		set s=s + getTitleString(i , 7 , "神雕侠侣 ")
		set s=s + getTitleString(i , 8 , "赤炼仙子 ")
		set s=s + getTitleString(i , 9 , "北丐 ")
		set s=s + getTitleString(i , 10 , "北乔峰 ")
		set s=s + getTitleString(i , 11 , "君子剑 ")
		set s=s + getTitleString(i , 12 , "风清扬 ")
		set s=s + getTitleString(i , 13 , "老顽童 ")
		set s=s + getTitleString(i , 14 , "中神通 ")
		set s=s + getTitleString(i , 15 , "血刀老祖 ")
		set s=s + getTitleString(i , 16 , "空心菜 ")
		set s=s + getTitleString(i , 17 , "仪琳 ")
		set s=s + getTitleString(i , 18 , "笑傲江湖 ")
		set s=s + getTitleString(i , 19 , "芷若 ")
		set s=s + getTitleString(i , 20 , "小东邪 ")
		set s=s + getTitleString(i , 21 , "邋遢仙人 ")
		set s=s + getTitleString(i , 22 , "张三丰 ")
		set s=s + getTitleString(i , 23 , "星宿老仙 ")
		set s=s + getTitleString(i , 24 , "天山童姥 ")
		set s=s + getTitleString(i , 25 , "虚竹子 ")
		set s=s + getTitleString(i , 26 , "慕容龙城 ")
		set s=s + getTitleString(i , 27 , "白眉鹰王 ")
		set s=s + getTitleString(i , 28 , "青翼蝠王 ")
		set s=s + getTitleString(i , 29 , "金毛狮王 ")
		set s=s + getTitleString(i , 30 , "无忌 ")
		set s=s + getTitleString(i , 31 , "莫大先生 ")
		set s=s + getTitleString(i , 32 , "神龙教主 ")
		set s=s + getTitleString(i , 33 , "教主夫人 ")
		set s=s + getTitleString(i , 34 , "天门道长 ")
		set s=s + getTitleString(i , 35 , "铁掌水上漂 ")
		set s=s + getTitleString(i , 36 , "搜魂侠 ")
		set s=s + getTitleString(i , 37 , "九阴真人 ")
		set s=s + getTitleString(i , 38 , "西毒 ")
		set s=s + getTitleString(i , 39 , "东邪 ")
		set s=s + getTitleString(i , 40 , "南帝 ")
		set s=s + getTitleString(i , 41 , "瑶琴 ")
		set s=s + getTitleString(i , 42 , "小虾米 ")
		set s=s + getTitleString(i , 43 , "郭大侠 ")
		set s=s + getTitleString(i , 44 , "神仙姐姐 ")
		set s=s + getTitleString(i , 45 , "婆婆姊姊 ")
		set s=s + getTitleString(i , 46 , "女中诸葛 ")
		set s=s + getTitleString(i , 47 , "爵爷 ")
		set s=s + getTitleString(i , 48 , "石破天惊")
		set s=s + getTitleString(i , 49 , "绍敏郡主 ")
		set s=s + getTitleString(i , 50 , "左盟主")
		set s=s + getTitleString(i , 51 , "五岳盟主")
		call DisplayTextToPlayer(p, 0, 0, "|cFFFFFF00当前已获得称号：" + s)
	endif
	if s == "ckwg" or s == "CKWG" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余自创武功点：" + I2S(wuxuedian[i]))
		if GetUnitAbilityLevel(udg_hero[i], 'A036') == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前无自创武功")
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000武功：" + s__ZiZhiWuGong_name[zizhiwugong[i]])
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000伤害范围：" + I2S(R2I(400. + 100. * I2R(s__ZiZhiWuGong_range[zizhiwugong[i]]))))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000伤害系数：" + R2S(1. + 0.5 * I2R(s__ZiZhiWuGong_xishu[zizhiwugong[i]])))
			set j=1
			loop
				exitwhen j > s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]
				call DisplayTextToPlayer(p, 0, 0, sc__DaPei_XiaoGuoShuoMing(dapei[20 * i + j]))
				set j=j + 1
			endloop
		endif
	endif
	if s == "ckwq" or s == "CKWQ" then
		if UnitHaveItem(udg_hero[i] , 'I0BH') == false then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前未装备自制武器")
		else
			set it=FetchUnitItem(udg_hero[i] , 'I0BH')
			if LoadStr(YDHT, GetHandleId(it), StringHash("武器名称")) == "" then
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00武器名称：尚未输入")
			else
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00武器名称：" + LoadStr(YDHT, GetHandleId(it), StringHash("武器名称")))
			endif
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF6600升级概率：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("升级概率")))) + "%")
			call DisplayTextToPlayer(p, 0, 0, "|cFFE500AF招式伤害：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("招式伤害")))) + " 内力：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("内力")))) + " 真实伤害：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("真实伤害")))))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0033暴击伤害：" + I2S(R2I(100 * LoadReal(YDHT, GetHandleId(it), StringHash("暴击伤害")))) + "% 暴击率：" + I2S(R2I(100 * LoadReal(YDHT, GetHandleId(it), StringHash("暴击率")))) + "% 绝学领悟：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("绝学领悟")))))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFFF33根骨：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("根骨")))) + " 胆魄：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("胆魄")))) + " 悟性：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("悟性")))))
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFFF33医术：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("医术")))) + " 经脉：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("经脉")))) + " 福缘：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("福缘")))))
			call DisplayTextToPlayer(p, 0, 0, "|cFF9933FF伤害回复：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("伤害回复")))) + " 杀怪回复：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("杀怪回复")))) + " 生命回复：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("生命回复")))) + " 法力回复：" + I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("法力回复")))))
		endif
	endif
	
	if s == "ckjn" or s == "CKJN" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000人物性格：你学武资质" + XingGeA(udg_xinggeA[i]) + "，态度" + XingGeB(udg_xinggeB[i]))
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		set j=1
		loop
			exitwhen j > wugongshu[i]
			if I7[( i - 1 ) * 20 + j] != 'AEfk' then
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "第" + I2S(GetUnitAbilityLevel(udg_hero[i], I7[( i - 1 ) * 20 + j])) + "重，升级进度：" + LoadStr(YDHT, GetHandleId(p), I7[( i - 1 ) * 20 + j] * 2))
			endif
			set j=j + 1
		endloop
		set j=1
		loop
			exitwhen j > alreadyInternalizedCount[i]
			// 内化武功的升重进度
			if LoadInteger(YDHT, interAbilityKey + i, j) != 'AEfk' then
				call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "第" + I2S(GetUnitAbilityLevel(udg_hero[i], LoadInteger(YDHT, interAbilityKey + i, j))) + "重，升级进度：" + LoadStr(YDHT, GetHandleId(p), LoadInteger(YDHT, interAbilityKey + i, j) * 2))
			endif
			set j=j + 1
		endloop
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	endif
	if s == "ckhf" or s == "CKHF" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF杀怪回复：" + I2S(R2I(shaguaihufui[i])))
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF伤害回复：" + I2S(R2I(shanghaihuifu[i])))
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF生命回复：" + I2S(R2I(shengminghuifu[i])))
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF法力回复：" + I2S(R2I(falihuifu[i])))
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	endif
	// 查看专属
	if s == "ckzs" or s == "ckmp" then
		
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF当前所选门派：" + udg_menpainame[udg_runamen[i]])
		if udg_runamen[i] == 1 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00少林专属：袈裟，90级去挑战场打达摩")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号扫地神僧：掌门+金钟罩+医术32点")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号达摩祖师：掌门+易筋经或洗髓经")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号大轮明王：掌门+小无相功或无相劫指+悟性31点")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号金轮法王：掌门+龙象般若功+根骨31点")
		elseif udg_runamen[i] == 2 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00古墓专属：双剑，副本4君子、淑女剑合成")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号神雕侠：掌门+黯然销魂掌+君子剑")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号小龙女：掌门+双手互搏+淑女剑")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号神雕侠侣：掌门+黯然销魂掌+双手互搏+双剑合璧")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号赤炼仙子：掌门+冰魄银针6重")
		elseif udg_runamen[i] == 3 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00丐帮专属：打狗棒，桃花岛洪七公，90级杀他才爆")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号北丐：掌门+降龙十八掌+打狗棒法+打狗棒（武器）")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号北乔峰：掌门+降龙十八掌3重+擒龙控鹤+打狗棒（武器）")
		elseif udg_runamen[i] == 4 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00华山专属：养吾剑，90级令狐冲处接任务挑战令狐冲，剑附带破防效果")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号君子剑：掌门+葵花宝典+辟邪剑法")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号风清扬：掌门+独孤九剑5重")
		elseif udg_runamen[i] == 5 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00全真专属：七星道袍，90级找丘处机接任务，加金雁攻速，三花聚顶弹射次数+50")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号老顽童：掌门+空明拳+双手互搏+九阴真经·摧坚神抓")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号中神通：掌门+一阳指+九阴真经·内功+先天功")
		elseif udg_runamen[i] == 6 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00血刀专属：血刀，90级挑战场挑战血刀老祖")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号血刀老祖：掌门+血刀（武器）")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号空心菜：掌门+真·神照经+连城剑法+唐诗剑法")
		elseif udg_runamen[i] == 7 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00恒山专属：拂尘，90级令狐冲接任务，教训田伯光，加2级拂尘范围")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号仪林：掌门+门派前三个武功7重")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号笑傲江湖：掌门+独孤九剑+真·易筋经+吸星大法+冲灵剑法（华山门派武功，需要用传功丹）")
		elseif udg_runamen[i] == 8 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00峨眉专属：倚天剑，灭绝师太接任务，打死副本3张无忌；或者副本6东方不败爆")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号芷若：掌门+九阴真经·九阴白骨爪+倚天剑（武器）")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号小东邪：掌门+峨眉九阳功+玉箫（武器）")
		elseif udg_runamen[i] == 9 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00武当专属：真武剑，90级去挑战场挑战张三丰,太极拳主动使用永久加1绝学领悟，被动使用概率加绝学领悟")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号邋遢仙人：掌门+九阳神功+真·易筋经")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号张三丰：掌门+太极拳9重+真武剑（武器）")
		elseif udg_runamen[i] == 10 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00星宿专属：神木王鼎，乔峰接任务，副本1杀丁春秋杀阿紫")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号星宿老仙：掌门+化功大法+小无相功")
		elseif udg_runamen[i] == 11 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00自由专属：十四天书，具体合成请看基地右边NPC随风")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号小虾米：虾米神拳（自创武功改名）+野球拳5重")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号郭大侠：降龙十八掌5重+空明拳5重+九阴真经·内功+双手互搏")
		elseif udg_runamen[i] == 12 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00灵鹫专属：玉扳指，天山童姥20%爆，八荒加属性概率增加")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号天山童姥：掌门+八荒六合唯我独尊功6重+冰魄银针+北冥神功")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号虚竹子：掌门+北冥神功+冰魄银针+罗汉伏魔功+玉扳指（饰品）")
		elseif udg_runamen[i] == 13 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00慕容专属：燕国玉玺，慕容复发布任务，慕容龙城称号和等级超过100级可以获取专属，袖中指加属性概率增加")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号慕容龙城：掌门+斗转星移")
		elseif udg_runamen[i] == 14 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00明教专属：屠龙刀，副本6东方不败爆")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号白眉鹰王：掌门+鹰爪功9重")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号青翼蝠王：掌门+蝠翼纵9重")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号金毛狮王：掌门+狮子吼9重")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号无忌：掌门+乾坤大挪移6重+九阳神功+太极拳4重（武当门派武功）")
		elseif udg_runamen[i] == 15 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00衡山专属：镇岳尚方，90级令狐冲接任务，江南水乡解决费彬，剑加青龙光环")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号莫大先生：掌门+门派前三个武功7重")
		elseif udg_runamen[i] == 16 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00神龙专属：毒龙鞭，副本1韦小宝（神龙教）触发任务杀死洪安通，接任务后洪安通出现在桃花岛上")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号神龙教主：掌门+九阳神功+龙象般若功")
		elseif udg_runamen[i] == 17 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00神龙专属：毒龙鞭，副本1韦小宝（神龙教）触发任务杀死洪安通，接任务后洪安通出现在桃花岛上")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号教主夫人：掌门+九阴真经·内功+小无相功")
		elseif udg_runamen[i] == 18 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00泰山专属：东灵铁剑，90级令狐冲接任务，雁门关解决玉玑子，永久触发泰山十八盘")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号天门道长：掌门+小无相功")
		elseif udg_runamen[i] == 19 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00铁掌专属：铁掌令，周伯通处任务")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号铁掌水上漂：掌门+乾坤大挪移+双手互搏+铁掌令（武器）")
		elseif udg_runamen[i] == 20 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00唐门专属：子午砂，副本2唐文亮几率掉落；观音泪，副本4南海神尼几率掉落")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号搜魂侠：掌门+小无相功+冰魄银针")
		elseif udg_runamen[i] == 21 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00五毒专属：选择门派时赠送")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号婆婆姊姊：掌门+龙象般若功+葵花宝典")
		elseif udg_runamen[i] == 22 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00桃花岛专属：桃花岛玉箫任务")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号女中诸葛：掌门+九阴真经·内功+打狗棒法")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号东邪：掌门+弹指神通3重+碧海潮生曲3重+玉箫（武器）")
		elseif udg_runamen[i] == 23 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00野螺专属：技能几率偷取")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号爵爷：掌门+神行百变+金钱60万")
		elseif udg_runamen[i] == 24 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00雪山专属：贼哥处购买")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号石破天惊：掌门+罗汉伏魔功+真·太玄经")
		elseif udg_runamen[i] == 25 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00汝阳王府专属：倚天剑，灭绝师太接任务，打死副本3张无忌；或者副本6东方不败爆")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号绍敏郡主：掌门+使用10次偷看偷学")
		elseif udg_runamen[i] == 26 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FF00嵩山专属：贼哥处购买")
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF称号左盟主：掌门+寒冰真气+寒魄剑")
		endif
		call DisplayTextToPlayer(p, 0, 0, "|cFF389C83称号五岳盟主：同时获得五岳门派的掌门")
		call DisplayTextToPlayer(p, 0, 0, "|cFF389C83称号九阴真人：九阴真经·内功+逆九阴真经·内功+九阴真经·易筋锻骨篇+九阴真经·医疗篇+九阴真经·九阴白骨爪+九阴真经·摧坚神抓4重+九阴真经·摧心掌4重")
		call DisplayTextToPlayer(p, 0, 0, "|cFF004096称号西毒：西毒杖法5重+真·蛤蟆功+蛇杖（武器）")
		call DisplayTextToPlayer(p, 0, 0, "|cFF006083称号南帝：一阳指5重+先天功3重（全真门派武功）+非全真门派")
		call DisplayTextToPlayer(p, 0, 0, "|cFF326859称号瑶琴：九阴真经·九阴白骨爪5重+九阴真经·摧坚神抓5重+九阴真经·摧心掌5重+黯然销魂掌3重")
		call DisplayTextToPlayer(p, 0, 0, "|cFF754298称号神仙姐姐：九阴真经·内功+九阳神功+罗汉伏魔功+吸星大法+葵花宝典+斗转星移+乾坤大挪移+双手互搏")
		call DisplayTextToPlayer(p, 0, 0, "|cFF754298理论上也可以获得其他门派的称号，不在此处描述，请自行尝试")
		call DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	endif
	// 手动整理物品
	if s == "sort" or s == "-sort" then
		call EnumItemsInRectBJ(bj_mapInitialPlayableArea, function SO)
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF整理物品完成")
	endif
	if s == "ver" then
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF决战江湖1.6.70版本")
	endif
	if s == "hd" then
		set showDamage[i]=false
	endif
	if s == "sd" then
		set showDamage[i]=true
	endif
	if s == "cx" or s == "CX" then
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|cFFFF00CC" + "查询玩家:" + "|r" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "战斗力：" + I2S(udg_zdl[pId]))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "积分：" + I2S(udg_jf[pId]))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "每局可用积分剩余：" + I2S(jf_max - jf_useMax[pId]))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "通关次数：" + I2S(udg_success[pId]))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r|CFFFE890D伤害兑换：" + R2S(bonus_wugong[pId] * 100) + "%")
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "最高伤害：" + R2S(max_damage[pId]))
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "累计评分：" + I2S(decryptInt((DzAPI_Map_GetServerValue((Player(pId) ), "S" + ( "totalPoint"))) , Player(pId)))) // INLINED!!
		// 全门派通关查询
		// call BJDebugMsg("原始单通数据："+singleSuccess[pId])
		// call BJDebugMsg("原始多通数据："+manySuccess[pId])
		set j=0
		loop
			exitwhen j >= DENOMINATION_NUMBER
			// body
			set spilt=SubString(singleSuccess[pId], j, j + 1)
			// 已通关门派
			if spilt == "1" then
				set tgs_menpai=tgs_menpai + "|||CffFF0000" + udg_menpainame[j + 1] + "|r"
			else
				set tgs_menpai=tgs_menpai + "||" + udg_menpainame[j + 1]
			endif
			set j=j + 1
		endloop
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "单通挑战速通难7门派（白色未通关）|r：" + tgs_menpai)
		set j=0
		loop
			exitwhen j >= DENOMINATION_NUMBER
			// body
			set spilt=SubString(manySuccess[pId], j, j + 1)
			// 已通关门派
			if spilt == "1" then
				set tgm_menpai=tgm_menpai + "|||CffFF0000" + udg_menpainame[j + 1] + "|r"
			else
				set tgm_menpai=tgm_menpai + "||" + udg_menpainame[j + 1]
			endif
			set j=j + 1
		endloop
		call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9系统提示：|r" + "|CFFFE890D" + "多通挑战速通难7门派（白色未通关）|r：" + tgm_menpai)
	endif
	if s == "cxs" or s == "CXS" then
		loop
			exitwhen j > 4
			call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|cFFFF00CC" + "查询玩家:" + "|r" + GetPlayerName(Player(j)))
			call DisplayTimedTextToPlayer(Player(pId), 0, 0, 10, "|CFF1CE6B9战斗力：|r" + I2S(udg_zdl[j]) + ",|CFF1CE6B9积分：|r" + I2S(udg_jf[j]) + ",|CFF1CE6B9每局积分：|r" + I2S(jf_max - jf_useMax[j]) + ",|r|CFF1CE6B9通关次数：" + I2S(udg_success[j]) + ",|r|CFF1CE6B9伤害加成：" + R2S(bonus_wugong[j]) + ",|r|CFF1CE6B9最高伤害：" + R2S(max_damage[j]))
			set j=j + 1
		endloop
	endif
	// if s == "save" and is_victory and not saveFlag[pId] then
	// 	call DisplayTextToPlayer(p,0,0,"|CFF99CC00获得战斗力和积分："+I2S(get_zdl))
	// 	// 保存战斗力到服务器
	// 	set udg_zdl[pId] = udg_zdl[pId] + get_zdl
	// 	set udg_jf[pId] = udg_jf[pId] + get_zdl
	// 	call DzAPI_Map_StoreInteger(Player(pId),"zdl",udg_zdl[pId])
	// 	call DzAPI_Map_StoreInteger(Player(pId),"jf",udg_zdl[pId])
	// 	if GetPlayerServerValueSuccess(Player(pId)) then
	// 		call DisplayTextToPlayer(p,0,0,"|CFFFE890D"+GetPlayerName(Player(pId))+"|CFF99CC00数据保存成功")
	// 		set saveFlag[pId] = true
	// 	else
	// 		call DisplayTextToPlayer(p,0,0,"|CFFFE890D"+GetPlayerName(Player(pId))+"|CFFFF0303数据保存失败")
	// 		set saveFlag[pId] = false
	// 	endif
	// endif
	//if s=="碧海潮生" then
	//	call UnitAddAbility(udg_hero[i],'A018')
	//endif
	//if s=="空明" then
	//	call UnitAddAbility(udg_hero[i],'A017')
	//endif
	if s == "ck" or s == "cksh" then
		set j=1
		set count=0
		loop
			exitwhen j > wugongshu[i]
			set shanghai[j]=LoadReal(YDHT, 1 + GetPlayerId(p), I7[( i - 1 ) * 20 + j] * 3)
			if I7[( i - 1 ) * 20 + j] == 'A034' then
				set shanghai[j]=LoadReal(YDHT, 1 + GetPlayerId(p), 'A035' * 3)
			endif
			if I7[( i - 1 ) * 20 + j] != 'AEfk' and shanghai[j] > 0 then
				set count=count + 1
				if shanghai[j] < 10000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "伤害：" + R2S(shanghai[j]))
				elseif shanghai[j] < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "伤害：" + R2S(shanghai[j] / 10000.) + "万")
				elseif shanghai[j] / 10000. < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "伤害：" + R2S(shanghai[j] / 100000000.) + "亿")
				elseif shanghai[j] / 100000000. < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "伤害：" + R2S(shanghai[j] / 100000000. / 10000.) + "万亿")
				else
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(I7[( i - 1 ) * 20 + j]) + "伤害：" + R2S(shanghai[j] / 100000000. / 100000000.) + "亿亿")
				endif
			endif
			set j=j + 1
		endloop
		set j=1
		loop
			exitwhen j > alreadyInternalizedCount[i]
			// 内化武功的伤害
			set shanghai[j]=LoadReal(YDHT, 1 + GetPlayerId(p), LoadInteger(YDHT, interAbilityKey + i, j) * 3)
			if LoadInteger(YDHT, interAbilityKey + i, j) != 'AEfk' and shanghai[j] > 0 then
				set count=count + 1
				if shanghai[j] < 10000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "伤害：" + R2S(shanghai[j]))
				elseif shanghai[j] < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "伤害：" + R2S(shanghai[j] / 10000.) + "万")
				elseif shanghai[j] / 10000. < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "伤害：" + R2S(shanghai[j] / 100000000.) + "亿")
				elseif shanghai[j] / 100000000. < 100000000. then
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "伤害：" + R2S(shanghai[j] / 100000000. / 10000.) + "万亿")
				else
					call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" + GetAbilityName(LoadInteger(YDHT, interAbilityKey + i, j)) + "伤害：" + R2S(shanghai[j] / 100000000. / 100000000.) + "亿亿")
				endif
			endif
			set j=j + 1
		endloop
		if count == 0 then
			call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暂时没有有伤害的武功")
		endif
	endif
	if s == "1" and GetUnitAbilityLevel(udg_hero[i], 'A07W') > 0 and IsUnitAliveBJ(udg_hero[i]) then
		if qiankunCd[i] then
			call DisplayTextToPlayer(p, 0, 0, "目前CD中，不能创建飞行点")
		else
			if RectContainsUnit(lh_r, udg_hero[i]) then
				call DisplayTextToPlayer(p, 0, 0, "桃花岛不能创建飞行点")
			else
				call RemoveUnit(J9[i])
				set loc=GetUnitLoc(udg_hero[i])
				call CreateNUnitsAtLoc(1, 'e00J', p, loc, bj_UNIT_FACING)
				set J9[i]=bj_lastCreatedUnit
				call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "创建飞行点")
				call RemoveLocation(loc)
				set loc=null
			endif
		endif
	endif
	if s == "2" and GetUnitAbilityLevel(udg_hero[i], 'A07W') > 0 and IsUnitAliveBJ(udg_hero[i]) then
		if J9[i] == null then
			call DisplayTextToPlayer(p, 0, 0, "你还没有设置飞行点，请输入聊天信息“1”来设置")
		else
			set loc=GetUnitLoc(J9[i])
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			set loc=null
		endif
	endif
	if s == "11" and GetUnitAbilityLevel(udg_hero[i], 'A07W') > 3 and IsUnitAliveBJ(udg_hero[i]) then
		if RectContainsUnit(lh_r, udg_hero[i]) then
			call DisplayTextToPlayer(p, 0, 0, "桃花岛不能创建飞行点")
		else
			call RemoveUnit(qiankun2hao[i])
			set loc=GetUnitLoc(udg_hero[i])
			call CreateNUnitsAtLoc(1, 'e00J', p, loc, bj_UNIT_FACING)
			set qiankun2hao[i]=bj_lastCreatedUnit
			call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "创建飞行点")
			call RemoveLocation(loc)
			set loc=null
		endif
	endif
	if s == "22" and GetUnitAbilityLevel(udg_hero[i], 'A07W') > 3 and IsUnitAliveBJ(udg_hero[i]) then
		if qiankun2hao[i] == null then
			call DisplayTextToPlayer(p, 0, 0, "你还没有设置飞行点，请输入聊天信息“11”来设置")
		else
			set loc=GetUnitLoc(qiankun2hao[i])
			call SetUnitPositionLoc(udg_hero[i], loc)
			call PanCameraToTimedLocForPlayer(p, loc, 0)
			call RemoveLocation(loc)
			set loc=null
		endif
	endif
	if s == "-ms" then
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF您当前的移动速度为" + I2S(R2I((s__ModSpeed_getSpeed((udg_hero[i])))))) // INLINED!!
	endif
	if s == "-random" and udg_runamen[i] == 0 and udg_hero[i] != null then
		call randomMenpai(p , 1)
	endif
	if s == "www.juezhanjianghu.com" and udg_runamen[i] == 0 and udg_hero[i] != null then
		call DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF灵鹫宫已加入积分兑换，请输入hg选择自由门派后去基地左下方兑换")
	endif
	if s == "jzjh.uuu9.com" and udg_runamen[i] == 0 and udg_hero[i] != null then
		set udg_runamen[i]=13
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|CFFff9933玩家" + GetPlayerName(p) + "选择了隐藏门派〓姑苏慕容〓|r")
		call SetPlayerName(p, "〓姑苏慕容〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
		set udg_shuxing[i]=udg_shuxing[i] + 5
		call DisplayTimedTextToPlayer(p, 0, 0, 15., "|CFFff9933获得武功：凌波微步，你可以在主城和传送石之间任意传送了")
		call UnitAddAbility(udg_hero[i], 'A05R')
		call AddCharacterABuff(udg_hero[i] , udg_xinggeA[i])
		call AddCharacterBBuff(udg_hero[i] , udg_xinggeB[i])
		if udg_vip[i] < 2 and udg_elevenvip[i] < 1 then
			call UnitAddAbility(udg_hero[i], 'A040')
			call UnitAddAbility(udg_hero[i], 'A041')
			call UnitAddAbility(udg_hero[i], 'A042')
		endif
		set I7[( ( ( i - 1 ) * 20 ) + 8 )]='A05R'
		call UnitRemoveAbility(udg_hero[i], 'Avul')
		set Q4=GetRandomLocInRect(He)
		call SetUnitPositionLoc(udg_hero[i], Q4)
		call PanCameraToTimedLocForPlayer(p, Q4, 0)
		call createPartnerAndTownPortalDummy(i , Q4)
		call RemoveLocation(Q4)
		call UnitAddItemByIdSwapped(1227896394, udg_hero[i])
	endif
	//if s=="jiafuyuan" then
	//	set fuyuan[i]=fuyuan[i]+20
	//	call DisplayTextToPlayer(p,0,0,"|cFFFF0000福缘+20")
	//endif
	if s == "cksx" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余属性点：" + I2S(udg_shuxing[i]))
	endif
	if s == "testMall" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000天赋道具ID为：" + PROPERTY_TALENT)
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000门派道具ID为：" + PROPERTY_TIEZHANG)
		if DzAPI_Map_HasMallItem(p, PROPERTY_TALENT) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000拥有天赋道具")
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000未拥有天赋道具")
		endif
		if DzAPI_Map_HasMallItem(p, PROPERTY_TIEZHANG) then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000拥有门派道具")
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000未拥有门派道具")
		endif
	endif
	if s == "ckjf" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余守家积分：" + I2S(shoujiajf[i]))
	endif
	if s == "累积积分" then
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000累积游戏积分：" + I2S(udg_MeiJuJiFen[i]))
	endif
	if SubStringBJ(s, 1, 5) == "zy500" and udg_MeiJuJiFen[i] >= 500 then
		set udg_MeiJuJiFen[S2I(SubStringBJ(s, 6, 6))]=udg_MeiJuJiFen[S2I(SubStringBJ(s, 6, 6))] + 500
		set udg_MeiJuJiFen[i]=udg_MeiJuJiFen[i] - 500
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFF0000" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) + "已向" + LoadStr(YDHT, GetHandleId(Player(S2I(SubStringBJ(s, 6, 6)) - 1)), GetHandleId(Player(S2I(SubStringBJ(s, 6, 6)) - 1))) + "转移500点积分")
	endif
	if s == "+ys" or s == "+YS" then
		call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, ( GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) + 200.00 ), 1.00)
	endif
	if s == "+js" or s == "+JS" then
		call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, ( GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) - 200.00 ), 1.00)
	endif
	if s == "sj" then
		call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 1800., 0)
	endif
	if s == "fb" then
		call FBdaojishi()
	endif
	if s == "bl" then
		call BanLvShuXing()
	endif
	if s == "yx" then
		call YaoXing()
	endif
	if s == "jy" then
		call TransferJY()
	endif
	//自由属性点系统
	if SubStringBJ(s, 1, 2) == "wx" or SubStringBJ(s, 1, 2) == "WX" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set wuxing[i]=wuxing[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点悟性，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set wuxing[i]=wuxing[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点悟性，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	elseif SubStringBJ(s, 1, 2) == "fy" or SubStringBJ(s, 1, 2) == "FY" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set fuyuan[i]=fuyuan[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点福缘，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set fuyuan[i]=fuyuan[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点福缘，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	elseif SubStringBJ(s, 1, 2) == "gg" or SubStringBJ(s, 1, 2) == "GG" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set gengu[i]=gengu[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点根骨，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set gengu[i]=gengu[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点根骨，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	elseif SubStringBJ(s, 1, 2) == "dp" or SubStringBJ(s, 1, 2) == "DP" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set danpo[i]=danpo[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点胆魄，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set danpo[i]=danpo[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点胆魄，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	elseif SubStringBJ(s, 1, 2) == "ys" or SubStringBJ(s, 1, 2) == "YS" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set yishu[i]=yishu[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点医术，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set yishu[i]=yishu[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点医术，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	elseif SubStringBJ(s, 1, 2) == "jm" or SubStringBJ(s, 1, 2) == "JM" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				set jingmai[i]=jingmai[i] + 1
				set udg_shuxing[i]=udg_shuxing[i] - 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点经脉，剩余属性点：" + I2S(udg_shuxing[i]))
			else
				set jingmai[i]=jingmai[i] + S2I(SubStringBJ(s, 3, 5))
				set udg_shuxing[i]=udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" + SubStringBJ(s, 3, 5) + "点经脉，剩余属性点：" + I2S(udg_shuxing[i]))
			endif
		else
			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		endif
	endif
	
	//测试码
	if s == "代码不乱用吧" and udg_isTest[GetPlayerId(p)] then
		call SetHeroLevel(udg_hero[i], GetHeroLevel(udg_hero[i]) + 5, true)
		set wuxuedian[i]=wuxuedian[i] + 5
		call unitadditembyidswapped(1227895642 , udg_hero[i])
		call unitadditembyidswapped('I053' , udg_hero[i])
		call unitadditembyidswapped('I054' , udg_hero[i])
		call unitadditembyidswapped('I055' , udg_hero[i])
		call unitadditembyidswapped('I04E' , udg_hero[i])
		call unitadditembyidswapped('I02S' , udg_hero[i])
		//call CreateNUnitsAtLoc(1,'o01U',GetTriggerPlayer(),GetUnitLoc(udg_hero[i]),bj_UNIT_FACING)
		set shengwang[i]=shengwang[i] + 5000
		set xiuxing[i]=5
		set udg_lilianxishu[i]=udg_lilianxishu[i] + 3
		set udg_shuxing[i]=udg_shuxing[i] + 3000
		set shoujiajf[i]=shoujiajf[i] + 1000
	endif
	if s == "ts" and udg_isTest[GetPlayerId(p)] then
		call unitadditembyidswapped('I0CI' , udg_hero[i])
		call unitadditembyidswapped('I0CH' , udg_hero[i])
		call unitadditembyidswapped('I0DO' , udg_hero[i])
		call unitadditembyidswapped('I01X' , udg_hero[i])
		call unitadditembyidswapped('I01P' , udg_hero[i])
		call unitadditembyidswapped('I01C' , udg_hero[i])
		call unitadditembyidswapped('I010' , udg_hero[i])
		call unitadditembyidswapped('I00W' , udg_hero[i])
		call unitadditembyidswapped('I06F' , udg_hero[i])
		call unitadditembyidswapped('I03A' , udg_hero[i])
		call unitadditembyidswapped('I00L' , udg_hero[i])
		call unitadditembyidswapped('I08W' , udg_hero[i])
	endif
	if s == "九阴真人" and udg_isTest[GetPlayerId(p)] then
		call unitadditembyidswapped('I02X' , udg_hero[i])
		call unitadditembyidswapped('I03I' , udg_hero[i])
		call unitadditembyidswapped('I09H' , udg_hero[i])
		call unitadditembyidswapped('I09I' , udg_hero[i])
		call unitadditembyidswapped('I09G' , udg_hero[i])
		call unitadditembyidswapped('I09J' , udg_hero[i])
		call unitadditembyidswapped('I09K' , udg_hero[i])
	endif
	if s == "fff" and udg_isTest[GetPlayerId(p)] then
		call SetPlayerAbilityAvailable(p, 'A07M', false)
	endif
	if ( s == "贼哥牛逼" or s == "zgnb" ) and udg_isTest[GetPlayerId(p)] then
		if (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) then // INLINED!!
			call ModifyHeroStat(0, GetTriggerUnit(), 0, 100000)
			call ModifyHeroStat(1, GetTriggerUnit(), 0, 100000)
			call ModifyHeroStat(2, GetTriggerUnit(), 0, 100000)
		endif
		call commonAddGold(p , 1000000) // 奖励金钱
call commonAddLumber(p , 1000000) // 木头
call SetHeroLevel(udg_hero[i], GetHeroLevel(udg_hero[i]) + 5, true)
		set wuxuedian[i]=wuxuedian[i] + 500
		call unitadditembyidswapped(1227895642 , udg_hero[i])
		call unitadditembyidswapped('I08V' , udg_hero[i])
		call unitadditembyidswapped('I08W' , udg_hero[i])
		call unitadditembyidswapped('I08X' , udg_hero[i])
		call unitadditembyidswapped('I08Y' , udg_hero[i])
		call unitadditembyidswapped('I08Z' , udg_hero[i])
		call unitadditembyidswapped('I090' , udg_hero[i])
		set shengwang[i]=shengwang[i] + 50000
		set xiuxing[i]=6
		set udg_lilianxishu[i]=udg_lilianxishu[i] + 3
		set udg_shuxing[i]=udg_shuxing[i] + 30000
		set shoujiajf[i]=shoujiajf[i] + 10000
		set udg_shanghaixishou[i]=udg_shanghaixishou[i] + 1
		set Jd[i]=1
		set Id[i]=1
		set Qd[i]=1
		set ld[i]=1
		set Od[i]=1
		set Pd[i]=1
		set Kd[i]=1
		set Ld[i]=1
		set Nd[i]=1
		set Md[i]=1
	endif
	if s == "next" and udg_isTest[GetPlayerId(p)] then
		set udg_boshu=udg_boshu + 1
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已跳转至下一波")
	endif
	if s == "next15" and udg_isTest[GetPlayerId(p)] then
		set udg_boshu=15
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已跳转至15波")
	endif
	if s == "next28" and udg_isTest[GetPlayerId(p)] then
		set udg_boshu=28
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已跳转至28波")
	endif
	if s == "n7" then
		call setDifficultyAndExpRate(6)
		call SetPlayerTechResearched(Player(12), 'R001', 5)
		call SetPlayerTechResearched(Player(6), 'R001', 5)
		call SetPlayerTechResearched(Player(15), 'R001', 5)
	endif
	if s == "n8" then
		call setDifficultyAndExpRate(8)
		call SetPlayerTechResearched(Player(12), 'R001', 7)
		call SetPlayerTechResearched(Player(6), 'R001', 7)
		call SetPlayerTechResearched(Player(15), 'R001', 7)
	endif
	if s == "title" and udg_isTest[GetPlayerId(p)] then
		call AddSpecialEffectTargetEx("jinmengxiaoyao.mdx" , udg_hero[1] , "overhead")
	endif
	if ( s == "撸下一波" or s == "lxyb" ) and udg_isTest[GetPlayerId(p)] then
		set udg_boshu=udg_boshu + 1
		call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已跳转至下一波")
	endif
	if s == "撸Boss8" or s == "lboss8" and udg_isTest[GetPlayerId(p)] then
		call CreateNUnitsAtLocFacingLocBJ(1, u7[8], Player(6), v7[6], v7[4])
	endif
	if s == "addCoin" and udg_isTest[GetPlayerId(p)] then
		call setCoin(passportCoin[i] + 100 , i)
	endif
	// if s == "撸Boss" or s=="撸boss" and udg_isTest[GetPlayerId(p)] then 
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[5],Player(6),v7[6],v7[4])
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[1],Player(6),v7[6],v7[4])
	// endif
	// if s=="撸Boss1" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[1],Player(6),v7[6],v7[4])
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[1],Player(0),v7[6],v7[4])
	// elseif s=="撸Boss2" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[2],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss3" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[3],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss4" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[4],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss5" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[5],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss6" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[6],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss7" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[7],Player(6),v7[6],v7[4])
	// elseif s=="撸Boss8" and udg_vip[i]>1 then
	// 	call CreateNUnitsAtLocFacingLocBJ(1,u7[8],Player(6),v7[6],v7[4])
	// elseif s=="撸LiaoGuo" and udg_vip[i]>1 then
	// 	call LiaoGuoJinGong()
	// elseif s=="撸LingJiu" and udg_vip[i]>1 then
	// 	call LingJiuGongJinGong()
	// endif
	set p=null
	set it=null
endfunction
function KeyInputSystem takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer i= 0
	loop
		exitwhen i > 6
		call TriggerRegisterPlayerChatEvent(t, Player(i), "", true)
		set i=i + 1
	endloop
	call TriggerAddAction(t, function KeyInput)
	set t=null
endfunction
//------桃花岛系统------//
function IsTaoHua takes nothing returns boolean
	return ( GetItemTypeId(GetManipulatedItem()) == 'I09S' or GetItemTypeId(GetManipulatedItem()) == 'I0A3' )
endfunction
function TaoHuaDao takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if ( GetItemTypeId(GetManipulatedItem()) == 'I09S' ) then
		if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
			call SetUnitPosition(GetTriggerUnit(), 9631, 1139)
			call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 9631, 1139, 0)
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00有玩家进入桃花岛")
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00”源思英年,巴巴西洛普,雪陆文出；源思英年,巴巴西洛普,雪陆文出！“")
		else
			call commonAddGold(GetOwningPlayer(GetTriggerUnit()) , 500)
		endif
	elseif ( GetItemTypeId(GetManipulatedItem()) == 'I0A3' ) then
		if ( ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
			call SetUnitPosition(GetTriggerUnit(), 12800, - 14800)
			call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 12800, - 14800, 0)
			call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00有玩家去救火")
		else
			call commonAddGold(GetOwningPlayer(GetTriggerUnit()) , 200000)
		endif
	endif
endfunction
function TaoHuaGun takes nothing returns nothing
 local unit u= GetKillingUnit()
	//call BJDebugMsg("出现了么A")
	//set lh_r=Rect(8800,-4500,14300,4500)
	if RectContainsUnit(lh_r, u) then
		//call BJDebugMsg("出现了么B")
		if GetUnitTypeId(GetTriggerUnit()) == 'o021' or GetUnitTypeId(GetTriggerUnit()) == 'o022' or GetUnitTypeId(GetTriggerUnit()) == 'nwnr' or GetUnitTypeId(GetTriggerUnit()) == 'ogrk' or GetUnitTypeId(GetTriggerUnit()) == 'nslf' or GetUnitTypeId(GetTriggerUnit()) == 'n00A' or GetUnitTypeId(GetTriggerUnit()) == 'n00D' then
			call SetUnitPosition(u, - 1174, - 678)
			call PanCameraToTimedForPlayer(GetOwningPlayer(u), - 1174, - 678, 0)
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00有玩家杀死了" + GetUnitName(GetTriggerUnit()) + "，离开桃花岛")
			// 90级才爆武器
			if GetUnitLevel(u) >= 90 then
				// 黄药师掉落玉箫60%概率，寻宝大师90%
				if GetUnitTypeId(GetTriggerUnit()) == 'ogrk' and ( ( GetRandomInt(1, 100) <= 60 ) or ( GetRandomInt(1, 100) <= 90 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
					call unitadditembyidswapped('I0A1' , u)
				endif
				// 欧阳锋掉落蛇杖
				if GetUnitTypeId(GetTriggerUnit()) == 'nslf' and ( ( GetRandomInt(1, 100) <= 40 ) or ( GetRandomInt(1, 100) <= 80 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
					call unitadditembyidswapped('I09B' , u)
				endif
				// 洪七公掉落打狗棒
				if GetUnitTypeId(GetTriggerUnit()) == 'nwnr' and ( ( GetRandomInt(1, 100) <= 60 ) or ( GetRandomInt(1, 100) <= 90 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
					call unitadditembyidswapped('I097' , u)
				endif
			else
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00什么都没爆，请90级再来")
			endif
			
			if GetUnitTypeId(GetTriggerUnit()) == 'o021' and ( ( GetRandomInt(1, 100) <= 30 ) or ( GetRandomInt(1, 100) <= 70 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
				call unitadditembyidswapped('I067' , u)
			endif
			if GetUnitTypeId(GetTriggerUnit()) == 'o022' and ( ( GetRandomInt(1, 100) <= 30 ) or ( GetRandomInt(1, 100) <= 70 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
				call unitadditembyidswapped('I061' , u)
			endif
			if GetUnitTypeId(GetTriggerUnit()) == 'n00A' and ( ( GetRandomInt(1, 100) <= 30 ) or ( GetRandomInt(1, 100) <= 70 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
				call unitadditembyidswapped('I060' , u)
			endif
			// 失心疯n00D，寻宝大师100%爆逆九阴
			if GetUnitTypeId(GetTriggerUnit()) == 'n00D' and ( ( GetRandomInt(1, 100) <= 80 ) or ( GetRandomInt(1, 100) <= 100 and (YDWEBitwise_AND(master[(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) ) ) then // INLINED!!
				call unitadditembyidswapped('I09G' , u) // 逆九阴
endif
		endif
	endif
	set u=null
endfunction
function TaoHua_Condition takes nothing returns boolean
	return GetOwningPlayer(GetTriggerUnit()) == Player(15) and ( GetUnitTypeId(GetTriggerUnit()) == 'o022' or GetUnitTypeId(GetTriggerUnit()) == 'o021' or GetUnitTypeId(GetTriggerUnit()) == 'nwnr' or GetUnitTypeId(GetTriggerUnit()) == 'ogrk' or GetUnitTypeId(GetTriggerUnit()) == 'nslf' or GetUnitTypeId(GetTriggerUnit()) == 'n00A' )
endfunction
function TaoHua_Action takes nothing returns nothing
	call SetUnitOwner(GetTriggerUnit(), Player(12), true)
	// 三老不加技能，强度和历练5一样
	// call UnitAddAbility(GetTriggerUnit(),'A07V')
	// call UnitAddAbility(GetTriggerUnit(),'A04I')
	// call UnitAddAbility(GetTriggerUnit(),'A04K')
endfunction
function OuYangFeng_Condition takes nothing returns boolean
	return RectContainsUnit(lh_r, GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit()) == 'nslf' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and ( UnitHasBuffBJ(GetTriggerUnit(), 'Bcri') or UnitHasBuffBJ(GetTriggerUnit(), 'Bcrs') or UnitHasBuffBJ(GetTriggerUnit(), 'BNso') )
endfunction
function OuYangFeng_Action takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
	call KillUnit(GetTriggerUnit())
	call CreateNUnitsAtLoc(1, 'n00D', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	call RemoveLocation(loc)
	set loc=null
endfunction
function HongQiGong_Condition takes nothing returns boolean
	return RectContainsUnit(lh_r, GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit()) == 'nwnr' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and ( UnitHasBuffBJ(GetTriggerUnit(), 'BEsh') or UnitHasBuffBJ(GetTriggerUnit(), 'BIpb') or UnitHasBuffBJ(GetTriggerUnit(), 'BIpd') )
endfunction
function HongQiGong_Action takes nothing returns nothing
	call KillUnit(GetTriggerUnit())
	call ShowUnitShow(gg_unit_n00E_0066)
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00洪七公已中毒，现正在某处疗伤")
endfunction
//------桃花岛系统结束------//
function TaoHuaDao_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsTaoHua))
	call TriggerAddAction(t, function TaoHuaDao)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEventSimple(t, Player(12), EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddAction(t, function TaoHuaGun)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function TaoHua_Condition))
	call TriggerAddAction(t, function TaoHua_Action)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function OuYangFeng_Condition))
	call TriggerAddAction(t, function OuYangFeng_Action)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function HongQiGong_Condition))
	call TriggerAddAction(t, function HongQiGong_Action)
	set t=null
endfunction
// 包含门派库
//--------少林开始--------//
//韦陀棍法
function IsWeiTuo takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A05G') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function WeiTuo_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function WeiTuo_Action takes nothing returns nothing
 local unit uc= GetEnumUnit()
 local unit u= GetAttacker()
 local real x= GetUnitX(uc)
 local real y= GetUnitY(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'S000') != 0 ) ) then
		set shxishu=shxishu + .5
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07O') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	//if((GetUnitAbilityLevel(u,'A05G')==9))then
	//    set shxishu=shxishu*8.
	//endif
	call DestroyEffect((AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))) // INLINED!!
	// call DestroyEffectEx(AddSpecialEffectEx("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y))
	set shanghai=ShangHaiGongShi(u , uc , 10 , 12 , shxishu , 'A05G')
	//call BJDebugMsg("伤害="+R2S(shanghai))
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function WeiTuoGun takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc1= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real range= RMinBJ(300. + I2R(jingmai[( 1 + GetPlayerId(GetOwningPlayer(u)) )]) * 8., 3000)
	if ( ( UnitHasBuffBJ(u, 'Bblo') ) ) then
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc1 , Condition(function WeiTuo_Condition)), function WeiTuo_Action)
		if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
			call SetWidgetLife(u, ( GetUnitState(u, UNIT_STATE_LIFE) + ( .02 * GetUnitState(u, UNIT_STATE_MAX_LIFE) ) ))
		endif
		call WuGongShengChong(u , 'A05G' , 900.)
	else
		if ( GetRandomReal(.0, 100.) <= 22. + fuyuan[i] / 3 ) then
			call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc1 , Condition(function WeiTuo_Condition)), function WeiTuo_Action)
			if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
				call SetWidgetLife(u, ( GetUnitState(u, UNIT_STATE_LIFE) + ( .02 * GetUnitState(u, UNIT_STATE_MAX_LIFE) ) ))
			endif
			// 概率狂暴
			if GetRandomReal(0, 100) <= 15 + GetUnitAbilityLevel(u, 'A07U') * 20 then
				call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc1, bj_UNIT_FACING)
				call ShowUnitHide(bj_lastCreatedUnit)
				call UnitAddAbility(bj_lastCreatedUnit, 1093681496)
				call IssueTargetOrderById(bj_lastCreatedUnit, $D0085, u)
				call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3.)
			endif
			call WuGongShengChong(u , 'A05G' , 900.)
		endif
	endif
	call RemoveLocation(loc1)
	call RemoveLocation(loc2)
	set u=null
	set uc=null
	set loc1=null
	set loc2=null
endfunction
//达摩剑法
function qc takes nothing returns boolean
	return ( ( GetEventDamage() == .15 ) )
endfunction
function rc takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function sc takes nothing returns nothing
 local unit u= GetEventDamageSource()
 local unit uc= GetEnumUnit()
 local real shxishu= 1.
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'S000') != 0 ) ) then
		set shxishu=shxishu + .4
	endif
	if ( ( GetUnitAbilityLevel(u, 'A071') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	set shanghai=ShangHaiGongShi(u , uc , 70. , 60. , shxishu , 'A000')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function ucFunc takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0.
 local location loc2= GetUnitLoc(uc)
	if ( ( GetUnitAbilityLevel(u, 'S000') != 0 ) ) then
		set shxishu=shxishu + .4
	endif
	if ( ( GetUnitAbilityLevel(u, 'A071') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	set shanghai=ShangHaiGongShi(u , uc , 10 , 30 , shxishu , 'A000')
	call WuGongShangHai(u , uc , shanghai)
	if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
		call DestroyEffect((AddSpecialEffectLocBJEx(loc2 , "war3mapImported\\ShadowBurn.mdx"))) // INLINED!!
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100 , loc2 , Condition(function rc)), function sc)
	endif
	call RemoveLocation(loc2)
	set u=null
	set uc=null
	set loc2=null
endfunction
function wc takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A000' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function xc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local location loc= GetUnitLoc(u)
 local location loc2= pu(loc , 256 , GetUnitPropWindowBJ(u) + 90.)
 local integer id= 'A000'
 local unit dummy= null
 local real x= GetSpellTargetX()
 local real y= GetSpellTargetY()
	call WuGongShengChong(u , 'A000' , 120.)
	set dummy=CreateUnit(p, 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
	call ShowUnitHide(dummy)
	call UnitAddAbility(dummy, 'A0F9')
	call IssuePointOrderById(dummy, $D0271, x, y)
	call UnitApplyTimedLife(dummy, 'BHwe', 6.)
	if ( GetUnitAbilityLevel(u, 'A05O') != 0 ) then
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call UnitAddAbility(bj_lastCreatedUnit, 'A05H')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, u)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call ShowUnitHide(bj_lastCreatedUnit)
	endif
	if ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) then
		call CreateNUnitsAtLoc(1, 1697656881, p, loc, bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 12.)
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) and ( GetUnitAbilityLevel(u, 'A07F') != 0 ) ) then
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093678410)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0271, loc2)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 6.)
	endif
	
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set dummy=null
	set u=null
	set p=null
	set loc=null
	set loc2=null
endfunction
//大力金刚指
function zc takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A05K' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function Ac takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function ac takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'A06H') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) and ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
		set shxishu=shxishu + 1.
	endif
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
		set shanghai=ShangHaiGongShi(u , uc , 200 , 200 , shxishu * udg_baojishanghai[( 1 + GetPlayerId(GetOwningPlayer(u)) )] , 'A05K')
		call WuGongShangHai(u , uc , shanghai)
	else
		set shanghai=ShangHaiGongShi(u , uc , 200 , 200 , shxishu , 'A05K')
		call WuGongShangHai(u , uc , shanghai)
	endif
	if ( ( gengu[( 1 + GetPlayerId(GetOwningPlayer(u)) )] >= 20 ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
		if ( ( GetUnitAbilityLevel(u, 'A06P') != 0 ) ) then
			call WanBuff(u , uc , 12)
		else
			call WanBuff(u , uc , 11)
		endif
	endif
	if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) and ( GetUnitAbilityLevel(u, 'A07P') != 0 ) and ( UnitHasBuffBJ(uc, 1113813619) == false ) ) then
		call WanBuff(u , uc , 10)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set u=null
	set uc=null
	set loc=null
	set loc2=null
endfunction
function Bc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local real x= GetUnitX(uc)
 local real y= GetUnitY(uc)
 local group g= CreateGroup()
	call WuGongShengChong(u , 'A05K' , 120.)
	if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) and ( GetUnitAbilityLevel(u, 'A07O') != 0 ) ) then
		call GroupEnumUnitsInRange(g, x, y, 500, Condition(function Ac))
	else
		call GroupAddUnit(g, uc)
	endif
	call ForGroupBJ(g, function ac)
	call GroupClear(g)
	call DestroyGroup(g)
	set u=null
	set uc=null
	set g=null
endfunction
//金钟罩
function Cc takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A05O' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function cc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call DestroyEffect((E7[i])) // INLINED!!
	call UnitRemoveAbility(u, 1110454320)
	set D7[i]=( ( 5000. * I2R(yishu[i]) ) * I2R(GetUnitAbilityLevel(u, 'A05O')) )
	set ce[i]=( 70 * GetUnitAbilityLevel(u, 'A05O') )
	call YDWEGeneralBounsSystemUnitSetBonus(u , 2 , 0 , ( 70 * GetUnitAbilityLevel(u, 'A05O') ))
	if ( ( gengu[i] >= 20 ) ) then
		// 扫地神僧或达摩祖师称号：金钟罩效果4倍
		if isTitle(i , 1) or isTitle(i , 2) then
			set D7[i]=( D7[i] * 4. )
		else
			set D7[i]=( D7[i] * 2. )
		endif
	endif
	call AddSpecialEffectTargetUnitBJEx("chest" , u , "war3mapImported\\DefensiveBarrierBig.mdx")
	call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, ( "|cff00ccff金钟罩效果总值：" + I2S(R2I(D7[i])) ))
	set E7[i]=bj_lastCreatedEffect
	call WuGongShengChong(u , 'A05O' , 90.)
	set u=null
	set p=null
endfunction
function Ec takes nothing returns boolean
	return ( ( UnitHasBuffBJ(GetTriggerUnit(), 1110454320) ) )
endfunction
function Fc takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function Gc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	call AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
	call RemoveLocation(loc)
	set shanghai=ShangHaiGongShi(u , uc , 400 , 400 , shxishu , 'A05O')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
	set loc=null
endfunction
function Hc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEventDamageSource()
 local real shxishu= 1.
 local real shanghai= 0.
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	if ( ( GetEventDamage() <= D7[i] ) ) then
		set D7[i]=( D7[i] - GetEventDamage() )
		call SetWidgetLife(u, ( GetUnitStateSwap(UNIT_STATE_LIFE, GetTriggerUnit()) + GetEventDamage() ))
		//+化功大法
		if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
			call AddSpecialEffectLocBJEx(loc2 , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
			call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
			call RemoveLocation(loc2)
			if isTitle(i , 1) then // 扫地神僧称号
set shxishu=shxishu * 10
			endif
			set shanghai=ShangHaiGongShi(u , uc , 20. , 20. , shxishu , 'A05O')
			call WuGongShangHai(u , uc , shanghai)
		endif
	else
		call DestroyEffect((E7[i])) // INLINED!!
		call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 1 , ce[i])
		//+易筋经
		if ( ( GetUnitAbilityLevel(u, 'A09D') != 0 ) ) then
			call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600. , loc , Condition(function Fc)), function Gc)
		endif
		//+小无相
		if ( ( GetUnitAbilityLevel(u, 'A083') != 0 ) and ( GetRandomReal(0, 100.) >= 70. ) ) then
			set D7[i]=2500. * I2R(yishu[i]) * I2R(GetUnitAbilityLevel(u, 'A05O'))
			set ce[i]=70 * GetUnitAbilityLevel(u, 'A05O')
			call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , ( 70 * GetUnitAbilityLevel(u, 'A05O') ))
			if ( ( gengu[( 1 + GetPlayerId(GetOwningPlayer(u)) )] >= 20 ) ) then
				// 扫地神僧或达摩祖师称号：金钟罩效果4倍
				if isTitle(i , 1) or isTitle(i , 2) then
					set D7[i]=( D7[i] * 4. )
				else
					set D7[i]=( D7[i] * 2. )
				endif
			endif
			call AddSpecialEffectTargetUnitBJEx("chest" , GetTriggerUnit() , "war3mapImported\\DefensiveBarrierBig.mdx")
			call DisplayTextToPlayer(p, 0, 0, ( "|cff00ccff小无相重启金钟罩，效果总值：" + I2S(R2I(D7[i])) ))
			set E7[i]=bj_lastCreatedEffect
		else
			call UnitRemoveAbility(GetTriggerUnit(), 1110454320)
		endif
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set p=null
	set loc=null
	set loc2=null
endfunction
//降魔功
function lc takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetKillingUnit(), 'S000') != 0 ) )
endfunction
function Jc takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	if ( ( jingmai[i] >= 25 ) ) then
		set F7[i]=( F7[i] + 1 )
		if ( ( F7[i] >= 10 ) ) then
			set F7[i]=( F7[i] - 10 )
			// 达摩祖师称号
			if isTitle(i , 2) then
				call ModifyHeroStat(0, GetKillingUnit(), 0, 1)
				call ModifyHeroStat(1, GetKillingUnit(), 0, 1)
				call ModifyHeroStat(2, GetKillingUnit(), 0, 1)
			else
				call ModifyHeroStat(1, GetKillingUnit(), 0, 1)
			endif
		endif
	endif
endfunction
function Lc takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'S000') != 0 ) )
endfunction
function Mc takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
	if ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A07X') != 0 ) ) then
		set G7[i]=( G7[i] + 1 )
		if ( ( G7[i] >= 10 ) ) then
			set G7[i]=( G7[i] - 10 )
			set H7=1
			loop
				exitwhen H7 > 18
				call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
				call UnitAddAbility(bj_lastCreatedUnit, 1093678416)
				call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, pu(loc , 256 , ( ( 20. ) * ( I2R(H7) ) )))
				call ShowUnitHide(bj_lastCreatedUnit)
				call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
				call RemoveLocation(pu(loc , 256 , ( ( 20. ) * ( I2R(H7) ) )))
				set H7=H7 + 1
			endloop
			call RemoveLocation(loc)
		endif
	endif
	if GetRandomReal(1, 100) <= 15 + fuyuan[i] / 5 then
		call WuGongShengChong(GetTriggerUnit() , 'S000' , 3600.)
	endif
	set u=null
	set p=null
	set loc=null
endfunction
function Oc takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'S000') != 0 ) )
endfunction
function Pc takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetTriggerUnit()
 local location loc= null
	if ( GetRandomInt(1, 100) <= 2 and GetUnitAbilityLevel(u, 'A07S') != 0 and GetUnitAbilityLevel(u, 'A0DN') != 0 ) then
		set loc=GetUnitLoc(l__ut)
		call CreateNUnitsAtLoc(1, 1852862002, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 180.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitAbilityLevel(u, 1395666994) != 0 ) ) then
		call percentDamage(l__ut , 1 , true)
	endif
	set u=null
	set l__ut=null
	set loc=null
endfunction
function Rc takes nothing returns boolean
	return ( ( GetEventDamage() == .18 ) )
endfunction
function Sc takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0.
	if UnitHasDenomWeapon(u , 'I0AL') then
		set shxishu=shxishu * 8
	endif
	set shanghai=ShangHaiGongShi(u , uc , 50 , 50 , shxishu , 'S000')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//金轮法王龙象效果
function isJinLunLongXiang takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'S002') >= 1 and isTitle(1 + GetPlayerId(GetOwningPlayer(GetAttacker())) , 4)
endfunction
function jinLunLongXiangTimerExpired takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	
	call ModifyHeroStat(0, u, 1, 200)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function jinLunLongXiang takes nothing returns nothing
 local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer gailv= 30
 local timer t= null
	if GetRandomInt(1, 100) <= gailv + fuyuan[i] / 6 then
		call ModifyHeroStat(0, u, 0, 200)
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call TimerStart(t, 35, false, function jinLunLongXiangTimerExpired)
	endif
	set t=null
	set u=null
	set p=null
endfunction
//--------少林结束--------//
function ShaoLin_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsWeiTuo))
	call TriggerAddAction(t, function WeiTuoGun)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function qc))
	call TriggerAddAction(t, function ucFunc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function wc))
	call TriggerAddAction(t, function xc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function zc))
	call TriggerAddAction(t, function Bc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function Cc))
	call TriggerAddAction(t, function cc)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function Ec))
	call TriggerAddAction(t, function Hc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function lc))
	call TriggerAddAction(t, function Jc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function Lc))
	call TriggerAddAction(t, function Mc)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function Oc))
	call TriggerAddAction(t, function Pc)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function Rc))
	call TriggerAddAction(t, function Sc)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function isJinLunLongXiang))
	call TriggerAddAction(t, function jinLunLongXiang)
	set t=null
endfunction
//--------丐帮开始--------//
//太祖拳法
function IsTaiZu takes nothing returns boolean
	return IsCertainWuGong(GetAttacker() , GetTriggerUnit() , 'A0C9')
endfunction
function TaiZu_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function TaiZu_Action takes nothing returns nothing
 local unit uc=GetEnumUnit()
 local unit u=GetAttacker()
 local real shxishu=1.
 local real shanghai=0.
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A07S') >= 1 then
		set shxishu=shxishu + .8
	endif
	if UnitHasDenomWeapon(u , 'I097') then
	    set shxishu=shxishu * 4
    endif
	set shanghai=ShangHaiGongShi(u , uc , 30. , 42. , shxishu , 'A0C9')
    call AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl")
    call DestroyEffect((GetLastCreatedEffectBJ())) // INLINED!!
    //call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(shanghai)+", "+I2S(1+GetPlayerId(GetOwningPlayer(u))))
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A07U') >= 1 then
		call YDWEPolledWaitNull(0.50)
		call AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl")
    	call DestroyEffect((GetLastCreatedEffectBJ())) // INLINED!!
		call WuGongShangHai(u , uc , shanghai)
    endif
	set u=null
    set uc=null
endfunction
function TaiZuQuan takes nothing returns nothing
    //local real angle=GetUnitFacing(GetAttacker())
    local group g=CreateGroup()
    local real r=300.
    set r=500. + 40. * GetUnitAbilityLevel(GetAttacker(), 'A0C9')
    if GetUnitAbilityLevel(GetAttacker(), 'A0CA') >= 1 then
	    set r=r * 1.6
    endif
    //call knock_back(GetAttacker() , angle, 50.0 , .3 , 0.03 , path,shanghai)
    call WuGongShengChong(GetAttacker() , 'A0C9' , 900.)
    call GroupEnumUnitsInRange(g, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()), r, Condition(function TaiZu_Condition))
    call ForGroupBJ(g, function TaiZu_Action)
    call GroupClear(g)
    call DestroyGroup(g)
    set g=null
endfunction
//丐帮心法
function IsGaiBang takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A0DI' )
endfunction
function FanWei_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_fanweidanwei)) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
// 降龙和打狗加成心法
function XinFaJiaCheng takes unit u returns integer
    // 降龙和打狗等级
    if GetUnitAbilityLevel(u, 'A07E') > 0 and GetUnitAbilityLevel(u, 'A07L') > 0 then
        return GetUnitAbilityLevel(u, 'A07E') * GetUnitAbilityLevel(u, 'A07L')
    endif
    if GetUnitAbilityLevel(u, 'A07E') > 0 or GetUnitAbilityLevel(u, 'A07L') > 0 then
        if GetUnitAbilityLevel(u, 'A07E') > 0 then
            return GetUnitAbilityLevel(u, 'A07E')
        endif
        if GetUnitAbilityLevel(u, 'A07L') > 0 then
            return GetUnitAbilityLevel(u, 'A07L')
        endif
    endif
    return 1
endfunction
function FanWei_Action takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(udg_fanweidanwei))]
 local real shanghai=LoadReal(YDHT, StringHash("范围"), StringHash("伤害"))
	call WuGongShangHai(u , GetEnumUnit() , shanghai)
	set u=null
endfunction
function FanWeiShangHai takes unit u,real range,real shanghai returns nothing
    local group g=CreateGroup()
    call SaveReal(YDHT, StringHash("范围"), StringHash("伤害"), shanghai)
    set udg_fanweidanwei=u
    call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), range, Condition(function FanWei_Condition))
    call ForGroupBJ(g, function FanWei_Action)
    call DestroyGroup(g)
    set g=null
endfunction
function QuWuGongJi_Action takes nothing returns nothing
 local timer t=GetExpiredTimer()
 local integer l__w=GetHandleId(t)
 local unit u=LoadUnitHandle(YDHT, l__w, 0)
 local real angle=LoadReal(YDHT, l__w, 1)
    local unit l__ut=LoadUnitHandle(YDHT, l__w, 3)
    local integer j=LoadInteger(YDHT, l__w, 4)
    local integer id=LoadInteger(YDHT, l__w, 5)
    local integer jmax=30
    local real shxishu=RMinBJ(I2R(GetUnitLevel(u)), 10.)
    local real shanghai=0.
    if UnitHasDenomWeapon(u , 'I097') then
	    set shxishu=shxishu * 4
    endif
    if id == 'ndog' then
        set shanghai=ShangHaiGongShi(u , u , 8 , 2.6 , shxishu , 'A0DI')
    elseif id == 'uloc' then
        set shanghai=ShangHaiGongShi(u , u , 3.2 , 13.4 , shxishu , 'A0DI')
    else
        set shanghai=ShangHaiGongShi(u , u , 6.6 , 3.2 , shxishu , 'A0DI')
    endif
    // 降龙和打狗等级加成
    set shanghai=shanghai * XinFaJiaCheng(u)
        // call BJDebugMsg("伤害："+R2S(shanghai))
    if j < jmax then
        call SetUnitX(l__ut, CheckX(GetLocationX(LoadLocationHandle(YDHT, l__w, 2)) + Cos(angle) * 32 * j))
        call SetUnitY(l__ut, CheckY(GetLocationY(LoadLocationHandle(YDHT, l__w, 2)) + Sin(angle) * 32 * j))
        //call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(CheckX(GetLocationX(loc)+Cos(angle)*10*j))+","+R2S(CheckY(GetLocationY(loc)+Sin(angle)*10*j)))
        call FanWeiShangHai(l__ut , 300 , shanghai)
        call SaveInteger(YDHT, l__w, 4, j + 1)
    else
        call KillUnit(l__ut)
        call RemoveUnit(l__ut)
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, l__w)
    endif
    set t=null
    set u=null
    set l__ut=null
endfunction
function QuWuGongJi takes unit u,integer id returns nothing
    local real facing= GetUnitFacing(u)
    local real angle= facing * bj_DEGTORAD
    local location loc=GetUnitLoc(u)
    local timer t=CreateTimer()
    local integer l__w=GetHandleId(t)
    local unit l__ut=null
    call CreateNUnitsAtLoc(1, id, GetOwningPlayer(u), loc, facing)
    set l__ut=bj_lastCreatedUnit
    call SaveUnitHandle(YDHT, l__w, 0, u)
    call SaveReal(YDHT, l__w, 1, angle)
    call SaveLocationHandle(YDHT, l__w, 2, loc)
    call SaveUnitHandle(YDHT, l__w, 3, l__ut)
    call SaveInteger(YDHT, l__w, 4, 0)
    call SaveInteger(YDHT, l__w, 5, id)
    call TimerStart(t, 0.03, true, function QuWuGongJi_Action)
    set t=null
    set l__ut=null
    set loc=null
endfunction
function GaiBang_Action takes nothing returns nothing
 local timer t=GetExpiredTimer()
 local integer l__w=GetHandleId(t)
 local unit u=LoadUnitHandle(YDHT, l__w, 0)
 local player p=GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local integer j=LoadInteger(YDHT, l__w, 1)
 local integer jmax=100
	if j < jmax then
	    if (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) == true then // INLINED!!
            call ModifyHeroStat(1, u, 0, 2 * GetUnitAbilityLevel(u, 'A0DI'))
        endif
        call SaveInteger(YDHT, l__w, 1, j + 1)
    else
        call ModifyHeroStat(1, u, 1, 200 * GetUnitAbilityLevel(u, 'A0DI'))
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, l__w)
    endif
    set t=null
    set u=null
    set p=null
endfunction
function GaiBangXinFa takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local timer t=CreateTimer()
 local location loc= GetUnitLoc(u)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveInteger(YDHT, GetHandleId(t), 1, 0)
	call CreateNUnitsAtLoc(1, 'e00X', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    call UnitAddAbility(bj_lastCreatedUnit, 'Arej')
    call IssueTargetOrder(bj_lastCreatedUnit, "rejuvination", u)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
    call ShowUnitHide(bj_lastCreatedUnit)
	call WuGongShengChong(u , 'A0DI' , 200.)
	//打狗·驱狗
    if GetUnitAbilityLevel(u, 'A07L') >= 1 then
        call QuWuGongJi(u , 'ndog')
    endif
    //降龙·驱龙
    if GetUnitAbilityLevel(u, 'A07E') >= 1 then
        call QuWuGongJi(u , 'uloc')
    endif
	call TimerStart(t, 0.1, true, function GaiBang_Action)
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set t=null
endfunction
//铁布衫
function IsTieBuShan takes nothing returns boolean
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0CA') >= 1
endfunction
function TieBuShan_Action takes nothing returns nothing
 local timer tm=GetExpiredTimer()
 local unit u=LoadUnitHandle(YDHT, GetHandleId(tm), 0)
 local unit uc=LoadUnitHandle(YDHT, GetHandleId(tm), 3)
 local integer cengxieliang=LoadInteger(YDHT, GetHandleId(tm), 1)
 local integer cengjialiang=LoadInteger(YDHT, GetHandleId(tm), 2)
	if udg_tiebushancengshu >= 1 then
		set udg_tiebushancengshu=udg_tiebushancengshu - 1
    endif
	call FlushChildHashtable(YDHT, GetHandleId(tm))
	call PauseTimer(tm)
	call DestroyTimer(tm)
	set tm=null
	set uc=null
	set u=null
endfunction
function TieBuShan takes nothing returns nothing
 local integer cengshu=15
 local unit u=GetTriggerUnit()
 local unit uc=GetAttacker()
 local integer cengxieliang=6000 + 1000 * GetUnitAbilityLevel(u, 'A0CA')
 local integer cengjialiang=100 + 30 * GetUnitAbilityLevel(u, 'A0CA')
 local timer tm=CreateTimer()
 local real time=20.
 local integer i=1
	if tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] >= 500 then
		set tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))]=tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] - 500
		call unitadditembyidswapped('I04T' , u)
	else
		set tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))]=tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] + 1
	endif
	//set i=1
 //   loop
 //   exitwhen i>6
 //   if GetItemType(UnitItemInSlotBJ(GetTriggerUnit(),i))== ITEM_TYPE_PURCHASABLE then
	//    set cengxieliang=cengxieliang/2
	//    set cengjialiang=cengjialiang/2
 //   endif
 //   set i=i+1
 //   endloop
 //   if GetUnitAbilityLevel(u,'A0DN')>=1 then
	//    set cengxieliang=cengxieliang-600
 //   endif
 //   if GetUnitAbilityLevel(u,'A070')>=1 then
	//    set cengjialiang=cengjialiang-20
 //   endif
    if danpo[1 + GetPlayerId(GetOwningPlayer(u))] >= 20 then
	    set time=time - 10.
    endif
    if GetUnitAbilityLevel(u, 'A083') >= 1 then
	    set cengshu=cengshu + 20
    endif
    set cengshu=cengshu - 1 + GetUnitAbilityLevel(u, 'A0CA')
    if udg_tiebushancengshu <= cengshu - 1 and GetRandomReal(1., 200) < 20 then
	    call WuGongShengChong(u , 'A0CA' , 2000.)
	    call WuGongShangHai(u , uc , ShangHaiGongShi(u , uc , 40. , 80. , udg_tiebushancengshu , 'A0CA'))
	    call SetUnitDizzy(uc , 4. + 1.5 * GetUnitAbilityLevel(u, 'A0CA') , "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
	    set udg_tiebushancengshu=udg_tiebushancengshu + 1
        call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
        call SaveUnitHandle(YDHT, GetHandleId(tm), 3, uc)
        call SaveInteger(YDHT, GetHandleId(tm), 1, cengxieliang)
        call SaveInteger(YDHT, GetHandleId(tm), 2, cengjialiang)
        call TimerStart(tm, time, false, function TieBuShan_Action)
    endif
	set u=null
	set uc=null
	set tm=null
endfunction
//夜叉棍法
function IsYeCha takes nothing returns boolean
	return GetSpellAbilityId() == 'A0CB'
endfunction
function YeChaGun_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_yechadanwei)) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function YeChaGun_SH takes nothing returns nothing
 local real shanghai=0.
 local real shxishu=1.
	if GetUnitAbilityLevel(udg_yechadanwei, 'A07P') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(udg_yechadanwei, 'A07T') >= 1 then
		set shxishu=shxishu + .8
	endif
	if GetUnitAbilityLevel(udg_yechadanwei, 'A080') >= 1 then
		set shxishu=shxishu + 1.5
	endif
	if UnitHasDenomWeapon(udg_yechadanwei , 'I097') then
	    set shxishu=shxishu * 4
    endif
    set shanghai=ShangHaiGongShi(udg_yechadanwei , GetEnumUnit() , 36 , 24 , shxishu , 'A0CB')
    call WuGongShangHai(udg_yechadanwei , GetEnumUnit() , shanghai)
    if GetUnitAbilityLevel(udg_yechadanwei, 'A0DI') >= 1 then
	     call SetUnitDizzy(GetEnumUnit() , 2. , "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
    endif
    call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , GetEnumUnit() , "overhead"))) // INLINED!!
endfunction
function YeChaGun_Action takes nothing returns nothing
    local timer t=GetExpiredTimer()
    local integer p= GetHandleId(t)
    local unit u=LoadUnitHandle(YDHT, p, 0)
    local unit l__ut=LoadUnitHandle(YDHT, p, 1)
    local real Axx=LoadReal(YDHT, p, 2)
    local real Ayy=LoadReal(YDHT, p, 3)
    local real Cxx=LoadReal(YDHT, p, 4)
    local real Cyy=LoadReal(YDHT, p, 5)
    local real Bxx=LoadReal(YDHT, p, 6)
    local real Byy=LoadReal(YDHT, p, 7)
    local real a=LoadReal(YDHT, p, 8)
    local real b=1 - a
    local boolean firstpass=LoadBoolean(YDHT, p, 9)
    local location loc=GetUnitLoc(l__ut)
    local group g=CreateGroup()
    call SetUnitX(l__ut, CheckX(Axx * a * a + Bxx * 2 * a * b + Cxx * b * b))
    call SetUnitY(l__ut, CheckY(Ayy * a * a + Byy * 2 * a * b + Cyy * b * b))
    set udg_yechadanwei=u
    call GroupEnumUnitsInRangeOfLoc(g, loc, 150, Condition(function YeChaGun_Condition))
    call ForGroupBJ(g, function YeChaGun_SH)
    call GroupClear(g)
    call DestroyGroup(g)
    if firstpass then
	    set a=a - 0.02
	else
	    set a=a + 0.02
    endif
    call SaveReal(YDHT, p, 8, a)
    call SaveReal(YDHT, p, 2, GetUnitX(u))
    call SaveReal(YDHT, p, 3, GetUnitY(u))
    if ( a < 0 and firstpass ) then
	    call SetUnitFacing(l__ut, GetUnitFacing(l__ut) + 180)
        call SaveBoolean(YDHT, p, 9, false)
        call SaveReal(YDHT, p, 6, Axx + 300 * Cos(Atan2(Cyy - Ayy, Cxx - Axx)) - 45)
        call SaveReal(YDHT, p, 7, Ayy + 300 * Sin(Atan2(Cyy - Ayy, Cxx - Axx)) - 45)
    endif
    if ( a > 1 and firstpass == false ) then
	    call KillUnit(l__ut)
	    call FlushChildHashtable(YDHT, p)
        call PauseTimer(t)
        call DestroyTimer(t)
    endif
    call RemoveLocation(loc)
    set loc=null
    set g=null
    set t=null
    set u=null
    set l__ut=null
endfunction
function YeChaGun takes nothing returns nothing
    local timer t= CreateTimer()
    local integer p= GetHandleId(t)
    local unit u= GetTriggerUnit()
    local real Axx= GetUnitX(u)
    local real Ayy= GetUnitY(u)
    local real Cxx=GetSpellTargetX()
    local real Cyy=GetSpellTargetY()
    local integer i= 0
    local real angle=0.
    local real a=1.
    call SaveUnitHandle(YDHT, p, 0, u)
    call SaveUnitHandle(YDHT, p, 1, CreateUnit(GetOwningPlayer(u), 'h00D', Axx, Ayy, GetUnitFacing(u)))
    call SaveReal(YDHT, p, 2, Axx)
    call SaveReal(YDHT, p, 3, Ayy)
    call SaveReal(YDHT, p, 4, Cxx)
    call SaveReal(YDHT, p, 5, Cyy)
    call SaveReal(YDHT, p, 6, Axx + 300 * Cos(Atan2(Cyy - Ayy, Cxx - Axx)) + 45)
    call SaveReal(YDHT, p, 7, Ayy + 300 * Sin(Atan2(Cyy - Ayy, Cxx - Axx)) + 45)
    call SaveReal(YDHT, p, 8, a)
    call SaveBoolean(YDHT, p, 9, true)
    call WuGongShengChong(u , 'A0CB' , 240.)
    call TimerStart(t, 0.03, true, function YeChaGun_Action)
    set u=null
    set t=null
endfunction
//疯魔杖法
function IsFengMoShe takes nothing returns boolean
	return GetUnitTypeId(GetAttacker()) == 'osp1' or GetUnitTypeId(GetAttacker()) == 'osp2' or GetUnitTypeId(GetAttacker()) == 'osp3'
endfunction
function FengMoShe takes nothing returns nothing
 local player p=GetOwningPlayer(GetAttacker())
 local integer i=1 + GetPlayerId(p)
 local unit u=udg_hero[i]
 local unit uc=GetTriggerUnit()
 local real shanghai=0.
 local real shxishu=1.
local real Maxsh=0.
    local real Minsh=0.
	if GetUnitTypeId(GetAttacker()) == 'osp1' then
		set shxishu=2. // 搭配双手系数
elseif GetUnitTypeId(GetAttacker()) == 'osp2' then
	    set shxishu=5. // 搭配西毒系数
elseif GetUnitTypeId(GetAttacker()) == 'osp3' then
	    set shxishu=20. // 搭配太玄系数
endif
    // 打狗棒系数加成
	if UnitHasDenomWeapon(u , 'I097') then
	    set shxishu=shxishu * 6
    endif
	set shanghai=ShangHaiGongShi(u , uc , 24. , 45. , shxishu , 'A0C8')
	call WuGongShangHai(u , uc , shanghai)
	set uc=null
	set u=null
	set p=null
endfunction
function IsFengMo takes nothing returns boolean
	return IsCertainWuGong(GetAttacker() , GetTriggerUnit() , 'A0C8')
endfunction
function FengMoGun takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local player p=GetOwningPlayer(u)
 local integer id='osp1'
 local location loc1=GetUnitLoc(u)
 local location loc2=GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 'A089') >= 1 then
		if GetUnitAbilityLevel(u, 'A0D8') >= 1 then
			set id='osp3'
		else
		    set id='osp2'
	    endif
	endif
	call CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
	call UnitApplyTimedLifeBJ(3, 'BTLF', bj_lastCreatedUnit)
    if GetUnitAbilityLevel(u, 'A07U') >= 1 then
	    call CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
	    call UnitApplyTimedLifeBJ(3, 'BTLF', bj_lastCreatedUnit)
    endif
    call WuGongShengChong(u , 'A0C8' , 900.)
    call RemoveLocation(loc1)
    call RemoveLocation(loc2)
    set loc1=null
    set loc2=null
	set p=null
	set u=null
	set uc=null
endfunction
//--------丐帮结束--------//
function GaiBang_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTaiZu))
	call TriggerAddAction(t, function TaiZuQuan)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTieBuShan))
	call TriggerAddAction(t, function TieBuShan)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsFengMo))
	call TriggerAddAction(t, function FengMoGun)
	
	set Bk=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Bk, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(Bk, Condition(function IsFengMoShe))
	call TriggerAddAction(Bk, function FengMoShe)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsGaiBang))
	call TriggerAddAction(t, function GaiBangXinFa)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsYeCha))
	call TriggerAddAction(t, function YeChaGun)
	set t=null
endfunction
//--------血刀开始--------//
//血斩千刀
function IsXueZhan takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A0CN' ) )
endfunction
function XueZhan_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 3))) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function XueZhan_Action takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 3)
 local unit uc= GetEnumUnit()
 local real shxishu= 1.
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 'A06M') >= 1 then
		set shxishu=shxishu + .9
	endif
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	set shanghai=ShangHaiGongShi(u , uc , 100. , 200. , shxishu , 'A0CN')
	call SetUnitX(u, CheckX(GetLocationX(loc)))
	call SetUnitY(u, CheckY(GetLocationY(loc)))
	call SetUnitFacing(u, GetUnitFacing(uc) + 180)
	call WuGongShangHai(u , uc , shanghai)
	//call DestroyEffectEx( AddSpecialEffectTargetEx("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",uc, "origin") )
	call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , uc , "overhead"))) // INLINED!!
	call SetUnitTimeScale(u, 20)
	call SetUnitAnimation(u, "attack")
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
function XueZhanDao_2 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer l__w= GetHandleId(t)
 local group g= CreateGroup()
 local integer j= LoadInteger(YDHT, l__w, 1)
 local location loc= LoadLocationHandle(YDHT, l__w, 2)
 local unit u= LoadUnitHandle(YDHT, l__w, 3)
 local integer jmax= 10 + GetUnitAbilityLevel(u, 'A0CN')
 local real r= .3
 local real range= 600.
	if GetUnitAbilityLevel(u, 'A06L') >= 1 then
		set range=range + 400.
	endif
	if GetUnitAbilityLevel(u, 'A07W') >= 1 then
		set jmax=jmax + 5
	endif
	call GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(function XueZhan_Condition))
	if j < jmax then
		if g != null then
			call ForGroupBJ(YDWEGetRandomSubGroupNull(1 , g), function XueZhan_Action)
			call SaveInteger(YDHT, l__w, 1, j + 1)
			//call GroupClear(g)
			//call GroupEnumUnitsInRangeOfLoc(g,GetSpellTargetLoc(),range,Condition(function XueZhan_Condition))
		else
			call PauseTimer(t)
			call DestroyTimer(t)
			call FlushChildHashtable(YDHT, l__w)
			call RemoveLocation(loc)
			call SetUnitTimeScale(u, 1)
			call ResetUnitAnimation(u)
		endif
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, l__w)
		call RemoveLocation(loc)
		call SetUnitTimeScale(u, 1)
		call ResetUnitAnimation(u)
	endif
	call GroupClear(g)
	call DestroyGroup(g)
	set u=null
	set g=null
	set t=null
	set loc=null
endfunction
function XueZhanDao takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local timer t= CreateTimer()
 local integer l__w= GetHandleId(t)
 local real r= 0.3
	if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		set r=r - .2
	endif
	call WuGongShengChong(u , 'A0CN' , 120.)
	call SaveInteger(YDHT, l__w, 1, 0)
	call SaveLocationHandle(YDHT, l__w, 2, GetSpellTargetLoc())
	call SaveUnitHandle(YDHT, l__w, 3, u)
	call TimerStart(t, r, true, function XueZhanDao_2)
	set u=null
	set t=null
endfunction
//血刀刀法
function IsXueDao takes nothing returns boolean
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) and GetUnitAbilityLevel(GetTriggerUnit(), 'A0CI') >= 1
endfunction
function XueDaoZhuan takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer l__w= GetHandleId(t)
 local unit l__ut= LoadUnitHandle(YDHT, l__w, 0)
 local integer j= LoadInteger(YDHT, l__w, 2)
 local real face= LoadReal(YDHT, l__w, 1)
 local unit u= LoadUnitHandle(YDHT, l__w, 3)
	if j < 36 then
		call SetUnitFacing(l__ut, face + 30.)
		call SetUnitX(l__ut, CheckX(GetUnitX(u) + 200 * Sin(Deg2Rad(face))))
		call SetUnitY(l__ut, CheckY(GetUnitY(u) + 200 * Cos(Deg2Rad(face))))
		call SaveReal(YDHT, l__w, 1, face + 30.)
		call SaveInteger(YDHT, l__w, 2, j + 1)
	else
		call KillUnit(l__ut)
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, l__w)
	endif
	set t=null
	set l__ut=null
	set u=null
endfunction
function XueDao_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function XueDao_Action takes nothing returns nothing
 local real shxishu= 1.
 local real shanghai= 0.
 local unit u= GetTriggerUnit()
 local unit uc= GetEnumUnit()
	if GetUnitAbilityLevel(u, 'A06M') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A06P') >= 1 then
		set shxishu=shxishu + .8
	endif
	if GetUnitAbilityLevel(u, 'A086') >= 1 then
		set shxishu=shxishu + 1.5
	endif
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	set shanghai=ShangHaiGongShi(u , uc , 36 , 54 , shxishu , 'A0CI')
	//call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(shanghai))
	call WuGongShangHai(u , uc , shanghai)
	call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl" , uc , "overhead"))) // INLINED!!
	set u=null
	set uc=null
endfunction
function XueDaoDao takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetAttacker()
 local unit l__ut= null
 local timer t= CreateTimer()
 local player p= GetOwningPlayer(u)
 local group g= CreateGroup()
 local integer l__w= GetHandleId(t)
 local location loc= GetUnitLoc(u)
 local real r= 200. + I2R(jingmai[1 + GetPlayerId(p)]) * 15
	if GetUnitAbilityLevel(u, 'A07Q') >= 1 then
		set r=r + 200.
	endif
	if r > 3000 then
		set r=3000
	endif
	if GetRandomReal(1., 300.) <= 15 + fuyuan[1 + GetPlayerId(p)] / 5 then
		call CreateNUnitsAtLoc(1, 'h00E', p, loc, bj_UNIT_FACING)
		set l__ut=bj_lastCreatedUnit
		call SaveUnitHandle(YDHT, l__w, 0, l__ut)
		call SaveReal(YDHT, l__w, 1, GetUnitFacing(l__ut))
		call SaveInteger(YDHT, l__w, 2, 0)
		call SaveUnitHandle(YDHT, l__w, 3, u)
		call TimerStart(t, 0.05, true, function XueDaoZhuan)
		call GroupEnumUnitsInRangeOfLoc(g, loc, r, Condition(function XueDao_Condition))
		call ForGroupBJ(g, function XueDao_Action)
		call WuGongShengChong(u , 'A0CI' , 600.)
	endif
	call RemoveLocation(loc)
	call GroupClear(g)
	call DestroyGroup(g)
	set u=null
	set uc=null
	set l__ut=null
	set loc=null
	set p=null
	set t=null
	set g=null
endfunction
//血魔刀法
function IsXueMo takes nothing returns boolean
	return IsCertainWuGong(GetAttacker() , GetTriggerUnit() , 'A0CJ')
endfunction
function XueMo_Action takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local unit u= LoadUnitHandle(YDHT, p, 0)
 local unit uc= LoadUnitHandle(YDHT, p, 1)
 local integer j= LoadInteger(YDHT, p, 2)
 local real lastX= LoadReal(YDHT, p, 3)
 local real lastY= LoadReal(YDHT, p, 4)
 local real nowX= GetUnitX(uc)
 local real nowY= GetUnitY(uc)
 local real dist= SquareRoot(( lastX - nowX ) * ( lastX - nowX ) + ( lastY - nowY ) * ( lastY - nowY ))
 local real shxishu= 1.
 local real shanghai= 0.
 local integer jmax= 20
	if GetUnitAbilityLevel(u, 'A06M') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A086') >= 1 then
		set shxishu=shxishu + 1.5
	endif
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	if GetUnitAbilityLevel(u, 'A0CK') >= 1 then
		set jmax=jmax + 20
	endif
	if GetUnitAbilityLevel(u, 'A07W') >= 1 then
		set jmax=jmax + 20
	endif
	if j < jmax then
		if dist > 2. then
			set shxishu=1. + dist / 5.
		endif
		set shanghai=ShangHaiGongShi(u , uc , 7 , 7 , shxishu , 'A0CJ')
		if uc != null and IsUnitAliveBJ(uc) and uc != udg_ZhengPaiWL then
			call WuGongShangHai(u , uc , shanghai)
			call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl" , uc , "overhead"))) // INLINED!!
		endif
		call SaveInteger(YDHT, p, 2, j + 1)
		call SaveReal(YDHT, p, 3, nowX)
		call SaveReal(YDHT, p, 4, nowY)
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, p)
	endif
	set t=null
	set u=null
	set uc=null
endfunction
function XueMoDao takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local timer t= CreateTimer()
 local integer p= GetHandleId(t)
 local real r= 1000.
	if GetUnitAbilityLevel(u, 'A07O') >= 1 then
		set r=400.
	endif
	call SaveUnitHandle(YDHT, p, 0, u)
	call SaveUnitHandle(YDHT, p, 1, uc)
	call SaveInteger(YDHT, p, 2, 0)
	call SaveReal(YDHT, p, 3, GetUnitX(uc))
	call SaveReal(YDHT, p, 4, GetUnitY(uc))
	call WuGongShengChong(u , 'A0CJ' , r)
	call TimerStart(t, 0.25, true, function XueMo_Action)
	set u=null
	set uc=null
	set t=null
endfunction
//佛灭万劫功
function IsFoMie takes nothing returns boolean
	return IsCertainWuGong(GetAttacker() , GetTriggerUnit() , 'A0CK')
endfunction
function FoMie_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_fomiedanwei)) and IsUnitAliveBJ(GetFilterUnit()) and IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false and GetUnitTypeId(GetFilterUnit()) != 'N008' and GetUnitTypeId(GetFilterUnit()) != 'N009'
endfunction
function FoMie_Action takes nothing returns nothing
 local unit u= udg_fomiedanwei
 local unit uc= GetEnumUnit()
 local real myX= GetUnitX(u)
 local real myY= GetUnitY(u)
 local real hisX= GetUnitX(uc)
 local real hisY= GetUnitY(uc)
 local real dist= 0.
 local real angle= 0.
 local integer i= 0
 local real perc= 0.4
 local real shxishu= 1.
 local real shanghai= 0.
	if GetUnitAbilityLevel(u, 'A06M') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A086') >= 1 then
		set shxishu=shxishu + 1.5
	endif
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	if dist > 20. then
		set shxishu=1. + 2000. / dist
	endif
	if GetUnitAbilityLevel(u, 'A0D3') >= 1 then
		set shanghai=ShangHaiGongShi(u , uc , 1.8 , 1.8 , shxishu , 'A0CJ')
		if uc != null and IsUnitAliveBJ(uc) then
			call WuGongShangHai(u , uc , shanghai)
			call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl" , uc , "overhead"))) // INLINED!!
		endif
	endif
	if GetUnitAbilityLevel(u, 'A07W') >= 1 then
		set perc=perc + 0.2
	endif
	set hisX=GetUnitX(uc)
	set hisY=GetUnitY(uc)
	set angle=Atan2(hisY - myY, hisX - myX)
	set dist=SquareRoot(( hisX - myX ) * ( hisX - myX ) + ( hisY - myY ) * ( hisY - myY ))
	call SetUnitX(uc, hisX - perc * dist * Cos(angle))
	call SetUnitY(uc, hisY - perc * dist * Sin(angle))
	if dist < 300 and not UnitHasBuffBJ(uc, 'B008') then
		call WanBuff(u , uc , 11)
	endif
	set u=null
	set uc=null
endfunction
function FoMie_setfalse takes nothing returns nothing
 local timer t= GetExpiredTimer()
	set udg_shifoufomie=false
	//call BJDebugMsg("等待之后")
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
function FoMie takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local timer tm= CreateTimer()
 local integer p= GetHandleId(t)
 local unit uc= LoadUnitHandle(YDHT, p, 0)
 local integer j= LoadInteger(YDHT, p, 1)
 local integer jmax= 6
 local group g= CreateGroup()
 local real x= GetUnitX(udg_fomiedanwei)
 local real y= GetUnitY(udg_fomiedanwei)
 local real range= 800. + 100. * GetUnitAbilityLevel(udg_fomiedanwei, 'A0CK')
	if GetUnitAbilityLevel(udg_fomiedanwei, 'A06P') >= 1 then
		set range=range + 500.
	endif
	if GetUnitAbilityLevel(udg_fomiedanwei, 'A07N') >= 1 then
		set jmax=jmax + 6
	endif
	if j >= jmax then
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, p)
		//call BJDebugMsg("等待之前")
		//10秒钟CD
		call TimerStart(tm, 10., false, function FoMie_setfalse)
	else
		call GroupEnumUnitsInRange(g, x, y, range, Condition(function FoMie_Condition))
		call ForGroupBJ(g, function FoMie_Action)
		call GroupClear(g)
		call DestroyGroup(g)
		call SaveInteger(YDHT, p, 1, j + 1)
	endif
	set uc=null
	set g=null
	set t=null
	set tm=null
endfunction
function FoMieWanJieGong takes nothing returns nothing
 local timer t= CreateTimer()
 local integer p= GetHandleId(t)
	set udg_fomiedanwei=GetAttacker()
	call SaveUnitHandle(YDHT, p, 0, GetTriggerUnit())
	call SaveInteger(YDHT, p, 1, 0)
	if not udg_shifoufomie then
		set udg_shifoufomie=true
		call TimerStart(t, 0.5, true, function FoMie)
		call WuGongShengChong(udg_fomiedanwei , 'A0CK' , 160.)
	endif
	set t=null
endfunction
//血刀经·一刀绝空
function IsXueDaoJing takes nothing returns boolean
	return GetSpellAbilityId() == 'A0DH'
endfunction
function XueDaoJing_Action takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local unit u= LoadUnitHandle(YDHT, p, 0)
 local unit uc= LoadUnitHandle(YDHT, p, 1)
 local unit l__ut= LoadUnitHandle(YDHT, p, 2)
 local location loc= LoadLocationHandle(YDHT, p, 3)
 local real myX= GetLocationX(loc)
 local real myY= GetLocationY(loc)
 local real hisX= GetUnitX(uc)
 local real hisY= GetUnitY(uc)
 local location loc2= null
 local real dist= 0.
 local real angle= 0.
 local integer i= LoadInteger(YDHT, p, 4)
 local real perc= 0.04
 local integer imax= 25
 local real shxishu= 1.
 local real shanghai= 0
	set shanghai=ShangHaiGongShi(u , uc , 400 , 300 , shxishu , 'A0DH')
	if GetUnitAbilityLevel(u, 'A06M') >= 1 then
		set shxishu=shxishu + .9
	endif
	if GetUnitAbilityLevel(u, 'A086') >= 1 then
		set shxishu=shxishu + 1.5
	endif
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	if i <= imax then
		set hisX=GetUnitX(uc)
		set hisY=GetUnitY(uc)
		set angle=Atan2(hisY - myY, hisX - myX)
		set dist=SquareRoot(( hisX - myX ) * ( hisX - myX ) + ( hisY - myY ) * ( hisY - myY ))
		set loc2=Location(myX + perc * i * dist * Cos(angle), myY + perc * i * dist * Sin(angle))
		call SetUnitPositionLoc(l__ut, loc2)
		//call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(hisX)+","+R2S(hisY)+","+R2S(myX)+","+R2S(myY)+","+R2S(GetLocationX(loc2))+","+R2S(GetLocationY(loc2))+","+R2S(dist)+","+R2S(angle))
		call SaveInteger(YDHT, p, 4, i + 1)
	else
		call WuGongShangHai(u , uc , shanghai)
		call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , uc , "overhead"))) // INLINED!!
		call SetUnitTimeScale(l__ut, 1)
		call ResetUnitAnimation(l__ut)
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, p)
		if GetUnitAbilityLevel(u, 'A07X') >= 1 then
			call UnitApplyTimedLifeBJ(100, 'BTLF', l__ut)
			//call UnitRemoveAbility(ut,'Aloc')
		else
			call KillUnit(l__ut)
			call RemoveUnit(l__ut)
		endif
		call RemoveLocation(loc)
		if GetUnitAbilityLevel(u, 'A06P') >= 1 then
			call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, 1093678903)
			call IssueTargetOrderById(bj_lastCreatedUnit, $D008F, uc)
			call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
			call CreateTextTagLocBJ("内伤", loc2, 60., 12., 65., 55., 42., 0)
			call Nw(3. , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
			call SetUnitDizzy(uc , 5. , "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
		endif
	endif
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set uc=null
	set l__ut=null
	set loc=null
	set loc2=null
endfunction
function XueDaoJing takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local location loc= GetUnitLoc(u)
 local timer t= CreateTimer()
 local integer p= GetHandleId(t)
 local unit l__ut= null
	call WuGongShengChong(u , 'A0DH' , 120)
	//call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"为什么不显示呢")
	call CreateNUnitsAtLoc(1, 'o01U', GetOwningPlayer(u), loc, GetUnitFacing(u))
	set l__ut=bj_lastCreatedUnit
	call ShowUnit(l__ut, true)
	call SaveUnitHandle(YDHT, p, 0, u)
	call SaveUnitHandle(YDHT, p, 1, uc)
	call SaveUnitHandle(YDHT, p, 2, l__ut)
	call SaveLocationHandle(YDHT, p, 3, loc)
	call SaveInteger(YDHT, p, 4, 0)
	call SetUnitTimeScale(l__ut, 1.)
	call SetUnitAnimation(l__ut, "attack slam")
	call TimerStart(t, 0.03, true, function XueDaoJing_Action)
	set u=null
	set uc=null
	set l__ut=null
	set loc=null
	set t=null
endfunction
function XueDaoJing_Condition takes nothing returns boolean
	return GetUnitTypeId(GetAttacker()) == 'o01U'
endfunction
function XueDaoJing_Action2 takes nothing returns nothing
 local player p= GetOwningPlayer(GetAttacker())
 local integer i= 1 + GetPlayerId(p)
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0
	if UnitHasDenomWeapon(u , 'I098') then
		set shxishu=shxishu * 4
	endif
	// 一刀绝空2倍
	if isTitle(i , 15) then
		set shxishu=shxishu * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 200 , 1200 , shxishu , 'A0DH')
	call WuGongShangHai(u , uc , shanghai)
	call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , uc , "overhead"))) // INLINED!!
	set p=null
	set u=null
	set uc=null
endfunction
function XueDao_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsXueDaoJing))
	call TriggerAddAction(t, function XueDaoJing)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function XueDaoJing_Condition))
	call TriggerAddAction(t, function XueDaoJing_Action2)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsXueZhan))
	call TriggerAddAction(t, function XueZhanDao)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsXueDao))
	call TriggerAddAction(t, function XueDaoDao)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsXueMo))
	call TriggerAddAction(t, function XueMoDao)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsFoMie))
	call TriggerAddAction(t, function FoMieWanJieGong)
	set t=null
endfunction
//--------血刀结束--------//
//--------峨眉开始--------//
//四象掌
function IsSiXiang takes nothing returns boolean
 local real r=0.
	if GetUnitAbilityLevel(GetAttacker(), 'A0C4') >= 1 then
		set r=fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] * 4
	else
	    set r=fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]
    endif
    return ( GetRandomReal(0., 100.) < 15 + r / 5 ) and ( ( GetUnitAbilityLevel(GetAttacker(), 'A0C7') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function SiXiang_Condition takes nothing returns boolean
    return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function SiXiang2 takes nothing returns nothing
    local player p=GetOwningPlayer(udg_sixiangdanwei)
    local integer i=1 + GetPlayerId(p)
    local real shanghai=0.
    local real shxishu=2.
    if GetUnitAbilityLevel(udg_sixiangdanwei, 'A07N') >= 1 then
	    set shxishu=shxishu + 0.8
    endif
    // 倚天剑加成
    if UnitHasDenomWeapon(udg_sixiangdanwei , 'I00B') then
		set shxishu=shxishu * 4
	endif
    set shanghai=ShangHaiGongShi(udg_sixiangdanwei , GetEnumUnit() , 12 , 20 , shxishu , 'A0C7')
    call WuGongShangHai(udg_sixiangdanwei , GetEnumUnit() , shanghai)
    if GetUnitAbilityLevel(udg_sixiangdanwei, 'A0C6') >= 1 and GetRandomReal(1., 100.) <= 27 then
        call WanBuff(udg_sixiangdanwei , GetEnumUnit() , 11)
    endif
    set p=null
endfunction
function SiXiangZhang takes nothing returns nothing
    local unit u=GetAttacker()
    local player p=GetOwningPlayer(u)
    local integer i=0
    local integer imax=0
    local location loc=GetUnitLoc(u)
    local location loc2=GetUnitLoc(GetTriggerUnit())
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local string s= "Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl"
    if GetUnitAbilityLevel(u, 'A07W') >= 1 then
	    set imax=8
	else
	    set imax=5
    endif
    set i=1
    loop
    	exitwhen i > imax
        call DestroyEffect((AddSpecialEffectEx(s , x + 100 * i , y))) // INLINED!!
        call DestroyEffect((AddSpecialEffectEx(s , x - 100 * i , y))) // INLINED!!
        call DestroyEffect((AddSpecialEffectEx(s , x , y + 100 * i))) // INLINED!!
        call DestroyEffect((AddSpecialEffectEx(s , x , y - 100 * i))) // INLINED!!
    	set i=i + 1
    endloop
    call WuGongShengChong(u , 'A0C7' , 900.)
    set udg_sixiangdanwei=GetAttacker()
    call GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, imax * 100.00, Condition(function SiXiang_Condition))
   // call ForGroupBJ(GetUnitsInRangeOfLocMatching(imax*100.00,loc2,Condition(function SiXiang_Condition)),function SiXiang)
    call ForGroupBJ(udg_shanghaidanweizu, function SiXiang2)
    call GroupClear(udg_shanghaidanweizu)
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    set i=1
    set u=null
    set p=null
    set loc=null
    set loc2=null
endfunction
//佛光普照
function IsFoGuang takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A0C4' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function FoGuang_Condition takes nothing returns boolean
    local unit u=LoadUnitHandle(YDHT, StringHash("佛光"), StringHash("普照"))
    local unit uc=GetFilterUnit()
    local real shanghai=GetWidgetLife(uc) * .03 * GetUnitAbilityLevel(u, 'A0C4')
    local timer t=CreateTimer()
    local real r=2.00
    if GetUnitAbilityLevel(u, 'A06P') >= 1 then
	    set r=4.00
    endif
    if GetUnitAbilityLevel(u, 'A07N') >= 1 then
	    set shanghai=shanghai * 2
    endif
    call SetWidgetLife(u, GetWidgetLife(u) + shanghai)
    if IsUnitEnemy(uc, GetOwningPlayer(u)) == true and IsUnitAliveBJ(uc) then
	    if ( ModuloInteger(GetUnitPointValue(uc), 100) == 0 ) then
            call SetWidgetLife(uc, GetWidgetLife(uc) - shanghai)
        else
        	call SetWidgetLife(uc, GetWidgetLife(uc) - shanghai / 6)
        endif
    	call SetUnitDizzy(uc , r , "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
    else
    	if (IsUnitType((uc ), ( UNIT_TYPE_HERO)) != null) then // INLINED!!
    		call SetWidgetLife(uc, GetWidgetLife(uc) + shanghai)
    	endif
    endif
    set u=null
    set uc=null
    set t=null
    return false
endfunction
function FoGuangHuiXie takes nothing returns nothing
 local timer tm=GetExpiredTimer()
 local integer i=LoadInteger(YDHT, GetHandleId(tm), 1) + 1
 local unit u=LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	call SaveInteger(YDHT, GetHandleId(tm), 1, i)
	call SetWidgetLife(u, GetWidgetLife(u) + 0.02 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
	//call BJDebugMsg("触发一次")
	if i >= 60 then
		call FlushChildHashtable(YDHT, GetHandleId(tm))
        call PauseTimer(tm)
		call DestroyTimer(tm)
	endif
	set u=null
	set tm=null
endfunction
function FoGuangZhang takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local player p=GetOwningPlayer(u)
    local integer i=1 + GetPlayerId(p)
    local group g=CreateGroup()
    local real r=700.
    local real x=GetUnitX(u)
    local real y=GetUnitY(u)
    local timer tm=CreateTimer()
    call WuGongShengChong(u , 'A0C4' , 200.)
    if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
	    set r=1500.
    endif
    if GetUnitAbilityLevel(u, 'A07S') >= 1 then
	    call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
	    call SaveInteger(YDHT, GetHandleId(tm), 1, 0)
	    call TimerStart(tm, .25, true, function FoGuangHuiXie)
    endif
    call SaveUnitHandle(YDHT, StringHash("佛光"), StringHash("普照"), u)
    call GroupEnumUnitsInRange(g, x, y, r, Condition(function FoGuang_Condition))
    call DestroyGroup(g)
    set u=null
    set p=null
    set g=null
    set tm=null
endfunction
//金顶绵掌
function IsJinDing takes nothing returns boolean
    return ( GetRandomReal(0., 100.) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] / 5 ) and ( ( GetUnitAbilityLevel(GetAttacker(), 'A0C2') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function JinDingZhang takes nothing returns nothing
    local unit u=GetAttacker()
    local unit l__ut=GetTriggerUnit()
    local real shanghai=0.
    local player p=GetOwningPlayer(u)
    local integer i=1 + GetPlayerId(p)
    local real shxishu=2.
    if GetUnitAbilityLevel(u, 'A0C6') >= 1 then
	    set shxishu=shxishu + .5
    endif
    if GetUnitAbilityLevel(u, 'A07S') >= 1 then
	    set shxishu=shxishu + .7
    endif
    // 倚天剑加成
    if UnitHasDenomWeapon(u , 'I00B') then
		set shxishu=shxishu * 4
	endif
    set shanghai=ShangHaiGongShi(u , l__ut , 130 , 106 , shxishu , 'A0C2')
    call AddSpecialEffectTargetUnitBJEx("overhead" , GetTriggerUnit() , "Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl")
    call DestroyEffect((GetLastCreatedEffectBJ())) // INLINED!!
    call WuGongShangHai(u , l__ut , shanghai)
    if jingmai[i] >= 20 then
        call YDWEJumpTimer(l__ut , 0 , 0.00 , 1 , 0.01 , GetRandomReal(200, 500))
    endif
    call WuGongShengChong(u , 'A0C2' , 1000.)
    set u=null
    set l__ut=null
    set p=null
endfunction
//灭绝剑法
function IsMieJue takes nothing returns boolean
    return ( GetSpellAbilityId() == 'A0C5' )
endfunction
function MieJue_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_miejuedanwei)) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function MieJue_Action takes nothing returns nothing
 local player p=GetOwningPlayer(udg_miejuedanwei)
    local integer i=1 + GetPlayerId(p)
    local real shanghai=0.
    local real shxishu=2.
    if GetUnitAbilityLevel(udg_miejuedanwei, 'A07M') >= 1 then
	    set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(udg_miejuedanwei, 'A071') >= 1 then
	    set shxishu=shxishu + 0.7
    endif
    // 倚天剑加成
    if UnitHasDenomWeapon(udg_miejuedanwei , 'I00B') then
		set shxishu=shxishu * 4
	endif
    set shanghai=ShangHaiGongShi(udg_miejuedanwei , GetEnumUnit() , 5.5 , 5.5 , shxishu , 'A0C5')
    call WuGongShangHai(udg_miejuedanwei , GetEnumUnit() , shanghai)
    set p=null
endfunction
function On_Timer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer p= GetHandleId(t)
    local real x= LoadReal(YDHT, p, 1) + LoadReal(YDHT, p, 3)
    local real y= LoadReal(YDHT, p, 2) + LoadReal(YDHT, p, 4)
    local integer j= LoadInteger(YDHT, p, 0) + 1
    local integer i= 0
    local unit u=null
    local integer jmax=30
    local real a=0.
    local location loc=null
    call SaveReal(YDHT, p, 1, x)
    call SaveReal(YDHT, p, 2, y)
    call SaveInteger(YDHT, p, 0, j)
    if GetUnitAbilityLevel(udg_miejuedanwei, 'A07W') >= 1 then
	    set jmax=jmax * 2
    endif
    //call DisplayTextToPlayer(Player(0),0,0,"x="+R2S(x)+", y="+R2S(y))
    loop
        exitwhen i >= 12
        set u=LoadUnitHandle(YDHT, p, 5 + i)
        set loc=GetUnitLoc(u)
        set a=( j * 12.0 + i * 30.0 ) * bj_DEGTORAD
        call SetUnitX(u, CheckX(x + 150.0 * Cos(a)))
        call SetUnitY(u, CheckY(y + 150.0 * Sin(a)))
        call GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, 100, Condition(function MieJue_Condition))
        call ForGroupBJ(udg_shanghaidanweizu, function MieJue_Action)
        call GroupClear(udg_shanghaidanweizu)
        call RemoveLocation(loc)
        if GetUnitAbilityLevel(udg_miejuedanwei, 'A089') >= 1 then
            set u=LoadUnitHandle(YDHT, p, 17 + i)
            set loc=GetUnitLoc(u)
            call SetUnitX(u, CheckX(GetUnitX(udg_miejuedanwei) + 150.0 * Cos(a)))
            call SetUnitY(u, CheckY(GetUnitY(udg_miejuedanwei) + 150.0 * Sin(a)))
            call GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, 100, Condition(function MieJue_Condition))
            call ForGroupBJ(udg_shanghaidanweizu, function MieJue_Action)
            call GroupClear(udg_shanghaidanweizu)
            call RemoveLocation(loc)
        endif
        set i=i + 1
    endloop
    if ( j >= jmax ) then
        set i=0
        loop
            exitwhen i >= 12
            call KillUnit(LoadUnitHandle(YDHT, p, 5 + i))
            if GetUnitAbilityLevel(udg_miejuedanwei, 'A089') >= 1 then
                call KillUnit(LoadUnitHandle(YDHT, p, 17 + i))
            endif
            set i=i + 1
        endloop
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, p)
    endif
    set t=null
    set loc=null
    set u=null
endfunction
function MieJueJian takes nothing returns nothing
    local timer t= CreateTimer()
    local integer p= GetHandleId(t)
    local unit u= GetTriggerUnit()
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local integer i= 0
    local real a
    set a=Atan2(GetSpellTargetY() - y, GetSpellTargetX() - x)
    call SaveInteger(YDHT, p, 0, 0)
    call SaveReal(YDHT, p, 1, x)
    call SaveReal(YDHT, p, 2, y)
    call SaveReal(YDHT, p, 3, 30.0 * Cos(a))
    call SaveReal(YDHT, p, 4, 30.0 * Sin(a))
    loop
        exitwhen i >= 12
        set a=30.0 * i * bj_DEGTORAD
        call SaveUnitHandle(YDHT, p, 5 + i, CreateUnit(GetOwningPlayer(u), 'h00C', x + 150.0 * Cos(a), y + 150.0 * Sin(a), GetUnitFacing(u)))
        if GetUnitAbilityLevel(u, 'A089') >= 1 then
            call SaveUnitHandle(YDHT, p, 17 + i, CreateUnit(GetOwningPlayer(u), 'h00C', x + 150.0 * Cos(a), y + 150.0 * Sin(a), 0.0))
        endif
        // 在hashtable中你需要自己规划好整数路径的分配
        // 比如在这里, 5,6,...15,16 用于存储12个马甲
        set i=i + 1
    endloop
    set udg_miejuedanwei=u
     call WuGongShengChong(u , 'A0C5' , 250.)
    call TimerStart(t, 0.03, true, function On_Timer)
    set u=null
    set t=null
endfunction
//峨眉九阳功
function IsEMeiJiuYang takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A0C6' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function EMeiJiuYang_Condition takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit())
endfunction
function EMeiJiuYang_Action2 takes nothing returns nothing
 local timer t=GetExpiredTimer()
 local integer p=GetHandleId(t)
 local integer j=LoadInteger(YDHT, p, 2)
 local unit u=LoadUnitHandle(YDHT, p, 0)
 local unit uc=LoadUnitHandle(YDHT, p, 1)
 local real shanghai=0.
 local real shxishu=1. + GetUnitState(u, UNIT_STATE_MAX_MANA) / 500
 local unit l__ut=null
 local location loc=GetUnitLoc(u)
    // local real 
    // 倚天剑加成
    if UnitHasDenomWeapon(u , 'I00B') then
		set shxishu=shxishu * 4
	endif
	set shanghai=ShangHaiGongShi(u , uc , 45. , 45. , shxishu , 'A0C6')
	if uc != null and IsUnitEnemy(uc, GetOwningPlayer(u)) == true and IsUnitAliveBJ(uc) then
		call WuGongShangHai(u , uc , shanghai)
		call CreateNUnitsAtLoc(1, 'h00C', GetOwningPlayer(u), loc, bj_UNIT_FACING)
		set l__ut=bj_lastCreatedUnit
		call ShowUnitHide(l__ut)
		call UnitAddAbility(l__ut, 'ACcr')
		call IssueTargetOrderById(l__ut, $D00DD, uc)
        call UnitApplyTimedLife(l__ut, 'BHwe', 3.)
        // 封穴
        call WanBuff(u , uc , 11)
	else
	    call SetUnitState(uc, UNIT_STATE_MANA, GetUnitState(uc, UNIT_STATE_MANA) + 20)
    endif
    call SaveInteger(YDHT, p, 2, j + 1)
    if ( j >= 10 ) then
	    call PauseTimer(t)
	    call DestroyTimer(t)
	    call FlushChildHashtable(YDHT, p)
    endif
    call RemoveLocation(loc)
    set loc=null
    set t=null
    set u=null
    set uc=null
    set l__ut=null
endfunction
function EMeiJiuYang_Action takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local unit uc=GetEnumUnit()
 local timer t=CreateTimer()
    local integer p=GetHandleId(t)
    call SaveUnitHandle(YDHT, p, 0, u)
    call SaveUnitHandle(YDHT, p, 1, uc)
    call SaveInteger(YDHT, p, 2, 1)
    call TimerStart(t, 1., true, function EMeiJiuYang_Action2)
    set u=null
    set t=null
    set uc=null
endfunction
function EMeiJiuYang takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local player p=GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local group g=CreateGroup()
 local real r=500.
 local real x=GetUnitX(u)
 local real y=GetUnitY(u)
	call WuGongShengChong(u , 'A0C6' , 200.)
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		set r=r + 300.
	endif
	if GetUnitAbilityLevel(u, 'A083') >= 1 then
		call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 0 , 20)
	endif
    if isTitle(i , 20) then // 小东邪
call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 0 , 20)
        set r=r + 500.
    endif
    call GroupEnumUnitsInRange(g, x, y, r, Condition(function EMeiJiuYang_Condition))
    call ForGroupBJ(g, function EMeiJiuYang_Action)
    call GroupClear(g)
    call DestroyGroup(g)
    set u=null
    set p=null
    set g=null
endfunction
//--------峨眉结束--------//
function EMei_Trigger takes nothing returns nothing
	
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsSiXiang))
	call TriggerAddAction(t, function SiXiangZhang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsFoGuang))
	call TriggerAddAction(t, function FoGuangZhang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsEMeiJiuYang))
	call TriggerAddAction(t, function EMeiJiuYang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsJinDing))
	call TriggerAddAction(t, function JinDingZhang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsMieJue))
	call TriggerAddAction(t, function MieJueJian)
	
	set t=null
endfunction
//--------武当开始--------//
//柔云掌
function IsRouYun takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A04D') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and GetRandomReal(0., 100.) <= 15.
endfunction
function RouYunZhang takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(GetTriggerUnit())
	call WuGongShengChong(u , 'A04D' , 500.)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    call UnitAddAbility(bj_lastCreatedUnit, 'A08P')
    call ShowUnitHide(bj_lastCreatedUnit)
    call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0208, loc)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
    call RemoveLocation(loc)
    set u=null
    set loc=null
endfunction
function Xc takes nothing returns boolean
	return ( ( GetEventDamage() == .41 ) )
endfunction
function Yc takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    local location loc=GetUnitLoc(uc)
    if GetUnitAbilityLevel(u, 'A08Q') != 0 then
        set shxishu=shxishu + .5
    endif
    if GetUnitAbilityLevel(u, 'A071') != 0 then
        set shxishu=shxishu + .7
    endif
    if GetUnitAbilityLevel(u, 'A06H') != 0 then
        set shxishu=shxishu + .7
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DK') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 14 , 30 , shxishu , 'A04D')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) and ( GetUnitAbilityLevel(u, 1093678932) != 0 ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
        call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call UnitAddAbility(bj_lastCreatedUnit, 1093678412)
        call ShowUnitHide(bj_lastCreatedUnit)
        call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
    endif
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
//绕指柔剑法
function dD takes nothing returns boolean
	return ( ( GetEventDamage() == .42 ) )
endfunction
function eD takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    local location loc=GetUnitLoc(uc)
    if ( ( GetUnitAbilityLevel(u, 'A08Q') != 0 ) ) then
        set shxishu=shxishu + .5
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) ) then
        set shxishu=shxishu + .7
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DK') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 60 , 120 , shxishu , 'A08S')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) and ( GetRandomInt(1, 100) <= 30 ) and ( UnitHasBuffBJ(uc, 1111844210) == false ) ) then
        call WanBuff(u , uc , 8)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A06M') != 0 ) and ( GetRandomInt(1, 100) <= 30 ) and ( UnitHasBuffBJ(uc, 1110454323) == false ) ) then
         call WanBuff(u , uc , 3)
    endif
    call RemoveLocation(loc)
    call WuGongShengChong(u , 'A08S' , 500.)
    set u=null
    set uc=null
    set loc=null
endfunction
//太极拳
function gD takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A08R' ) )
endfunction
function hD takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function iD takes nothing returns nothing
 local unit u=GetTriggerUnit()
    local unit uc=GetEnumUnit()
    local real shxishu=1.
    local real shanghai=0.
    local location loc=GetUnitLoc(uc)
    if ( ( GetUnitAbilityLevel(u, 'A08V') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07Q') != 0 ) ) then
        set shxishu=shxishu + .8
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DK') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 150. , 150. , shxishu , 'A08R')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 'A06L') != 0 ) and ( GetRandomInt(1, 100) <= 50 ) and ( UnitHasBuffBJ(uc, 'B002') == false ) ) then
        call WanBuff(u , uc , 1)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) and ( GetRandomInt(1, 100) <= 50 ) and ( UnitHasBuffBJ(uc, 1112896364) == false ) ) then
        call WanBuff(u , uc , 5)
    endif
    call RemoveLocation(loc)
    set loc=null
    set u=null
    set uc=null
endfunction
function jD takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
    local location loc=GetUnitLoc(u)
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=60
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call DestroyEffect((AddSpecialEffectLocBJEx(pu(loc , 400. , ( I2R(bj_forLoopAIndex) * 6. )) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))) // INLINED!!
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=20
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call DestroyEffect((AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 0) , 40. , ( I2R(bj_forLoopAIndex) * 18. )) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))) // INLINED!!
        call DestroyEffect((AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 180.) , 40. , ( I2R(bj_forLoopAIndex) * 18. )) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))) // INLINED!!
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set bj_forLoopBIndex=1
    set bj_forLoopBIndexEnd=30
    loop
        exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
        call DestroyEffect((AddSpecialEffectLocBJEx(pu(pu(loc , 200. , .0) , 200. , ( I2R(bj_forLoopBIndex) * 6. )) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))) // INLINED!!
        call DestroyEffect((AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 180.) , 200. , ( ( I2R(bj_forLoopBIndex) * 6. ) + 180. )) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))) // INLINED!!
        set bj_forLoopBIndex=bj_forLoopBIndex + 1
    endloop
    call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500. , loc , Condition(function hD)), function iD)
    call WuGongShengChong(u , 'A08R' , 150)
    call RemoveLocation(loc)
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DK') then
	    // 每次触发太极拳，绝学加1
		set juexuelingwu[i]=juexuelingwu[i] + 1
		call DisplayTextToPlayer(p, 0, 0, "绝学领悟力+1")
    endif
	// 张三丰称号
	if isTitle(i , 22) then
	    // 每次触发太极拳，绝学加1
		set juexuelingwu[i]=juexuelingwu[i] + 1
		call DisplayTextToPlayer(p, 0, 0, "绝学领悟力+1")
    endif
	
	
    set u=null
	set p=null
    set loc=null
endfunction
//纯阳无级功
function mD takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A08Q' )
endfunction
function nD takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local unit u= LoadUnitHandle(YDHT, p, 0)
 local location loc= GetUnitLoc(u)
	if ( ( LoadReal(YDHT, p, 1) >= 2000. ) ) then
		call FlushChildHashtable(YDHT, p)
		call DestroyTimer(t)
	else
		call SaveReal(YDHT, p, 1, LoadReal(YDHT, p, 1) + 10.)
		call CreateNUnitsAtLoc(1, 'e00U', GetOwningPlayer(u), loc, bj_UNIT_FACING)
		call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
		call RemoveLocation(loc)
	endif
	set t=null
	set u=null
	set loc=null
endfunction
function IsChunYangHuo takes nothing returns boolean
	return ( GetEventDamage() == 5.17 ) and ( GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )], 'A08Q') >= 1 or GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )], 'A035') >= 1 )
endfunction
function ChunYangHuo takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
 local real shanghai=0.
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DK') then
	    set shxishu=shxishu * 2
    endif
    //call BJDebugMsg("伤害执行了1")
    if GetUnitAbilityLevel(u, 'A08Q') >= 1 then
    	set shanghai=ShangHaiGongShi(u , uc , 65 , 75 , shxishu , 'A08Q')
    	//圣火令神功
    elseif GetUnitAbilityLevel(u, 'A035') >= 1 then
    	//call BJDebugMsg("伤害执行了2")
    	set shanghai=ShangHaiGongShi(u , uc , 15 , 20 , shxishu , 'A035')
	endif
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
function oD takes nothing returns nothing
 local timer t= CreateTimer()
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= GetPlayerId(p)
 local location loc= null
	call SetUnitManaBJ(u, GetUnitState(u, UNIT_STATE_MANA) + I2R(100 * ( yishu[i] / 10 + GetUnitAbilityLevel(u, 'A08Q') )))
	if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) ) then
		set loc=GetUnitLoc(u)
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A08T')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, u)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(loc)
	endif
	if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) ) then
		set loc=GetUnitLoc(u)
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093679189)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0085, u)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call TimerStart(t, .05, true, function nD)
		call RemoveLocation(loc)
	endif
	call WuGongShengChong(u , 'A08Q' , 250.)
	set t=null
	set u=null
	set p=null
	set loc=null
endfunction
function qD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08Q') != 0 ) and ( GetSpellAbilityId() != 'A05R' ) and ( GetSpellAbilityId() != 'A08V' ) and ( GetSpellAbilityId() != 'A08X' ) ) and ( GetSpellAbilityId() != 'AIha' )
endfunction
function rD takes nothing returns nothing
 local unit u= GetTriggerUnit()
	call ModifyHeroStat(1, u, 0, 50)
	call YDWEPolledWaitNull(60.)
	call ModifyHeroStat(1, u, 1, 50)
	set u=null
endfunction
function tD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A08Q') != 0 and UnitHasBuffBJ(GetAttacker(), 'B00I') ) or ( GetUnitAbilityLevel(GetAttacker(), 'A08R') != 0 and GetUnitAbilityLevel(GetAttacker(), 'A09D') != 0 ) ) and GetRandomInt(1, 30) <= 5
endfunction
function uD takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function vD takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetEnumUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real shxishu=1.
 local real shanghai=0.
    if ( ( GetUnitAbilityLevel(u, 'A08V') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07Q') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
	// 专属概率加成
	if GetRandomInt(1, 100) <= 3 then
		if UnitHasDenomWeapon(u , 'I0DK') then
			// 每次触发太极拳，绝学加1
			set juexuelingwu[i]=juexuelingwu[i] + 1
			call DisplayTextToPlayer(p, 0, 0, "绝学领悟力+1")
		endif
	endif
	
    set shanghai=ShangHaiGongShi(u , uc , 50 , 50 , shxishu , 'A08R')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
	set p=null
endfunction
function wD takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
 local integer i=1
	set i=1
	loop
		exitwhen i > 60
		call AddSpecialEffectLocBJEx(pu(loc , 400. , I2R(i) * 6.) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set i=i + 1
	endloop
	set i=1
	loop
		exitwhen i > 20
		call AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 0) , 40. , I2R(i) * 18.) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		call AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 180.) , 40. , I2R(i) * 18.) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set i=i + 1
	endloop
	set i=1
	loop
		exitwhen i > 30
		call AddSpecialEffectLocBJEx(pu(pu(loc , 200. , .0) , 200. , I2R(i) * 6.) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		call AddSpecialEffectLocBJEx(pu(pu(loc , 200. , 180.) , 200. , I2R(i) * 6. + 180.) , "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set i=i + 1
	endloop
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500. , loc , Condition(function uD)), function vD)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function yD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A071') != 0 ) and ( GetUnitAbilityLevel(GetAttacker(), 'A08Q') != 0 ) and ( GetRandomInt(1, 30) <= 3 ) )
endfunction
function zD takes nothing returns nothing
	call WanBuff(GetAttacker() , GetTriggerUnit() , 6)
endfunction
function aD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0DN') != 0 ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08Q') != 0 ) and ( GetRandomInt(1, 20) <= 2 ) )
endfunction
function BD takes nothing returns nothing
	call WanBuff(GetTriggerUnit() , GetAttacker() , 1)
endfunction
//混沌一气
function CD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08V') != 0 ) )
endfunction
function cD takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
		set Cd[i]=( Cd[i] + 1 )
		if ( ( Cd[i] >= 300 ) ) then
			set Cd[i]=0
			call YDWEGeneralBounsSystemUnitSetBonus(u , 1 , 0 , 20)
			call DisplayTextToPlayer(p, 0, 0, "魔法上限+20")
		endif
	endif
	call WuGongShengChong(u , 'A08V' , 4000)
	set u=null
	set p=null
endfunction
function ED takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A08V') != 0 ) and ( GetUnitAbilityLevel(GetAttacker(), 1093678930) != 0 ) and ( GetUnitAbilityLevel(GetAttacker(), 1093678935) != 0 ) and ( GetRandomInt(1, 100) <= 10 ) )
endfunction
function FD takes nothing returns nothing
	call WanBuff(GetAttacker() , GetTriggerUnit() , 2)
endfunction
function HD takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08V') != 0 ) and ( GetSpellAbilityId() != 'A05R' ) and ( GetSpellAbilityId() != 'A08V' ) and ( GetSpellAbilityId() != 'A08X' ) and ( GetSpellAbilityId() != 'AIha' )
endfunction
function ID takes nothing returns nothing
	call YDWEPolledWaitNull(.2)
	call SetUnitManaBJ(GetTriggerUnit(), GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) + 100.)
endfunction
// 混沌一气+九阳+小无相 使用主动技能的时候几率清空所有技能CD
function JD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08V') != 0 ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 'A083') != 0 ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0DN') != 0 ) and GetSpellAbilityId() != BI_BO_XIN_JING and ( GetSpellAbilityId() != 'A05R' ) and ( GetSpellAbilityId() != 'A08V' ) and ( GetSpellAbilityId() != 'A08X' ) and ( GetSpellAbilityId() != 'AIha' ) and ( GetRandomInt(1, 20) <= 3 ) )
endfunction
function KD takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call UnitResetCooldown(u)
	call AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\Avatar\\AvatarCaster.mdl")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function MD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A08V') != 0 ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 'A07Q') != 0 ) )
endfunction
function ND takes nothing returns nothing
	call UnitDamageTarget(GetTriggerUnit(), GetEventDamageSource(), ( GetEventDamage() * 10. ), true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endfunction
//--------武当结束--------//
function WuDang_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsRouYun))
	call TriggerAddAction(t, function RouYunZhang)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function Xc))
	call TriggerAddAction(t, function Yc)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function dD))
	call TriggerAddAction(t, function eD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function gD))
	call TriggerAddAction(t, function jD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function mD))
	call TriggerAddAction(t, function oD)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsChunYangHuo))
	call TriggerAddAction(t, function ChunYangHuo)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function qD))
	call TriggerAddAction(t, function rD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function tD))
	call TriggerAddAction(t, function wD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function yD))
	call TriggerAddAction(t, function zD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function aD))
	call TriggerAddAction(t, function BD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function CD))
	call TriggerAddAction(t, function cD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function ED))
	call TriggerAddAction(t, function FD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function HD))
	call TriggerAddAction(t, function ID)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function JD))
	call TriggerAddAction(t, function KD)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function MD))
	call TriggerAddAction(t, function ND)
	set t=null
endfunction
//--------华山开始--------//
//冲灵剑法
function PD takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A08W') >= 1 ) and ( GetRandomReal(.0, 100.) <= ( 26. + ( 2. * I2R(GetUnitAbilityLevel(GetAttacker(), 'A08W')) ) ) ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function QD takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local location loc=GetUnitLoc(uc)
 local real shxishu=1. + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(u))]) / 20.
 local real shanghai=0.
    if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    call DestroyEffect((AddSpecialEffectLocBJEx(loc , "war3mapImported\\Mjolnir.mdx"))) // INLINED!!
    if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1113813619) == false ) ) then
        call WanBuff(u , uc , 10)
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454324) == false ) ) then
        call WanBuff(u , uc , 7)
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0E0') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 44 , 50 , shxishu , 'A08W')
    call WuGongShangHai(u , uc , shanghai)
    call WuGongShengChong(GetAttacker() , 'A08W' , 400)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
//夺命剑气诀
function SD takes nothing returns boolean
return ( ( GetEventDamage() == .43 ) )
endfunction
function TD takes nothing returns nothing
    local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1. + GetUnitState(u, UNIT_STATE_MAX_MANA) / 200.
    local real shanghai=0.
    local location loc=GetUnitLoc(uc)
    if GetUnitState(u, UNIT_STATE_MAX_MANA) >= 500 and GetUnitState(u, UNIT_STATE_MAX_MANA) < 1000 then
        set shxishu=1. + GetUnitState(u, UNIT_STATE_MAX_MANA) / 100.
    elseif GetUnitState(u, UNIT_STATE_MAX_MANA) >= 1000 then
        set shxishu=GetUnitState(u, UNIT_STATE_MAX_MANA) / 2.
    endif
    if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .7
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0E0') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 7. , 9. , shxishu , 'A08X')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) and ( GetRandomInt(1, 100) <= 20 ) and ( UnitHasBuffBJ(uc, 1113813619) == false ) ) then
        call WanBuff(u , uc , 10)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) and ( GetRandomInt(1, 100) <= 20 ) and ( UnitHasBuffBJ(uc, 1112437615) == false ) ) then
        call WanBuff(u , uc , 2)
    endif
    call RemoveLocation(loc)
    call WuGongShengChong(u , 'A08X' , 6000.)
    set u=null
    set uc=null
    set loc=null
endfunction
//狂风快剑
function VD takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A08Y') != 0 ) and ( UnitHasBuffBJ(GetAttacker(), 1110454329) ) and ( GetRandomReal(0, 100) <= 20 + 2 * I2R(GetUnitAbilityLevel(GetAttacker(), 'A07U')) )
endfunction
function WD takes nothing returns nothing
 local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local unit l__ut= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 1697656882, p, loc, bj_UNIT_FACING)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 8.)
	call Yv(bj_lastCreatedUnit , u , 2. , 1. , .0 , 10. , .03)
	if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) ) then
		call CreateNUnitsAtLoc(1, 1697656882, p, loc, bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 8.)
		call Yv(bj_lastCreatedUnit , u , 2. , 1. , .0 , 10. , .03)
	endif
	call WuGongShengChong(u , 'A08Y' , 250.)
	call RemoveLocation(loc)
	set u=null
	set l__ut=null
	set p=null
	set loc=null
endfunction
function YD takes nothing returns boolean
	return ( ( GetEventDamage() == .44 ) )
endfunction
function ZD takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .5
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0E0') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 20 , 20 , shxishu , 'A08Y')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//紫霞功
function Trig_arc_Conditions takes nothing returns boolean
    return GetSpellAbilityId() == 'A037'
endfunction
function arc_Actions2 takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local real i= (LoadReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit u=(LoadUnitHandle(YDHT, StringHash(("unit" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit uc=(LoadUnitHandle(YDHT, StringHash(("unit1" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit l__ut=(LoadUnitHandle(YDHT, StringHash(("unit2" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local real x1= GetUnitX(uc)
    local real y1= GetUnitY(uc)
    local real k=(LoadReal(YDHT, StringHash(("realK" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local real s= SquareRoot(( x - x1 ) * ( x - x1 ) + ( y - y1 ) * ( y - y1 ))
    local real r=s / k
    local real h=s * CosBJ(k * 3 + 30) * SinBJ(i * 3) / 2 + 50
    local real r1=i * ( s - 2 * r ) / 60 + r
    local real x2= x - r * CosBJ(YDWEAngleBetweenUnits(uc , u))
    local real y2= y - r * SinBJ(YDWEAngleBetweenUnits(uc , u))
    local real xx3= x2 + r1 * CosBJ(YDWEAngleBetweenUnits(uc , u) + i * (LoadReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t))))))))) // INLINED!!
    local real yy3= y2 + r1 * SinBJ(YDWEAngleBetweenUnits(uc , u) + i * (LoadReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t))))))))) // INLINED!!
    local real shxishu= 1. + danpo[1 + GetPlayerId(GetOwningPlayer(u))] / 20.
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0E0') then
	    set shxishu=shxishu * 2
    endif
    set i=i + 1
    if i >= 60 or IsTerrainPathable(xx3, yy3, PATHING_TYPE_FLYABILITY) == true then
    // 此处为伤害值
		set shanghai=ShangHaiGongShi(u , uc , 10 , 8 , shxishu , 'A037')
		call WuGongShangHai(u , uc , shanghai)
		if GetRandomPercentageBJ() <= 20 and GetUnitAbilityLevel(u, 'A07P') >= 1 then
			call WanBuff(u , uc , 12)
		endif
        call RemoveUnit(l__ut)
        call PauseTimer(t)
        call DestroyTimer(t)
    else
        call SaveReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))) )), (( i)*1.0)) // INLINED!!
        call SetUnitX(l__ut, xx3)
        call SetUnitY(l__ut, yy3)
        call SetUnitFlyHeight(l__ut, h, 999999)
    endif
    set t=null
    set u=null
    set uc=null
    set l__ut=null
endfunction
function arc_Actions3 takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local real i= (LoadReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit u=(LoadUnitHandle(YDHT, StringHash(("unit" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit uc=(LoadUnitHandle(YDHT, StringHash(("unit1" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local unit l__ut=(LoadUnitHandle(YDHT, StringHash(("unit2" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local real x1= GetUnitX(uc)
    local real y1= GetUnitY(uc)
    local real k=(LoadReal(YDHT, StringHash(("realK" )), StringHash(( I2S((GetHandleId((t)))))))) // INLINED!!
    local real s= SquareRoot(( x - x1 ) * ( x - x1 ) + ( y - y1 ) * ( y - y1 ))
    local real r=s / 10 * k
    local real h=s * CosBJ(k * 3) * SinBJ(i * 3) / 2 + 50
    local real a=Atan2BJ(s / 2, r) / ( (LoadReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t)))))))) * - 10 ) // INLINED!!
    local real r1=SquareRoot(( s / 2 ) * ( s / 2 ) + r * r)
    local real x2= x - r1 * CosBJ(YDWEAngleBetweenUnits(uc , u) + Atan2BJ(r, s / 2) * (LoadReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t)))))))) / 3) // INLINED!!
    local real y2= y - r1 * SinBJ(YDWEAngleBetweenUnits(uc , u) + Atan2BJ(r, s / 2) * (LoadReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t)))))))) / 3) // INLINED!!
    local real xx3= x2 + r1 * CosBJ(Atan2BJ(( y - y2 ), ( x - x2 )) - i * a)
    local real yy3= y2 + r1 * SinBJ(Atan2BJ(( y - y2 ), ( x - x2 )) - i * a)
    local real shxishu= 1. + danpo[1 + GetPlayerId(GetOwningPlayer(u))] / 20.
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    set i=i + 1
    if i >= 60 or IsTerrainPathable(xx3, yy3, PATHING_TYPE_FLYABILITY) == true then
    // 此处为伤害值
    	set shanghai=ShangHaiGongShi(u , uc , 10 , 8 , shxishu , 'A037')
		call WuGongShangHai(u , uc , shanghai)
		if GetRandomPercentageBJ() <= 20 and GetUnitAbilityLevel(u, 'A07P') >= 1 then
			call WanBuff(u , uc , 12)
		endif
        call UnitDamageTarget(u, uc, I2R(GetHeroStr(u, false)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
        call RemoveUnit(l__ut)
        call PauseTimer(t)
        call DestroyTimer(t)
    else
        call SaveReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))) )), (( i)*1.0)) // INLINED!!
        call SetUnitX(l__ut, xx3)
        call SetUnitY(l__ut, yy3)
        call SetUnitFlyHeight(l__ut, h, 999999)
    endif
    set t=null
    set u=null
    set uc=null
    set l__ut=null
endfunction
function arc_Actions1 takes nothing returns nothing
    local timer tm= GetExpiredTimer()
    local timer t= CreateTimer()
    local unit u=(LoadUnitHandle(YDHT, StringHash(("unit" )), StringHash(( I2S((GetHandleId((tm)))))))) // INLINED!!
    local unit uc=(LoadUnitHandle(YDHT, StringHash(("unit1" )), StringHash(( I2S((GetHandleId((tm)))))))) // INLINED!!
    // 修改创建单位ID 'e015'
    local unit l__ut=CreateUnit(GetOwningPlayer(u), 'e015', GetUnitX(u), GetUnitY(u), 0)
    local real i= (LoadReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((tm)))))))) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash(("unit" )), StringHash(( I2S((GetHandleId((t)))) )), ( u)) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash(("unit1" )), StringHash(( I2S((GetHandleId((t)))) )), ( uc)) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash(("unit2" )), StringHash(( I2S((GetHandleId((t)))) )), ( l__ut)) // INLINED!!
    call SaveReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))) )), (( 0)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash(("realK" )), StringHash(( I2S((GetHandleId((t)))) )), (( GetRandomReal(1, 10))*1.0)) // INLINED!!
    if GetRandomPercentageBJ() >= 50 then
        call SaveReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t)))) )), (( - 3)*1.0)) // INLINED!!
    else
        call SaveReal(YDHT, StringHash(("realJ" )), StringHash(( I2S((GetHandleId((t)))) )), (( 3)*1.0)) // INLINED!!
    endif
    if GetRandomPercentageBJ() >= 50 then
        call TimerStart(t, 0.02, TRUE, function arc_Actions3)
    else
        call TimerStart(t, 0.02, TRUE, function arc_Actions2)
    endif
    set t=null
    set u=null
    set uc=null
    set l__ut=null
    set i=i + 1
    // 此处为单位个数。现在为60(攻击轨道个数)
    if i >= 40 then
        call PauseTimer(tm)
        call DestroyTimer(tm)
    else
         call SaveReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((tm)))) )), (( i)*1.0)) // INLINED!!
endif
    set tm=null
endfunction
function Trig_arc_Actions takes nothing returns nothing
 local unit u= GetTriggerUnit()
    local timer t= CreateTimer()
    call WuGongShengChong(u , 'A037' , 160)
    call SaveUnitHandle(YDHT, StringHash(("unit" )), StringHash(( I2S((GetHandleId((t)))) )), ( GetTriggerUnit())) // INLINED!!
    call SaveUnitHandle(YDHT, StringHash(("unit1" )), StringHash(( I2S((GetHandleId((t)))) )), ( GetSpellTargetUnit())) // INLINED!!
    call SaveReal(YDHT, StringHash(("real" )), StringHash(( I2S((GetHandleId((t)))) )), (( 0)*1.0)) // INLINED!!
    call TimerStart(t, 0.02, TRUE, function arc_Actions1)
    set t=null
    set u=null
endfunction
//===========================================================================
//function eE takes nothing returns boolean
//	return((GetSpellAbilityId()=='A037'))
//endfunction
//function fE takes nothing returns boolean
//	return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))
//endfunction
//function gE takes nothing returns nothing
//	call GroupAddUnit(Fd[(1+GetPlayerId(GetTriggerPlayer()))],GetEnumUnit())
//endfunction
//function hE takes nothing returns boolean
//	return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))
//endfunction
//function iE takes nothing returns nothing
//	call GroupAddUnit(Fd[(1+GetPlayerId(GetTriggerPlayer()))],GetEnumUnit())
//endfunction
//function jE takes nothing returns nothing
//	local unit u = GetTriggerUnit()
//	local player p = GetOwningPlayer(u)
//	local integer i = 1 + GetPlayerId(p)
//	local location loc = GetUnitLoc(u)
//	local integer j = 0
//	local string no1 = null
//	local string no2 = null
//	local string no3 = null
//	local string no4 = null
//	local string no5 = null
//	local string no6 = null
//	local string no7 = null
//	local integer num = 0
//	call PauseUnit(u,true)
//	call WuGongShengChong(GetTriggerUnit(),'A037',160.)
//	set cd[i]=true
//	set j =  GetRandomInt(1, 4)
//	if(j==1) then
//		set no1 = "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no1 = "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no1 = "|cff00ff66 ← "
//	else
//		set no1 = "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no2 = no1 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no2 = no1 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no2 = no1 + "|cff00ff66 ← "
//	else
//		set no2 = no1 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no3 = no2 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no3 = no2 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no3 = no2 + "|cff00ff66 ← "
//	else
//		set no3 = no2 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no4 = no3 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no4 = no3 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no4 = no3 + "|cff00ff66 ← "
//	else
//		set no4 = no3 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no5 = no4 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no5 = no4 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no5 = no4 + "|cff00ff66 ← "
//	else
//		set no5 = no4 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no6 = no5 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no6 = no5 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no6 = no5 + "|cff00ff66 ← "
//	else
//		set no6 = no5 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set j =  GetRandomInt(1, 4)
//	if(j==1)then
//		set no7 = no6 + "|cff00ff66 ↑ "
//	elseif(j==2)then
//		set no7 = no6 + "|cff00ff66 ↓ "
//	elseif(j==3)then
//		set no7 = no6 + "|cff00ff66 ← "
//	else
//		set no7 = no6 + "|cff00ff66 → "
//	endif
//	set num = num*10 + j
//	set Dd[i]=num
//	set Ed[i]=$F4240
//	call DisplayTimedTextToPlayer(p,0,0,30,"请按下列顺序输入键盘指令，则可以提高紫霞功的伤害倍数："+no7)
//	if((GetUnitAbilityLevel(u,1093678930)!=0))then
//		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800.,loc,Condition(function hE)),function iE)
//	else
//		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.,loc,Condition(function fE)),function gE)
//	endif
//	if((GetUnitAbilityLevel(u,'A07P')!=0))then
//		call SetUnitInvulnerable(u,true)
//		call YDWEPolledWaitNull(3.)
//		call SetUnitInvulnerable(u,false)
//	endif
//	call RemoveLocation(loc)
//	set u = null
//	set p = null
//	set loc = null
//endfunction
//function mE takes nothing returns boolean
//	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
//endfunction
//function nE takes nothing returns nothing
//	local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
//	local unit uc=GetEnumUnit()
//	local location loc=GetUnitLoc(uc)
//	local integer i=1+GetPlayerId(GetOwningPlayer(u))
//	local real shxishu=1.
//	local real shanghai=0.
//    if((GetUnitAbilityLevel(u,1093678932)!=0))then
//        set shxishu=shxishu+.6
//    endif
//    if((GetUnitAbilityLevel(u,'A07S')!=0))then
//        set shxishu=shxishu+.8
//    endif
//    call DestroyEffectEx(AddSpecialEffectLocBJEx(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
//    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
//    call WuGongShangHai(u,uc,shanghai)
//    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
//        call WanBuff(u, uc, 12)
//    endif
//    call RemoveLocation(loc)
//    set u=null
//    set uc=null
//    set loc=null
//endfunction
//function oE takes nothing returns nothing
//	local player p = GetTriggerPlayer()
//	local integer i = 1 + GetPlayerId(p)
//	local unit u = udg_hero[i]
//	if((Ed[i]==1))then
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==1)then
//			set Gd[i]=Gd[i]+3
//			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	else
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==1)then
//			set Gd[i]=(Gd[i]+3)
//			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
//			set Ed[i]=(Ed[i]/$A)
//			set u = null
//			set p = null
//			return
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	endif
//	call ForGroupBJ(Fd[i],function nE)
//	set Gd[i]=.0
//	set cd[i]=false
//	set Dd[i]=0
//	set Ed[i]=0
//	call GroupClear(Fd[i])
//	call PauseUnit(u,false)
//	set u = null
//	set p = null
//endfunction
//function qE takes nothing returns boolean
//	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
//endfunction
//function rE takes nothing returns nothing
//    local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
//	local unit uc=GetEnumUnit()
//	local location loc=GetUnitLoc(uc)
//	local integer i=1+GetPlayerId(GetOwningPlayer(u))
//	local real shxishu=1.
//	local real shanghai=0.
//    if((GetUnitAbilityLevel(u,1093678932)!=0))then
//        set shxishu=shxishu+.6
//    endif
//    if((GetUnitAbilityLevel(u,'A07S')!=0))then
//        set shxishu=shxishu+.8
//    endif
//    call DestroyEffectEx(AddSpecialEffectLocBJEx(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
//    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
//    call WuGongShangHai(u,uc,shanghai)
//    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
//        call WanBuff(u, uc, 12)
//    endif
//    call RemoveLocation(loc)
//    set u=null
//    set uc=null
//    set loc=null
//endfunction
//function sE takes nothing returns nothing
//	local player p = GetTriggerPlayer()
//	local integer i = 1 + GetPlayerId(p)
//	local unit u = udg_hero[i]
//	if((Ed[i]==1))then
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==2)then
//			set Gd[i]=Gd[i]+3
//			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	else
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==2)then
//			set Gd[i]=(Gd[i]+3)
//			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
//			set Ed[i]=(Ed[i]/$A)
//			set u = null
//			set p = null
//			return
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	endif
//	call ForGroupBJ(Fd[i],function nE)
//	set Gd[i]=.0
//	set cd[i]=false
//	set Dd[i]=0
//	set Ed[i]=0
//	call GroupClear(Fd[i])
//	call PauseUnit(u,false)
//	set u = null
//	set p = null
//endfunction
//function uE takes nothing returns boolean
//	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
//endfunction
//function vE takes nothing returns nothing
//    local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
//	local unit uc=GetEnumUnit()
//	local location loc=GetUnitLoc(uc)
//	local integer i=1+GetPlayerId(GetOwningPlayer(u))
//	local real shxishu=1.
//	local real shanghai=0.
//    if((GetUnitAbilityLevel(u,1093678932)!=0))then
//        set shxishu=shxishu+.6
//    endif
//    if((GetUnitAbilityLevel(u,'A07S')!=0))then
//        set shxishu=shxishu+.8
//    endif
//    call DestroyEffectEx(AddSpecialEffectLocBJEx(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
//    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
//    call WuGongShangHai(u,uc,shanghai)
//    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
//        call WanBuff(u, uc, 12)
//    endif
//    call RemoveLocation(loc)
//    set u=null
//    set uc=null
//    set loc=null
//endfunction
//function wE takes nothing returns nothing
//	local player p = GetTriggerPlayer()
//	local integer i = 1 + GetPlayerId(p)
//	local unit u = udg_hero[i]
//	if((Ed[i]==1))then
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==3)then
//			set Gd[i]=Gd[i]+3
//			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	else
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==3)then
//			set Gd[i]=(Gd[i]+3)
//			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
//			set Ed[i]=(Ed[i]/$A)
//			set u = null
//			set p = null
//			return
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	endif
//	call ForGroupBJ(Fd[i],function nE)
//	set Gd[i]=.0
//	set cd[i]=false
//	set Dd[i]=0
//	set Ed[i]=0
//	call GroupClear(Fd[i])
//	call PauseUnit(u,false)
//	set u = null
//	set p = null
//endfunction
//function yE takes nothing returns boolean
//	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
//endfunction
//function zE takes nothing returns nothing
//	local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
//	local unit uc=GetEnumUnit()
//	local location loc=GetUnitLoc(uc)
//	local integer i=1+GetPlayerId(GetOwningPlayer(u))
//	local real shxishu=1.
//	local real shanghai=0.
//    if((GetUnitAbilityLevel(u,1093678932)!=0))then
//        set shxishu=shxishu+.6
//    endif
//    if((GetUnitAbilityLevel(u,'A07S')!=0))then
//        set shxishu=shxishu+.8
//    endif
//    call DestroyEffectEx(AddSpecialEffectLocBJEx(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
//    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
//    call WuGongShangHai(u,uc,shanghai)
//    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
//        call WanBuff(u, uc, 12)
//    endif
//    call RemoveLocation(loc)
//    set u=null
//    set uc=null
//    set loc=null
//endfunction
//function AE takes nothing returns nothing
//	local player p = GetTriggerPlayer()
//	local integer i = 1 + GetPlayerId(p)
//	local unit u = udg_hero[i]
//	if((Ed[i]==1))then
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==4)then
//			set Gd[i]=Gd[i]+3
//			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	else
//		if(ModuloInteger(Dd[i]/Ed[i],$A)==4)then
//			set Gd[i]=(Gd[i]+3)
//			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
//			set Ed[i]=(Ed[i]/$A)
//			set u = null
//			set p = null
//			return
//		else
//			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
//		endif
//	endif
//	call ForGroupBJ(Fd[i],function nE)
//	set Gd[i]=.0
//	set cd[i]=false
//	set Dd[i]=0
//	set Ed[i]=0
//	call GroupClear(Fd[i])
//	call PauseUnit(u,false)
//	set u = null
//	set p = null
//endfunction
//混元功
function BE takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A091' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function bE takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function CE takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local unit uc=GetEnumUnit()
 local location loc=GetUnitLoc(uc)
 local integer i=1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu=1.
 local real shanghai=0.
	if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) ) then
        set shxishu=shxishu + .5
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl"))) // INLINED!!
    call RemoveLocation(loc)
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0E0') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 200. , 300. , shxishu , 'A091')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
    set loc=null
endfunction
function cE takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
 local integer j= jingmai[i] / 5
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600. , loc , Condition(function bE)), function CE)
	call WuGongShengChong(GetTriggerUnit() , 'A091' , 100.)
	call RemoveLocation(loc)
	set juexuelingwu[i]=juexuelingwu[i] + j
	call DisplayTextToPlayer(p, 0, 0, "绝学领悟力+" + I2S(j))
	call YDWEPolledWaitNull(10.)
	set juexuelingwu[i]=juexuelingwu[i] - j
	call DisplayTextToPlayer(p, 0, 0, "绝学领悟力-" + I2S(j))
	set u=null
	set p=null
	set loc=null
endfunction
//--------华山结束--------//
function HuaShan_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function PD))
	call TriggerAddAction(t, function QD)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function SD))
	call TriggerAddAction(t, function TD)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function VD))
	call TriggerAddAction(t, function WD)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function YD))
	call TriggerAddAction(t, function ZD)
	set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function Trig_arc_Conditions))
    call TriggerAddAction(t, function Trig_arc_Actions)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function BE))
	call TriggerAddAction(t, function cE)
	set t=null
endfunction
//--------星宿开始--------//
//星宿逍遥掌
function p3 takes nothing returns boolean
    return ( ( GetUnitAbilityLevel(GetAttacker(), 'A0BP') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function q3 takes nothing returns boolean
    local integer id= GetHandleId(GetTriggeringTrigger())
    return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function r3 takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= 1.
 local real shanghai= 0.
    call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"))) // INLINED!!
    if ( ( GetUnitAbilityLevel(u, 'A0BT') != 0 ) and ( GetRandomReal(.0, 100.) <= 8. ) ) then
        call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 1093678900)
        call IssueTargetOrderById(bj_lastCreatedUnit, $D022F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3.)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0BV') != 0 ) ) then
        set shxishu=shxishu + .5
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if UnitHasDenomWeapon(u , 'I0AM') then
        set shxishu=shxishu * 1.8
    endif
    set shanghai=ShangHaiGongShi(u , uc , 20.3 , 20.3 , shxishu , 'A0BP')
    call WuGongShangHai(u , uc , shanghai)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
function s3 takes nothing returns nothing
    local integer id= GetHandleId(GetTriggeringTrigger())
    local integer cx= LoadInteger(YDHT, id, - $3021938A)
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call YDWELocalVariableInitiliation()
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
    call SaveLocationHandle(YDHT, id * cx, - $3348E012, GetUnitLoc(GetAttacker()))
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A0BP')
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07P') != 0 ) ) then
        call SaveReal(YDHT, id * cx, $2392447A, 35.)
    else
        call SaveReal(YDHT, id * cx, $2392447A, 23.)
    endif
    call SaveReal(YDHT, id * cx, $41713DA3, 450.)
    call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( 1 + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(danpo[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .05 ) ))
    call SaveReal(YDHT, id * cx, $1968F401, ( .9 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
    call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * LoadReal(YDHT, id * cx, $1968F401) ))
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)) == 9 ) ) then
        call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 10. ))
    endif
    if ( ( GetRandomReal(.0, 100.) <= LoadReal(YDHT, id * cx, $2392447A) ) ) then
        call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(LoadReal(YDHT, id * cx, $41713DA3) , LoadLocationHandle(YDHT, id * cx, - $72C3E060) , Condition(function q3)), function r3)
        call WuGongShengChong(GetAttacker() , 'A0BP' , 700.)
    endif
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
    call YDWELocalVariableEnd()
    call FlushChildHashtable(YDHT, id * cx)
endfunction
//三阴蜈蚣爪
function u3 takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A0BQ' ) )
endfunction
function v3 takes nothing returns nothing
    local integer id= GetHandleId(GetTriggeringTrigger())
    local integer cx= LoadInteger(YDHT, id, - $3021938A)
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
    call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetSpellTargetUnit())
    call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)))
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A0BQ')
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
    call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 120. , GetRandomReal(0, 360)))
    call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
        call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
    endif
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
    else
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
    endif
    call zw(bj_lastCreatedUnit , GetTriggerUnit() , 1. , 250. , 1000. , 1500. , 75)
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
    call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 120. , GetRandomReal(0, 360)))
    call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
        call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
    endif
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
    else
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
    endif
    call zw(bj_lastCreatedUnit , GetTriggerUnit() , 1. , 250. , 1000. , 1500. , 75)
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
    call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 120. , GetRandomReal(0, 360)))
    call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
        call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
    endif
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
    else
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
    endif
    call zw(bj_lastCreatedUnit , GetTriggerUnit() , 1. , 250. , 1000. , 1500. , 75)
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07U') != 0 ) ) then
        call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
        call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 120. , GetRandomReal(0, 360)))
        call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
            call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
        endif
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
        else
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
        endif
        call zw(bj_lastCreatedUnit , GetTriggerUnit() , 1. , 250. , 1000. , 1500. , 75)
        call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
        call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
        call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
        call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 120. , GetRandomReal(0, 360)))
        call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
            call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
        endif
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
        else
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
        endif
        call zw(bj_lastCreatedUnit , GetTriggerUnit() , 1. , 250. , 1000. , 1500. , 75)
        call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
        call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
    endif
    call WuGongShengChong(GetTriggerUnit() , 'A0BQ' , 100.)
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call FlushChildHashtable(YDHT, id * cx)
endfunction
function x3 takes nothing returns boolean
    return ( ( GetUnitTypeId(GetAttacker()) == 1969451827 ) )
endfunction
function y3 takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )]
 local unit uc= GetTriggerUnit()
 local location loc2= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= 2.
 local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07A') != 0 ) and ( GetRandomReal(.0, 100.) <= 30. ) and ( UnitHasBuffBJ(uc, 1110454344) == false ) ) then
        call WanBuff(u , uc , 5)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) and ( GetUnitAbilityLevel(u, 'A089') != 0 ) and ( GetRandomReal(.0, 100.) <= 20. ) ) then
        call DestroyEffect((AddSpecialEffectLocBJEx(loc2 , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))) // INLINED!!
        if ( ( GetUnitAbilityLevel(u, 'A0BV') != 0 ) ) then
            set shxishu=shxishu + .5
        endif
        if UnitHasDenomWeapon(u , 'I0AM') then
            set shxishu=shxishu * 1.8
        endif
        if isTitle(i , 23) then
            set shxishu=shxishu * 4
        endif
        set shanghai=ShangHaiGongShi(u , uc , 16. , 16. , shxishu , 'A0BQ')
        call percentDamage(uc , 30 , false)
        call WuGongShangHai(u , uc , shanghai)
        call KillUnit(GetAttacker())
    else
        if ( ( GetRandomReal(.0, 100.) <= 35. ) ) then
            if ( ( GetUnitAbilityLevel(u, 'A0BV') != 0 ) ) then
                set shxishu=shxishu + .5
            endif
            if UnitHasDenomWeapon(u , 'I0AM') then
                set shxishu=shxishu * 1.8
            endif
            if isTitle(i , 23) then
                set shxishu=shxishu * 4
            endif
            set shanghai=ShangHaiGongShi(u , uc , 20. , 20. , shxishu , 'A0BQ')
            call WuGongShangHai(u , uc , shanghai)
        endif
    endif
    call RemoveLocation(loc2)
    set u=null
    set uc=null
    set loc2=null
endfunction
//神木王鼎+三阴
function IsShenDingSanYin takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I0AM' and GetUnitAbilityLevel(GetTriggerUnit(), 'A0BQ') >= 1 and isproducing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false
endfunction
function ShenDingSanYin_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
 local location loc2= pu(loc , 120 , GetRandomReal(0, 360))
	set isproducing[i]=false
	if UnitHasDenomWeapon(u , 'I0AM') then
		call CreateNUnitsAtLoc(1, 1969451827, p, loc2, bj_UNIT_FACING)
		if ( GetUnitAbilityLevel(u, 'A06P') != 0 ) then
			call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
		endif
		if ( GetUnitAbilityLevel(u, 'A07O') != 0 ) then
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
		else
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
		endif
		call zw(bj_lastCreatedUnit , u , 1. , 250. , 1000. , 1500. , 75)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set p=null
	set loc=null
	set loc2=null
endfunction
function ShenDingSanYin takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local timer t= CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	set isproducing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
	call TimerStart(t, 15, true, function ShenDingSanYin_1)
	set u=null
	set t=null
endfunction
//天山杖法
function A3 takes nothing returns boolean
    return ( ( GetEventDamage() == .51 ) )
endfunction
function a3 takes nothing returns nothing
    local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc= GetTriggerUnit()
    local real shxishu= 1.
    local real shanghai= 0.
    local location loc= GetUnitLoc(uc)
    if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
        set shxishu=shxishu + .7
    endif
    if ( ( GetUnitAbilityLevel(u, 'A084') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if UnitHasDenomWeapon(u , 'I0AM') then
        set shxishu=shxishu * 1.8
    endif
    call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl"))) // INLINED!!
    set shanghai=ShangHaiGongShi(u , uc , 100 , 100 , shxishu , 'A0BS')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1111844210) == false ) ) then
        call WanBuff(u , uc , 8)
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454344) == false ) ) then
        call WanBuff(u , uc , 5)
    endif
    call RemoveLocation(loc)
    call WuGongShengChong(u , 'A0BS' , 300.)
    set u=null
    set uc=null
    set loc=null
endfunction
//万毒噬骨术
function b3 takes nothing returns boolean
    return ( ( GetEventDamage() == .52 ) )
endfunction
function C3 takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc= GetTriggerUnit()
    local real shxishu= 1.
    local real shanghai= 0.
    local location loc= GetUnitLoc(uc)
    if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) ) then
        set shxishu=shxishu + .7
    endif
    if UnitHasDenomWeapon(u , 'I0AM') then
        set shxishu=shxishu * 1.8
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) and ( GetUnitAbilityLevel(u, 'A06L') != 0 ) and ( UnitHasBuffBJ(uc, 1110454324) == false ) and ( GetRandomReal(.0, 100.) <= 3. ) ) then
        call WanBuff(u , uc , 7)
    endif
    call WuGongShengChong(u , 'A0BT' , 3500.)
    call YDWEPolledWaitNull(.1)
    set shanghai=ShangHaiGongShi(u , uc , 10.8 , 10.8 , shxishu , 'A0BT')
    call WuGongShangHai(u , uc , shanghai)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
function D3 takes nothing returns boolean
    return ( ( GetUnitAbilityLevel(GetKillingUnit(), 'A0BT') != 0 ) )
endfunction
function E3 takes nothing returns nothing
    local integer id= GetHandleId(GetTriggeringTrigger())
    local integer cx= LoadInteger(YDHT, id, - $3021938A)
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) )])
    call SaveUnitHandle(YDHT, id * cx, $1168A3EE, GetTriggerUnit())
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A0BT')
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1395666994) != 0 ) and ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07A') != 0 ) and ( GetRandomReal(.0, 100.) <= 3. ) ) then
        call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $1168A3EE)))
        call CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06P') != 0 ) ) then
            call UnitAddAbility(bj_lastCreatedUnit, 1095656040)
        endif
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07O') != 0 ) ) then
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 70.)
        else
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 45.)
        endif
        call zw(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, $59BEA0CB) , 1. , 250. , 1000. , 1500. , 75)
        call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    endif
    call FlushChildHashtable(YDHT, id * cx)
endfunction
//星宿心法
function G3 takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A0BV' ) )
endfunction
function H3 takes nothing returns nothing
    if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 500. ) ) then
        call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
        call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 47. ))
        if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB), 1112504171) ) and ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB), 1093678935) != 0 ) and ( GetRandomInt(1, $A) <= 5 ) ) then
            call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)))
            call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), - $2A11C165, getHeroDummyId(GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))))
            call CreateNUnitsAtLoc(1, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), - $2A11C165), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F), bj_UNIT_FACING)
            call GroupAddUnit(Fe, bj_lastCreatedUnit)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
            call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
        endif
    endif
endfunction
function I3 takes nothing returns nothing
    local timer ky
    local integer id= GetHandleId(GetTriggeringTrigger())
    local integer cx= LoadInteger(YDHT, id, - $3021938A)
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
    call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
    call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
    call UnitAddAbility(bj_lastCreatedUnit, 'A0BW')
    call IssueTargetOrderById(bj_lastCreatedUnit, $D0065, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A0BV')
    call SaveInteger(YDHT, id * cx, - $2A11C165, getHeroDummyId(GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))))
    call CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, - $2A11C165), GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
    call GroupAddUnit(Fe, bj_lastCreatedUnit)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
    call WuGongShengChong(GetTriggerUnit() , 'A0BV' , 100.)
    set ky=CreateTimer()
    call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
    call TimerStart(ky, 1., true, function H3)
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
    call FlushChildHashtable(YDHT, id * cx)
    set ky=null
endfunction
function J3 takes nothing returns boolean
    return ( ( IsUnitInGroup(GetTriggerUnit(), Fe) ) )
endfunction
function K3 takes nothing returns boolean
    local integer id= GetHandleId(GetTriggeringTrigger())
    return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function L3 takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )]
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= 1.
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
        set shxishu=shxishu + .7
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if UnitHasDenomWeapon(u , 'I0AM') then
        set shxishu=shxishu * 1.8
    endif
    if isTitle(i , 23) then
        set shxishu=shxishu * 4
    endif
    set shanghai=ShangHaiGongShi(u , uc , 60. , 60. , shxishu , 'A0BV')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
function MM3 takes nothing returns nothing
    local integer id= GetHandleId(GetTriggeringTrigger())
    local integer cx= LoadInteger(YDHT, id, - $3021938A)
    local integer gailv= 80
// 星宿老仙，心法90%概率重生
if isTitle(1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) , 23) then
        set gailv=95
    endif
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call GroupRemoveUnit(Fe, GetTriggerUnit())
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) )])
    call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, GetTriggerUnit())
    call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)))
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A0BV')
    call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( .8 + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + 1. ))
    call SaveReal(YDHT, id * cx, $1968F401, ( 1.5 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
    call AddSpecialEffectLocBJEx(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , "war3mapImported\\DivineRing.mdx")
    call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
    call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(350. , LoadLocationHandle(YDHT, id * cx, - $72C3E060) , Condition(function K3)), function L3)
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A083') != 0 ) and ( GetRandomInt(1, 100) <= gailv ) ) then
        call SaveInteger(YDHT, id * cx, - $2A11C165, getHeroDummyId(GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))))
        call CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, - $2A11C165), GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
        call GroupAddUnit(Fe, bj_lastCreatedUnit)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
    endif
    call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
    call FlushChildHashtable(YDHT, id * cx)
endfunction
//--------星宿结束--------//
function XingXiu_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function p3))
	call TriggerAddAction(t, function s3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function u3))
	call TriggerAddAction(t, function v3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function x3))
	call TriggerAddAction(t, function y3)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function A3))
	call TriggerAddAction(t, function a3)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function b3))
	call TriggerAddAction(t, function C3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function D3))
	call TriggerAddAction(t, function E3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function G3))
	call TriggerAddAction(t, function I3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function J3))
	call TriggerAddAction(t, function MM3)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsShenDingSanYin))
	call TriggerAddAction(t, function ShenDingSanYin)
	set t=null
endfunction
//--------古墓开始--------//
//美女拳
function EE takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A09E') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function FE takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local location loc=GetUnitLoc(uc)
 local integer i=1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu=1.
 local real shanghai=0.
    if ( u == udg_hero[i] ) then
		// 双手加概率
        if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) ) then
            if ( ( GetRandomReal(.0, 100.) <= 70. ) ) then
                if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
                    set shxishu=shxishu + .6
                endif
                if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) ) then
                    set shxishu=shxishu + .8
                endif
                if UnitHasDenomWeapon(u , 'I09C') then
					set shxishu=shxishu * 4
				endif
                call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))) // INLINED!!
                if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
                    call WanBuff(u , uc , 11)
                endif
                set shanghai=ShangHaiGongShi(u , uc , 28. , 28. , shxishu , 'A09E')
                call WuGongShangHai(u , uc , shanghai)
                call WuGongShengChong(GetAttacker() , 'A09E' , 650)
            endif
        else
            if ( ( GetRandomReal(.0, 100.) <= 50. ) ) then
                if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
                    set shxishu=shxishu + .6
                endif
                if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) ) then
                    set shxishu=shxishu + .8
                endif
                if UnitHasDenomWeapon(u , 'I09C') then
					set shxishu=shxishu * 4
				endif
                call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))) // INLINED!!
                if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
                    call WanBuff(u , uc , 11)
                endif
                set shanghai=ShangHaiGongShi(u , uc , 28. , 28. , shxishu , 'A09E')
                call WuGongShangHai(u , uc , shanghai)
                call WuGongShengChong(GetAttacker() , 'A09E' , 1000)
            endif
        endif
    else
        if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
            set shxishu=shxishu + .6
        endif
        if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) ) then
            set shxishu=shxishu + .8
        endif
        if UnitHasDenomWeapon(u , 'I09C') then
			set shxishu=shxishu * 4
		endif
        call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))) // INLINED!!
        if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
            call WanBuff(u , uc , 11)
        endif
        set shanghai=ShangHaiGongShi(udg_hero[i] , uc , 15 , 15 , shxishu , 'A09E')
        call WuGongShangHai(udg_hero[i] , uc , shanghai)
    endif
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
//玉蜂针
function HE takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A09J' ) )
endfunction
function IE takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and GetFilterUnit() != GetSpellTargetUnit() )
endfunction
function lE takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679436)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D022F, GetEnumUnit())
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function KE takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(GetEnumUnit())
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679436)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D022F, GetEnumUnit())
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679435)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D00DD, GetEnumUnit())
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set u=null
	set loc=null
	set loc2=null
endfunction
function LE takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local location loc= GetUnitLoc(l__ut)
 local real range= 0.
	if ( GetUnitAbilityLevel(u, 'A07S') != 0 ) then
		set range=800
	else
		set range=500
	endif
	if ( GetUnitAbilityLevel(u, 'A06L') != 0 ) then
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc , Condition(function IE)), function KE)
	else
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc , Condition(function IE)), function lE)
	endif
	call WuGongShengChong(u , 'A09J' , 100.)
	call RemoveLocation(loc)
	set u=null
	set l__ut=null
	set loc=null
endfunction
function NE takes nothing returns boolean
	return ( ( GetEventDamage() == .45 ) )
endfunction
function OE takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    if ( ( GetUnitAbilityLevel(u, 'A07A') != 0 ) ) then
        set shxishu=shxishu + .8
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) ) then
        set shxishu=shxishu + .5
    endif
    if UnitHaveItem(u , 'I0AU') then
		set shxishu=shxishu * 2
	endif
    if UnitHasDenomWeapon(u , 'I09C') then
		set shxishu=shxishu * 4
	endif
    set shanghai=ShangHaiGongShi(u , uc , 46. , 46. , shxishu , 'A09J')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//天罗地网掌
function QE takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A09M') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function RE takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function SE takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetEnumUnit()
 local location loc=GetUnitLoc(uc)
 local integer i=1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu=1.
 local real shanghai=0.
	if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) ) then
        set shxishu=shxishu + .7
    endif
    if UnitHasDenomWeapon(u , 'I09C') then
		set shxishu=shxishu * 4
	endif
    set shanghai=ShangHaiGongShi(u , uc , 22. , 46. , shxishu , 'A09M')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 'A06P') != 0 ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) and ( GetRandomReal(.0, 100.) <= 40. ) ) then
        call WanBuff(u , uc , 11)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) and ( UnitHasBuffBJ(uc, 1110454326) == false ) and ( GetRandomReal(.0, 100.) <= 40. ) ) then
        call WanBuff(u , uc , 6)
    endif
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
endfunction
function TE takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= null
 local location loc= GetUnitLoc(u)
 local location loc2= null
 local location loc3= null
 local integer imax= 4
 local real r= 0.
 local real r2= 0.
 local group g= CreateGroup()
	if GetRandomInt(1, 100) <= 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] / 5 then
		call GroupEnumUnitsInRangeOfLoc(g, loc, 800, Condition(function RE))
		if ( GetUnitAbilityLevel(u, 'A07Q') != 0 ) then
			set imax=7
		endif
		set Xd=1
		loop
			exitwhen Xd > imax
			set r=r + 100
			set Yd=1
			loop
				exitwhen Yd > 8
				set r2=r2 + 45
				set loc2=pu(loc , r , r2)
				call CreateNUnitsAtLoc(1, 'e00O', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
				call Gw(1.5 , bj_lastCreatedUnit)
				//天罗地网阵
				if ( GetUnitAbilityLevel(u, 'A03F') != 0 ) and GetRandomInt(1, 3) == 1 then
					set l__ut=GroupPickRandomUnit(g)
					set loc3=GetUnitLoc(l__ut)
					call percentDamage(l__ut , 20 , false)
					call DestroyEffect((AddSpecialEffectLocBJEx(loc3 , "war3mapImported\\blue quick.mdx"))) // INLINED!!
					call CreateNUnitsAtLoc(1, 'o02E', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
					call UnitAddAbility(bj_lastCreatedUnit, 'A03D')
					call ShowUnitHide(bj_lastCreatedUnit)
					call IssueTargetOrderById(bj_lastCreatedUnit, $D008A, l__ut)
					call Gw(3 , bj_lastCreatedUnit)
					call RemoveLocation(loc3)
					set loc3=null
				endif
				call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100. , loc2 , Condition(function RE)), function SE)
				call RemoveLocation(loc2)
				set Yd=Yd + 1
			endloop
			set Xd=Xd + 1
		endloop
		call WuGongShengChong(GetAttacker() , 'A09M' , 1000.)
	endif
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set g=null
	set u=null
	set loc=null
	set loc2=null
	set l__ut=null
endfunction
//玉女心经
function VE takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A09U') >= 1 ) and ( GetRandomReal(0, 1.) <= ( .1 + ( .01 * I2R(GetUnitAbilityLevel(GetAttacker(), 'A09U')) ) ) ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function WE takes nothing returns nothing
    local integer id=GetHandleId(GetTriggeringTrigger())
    local integer cx=LoadInteger(YDHT, id, - $3021938A)
    set cx=cx + 3
    call SaveInteger(YDHT, id, - $3021938A, cx)
    call SaveInteger(YDHT, id, - $1317DA19, cx)
    call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )])
    call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A09U')
    call YDWESetLocalVariableLocation("jn1" , GetUnitLoc(GetAttacker()))
    call YDWESetLocalVariableLocation("jn2" , pu(YDWEGetLocalVariableLocation("jn1") , GetRandomReal(200., 400.) , GetRandomReal(0, 360.)))
	call SaveInteger(YDHT, id * cx, - $2A11C165, getHeroDummyId(GetUnitTypeId(GetAttacker())))
    call CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, - $2A11C165), GetOwningPlayer(GetAttacker()), YDWEGetLocalVariableLocation("jn2"), bj_UNIT_FACING)
    call SetUnitVertexColorBJ(bj_lastCreatedUnit, GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 60.))
    call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
    call UnitAddAbility(bj_lastCreatedUnit, 'A09E')
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678935) != 0 ) ) then
        call zw(bj_lastCreatedUnit , GetAttacker() , 1. , 250. , 1000. , 1500. , 75)
    endif
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06J') != 0 ) ) then
        call UnitAddAbility(bj_lastCreatedUnit, 'A09V')
    endif
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07S') != 0 ) ) then
        call Gw(20. , bj_lastCreatedUnit)
    else
        call Gw(10. , bj_lastCreatedUnit)
    endif
    call RemoveLocation(YDWEGetLocalVariableLocation("jn1"))
    call RemoveLocation(YDWEGetLocalVariableLocation("jn2"))
    if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07U') != 0 ) ) then
        call YDWESetLocalVariableLocation("jn1" , GetUnitLoc(GetAttacker()))
        call YDWESetLocalVariableLocation("jn2" , pu(YDWEGetLocalVariableLocation("jn1") , GetRandomReal(200., 400.) , GetRandomReal(0, 360.)))
        call CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, - $2A11C165), GetOwningPlayer(GetAttacker()), YDWEGetLocalVariableLocation("jn2"), bj_UNIT_FACING)
        call SetUnitVertexColorBJ(bj_lastCreatedUnit, GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 60.))
        call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
        call UnitAddAbility(bj_lastCreatedUnit, 'A09E')
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678935) != 0 ) ) then
            call zw(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, $59BEA0CB) , 1. , 250. , 1000. , 1500. , 75)
        endif
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07S') != 0 ) ) then
            call Gw(20. , bj_lastCreatedUnit)
        else
            call Gw(10. , bj_lastCreatedUnit)
        endif
        if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A06J') != 0 ) ) then
            call UnitAddAbility(bj_lastCreatedUnit, 'A09V')
        endif
        call RemoveLocation(YDWEGetLocalVariableLocation("jn1"))
        call RemoveLocation(YDWEGetLocalVariableLocation("jn2"))
        endif
    call WuGongShengChong(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] , 'A09U' , 650.)
    call FlushChildHashtable(YDHT, id * cx)
endfunction
function YE takes nothing returns boolean
return ( ( GetUnitAbilityLevel(GetAttacker(), 'A09V') >= 1 ) and ( GetRandomReal(0, 1.) <= .13 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function ZE takes nothing returns nothing
local integer id=GetHandleId(GetTriggeringTrigger())
local integer cx=LoadInteger(YDHT, id, - $3021938A)
set cx=cx + 3
call SaveInteger(YDHT, id, - $3021938A, cx)
call SaveInteger(YDHT, id, - $1317DA19, cx)
call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )])
call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A06J')
call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetUnitLoc(GetTriggerUnit()))
call SaveReal(YDHT, id * cx, - $60249D54, AngleBetweenPoints(LoadLocationHandle(YDHT, id * cx, - $72C3E060), LoadLocationHandle(YDHT, id * cx, $5E83114F)))
call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 200. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 180. ) )))
call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $5E83114F))
call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
call FlushChildHashtable(YDHT, id * cx)
endfunction
//古墓清心诀
function e3 takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A09T' and (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) // INLINED!!
endfunction
function f3 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local real j= LoadReal(YDHT, p, 0)
 local integer i= LoadInteger(YDHT, p, 3)
 local integer imax= 15
 local unit u= LoadUnitHandle(YDHT, p, 1)
 local unit uc= LoadUnitHandle(YDHT, p, 2)
	if GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(uc))], 'A07U') >= 1 then
		set imax=30
	endif
	if ( i >= imax ) then
		call FlushChildHashtable(YDHT, p)
		call PauseTimer(t)
		call DestroyTimer(t)
	else
		call SaveInteger(YDHT, p, 3, i + 1)
		call SetWidgetLife(uc, GetWidgetLife(uc) + GetUnitState(uc, UNIT_STATE_MAX_LIFE) * ( j + I2R(yishu[1 + GetPlayerId(GetOwningPlayer(uc))]) ) / 200.)
	endif
	set t=null
	set u=null
	set uc=null
endfunction
function g3 takes nothing returns boolean
	return ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and (IsUnitType((GetFilterUnit() ), ( UNIT_TYPE_HERO)) != null) ) // INLINED!!
endfunction
function i3 takes nothing returns nothing
 local timer t
 local location loc= GetUnitLoc(GetEnumUnit())
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A09T')
	call IssueTargetOrderById(bj_lastCreatedUnit, $D00C0, GetEnumUnit())
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	set t=CreateTimer()
	if ( GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 'A07P') != 0 ) then
		call SaveReal(YDHT, GetHandleId(t), 0, 40.)
	else
		call SaveReal(YDHT, GetHandleId(t), 0, 25.)
	endif
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, GetTriggerUnit())
	call SaveUnitHandle(YDHT, GetHandleId(t), 2, GetEnumUnit())
	call TimerStart(t, 1., true, function f3)
	call RemoveLocation(loc)
	set t=null
	set loc=null
endfunction
function j3 takes nothing returns nothing
 local timer t
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local location loc= GetUnitLoc(u)
 local real j= 0.
	if ( GetUnitAbilityLevel(u, 'A07P') != 0 ) then
		set j=40
	else
		set j=25
	endif
	if ( GetUnitAbilityLevel(u, 'A083') != 0 ) then
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500. , loc , Condition(function g3)), function i3)
	else
		set t=CreateTimer()
		call SaveReal(YDHT, GetHandleId(t), 0, j)
		call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
		call SaveUnitHandle(YDHT, GetHandleId(t), 2, uc)
		call TimerStart(t, 1., true, function f3)
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A09T' , 100.)
	call RemoveLocation(loc)
	set t=null
	set u=null
	set uc=null
	set loc=null
endfunction
function m3 takes nothing returns boolean
	return ( ( UnitHasBuffBJ(GetTriggerUnit(), 1110454340) ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 'A07Q') != 0 ) )
endfunction
function nn3 takes nothing returns nothing
	call UnitDamageTarget(GetTriggerUnit(), GetEventDamageSource(), ( GetEventDamage() * 10. ), true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
endfunction
//--------古墓结束--------//
function GuMu_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function EE))
	call TriggerAddAction(t, function FE)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function HE))
	call TriggerAddAction(t, function LE)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function NE))
	call TriggerAddAction(t, function OE)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function QE))
	call TriggerAddAction(t, function TE)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function VE))
	call TriggerAddAction(t, function WE)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function YE))
	call TriggerAddAction(t, function ZE)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function e3))
	call TriggerAddAction(t, function j3)
	
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function m3))
	call TriggerAddAction(t, function nn3)
	set t=null
endfunction
//万花剑法 3级技
function IsWanHua takes nothing returns boolean
	return GetSpellAbilityId() == 'A021'
endfunction
function WanHuaJian takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local location loc=GetUnitLoc(u)
 local location array loc2
 local integer i=0
	call WuGongShengChong(GetTriggerUnit() , 'A021' , 240)
	set i=1
	loop
		exitwhen i > 6
		set loc2[i]=pu(loc , 200 , 60 * i)
		call CreateNUnitsAtLoc(1, 'h00G', GetOwningPlayer(GetTriggerUnit()), loc2[i], bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A022')
		if GetUnitAbilityLevel(u, 'A023') >= 1 then
			call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A022')
		endif
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0208, loc2[i])
		call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.)
		call RemoveLocation(loc2[i])
		set loc2[i]=null
		set i=i + 1
	endloop
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function IsWanHuaMaJia takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'h00G' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
endfunction
function WanHuaMaJia takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
 local unit uc=GetTriggerUnit()
 local real shxishu=1
    local real shanghai=0.
    local location loc2=GetUnitLoc(uc)
    if GetUnitAbilityLevel(u, 'A024') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	if GetUnitAbilityLevel(u, 'A07J') >= 1 then
		set shxishu=shxishu + 1.2
	endif
	if GetUnitAbilityLevel(u, 'A09D') >= 1 then
		set shxishu=shxishu + 2
	endif
	if GetUnitAbilityLevel(u, 'A07T') >= 1 and UnitHasBuffBJ(uc, 'BHbn') == false and GetRandomInt(1, 100) <= 30 then
		call CreateNUnitsAtLoc(1, 'e00X', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        call UnitAddAbility(bj_lastCreatedUnit, 'A025')
        call IssueTargetOrderById(bj_lastCreatedUnit, $D0206, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call ShowUnitHide(bj_lastCreatedUnit)
        call CreateTextTagLocBJ("放逐", loc2, 0, 12., 65., 55., 42., 0)
        call Nw(1. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
	if UnitHasDenomWeapon(u , 'I0DU') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 10. , 10. , shxishu , 'A021')
    call WuGongShangHai(u , uc , shanghai)
    call RemoveLocation(loc2)
    set u=null
    set uc=null
    set loc2=null
endfunction
//拂尘功 8级技
function IsFuChen takes nothing returns boolean
	return GetSpellAbilityId() == 'A01Z'
endfunction
function FuChenGong takes nothing returns nothing
 local location loc=GetSpellTargetLoc()
 local unit u=null
	call WuGongShengChong(GetTriggerUnit() , 'A01Z' , 180)
	call CreateNUnitsAtLoc(1, 'h00F', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	set u=bj_lastCreatedUnit
	call ShowUnitHide(u)
	call UnitAddAbility(u, 'A020')
	// 葵花效果
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A07T') >= 1 then
		call IncUnitAbilityLevel(u, 'A020')
	endif
	// 菩萨印效果
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A024') >= 1 then
		call IncUnitAbilityLevel(u, 'A020')
	endif
	// 专属加拂尘范围
	if UnitHasDenomWeapon(GetTriggerUnit() , 'I0DU') then
	    call IncUnitAbilityLevel(u, 'A020')
	    call IncUnitAbilityLevel(u, 'A020')
    endif
	call IssuePointOrderByIdLoc(u, $D0079, loc)
	call UnitApplyTimedLife(u, 1112045413, 10.)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function IsFuChenMaJia takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'h00F' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
endfunction
function FuChenMaJia takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u=udg_hero[i]
 local unit uc=GetTriggerUnit()
 local real shxishu=1
    local real shanghai=0.
    local real r1=GetRandomReal(1., 24.) * 12.
    if GetUnitAbilityLevel(u, 'A07J') >= 1 then
		set shxishu=shxishu + 1
	endif
	if GetUnitAbilityLevel(u, 'A023') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	if GetUnitAbilityLevel(u, 'A07F') >= 1 then
		set shxishu=shxishu + 1.1
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DU') then
	    set shxishu=shxishu * 2
    endif
	// 仪琳拂尘功附带封穴
	if isTitle(i , 17) then
		call WanBuff(u , uc , 11)
	endif
    set shanghai=ShangHaiGongShi(u , uc , r1 , r1 , shxishu , 'A01Z')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//北岳剑诀 15级技
function IsTianShan takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0CD') >= 1 ) and GetSpellAbilityId() != 'A05R' and GetSpellAbilityId() != 'AIha'
endfunction
function TianShan_Condition takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
endfunction
function TianShanZhang takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local unit uc=null
 local location loc=GetUnitLoc(u)
 local location loc2=null
 local group g=CreateGroup()
 local real r=1.0
	if GetUnitAbilityLevel(u, 'A07F') >= 1 then
		set r=2.0
	endif
	call WuGongShengChong(u , 'A0CD' , 480)
	call GroupEnumUnitsInRangeOfLoc(g, loc, 700, Condition(function TianShan_Condition))
	set uc=GroupPickRandomUnit(g)
	if uc != null then
		call percentDamage(uc , 10 + 2 * GetUnitAbilityLevel(u, 'A0CD') * r , false)
		call DestroyEffect((AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))) // INLINED!!
		set loc2=GetUnitLoc(uc)
		if GetUnitAbilityLevel(u, 'A07T') >= 1 then
			call CreateNUnitsAtLoc(1, 'e00X', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
            call UnitAddAbility(bj_lastCreatedUnit, 'A0D5')
            call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
            call ShowUnitHide(bj_lastCreatedUnit)
            call CreateTextTagLocBJ("封穴", loc2, 0, 12., 65., 55., 42., 0)
            call Nw(1. , bj_lastCreatedTextTag)
            call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
        endif
        if ( GetUnitAbilityLevel(u, 'A024') != 0 ) then
        	call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        	call ShowUnitHide(bj_lastCreatedUnit)
        	call UnitAddAbility(bj_lastCreatedUnit, 1093678901)
        	call IssueTargetOrderById(bj_lastCreatedUnit, $D022F, uc)
        	call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        	call CreateTextTagLocBJ("流血", loc2, 60., 12., 65., 55., 42., 0)
        	call Nw(3. , bj_lastCreatedTextTag)
        	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    	endif
    	if ( GetUnitAbilityLevel(u, 'A023') != 0 ) then
	    	call WanBuff(u , uc , 9)
    	endif
    	call RemoveLocation(loc2)
	endif
	if GetUnitAbilityLevel(u, 'A09D') >= 1 then
		set uc=GroupPickRandomUnit(g)
		if uc != null then
			call percentDamage(uc , 10 + 2 * GetUnitAbilityLevel(u, 'A0CD') * r , false)
			call DestroyEffect((AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))) // INLINED!!
		endif
	endif
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set u=null
	set uc=null
	set loc=null
	set loc2=null
	set g=null
endfunction
//慈悲心法 25级技
function IsCiBei takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'ohwd'
endfunction
function CiBei_Condition takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
endfunction
function CiBei_Action takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
 local unit uc=GetEnumUnit()
 local real shxishu=1.
    local real shanghai=0.
    local location loc=GetUnitLoc(u)
    local location loc2=GetUnitLoc(uc)
    if GetUnitAbilityLevel(u, 'A080') >= 1 then
		set shxishu=shxishu + 2
	endif
	if GetUnitAbilityLevel(u, 'A09D') >= 1 then
		set shxishu=shxishu + 2
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DU') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 500. , 250. , shxishu , 'A023')
    call WuGongShangHai(u , uc , shanghai)
    call DestroyEffect((AddSpecialEffectTargetUnitBJEx("overhead" , uc , "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))) // INLINED!!
    if GetUnitAbilityLevel(u, 'A07T') >= 1 and GetRandomInt(1, 100) <= 30 then
		call CreateNUnitsAtLoc(1, 'e00X', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        call UnitAddAbility(bj_lastCreatedUnit, 'A0D5')
        call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call ShowUnitHide(bj_lastCreatedUnit)
        call CreateTextTagLocBJ("封穴", loc2, 0, 12., 65., 55., 42., 0)
        call Nw(1. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
    if GetUnitAbilityLevel(u, 'A07S') >= 1 then
        call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 'A0DF')
        call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, u)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.)
    endif
    if GetUnitAbilityLevel(u, 'A07F') >= 1 and GetRandomInt(1, 100) <= 30 then
   		call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 'A019')
        call IssueTargetOrderById(bj_lastCreatedUnit, $D00B5, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call CreateTextTagLocBJ("破防", loc, 60., 12., 65., 55., 42., 0)
        call Nw(3. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
    call RemoveLocation(loc2)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc2=null
    set loc=null
endfunction
function CiBeiXinFa takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
 local location loc=GetUnitLoc(GetTriggerUnit())
 local group g=CreateGroup()
	call WuGongShengChong(u , 'A023' , 100)
	call GroupEnumUnitsInRangeOfLoc(g, loc, 600, Condition(function CiBei_Condition))
	call ForGroupBJ(g, function CiBei_Action)
	call DestroyGroup(g)
	call RemoveLocation(loc)
	set u=null
	set g=null
	set loc=null
endfunction
//菩萨印 25级技
function IsPuSa takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A024') >= 1
endfunction
function PuSaYin takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local player p=GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local real shxishu=1.
    local real shanghai=0.
    local integer level=0
    if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	if GetUnitAbilityLevel(u, 'A07P') >= 1 then
		set shxishu=shxishu + 0.7
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DU') then
	    set shxishu=shxishu * 2
    endif
	if GetRandomInt(1, 100) < 15 + fuyuan[i] / 5 then
		set shanghai=ShangHaiGongShi(u , uc , 160. , 80. , shxishu , 'A024')
   		call WuGongShangHai(u , uc , shanghai)
   		call WuGongShengChong(u , 'A024' , 300)
   		if GetUnitAbilityLevel(u, 'A09D') >= 1 and GetRandomInt(1, 100) <= 20 then
   			set level=GetUnitAbilityLevel(u, 'A024')
	    	call UnitRemoveAbility(u, 'A024')
	    	call UnitAddAbility(u, 'A024')
	    	call SetUnitAbilityLevel(u, 'A024', level)
    	endif
	endif
	set u=null
	set uc=null
	set p=null
endfunction
function HengShan_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsFuChen))
    call TriggerAddAction(t, function FuChenGong)
	set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsFuChenMaJia))
    call TriggerAddAction(t, function FuChenMaJia)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsWanHua))
    call TriggerAddAction(t, function WanHuaJian)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsWanHuaMaJia))
    call TriggerAddAction(t, function WanHuaMaJia)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsTianShan))
    call TriggerAddAction(t, function TianShanZhang)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function IsCiBei))
    call TriggerAddAction(t, function CiBeiXinFa)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsPuSa))
    call TriggerAddAction(t, function PuSaYin)
	set t=null
endfunction
//===========================================================================
//===========================================================================
//天柱云气
function IsTianZhu takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A04M') >= 1 or GetUnitAbilityLevel(GetTriggerUnit(), 'A04M') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function TianZhu_Condition takes nothing returns boolean
	if GetUnitAbilityLevel(GetAttacker(), 'A04M') >= 1 then
    	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true ) and IsUnitAliveBJ(GetFilterUnit())
    else
    	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) and IsUnitAliveBJ(GetFilterUnit())
	endif
endfunction
function TianZhu_Action takes nothing returns nothing
 local unit u= null
 local unit l__ut= GetEnumUnit()
    local player p= null
    local integer i= 1
    local real shanghai=0.
    local real shxishu=1.
    if GetUnitAbilityLevel(GetAttacker(), 'A04M') >= 1 then
		set u=GetAttacker()
	else
		set u=GetTriggerUnit()
	endif
	set p=GetOwningPlayer(u)
	set i=1 + GetPlayerId(p)
    if GetUnitAbilityLevel(u, 'A071') >= 1 then
	    set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    set shxishu=shxishu + 0.9
    endif
    if UnitHaveItem(u , 'I0DY') or UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') then
    	set shxishu=shxishu * 2
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DY') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , l__ut , 25 , 6 , shxishu , 'A04M')
    call WuGongShangHai(u , l__ut , shanghai)
    if GetUnitAbilityLevel(u, 'A07F') >= 1 then
	    call WanBuff(u , l__ut , 2)
    endif
    set p=null
    set u=null
    set l__ut=null
endfunction
function TianZhuYunQi takes nothing returns nothing
 local unit u=null
 local player p= null
 local real angle= 0.
 local location loc= null
 local location loc2= null
 local location loc3=null
 local group g= CreateGroup()
 local integer i= 1
 local integer j= 1
	if GetUnitAbilityLevel(GetAttacker(), 'A04M') >= 1 then
		set u=GetAttacker()
	else
		set u=GetTriggerUnit()
	endif
	set angle=GetUnitFacing(u)
	set p=GetOwningPlayer(u)
	set i=1 + GetPlayerId(p)
	set loc=GetUnitLoc(u)
	set loc2=PolarProjectionBJ(loc, GetRandomReal(100, 300), angle)
	set loc3=PolarProjectionBJ(loc, GetRandomReal(100, 300), 180 + angle)
	if ( GetRandomReal(.0, 200.) <= 15 + fuyuan[i] / 5 ) then
		call WuGongShengChong(u , 'A04M' , 900.)
		call DestroyEffect((AddSpecialEffectLocBJEx(loc2 , "war3mapImported\\aquaspike.mdl"))) // INLINED!!
		call GroupEnumUnitsInRangeOfLoc(g, loc2, 500, Condition(function TianZhu_Condition))
		if GetUnitAbilityLevel(u, 'A07U') >= 1 then
			call DestroyEffect((AddSpecialEffectLocBJEx(loc3 , "war3mapImported\\aquaspike.mdl"))) // INLINED!!
			call GroupEnumUnitsInRangeOfLoc(g, loc3, 500, Condition(function TianZhu_Condition))
		endif
		call ForGroupBJ(g, function TianZhu_Action)
		//call PolledWait(0.15)
		//set j = 1
		//loop
		//	exitwhen j > 4
		//	set loc3[j] = PolarProjectionBJ(loc2, 300, angle - 90 + 90 * j)
		//	call DestroyEffectEx(AddSpecialEffectLocBJEx(loc3[j], "war3mapImported\\aquaspike.mdl" ))
		//	call RemoveLocation(loc3[j])
		//	set loc3[j] = null
		//	call PolledWait(0.15)
		//	set j = j + 1
		//endloop
	endif
    call GroupClear(g)
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    call RemoveLocation(loc3)
    set g=null
    set u=null
    set p=null
    set loc=null
    set loc2=null
    set loc3=null
endfunction
//===========================================================================
//鹤翔紫盖
function IsHeXiangZiGai takes nothing returns boolean
    return GetSpellAbilityId() == 'A04N' and ( IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) )
endfunction
function HeXiangJianFa takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local unit uc=GetSpellTargetUnit()
    local unit l__ut= null
    local unit uttt= null
    local location loc=GetUnitLoc(uc)
    local location loc2= GetUnitLoc(u)
    local group g=CreateGroup()
    local real shanghai=0.
    local real shxishu=1.
    local integer id= 0
    if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		set id=getHeroDummyId(GetUnitTypeId(u))
		call CreateNUnitsAtLoc(1, id, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
		set uttt=bj_lastCreatedUnit
	else
		set uttt=u
	endif
    call WuGongShengChong(u , 'A04N' , 100)
    call SetUnitTimeScale(uttt, 0.3)
    call YDWETimerDestroyEffect(2 , AddSpecialEffectTargetEx("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl" , uttt , "chest"))
    call YDWEJumpTimer(uttt , AngleBetweenPoints(loc2, loc) , 2 * DistanceBetweenPoints(loc2, loc) , 2 , 0.01 , 400.)
    call YDWEPolledWaitNull(1.0)
	call CreateNUnitsAtLoc(1, 'e01A', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	set l__ut=bj_lastCreatedUnit
	call UnitAddAbility(l__ut, 'A04O')
	call UnitApplyTimedLife(l__ut, 1112045413, 2.)
    call ShowUnitHide(l__ut)
	call IssueTargetOrderById(l__ut, $D0097, uc)
	if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    set shxishu=shxishu + 0.9
    endif
    if GetUnitAbilityLevel(u, 'A071') >= 1 then
	    set shxishu=shxishu + 0.9
    endif
    if GetUnitAbilityLevel(u, 'A07J') >= 1 then
	    set shxishu=shxishu + 1.5
    endif
    if UnitHaveItem(u , 'I0DY') or UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') or UnitHaveItem(u , 'I0EZ') or UnitHaveItem(u , 'I0F6') then
    	set shxishu=shxishu * 2
	endif
    if GetUnitAbilityLevel(u, 'A07R') >= 1 then
	    call WanBuff(u , uc , 12)
    endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DY') then
	    set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 300 , 100 , shxishu , 'A04N')
    call WuGongShangHai(u , uc , shanghai)
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    call YDWEPolledWaitNull(1.0)
    call SetUnitTimeScale(uttt, 1.0)
    set u=null
    set uc=null
    set loc=null
    set loc2=null
    set l__ut=null
    set uttt=null
    set g=null
endfunction
//===========================================================================
//石廪书声
function IsShiLin takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A04P') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function ShiLinShuSheng takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local player p=GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local integer id='o02K'
 local location loc1=GetUnitLoc(u)
 local location loc2=GetUnitLoc(uc)
 local real angle= AngleBetweenPoints(loc1, loc2)
	if ( GetRandomReal(.0, 100.) <= 15 + fuyuan[i] / 5 ) then
		call CreateNUnitsAtLocFacingLocBJ(1, id, p, PolarProjectionBJ(loc1, 300, 180 + angle), loc2)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5. + 5. * GetUnitAbilityLevel(u, 'S002'))
		if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    	call UnitAddAbility(bj_lastCreatedUnit, 'A03M')
    	endif
    	if GetUnitAbilityLevel(u, 'A07J') >= 1 then
		    call UnitAddAbility(bj_lastCreatedUnit, 'A03O')
    	endif
    	call WuGongShengChong(u , 'A04P' , 600.)
    	call RemoveLocation(loc1)
    	call RemoveLocation(loc2)
	endif
    set loc1=null
    set loc2=null
	set p=null
	set u=null
	set uc=null
endfunction
function IsShiLinShu takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'o02K'
endfunction
function ShiLinShu takes nothing returns nothing
 local player p=GetOwningPlayer(GetEventDamageSource())
 local integer i=1 + GetPlayerId(p)
 local unit u=udg_hero[i]
 local unit uc=GetTriggerUnit()
 local real shanghai=0.
 local real shxishu=1.
	if GetUnitAbilityLevel(u, 'A071') >= 1 then
	    set shxishu=shxishu + 0.7
    endif
    if GetUnitAbilityLevel(u, 'A07F') >= 1 then
	    set shxishu=shxishu + 1.6
    endif
    if UnitHaveItem(u , 'I0DY') or UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') then
    	set shxishu=shxishu * 2
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DY') then
	    set shxishu=shxishu * 2
    endif
	set shanghai=ShangHaiGongShi(u , uc , 50. , 28. , shxishu , 'A04P')
	call WuGongShangHai(u , uc , shanghai)
	set uc=null
	set u=null
	set p=null
endfunction
//===========================================================================
//雁回祝融
function IsYanHui takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A04R') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function YanHuiZhuRong takes nothing returns nothing
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local player p=GetOwningPlayer(u)
 local integer i=1 + GetPlayerId(p)
 local integer id='h00L'
 local location loc1=GetUnitLoc(u)
 local location loc2=GetUnitLoc(uc)
	if ( GetRandomReal(.0, 100.) <= 15 + fuyuan[i] / 5 ) then
		call CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 6. + 6. * GetUnitAbilityLevel(u, 'A083'))
		call WuGongShengChong(u , 'A04R' , 600.)
    	call RemoveLocation(loc1)
    	call RemoveLocation(loc2)
	endif
    set loc1=null
    set loc2=null
	set p=null
	set u=null
	set uc=null
endfunction
function IsYanHuiJian takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'h00L'
endfunction
function YanHuiJianFa takes nothing returns nothing
 local player p=GetOwningPlayer(GetEventDamageSource())
 local integer i=1 + GetPlayerId(p)
 local unit u=udg_hero[i]
 local unit uc=GetTriggerUnit()
 local real shanghai=0.
 local real shxishu=1.
 local location loc= GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    set shxishu=shxishu + 0.6
    endif
    if UnitHaveItem(u , 'I0DY') or UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') then
    	set shxishu=shxishu * 2
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DY') then
	    set shxishu=shxishu * 2
    endif
	set shanghai=ShangHaiGongShi(u , uc , 200. , 80. , shxishu , 'A04R')
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A07P') >= 1 then
		call WanBuff(u , uc , 7)
    endif
	if ( GetRandomReal(.0, 100.) <= 15 + fuyuan[i] / 5 + GetUnitAbilityLevel(u, 'A07U') * 21 ) then
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
    	call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A04Q')
		if GetUnitAbilityLevel(u, 'A07J') >= 1 then
	    	call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A04Q')
   		endif
    	call IssueTargetOrderById(bj_lastCreatedUnit, $D00CB, uc)
    	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	endif
	call RemoveLocation(loc)
	set uc=null
	set u=null
	set p=null
	set loc=null
endfunction
function IsYanHuiDamage takes nothing returns boolean
	return ( GetEventDamage() == 6.28 ) and ( GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )], 'A04R') >= 1 )
endfunction
function YanHuiDamage takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    set shxishu=shxishu + 0.6
    endif
    if UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') then
    	set shxishu=shxishu * 2
	endif
   	set shanghai=ShangHaiGongShi(u , uc , 250 , 160 , shxishu , 'A04R')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//===========================================================================
//泉鸣芙蓉
function QuanMing_Conditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A026' ) )
endfunction
function QuanMing_Actions takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local location loc=GetSpellTargetLoc()
 local location loc2=null
 local unit l__ut=null
 local integer i=0
	call WuGongShengChong(u , 'A026' , 100)
	call SaveUnitHandle(YDHT, StringHash("泉鸣"), 1, u)
	call SaveLocationHandle(YDHT, StringHash("泉鸣"), 0, loc)
    call TerrainDeformationCraterBJ(15.80, false, loc, 400.00, 400.00)
    call CreateNUnitsAtLoc(1, 'e00Z', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    set l__ut=bj_lastCreatedUnit
    set i=1
    loop
        exitwhen i > 16
        call CreateNUnitsAtLocFacingLocBJ(1, 'e011', GetOwningPlayer(GetTriggerUnit()), PolarProjectionBJ(loc, 350.00, ( 22.50 * i )), loc)
        call UnitApplyTimedLifeBJ(13.50, 'BTLF', GetLastCreatedUnit())
        call DestroyEffect((AddSpecialEffectLocBJEx(PolarProjectionBJ(loc, 350.00, 22.50 * I2R(i)) , "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))) // INLINED!!
        set i=i + 1
    endloop
    set i=1
    loop
        exitwhen i > 30
        set loc2=GetRandomLocInRect(RectFromCenterSizeBJ(loc, 350.00, 350.00))
        call CreateNUnitsAtLoc(1, 'e010', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        call UnitApplyTimedLifeBJ(15.00, 'BTLF', GetLastCreatedUnit())
        call RemoveLocation(loc2)
        set i=i + 1
    endloop
    call YDWEPolledWaitNull(1.50)
    call EnableTrigger(gg_trg_Number14_1)
    call YDWEPolledWaitNull(13.50)
    call DisableTrigger(gg_trg_Number14_1)
    call YDWEPolledWaitNull(0.50)
    set i=1
    loop
        exitwhen i > 16
        call DestroyEffect((AddSpecialEffectLocBJEx(PolarProjectionBJ(loc, 350.00, 22.50 * I2R(i)) , "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))) // INLINED!!
        set i=i + 1
    endloop
    call RemoveUnit(l__ut)
    call RemoveLocation(loc)
    set u=null
    set l__ut=null
    set loc=null
    set loc2=null
endfunction
function Trig_Number14_1Func001001003 takes nothing returns boolean
    return ( UnitHasBuffBJ(GetFilterUnit(), 'Basl') == true )
endfunction
function Trig_Number14_1Func001A takes nothing returns nothing
 local location loc=LoadLocationHandle(YDHT, StringHash("泉鸣"), 0)
 local unit u= LoadUnitHandle(YDHT, StringHash("泉鸣"), 1)
 local real shxishu=1.
    local real shanghai=0.
    if GetUnitAbilityLevel(u, 'A06J') >= 1 then
	    set shxishu=shxishu + 0.5
    endif
    if GetUnitAbilityLevel(u, 'A071') >= 1 then
	    set shxishu=shxishu + 0.5
    endif
    if GetUnitAbilityLevel(u, 'A07F') >= 1 then
	    set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(u, 'A07J') >= 1 then
	    set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(u, 'A06J') >= 1 and GetUnitAbilityLevel(u, 'A071') >= 1 and GetUnitAbilityLevel(u, 'A07F') >= 1 and GetUnitAbilityLevel(u, 'A07J') >= 1 then
	    set shxishu=shxishu + 4
    endif
    if UnitHaveItem(u , 'I0DY') or UnitHaveItem(u , 'I01L') or UnitHaveItem(u , 'I00C') or UnitHaveItem(u , 'I00B') or UnitHaveItem(u , 'I099') or UnitHaveItem(u , 'I09A') or UnitHaveItem(u , 'I09C') then
    	set shxishu=shxishu * 2
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0DY') then
	    set shxishu=shxishu * 2
    endif
   	set shanghai=ShangHaiGongShi(u , GetEnumUnit() , 60 , 95 , shxishu , 'A026')
    if ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(u)) ) then
	    call SetUnitPositionLoc(GetEnumUnit(), loc)
   		call WuGongShangHai(u , GetEnumUnit() , shanghai)
	endif
    set loc=null
    set u=null
    //call FlushChildHashtable(YDHT,StringHash("泉鸣"))
endfunction
function Trig_Number14_1Actions takes nothing returns nothing
    local location loc=LoadLocationHandle(YDHT, StringHash("泉鸣"), 0)
    local integer i=0
    call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(470.00 , loc , Condition(function Trig_Number14_1Func001001003)), function Trig_Number14_1Func001A)
    set i=1
    loop
        exitwhen i > 7
        call DestroyEffect((AddSpecialEffectLocBJEx(GetRandomLocInRect(RectFromCenterSizeBJ(loc, 350.00, 350.00)) , "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))) // INLINED!!
        set i=i + 1
    endloop
    set loc=null
endfunction
//===========================================================================
function HengShan2_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	//天柱云气
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTianZhu))
	call TriggerAddAction(t, function TianZhuYunQi)
	//鹤翔紫盖
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsHeXiangZiGai))
    call TriggerAddAction(t, function HeXiangJianFa)
    //石廪书声
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsShiLin))
	call TriggerAddAction(t, function ShiLinShuSheng)
	set t=CreateTrigger()
	call Ov(t)
	call TriggerAddCondition(t, Condition(function IsShiLinShu))
	call TriggerAddAction(t, function ShiLinShu)
	//雁回祝融
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsYanHui))
	call TriggerAddAction(t, function YanHuiZhuRong)
	set t=CreateTrigger()
	call Ov(t)
	call TriggerAddCondition(t, Condition(function IsYanHuiJian))
	call TriggerAddAction(t, function YanHuiJianFa)
	set t=CreateTrigger()
	call Ov(t)
	call TriggerAddCondition(t, Condition(function IsYanHuiDamage))
	call TriggerAddAction(t, function YanHuiDamage)
	//泉鸣芙蓉
    set gg_trg_Number14_1=CreateTrigger()
    call DisableTrigger(gg_trg_Number14_1)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Number14_1, 1.00)
    call TriggerAddAction(gg_trg_Number14_1, function Trig_Number14_1Actions)
    set gg_trg_Number14_0=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Number14_0, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Number14_0, Condition(function QuanMing_Conditions))
    call TriggerAddAction(gg_trg_Number14_0, function QuanMing_Actions)
    set t=null
endfunction
//天山折梅手
function IsXinZheMei takes nothing returns boolean
 local integer i= 1
	loop
		exitwhen i > 5
		if udg_zhemei[i] == 0 and GetUnitAbilityLevel(udg_hero[i], 'A02B') >= 1 then
			set udg_zhemei[i]=1
			call SaveInteger(YDHT, StringHash("折梅"), StringHash("折梅"), i)
			return true
		endif
		set i=i + 1
	endloop
	return false
endfunction
function XinZheMeiShou_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	if GetUnitAbilityLevel(u, 'A02B') >= 1 then
		call UnitAddAbilityBJ('A02X', u)
    	call SetPlayerAbilityAvailableBJ(false, 'A02X', GetOwningPlayer(u))
    	set udg_zhemeieff=AddSpecialEffectTargetUnitBJEx("overhead" , u , "Abilities\\Weapons\\Bolt\\BoltImpact.mdl")
	else
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call PauseTimer(t)
		call DestroyTimer(t)
	endif
	set t=null
	set u=null
endfunction
function XinZheMeiShou takes nothing returns nothing
 local timer t= CreateTimer()
 local unit u= udg_hero[LoadInteger(YDHT, StringHash("折梅"), StringHash("折梅"))]
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, 1., false, function XinZheMeiShou_1)
	set t=null
	set u=null
endfunction
function XinZheMeiShou_Condition takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02W') >= 1 and (IsUnitType((GetAttacker() ), ( UNIT_TYPE_HERO)) != null) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) // INLINED!!
endfunction
function ZheMei_Condition takes nothing returns boolean
	//call BJDebugMsg("pos2")
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function ZheMei_Action takes nothing returns nothing
 local unit uc=GetEnumUnit()
 local unit u=GetAttacker()
 local location loc=GetUnitLoc(uc)
 local real shxishu=1.
 local real shanghai=0.
	set shxishu=RMinBJ(1. + I2R(GetHeroInt(u, true)) / 600., 15.)
	if ( ( GetUnitAbilityLevel(u, 'A02C') != 0 ) ) then
	    set shxishu=shxishu + 0.5
	endif
	if ( ( GetUnitAbilityLevel(u, 'A02H') != 0 ) ) then
	    set shxishu=shxishu + 0.6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A0D6') != 0 ) ) then
	    set shxishu=shxishu + 0.7
	endif
	//call BJDebugMsg("pos3")
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))) // INLINED!!
	call RemoveLocation(loc)
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DT') then
	    set shxishu=shxishu * 1.8
    endif
	set shanghai=ShangHaiGongShi(u , uc , 9 , 18 , shxishu , 'A02B')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
	set loc=null
endfunction
function XinZheMeiShou_Action takes nothing returns nothing
 local timer t= CreateTimer()
 local unit u=GetAttacker()
 local unit uc=GetTriggerUnit()
 local location loc=GetUnitLoc(u)
 local real shxishu=1.
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real j= RMaxBJ(7. - I2R(GetHeroAgi(u, true)) / 400., 0.5)
 local real range= 500. + 50. * GetUnitAbilityLevel(u, 'A02B') + I2R(GetHeroStr(u, true)) / 10.
	if range > 3000 then
	    set range=3000
	endif
	call UnitRemoveAbility(u, 'A02X')
	call DestroyEffect((udg_zhemeieff)) // INLINED!!
	set udg_zhemeieff=null
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, j, false, function XinZheMeiShou_1)
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc , Condition(function ZheMei_Condition)), function ZheMei_Action)
	call WuGongShengChong(u , 'A02B' , 450.)
	if ( GetUnitAbilityLevel(u, 'A02H') >= 1 ) and GetRandomInt(1, 4) == 1 then
		call WanBuff(u , uc , 2)
	endif
	if ( GetUnitAbilityLevel(u, 'A07N') >= 1 ) and GetRandomInt(1, 4) == 1 then
		call WanBuff(u , uc , 11)
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set uc=null
	set loc=null
endfunction
//月影舞步
function IsYueYing takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02C' )
endfunction
function ZheMei_Condition2 takes nothing returns boolean
	//call BJDebugMsg("pos2")
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function ZheMei_Action2 takes nothing returns nothing
 local unit uc=GetEnumUnit()
 local unit u=GetTriggerUnit()
 local location loc=GetUnitLoc(uc)
 local real shxishu=1.
 local real shanghai=0.
	set shxishu=RMinBJ(1. + I2R(GetHeroInt(u, true)) / 600., 15.)
	if ( ( GetUnitAbilityLevel(u, 'A02C') != 0 ) ) then
	    set shxishu=shxishu + 0.5
	endif
	if ( ( GetUnitAbilityLevel(u, 'A02H') != 0 ) ) then
	    set shxishu=shxishu + 0.6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A0D6') != 0 ) ) then
	    set shxishu=shxishu + 0.7
	endif
	//call BJDebugMsg("pos3")
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))) // INLINED!!
	call RemoveLocation(loc)
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DT') then
	    set shxishu=shxishu * 1.8
    endif
	set shanghai=ShangHaiGongShi(u , uc , 9 , 18 , shxishu , 'A02B')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
	set loc=null
endfunction
function YueYingBu takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local real r= 5.
 local integer level= 1
 local location loc= GetUnitLoc(u)
 local location loc2= GetSpellTargetLoc()
	if GetUnitAbilityLevel(u, 'A07S') >= 1 then
		set r=r + 3.
	endif
	if GetUnitAbilityLevel(u, 'A02G') >= 1 then
		set r=r + 3.
	endif
	call WuGongShengChong(u , 'A02C' , 100.)
	call SaveInteger(YDHT, GetHandleId(u), 'A02C' * 100, LoadInteger(YDHT, GetHandleId(u), 'A02C' * 100) + 1)
	//call BJDebugMsg("目前特效剩余值为"+I2S(LoadInteger(YDHT, GetHandleId(u), 'A02C'*100)))
	call UnitAddAbility(u, 'A006')
	if GetUnitAbilityLevel(u, 'A07Q') >= 1 then
		call UnitAddAbilityBJ('A02T', u)
    	call SetPlayerAbilityAvailableBJ(false, 'A02T', GetOwningPlayer(u))
		//call UnitAddAbility(u, 'ACes')
	endif
	if GetUnitAbilityLevel(u, 'A07O') >= 1 then
		call UnitAddAbility(u, 'A02D')
	endif
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300 , loc , Condition(function ZheMei_Condition2)), function ZheMei_Action2)
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300 , loc2 , Condition(function ZheMei_Condition2)), function ZheMei_Action2)
	call YDWEPolledWaitNull(1.)
	if GetUnitAbilityLevel(u, 'A07U') >= 1 and GetRandomInt(1, 2) == 1 then
        set level=GetUnitAbilityLevel(u, 'A02C')
	     call UnitRemoveAbility(u, 'A02C')
	     call UnitAddAbility(u, 'A02C')
	     call SetUnitAbilityLevel(u, 'A02C', level)
    endif
	//call BJDebugMsg("pos4")
	call YDWEPolledWaitNull(r - 1)
	call SaveInteger(YDHT, GetHandleId(u), 'A02C' * 100, LoadInteger(YDHT, GetHandleId(u), 'A02C' * 100) - 1)
	//call BJDebugMsg("目前特效剩余值为"+I2S(LoadInteger(YDHT, GetHandleId(u), 'A02C'*100)))
	if LoadInteger(YDHT, GetHandleId(u), 'A02C' * 100) == 0 then
		call UnitRemoveAbility(u, 'A006')
		if GetUnitAbilityLevel(u, 'A07Q') >= 1 then
			call UnitRemoveAbility(u, 'A02T')
		endif
		if GetUnitAbilityLevel(u, 'A07O') >= 1 then
			call UnitRemoveAbility(u, 'A02D')
		endif
	endif
	set u=null
	set loc=null
	set loc2=null
endfunction
function IsYueYingBeiDong takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02C') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A02H') >= 1 and GetRandomInt(1, 100) <= 15 and GetUnitAbilityLevel(GetAttacker(), 'A02E') == 0
endfunction
function YueYingBuBeiDong takes nothing returns nothing
	call UnitAddAbility(GetAttacker(), 'A02E')
	call YDWEPolledWaitNull(5.)
	call UnitRemoveAbility(GetAttacker(), 'A02E')
endfunction
//如意刀法
function IsRuYi takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02F' )
endfunction
function RuYiDao takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= null
	call WuGongShengChong(GetTriggerUnit() , 'A02F' , 200)
	call CreateNUnitsAtLoc(1, 'h00H', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
	call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
	call UnitAddAbility(bj_lastCreatedUnit, 'A02J')
	if GetUnitAbilityLevel(u, 'A07H') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02J')
	endif
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0012, u)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 7.)
	if GetUnitAbilityLevel(u, 'A07U') >= 1 then
		set loc2=pu(loc , 256. , GetRandomReal(0, 360.))
		call CreateNUnitsAtLoc(1, 'h00H', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		call SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
		call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
		call UnitAddAbility(bj_lastCreatedUnit, 'A02J')
		if GetUnitAbilityLevel(u, 'A07H') >= 1 then
			call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02J')
		endif
		call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0012, u)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 7.)
	endif
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		call UnitAddAbility(u, 'A0CQ')
   		call SetPlayerAbilityAvailable(GetOwningPlayer(u), 'A0CQ', false)
	endif
	call YDWEPolledWaitNull(7.)
	call UnitRemoveAbility(u, 'A0CQ')
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set u=null
	set loc=null
	set loc2=null
endfunction
function IsRuYiMaJia takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'h00H' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
endfunction
function RuYiMaJia takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
 local unit uc=GetTriggerUnit()
 local real shxishu=1
    local real shanghai=0.
    if GetUnitAbilityLevel(u, 'A02G') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DT') then
	    set shxishu=shxishu * 1.8
    endif
    set shanghai=ShangHaiGongShi(u , uc , 48. , 48. , shxishu , 'A02F')
    call WuGongShangHai(u , uc , shanghai)
    if UnitHasBuffBJ(u, 'B00Y') and GetUnitAbilityLevel(u, 'A018') >= 1 then
	    call WuGongShangHai(u , uc , shanghai * 30)
    endif
    set u=null
    set uc=null
endfunction
function IsRuYiBeiDong takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02F') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A06M') >= 1 and GetRandomInt(1, 100) <= 8
endfunction
function RuYiBeiDong takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
	//call WuGongShengChong(GetTriggerUnit(),'A02F',1200)
	call CreateNUnitsAtLoc(1, 'h00H', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
	call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
	call UnitAddAbility(bj_lastCreatedUnit, 'A02J')
	if GetUnitAbilityLevel(u, 'A07H') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02J')
	endif
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0012, u)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 7.)
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		call UnitAddAbility(u, 'A0CQ')
   		call SetPlayerAbilityAvailable(GetOwningPlayer(u), 'A0CQ', false)
	endif
	call YDWEPolledWaitNull(7.)
	call UnitRemoveAbility(u, 'A0CQ')
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
//八荒六合唯我独尊功
function IsBaHuang takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02G') >= 1
endfunction
function BaHuangGong_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer j= LoadInteger(YDHT, GetHandleId(t), 0)
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local integer jishu= LoadInteger(YDHT, GetHandleId(t), 2)
 local integer level= LoadInteger(YDHT, GetHandleId(t), 3)
	call ModifyHeroStat(j, u, 1, jishu * level * 6)
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function BaHuangGong_2 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local integer jishu= LoadInteger(YDHT, GetHandleId(t), 2)
 local integer level= LoadInteger(YDHT, GetHandleId(t), 3)
	call ModifyHeroStat(0, u, 1, jishu * level)
	call ModifyHeroStat(1, u, 1, jishu * level)
	call ModifyHeroStat(2, u, 1, jishu * level)
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function BaHuangGong_3 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer jishu= LoadInteger(YDHT, GetHandleId(t), 2)
 local integer level= LoadInteger(YDHT, GetHandleId(t), 3)
	set juexuelingwu[i]=juexuelingwu[i] - level
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function BaHuangGong takes nothing returns nothing
 local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer jishu= 8
 local integer level= GetUnitAbilityLevel(u, 'A02G')
 local location loc= GetUnitLoc(u)
 local integer j= GetRandomInt(0, 2)
 local timer t= null
 local integer gailv= 6
if GetUnitAbilityLevel(u, 'A07W') >= 1 then
		set jishu=15
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DT') then
		set gailv=gailv + 20
    endif
	// 随机数1-100 小于 （6+ 福缘/3 + 六脉等级*3）
	if GetRandomInt(1, 100) < IMaxBJ(30, gailv + fuyuan[i] / 5 + GetUnitAbilityLevel(u, 'A085') * 3) then
		call WuGongShengChong(u , 'A02G' , 500 - 50 * GetUnitAbilityLevel(u, 'A089'))
		if GetUnitAbilityLevel(u, 'A0D2') >= 1 then
			call ModifyHeroStat(j, u, 0, jishu * level * 6)
			set t=CreateTimer()
			call SaveInteger(YDHT, GetHandleId(t), 0, j)
			call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			call SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			call SaveInteger(YDHT, GetHandleId(t), 3, level)
			call TimerStart(t, 8., false, function BaHuangGong_1)
		else
			call ModifyHeroStat(0, u, 0, jishu * level)
			call ModifyHeroStat(1, u, 0, jishu * level)
			call ModifyHeroStat(2, u, 0, jishu * level)
			set t=CreateTimer()
			call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			call SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			call SaveInteger(YDHT, GetHandleId(t), 3, level)
			call TimerStart(t, 8., false, function BaHuangGong_2)
		endif
		call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))) // INLINED!!
		if GetUnitAbilityLevel(u, 'A083') >= 1 then
			set juexuelingwu[i]=juexuelingwu[i] + level
			set t=CreateTimer()
			call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			call SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			call SaveInteger(YDHT, GetHandleId(t), 3, level)
			call TimerStart(t, 8., false, function BaHuangGong_3)
		endif
	endif
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
	set t=null
endfunction
//天山六阳掌
function IsLiuYang takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02H' )
endfunction
function LiuYangZhang takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call WuGongShengChong(GetTriggerUnit() , 'A02H' , 190)
	call CreateNUnitsAtLoc(1, 'e012', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A02I')
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02I')
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D010E, loc)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
function IsLiuYangMaJia takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'e012' and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
endfunction
function LiuYangMaJia takes nothing returns nothing
 local unit u=udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
 local unit uc=GetTriggerUnit()
 local real shxishu=1
    local real shanghai=0.
    if GetUnitAbilityLevel(u, 'A07I') >= 1 then
		set shxishu=shxishu + 1
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DT') then
	    set shxishu=shxishu * 5
    endif
    set shanghai=ShangHaiGongShi(u , uc , 84 , 48 , shxishu , 'A02H')
    call WuGongShangHai(u , uc , shanghai)
    if GetUnitAbilityLevel(u, 'A07M') >= 1 then
	    call WanBuff(u , uc , 2)
    endif
    if GetUnitAbilityLevel(u, 'A082') >= 1 then
	    call WanBuff(u , uc , 6)
    endif
    set u=null
    set uc=null
endfunction
function IsLiuYangBeiDong takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02H') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A0D8') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A07H') >= 1 and GetRandomInt(1, 100) <= 5
endfunction
function LiuYangBeiDong takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 'e012', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A02I')
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02I')
	endif
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D010E, loc)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	call RemoveLocation(loc)
	set u=null
	set loc=null
endfunction
// 虚竹子称号：北冥杀怪加内力
function isXuZhuBeiMing takes nothing returns boolean
	return GetUnitAbilityLevel(GetKillingUnit(), 'A082') != 0 and isTitle(1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) , 25)
endfunction
function xuZhuBeiMing takes nothing returns nothing
 local unit u= GetKillingUnit()
 local integer i=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	set beiMingShaGuai[i]=beiMingShaGuai[i] + 1
	if ( ( beiMingShaGuai[i] >= 100 ) ) then
		set beiMingShaGuai[i]=beiMingShaGuai[i] - 100
		call ModifyHeroStat(1, GetKillingUnit(), 0, 20)
	endif
	set u=null
endfunction
function LingJiuGong_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, 1.)
	call TriggerAddCondition(t, Condition(function IsXinZheMei))
	call TriggerAddAction(t, function XinZheMeiShou)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function XinZheMeiShou_Condition))
	call TriggerAddAction(t, function XinZheMeiShou_Action)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsYueYing))
	call TriggerAddAction(t, function YueYingBu)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsYueYingBeiDong))
	call TriggerAddAction(t, function YueYingBuBeiDong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsBaHuang))
	call TriggerAddAction(t, function BaHuangGong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsLiuYang))
	call TriggerAddAction(t, function LiuYangZhang)
	set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsLiuYangMaJia))
    call TriggerAddAction(t, function LiuYangMaJia)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsLiuYangBeiDong))
	call TriggerAddAction(t, function LiuYangBeiDong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsRuYi))
	call TriggerAddAction(t, function RuYiDao)
	set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsRuYiMaJia))
    call TriggerAddAction(t, function RuYiMaJia)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsRuYiBeiDong))
	call TriggerAddAction(t, function RuYiBeiDong)
	// 虚竹北冥杀怪加内力
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function isXuZhuBeiMing))
	call TriggerAddAction(t, function xuZhuBeiMing)
	set t=null
endfunction
//家传剑法
function IsJiaChuanMaJia takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, 10001, 10001))) )
endfunction
function JiaChuanMaJia_1 takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, 10001, 10001)
 local unit uc= GetEnumUnit()
 local real shxishu= 1.
 local real shanghai= 0.
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local location loc= GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 'A02R') >= 1 then
		set shxishu=shxishu + 1.
	endif
	if GetRandomInt(1, 4) == 1 then
		call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))) // INLINED!!
	endif
	if UnitHasDenomWeapon(u , 'I0DS') then
		set shxishu=shxishu * 1.8
	endif
	set shanghai=ShangHaiGongShi(u , uc , 18. , 27. , shxishu , 'A02K')
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A02V') >= 1 and GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
		call WanBuff(u , uc , 6)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function JiaChuanMaJia takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
 local real range= 550.
 local location loc= GetUnitLoc(u)
 local integer jmax= 17
	if GetUnitAbilityLevel(u, 'A071') >= 1 then
		set range=range + 350.
	endif
	if GetUnitAbilityLevel(u, 'A06J') >= 1 then
		set jmax=25
	endif
	if j < jmax then
		call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
		call SaveUnitHandle(YDHT, 10001, 10001, u)
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , loc , Condition(function IsJiaChuanMaJia)), function JiaChuanMaJia_1)
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set loc=null
endfunction
function IsJiaChuan takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02K' )
endfunction
function JiaChuanJian takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local timer t= CreateTimer()
	call WuGongShengChong(GetTriggerUnit() , 'A02K' , 140)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A02L')
	if GetUnitAbilityLevel(u, 'A071') >= 1 then
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A02L', 2)
	endif
	if GetUnitAbilityLevel(u, 'A06J') >= 1 then
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A02L', 3)
	endif
	if GetUnitAbilityLevel(u, 'A06J') >= 1 and GetUnitAbilityLevel(u, 'A071') >= 1 then
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A02L', 4)
	endif
	call IssueTargetOrderById(bj_lastCreatedUnit, $D008E, u)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, 1, true, function JiaChuanMaJia)
	if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		call UnitAddAbility(u, 'A02D')
		call YDWEPolledWaitNull(4.)
		call UnitRemoveAbility(u, 'A02D')
	endif
	call RemoveLocation(loc)
	set u=null
	set loc=null
	set t=null
endfunction
//袖中指
function IsXiuZhong takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A0CC') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
endfunction
function xiuZhongZhiRemoveAgi takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 1)
	call ModifyHeroStat(1, u, 1, i)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function XiuZhongZhi takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real shxishu= 1.
 local real shanghai= 0.
 local integer gailv= 15
local timer t= CreateTimer()
	if GetUnitAbilityLevel(u, 'A071') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0DS') then
		set shxishu=shxishu * 1.8
		set gailv=gailv + 40
	endif
	set shanghai=ShangHaiGongShi(u , uc , 40. , 60. , shxishu , 'A0CC')
	if GetRandomInt(1, 100) <= gailv + fuyuan[i] / 6 + GetUnitAbilityLevel(u, 'A0CC') * 2 then
		if GetUnitAbilityLevel(u, 'A06P') >= 1 then
			call WanBuff(u , uc , 12)
		else
			call WanBuff(u , uc , 11)
		endif
		call WuGongShangHai(u , uc , shanghai)
		call WuGongShengChong(u , 'A0CC' , 600)
		//call SetUnitAnimation(u, "attack, slam")
		call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))) // INLINED!!
		// 慕容龙城称号加内力
		if isTitle(i , 26) then
			call ModifyHeroStat(1, u, 0, 20 * GetUnitAbilityLevel(u, 'A0CC'))
			call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
			call SaveInteger(YDHT, GetHandleId(t), 1, 20 * GetUnitAbilityLevel(u, 'A0CC'))
			call TimerStart(t, 15. + 2 * GetUnitAbilityLevel(u, 'A0CC'), false, function xiuZhongZhiRemoveAgi)
			// call ModifyHeroStat(1, u, 1, 20 * GetUnitAbilityLevel(u, 'A0CC'))
		endif
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set uc=null
	set p=null
	set loc=null
endfunction
//参合指
function IsCanHe takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A02M' )
endfunction
function CanHeZhi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local location loc= GetUnitLoc(uc)
	call WuGongShengChong(GetTriggerUnit() , 'A02M' , 200)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A02O')
	if GetUnitAbilityLevel(u, 'A06H') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02O')
	endif
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0097, uc)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function IsCanHeMaJia takes nothing returns boolean
	return GetEventDamage() == 5.15
endfunction
function CanHeMaJia takes nothing returns nothing
 local unit u= udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 90. , 50. , shxishu , 'A02M')
	call WuGongShangHai(u , uc , shanghai)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A02P')
	// 九阳残废
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02P')
	endif
	call UnitAddAbility(bj_lastCreatedUnit, 'A02Q')
	// 葵花破甲
	if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02Q')
	endif
	call IssueTargetOrderById(bj_lastCreatedUnit, $D00DD, uc)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D00B5, uc)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 4.)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function IsCanHeBeiDong takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A02V') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A02M') >= 1
endfunction
function CanHeBeiDong takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
	if GetRandomInt(1, 100) <= 10 then
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A02O')
		if GetUnitAbilityLevel(u, 'A06H') >= 1 then
			call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A02O')
		endif
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0097, uc)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
//真·星移斗转
function IsXingYi takes nothing returns boolean
	return GetSpellAbilityId() == 'A02R'
endfunction
function XingYiDouZhuan_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit uc= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local real r= 5.
 local real percent= GetUnitLifePercent(uc)
	if GetUnitAbilityLevel(u, 'A07Q') >= 1 then
		set r=10.
	endif
	if LoadBoolean(YDHT, GetHandleId(u), 10002) then
		if GetUnitLifePercent(u) <= percent - r then
			//call WuDi(uc)
			call percentDamage(uc , 100 + r - percent , false)
		else
			if GetUnitLifePercent(u) <= percent then
				//call WuDi(uc)
				if percent > r / 2 then
					call percentDamage(uc , RMaxBJ(100 + r / 2 - percent, 100 - GetUnitLifePercent(u)) , false)
				else
					call SetWidgetLife(uc, 1.)
				endif
			else
				//call WuDi(uc)
				if percent > 2. then
					call percentDamage(uc , 102 - percent , false)
				else
					call SetWidgetLife(uc, 1.)
				endif
			endif
		endif
	else
		call UnitRemoveAbility(u, 'A02T')
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	set t=null
	set u=null
	set uc=null
endfunction
function XingYiDouZhuan takes nothing returns nothing
 local timer t= CreateTimer()
	call WuGongShengChong(GetTriggerUnit() , 'A02R' , 120)
	call SaveBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002, true)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, GetSpellTargetUnit())
	call TimerStart(t, 0.3, true, function XingYiDouZhuan_1)
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A07Q') >= 1 then
		call UnitAddAbilityBJ('A02T', GetTriggerUnit())
		call SetPlayerAbilityAvailableBJ(false, 'A02T', GetOwningPlayer(GetTriggerUnit()))
	endif
	set t=null
endfunction
function IsXingYi_2 takes nothing returns boolean
	return GetSpellAbilityId() == 'A02R'
endfunction
function XingYiDouZhuan_2 takes nothing returns nothing
	//call BJDebugMsg("到这了")
	call SaveBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002, false)
endfunction
function IsXingYiBeiDong takes nothing returns boolean
	// 使用真斗转反伤，或者挨打反伤
	return LoadBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002) or ( ( IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) ) and GetUnitAbilityLevel(GetTriggerUnit(), 'A02R') >= 1 )
endfunction
function XingYiBeiDong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetAttacker()
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	if GetUnitAbilityLevel(u, 'A07W') >= 1 or isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 26) then
		call AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set shanghai=ShangHaiGongShi(u , uc , 50. , 50. , shxishu , 'A02R')
		call WuGongShangHai(u , uc , shanghai)
	endif
	if GetUnitAbilityLevel(u, 'A071') >= 1 then
		call WanBuff(u , uc , 1)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
//慕容家训
function IsJiaXun takes nothing returns boolean
	return GetSpellAbilityId() == 'A02V'
endfunction
function JiaXun takes nothing returns nothing
	call WuGongShengChong(GetTriggerUnit() , 'A02V' , 60)
endfunction
function MuRongJia_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsJiaChuan))
	call TriggerAddAction(t, function JiaChuanJian)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsXiuZhong))
	call TriggerAddAction(t, function XiuZhongZhi)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsCanHe))
	call TriggerAddAction(t, function CanHeZhi)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsCanHeMaJia))
	call TriggerAddAction(t, function CanHeMaJia)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsCanHeBeiDong))
	call TriggerAddAction(t, function CanHeBeiDong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsXingYi))
	call TriggerAddAction(t, function XingYiDouZhuan)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_FINISH)
	call TriggerAddCondition(t, Condition(function IsXingYi_2))
	call TriggerAddAction(t, function XingYiDouZhuan_2)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsXingYiBeiDong))
	call TriggerAddAction(t, function XingYiBeiDong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsJiaXun))
	call TriggerAddAction(t, function JiaXun)
	set t=null
endfunction
//鹰爪功 3级技
function IsYingZhao takes nothing returns boolean
	return ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) and GetUnitAbilityLevel(GetAttacker(), 'A030') >= 1
endfunction
function YingZhao_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function YingZhaoShangHai takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit uc= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local real shanghai= LoadReal(YDHT, GetHandleId(t), 2)
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A017') >= 1 and GetRandomInt(1, 5) == 1 then
		call WanBuff(u , uc , 7)
	endif
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
	set uc=null
endfunction
function YingZhao_Action takes nothing returns nothing
    local unit u=GetAttacker()
    local unit uc=GetEnumUnit()
    local real shxishu=1.
    local real shanghai=0.
    local integer i=1 + GetPlayerId(GetOwningPlayer(u))
    local location loc=GetUnitLoc(u)
    local timer t= CreateTimer()
 local real dist= 200.0
	// 学龙象，距离影响伤害
	 if GetUnitAbilityLevel(u, 'S002') >= 1 then
	    set dist=SquareRoot(( GetUnitX(u) - GetUnitX(uc) ) * ( GetUnitX(u) - GetUnitX(uc) ) + ( GetUnitY(u) - GetUnitY(uc) ) * ( GetUnitY(u) - GetUnitY(uc) ))
    endif
    set shxishu=1.8 + 0.2 * dist * GetRandomReal(20., 50.) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪"))) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪")))
    if GetUnitAbilityLevel(u, 'A034') >= 1 or GetUnitAbilityLevel(u, 'A035') >= 1 then
	    set shxishu=shxishu * 2
    endif
    if GetUnitAbilityLevel(u, 'A07W') >= 1 then
	    set shxishu=shxishu * 2
    endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I00D') then
	    set shxishu=shxishu * 2
  	endif
    set shanghai=ShangHaiGongShi(u , uc , 0.3 , 0.4 , shxishu , 'A030')
    call CreateNUnitsAtLoc(1, 'e014', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    call SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
    call UnitAddAbility(bj_lastCreatedUnit, 'Aloc')
    //call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A031')
    call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, uc)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 1.)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
    call SaveReal(YDHT, GetHandleId(t), 2, shanghai)
    call TimerStart(t, 0.3, false, function YingZhaoShangHai)
    call RemoveLocation(loc)
    set loc=null
    set u=null
    set uc=null
    set t=null
endfunction
function YingZhaoGong takes nothing returns nothing
 local unit u= GetAttacker()
 local group g= CreateGroup()
 local location loc= GetUnitLoc(u)
	if GetRandomReal(1, 100) < 25 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] / 3 + GetUnitAbilityLevel(u, 'A06L') * 8 then
		call WuGongShengChong(u , 'A030' , 1000)
		call GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 'A030'), Condition(function YingZhao_Condition))
		call SaveInteger(YDHT, GetHandleId(u), StringHash("鹰爪"), CountUnitsInGroup(g))
		call ForGroupBJ(g, function YingZhao_Action)
	endif
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set loc=null
	set g=null
	set u=null
endfunction
function IsYingZhaoZhuDong takes nothing returns boolean
	return GetSpellAbilityId() == 'A030'
endfunction
function YingZhaoZhuDong_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and IsUnitAliveBJ(GetFilterUnit()) and GetUnitAbilityLevel(GetFilterUnit(), 'Avul') < 1 and GetUnitTypeId(GetFilterUnit()) != 'N008'
endfunction
function YingZhaoZhuDong_Action takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local unit uc=GetEnumUnit()
    local real shxishu=1.
    local real shanghai=0.
    local integer i=1 + GetPlayerId(GetOwningPlayer(u))
    local location loc=GetUnitLoc(u)
    local timer t= CreateTimer()
    local real dist= 200.0
	// 学龙象，距离影响伤害
	if GetUnitAbilityLevel(u, 'S002') >= 1 then
	    set dist=SquareRoot(( GetUnitX(u) - GetUnitX(uc) ) * ( GetUnitX(u) - GetUnitX(uc) ) + ( GetUnitY(u) - GetUnitY(uc) ) * ( GetUnitY(u) - GetUnitY(uc) ))
    endif
    set shxishu=1.8 + 0.2 * dist * GetRandomReal(20., 50.) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动"))) / I2R(1 + LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动")))
    if GetUnitAbilityLevel(u, 'A034') >= 1 or GetUnitAbilityLevel(u, 'A035') >= 1 then
	    set shxishu=shxishu * 2
    endif
    if GetUnitAbilityLevel(u, 'A07W') >= 1 then
	    set shxishu=shxishu * 2
    endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I00D') then
	    set shxishu=shxishu * 2
  	endif
    set shanghai=ShangHaiGongShi(u , uc , 0.7 , 0.9 , shxishu , 'A030')
    call CreateNUnitsAtLoc(1, 'e014', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A031')
    call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, uc)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 1.)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
    call SaveReal(YDHT, GetHandleId(t), 2, shanghai)
    call TimerStart(t, 0.3, false, function YingZhaoShangHai)
    call RemoveLocation(loc)
    set loc=null
    set u=null
    set uc=null
    set t=null
endfunction
function YingZhaoGongZhuDong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local group g= CreateGroup()
 local location loc= GetUnitLoc(u)
	call WuGongShengChong(u , 'A030' , 1000)
	call GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 'A030'), Condition(function YingZhaoZhuDong_Condition))
	call SaveInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动"), CountUnitsInGroup(g))
	call ForGroupBJ(g, function YingZhaoZhuDong_Action)
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set loc=null
	set g=null
	set u=null
endfunction
//蝠翼纵 8级技
function IsFuYi takes nothing returns boolean
	return GetSpellAbilityId() == 'A032'
endfunction
function FuYiZong_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local real oldSpeed= LoadReal(YDHT, GetHandleId(t), 1)
 local real oldSpeed2= (s__ModSpeed_getSpeed((u))) - LoadReal(YDHT, GetHandleId(t), 2) // INLINED!!
	call h__SetUnitMoveSpeed(u, RMaxBJ(RMinBJ(oldSpeed, oldSpeed2), 350.))
	call UnitRemoveAbility(u, 'A02T')
	call UnitRemoveAbility(u, 'A0DB')
	call PauseTimer(t)
	call DestroyTimer(t)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	set u=null
	set t=null
endfunction
function FuYiZong_2_Condition takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)))
endfunction
function FuYiZong_2_Action takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
 local unit uc= GetEnumUnit()
	if GetRandomInt(1, 50) == 1 then
		call WanBuff(u , uc , 12)
	endif
	set u=null
	set uc=null
endfunction
function FuYiZong_2 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local group g= null
 local location loc= GetUnitLoc(u)
 local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
 local integer jmax= 100
	if j <= jmax then
		set g=CreateGroup()
		call GroupEnumUnitsInRangeOfLoc(g, loc, 300, Condition(function FuYiZong_2_Condition))
		call ForGroupBJ(g, function FuYiZong_2_Action)
		call DestroyGroup(g)
		call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set loc=null
	set g=null
endfunction
function FuYiZong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real time= 5. + I2R(GetUnitAbilityLevel(u, 'A032'))
 local real oldSpeed= (s__ModSpeed_getSpeed((u))) // INLINED!!
 local timer t= CreateTimer()
 local timer tm= null
	call WuGongShengChong(u , 'A032' , 100)
	call h__SetUnitMoveSpeed(u, oldSpeed + 700 + jingmai[i] * 10)
	// A07W乾坤90%闪避改成葵花
	if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		call UnitAddAbilityBJ('A02T', u)
    	call SetPlayerAbilityAvailableBJ(false, 'A02T', GetOwningPlayer(u))
	endif
	// 九阳A0DN改成龙象S002
	if GetUnitAbilityLevel(u, 'S002') >= 1 then
		call UnitAddAbility(u, 'A0DB')
		call SetUnitAbilityLevel(u, 'A0DB', GetUnitAbilityLevel(u, 'A032') + 1)
	endif
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveReal(YDHT, GetHandleId(t), 1, oldSpeed)
	call SaveReal(YDHT, GetHandleId(t), 2, 700 + jingmai[i] * 10)
	call TimerStart(t, time, false, function FuYiZong_1)
	if GetUnitAbilityLevel(u, 'A017') >= 1 then
		set tm=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		call TimerStart(tm, time / 100, true, function FuYiZong_2)
	endif
	set u=null
	set t=null
	set tm=null
	//local location loc = GetUnitLoc(u)
	//local integer i = 0
	//local integer num = 0
	//local location array loc2
	//local location loc3 = pu(loc, 400 + 80 * GetUnitAbilityLevel(u, 'A030'), GetRandomReal(0., 360.))
	//local group g = CreateGroup()
	//local group g2 = CreateGroup()
	//local unit uc = null
	//local lightning array light
	//call YDWEPolledWaitNull(.15)
	//call GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 'A030'), Condition(function YingZhaoZhuDong_Condition))
	//if g != null then
	//	set num = CountUnitsInGroup(g)
	//endif
	//if num >= 1 then
	//	set i = 1
	//	loop
	//		exitwhen i > (num + 1)/2
	//		set uc = GroupPickRandomUnit(g)
	//		call GroupAddUnit(g2, uc)
	//		call GroupRemoveUnit(g, uc)
	//		set loc2[i] = GetUnitLoc(uc)
	//		call SetUnitPositionLocFacingLocBJ(u,loc2[i],loc2[i])
	//		call SetUnitAnimation(u,"ATTACK")
	//		call YDWEPolledWaitNull(.15)
	//		if i > 1 then
	//			set light[i] = AddLightningLoc("FORK",loc2[i-1],loc2[i])
	//			call DestroyLightning(light[i-1])
	//			set light[i-1] = null
	//		else
	//			set light[i] = AddLightningLoc("FORK",loc,loc2[i])
	//		endif
	//		set uc = null
	//		set i = i + 1
	//	endloop
	//endif
	//if light[i-1] != null then
	//	call YDWEPolledWaitNull(.15)
	//	call DestroyLightning(light[i-1])
	//	set light[i-1] = null
	//endif
	//if g2 != null and CountUnitsInGroup(g2)>=1 then
	//	call SetUnitPositionLocFacingLocBJ(u,loc3,loc3)
	//	set light[1] = AddLightningLoc("FORK",loc2[i-1],loc3)
	//	set num = CountUnitsInGroup(g2)
	//endif
	//set i = 1
	//if num >= 1 then
	//	set i = 1
	//	loop
	//		exitwhen i >= num
	//		set uc = GroupPickRandomUnit(g2)
	//		call GroupRemoveUnit(g2, uc)
	//		call SetUnitPositionLocFacingLocBJ(uc,loc3,loc3)
	//		call SetUnitAnimation(uc,"ATTACK")
	//		if GetUnitAbilityLevel(u,'A0DE')>=1 then
	//			call WanBuff(u, uc, 12)
	//		else
	//			call WanBuff(u, uc, 11)
	//		endif
	//		set uc = null
	//		set i = i + 1
	//	endloop
	//endif
	//if light[1] != null then
	//	call YDWEPolledWaitNull(.15)
	//	call DestroyLightning(light[1])
	//endif
	//if num > 1 then
	//	call SetUnitPositionLocFacingLocBJ(u,loc,loc)
	//	set light[1] = AddLightningLoc("FORK",loc3,loc)
	//	call YDWEPolledWaitNull(.15)
	//	call DestroyLightning(light[1])
	//endif
	//if GetUnitAbilityLevel(u, 'A07W')>=1 then
	//	call UnitAddAbilityBJ( 'A02T', u )
 //   	call SetPlayerAbilityAvailableBJ( false, 'A02T', GetOwningPlayer(u) )
 //   	call YDWEPolledWaitNull(4.)
 //   	call UnitRemoveAbility(u, 'A02T')
	//endif
	//call RemoveLocation(loc)
	//call RemoveLocation(loc3)
	//call DestroyGroup(g)
	//call DestroyGroup(g2)
	//set u = null
	//set uc = null
	//set loc = null
	//set loc3 = null
	//set g = null
	//set g2 = null
	//set light[1] = null
endfunction
//狮子吼 15级技
function IsShiZi takes nothing returns boolean
	return GetSpellAbilityId() == 'A06R'
endfunction
function ShiZiHou_Action takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEnumUnit()
 local real shxishu=1.
    local real shanghai=0.
 local real dist= SquareRoot(( GetUnitX(u) - GetUnitX(uc) ) * ( GetUnitX(u) - GetUnitX(uc) ) + ( GetUnitY(u) - GetUnitY(uc) ) * ( GetUnitY(u) - GetUnitY(uc) ))
	if GetUnitAbilityLevel(u, 'A07W') >= 1 then
	    set shxishu=shxishu + 1.
    endif
    if GetUnitAbilityLevel(u, 'A07M') >= 1 then
	    set shxishu=shxishu + .7
    endif
	// 专属加成
	if UnitHasDenomWeapon(u , 'I00D') then
	    set shxishu=shxishu * 2
  	endif
	set shanghai=ShangHaiGongShi(u , uc , 100. , 200. , shxishu , 'A06R')
	call knock_back(uc , Atan2(GetUnitY(uc) - GetUnitY(u), GetUnitX(uc) - GetUnitX(u)) , GetRandomReal(320., 720.) + 80 * GetUnitAbilityLevel(u, 'A030') - dist , 1. , 0.05 , "Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl" , 0)
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 and GetRandomInt(1, 3) == 2 then
		call WanBuff(u , uc , 9)
	endif
	set u=null
	set uc=null
endfunction
function ShiZiHou takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local integer level= 0
 local group g= CreateGroup()
	call WuGongShengChong(u , 'A06R' , 200)
	call GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 'A030'), Condition(function YingZhaoZhuDong_Condition))
	call ForGroupBJ(g, function ShiZiHou_Action)
	if ( GetUnitAbilityLevel(u, 'A034') > 0 or GetUnitAbilityLevel(u, 'A035') >= 1 ) and GetRandomReal(0, 100) >= 30 then
		set level=GetUnitAbilityLevel(u, 'A06R')
		call UnitRemoveAbility(u, 'A06R')
		call UnitAddAbility(u, 'A06R')
		call SetUnitAbilityLevel(u, 'A06R', level)
	endif
	set u=null
	set loc=null
	set g=null
endfunction
//圣火令神功 25级技1
function IsShengHuo takes nothing returns boolean
	return GetSpellAbilityId() == 'A034'
endfunction
//改进转圈函数
function ZhuanQuan_1 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit uc= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local real angle= LoadReal(YDHT, GetHandleId(t), 2)
 local real dist= LoadReal(YDHT, GetHandleId(t), 3)
 local real angle0= LoadReal(YDHT, GetHandleId(t), 4)
 local real dist0= LoadReal(YDHT, GetHandleId(t), 5)
 local location loc= GetUnitLoc(u)
 local real x=.0
 local real y=.0
	//call BJDebugMsg("转圈1执行了，angle0="+R2S(angle0))
	if IsUnitAliveBJ(u) == false then
		call KillUnit(uc)
		call RemoveUnit(uc)
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	if ( dist >= 0 ) and ( GetUnitState(uc, UNIT_STATE_LIFE) > 0 ) and ( GetUnitState(u, UNIT_STATE_LIFE) > 0 ) and ( ( uc == shenghuoling_1 and ling1zhuan ) or ( uc == shenghuoling_2 and ling2zhuan ) or ( uc == shenghuoling_3 and ling3zhuan ) ) then
		set x=GetUnitX(u) + ( dist + dist0 ) * Cos(angle + angle0)
		set y=GetUnitY(u) + ( dist + dist0 ) * Sin(angle + angle0)
		call SaveReal(YDHT, GetHandleId(t), 4, angle + angle0)
		call SaveReal(YDHT, GetHandleId(t), 5, dist + dist0)
		call SetUnitX(uc, CheckX(x))
		call SetUnitY(uc, CheckY(y))
		call SetUnitFacing(uc, Atan2(GetUnitY(uc) - GetUnitY(u), GetUnitX(uc) - GetUnitX(u)))
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set uc=null
	set loc=null
endfunction
function ZhuanQuan takes unit uc,unit u,real angle,real dist returns nothing
 local real x1=GetUnitX(uc)
 local real y1=GetUnitY(uc)
 local real x2=GetUnitX(u)
 local real y2=GetUnitY(u)
 local timer t= CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, uc)
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
	call SaveReal(YDHT, GetHandleId(t), 2, angle * ( 3.14159 / 180. ))
	call SaveReal(YDHT, GetHandleId(t), 3, dist)
	call SaveReal(YDHT, GetHandleId(t), 4, Atan2(y2 - y1, x2 - x1))
	call SaveReal(YDHT, GetHandleId(t), 5, SquareRoot(( x2 - x1 ) * ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 )))
	call TimerStart(t, 0.01, true, function ZhuanQuan_1)
	//call BJDebugMsg("转圈执行了")
	set t=null
endfunction
function ShengHuoLing takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call WuGongShengChong(u , 'A034' , 100)
	call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A034' * 5, GetUnitAbilityLevel(u, 'A034'))
	call UnitRemoveAbility(u, 'A034')
	call UnitAddAbility(u, 'A035')
	call SetUnitAbilityLevel(u, 'A035', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A034' * 5))
	call CreateNUnitsAtLoc(1, 'e013', GetOwningPlayer(u), pu(loc , 325. , 0), 90)
	set shenghuoling_1=bj_lastCreatedUnit
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
	call ZhuanQuan(shenghuoling_1 , u , 1. , 0.)
	set ling1zhuan=true
	call CreateNUnitsAtLoc(1, 'e013', GetOwningPlayer(u), pu(loc , 325. , 120.), 210)
	set shenghuoling_2=bj_lastCreatedUnit
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
	call ZhuanQuan(shenghuoling_2 , u , 1. , 0.)
	set ling2zhuan=true
	call CreateNUnitsAtLoc(1, 'e013', GetOwningPlayer(u), pu(loc , 325. , 240.), 330)
	set shenghuoling_3=bj_lastCreatedUnit
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
	call ZhuanQuan(shenghuoling_3 , u , 1. , 0.)
	set ling3zhuan=true
	set u=null
	set loc=null
endfunction
function IsRengShengHuo takes nothing returns boolean
	return GetSpellAbilityId() == 'A035'
endfunction
function RengShengHuoLing_Action takes nothing returns nothing
 local timer t=GetExpiredTimer()
 local integer p=GetHandleId(t)
 local unit u=LoadUnitHandle(YDHT, p, 0)
 local unit uc=LoadUnitHandle(YDHT, p, 1)
 local unit l__ut=LoadUnitHandle(YDHT, p, 2)
 local location loc=LoadLocationHandle(YDHT, p, 3)
 local real myX=GetLocationX(loc)
    local real myY=GetLocationY(loc)
    local real hisX=GetUnitX(uc)
    local real hisY=GetUnitY(uc)
    local location loc2=null
    local real dist=0.
    local real angle=0.
    local integer i=LoadInteger(YDHT, p, 4)
    local real perc=0.04
    local integer imax=25
    local real shxishu=1.
    local real shanghai=0
	// 专属加成
	if UnitHasDenomWeapon(u , 'I00D') then
	    set shxishu=shxishu * 2
  	endif
    set shanghai=ShangHaiGongShi(u , uc , 400 , 300 , shxishu , 'A035')
    if i <= imax then
        set hisX=GetUnitX(uc)
        set hisY=GetUnitY(uc)
    	set angle=Atan2(hisY - myY, hisX - myX)
    	set dist=SquareRoot(( hisX - myX ) * ( hisX - myX ) + ( hisY - myY ) * ( hisY - myY ))
        set loc2=Location(myX + perc * i * dist * Cos(angle), myY + perc * i * dist * Sin(angle))
        call SetUnitPositionLoc(l__ut, loc2)
        call SaveInteger(YDHT, p, 4, i + 1)
    else
        call WuGongShangHai(u , uc , shanghai)
        call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , uc , "overhead"))) // INLINED!!
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, p)
        call KillUnit(l__ut)
        call RemoveUnit(l__ut)
        if GetUnitState(shenghuoling_1, UNIT_STATE_LIFE) < 1 and GetUnitState(shenghuoling_2, UNIT_STATE_LIFE) < 1 and GetUnitState(shenghuoling_3, UNIT_STATE_LIFE) < 1 then
        	call UnitRemoveAbility(u, 'A035')
			call UnitAddAbility(u, 'A034')
			call SetUnitAbilityLevel(u, 'A034', LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 'A034' * 5))
		endif
        call RemoveLocation(loc)
    endif
    call RemoveLocation(loc2)
    set t=null
    set u=null
    set uc=null
    set l__ut=null
    set loc=null
    set loc2=null
endfunction
function RengShengHuoLing takes nothing returns nothing
 local unit u=GetTriggerUnit()
    local unit uc=GetSpellTargetUnit()
    local location loc= null
    local timer t=CreateTimer()
    local integer p=GetHandleId(t)
    local unit l__ut=null
    if GetUnitState(shenghuoling_1, UNIT_STATE_LIFE) > 0 then
	    set l__ut=shenghuoling_1
	    set ling1zhuan=false
	elseif GetUnitState(shenghuoling_2, UNIT_STATE_LIFE) > 0 then
		set l__ut=shenghuoling_2
		set ling2zhuan=false
	else
		set l__ut=shenghuoling_3
		set ling3zhuan=false
	endif
	set loc=GetUnitLoc(l__ut)
    call SaveUnitHandle(YDHT, p, 0, u)
    call SaveUnitHandle(YDHT, p, 1, uc)
    call SaveUnitHandle(YDHT, p, 2, l__ut)
    call SaveLocationHandle(YDHT, p, 3, loc)
    call SaveInteger(YDHT, p, 4, 0)
    call TimerStart(t, 0.03, true, function RengShengHuoLing_Action)
    set u=null
    set uc=null
    set l__ut=null
    set loc=null
    set t=null
endfunction
//乾坤大挪移 25级技2
function IsQianKunTan takes nothing returns boolean
	return ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) ) and GetUnitAbilityLevel(GetTriggerUnit(), 'A07W') >= 2
endfunction
function QianKunTan_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and IsUnitAliveBJ(GetFilterUnit()) and GetUnitAbilityLevel(GetFilterUnit(), 'Avul') < 1
endfunction
function QianKunTan takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEventDamageSource()
 local unit l__ut= null
 local group g= CreateGroup()
 local location loc= GetUnitLoc(u)
 local real shanghai= GetEventDamage()
	if GetRandomInt(0, 100) < 10 + 5 * GetUnitAbilityLevel(u, 'A07W') then
		call WuDi(u)
		call GroupEnumUnitsInRangeOfLoc(g, loc, 1000, Condition(function QianKunTan_Condition))
		if g != null then
			set l__ut=GroupPickRandomUnit(g)
			call WuGongShangHai(u , l__ut , shanghai * 50 * GetUnitAbilityLevel(u, 'A07W'))
			call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , l__ut , "overhead"))) // INLINED!!
		endif
		call WuGongShengChong(u , 'A07W' , 2000)
	endif
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set u=null
	set uc=null
	set l__ut=null
	set loc=null
	set g=null
endfunction
//事件
function VIPMingJiao_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsYingZhao))
    call TriggerAddAction(t, function YingZhaoGong)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsYingZhaoZhuDong))
    call TriggerAddAction(t, function YingZhaoGongZhuDong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsFuYi))
    call TriggerAddAction(t, function FuYiZong)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsShiZi))
    call TriggerAddAction(t, function ShiZiHou)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsShengHuo))
    call TriggerAddAction(t, function ShengHuoLing)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsRengShengHuo))
    call TriggerAddAction(t, function RengShengHuoLing)
    set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsQianKunTan))
    call TriggerAddAction(t, function QianKunTan)
    set t=null
endfunction
//=================================================
//神龙教
//男性角色：子胥举鼎A04W、鲁达拔柳A04Z、狄青降龙A051
//女性角色：贵妃回眸A04X、飞燕回翔A054、小怜横陈A056
//内功：神龙八式A057、神龙心法A059
//=================================================
//子胥举鼎
function IsZiXuBeiDong takes nothing returns boolean
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) and GetUnitAbilityLevel(GetTriggerUnit(), 'A04W') >= 1
endfunction
function ZiXuBeiDong takes nothing returns nothing
 local integer i= GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1
	if GetRandomReal(1, 300) < 15 + fuyuan[i] / 5 then
		call maJiaUseAbilityAtEnemysLoc(GetTriggerUnit() , 'e000' , 'A04W' , $D0102 , GetAttacker() , 15.)
	endif
endfunction
function IsZiXuJuDing takes nothing returns boolean
	return ( ( GetEventDamage() == .95 ) )
endfunction
function ZiXuJuDing takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc= GetTriggerUnit()
    local real shxishu= 1.
    local real shanghai= 0.
    local location loc= GetUnitLoc(uc)
    if ( ( GetUnitAbilityLevel(u, 'A06L') != 0 ) ) then //加化骨绵掌
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A03N') != 0 ) ) then //加神行百变
        set shxishu=shxishu + .7
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 24 , 40 , shxishu , 'A04W')
    call WuGongShangHai(u , uc , shanghai)
    if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) and ( GetRandomInt(1, 100) <= 30 ) and ( UnitHasBuffBJ(uc, 1111844210) == false ) ) then //加连城走火入魔
call WanBuff(u , uc , 2)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A04V') != 0 ) and ( GetRandomInt(1, 100) <= 30 ) and ( UnitHasBuffBJ(uc, 1110454323) == false ) ) then //加夫妻神经错乱
call WanBuff(u , uc , 10)
    endif
    if ( GetUnitAbilityLevel(u, 'S002') != 0 ) and ( GetRandomInt(1, 100) <= 25 ) and IsUnitAliveBJ(uc) then //加龙象几率连环爆裂
call YDWEPolledWaitNull(0.15)
        call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A04W')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0102, uc)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
    endif
    call RemoveLocation(loc)
    call WuGongShengChong(u , 'A04W' , 2400.)
    call WuGongShengChong(u , 'A059' , 2500.)
    set u=null
    set uc=null
    set loc=null
endfunction
//小怜横陈
function IsXiaoLianHengChen takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A056') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function XiaoLian_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function XiaoLian_Action takes nothing returns nothing
 local unit uc= GetEnumUnit()
 local unit u= GetAttacker()
 local real x= GetUnitX(uc)
 local real y= GetUnitY(uc)
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then //加九阴
        set shxishu=shxishu + .7
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    // 教主夫人加成
    if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 33) then
        set shxishu=shxishu * 2
    endif
	call DestroyEffect((AddSpecialEffectEx("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl" , x , y))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 8 , 11 , shxishu , 'A056')
	if GetUnitAbilityLevel(u, 'A059') != 0 and GetRandomReal(1, 100) <= 30 then //加神龙心法
// 封穴加变羊
call WanBuff(u , uc , 11) //封穴
call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A05A')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0216, uc)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	endif
	
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
function XiaoLianHengChen takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc1= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	if ( GetRandomReal(.0, 100.) <= 30. + fuyuan[i] / 3 + GetUnitAbilityLevel(u, 'A056') * 4 ) then
		//加爪子加范围
        call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800 + 100 * ( GetUnitAbilityLevel(u, 'A07N') ) , loc1 , Condition(function XiaoLian_Condition)), function XiaoLian_Action)
        // call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500+500*(GetUnitAbilityLevel(u,'A07U')),loc1,Condition(function XiaoLian_Condition)),function XiaoLian_Action)
        call WuGongShengChong(u , 'A056' , 900.)
        call WuGongShengChong(u , 'A059' , 2500.)
        if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) ) then //加双手回复20%内功
            call SetUnitState(u, UNIT_STATE_MANA, ( GetUnitState(u, UNIT_STATE_MANA) + ( .2 * GetUnitState(u, UNIT_STATE_MAX_MANA) ) ))
		endif
	endif
	call RemoveLocation(loc1)
	call RemoveLocation(loc2)
	set u=null
	set uc=null
	set loc1=null
	set loc2=null
endfunction
//贵妃回眸
function IsGuiFeiHuiMou takes nothing returns boolean
	return GetSpellAbilityId() == 'A04X'
endfunction
function XiaoLian_Condition_1 takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) and ( IsUnitAliveBJ(GetFilterUnit()) )
endfunction
function XiaoLian_Action_1 takes nothing returns nothing
 local unit uc= GetEnumUnit()
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
 local real x= GetUnitX(uc)
 local real y= GetUnitY(uc)
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectEx("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl" , x , y))) // INLINED!!
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then //加九阴
        set shxishu=shxishu + .7
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    // 教主夫人加成
    if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 33) then
        set shxishu=shxishu * 2
    endif
	set shanghai=ShangHaiGongShi(u , uc , 8 , 11 , shxishu , 'A056')
	if GetUnitAbilityLevel(u, 'A059') != 0 and GetRandomReal(1, 100) <= 30 then //加神龙心法
call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A05A')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0216, uc)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	endif
	
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
function GuiFeiHuiMou takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local player p= GetOwningPlayer(u)
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A04Y')
    call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, l__ut)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
    call RemoveLocation(loc)
    set loc=null
    set u=null
    set l__ut=null
    set p=null
endfunction
function IsGuiFeiHuiMouSH takes nothing returns boolean
	return ( ( GetEventDamage() == .96 ) )
endfunction
function GuiFeiHuiMouSH takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc= GetTriggerUnit()
    local location loc= GetUnitLoc(uc)
    local location loc2= GetUnitLoc(u)
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    local real shxishu= RMinBJ(DistanceBetweenPoints(loc, loc2) / 500, 4)
    local real shanghai= 0.
    call WuGongShengChong(u , 'A04X' , 500.)
    call WuGongShengChong(u , 'A059' , 2500.)
    // 加弹指概率穴位全封
    if ( GetUnitAbilityLevel(u, 'A06H') != 0 ) and GetRandomInt(1, 100) <= 40 + GetUnitAbilityLevel(u, 'A07N') * 4 then
        call WanBuff(u , uc , 12)
    endif
    if ( GetUnitAbilityLevel(u, 'A03V') != 0 ) then //加擒龙
set shxishu=RMinBJ(DistanceBetweenPoints(loc, loc2) / 300, 10)
    endif
    if ( GetUnitAbilityLevel(u, 'A07S') != 0 ) then //加九阴真经
set shxishu=shxishu + 1
    endif
    // if (GetUnitAbilityLevel(u,'A083')!=0) then //加小无相
	//     set shxishu= shxishu + 1.2
    // endif
	if ( GetUnitAbilityLevel(u, 'A056') != 0 ) and ( GetRandomReal(.0, 100.) <= 30. + fuyuan[i] / 3 + GetUnitAbilityLevel(u, 'A04X') * 5 ) then //加小怜横陈
call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800 + 100 * ( GetUnitAbilityLevel(u, 'A07N') ) , loc , Condition(function XiaoLian_Condition_1)), function XiaoLian_Action_1)
        call WuGongShengChong(u , 'A056' , 900.)
        call WuGongShengChong(u , 'A059' , 2500.)
        if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) ) then //加九爪
            call SetUnitState(u, UNIT_STATE_MANA, ( GetUnitState(u, UNIT_STATE_MANA) + ( .2 * GetUnitState(u, UNIT_STATE_MAX_MANA) ) ))
		endif
	endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , uc , 80 , 90 , shxishu , 'A04X')
    call WuGongShangHai(u , uc , shanghai)
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    set u=null
    set uc=null
    set loc=null
	set loc2=null
endfunction
//鲁达拔柳
function IsLuDaBaLiu takes nothing returns boolean
	return UnitHasBuffBJ(GetAttacker(), 'B016') and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
endfunction
function LuDaBaLiuYun takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit l__ut= LoadUnitHandle(YDHT, GetHandleId(t), 1)
	if ( ( GetUnitAbilityLevel(u, 'A06L') != 0 ) ) then //加化骨穴位全封
		call WanBuff(u , l__ut , 12)
	else
		call WanBuff(u , l__ut , 11)
	endif
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
	set l__ut=null
endfunction
function LuDaBaLiu takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetTriggerUnit()
 local timer t= CreateTimer()
 local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A057') != 0 ) ) then //加神龙八式
        set shxishu=shxishu + .6
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0CE') != 0 ) ) then //加龟息功
        set shxishu=shxishu + 1.
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , l__ut , 80 , 100 , shxishu , 'A04Z')
    call WuGongShangHai(u , l__ut , shanghai)
    call WuGongShengChong(u , 'A04Z' , 200.)
    call WuGongShengChong(u , 'A059' , 2500.)
    if GetUnitAbilityLevel(u, 'A082') >= 1 or ( GetUnitAbilityLevel(u, 'A06J') >= 1 and GetRandomInt(1, 100) <= 30 ) then //加北冥或连城几率，BUFF不消失
else
		call UnitRemoveBuffBJ('B016', u)
	endif
	call YDWEJumpTimer(l__ut , 0 , 0.00 , 1.00 , 0.01 , 500.00)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
	call TimerStart(t, 1., false, function LuDaBaLiuYun)
	set u=null
	set l__ut=null
	set t=null
endfunction
//狄青降龙
function IsDiQingXiangLong takes nothing returns boolean
	return GetSpellAbilityId() == 'A051'
endfunction
function DiQingXiangLongCai takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
    call UnitAddAbility(bj_lastCreatedUnit, 'A050')
    call IssueImmediateOrderById(bj_lastCreatedUnit, $D0080)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
    call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
	set ut=null
	set loc=null
endfunction
function DiQingXiaoWu takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer i= LoadInteger(YDHT, GetHandleId(t), 0)
	set udg_shanghaixishou[i]=udg_shanghaixishou[i] - .1
    call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
endfunction
function DiQingXiangLong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(l__ut)
 local timer t= CreateTimer()
 local timer tm= CreateTimer()
    local integer beishu= 1
local integer gailv= 10
call WuGongShengChong(u , 'A051' , 150.)
	call WuGongShengChong(u , 'A059' , 2500.)
    // 专属加成,5倍偷木加内力
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set beishu=beishu * 5
        set gailv=gailv + 40
    endif
    // 神龙教主加成
    if isTitle(i , 32) then
        set beishu=beishu * 2
        set gailv=gailv + 10
    endif
	if GetUnitAbilityLevel(u, 'A03O') != 0 and GetRandomInt(1, 100) <= gailv + GetUnitLevel(l__ut) / 2 then //妙手空空偷珍稀币
call commonAddLumber(GetOwningPlayer(u) , beishu * GetRandomInt(1, 5))
	endif
	if GetUnitAbilityLevel(u, 'A07R') != 0 and GetRandomInt(1, 100) <= gailv + GetUnitLevel(l__ut) / 2 then //吸星大法加内力
call ModifyHeroStat(1, u, 0, beishu * GetRandomInt(1, 10))
	endif
	if GetUnitAbilityLevel(u, 'A083') != 0 and GetRandomInt(1, 100) <= gailv + GetUnitLevel(l__ut) / 2 then //小无相加伤害吸收
set udg_shanghaixishou[i]=udg_shanghaixishou[i] + .1
		call SaveInteger(YDHT, GetHandleId(tm), 0, i)
		call TimerStart(tm, 15, false, function DiQingXiaoWu)
	endif
	call YDWEJumpTimer(u , AngleBetweenPoints(loc, loc2) , DistanceBetweenPoints(loc, loc2) , 0.70 , 0.02 , 500.00)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, 0.7, false, function DiQingXiangLongCai)
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    set loc=null
    set loc2=null
    set u=null
    set l__ut=null
    set p=null
    set t=null
    set tm=null
endfunction
function IsDiQingXiangLongSH takes nothing returns boolean
	return ( ( GetEventDamage() == .97 ) )
endfunction
function DiQingXiangLongSH takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit l__ut= GetTriggerUnit()
    local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) ) then //加七伤拳
call WanBuff(u , l__ut , GetRandomInt(1, 13))
	else
		call WanBuff(u , l__ut , 9)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A03T') != 0 ) ) then //加须弥山掌
set shxishu=shxishu + 1.2
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , l__ut , 100 , 140 , shxishu , 'A051')
    call WuGongShangHai(u , l__ut , shanghai)
    set u=null
    set l__ut=null
endfunction
//飞燕回翔
function IsFeiYanHuiXiang takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A054' ) )
endfunction
function isBirdEnemy takes nothing returns boolean
    return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 13)))
endfunction
function birdDamage takes unit u,unit l__ut returns nothing
 local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then //加九阴真经
        set shxishu=shxishu + .7
    endif
    if ( ( GetUnitAbilityLevel(u, 'A083') != 0 ) ) then //加小无相功
        set shxishu=shxishu + 1.3
    endif
    if ( ( GetUnitAbilityLevel(u, 'A059') != 0 ) ) then //加神龙心法，破防
        call WanBuff(u , l__ut , 9)
    endif
    if ( ( GetUnitAbilityLevel(u, 'A057') != 0 ) ) then //加神龙八式
        set shxishu=shxishu + 2.0
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    // 教主夫人加成
    if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 33) then
        set shxishu=shxishu * 2
    endif
    set shanghai=ShangHaiGongShi(u , l__ut , 15 , 10 , shxishu , 'A054')
    call WuGongShangHai(u , l__ut , shanghai)
    call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl" , GetEnumUnit() , "overhead"))) // INLINED!!
endfunction
function leftBirdDamage takes nothing returns nothing
    call birdDamage(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 9) , GetEnumUnit())
endfunction
function rightBirdDamage takes nothing returns nothing
    call birdDamage(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 10) , GetEnumUnit())
endfunction
function birdFlying takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local real array x
    local real array y
    local real comp= LoadReal(YDHT, GetHandleId(t), 8)
    local unit left= LoadUnitHandle(YDHT, GetHandleId(t), 9)
    local unit right= LoadUnitHandle(YDHT, GetHandleId(t), 10)
    local group leftGroup= CreateGroup()
    local group rightGroup= CreateGroup()
    local real a= LoadReal(YDHT, GetHandleId(t), 11)
    local real b= 1 - a
    local boolean front= LoadBoolean(YDHT, GetHandleId(t), 12)
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 13)
    set x[0]=LoadReal(YDHT, GetHandleId(t), 0)
    set x[1]=LoadReal(YDHT, GetHandleId(t), 1)
    set x[2]=LoadReal(YDHT, GetHandleId(t), 2)
    set x[3]=LoadReal(YDHT, GetHandleId(t), 3)
    set y[0]=LoadReal(YDHT, GetHandleId(t), 4)
    set y[1]=LoadReal(YDHT, GetHandleId(t), 5)
    set y[2]=LoadReal(YDHT, GetHandleId(t), 6)
    set y[3]=LoadReal(YDHT, GetHandleId(t), 7)
    call SetUnitX(left, x[0] * a * a + x[2] * 2 * a * b + x[1] * b * b)
    call SetUnitY(left, y[0] * a * a + y[2] * 2 * a * b + y[1] * b * b)
    call SetUnitX(right, x[0] * a * a + x[3] * 2 * a * b + x[1] * b * b)
    call SetUnitY(right, y[0] * a * a + y[3] * 2 * a * b + y[1] * b * b)
    if GetUnitX(left) > GetRectMaxX(bj_mapInitialPlayableArea) - 50 then
        call SetUnitX(left, GetRectMaxX(bj_mapInitialPlayableArea) - 50)
    endif
    if GetUnitX(left) < GetRectMinX(bj_mapInitialPlayableArea) + 50 then
        call SetUnitX(left, GetRectMinX(bj_mapInitialPlayableArea) + 50)
    endif
    if GetUnitY(left) > GetRectMaxY(bj_mapInitialPlayableArea) - 50 then
        call SetUnitY(left, GetRectMaxY(bj_mapInitialPlayableArea) - 50)
    endif
    if GetUnitY(left) < GetRectMinY(bj_mapInitialPlayableArea) + 50 then
        call SetUnitY(left, GetRectMinY(bj_mapInitialPlayableArea) + 50)
    endif
    if GetUnitX(right) > GetRectMaxX(bj_mapInitialPlayableArea) - 50 then
        call SetUnitX(right, GetRectMaxX(bj_mapInitialPlayableArea) - 50)
    endif
    if GetUnitX(right) < GetRectMinX(bj_mapInitialPlayableArea) + 50 then
        call SetUnitX(right, GetRectMinX(bj_mapInitialPlayableArea) + 50)
    endif
    if GetUnitY(right) > GetRectMaxY(bj_mapInitialPlayableArea) - 50 then
        call SetUnitY(right, GetRectMaxY(bj_mapInitialPlayableArea) - 50)
    endif
    if GetUnitY(right) < GetRectMinY(bj_mapInitialPlayableArea) + 50 then
        call SetUnitY(right, GetRectMinY(bj_mapInitialPlayableArea) + 50)
    endif
    call GroupEnumUnitsInRange(leftGroup, GetUnitX(left), GetUnitY(left), 115, Condition(function isBirdEnemy))
    call GroupEnumUnitsInRange(rightGroup, GetUnitX(right), GetUnitY(right), 115, Condition(function isBirdEnemy))
    call ForGroup(leftGroup, function leftBirdDamage)
    call ForGroup(leftGroup, function rightBirdDamage)
    call DestroyGroup(leftGroup)
    call DestroyGroup(rightGroup)
    if front then
        set a=a - 0.05
        call SaveReal(YDHT, GetHandleId(t), 11, a)
    else
        set x[0]=GetUnitX(u)
        set y[0]=GetUnitY(u)
        set a=a + 0.05
        call SaveReal(YDHT, GetHandleId(t), 11, a)
        call SaveReal(YDHT, GetHandleId(t), 0, x[0])
        call SaveReal(YDHT, GetHandleId(t), 4, y[0])
        set comp=Atan2(y[1] - y[0], x[1] - x[0])
        call SaveReal(YDHT, GetHandleId(t), 8, comp)
    endif
    if ( a <= 0 and front ) then
        set front=false
        call SaveBoolean(YDHT, GetHandleId(t), 12, front)
        set x[2]=x[0] + 300 * Cos(comp - 45)
        set y[2]=y[0] + 300 * Sin(comp - 45)
        set x[3]=x[0] + 300 * Cos(comp + 45)
        set y[3]=y[0] + 300 * Sin(comp + 45)
        call SaveReal(YDHT, GetHandleId(t), 2, x[2])
        call SaveReal(YDHT, GetHandleId(t), 3, x[3])
        call SaveReal(YDHT, GetHandleId(t), 6, y[2])
        call SaveReal(YDHT, GetHandleId(t), 7, y[3])
    endif
    if ( a >= 1 and not front ) then
        call RemoveUnit(left)
        call RemoveUnit(right)
        call DestroyTimer(t)
    endif
    set t=null
    set left=null
    set right=null
    set leftGroup=null
    set rightGroup=null
    set u=null
endfunction
function FeiYanHuiXiang takes nothing returns nothing
    local timer t= CreateTimer()
    local real array x
    local real array y
    local real comp
    local unit u= GetTriggerUnit()
    local unit left
    local unit right
    call WuGongShengChong(u , 'A054' , 300.)
    call WuGongShengChong(u , 'A059' , 1500.)
    set x[0]=GetUnitX(u)
    set y[0]=GetUnitY(u)
    set x[1]=GetSpellTargetX()
    set y[1]=GetSpellTargetY()
    set comp=Atan2(y[1] - y[0], x[1] - x[0])
    set x[2]=x[0] + 300 * Cos(comp + 45)
    set y[2]=y[0] + 300 * Sin(comp + 45)
    set x[3]=x[0] + 300 * Cos(comp - 45)
    set y[3]=y[0] + 300 * Sin(comp - 45)
    set left=CreateUnit(GetTriggerPlayer(), 'h00L', x[0], y[0], 270)
    set right=CreateUnit(GetTriggerPlayer(), 'h00L', x[0], y[0], 270)
    // 下标0是单位所在位置，1是目标位置，2是左鸟位置，3是右鸟位置
    call SaveReal(YDHT, GetHandleId(t), 0, x[0])
    call SaveReal(YDHT, GetHandleId(t), 1, x[1])
    call SaveReal(YDHT, GetHandleId(t), 2, x[2])
    call SaveReal(YDHT, GetHandleId(t), 3, x[3])
    call SaveReal(YDHT, GetHandleId(t), 4, y[0])
    call SaveReal(YDHT, GetHandleId(t), 5, y[1])
    call SaveReal(YDHT, GetHandleId(t), 6, y[2])
    call SaveReal(YDHT, GetHandleId(t), 7, y[3])
    call SaveReal(YDHT, GetHandleId(t), 8, comp)
    call SaveUnitHandle(YDHT, GetHandleId(t), 9, left)
    call SaveUnitHandle(YDHT, GetHandleId(t), 10, right)
    call SaveReal(YDHT, GetHandleId(t), 11, 1)
    call SaveBoolean(YDHT, GetHandleId(t), 12, true)
    call SaveUnitHandle(YDHT, GetHandleId(t), 13, u)
    call TimerStart(t, 0.025, true, function birdFlying)
    set t=null
    set u=null
    set left=null
    set right=null
endfunction
//神龙八式
function Trig_ciZhenSaoSheConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A057' ) )
endfunction
function Trig_ciZhenSaoSheFunc007Func001Func002Func007T takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
    if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) > 0 then
        call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) - 1)
        //call BJDebugMsg(I2S(LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000)))
    endif
    call DestroyTimer(GetExpiredTimer())
    set u=null
endfunction
function Trig_ciZhenSaoSheFunc007Conditions takes nothing returns boolean
 local timer ydl_timer
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()), 0)
 local unit l__ut= GetTriggerUnit()
 local integer i= LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000)
 local real shxishu= 1.
 local real shanghai= 0.
    
    if ( ( EVENT_UNIT_DAMAGED == GetTriggerEventId() ) == false ) then
        //call BJDebugMsg("123")
        call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()))
        call DestroyTrigger(GetTriggeringTrigger())
        call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, 0)
    else
        if ( GetEventDamage() == .98 ) and GetEventDamageSource() == u then
            //call BJDebugMsg("456")
            set shxishu=1 + I2R(i) * 0.1
            set shanghai=ShangHaiGongShi(u , l__ut , 15 , 18 , shxishu , 'A057')
			call WuGongShangHai(u , l__ut , shanghai)
			if ( ( GetUnitAbilityLevel(u, 'A03L') != 0 ) ) then //加寒冰真气昏迷
                call WanBuff(u , l__ut , 5)
            endif
            if ( ( GetUnitAbilityLevel(u, 'A07W') != 0 ) ) then //加乾坤
                set shxishu=shxishu + .6
            endif
            if ( ( GetUnitAbilityLevel(u, 'A07R') != 0 ) ) then //加吸星
                set shxishu=shxishu + .7
            endif
            if ( ( GetUnitAbilityLevel(u, 'A084') != 0 ) ) then //加蛤蟆
                set shxishu=shxishu + 1.2
            endif
			call SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, i + 1)
            set ydl_timer=CreateTimer()
            call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0, u)
            call TimerStart(ydl_timer, 14.00, false, function Trig_ciZhenSaoSheFunc007Func001Func002Func007T)
        endif
    endif
    // 专属加成
	if UnitHasDenomWeapon(u , 'I0DZ') then
        set shxishu=shxishu * 2
    endif
    // 神龙教主加成
    if isTitle(i , 32) then
        set shxishu=shxishu * 2
    endif
    // 教主夫人加成
    if isTitle(i , 33) then
        set shxishu=shxishu * 2
    endif
    set ydl_timer=null
    set u=null
    set l__ut=null
    return false
endfunction
function Trig_ciZhenSaoSheActions takes nothing returns nothing
    local trigger ydl_trigger
    local unit u= GetTriggerUnit()
    call WuGongShengChong(u , 'A057' , 900.)
    if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) <= 0 then
        set ydl_trigger=CreateTrigger()
        call SaveUnitHandle(YDHT, GetHandleId(ydl_trigger), 0, GetTriggerUnit())
        call Ov(ydl_trigger)
        call TriggerRegisterTimerEventSingle(ydl_trigger, 30.00)
        call TriggerAddCondition(ydl_trigger, Condition(function Trig_ciZhenSaoSheFunc007Conditions))
	endif
    set ydl_trigger=null
    set u=null
endfunction
//function IsShenLongBaShiSH takes nothing returns boolean
//	return((GetEventDamage()==.98))
//endfunction
//function ShenLongBaShiSH takes nothing returns nothing
//	local unit u=udg_hero[(1+GetPlayerId(GetOwningPlayer(GetEventDamageSource())))]
//    local unit ut=GetTriggerUnit()
//    local real shxishu= 1
//    local real shanghai=0.
//    set shanghai=ShangHaiGongShi(u,ut,7.2,8.9,shxishu,'A057')
//    call WuGongShangHai(u,ut,shanghai)
//    set u=null
//    set ut=null
//endfunction
function ShenLong_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	//子胥举鼎
	call Ov(t)
	call TriggerAddCondition(t, Condition(function IsZiXuJuDing))
    call TriggerAddAction(t, function ZiXuJuDing)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function IsZiXuBeiDong))
    call TriggerAddAction(t, function ZiXuBeiDong)
    //贵妃回眸
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function IsGuiFeiHuiMou))
    call TriggerAddAction(t, function GuiFeiHuiMou)
    set t=CreateTrigger()
    call Ov(t)
	call TriggerAddCondition(t, Condition(function IsGuiFeiHuiMouSH))
    call TriggerAddAction(t, function GuiFeiHuiMouSH)
    //鲁达拔柳
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function IsLuDaBaLiu))
    call TriggerAddAction(t, function LuDaBaLiu)
    //狄青降龙
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function IsDiQingXiangLong))
    call TriggerAddAction(t, function DiQingXiangLong)
    set t=CreateTrigger()
    call Ov(t)
	call TriggerAddCondition(t, Condition(function IsDiQingXiangLongSH))
    call TriggerAddAction(t, function DiQingXiangLongSH)
    //飞燕回翔
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function IsFeiYanHuiXiang))
    call TriggerAddAction(t, function FeiYanHuiXiang)
	//小怜横陈
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function IsXiaoLianHengChen))
    call TriggerAddAction(t, function XiaoLianHengChen)
    //神龙八式
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function Trig_ciZhenSaoSheConditions))
    call TriggerAddAction(t, function Trig_ciZhenSaoSheActions)
 //    set t= CreateTrigger()
 //   call Ov(t)
	//call TriggerAddCondition(t,Condition(function IsShenLongBaShiSH))
 //   call TriggerAddAction(t,function ShenLongBaShiSH)
    //神龙心法
    set t=null
endfunction
//全真剑法 3级技
function IsQuanZhen takes nothing returns boolean
	return ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) and GetUnitAbilityLevel(GetAttacker(), 'A0CF') >= 1
endfunction
function QuanZhen_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function QuanZhen_Action takes nothing returns nothing
    local unit u=GetAttacker()
    local unit uc=GetEnumUnit()
    local real shxishu=1.
    local real shanghai=0.
    local integer i=1 + GetPlayerId(GetOwningPlayer(u))
    local location loc=GetUnitLoc(u)
    local location loc2=GetUnitLoc(uc)
    set shxishu=1 + jingmai[i] / 20
    if UnitHasDenomWeapon(u , 'I0DP') then
		set shxishu=shxishu * 2
	endif
    // set shanghai=ShangHaiGongShi(u,uc,12.,21.,shxishu,'A0CF')
    set shanghai=ShangHaiGongShi(u , uc , 44. , 50. , shxishu , 'A0CF')
    call WuGongShangHai(u , uc , shanghai)
    call DestroyEffect((AddSpecialEffectTargetEx("Units\\NightElf\\Wisp\\WispExplode.mdl" , uc , "overhead"))) // INLINED!!
    if GetUnitAbilityLevel(u, 'A07S') >= 1 and GetRandomReal(1., 100) <= 20 then
	    call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        call UnitAddAbility(bj_lastCreatedUnit, 1093678412)
        call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call ShowUnitHide(bj_lastCreatedUnit)
        call CreateTextTagLocBJ("封穴", loc2, 0, 12., 65., 55., 42., 0)
        call Nw(3. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
    if GetUnitAbilityLevel(u, 'A07V') >= 1 then
	    call SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) + GetUnitAbilityLevel(u, 'A0CF') * yishu[i] * 20)
    endif
    call RemoveLocation(loc)
    call RemoveLocation(loc2)
    set loc2=null
    set loc=null
    set u=null
    set uc=null
endfunction
function QuanZhenJian takes nothing returns nothing
    local unit uc=GetTriggerUnit()
    local unit u=GetAttacker()
    local player p=GetOwningPlayer(u)
    local integer i=1 + GetPlayerId(p)
    local location loc=GetUnitLoc(u)
    local group g=CreateGroup()
    local real chance=fuyuan[i]
    if GetUnitAbilityLevel(u, 'A07W') >= 1 then
	    set chance=chance * 4
    endif
    if GetRandomReal(0, 100) <= 20 + chance / 5 then
        call WuGongShengChong(u , 'A0CF' , 1100.)
        if danpo[i] >= 15 then
	        call GroupEnumUnitsInRangeOfLoc(g, loc, RMinBJ(danpo[i] * 20, 3000), Condition(function QuanZhen_Condition))
	    else
	        call GroupAddUnit(g, uc)
        endif
            call ForGroupBJ(g, function QuanZhen_Action)
        call GroupClear(g)
        call DestroyGroup(g)
        call RemoveLocation(loc)
    endif
    set g=null
    set loc=null
    set p=null
    set u=null
    set uc=null
endfunction
//昊天掌 15级技
function IsXianTianYiYang takes nothing returns boolean
    return GetSpellAbilityId() == 'A0CM' and ( IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) or GetSpellTargetUnit() == GetTriggerUnit() )
endfunction
function XianTianYiYang_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function XianTianYiYang_Action takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local unit uc=GetEnumUnit()
    local unit l__ut=null
    local location loc1=GetUnitLoc(u)
    local location loc2=GetUnitLoc(uc)
    local real shxishu=1.
    local real shanghai=0.
    local integer level=0
    local integer i=1 + GetPlayerId(GetOwningPlayer(u))
    call CreateNUnitsAtLoc(1, 'e00X', GetOwningPlayer(u), loc1, bj_UNIT_FACING)
    set l__ut=bj_lastCreatedUnit
    call UnitAddAbility(l__ut, 'A0DJ')
    call IssueTargetOrderById(l__ut, $D0097, uc)
    call UnitApplyTimedLife(l__ut, 1112045413, 2.)
    call ShowUnitHide(l__ut)
    if GetUnitAbilityLevel(u, 'A0DE') >= 1 then
	    set shxishu=shxishu * 2
    endif
    if GetUnitAbilityLevel(u, 'A07U') >= 1 then
	    set shxishu=shxishu / 2
    endif
    if UnitHasDenomWeapon(u , 'I0DP') then
		set shxishu=shxishu * 2
	endif
    set shanghai=ShangHaiGongShi(u , uc , 250 , 700 , shxishu , 'A0CM')
    call WuGongShangHai(u , uc , shanghai)
    if GetUnitAbilityLevel(u, 'A06P') >= 1 and GetRandomReal(1., 200) <= fuyuan[i] then
	    //call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+80)
	    set level=GetUnitAbilityLevel(u, 'A06P')
	    //call UnitRemoveAbility(u,'A06P')
	    //call UnitAddAbility(u,'A06P')
	    //call SetUnitAbilityLevel(u,'A06P',level)
	    call IssuePointOrderByIdLoc(u, $D009D, loc2)
	    call UnitRemoveAbility(u, 'A06P')
	    call UnitAddAbility(u, 'A06P')
	    call SetUnitAbilityLevel(u, 'A06P', level)
    endif
    if fuyuan[i] >= 20 and jingmai[i] >= 20 and GetRandomReal(1., 200) <= fuyuan[i] then
	    set level=GetUnitAbilityLevel(u, 'A0CM')
	    call UnitRemoveAbility(u, 'A0CM')
	    call UnitAddAbility(u, 'A0CM')
	    call SetUnitAbilityLevel(u, 'A0CM', level)
    endif
    if GetUnitAbilityLevel(u, 'A07V') >= 1 then
        call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 1093678903)
        call IssueTargetOrderById(bj_lastCreatedUnit, $D008F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call CreateTextTagLocBJ("内伤", loc2, 60., 12., 65., 55., 42., 0)
        call Nw(3. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
    call RemoveLocation(loc1)
    call RemoveLocation(loc2)
    set u=null
    set uc=null
    set l__ut=null
    set loc1=null
    set loc2=null
endfunction
function XianTianYiYang takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local unit uc=GetSpellTargetUnit()
    local location loc=GetUnitLoc(uc)
    local group g=CreateGroup()
    call WuGongShengChong(u , 'A0CM' , 150)
    if u == uc then
	    call SetWidgetLife(u, 1.)
	    call WuGongShangHai(u , u , 299999)
    endif
    if GetUnitAbilityLevel(u, 'A07U') >= 1 then
	    call GroupEnumUnitsInRangeOfLoc(g, loc, 500, Condition(function XianTianYiYang_Condition))
	else
	    call GroupAddUnit(g, uc)
    endif
    call ForGroupBJ(g, function XianTianYiYang_Action)
    call GroupClear(g)
    call DestroyGroup(g)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set loc=null
    set g=null
endfunction
//金雁功 8级技
function IsJinYanKai takes nothing returns boolean
    return GetIssuedOrderId() == $D00D1 and GetUnitAbilityLevel(GetTriggerUnit(), 'A0DA') >= 1
endfunction
//没蓝自动关闭金雁功
function JinYanMeiLan takes nothing returns nothing
    local timer t=GetExpiredTimer()
    local unit u=LoadUnitHandle(YDHT, GetHandleId(t), 0)
    if UnitHasBuffBJ(u, 'B00W') == false then
	    call UnitRemoveAbility(u, 'A0DB')
        call UnitRemoveAbility(u, 'A0DC')
        call UnitRemoveAbility(u, 'Aspb')
        call FlushChildHashtable(YDHT, GetHandleId(t))
        call PauseTimer(t)
        call DestroyTimer(t)
    endif
    set u=null
    set t=null
endfunction
//开启金雁功
function JinYanKai takes nothing returns nothing
    local unit u=GetTriggerUnit()
    local integer level=GetUnitAbilityLevel(u, 'A0DA')
    local integer attackSpeedLevel= level
    local timer t=CreateTimer()
    call UnitAddAbility(u, 'A0DB')
    call UnitAddAbility(u, 'A0DC')
    call UnitAddAbilityBJ('Aspb', u)
    call SetPlayerAbilityAvailableBJ(false, 'Aspb', GetOwningPlayer(u))
    // 搭配葵花攻速+1级
    if GetUnitAbilityLevel(u, 'A07T') >= 1 then
        set attackSpeedLevel=attackSpeedLevel + 1
    endif
    // 七星道袍，攻速+1级
    if UnitHasDenomWeapon(u , 'I0DP') then
        set attackSpeedLevel=attackSpeedLevel + 1
    endif
    call SetUnitAbilityLevel(u, 'A0DB', attackSpeedLevel)
    // 移速
    if GetUnitAbilityLevel(u, 'A0CH') >= 1 then
        call SetUnitAbilityLevel(u, 'A0DC', level + 1)
    else
        call SetUnitAbilityLevel(u, 'A0DC', level)
    endif
    // 闪避
    if GetUnitAbilityLevel(u, 'A0DE') >= 1 then
        call SetUnitAbilityLevel(u, 'A0DD', level + 1)
    else
        call SetUnitAbilityLevel(u, 'A0DD', level)
    endif
    //set fuyuan[1+GetPlayerId(GetOwningPlayer(u))]=fuyuan[1+GetPlayerId(GetOwningPlayer(u))]+10
    call WuGongShengChong(u , 'A0DA' , 150.)
    //call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,I2S(GetUnitAbilityLevel(u,'A0DD')))
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call TimerStart(t, 0.5, true, function JinYanMeiLan)
    set t=null
    set u=null
endfunction
//关闭金雁功
function IsJinYanGuan takes nothing returns boolean
    return GetIssuedOrderId() == $D00D2 and GetUnitAbilityLevel(GetTriggerUnit(), 'A0DA') >= 1
endfunction
function JinYanGuan takes nothing returns nothing
    local unit u=GetTriggerUnit()
    call UnitRemoveAbility(u, 'A0DB')
    call UnitRemoveAbility(u, 'A0DC')
    call UnitRemoveAbility(u, 'Aspb')
    //set fuyuan[1+GetPlayerId(GetOwningPlayer(u))]=fuyuan[1+GetPlayerId(GetOwningPlayer(u))]-10
    set u=null
endfunction
//金雁功被动
function IsJinYan takes nothing returns boolean
    return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and UnitHasBuffBJ(GetAttacker(), 'B00W')
endfunction
function JinYanFanWei takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function JinYanGong takes nothing returns nothing
    local unit u=GetAttacker()
    local unit l__ut=GetTriggerUnit()
    local group g=CreateGroup()
    local location loc=GetUnitLoc(u)
    local unit uc=null
    local location loc2=GetUnitLoc(l__ut)
    local integer level=0
    call GroupEnumUnitsInRangeOfLoc(g, loc, 1000, Condition(function JinYanFanWei))
    set uc=GroupPickRandomUnit(g)
    if GetRandomReal(1., 100) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] then
        if GetUnitAbilityLevel(u, 'A07T') >= 1 then
	        call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
            call ShowUnitHide(bj_lastCreatedUnit)
            call UnitAddAbility(bj_lastCreatedUnit, 1093678903)
            call IssueTargetOrderById(bj_lastCreatedUnit, $D008F, l__ut)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
            call CreateTextTagLocBJ("内伤", loc2, 60., 12., 65., 55., 42., 0)
            call Nw(3. , bj_lastCreatedTextTag)
            call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
        endif
        if GetUnitAbilityLevel(u, 'A0CH') >= 1 then
            call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
            call UnitAddAbility(bj_lastCreatedUnit, 1093678900)
            call IssueTargetOrderById(bj_lastCreatedUnit, $D022F, l__ut)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
            call ShowUnitHide(bj_lastCreatedUnit)
            call CreateTextTagLocBJ("中毒", loc2, 0, 12., 65., 55., 42., 0)
            call Nw(3. , bj_lastCreatedTextTag)
            call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
        endif
        if GetUnitAbilityLevel(u, 'A0DE') >= 1 then
            call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
            call ShowUnitHide(bj_lastCreatedUnit)
            call UnitAddAbility(bj_lastCreatedUnit, 1093681498)
            call IssueTargetOrderById(bj_lastCreatedUnit, $D006B, l__ut)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
            call CreateTextTagLocBJ("昏迷", loc2, 60., 12., 65., 55., 42., 0)
            call Nw(3. , bj_lastCreatedTextTag)
            call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
        endif
        if uc != null and GetUnitAbilityLevel(u, 'A0CM') >= 1 and GetRandomInt(1, 10) == 1 then
	        call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 70)
            set level=GetUnitAbilityLevel(u, 'A0CM')
	        call UnitRemoveAbility(u, 'A0CM')
	        call UnitAddAbility(u, 'A0CM')
	        call SetUnitAbilityLevel(u, 'A0CM', level)
        endif
    endif
    call GroupClear(g)
    call DestroyGroup(g)
    call RemoveLocation(loc)
    set u=null
    set uc=null
    set g=null
    set loc=null
    set l__ut=null
    set loc2=null
endfunction
//先天功
function IsXianTian takes nothing returns boolean
    return ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0CH') >= 1 ) and ( GetEventDamage() >= GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) ) )
endfunction
function XianTian_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_xiantiandanwei)) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function XianTian_Action takes nothing returns nothing
    local integer i=1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit uc=GetEnumUnit()
 local real shxishu=1.
 local real shanghai=0.
 local location loc=GetUnitLoc(uc)
    if isTitle(i , 14) then
        set shxishu=shxishu * 5
    endif
    // 专属加成
    if UnitHasDenomWeapon(GetTriggerUnit() , 'I0DP') then
		set shxishu=shxishu * 2
	endif
    set shanghai=ShangHaiGongShi(udg_xiantiandanwei , uc , 2000 , 800 , shxishu , 'A0CH')
	call WuGongShangHai(udg_xiantiandanwei , uc , shanghai)
	if GetUnitAbilityLevel(udg_xiantiandanwei, 'A07V') >= 1 then
		set shxishu=shxishu + 1.
	endif
	if GetUnitAbilityLevel(udg_xiantiandanwei, 'A06P') >= 1 then
		call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(udg_xiantiandanwei), loc, bj_UNIT_FACING)
        call UnitAddAbility(bj_lastCreatedUnit, 1093678412)
        call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
        call ShowUnitHide(bj_lastCreatedUnit)
        call CreateTextTagLocBJ("封穴", loc, 0, 12., 65., 55., 42., 0)
        call Nw(3. , bj_lastCreatedTextTag)
        call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
    endif
    if GetUnitAbilityLevel(udg_xiantiandanwei, 'A07O') >= 1 then
        call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(udg_xiantiandanwei), loc, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 'A0DF')
        call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, udg_xiantiandanwei)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.)
    endif
    call RemoveLocation(loc)
    set loc=null
	set uc=null
endfunction
function XianTian2 takes nothing returns nothing
 local timer t=GetExpiredTimer()
 local integer p=GetHandleId(t)
 local unit u=LoadUnitHandle(YDHT, p, 0)
 local group g=CreateGroup()
 local location loc=GetUnitLoc(u)
 local real range=800
	set udg_xiantiandanwei=u
	if GetUnitAbilityLevel(u, 'A07W') >= 0 then
		set range=range + 700
	endif
    call GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(function XianTian_Condition))
    call ForGroupBJ(g, function XianTian_Action)
    call GroupClear(g)
    call DestroyGroup(g)
    call PauseTimer(t)
    call DestroyTimer(t)
    call RemoveLocation(loc)
    set u=null
    set t=null
    set g=null
    set loc=null
endfunction
//捕捉重生事件
function XianTian1 takes nothing returns nothing
    local timer t=GetExpiredTimer()
    local timer tm=null
    local integer p=GetHandleId(t)
    local unit u=LoadUnitHandle(YDHT, p, 0)
    // call BJDebugMsg("捕捉重生事件")
    if GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_FOOD_USED) == LoadInteger(YDHT, p, 1) then
        // call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "捕捉成功" )
        if GetPlayerController(GetOwningPlayer(u)) == MAP_CONTROL_USER then
            call WuGongShengChong(u , 'A0CH' , 40.)
        endif
        set tm=CreateTimer()
        call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
        call SaveInteger(YDHT, GetHandleId(tm), 1, LoadInteger(YDHT, p, 1))
        call PauseTimer(t)
        call DestroyTimer(t)
        call FlushChildHashtable(YDHT, p)
        call TimerStart(tm, 3.01, false, function XianTian2)
    else
    endif
    set t=null
    set tm=null
    set u=null
endfunction
function XianTianGong takes nothing returns nothing
    local timer t= CreateTimer()
    local integer p=GetHandleId(t)
    local unit u=GetTriggerUnit()
    // call BJDebugMsg("触发开始重生")
    call SaveUnitHandle(YDHT, p, 0, u)
    call SaveInteger(YDHT, p, 1, GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_FOOD_USED))
    call TimerStart(t, 0.00, false, function XianTian1)
    set t=null
    set u=null
endfunction
//三花聚顶
function IsSanHua takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A0DE' )
endfunction
function SanHua_Condition takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'e00Y'
endfunction
function SanHua_Action takes nothing returns nothing
    local player p=GetOwningPlayer(GetEventDamageSource())
    local integer i=1 + GetPlayerId(p)
 local unit u=udg_hero[i]
 local unit uc=GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
 local real shxishu=1.
 local real shanghai=0
	if GetUnitAbilityLevel(u, 'A07R') >= 1 then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A07A') >= 1 then
		call WanBuff(u , uc , 5)
	endif
    if UnitHasDenomWeapon(u , 'I0DP') then
		set shxishu=shxishu * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 250 , 180 , shxishu , 'A0DE')
	if IsUnitEnemy(uc, GetOwningPlayer(u)) then
		call WuGongShangHai(u , uc , shanghai)
	else
	    call SetWidgetLife(uc, GetUnitState(uc, UNIT_STATE_LIFE) + shanghai / 10)
	    call SetUnitState(uc, UNIT_STATE_MANA, GetUnitState(uc, UNIT_STATE_MANA) + 200)
    endif
    call RemoveLocation(loc)
    set p=null
    set u=null
    set uc=null
    set loc=null
endfunction
function SanHua_1 takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit())
endfunction
function SanHua takes nothing returns nothing
 local unit u=GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= null
 local group g= null
 local unit l__ut=null
 local unit uc=GetSpellTargetUnit()
 local integer i= 0
 local integer imax= 10
	if GetUnitAbilityLevel(u, 'A06H') >= 1 then
		set imax=imax + 3
	endif
	if GetUnitAbilityLevel(u, 'A07V') >= 1 then
		set imax=imax + 3
	endif
	if GetUnitAbilityLevel(u, 'A0D4') >= 1 then
		set imax=imax + 50
	endif
    // 专属加成
    if UnitHasDenomWeapon(u , 'I0DP') then
		set imax=imax + 50
	endif
	call WuGongShengChong(u , 'A0DE' , 150.)
	call CreateNUnitsAtLoc(1, 'e00Y', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	set l__ut=bj_lastCreatedUnit
	call UnitAddAbility(l__ut, 'A0DG')
	call UnitApplyTimedLife(l__ut, 1112045413, 2.)
    call ShowUnitHide(l__ut)
	call IssueTargetOrderById(l__ut, $D0097, uc)
    call RemoveLocation(loc)
    loop
	    exitwhen i > imax
		set loc2=GetUnitLoc(uc)
		set g=CreateGroup()
		call GroupEnumUnitsInRangeOfLoc(g, loc2, 800, Condition(function SanHua_1))
		if g != null then
			call CreateNUnitsAtLoc(1, 'e00Y', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			set l__ut=bj_lastCreatedUnit
			call UnitAddAbility(l__ut, 'A0DG')
			call UnitApplyTimedLife(l__ut, 1112045413, 2.)
    		call ShowUnitHide(l__ut)
    		set uc=GroupPickRandomUnit(g)
			call IssueTargetOrderById(l__ut, $D0097, uc)
			call DestroyGroup(g)
			call RemoveLocation(loc2)
			call YDWEPolledWaitNull(0.15)
		else
			call DestroyGroup(g)
			call RemoveLocation(loc2)
			exitwhen true
		endif
	    set i=i + 1
    endloop
	set u=null
	set loc=null
	set loc2=null
	set uc=null
	set l__ut=null
	set g=null
endfunction
//事件
function QuanZhen_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsQuanZhen))
    call TriggerAddAction(t, function QuanZhenJian)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsXianTianYiYang))
    call TriggerAddAction(t, function XianTianYiYang)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
    call TriggerAddCondition(t, Condition(function IsJinYanKai))
    call TriggerAddAction(t, function JinYanKai)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
    call TriggerAddCondition(t, Condition(function IsJinYanGuan))
    call TriggerAddAction(t, function JinYanGuan)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsJinYan))
    call TriggerAddAction(t, function JinYanGong)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsXianTian))
    call TriggerAddAction(t, function XianTianGong)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsSanHua))
    call TriggerAddAction(t, function SanHua)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function SanHua_Condition))
    call TriggerAddAction(t, function SanHua_Action)
    set t=null
endfunction
// 1技能 银针飞花：向前方射出三道激光，造成大量伤害
// 毕业技能2 特殊：碧玉丹 +神木王鼎 和炼丹系统结合 可以使最劣的酒变成一等一的佳酿
// 阵法：九宫八卦阵
// 毕业技能1 心法：六合经
// 专属1：子午砂 攻击时深度中毒
// 专属2：观音泪
// 2技能 漫天花雨
// 3技能 烟雨夺魂

function isYinZhen takes nothing returns boolean
    return GetSpellAbilityId() == 'A098'
endfunction
function yinZhenAction takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer max= LoadInteger(YDHT, GetHandleId(t), 0)
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
    local integer j= LoadInteger(YDHT, GetHandleId(t), 2)
    local real angle= 0
    local location source= null
    local location target= null
    local real range= 1000
    if j < max then
        call SaveInteger(YDHT, GetHandleId(t), 2, j + 1)
        set angle=GetUnitFacing(u)
        set source=GetUnitLoc(u)
        set target=PolarProjectionBJ(source, range, angle)
        call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), source, bj_UNIT_FACING)
        call ShowUnitHide(bj_lastCreatedUnit)
        call UnitAddAbility(bj_lastCreatedUnit, 'A099')
        call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, target)
        call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3)
        // call PolledWait(0.2)
        if GetUnitAbilityLevel(u, 'A07A') >= 1 then
            call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), target, bj_UNIT_FACING)
            call ShowUnitHide(bj_lastCreatedUnit)
            call UnitAddAbility(bj_lastCreatedUnit, 'A07A')
            call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D9)
            call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 3)
        endif
        call RemoveLocation(source)
        call RemoveLocation(target)
    else
        call FlushChildHashtable(YDHT, GetHandleId(t))
        call PauseTimer(t)
        call DestroyTimer(t)
    endif
    set t=null
    set source=null
    set target=null
endfunction
function yinZhen takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local integer i= 1
    local integer max= 3
    local timer t= CreateTimer()
    
    call WuGongShengChong(u , 'A098' , 250.)
    // + 双手互搏 向前射出六道激光
    if GetUnitAbilityLevel(u, 'A07U') >= 1 then
        set max=6
    endif
    call SaveInteger(YDHT, GetHandleId(t), 0, max)
    call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
    call SaveInteger(YDHT, GetHandleId(t), 2, 0)
    call TimerStart(t, 0.2, true, function yinZhenAction)
   
    set t=null
    set u=null
endfunction
function isYinZhenDamage takes nothing returns boolean
    return GetEventDamage() == 0.92
endfunction
function yinZhenDamage takes nothing returns nothing
    local unit u= GetEventDamageSource()
    local unit target= GetTriggerUnit()
    local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07Q') != 0 ) ) then // 斗转星移
set shxishu=shxishu + 0.9
    endif
    if ( ( GetUnitAbilityLevel(u, 'A083') != 0 ) ) then // 加小无相功
set shxishu=shxishu + 1.5
    endif
    if ( ( GetUnitAbilityLevel(u, 'A018') != 0 ) ) then // 加碧海潮生曲 致盲
call WanBuff(u , target , 15)
    endif
    // 专属加成
    // 子午砂
    if UnitHasDenomWeapon(u , 'I0EP') then
        set shxishu=shxishu * 2.0
    endif
    // 观音泪
    if UnitHasDenomWeapon(u , 'I0EQ') then
        set shxishu=shxishu * 3.0
    endif
    set shanghai=ShangHaiGongShi(u , target , 60 , 60 , shxishu , 'A098')
    call WuGongShangHai(u , target , shanghai)
endfunction
 
function isManTian takes nothing returns boolean
    return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A09A')
endfunction
function manTianCondition takes nothing returns boolean
    return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function manTian takes nothing returns nothing
    local unit u= GetAttacker()
    local unit l__ut= GetTriggerUnit()
    local unit target= null
    local unit dummy= null
    local group g= null
    local player p= GetOwningPlayer(u)
    local integer i= 1 + GetPlayerId(p)
    local integer j= 1
    local integer max= 4
    local real range= 1300
    if GetRandomInt(1, 100) < 15 + fuyuan[i] / 5 then
        call WuGongShengChong(u , 'A09A' , 900.)
        // 双手互搏 双倍导弹
        if GetUnitAbilityLevel(u, 'A07U') >= 1 then
            set max=8
        endif
        loop
            exitwhen j > max
            set g=CreateGroup()
            call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), range, Condition(function manTianCondition))
            set target=GroupPickRandomUnit(g)
            set dummy=CreateUnit(p, 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
            call ShowUnitHide(dummy)
            call UnitAddAbility(dummy, 'A09B')
            call IssueTargetOrderById(dummy, $D007F, target)
            call UnitApplyTimedLife(dummy, 'BHwe', 3)
            call DestroyGroup(g)
            call YDWEPolledWaitNull(0.2)
            if GetUnitAbilityLevel(u, 'A07A') >= 1 and GetRandomInt(1, 100) <= 15 then
                set dummy=CreateUnit(p, 'e000', GetUnitX(target), GetUnitY(target), bj_UNIT_FACING)
                call ShowUnitHide(dummy)
                call UnitAddAbility(dummy, 'A07A')
                call IssueImmediateOrderById(dummy, $D00D9)
                call UnitApplyTimedLife(dummy, 'BHwe', 3)
            endif
            set j=j + 1
        endloop
    endif
    set u=null
    set l__ut=null
    set target=null
    set g=null
    set dummy=null
    set p=null
endfunction
function isManTianDamage takes nothing returns boolean
    return GetEventDamage() == 0.93
endfunction
function manTianDamage takes nothing returns nothing
    local unit u= udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
    local unit target= GetTriggerUnit()
    local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07T') != 0 ) ) then // 葵花宝典
set shxishu=shxishu + 0.9
    endif
    if ( ( GetUnitAbilityLevel(u, 'A0B6') != 0 ) ) then // 加六合经 破防
call WanBuff(u , target , 9)
    endif
    // 子午砂
    if UnitHasDenomWeapon(u , 'I0EP') then
        set shxishu=shxishu * 2.0
    endif
    // 观音泪
    if UnitHasDenomWeapon(u , 'I0EQ') then
        set shxishu=shxishu * 3.0
    endif
    set shanghai=ShangHaiGongShi(u , target , 160 , 180 , shxishu , 'A09A')
    if GetUnitAbilityLevel(u, 'A0B3') != 0 then
        set shanghai=ShangHaiGongShi(u , target , 800 , 900 , shxishu , 'A0B3')
    endif
    call WuGongShangHai(u , target , shanghai)
endfunction
 
function isDuoHun takes nothing returns boolean
    return GetSpellAbilityId() == 'A0B0'
endfunction
function duoHun takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local real x= GetSpellTargetX()
    local real y= GetSpellTargetY()
    local real distance= SquareRoot(( x - GetUnitX(u) ) * ( x - GetUnitX(u) ) + ( y - GetUnitY(u) ) * ( y - GetUnitY(u) ))
    local real angle= Atan2BJ(y - GetUnitY(u), x - GetUnitX(u))
    local real speed= 1200
    // 向周围施放烟雾
    local unit dummy= CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
    if ( GetUnitAbilityLevel(u, 'A03V') >= 1 ) then // +擒龙控鹤 冲刺速度加倍
set speed=speed * 2
    endif
    call ShowUnitHide(dummy)
    call UnitAddAbility(dummy, 'A09C')
    call IssuePointOrderById(dummy, $D0208, GetUnitX(u), GetUnitY(u))
    call UnitApplyTimedLife(dummy, 'BHwe', 3)
    // 向目标方向冲刺
    call YDWETimerPatternRushSlide(u , angle , distance , distance / speed , 0.03 , 0 , false , false , true , "origin" , "Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl" , "Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl")
    // 武功升重
    call WuGongShengChong(u , 'A0B0' , 200.)
    call YDWEPolledWaitNull(distance / 1000)
    if ( GetUnitAbilityLevel(u, 'A07U') >= 1 ) then // +双手 在目标位置也施放烟雾
set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
        call ShowUnitHide(dummy)
        call UnitAddAbility(dummy, 'A09C')
        call IssuePointOrderById(dummy, $D0208, GetUnitX(u), GetUnitY(u))
        call UnitApplyTimedLife(dummy, 'BHwe', 3)
    endif
    set u=null
    set dummy=null
endfunction
function isDuoHunPassive takes nothing returns boolean
    return GetUnitAbilityLevel(GetAttacker(), 'A0B0') >= 1 and GetUnitAbilityLevel(GetAttacker(), 'A083') >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
endfunction
function duoHunPassive takes nothing returns nothing
    local unit u= GetAttacker()
    local real distance= 1000
    local real angle= GetUnitFacing(u)
    local real speed= 1200
    local unit dummy= null
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    if GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
        // 向周围施放烟雾
        set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
        if ( GetUnitAbilityLevel(u, 'A03V') >= 1 ) then // +擒龙控鹤 冲刺速度加倍
set speed=speed * 2
        endif
        call ShowUnitHide(dummy)
        call UnitAddAbility(dummy, 'A09C')
        call IssuePointOrderById(dummy, $D0208, GetUnitX(u), GetUnitY(u))
        call UnitApplyTimedLife(dummy, 'BHwe', 3)
    endif
    set u=null
    set dummy=null
endfunction
function isDuoHunDamage takes nothing returns boolean
    return GetEventDamage() == 2.01
endfunction
function duoHunDamage takes nothing returns nothing
    local unit u= GetEventDamageSource()
    local unit target= GetTriggerUnit()
    local real shxishu= 1
    local real shanghai= 0.
    if ( ( GetUnitAbilityLevel(u, 'A07M') != 0 ) ) then // 七伤拳
set shxishu=shxishu + 1.5
    endif
    call WanBuff(u , target , 4)
    // 子午砂
    if UnitHasDenomWeapon(u , 'I0EP') then
        set shxishu=shxishu * 2.0
    endif
    // 观音泪
    if UnitHasDenomWeapon(u , 'I0EQ') then
        set shxishu=shxishu * 3.0
    endif
    set shanghai=ShangHaiGongShi(u , target , 100 , 100 , shxishu , 'A0B0')
    call WuGongShangHai(u , target , shanghai)
endfunction

function liuHeCondition takes nothing returns boolean
    return GetSpellAbilityId() == 'A0B6'
endfunction
function removeLiuHeState takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    call UnitRemoveAbility(u, 'A00S')
    call PauseTimer(t)
    call DestroyTimer(t)
    set t=null
    set u=null
endfunction
function liuHeAction takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    local integer key= $FFAFBF + i
    local integer which= LoadInteger(YDHT, key, 1)
local real oldSpeed= LoadReal(YDHT, key, 2)
    local real oldSpeed2= (s__ModSpeed_getSpeed((u))) - LoadReal(YDHT, key, 3) // INLINED!!
    local real critical= LoadReal(YDHT, key, 4)
    local integer profound= LoadInteger(YDHT, key, 5)
    local real addition= LoadReal(YDHT, key, 6)
    local integer j= GetRandomInt(1, 6)
    local timer t= null
    // 清除上一次的状态
    if which == 1 then //移速
call h__SetUnitMoveSpeed(u, RMaxBJ(RMinBJ(oldSpeed, oldSpeed2), 350.))
    elseif which == 2 then //爆伤
set udg_baojishanghai[i]=udg_baojishanghai[i] - critical
    elseif which == 3 then //攻速
call UnitRemoveAbility(u, 'A0DB')
    elseif which == 4 then // 最大护甲
call UnitRemoveAbility(u, 'A00S')
    elseif which == 5 then
        set juexuelingwu[i]=juexuelingwu[i] - profound
    elseif which == 6 then
        set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] - addition
    endif
    // 增加本次的状态
    call SaveInteger(YDHT, key, 1, j)
    call SetUnitAbilityLevel(u, 'A0B4', j)
    call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl" , u , "overhead"))) // INLINED!!
    if j == 1 then
        call h__SetUnitMoveSpeed(u, RMinBJ((s__ModSpeed_getSpeed((u))) + jingmai[i] * 20, 1400)) // INLINED!!
        call SaveReal(YDHT, key, 2, (s__ModSpeed_getSpeed((u)))) // INLINED!!
        call SaveReal(YDHT, key, 3, jingmai[i] * 20)
    elseif j == 2 then
        set critical=0.05 * RMinBJ(500, gengu[i])
        call SaveReal(YDHT, key, 4, critical)
        set udg_baojishanghai[i]=udg_baojishanghai[i] + critical
    elseif j == 3 then
        call UnitAddAbility(u, 'A0DB')
        call SetUnitAbilityLevel(u, 'A0DB', IMinBJ(1 + fuyuan[i] / 20, 10))
    elseif j == 4 then
        call UnitAddAbility(u, 'A00S')
        set t=CreateTimer()
        call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
        call TimerStart(t, 10, false, function removeLiuHeState)
    elseif j == 5 then
        set profound=IMinBJ(500, wuxing[i]) / 2
        call SaveInteger(YDHT, key, 5, profound)
        set juexuelingwu[i]=juexuelingwu[i] + profound
    elseif j == 6 then
        set addition=0.05 * RMinBJ(500, danpo[i])
        call SaveReal(YDHT, key, 6, addition)
        set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + addition
    endif
    call YDWEPolledWaitNull(0.2)
    // 双手或小无相功的搭配
    if GetUnitAbilityLevel(u, 'A07U') >= 1 then
        call EXSetAbilityState(EXGetUnitAbility(u, 'A0B6'), 1, EXGetAbilityState(EXGetUnitAbility(u, 'A0B6'), 1) - 5)
    endif
    if GetUnitAbilityLevel(u, 'A083') >= 1 then
        call EXSetAbilityState(EXGetUnitAbility(u, 'A0B6'), 1, EXGetAbilityState(EXGetUnitAbility(u, 'A0B6'), 1) - 5)
    endif
    set u=null
    set t=null
endfunction
function liuHe takes nothing returns nothing
    local integer i= 1
    local timer t= null
    loop
        exitwhen i > 5
        if liuHeFlag[i] == 0 and GetUnitAbilityLevel(udg_hero[i], 'A0B6') >= 1 then
            set liuHeFlag[i]=1
            call UnitAddAbility(udg_hero[i], 'A0B5')
            call SetPlayerAbilityAvailable(GetOwningPlayer(udg_hero[i]), 'A0B5', false)
        endif
        set i=i + 1
    endloop
    set t=null
endfunction

function isBiYuDan takes nothing returns boolean
    return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A0B1')
endfunction
function biYuCondition takes nothing returns boolean
	return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function biYuAction takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
 local real shxishu= ( 1. + I2R(yishu[i]) / 15. ) * ( 1 + biYuAddition[i] )
	// +深度中毒
	if UnitHasBuffBJ(GetEnumUnit(), 'B01J') then
		set shxishu=shxishu + 2.0
	endif
	// 神木王鼎或炼丹师
	if UnitHaveItem(GetAttacker() , 'I0AM') or (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) then // INLINED!!
        set shxishu=shxishu + 2.0
    endif
    // 搜魂侠加成
    if isTitle(i , 36) then
        set shxishu=shxishu * 2
    endif
    // 子午砂
    if UnitHasDenomWeapon(GetAttacker() , 'I0EP') then
        set shxishu=shxishu * 2.0
    endif
    // 观音泪
    if UnitHasDenomWeapon(GetAttacker() , 'I0EQ') then
        set shxishu=shxishu * 3.0
    endif
    call WuGongShangHai(GetAttacker() , GetEnumUnit() , ShangHaiGongShi(GetAttacker() , GetEnumUnit() , 200 , 200 , shxishu , 'A0B1'))
endfunction
function biYuDan takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
    local location loc= GetUnitLoc(GetAttacker())
    local unit dummy= null
    local group g= null
    if ( GetRandomInt(1, 100) <= fuyuan[i] / 5 + 18 ) then
        set dummy=CreateUnit(GetOwningPlayer(GetAttacker()), 'e000', GetUnitX(GetAttacker()), GetUnitY(GetAttacker()), bj_UNIT_FACING)
        call ShowUnitHide(dummy)
        call UnitAddAbility(dummy, 'A0B2')
        call IssuePointOrderById(dummy, $D02AC, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()))
        call UnitApplyTimedLife(dummy, 'BHwe', 3)
        call YDWEPolledWaitNull(0.3)
        set g=YDWEGetUnitsInRangeOfLocMatchingNull(800 , loc , Condition(function biYuCondition))
        call ForGroup(g, function biYuAction)
        call DestroyGroup(g)
        call WuGongShengChong(GetAttacker() , 'A0B1' , 700)
    endif
    call RemoveLocation(loc)
    set loc=null
    set dummy=null
    set g=null
endfunction
function isGuanYinLei takes nothing returns boolean
    return UnitHaveItem(GetAttacker() , 'I0EQ')
endfunction
function guanYinLei takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
    // 观音泪攻击深度中毒
    if GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
        call WanBuff(GetAttacker() , GetTriggerUnit() , 14)
    endif
endfunction
function tangMenTrigger takes nothing returns nothing
    local trigger t= CreateTrigger()
    local integer i= 1
    loop
        exitwhen i > 5
        // 初始化碧玉丹技能永久加成
        set biYuAddition[i]=0
        // 初始化六合经标识
        set liuHeFlag[i]=0
        set i=i + 1
    endloop
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function isYinZhen))
    call TriggerAddAction(t, function yinZhen)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function isYinZhenDamage))
    call TriggerAddAction(t, function yinZhenDamage)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function isManTian))
    call TriggerAddAction(t, function manTian)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function isManTianDamage))
    call TriggerAddAction(t, function manTianDamage)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function isDuoHun))
    call TriggerAddAction(t, function duoHun)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function isDuoHunPassive))
    call TriggerAddAction(t, function duoHunPassive)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function isDuoHunDamage))
    call TriggerAddAction(t, function duoHunDamage)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function isBiYuDan))
    call TriggerAddAction(t, function biYuDan)
    set t=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(t, 1.)
    call TriggerAddAction(t, function liuHe)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function liuHeCondition))
    call TriggerAddAction(t, function liuHeAction)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(t, Condition(function isGuanYinLei))
    call TriggerAddAction(t, function guanYinLei)
    set t=null
endfunction// 铁掌帮武功：铁砂掌、毒蛇神掌、通背拳、水上漂、归元吐纳功

function IsTieShaZhang takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A06Y')
endfunction
function TieSha_Condition takes nothing returns boolean
	return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function TieSha_Action takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
	// 乾坤大挪移 +80%
 local real shxishu= 1. + I2R(jingmai[i]) / 15. + DamageCoefficientByAbility(GetAttacker() , 'A07W' , 0.8)
	if UnitHasBuffBJ(GetEnumUnit(), 'BEsh') then
	    // 双手+中毒
		set shxishu=shxishu + DamageCoefficientByAbility(GetAttacker() , 'A07U' , 1.5)
	    // 九阴+中毒
		set shxishu=shxishu + DamageCoefficientByAbility(GetAttacker() , 'A07S' , 2.0)
	    // 九爪+中毒
        set shxishu=shxishu + DamageCoefficientByAbility(GetAttacker() , 'A07N' , 1.5)
	endif
	// 一阳指=破防
	if GetUnitAbilityLevel(GetAttacker(), 'A06P') >= 1 and GetRandomInt(1, 100) <= 60 then
    	call WanBuff(GetAttacker() , GetEnumUnit() , 9)
    endif
    //摧心掌=中毒
	if GetUnitAbilityLevel(GetAttacker(), 'A0D3') >= 1 and GetRandomInt(1, 100) <= 60 then
		if ( UnitHasBuffBJ(GetEnumUnit(), 'BEsh') == false ) then
			call WanBuff(GetAttacker() , GetEnumUnit() , 13)
		endif
	endif
	// 专属
	if UnitHasDenomWeapon(GetAttacker() , 'I0EJ') then
	    set shxishu=shxishu * 4
    endif
	call PassiveWuGongEffectAndDamage(GetAttacker() , GetEnumUnit() , "Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl" , 14 , 18 , shxishu , 'A06Y')
endfunction
function TieShaZhang takes nothing returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
	call PassiveWuGongAction(GetAttacker() , GetTriggerUnit() , 18 + fuyuan[i] * 0.2 , RMinBJ(600 + danpo[i] * 10, 3000) , Condition(function TieSha_Condition) , function TieSha_Action , 'A06Y' , 900.)
endfunction

function IsDuSheShenZhang takes nothing returns boolean
	return GetSpellAbilityId() == 'A06Z' and ( IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) )
endfunction
function IsDuSheEnemy takes nothing returns boolean
	//不是玩家的单位且不无敌
	return IsUnitEnemy(GetFilterUnit(), Player(0)) and GetUnitAbilityLevel(GetFilterUnit(), 'Avul') == 0 and IsUnitAliveBJ(GetFilterUnit())
endfunction
function DuSheMove takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit l__ut= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local location source= LoadLocationHandle(YDHT, GetHandleId(t), 2)
 local location destination= LoadLocationHandle(YDHT, GetHandleId(t), 3)
 local unit majia= LoadUnitHandle(YDHT, GetHandleId(t), 4)
 local integer counter= LoadInteger(YDHT, GetHandleId(t), 5)
 local integer maxCount= 10 + GetUnitAbilityLevel(u, 'A07U') * 20 + GetUnitAbilityLevel(u, 'A06H') * 8
 local real angle= AngleBetweenPoints(source, destination)
 local group g= null
 local real shxishu= 1 + DamageCoefficientByItem(u , 'I09B' , 3.)
 local integer speed= 15
	if GetUnitAbilityLevel(u, 'A06H') >= 1 then
	    set speed=15
	endif
	if ( UnitHasBuffBJ(l__ut, 'BEsh') or UnitHasBuffBJ(l__ut, 'B01J') ) then
		set shxishu=shxishu + 1.
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0EJ') then
	    set shxishu=shxishu * 4
    endif
	if ( counter >= maxCount ) then
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call PauseTimer(t)
		call DestroyTimer(t)
		call RemoveUnit(majia)
	else
		//距离小于15则移动到目标位置并造成伤害，然后获取下一个伤害目标
		if DistanceBetweenPoints(source, destination) < 15 then
			call SetUnitPositionLoc(majia, destination)
			//设置下一个源地点
			call SaveLocationHandle(YDHT, GetHandleId(t), 2, destination)
			//造成伤害 伤害单位个数加1
			call PassiveWuGongEffectAndDamage(u , l__ut , "Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl" , 60 , 60 , shxishu , 'A06Z')
			if ( ( UnitHasBuffBJ(l__ut, 'BEsh') or UnitHasBuffBJ(l__ut, 'B01J') ) and GetUnitAbilityLevel(u, 'A07S') >= 1 ) then
				call WanBuff(u , l__ut , 7)
			endif
			call SaveInteger(YDHT, GetHandleId(t), 5, counter + 1)
			//获取下一个伤害目标
			set g=YDWEGetUnitsInRangeOfLocMatchingNull(500 , destination , Condition(function IsDuSheEnemy))
			if ( CountUnitsInGroup(g) > 0 ) then
				set l__ut=GroupPickRandomUnit(g)
				call SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
				//设置下一个目标地点
				call SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(l__ut))
				//call RemoveLocation(destination)
			else
				
				set g=YDWEGetUnitsInRangeOfLocMatchingNull(1500 , destination , Condition(function IsDuSheEnemy))
				if ( CountUnitsInGroup(g) > 0 ) then
					set l__ut=GroupPickRandomUnit(g)
					call SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
					//设置下一个目标地点
					call SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(l__ut))
					//call RemoveLocation(destination)
				else
					call FlushChildHashtable(YDHT, GetHandleId(t))
					call PauseTimer(t)
					call DestroyTimer(t)
					call RemoveUnit(majia)
				endif
			endif
		else
			//毒蛇马甲向目标移动
			call SetUnitPositionLoc(majia, PolarProjectionBJ(source, speed, angle))
			call SaveLocationHandle(YDHT, GetHandleId(t), 2, PolarProjectionBJ(source, speed, angle))
			call SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(l__ut))
		endif
	endif
	call RemoveLocation(source)
	set source=null
	set destination=null
	set t=null
	set l__ut=null
	set majia=null
	set u=null
	set g=null
endfunction
function DuSheShenZhang takes nothing returns nothing
 local timer t= CreateTimer()
 local group g= CreateGroup()
 local location loc= GetSpellTargetLoc()
 local unit l__ut= null
	set g=YDWEGetUnitsInRangeOfLocMatchingNull(500 , loc , Condition(function IsDuSheEnemy))
	if ( CountUnitsInGroup(g) > 0 ) then
    	set l__ut=GroupPickRandomUnit(g)
    else
        set g=YDWEGetUnitsInRangeOfLocMatchingNull(1500 , loc , Condition(function IsDuSheEnemy))
        set l__ut=GroupPickRandomUnit(g)
    endif
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
	call SaveLocationHandle(YDHT, GetHandleId(t), 2, GetUnitLoc(GetTriggerUnit()))
	call SaveLocationHandle(YDHT, GetHandleId(t), 3, loc)
	call CreateNUnitsAtLocFacingLocBJ(1, 'e01E', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), GetUnitLoc(GetSpellTargetUnit()))
	call SaveUnitHandle(YDHT, GetHandleId(t), 4, bj_lastCreatedUnit)
	call WuGongShengChong(GetTriggerUnit() , 'A06Z' , 200)
	call TimerStart(t, 0.02, true, function DuSheMove)
	call DestroyGroup(g)
	set t=null
	set g=null
	set loc=null
	set l__ut=null
endfunction

function IsTongBeiQuan takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A070')
endfunction
function TongBeiQuan takes nothing returns nothing
 local unit u= udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]
 local unit l__ut= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local location loc= GetUnitLoc(l__ut)
 local real shxishu= 1. + DamageCoefficientByAbility(u , 'A07W' , 0.7) + DamageCoefficientByAbility(u , 'A0D3' , 0.9)
 local real coefficient= 0.5
	if ( GetUnitAbilityLevel(u, 'A089') >= 1 ) then
		set coefficient=1
	endif
	// 专属
	if UnitHasDenomWeapon(u , 'I0EJ') then
	    set shxishu=shxishu * 4
    endif
	if ( GetRandomInt(1, 100) <= fuyuan[i] / 5 + 15 ) then
		//+蛤蟆功 A084 召唤一个会通背拳的铁掌帮长老协助战斗 此处概率有待平衡 TODO
		if ( GetUnitAbilityLevel(GetAttacker(), 'A084') >= 1 and GetRandomInt(1, 100) <= 15 ) then
			call CreateNUnitsAtLoc(1, 'o02O', GetOwningPlayer(u), loc, bj_UNIT_FACING)
			call UnitAddAbility(bj_lastCreatedUnit, 'A070')
	    	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
		endif
		call WuGongShengChong(u , 'A070' , 800)
		if ( UnitHasBuffBJ(l__ut, 'BEsh') ) then //已中毒则使之中毒加深
call SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), 1.)
			set shxishu=shxishu + LoadReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"))
			call WanBuff(u , l__ut , 14)
		elseif ( UnitHasBuffBJ(l__ut, 'B01J') ) then //已深度中毒则造成额外伤害
call SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), LoadReal(YDHT, GetHandleId(l__ut), StringHash("TongBei")) + coefficient)
			set shxishu=shxishu + LoadReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"))
			call FontFloat("+" + I2S(R2I(shxishu)) , loc , 60. , 14 , 100. , 100. , 0. , 0 , 2.)
		else //未中毒则使之中毒
call SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), 0.)
			call WanBuff(u , l__ut , 13)
		endif
		call PassiveWuGongEffectAndDamage(u , l__ut , "Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl" , 120 , 120 , shxishu , 'A070')
	endif
	call RemoveLocation(loc)
	set u=null
	set l__ut=null
	set loc=null
endfunction
function IsGuiYuan takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A0DP') or PassiveWuGongCondition(GetTriggerUnit() , GetAttacker() , 'A0DP')
endfunction
function selectAttr takes nothing returns nothing
 local player p= GetTriggerPlayer()
 local string s= GetEventPlayerChatString()
 local integer i= 1 + GetPlayerId(p)
	// 归元吐纳+七伤拳改成+铁掌水上漂称号
	if isTitle(i , 35) and GetUnitAbilityLevel(udg_hero[i], 'A0DP') >= 1 then
		if s == "jwx" then
			set selected_attr[i]=1
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为悟性")
		elseif s == "jgg" then
			set selected_attr[i]=2
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为根骨")
		elseif s == "jfy" then
			set selected_attr[i]=3
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为福缘")
		elseif s == "jys" then
			set selected_attr[i]=4
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为医术")
		elseif s == "jdp" then
			set selected_attr[i]=5
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为胆魄")
		elseif s == "jjm" then
			set selected_attr[i]=6
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为经脉")
		elseif s == "jsj" then
			set selected_attr[i]=0
			call DisplayTextToPlayer(p, 0, 0, "|cffffff00临时增加的属性设定为随机")
		endif
	endif
	set p=null
endfunction
function reduceAttr takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer attr= LoadInteger(YDHT, GetHandleId(t), 0)
 local string text= LoadStr(YDHT, GetHandleId(t), 1)
 local integer value= LoadInteger(YDHT, GetHandleId(t), 2)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 3)
	if attr == 1 then
		set wuxing[i]=wuxing[i] - value
	elseif attr == 2 then
		set gengu[i]=gengu[i] - value
	elseif attr == 3 then
		set fuyuan[i]=fuyuan[i] - value
	elseif attr == 4 then
		set yishu[i]=yishu[i] - value
	elseif attr == 5 then
		set danpo[i]=danpo[i] - value
	elseif attr == 6 then
		set jingmai[i]=jingmai[i] - value
	endif
	call CreateTextTagUnitBJ(text + "-" + I2S(value), udg_hero[i], 60, 14, 100, 0, 0, 30)
	call Nw(3. , bj_lastCreatedTextTag)
    call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 400., GetRandomReal(80, 100))
endfunction
function addRealAttrTemp takes integer i,integer j returns nothing
 local integer value= GetUnitAbilityLevel(udg_hero[i], 'A0DP') * j
 local integer attr= 0
 local string text= ""
 local timer t= null
	if selected_attr[i] != 0 then
		set attr=selected_attr[i]
	else
		set attr=GetRandomInt(1, 6)
	endif
	if attr == 1 then
		set wuxing[i]=wuxing[i] + value
		set text="悟性"
	elseif attr == 2 then
		set gengu[i]=gengu[i] + value
		set text="根骨"
	elseif attr == 3 then
		set fuyuan[i]=fuyuan[i] + value
		set text="福缘"
	elseif attr == 4 then
		set yishu[i]=yishu[i] + value
		set text="医术"
	elseif attr == 5 then
		set danpo[i]=danpo[i] + value
		set text="胆魄"
	elseif attr == 6 then
		set jingmai[i]=jingmai[i] + value
		set text="经脉"
	endif
	call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\frozenarmor.mdx" , udg_hero[i] , "overhead"))) // INLINED!!
	call CreateTextTagUnitBJ(text + "+" + I2S(value), udg_hero[i], 60, 14, 100, 0, 0, 30)
	call Nw(3. , bj_lastCreatedTextTag)
    call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 400., GetRandomReal(80, 100))
	if ( GetUnitAbilityLevel(udg_hero[i], 'S002') < 1 or GetRandomInt(1, 20) <= 19 ) then
		set t=CreateTimer()
		call SaveInteger(YDHT, GetHandleId(t), 0, attr)
		call SaveStr(YDHT, GetHandleId(t), 1, text)
		call SaveInteger(YDHT, GetHandleId(t), 2, value)
		call SaveInteger(YDHT, GetHandleId(t), 3, i)
		call TimerStart(t, 30, false, function reduceAttr)
	endif
	set t=null
endfunction
function GuiYuanTuNa takes nothing returns nothing
    local unit u= GetAttacker()
    local integer i= 0
	if ( GetUnitAbilityLevel(u, 'A0DP') >= 1 ) then
		set i=1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
		if GetRandomInt(0, 100) <= 15 + fuyuan[i] / 5 then
			call WuGongShengChong(u , 'A0DP' , 800)
		endif
		if GetUnitAbilityLevel(u, 'A07W') >= 1 and GetRandomInt(0, 100) <= 15 then
			call addRealAttrTemp(i , 1)
		endif
	endif
	if ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0DP') >= 1 ) then
		set i=1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
		if GetUnitAbilityLevel(GetTriggerUnit(), 'A07T') >= 1 and GetRandomInt(0, 100) <= 15 then
			call addRealAttrTemp(i , 1)
		endif
	endif
	set u=null
endfunction
function periodicAddAttr takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        if GetUnitAbilityLevel(udg_hero[i], 'A0DP') >= 1 then
            call addRealAttrTemp(i , 5)
        endif
        set i=i + 1
    endloop
endfunction

function IsShuiShangPiao takes nothing returns boolean
	return GetSpellAbilityId() == 'A07Y'
endfunction
function XYInMap takes real x,real y returns boolean
    if x < GetRectMinX(GetEntireMapRect()) then
        return false
    endif
    if x > GetRectMaxX(GetEntireMapRect()) then
        return false
    endif
    if y < GetRectMinY(GetEntireMapRect()) then
        return false
    endif
    if y > GetRectMaxY(GetEntireMapRect()) then
        return false
    endif
    return true
endfunction
function saveVarsInTimer takes timer tm,unit u,real x,real y,real n,real distance,real angle,real a,real b,real m returns nothing
	call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
    call SaveReal(YDHT, GetHandleId(tm), 1, x)
    call SaveReal(YDHT, GetHandleId(tm), 2, y)
    call SaveReal(YDHT, GetHandleId(tm), 3, n)
    call SaveReal(YDHT, GetHandleId(tm), 4, distance)
    call SaveReal(YDHT, GetHandleId(tm), 5, angle)
    call SaveReal(YDHT, GetHandleId(tm), 6, a)
    call SaveReal(YDHT, GetHandleId(tm), 7, b)
    call SaveReal(YDHT, GetHandleId(tm), 8, m)
endfunction
function Fly_tm takes nothing returns nothing
 local timer tm=GetExpiredTimer()
    local unit u=LoadUnitHandle(YDHT, GetHandleId(tm), 0)
    local real x=LoadReal(YDHT, GetHandleId(tm), 1)
    local real y=LoadReal(YDHT, GetHandleId(tm), 2)
    local real n=LoadReal(YDHT, GetHandleId(tm), 3)
    local real dis=LoadReal(YDHT, GetHandleId(tm), 4)
    local real ang=LoadReal(YDHT, GetHandleId(tm), 5)
    local real a=LoadReal(YDHT, GetHandleId(tm), 6)
    local real b=LoadReal(YDHT, GetHandleId(tm), 7)
    local real m=LoadReal(YDHT, GetHandleId(tm), 8) + 1
    local real h=a * m * m + b * m
    if m <= n then
        call SaveReal(YDHT, GetHandleId(tm), 8, m)
        call PauseUnit(u, true)
        call SetUnitFlyHeight(u, h, 0)
        if XYInMap(x + m * dis * Cos(ang * bj_DEGTORAD) , y + m * dis * Sin(ang * bj_DEGTORAD)) then
            set x=x + m * dis * Cos(ang * bj_DEGTORAD)
            set y=y + m * dis * Sin(ang * bj_DEGTORAD)
            call SetUnitX(u, x)
            call SetUnitY(u, y)
        else
            call SetUnitFlyHeight(u, 0, 0)
            call PauseUnit(u, false)
            call clearTimer(tm)
        endif
    else
        call PauseUnit(u, false)
        call clearTimer(tm)
    endif
    set u=null
    set tm=null
endfunction
function Fly takes unit u,real speed,real height,real angle,real time returns nothing
    local timer tm=CreateTimer()
    local real x=GetUnitX(u)
    local real y=GetUnitY(u)
    local real n=time * 100
    local real distance=speed / 100
    local real a=- 4 * height / ( n * n )
    local real b=4 * height / n
    if height > 0 then
        call UnitAddAbility(u, 'Arav')
        call UnitRemoveAbility(u, 'Arav')
    endif
    call saveVarsInTimer(tm , u , x , y , n , distance , angle , a , b , 0)
    call TimerStart(tm, 0.01, true, function Fly_tm)
    set tm=null
endfunction
function FlyEnd takes nothing returns nothing
 local timer tm=GetExpiredTimer()
 local unit u=LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	call DestroyEffect((udg_JTX[GetPlayerId(GetOwningPlayer(u)) + 1])) // INLINED!!
	call clearTimer(tm)
	set u=null
	set tm=null
endfunction
function ShuiShangPiao takes nothing returns nothing
 local location source= GetUnitLoc(GetTriggerUnit())
 local location destination= GetSpellTargetLoc()
 local real angle= AngleBetweenPoints(source, destination)
 local real speed= 800. + 50 * GetUnitAbilityLevel(GetTriggerUnit(), 'A07Y')
 local real height= 200.
 local timer t= CreateTimer()
 local real lastTime= 2
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A07W') >= 1 then // 乾坤大挪移
set speed=speed * 2
	endif
	set lastTime=RMinBJ(DistanceBetweenPoints(source, destination) / speed, 2.) //轻功持续时间
call WuGongShengChong(GetTriggerUnit() , 'A07Y' , 100)
	call SetUnitFacing(GetTriggerUnit(), angle)
	call DestroyEffect((AddSpecialEffectTargetUnitBJEx("origin" , GetTriggerUnit() , "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"))) // INLINED!!
	set udg_JTX[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1]=AddSpecialEffectTargetEx("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl" , GetTriggerUnit() , "origin")
    call SetUnitAnimation(GetTriggerUnit(), "walk")
	call Fly(GetTriggerUnit() , speed , height , angle , lastTime)
	//call YDWEJumpTimer(GetTriggerUnit(),angle,speed*lastTime,lastTime,0.03,height)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	call TimerStart(t, lastTime, false, function FlyEnd)
	call RemoveLocation(source)
	call RemoveLocation(destination)
	set source=null
	set destination=null
	set t=null
endfunction

function TieZhang_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
 local timer tm= CreateTimer()
 local integer i= 1
	loop
		exitwhen i > 5
		call TriggerRegisterPlayerChatEvent(t, Player(i - 1), "", true)
		set selected_attr[i]=0
		set i=i + 1
	endloop
	call TriggerAddAction(t, function selectAttr)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTieShaZhang))
	call TriggerAddAction(t, function TieShaZhang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsDuSheShenZhang))
    call TriggerAddAction(t, function DuSheShenZhang)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTongBeiQuan))
	call TriggerAddAction(t, function TongBeiQuan)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsShuiShangPiao))
    call TriggerAddAction(t, function ShuiShangPiao)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsGuiYuan))
	call TriggerAddAction(t, function GuiYuanTuNa)
    call TimerStart(tm, 30, true, function periodicAddAttr)
	set t=null
	set tm=null
endfunction


 // 触发器条件
 function IsQiXingLuo takes nothing returns boolean
	return GetSpellAbilityId() == 'A08A'
 endfunction
 
 function QiXingLuo_Condition takes nothing returns boolean
	return DamageFilter(LoadUnitHandle(YDHT, $6162A, 0) , GetFilterUnit())
 endfunction
 
 function QiXingLuo_Action takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer iMax= LoadInteger(YDHT, GetHandleId(t), 0)
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local real range= LoadReal(YDHT, GetHandleId(t), 2)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 3)
 local location loc= GetUnitLoc(u)
 local real shxishu= 1 + DamageCoefficientByAbility(u , 'A07W' , 0.6) + DamageCoefficientByAbility(u , 'A07T' , 1)
local real shanghai= 0.
 local group g= null
 local unit l__ut= null
	// 专属加成
	if UnitHasDenomWeapon(u , 'I0E2') then
	    set shxishu=shxishu * 2
  endif
	if ( i <= iMax ) then
		set g=CreateGroup()
		call SaveUnitHandle(YDHT, $6162A, 0, u)
		call GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(function QiXingLuo_Condition))
		set l__ut=GroupPickRandomUnit(g)
		//添加特效
		call DestroyEffect((AddSpecialEffectTargetUnitBJEx("origin" , l__ut , "Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl"))) // INLINED!!
		//u对ut造成伤害
		set shanghai=ShangHaiGongShi(u , l__ut , 30 * ( 0.8 + i * 0.2 ) , 30 * ( 0.8 + i * 0.2 ) , shxishu , 'A08A')
		call WuGongShangHai(u , l__ut , shanghai)
		if ( GetUnitAbilityLevel(u, 'A07R') >= 1 ) then // +吸星大法
if ( GetRandomInt(0, 100) <= 50 ) then
				call WanBuff(u , l__ut , 4) //混乱
else
				call WanBuff(u , l__ut , 11) //封穴
endif
		endif
		call DestroyGroup(g)
		call SaveInteger(YDHT, GetHandleId(t), 3, i + 1)
	else
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	call RemoveLocation(loc)
	set t=null
	set u=null
	set loc=null
	set g=null
	set l__ut=null
 endfunction
 
 
 function QiXingLuoChangKong takes nothing returns nothing
 local timer t= CreateTimer()
 local integer i= 0
 local unit u= GetTriggerUnit()
 local real range= 800
	if ( GetUnitAbilityLevel(u, 'A07U') >= 1 ) then // +双手
set range=range / 2
	endif
	if ( GetUnitAbilityLevel(u, 'A083') >= 1 ) then // +小无相
set range=range / 2
	endif
	call WuGongShengChong(u , 'A08A' , 200) //武功升重
call SaveInteger(YDHT, GetHandleId(t), 0, 7 * ( 1 + GetUnitAbilityLevel(u, 'A07U') ) * ( 1 + GetUnitAbilityLevel(u, 'A083') ))
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
	call SaveReal(YDHT, GetHandleId(t), 2, range)
	call TimerStart(t, 0.3, true, function QiXingLuo_Action)
	set t=null
	set u=null
 endfunction

 // 触发器条件
function IsDaiZongRuHe takes nothing returns boolean
	return GetSpellAbilityId() == 'A08B'
endfunction
// 移除岱宗如何的BUFF
function removeDaiZongBuff takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local real extraHit= LoadReal(YDHT, GetHandleId(t), 1)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 2)
	// call BJDebugMsg("t:"+I2S(GetHandleId(t))+", i:"+I2S(i))
	//减少暴击倍数
	set udg_baojishanghai[i]=udg_baojishanghai[i] - extraHit
	//停止计时器
	call clearTimer(t)
	set t=null
	set u=null
endfunction
// 向目标施放岱宗如何
function issueTargetDaiZong takes unit u,integer i,timer t,real extraHit returns nothing
	// 马甲对英雄施放雷击
	call maJiaUseAbilityAtEnemysLoc(u , 'e01F' , 'A08C' , $D0097 , u , 3)
	// 另一马甲对英雄施放增益技能，英雄获得BUFF
	call maJiaUseAbilityAtEnemysLoc(u , 'e000' , 'A08D' , $D0062 , u , 3)
	// 英雄暴击倍数增加
	set udg_baojishanghai[i]=udg_baojishanghai[i] + extraHit
	// 1秒触发1次的定时器，如果英雄失去BUFF，则失去暴击倍数
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveReal(YDHT, GetHandleId(t), 1, extraHit)
	call SaveInteger(YDHT, GetHandleId(t), 2, i)
	call TimerStart(t, 10, false, function removeDaiZongBuff)
endfunction
function IsDaiZongBeiDong takes nothing returns boolean
	return UnitHasBuffBJ(GetAttacker(), 'B01K') and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
endfunction
function DaiZongBeiDongDamageFilter takes nothing returns boolean
	return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function DaiZongBeiDong_Action takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetEnumUnit()
 local string modelName= "Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl"
local real shxishu= 1
	if GetRandomInt(0, 100) <= 15 then
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName , 20 , 20 , shxishu , 'A08B')
	endif
	set u=null
	set l__ut=null
endfunction
function DaiZongBeiDong takes nothing returns nothing
 local location loc= GetUnitLoc(GetAttacker())
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(700 , loc , Condition(function DaiZongBeiDongDamageFilter)), function DaiZongBeiDong_Action)
	call RemoveLocation(loc)
	set loc=null
endfunction
 
function DaiZongRuHe takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
 local real extraHit= ( 0.3 + 0.2 * GetUnitAbilityLevel(GetTriggerUnit(), 'A07T') + 0.2 * GetUnitAbilityLevel(GetTriggerUnit(), 'A07U') ) * GetUnitAbilityLevel(GetTriggerUnit(), 'A08B')
	// 专属加成
	if UnitHasDenomWeapon(GetTriggerUnit() , 'I0E2') then
	    set extraHit=extraHit * 3
  endif
	if isTitle(i , 34) then
			set extraHit=extraHit * 2
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A08B' , 100) //武功升重
if GetUnitAbilityLevel(GetTriggerUnit(), 'A083') >= 1 then // 小无相功
call issueTargetDaiZong(udg_hero[1] , 1 , CreateTimer() , extraHit)
		call issueTargetDaiZong(udg_hero[2] , 2 , CreateTimer() , extraHit)
		call issueTargetDaiZong(udg_hero[3] , 3 , CreateTimer() , extraHit)
		call issueTargetDaiZong(udg_hero[4] , 4 , CreateTimer() , extraHit)
		call issueTargetDaiZong(udg_hero[5] , 5 , CreateTimer() , extraHit)
	else
		call issueTargetDaiZong(GetTriggerUnit() , i , CreateTimer() , extraHit)
	endif
endfunction

// 触发器条件
function IsShiBaPan takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A08E')
endfunction
// 触发器动作
function ShiBaPan takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	// local integer abilityLevel = IMinBJ(1 + GetUnitAbilityLevel(u, 'A07T') + GetUnitAbilityLevel(u, 'A07R') + GetUnitAbilityLevel(u, 'A07W'), 4)
 local integer abilityLevel= IMinBJ(1 + GetUnitAbilityLevel(u, 'A07T') + GetUnitAbilityLevel(u, 'A07R') + GetUnitAbilityLevel(u, 'A07U'), 4)
 local integer gailv= 15
// 专属加成，触发概率100%
if UnitHasDenomWeapon(u , 'I0E2') then
	    set gailv=gailv + 15
    endif
	if ( GetRandomInt(1, 100) <= gailv + GetUnitAbilityLevel(u, 'A08F') + fuyuan[i] / 5 and not ( UnitHasBuffBJ(u, 'B01L') ) ) then
      call WuGongShengChong(u , 'A08E' , 500)
      if GetUnitAbilityLevel(u, 'A083') >= 1 then
		 call maJiaUseLeveldAbilityAtTargetLoc(udg_hero[1] , 'e000' , 'A08F' , abilityLevel , $D0085 , udg_hero[1] , 3)
		 call maJiaUseLeveldAbilityAtTargetLoc(udg_hero[2] , 'e000' , 'A08F' , abilityLevel , $D0085 , udg_hero[2] , 3)
		 call maJiaUseLeveldAbilityAtTargetLoc(udg_hero[3] , 'e000' , 'A08F' , abilityLevel , $D0085 , udg_hero[3] , 3)
		 call maJiaUseLeveldAbilityAtTargetLoc(udg_hero[4] , 'e000' , 'A08F' , abilityLevel , $D0085 , udg_hero[4] , 3)
		 call maJiaUseLeveldAbilityAtTargetLoc(udg_hero[5] , 'e000' , 'A08F' , abilityLevel , $D0085 , udg_hero[5] , 3)
	  else
		 call maJiaUseLeveldAbilityAtTargetLoc(u , 'e000' , 'A08F' , abilityLevel , $D0085 , u , 3)
	  endif
	endif
	set u=null
	set l__ut=null
endfunction

// 触发器条件
function IsWuDaFu takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A08G')
endfunction
function WuDaFuJianDamageFilter takes nothing returns boolean
	return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function WuDaFuJian_Action takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetEnumUnit()
 local string modelName1= "Abilities\\Spells\\Other\\Tornado\\TornadoElementalSmall.mdl"
local string modelName2= "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl"
local string modelName3= "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"
local string modelName4= "Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl"
local string modelName5= "Abilities\\Spells\\Human\\Blizzard\\BlizzardTarget.mdl"
local real shxishu= 1 + DamageCoefficientByAbility(u , 'A07P' , 1.0) + DamageCoefficientByAbility(u , 'A07T' , 1.0) + DamageCoefficientByItem(u , 'I0E2' , 3.0)
 local integer i= GetRandomInt(0, 100)
	// 专属加成
	// if UnitHasDenomWeapon(u, 'I0E2') then
	//     set shxishu = shxishu * 2
  // endif
	if ( i <= 20 ) then
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName1 , 20 , 100 , shxishu , 'A08G')
		if ( GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
			call WanBuff(u , l__ut , 4)
		endif
	elseif ( i <= 40 ) then
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName2 , 40 , 80 , shxishu , 'A08G')
		if ( GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
			call WanBuff(u , l__ut , 5)
		endif
	elseif ( i <= 60 ) then
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName3 , 60 , 60 , shxishu , 'A08G')
		if ( GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
			call WanBuff(u , l__ut , 3)
		endif
	elseif ( i <= 80 ) then
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName4 , 80 , 40 , shxishu , 'A08G')
		if ( GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
			call WanBuff(u , l__ut , 13)
		endif
	else
		call PassiveWuGongEffectAndDamage(u , l__ut , modelName5 , 100 , 20 , shxishu , 'A08G')
		if ( GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
			call WanBuff(u , l__ut , 9)
		endif
	endif
		
	set u=null
	set l__ut=null
endfunction
// 触发器动作
function WuDaFuJian takes nothing returns nothing
	call PassiveWuGongAction(GetAttacker() , GetTriggerUnit() , 15 , 700 , Condition(function WuDaFuJianDamageFilter) , function WuDaFuJian_Action , 'A08G' , 500)
endfunction

// 触发器条件
function IsKuaiHuoSan takes nothing returns boolean
	return PassiveWuGongCondition(GetAttacker() , GetTriggerUnit() , 'A08H')
endfunction
// 触发器动作
function KuaiHuoSanJian takes nothing returns nothing
 local unit caster= GetAttacker()
local real angle= 270
local unit missile= null
 local real originspeed= 500
local real maxspeed= 800
local real accel= 56
local real distance= 2000
local real arc= 0
local real range= 300
local real damage= 0
local location loc= GetUnitLoc(caster)
local unit target= null
local real height= 50
local real l__hp= 400
local string Effect= "Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl"
local boolean gravity= false
local integer i= 1 + GetPlayerId(GetOwningPlayer(caster))
 local integer j= 0
 local integer jmax= 2
 local real shxishu= 1 + DamageCoefficientByAbility(GetTriggerUnit() , 'A07R' , 1) + DamageCoefficientByAbility(GetTriggerUnit() , 'A07U' , 0.8) + DamageCoefficientByAbility(GetTriggerUnit() , 'A083' , 1.5)
	if ( GetUnitAbilityLevel(caster, 'A07T') >= 1 ) then
		set range=range + 200
	endif
	// if (GetUnitAbilityLevel(caster, 'A07U') >= 1) then
		// set jmax = jmax + 2
	// endif
	// if (GetUnitAbilityLevel(caster, 'A083') >= 1) then
		// set jmax = jmax + 6
	// endif
	set damage=ShangHaiGongShi(caster , null , 16 , 16 , shxishu , 'A08H')
	if ( GetRandomInt(0, 100) <= 15 + fuyuan[i] ) then
		call WuGongShengChong(caster , 'A08H' , 700 - GetUnitAbilityLevel(caster, 'A03V') * 350)
		loop
			exitwhen j >= jmax
			set angle=GetUnitFacing(caster) + 360 / jmax * j + GetRandomReal(- 90, 90)
			set missile=CreateUnit(GetOwningPlayer(caster), 'h00M', GetUnitX(caster), GetUnitY(caster), angle) //弹幕单位
call MissileCast(caster , missile , originspeed , maxspeed , accel , angle , distance , arc , range , damage , loc , target , height , l__hp , Effect , gravity)
			set j=j + 1
		endloop
		//call MissileCast(caster, missile, originspeed, maxspeed, accel, angle, distance, arc, range, damage, loc, target, height, hp, Effect, gravity)
	endif
	// 排泄
	call RemoveLocation(loc)
	set caster=null
	set missile=null
	set target=null
	set loc=null
endfunction

function TaiShan_Trigger takes nothing returns nothing
	
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsQiXingLuo))
    call TriggerAddAction(t, function QiXingLuoChangKong)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsDaiZongRuHe))
	call TriggerAddAction(t, function DaiZongRuHe)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsDaiZongBeiDong))
	call TriggerAddAction(t, function DaiZongBeiDong)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsShiBaPan))
	call TriggerAddAction(t, function ShiBaPan)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsWuDaFu))
	call TriggerAddAction(t, function WuDaFuJian)
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsKuaiHuoSan))
	call TriggerAddAction(t, function KuaiHuoSanJian)
	set t=null
endfunction

// 千蛛手的蜘蛛
function qianZhuZhu takes nothing returns nothing
 local player p= GetOwningPlayer(GetAttacker())
 local integer i= 1 + GetPlayerId(p)
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shanghai= 0.
 local real shxishu= 1.

    // 特攻伤害加成
    if special_attack[i] >= 10 then
        set shxishu=shxishu + 0.7 + 0.03 * special_attack[i]
    endif
    // 葵花伤害加成
    if GetUnitAbilityLevel(u, KUI_HUA) >= 1 then
        set shxishu=shxishu + 0.8
    endif
    // 专属加成
    if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
        set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_HAN_SHA)) )
    endif
	set shanghai=ShangHaiGongShi(u , uc , 64. , 78. , shxishu , QIAN_ZHU_SHOU)
	call WuGongShangHai(u , uc , shanghai)
    // 毒蛛攻击触发中毒效果
	if GetRandomInt(1, 100) <= 20 then
	    call WanBuff(u , uc , 13) // 中毒
elseif GetRandomInt(1, 100) <= 20 then
	    call WanBuff(u , uc , 14) // 深度中毒
endif
	set uc=null
	set u=null
	set p=null
endfunction
function qianZhuShouCondition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
// 千蛛手的AOE效果
function qianZhuShouAoe takes nothing returns nothing
    local unit uc= GetEnumUnit()
 local unit u= GetAttacker()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu=1.
 local real shanghai=0.
    // 特攻伤害加成
    if special_attack[i] >= 10 then
        set shxishu=shxishu + 0.7 + 0.03 * special_attack[i]
    endif
    // 葵花伤害加成
    if GetUnitAbilityLevel(u, KUI_HUA) >= 1 then
        set shxishu=shxishu + 0.8
    endif
    // 专属加成
    if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
        set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_HAN_SHA)) )
    endif
	set shanghai=ShangHaiGongShi(u , uc , 16. , 20. , shxishu , QIAN_ZHU_SHOU)
	call WuGongShangHai(u , uc , shanghai)
    // AOE的特效
    call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl" , uc , "origin"))) // INLINED!!
    // 经脉达到20有一定概率触发中毒
    if jingmai[i] >= 20 and GetRandomInt(1, 100) < 30 then
        call WanBuff(u , uc , 13)
    endif
	set u=null
    set uc=null
endfunction
// 千蛛手：对周围敌人造成少量AOE伤害
function qianZhuShou takes nothing returns nothing
    local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer id= 'n00Y'
 local unit temp= null
    local group g=CreateGroup()
    local real r= 500. + 40. * GetUnitAbilityLevel(u, QIAN_ZHU_SHOU)
    // AOE效果
    if GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
        call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), r, Condition(function qianZhuShouCondition))
        call ForGroup(g, function qianZhuShouAoe)
        call WuGongShengChong(u , QIAN_ZHU_SHOU , 900.)
    endif
    // 福缘达到20，召唤毒蛛效果
    if fuyuan[i] >= 20 and GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
        set temp=CreateUnit(p, id, GetUnitX(u), GetUnitY(u), 270)
    	call UnitApplyTimedLifeBJ(5, 'BTLF', temp)
    	call WuGongShengChong(u , QIAN_ZHU_SHOU , 900.)
        // 搭配双手：双倍毒蛛效果
    	if GetUnitAbilityLevel(u, SHUANG_SHOU) >= 1 then
    	    set temp=CreateUnit(p, id, GetUnitX(u), GetUnitY(u), 270)
            call UnitApplyTimedLifeBJ(5, 'BTLF', temp)
    	endif
    endif
    call GroupClear(g)
    call DestroyGroup(g)
    set g=null
	set p=null
	set u=null
	set temp=null
endfunction

// 五毒笛咒
function wuDuZhou takes nothing returns nothing
    local unit temp= null
    local unit u= GetTriggerUnit()
    local player p= GetOwningPlayer(u)
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    call WuGongShengChong(u , WU_DU_ZHOU , 100)
    set temp=CreateUnit(p, 'e000', x, y, 270)
    call UnitAddAbility(temp, 'A0DW')
    call SetUnitAbilityLevel(temp, 'A0DW', GetUnitAbilityLevel(u, WU_DU_ZHOU))
    call ShowUnitHide(temp)
    call IssuePointOrderById(temp, $D0208, x, y)
    call UnitApplyTimedLife(temp, 'BHwe', 3.)
    set temp=null
    set u=null
    set p=null
endfunction
function wuDuZhouDamage takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc= GetTriggerUnit()
    local real shxishu= 1.
    local real shanghai= 0.
    // 一定概率随机产生一种debuff
    if GetRandomInt(1, 100) <= 25 then
        call WanBuff(u , uc , GetRandomInt(1, 16))
    endif
    if GetUnitAbilityLevel(u, KUI_HUA) != 0 then
        set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(u, HUA_GU) != 0 then
        set shxishu=shxishu + 0.8
    endif
    if GetUnitAbilityLevel(u, HUA_GONG) != 0 then
        set shxishu=shxishu + 0.8
	endif
	// 专属加成
    if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
        set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_HAN_SHA)) )
    endif
    set shanghai=ShangHaiGongShi(u , uc , 14 , 80 , shxishu , WU_DU_ZHOU)
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction

// 驭蛇术引发毒爆
function yuSheShuExplosion takes nothing returns nothing
    local unit uc= GetEnumUnit()
 local unit u= GetAttacker()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu=1.
 local real shanghai=0.
    // 蛇杖效果 毒爆伤害+200%
    if UnitHaveItem(u , ITEM_SHE_ZHANG) then
        set shxishu=shxishu + 2
    endif
    // 专属加成
    if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
        set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_HAN_SHA)) )
    endif
	set shanghai=ShangHaiGongShi(u , uc , 16. , 80. , shxishu , YU_SHE_SHU)
    call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl" , uc , "origin"))) // INLINED!!
	call WuGongShangHai(u , uc , shanghai)
	set u=null
    set uc=null
endfunction
// 噬心剑法
function yuSheShu takes nothing returns nothing
    local unit u= GetAttacker()
    local unit l__ut= GetTriggerUnit()
    local player p= GetOwningPlayer(u)
    local integer i= 1 + GetPlayerId(p)
    local real shxishu= 1.
    local real damage= 1.
    local real range= 600
    local group g= null
    // 1. 造成单体伤害
    if GetRandomInt(1, 100) <= fuyuan[i] / 5 + 15 then
        // 5. 蛇杖效果 伤害+200%，毒爆伤害也+200%伤害
        if UnitHaveItem(u , ITEM_SHE_ZHANG) then
            set shxishu=shxishu + 2
        endif
        // 专属加成
        if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
            set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_HAN_SHA)) )
        endif
        
        set damage=ShangHaiGongShi(u , l__ut , 30 , 160 , shxishu , YU_SHE_SHU)
        call DestroyEffect((AddSpecialEffectTargetEx("Objects\\Spawnmodels\\Undead\\UDeathSmall\\UDeathSmall.mdl" , l__ut , "overhead"))) // INLINED!!
        call WuGongShangHai(u , l__ut , damage)
        // 3. 技能搭配 + 化骨：破防 
        if GetUnitAbilityLevel(u, HUA_GU) >= 1 then
            call WanBuff(u , l__ut , 9)
        endif
        // 4. 技能搭配 + 葵花：虚弱
        if GetUnitAbilityLevel(u, KUI_HUA) >= 1 then
            call WanBuff(u , l__ut , 16)
        endif
        // 2. 如果目标有中毒/深度中毒BUFF，造成毒爆
        if UnitHasBuffBJ(l__ut, POISONED_BUFF) or UnitHasBuffBJ(l__ut, DEEP_POISONED_BUFF) then
            // 深度中毒毒爆范围扩大
            if UnitHasBuffBJ(l__ut, DEEP_POISONED_BUFF) then
                set range=900
            endif
            set g=CreateGroup()
            call GroupEnumUnitsInRange(g, GetUnitX(l__ut), GetUnitY(l__ut), range, Condition(function qianZhuShouCondition))
            call ForGroup(g, function yuSheShuExplosion)
            call DestroyGroup(g)
        endif
        // 6. 武功升重
        call WuGongShengChong(u , YU_SHE_SHU , 600.)
    endif
    set g=null
    set u=null
    set l__ut=null
endfunction

function buTianHalfCd takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    // 搭配 +龙象般若功 CD减半
    if GetUnitAbilityLevel(u, LONG_XIANG) >= 1 then
        call EXSetAbilityState(EXGetUnitAbility(u, BU_TIAN_JING), 1, EXGetAbilityState(EXGetUnitAbility(u, BU_TIAN_JING), 1) / 2)
    endif
    call FlushChildHashtable(YDHT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
    set u=null
endfunction
// 补天心经
function buTianJing takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local integer level= GetUnitAbilityLevel(u, BU_TIAN_JING)
    local integer lifeBase= 500
    local integer realDamageBase= 10
    local integer deathPossibility= 15 - level
    local timer t= CreateTimer()
    call WuGongShengChong(u , BU_TIAN_JING , 60.)
    // 搭配 +葵花 提升增加量，但同时提升死亡概率
    if GetUnitAbilityLevel(u, KUI_HUA) >= 1 then
        set lifeBase=lifeBase * 2
        set deathPossibility=deathPossibility * 2
    endif
    // 搭配 +小无相 不会死亡
    if GetUnitAbilityLevel(u, XIAO_WU_XIANG) >= 1 then
        set deathPossibility=0
    endif
    // 搭配 +吸星大法 10秒之内提升攻速
    if GetUnitAbilityLevel(u, XI_XING) >= 1 then
        call maJiaUseLeveldAbilityAtTargetLoc(u , 'e000' , 'A08F' , 4 , $D0085 , u , 3)
    endif
    
    // 50%概率增加气血上限，50%概率增加真实伤害
    if GetRandomInt(1, 100) <= 50 then
        call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\zhiyu.mdx" , u , "overhead"))) // INLINED!!
        call LifeChange(u , 1 , - lifeBase * level , 'A0DQ')
    else
        call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\lifebreak.mdx" , u , "overhead"))) // INLINED!!
        call ModifyHeroStat(2, u, 0, realDamageBase * level)
    endif
    // 一定概率死亡
    if GetRandomInt(1, 100) <= deathPossibility then
        call KillUnit(u)
    endif
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call TimerStart(t, 0.2, false, function buTianHalfCd)
    
    set t=null
    set u=null
endfunction

function wanChuCondition takes nothing returns boolean
    return DamageFilter(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0) , GetFilterUnit())
endfunction
function wanChuAction takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    local player p= GetOwningPlayer(u)
    local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
    local integer jmax= 4
    local group g= null
    local unit target= null
    local unit dummy= null
    // 搭配双手：暗器数量加倍
    if GetUnitAbilityLevel(u, SHUANG_SHOU) >= 1 then
        set jmax=jmax * 2
    endif
    // 搭配含沙射影：暗器数量加倍
    if UnitHasDenomWeapon(u , ITEM_HAN_SHA) then
        set jmax=jmax * 2
    endif
    
    if j == 1 then
        // 搭配 +小无相 CD减半
        if GetUnitAbilityLevel(u, XIAO_WU_XIANG) >= 1 then
            call EXSetAbilityState(EXGetUnitAbility(u, WAN_CHU_SHI_XIN), 1, EXGetAbilityState(EXGetUnitAbility(u, WAN_CHU_SHI_XIN), 1) / 2)
        endif
        // "婆婆姊姊"称号 CD减半
        if isTitle(1 + GetPlayerId(p) , 45) then
            // call EXSetAbilityState(EXGetUnitAbility(u, WAN_CHU_SHI_XIN), 1, 0)
            call EXSetAbilityState(EXGetUnitAbility(u, WAN_CHU_SHI_XIN), 1, EXGetAbilityState(EXGetUnitAbility(u, WAN_CHU_SHI_XIN), 1) / 2)
        endif
    endif
    if j < jmax then
        set g=CreateGroup()
        call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 1200, Condition(function wanChuCondition))
        set target=GroupPickRandomUnit(g)
        set dummy=CreateUnit(p, 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
        call ShowUnitHide(dummy)
        call UnitAddAbility(dummy, 'A0DK')
        call IssueTargetOrderById(dummy, $D007F, target)
        call UnitApplyTimedLife(dummy, 'BHwe', 3)
        call DestroyGroup(g)
        call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
    else
        call FlushChildHashtable(YDHT, GetHandleId(t))
        call PauseTimer(t)
        call DestroyTimer(t)
    endif
    set g=null
    set target=null
    set dummy=null
    set t=null
    set u=null
    set p=null
endfunction
// 万蜍噬心
function wanChuShiXin takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local timer t= CreateTimer()
    call WuGongShengChong(u , WAN_CHU_SHI_XIN , 120.)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call TimerStart(t, 0.2, true, function wanChuAction)
    
    set u=null
endfunction
function wanChuEffect takes nothing returns nothing
    local unit u= udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
    local unit target= GetTriggerUnit()
    // 葵花搭配：增加百分比伤害
    local real coeff= 0.77 - 0.03 * GetUnitAbilityLevel(u, WAN_CHU_SHI_XIN) * ( 1 + GetUnitAbilityLevel(u, KUI_HUA) )
    call percentDamage(target , 100 - 100 * coeff , false)
    call WanBuff(u , target , 14)
    set u=null
    set target=null
endfunction

// 桃花岛
// 落英神剑掌
function luoYingZhang takes unit u returns nothing
 local real radius= 350
 local real duration= 3
 local real frequency= 0.03
 local real angleSpeed= 3.6
	
	// 武功升重
	call WuGongShengChong(u , LUO_YING_ZHANG , 300)
	
	// +九阴真经·内功：持续时间翻倍
	if GetUnitAbilityLevel(u, JIU_YIN) >= 1 then
		set duration=duration * 2
	endif
	
	// +碧海潮生曲：持续时间翻倍
	if GetUnitAbilityLevel(u, BI_HAI) >= 1 then
		set duration=duration * 2
	endif
	
	// +双手互搏：额外发一个反向旋转的花盘
	if GetUnitAbilityLevel(u, SHUANG_SHOU) >= 1 then
		call YDWECreateEwsp(u , 'e01H' , 1 , radius , duration , frequency , - angleSpeed)
	endif
	call YDWECreateEwsp(u , 'e01H' , 1 , radius , duration , frequency , angleSpeed)
endfunction
function luoYingZhangDamage takes unit u,unit l__ut returns nothing
 local real shxishu= 1.
 local real shanghai= 0.
	
	// +弹指神通：伤害+80%
	if GetUnitAbilityLevel(u, TAN_ZHI) != 0 then
		set shxishu=shxishu + 0.8
	endif
 
	// 专属加成
	if UnitHasDenomWeapon(u , ITEM_YU_XIAO) then
		set shxishu=shxishu * 3
	endif
	
	set shanghai=ShangHaiGongShi(u , l__ut , 25 , 25 , shxishu , LUO_YING_ZHANG)
	call WuGongShangHai(u , l__ut , shanghai)
	
	set u=null
	set l__ut=null
endfunction
// 落英剑法
function luoYingJian takes unit u,unit l__ut returns nothing
	
 local group g= CreateGroup()
 local group l__gt
 local unit current_unit
 local unit dummy
 local real range= 600
	
	
	// 武功升重
	call WuGongShengChong(u , LUO_YING_JIAN , 700)
	
	//+九阴真经内功：增加伤害范围
	if GetUnitAbilityLevel(u, JIU_YIN) >= 1 then
		set range=range + 300
	endif
	
	call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), range, Condition(function isAttackerEnemy))
	loop
	exitwhen CountUnitsInGroup(g) == 0
		set current_unit=FirstOfGroup(g)
		set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
		call ShowUnitHide(dummy)
		call UnitAddAbility(dummy, 'A0EF') // 马甲技能
call IssueTargetOrderById(dummy, $D007F, current_unit)
		call UnitApplyTimedLife(dummy, 'BHwe', 3)
		call GroupRemoveUnit(g, current_unit)
		// +九阴白骨爪：剑法弹射一次
		if GetUnitAbilityLevel(u, JIU_ZHAO) >= 1 then
			set l__gt=CreateGroup()
			call GroupEnumUnitsInRange(l__gt, GetUnitX(current_unit), GetUnitY(current_unit), range, Condition(function isAttackerEnemy))
			set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(current_unit), GetUnitY(current_unit), bj_UNIT_FACING)
			set current_unit=GroupPickRandomUnit(l__gt)
			call ShowUnitHide(dummy)
			call UnitAddAbility(dummy, 'A0EF') // 马甲技能
call IssueTargetOrderById(dummy, $D007F, current_unit)
			call UnitApplyTimedLife(dummy, 'BHwe', 3)
			call GroupRemoveUnit(g, current_unit)
			call GroupClear(l__gt)
			call DestroyGroup(l__gt)
		endif
	endloop
	call DestroyGroup(g)
	set g=null
	set l__gt=null
	set current_unit=null
	set dummy=null
	
endfunction
function luoYingJianDamage takes unit u,unit l__ut returns nothing
 local real shxishu= 1.
 local real shanghai= 0.
 local integer biBoPoint= LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	// +弹指神通：伤害+80%
	if GetUnitAbilityLevel(u, TAN_ZHI) != 0 then
		set shxishu=shxishu + 0.8
	endif
	// 碧波心经点数：伤害
	if biBoPoint > 0 then
		set shxishu=shxishu + biBoPoint * 0.02
	endif
	// 根骨和胆魄：增加伤害
	if gengu[i] >= 20 and danpo[i] >= 20 then
		set shxishu=shxishu + 0.03 * ( gengu[i] - 20 ) + 0.03 * ( danpo[i] - 20 )
	endif
	// +打狗棒法：造成流血
	if GetUnitAbilityLevel(u, DA_GOU) != 0 then
		call WanBuff(u , l__ut , 3)
	endif
 
	// 专属加成
	if UnitHasDenomWeapon(u , ITEM_YU_XIAO) then
		set shxishu=shxishu * 3
	endif
	
	set shanghai=ShangHaiGongShi(u , l__ut , 80 , 80 , shxishu , LUO_YING_JIAN)
	call WuGongShangHai(u , l__ut , shanghai)
	
endfunction
// 旋风扫叶腿
function xuanFengTui takes unit u,unit l__ut returns nothing
 local unit dummy
 local integer level= 1
 local integer biBoPoint= LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT)
	
	// 武功升重
	call WuGongShengChong(u , XUAN_FENG_TUI , 600)
	
	// 碧波心经点数：持续时间
	if biBoPoint > 0 then
		set level=IMinBJ(9, R2I(level + biBoPoint * 0.2))
	endif
	
	// +双手互搏：额外形成一阵旋风
	set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
	call ShowUnitHide(dummy)
	call UnitAddAbility(dummy, 'A0EJ') // 马甲技能
if level <= 9 then
		call SetUnitAbilityLevel(dummy, 'A0EJ', level)
	endif
	call IssueTargetOrderById(dummy, $D0275, l__ut)
	call UnitApplyTimedLife(dummy, 'BHwe', 3)
	
	if GetUnitAbilityLevel(u, SHUANG_SHOU) >= 1 then
		set dummy=CreateUnit(GetOwningPlayer(u), 'e000', GetUnitX(u), GetUnitY(u), bj_UNIT_FACING)
		call ShowUnitHide(dummy)
		call UnitAddAbility(dummy, 'A0EJ') // 马甲技能
call SetUnitAbilityLevel(dummy, 'A0EJ', level)
		call IssueTargetOrderById(dummy, $D0275, l__ut)
		call UnitApplyTimedLife(dummy, 'BHwe', 3)
	endif
	set dummy=null
endfunction
function xuanFengTuiDamage takes unit u,unit l__ut returns nothing
	
 local real shxishu= 1.
 local real shanghai= 0.
 local integer biBoPoint= LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT)
	// +弹指神通：伤害+80%
	if GetUnitAbilityLevel(u, TAN_ZHI) != 0 then
		set shxishu=shxishu + 0.8
	endif
	
	// +九阴真经内功：伤害+70%
	if GetUnitAbilityLevel(u, JIU_YIN) != 0 then
		set shxishu=shxishu + 0.7
	endif
 
	// 专属加成
	if UnitHasDenomWeapon(u , ITEM_YU_XIAO) then
		set shxishu=shxishu * 3
	endif
	
	set shanghai=ShangHaiGongShi(u , l__ut , 15 , 20 , shxishu , XUAN_FENG_TUI)
	call WuGongShangHai(u , l__ut , shanghai)
	
endfunction
// 奇门术数
function qimenCd takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local real cdPercent= LoadReal(YDHT, GetHandleId(t), 1)
	
	call EXSetAbilityState(EXGetUnitAbility(u, QI_MEN_SHU_SHU), 1, EXGetAbilityState(EXGetUnitAbility(u, QI_MEN_SHU_SHU), 1) * cdPercent)
	
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function qiMenShuShu takes unit u returns nothing
 local integer base= 10
 local integer num0
 local integer num1
 local string s= ""
 local integer opera= 0
local integer count
 local location loc= GetUnitLoc(u)
 local group g
 local integer rand= GetRandomInt(1, 3)
 local unit currentUnit
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    local real damage
    local unit dummy
 local real param= 1
 local timer t
 local real cdPercent= 1
    // 专属加成
	if UnitHasDenomWeapon(u , ITEM_YU_XIAO) then
		set param=param * 3
	endif
    //     “女中诸葛称号”：将加法变为乘法
	if isTitle(i , 46) then
		set opera=1
	endif
    // 悟性大于50：改为随机计算20以内的加法（或乘法）
    if wuxing[i] >= 50 then
        set base=20
    endif
	// 武功升重
	call WuGongShengChong(u , QI_MEN_SHU_SHU , 70)
	
	set num0=GetRandomInt(1, base)
	set num1=GetRandomInt(1, base)
	if opera == 0 then
		set count=num0 + num1
		set s=I2S(num0) + "+" + I2S(num1) + "=" + I2S(count)
	elseif opera == 1 then
		set count=num0 * num1
		set s=I2S(num0) + "×" + I2S(num1) + "=" + I2S(count)
	endif
	
	call CreateTextTagLocBJ(s, loc, 0, 16., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
	call Nw(3 , bj_lastCreatedTextTag)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(70, 110))
	
	if qimen_status[i] == 0 then
		// 效果1 火切
		set g=CreateGroup()
		call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 2000, Condition(function isTriggerEnemy))
		loop
		exitwhen count <= 0 or CountUnitsInGroup(g) <= 0
			set currentUnit=FirstOfGroup(g)
			
			call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\huoqie.mdx" , currentUnit , "origin"))) // INLINED!!
			set damage=ShangHaiGongShi(u , currentUnit , 800 , 800 , param , QI_MEN_SHU_SHU)
			call WuGongShangHai(u , currentUnit , damage)
			
			set count=count - 1
			call GroupRemoveUnit(g, currentUnit)
        endloop
		call DestroyGroup(g)
		set cdPercent=0.2
	elseif qimen_status[i] == 1 then
		// 效果2 随机加六围
		call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\lifebreak.mdx" , u , "overhead"))) // INLINED!!
		call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl" , u , "overhead"))) // INLINED!!
		if count > 50 then
			set count=50
		endif
		if GetRandomInt(1, 6) == 1 then
			set wuxing[i]=wuxing[i] + count
			set s="悟性+" + I2S(count)
		elseif GetRandomInt(1, 5) == 1 then
			set gengu[i]=gengu[i] + count
			set s="根骨+" + I2S(count)
		elseif GetRandomInt(1, 4) == 1 then
			set fuyuan[i]=fuyuan[i] + count
			set s="福缘+" + I2S(count)
		elseif GetRandomInt(1, 3) == 1 then
			set danpo[i]=danpo[i] + count
			set s="胆魄+" + I2S(count)
		elseif GetRandomInt(1, 2) == 1 then
			set jingmai[i]=jingmai[i] + count
			set s="经脉" + I2S(count)
		else
			set yishu[i]=yishu[i] + count
			set s="医术+" + I2S(count)
		endif
		call CreateTextTagLocBJ(s, loc, 0, 15., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
		call Nw(3 , bj_lastCreatedTextTag)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(70, 110))
		set cdPercent=0.8
	elseif qimen_status[i] == 2 then
        // 效果3 大球
		call YDWECreateEwsp(u , 'e01J' , 2 , 450 , count , 0.03 , 3.6)
		set cdPercent=0.5
	endif
	set t=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveReal(YDHT, GetHandleId(t), 1, cdPercent)
	call TimerStart(t, 0.2, false, function qimenCd)
    call RemoveLocation(loc)
    set dummy=null
	set currentUnit=null
	set g=null
	set loc=null
	set t=null
endfunction
function qiMenShuShuDamage takes unit u,unit l__ut returns nothing
    local real shxishu= 1.
 local real shanghai= 0.
	// 专属加成
	if UnitHasDenomWeapon(u , ITEM_YU_XIAO) then
		set shxishu=shxishu * 3
	endif
	
	set shanghai=ShangHaiGongShi(u , l__ut , 90 , 90 , shxishu , QI_MEN_SHU_SHU)
	call WuGongShangHai(u , l__ut , shanghai)
	
endfunction
// 碧波心经
function biBoXinJingRemoveBuff takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	call UnitRemoveAbility(u, 'A0DB')
	call UnitRemoveAbility(u, 'A0DC')
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set u=null
	set t=null
endfunction
function biBoXinJingHalfCd takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	
	call EXSetAbilityState(EXGetUnitAbility(u, BI_BO_XIN_JING), 1, EXGetAbilityState(EXGetUnitAbility(u, BI_BO_XIN_JING), 1) / 2)
	
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function biBoXinJing takes unit u returns nothing
 local integer point= LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer level= GetUnitAbilityLevel(u, BI_BO_XIN_JING)
 local timer t
 local string s= ""
 local location loc
	if tide_rising[i] then
		// 潮起
		if point < 5 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFDD0000碧波心经点数不足，无法使用")
			call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 120)
			call UnitRemoveAbility(u, BI_BO_XIN_JING)
			call UnitAddAbility(u, BI_BO_XIN_JING)
			call SetUnitAbilityLevel(u, BI_BO_XIN_JING, level)
		else
			call SaveInteger(YDHT, GetHandleId(u), BI_BO_POINT, LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT) - 5)
			call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl" , u , "overhead"))) // INLINED!!
			call WuGongShengChong(u , BI_BO_XIN_JING , 70)
			call ModifyHeroStat(0, u, 0, 30 * level)
			call ModifyHeroStat(1, u, 0, 30 * level)
			call ModifyHeroStat(2, u, 0, 30 * level)
			
			set loc=GetUnitLoc(u)
			set s="招式伤害+" + I2S(30 * level)
			call CreateTextTagLocBJ(s, loc, 0, 15., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(70, 110))
			set s="内力+" + I2S(30 * level)
			call CreateTextTagLocBJ(s, loc, 0, 15., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(70, 110))
			set s="真实伤害+" + I2S(30 * level)
			call CreateTextTagLocBJ(s, loc, 0, 15., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(70, 110))
			call RemoveLocation(loc)
			
			if GetUnitAbilityLevel(u, DA_GOU) >= 1 then
				set t=CreateTimer()
				call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
				call TimerStart(t, 0.2, false, function biBoXinJingHalfCd)
			endif
		endif
	else
		// 潮落
		if point < 3 then
			call DisplayTextToPlayer(p, 0, 0, "|cFFDD0000碧波心经点数不足，无法使用")
			call UnitRemoveAbility(u, BI_BO_XIN_JING)
			call UnitAddAbility(u, BI_BO_XIN_JING)
			call SetUnitAbilityLevel(u, BI_BO_XIN_JING, level)
		else
			call SaveInteger(YDHT, GetHandleId(u), BI_BO_POINT, LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT) - 3)
			call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\zhiyu.mdx" , u , "overhead"))) // INLINED!!
			call UnitAddAbility(u, 'A0DB')
			call UnitAddAbility(u, 'A0DC')
			call SetUnitAbilityLevel(u, 'A0DB', level)
			call SetUnitAbilityLevel(u, 'A0DC', level)
			
			set t=CreateTimer()
			call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
			call TimerStart(t, 25, false, function biBoXinJingRemoveBuff)
			call WuGongShengChong(u , BI_BO_XIN_JING , 70)
			if GetUnitAbilityLevel(u, DA_GOU) >= 1 then
				set t=CreateTimer()
				call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
				call TimerStart(t, 0.2, false, function biBoXinJingHalfCd)
			endif
		endif
	endif
	set loc=null
	set t=null
	set p=null
endfunction

// - 装逼遭雷劈 我装逼你遭雷劈 被动
//     - 我能打20位伤害
//     - 今天天气好好哦
//     - 送每人一套决战江湖
//     - +无魅雷手 伤害+200% 让雷来得更猛烈一些 小伤害6.05
function zaoLeiPiAction takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local real x= LoadReal(YDHT, GetHandleId(t), 1)
 local real y= LoadReal(YDHT, GetHandleId(t), 2)
 local unit dummy= CreateUnit(GetOwningPlayer(u), 'e01K', x, y, bj_UNIT_FACING)
 local group g= CreateGroup()
	call UnitAddAbility(dummy, 'A0EU') // 马甲技能
call UnitApplyTimedLife(dummy, 'BHwe', 2)
	call GroupEnumUnitsInRange(g, GetUnitX(dummy), GetUnitY(dummy), 900, Condition(function isPlayersEnemy))
	call IssueTargetOrderById(dummy, $D026B, FirstOfGroup(g))
	call GroupClear(g)
	call DestroyGroup(g)
	set g=null
	set t=null
	set dummy=null
endfunction
function zaoLeiPi takes unit u,unit l__ut returns nothing
 local timer t= CreateTimer()
 local location loc= null
 local string s= ""
 local integer rand= GetRandomInt(1, 100)
	call WuGongShengChong(u , ZAO_LEI_PI , 700)
	
	
	set loc=GetUnitLoc(u)
	if rand < 30 then
		set s="26位伤害随便打"
	elseif rand < 60 then
		set s="单手快速问鼎天下"
	else
		set s="我蛋哥天下无敌"
	endif
	call CreateTextTagLocBJ(s, loc, 0, 15., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
	call Nw(3 , bj_lastCreatedTextTag)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
	call RemoveLocation(loc)
	
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveReal(YDHT, GetHandleId(t), 1, GetUnitX(l__ut))
	call SaveReal(YDHT, GetHandleId(t), 2, GetUnitY(l__ut))
	call TimerStart(t, 0.3, true, function zaoLeiPiAction)
	call YDWETimerDestroyTimer(3.1 , t)
	set t=null
	set loc=null
endfunction
function zaoLeiPiDamage takes unit u,unit l__ut returns nothing
 local real shxishu= 1.
 local real shanghai= 0.
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 
	// 无魅雷手
	if UnitHaveItem(u , 'I00S') then
		set shxishu=shxishu + 2
	endif
	
	// 专属
	if UnitHasDenomWeapon(u , ITEM_YE_LUO) then
		set shxishu=shxishu * ( 2 + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_YE_LUO)) )
	endif
	
	// 胆魄加成伤害
	set shxishu=shxishu + danpo[i] * 0.03
	
	set shanghai=ShangHaiGongShi(u , l__ut , 20 , 20 , shxishu , ZAO_LEI_PI)
	call WuGongShangHai(u , l__ut , shanghai)
endfunction
function isShopDecoration takes integer id returns boolean
	return id == 'I01Z' or id == 'I01Y' or id == 'I01V' or id == 'I01K' or id == 'I018' or id == 'I01I'
endfunction
function isShopWeapon takes integer id returns boolean
	return id == 'I01F' or id == 'I013' or id == 'I016'
endfunction
function isShopEuqip takes integer id returns boolean
	return id == 'I01T' or id == 'I01H' or id == 'I017'
endfunction
function isShopKungfu takes integer id returns boolean
 local integer i= 1
	loop
	exitwhen i > 18
		if id == udg_jianghu[i] then
			return true
		endif
		set i=i + 1
	endloop
	set i=1
	loop
	exitwhen i > 10
		if id == udg_juexue[i] then
			return true
		endif
		set i=i + 1
	endloop
	set i=1
	loop
	exitwhen i > 8
		if id == udg_juenei[i] then
			return true
		endif
		set i=i + 1
	endloop
	return id == 'I0AI' or id == 'I0AH' or id == 'I0AJ'
endfunction
function isShopOther takes integer id returns boolean
	return id == 'I08W' or id == 'I0D1' or id == 'I00E'
endfunction
// - 八面玲珑 被动
//     - 讨价还价 买东西返利20% + 3*等级 +龙象 返利+30%
//     - 通融通融 历练用钱不用声望 （10% * 历练数）金钱 
function baMianLingLong takes unit u,item it returns nothing
 local integer gold= S2I(EXExecuteScript("(require'jass.slk').item[" + I2S(GetItemTypeId(it)) + "].goldcost"))
 local integer lumber= S2I(EXExecuteScript("(require'jass.slk').item[" + I2S(GetItemTypeId(it)) + "].lumbercost"))
 local integer level= GetUnitAbilityLevel(u, BA_MIAN_LING_LONG)
 local real rate= 0.01 * ( 20 + 3 * level )
 local integer gold_return
 local integer lumber_return
 local integer id= GetItemTypeId(it)
	if not IsUnitType(u, UNIT_TYPE_DEAD) and ( isShopDecoration(id) or isShopWeapon(id) or isShopEuqip(id) or isShopKungfu(id) or isShopOther(id) ) then
		if GetUnitAbilityLevel(u, LONG_XIANG) >= 1 then
			set rate=rate + 0.3
		endif
		
		set gold_return=R2I(gold * rate) + 1
		set lumber_return=R2I(lumber * rate) + 1
		
		call AdjustPlayerStateBJ(gold_return, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
		call AdjustPlayerStateBJ(lumber_return, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_LUMBER)
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00购买成功，返利金币+" + I2S(gold_return) + "，珍稀币+" + I2S(lumber_return))
		
		call WuGongShengChong(u , BA_MIAN_LING_LONG , 50)
	endif
endfunction
// - 反手牵猪 偷钱 偷木 主动
//     - +寻宝师副职 偷奇武 
//     - +妙手 偷秘籍（不含奇武）
//     - +炼丹师副职 偷丹药
//     - +寻宝大师 偷武器
function fanShouQianZhu takes unit u,unit l__ut returns nothing
 local integer qiwu_rand= GetRandomInt(1, 15)
 local integer miji_rand
 local integer item_id
 local integer dan_rand= GetRandomInt(1, 11)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real addition= 1 + 0.5 * GetUnitAbilityLevel(u, FAN_SHOU_QIAN_ZHU)
 local integer gold_num
 local integer lumber_num
 local integer reputation_sub= 20 * GetUnitAbilityLevel(u, FAN_SHOU_QIAN_ZHU)
	
	if UnitHasDenomWeapon(u , ITEM_YE_LUO) then
		set addition=addition + 0.1 * GetItemCharges(FetchUnitItem(u , ITEM_YE_LUO))
	endif
	
	call WuGongShengChong(u , FAN_SHOU_QIAN_ZHU , 80)
	call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl" , l__ut , "chest"))) // INLINED!!
	// 判断目标是否为BOSS
	if ModuloInteger(GetUnitPointValue(l__ut), 100) == 1 or ModuloInteger(GetUnitPointValue(l__ut), 100) == 2 then
		set gold_num=R2I(2000 * GetRandomInt(2, 20) * addition)
		set lumber_num=R2I(4 * GetRandomInt(2, 10) * addition)
		set shengwang[i]=shengwang[i] - reputation_sub
		call commonAddGold(GetOwningPlayer(u) , gold_num)
		call commonAddLumber(GetOwningPlayer(u) , lumber_num)
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了金币+|r" + I2S(gold_num))
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了珍稀币+|r" + I2S(lumber_num))
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00声望减少" + I2S(reputation_sub))
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(20 * addition) then // INLINED!!
			call UnitAddItemById(u, udg_qiwu[qiwu_rand])
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了奇武|r" + GetObjectName(udg_qiwu[qiwu_rand]))
		endif
		if GetUnitAbilityLevel(u, MIAO_SHOU_KONG_KONG) >= 1 and GetRandomInt(1, 100) <= R2I(20 * addition) then
			if GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 18)
				set item_id=udg_jianghu[miji_rand]
			elseif GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 10)
				set item_id=udg_juexue[miji_rand]
			elseif GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 8)
				set item_id=udg_juenei[miji_rand]
			else
				set miji_rand=GetRandomInt(1, 11)
				set item_id=udg_canzhang[miji_rand]
			endif
			call UnitAddItemById(u, item_id)
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了秘籍|r" + GetObjectName(item_id))
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(20 * addition) then // INLINED!!
			call UnitAddItemById(u, udg_dan[dan_rand])
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了丹药|r" + GetObjectName(udg_dan[dan_rand]))
		endif
		if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(20 * addition) then // INLINED!!
			if GetRandomInt(1, 100) <= 50 then
				set item_id=ITEM_YE_LUO
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了野螺|r")
			else
				set item_id=udg_weapon[GetRandomInt(1, 30)]
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了武器|r" + GetObjectName(item_id))
			endif
			call UnitAddItemById(u, item_id)
		endif
	else
		set gold_num=R2I(1000 * GetRandomInt(2, 20) * addition)
		set lumber_num=R2I(2 * GetRandomInt(2, 10) * addition)
		set shengwang[i]=shengwang[i] - reputation_sub
		call commonAddGold(GetOwningPlayer(u) , gold_num)
		call commonAddLumber(GetOwningPlayer(u) , lumber_num)
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了金币+|r" + I2S(gold_num))
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了珍稀币+|r" + I2S(lumber_num))
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00声望减少" + I2S(reputation_sub))
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(7 * addition) then // INLINED!!
			call UnitAddItemById(u, udg_qiwu[qiwu_rand])
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了奇武" + GetObjectName(udg_qiwu[qiwu_rand]))
		endif
		if GetUnitAbilityLevel(u, MIAO_SHOU_KONG_KONG) >= 1 and GetRandomInt(1, 100) <= R2I(7 * addition) then
			if GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 18)
				set item_id=udg_jianghu[miji_rand]
			elseif GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 10)
				set item_id=udg_juexue[miji_rand]
			elseif GetRandomInt(1, 100) <= 80 then
				set miji_rand=GetRandomInt(1, 8)
				set item_id=udg_juenei[miji_rand]
			else
				set miji_rand=GetRandomInt(1, 11)
				set item_id=udg_canzhang[miji_rand]
			endif
			call UnitAddItemById(u, item_id)
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了秘籍|r" + GetObjectName(item_id))
		endif
		if (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( LIAN_DAN) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(7 * addition) then // INLINED!!
			call UnitAddItemById(u, udg_dan[dan_rand])
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了丹药|r" + GetObjectName(udg_dan[dan_rand]))
		endif
		if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( XUN_BAO) - 1)])) != 0) and GetRandomInt(1, 100) <= R2I(7 * addition) then // INLINED!!
			if GetRandomInt(1, 100) <= 50 then
				set item_id=ITEM_YE_LUO
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了野螺|r")
			else
				set item_id=udg_weapon[GetRandomInt(1, 30)]
				call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00偷取了武器|r" + GetObjectName(item_id))
			endif
			call UnitAddItemById(u, item_id)
		endif
	endif
	
endfunction
// - 乾坤一掷  主动
//     - 点数 * 3000金钱换 （1 ~ 点数 * 20点）三围
//     - 点数 * 100木换 （1 ~ 点数 * 5）绝学领悟
function qianKunYiZhi takes unit u returns nothing
 local integer rand= GetRandomInt(1, 6)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer gold= GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)
 local integer lumber= GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER)
 local integer add
 local location loc
 local string s
 local real addition= 1
 local integer goldBase= 3000
	
	if UnitHasDenomWeapon(u , ITEM_YE_LUO) then
		set addition=addition + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_YE_LUO))
	endif
	call WuGongShengChong(u , QIAN_KUN_YI_ZHI , 60)
	call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl" , u , "overhead"))) // INLINED!!
	call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00掷出了" + I2S(rand) + "点|r")
	if GetRandomInt(1, 2) == 1 then
		if gold > rand * goldBase then
			set add=R2I(GetRandomInt(1, rand * 20) * addition)
			call ModifyHeroStat(0, u, 0, add)
			call ModifyHeroStat(1, u, 0, add)
			call ModifyHeroStat(2, u, 0, add)
			
			set loc=GetUnitLoc(u)
			set s="金币-" + I2S(rand * goldBase)
			call commonAddGold(GetOwningPlayer(u) , - rand * goldBase)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			set s="招式伤害+" + I2S(add)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			set s="内力+" + I2S(add)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			set s="真实伤害+" + I2S(add)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00金钱不足，无法兑换|r")
		endif
	else
		if lumber > rand * 100 then
			set add=R2I(GetRandomInt(1, rand * 5) * addition)
			set juexuelingwu[i]=juexuelingwu[i] + add
			
			set loc=GetUnitLoc(u)
			set s="珍稀币-" + I2S(rand * 100)
			call commonAddLumber(GetOwningPlayer(u) , - rand * 100)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			set s="绝学领悟+" + I2S(add)
			call CreateTextTagLocBJ(s, loc, 0, 12., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
			call Nw(3 , bj_lastCreatedTextTag)
			call SetTextTagVelocityBJ(bj_lastCreatedTextTag, GetRandomReal(50, 70), GetRandomReal(50, 130))
			call RemoveLocation(loc)
		else
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00珍稀币不足，无法兑换|r")
		endif
	endif
	set p=null
	set loc=null
endfunction
// - 大功告成 被动
//     - 野螺派的精神胜利法
//     - （35 + 5 * 等级）% 概率免死并回满血
//     - +龟息功 死后原地复活
//     - +枯荣禅功 死亡时间减半
function daGongGaoCheng takes unit u returns nothing
 local integer level= GetUnitAbilityLevel(u, DA_GONG_GAO_CHENG)
 local real addition= 1
	if UnitHasDenomWeapon(u , ITEM_YE_LUO) then
		set addition=addition + 0.03 * GetItemCharges(FetchUnitItem(u , ITEM_YE_LUO))
	endif
	call WuGongShengChong(u , DA_GONG_GAO_CHENG , 200)
	if GetRandomInt(1, 100) <= R2I(( 35 + 5 * level ) * addition) then
		call WuDi(u)
		call SetUnitLifePercentBJ(u, 100)
	endif
	
endfunction
// 门派：雪山
// 1技能 雪山剑法：攻击随机造成前方直线上敌人冻住，并造成伤害
// 2技能 风沙莽莽
// 3技能 金乌刀法
// 毕业技能1 心法：雪花六出
// 毕业技能2 特殊：无妄神功
// 专属：雪山细剑
function xueShanJianFa takes unit attacker,unit target returns nothing
    // 伤害系数
    local real coefficient= 1
    local real damage= 0
    local real range= 500
    local group g= CreateGroup()
    local real x= GetUnitX(attacker)
    local real y= GetUnitY(attacker)
    local unit enumUnit= null
    // 连城剑法加成
    if GetUnitAbilityLevel(attacker, 'A06J') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 罗汉伏魔功加成
    if GetUnitAbilityLevel(attacker, 'A07O') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 专属加成
    if UnitHasDenomWeapon(attacker , 'I0EZ') then
        set coefficient=coefficient * 4
    endif
    // 太玄经增加范围
    if GetUnitAbilityLevel(attacker, 'A0D8') > 0 then
        set range=range + 700
    endif
    call GroupEnumUnitsInRange(g, x, y, range, null)
    loop
        set enumUnit=FirstOfGroup(g)
        exitwhen enumUnit == null
        if IsUnitEnemy(enumUnit, GetOwningPlayer(attacker)) and IsUnitAliveBJ(enumUnit) then
            // 冰魄银针冰冻敌人
            if GetUnitAbilityLevel(attacker, 'A07A') > 0 then
                call WanBuff(attacker , enumUnit , 17)
            endif
            // 雪山剑法伤害
            call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\Blizzard\\BlizzardTarget.mdl" , enumUnit , "overhead"))) // INLINED!!
            set damage=ShangHaiGongShi(attacker , enumUnit , 15 , 15 , coefficient , XUE_SHAN_JIAN_FA)
            call WuGongShangHai(attacker , enumUnit , damage)
        endif
        call GroupRemoveUnit(g, enumUnit)
    endloop
    call WuGongShengChong(attacker , XUE_SHAN_JIAN_FA , 600)
    call DestroyGroup(g)
    set g=null
    set enumUnit=null
endfunction
function fengShaMangMang takes unit u returns nothing
    local player p= GetOwningPlayer(u)
    local real angle= 0
    local real x= 0
    local real y= 0
    local unit dummy= null
    local real lifetime= 0
    local integer i= 1
    local integer pId= GetPlayerId(p) + 1
    loop
        exitwhen i > 18
        set angle=i * 20
        set x=350 * CosBJ(angle) * CosBJ(angle) * CosBJ(angle)
        set y=350 * SinBJ(angle) * SinBJ(angle) * SinBJ(angle)
        set dummy=CreateUnit(p, 'e01M', GetUnitX(udg_hero[pId]) + x, GetUnitY(udg_hero[pId]) + y, 270)
        call IssueImmediateOrderById(dummy, $D00D1)
        if GetUnitAbilityLevel(udg_hero[pId], 'A07O') > 0 then
            set lifetime=20
        else
            set lifetime=10
        endif
        call UnitApplyTimedLife(dummy, 'BHwe', lifetime)
        // 太玄经 +攻速光环
        if GetUnitAbilityLevel(udg_hero[pId], 'A0D8') > 0 then
            set dummy=CreateUnit(p, 'e000', GetUnitX(udg_hero[pId]) + x, GetUnitY(udg_hero[pId]) + y, 270)
            call UnitAddAbility(dummy, 'A0F3')
            call ShowUnit(dummy, false)
            call UnitApplyTimedLife(dummy, 'BHwe', lifetime)
        endif
        set i=i + 1
    endloop
    call WuGongShengChong(u , FENG_SHA_MANG_MANG , 120)
    set dummy=null
    set p=null
endfunction
function fengShaMangMangDamage takes unit hero,unit target returns nothing
    local real coefficient= 1
    local real damage= 0
    local player p= GetOwningPlayer(hero)
    // 连城剑法加成
    if GetUnitAbilityLevel(hero, 'A06J') > 0 then
        set coefficient=coefficient + 0.7
    endif
    // 化骨绵掌加成
    if GetUnitAbilityLevel(hero, 'A06L') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 专属加成
    if UnitHasDenomWeapon(hero , 'I0EZ') then
        set coefficient=coefficient * 4
    endif
    set damage=ShangHaiGongShi(hero , target , 130 , 150 , coefficient , FENG_SHA_MANG_MANG)
    call WuGongShangHai(hero , target , damage)
    // 20%冰冻敌人
    if GetRandomInt(1, 100) <= 20 then
        call WanBuff(hero , target , 17)
    endif
    set p=null
endfunction
function jinWuDaoFa takes unit source,unit target returns nothing
    // 伤害系数
    local real coefficient= 1
    local real damage= 0
    local real range= 800
    local group g= CreateGroup()
    local real x= GetUnitX(source)
    local real y= GetUnitY(source)
    local unit enumUnit= null
    // 弹指神通加成
    if GetUnitAbilityLevel(source, 'A06H') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 罗汉伏魔功加成
    if GetUnitAbilityLevel(source, 'A07O') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 专属加成
    if UnitHasDenomWeapon(source , 'I0EZ') then
        set coefficient=coefficient * 4
    endif
    // 太玄经加成
    if GetUnitAbilityLevel(source, 'A0D8') > 0 then
        set coefficient=coefficient + 1.2
    endif
    call GroupEnumUnitsInRange(g, x, y, range, null)
    loop
        set enumUnit=FirstOfGroup(g)
        exitwhen enumUnit == null
        if IsUnitEnemy(enumUnit, GetOwningPlayer(source)) and IsUnitAliveBJ(enumUnit) then
            // 吸星大法造成重伤
            if GetUnitAbilityLevel(source, 'A06R') > 0 then
                call WanBuff(source , enumUnit , 6)
            endif
            call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\firecut.mdx" , enumUnit , "origin"))) // INLINED!!
            set damage=ShangHaiGongShi(source , enumUnit , 60 , 60 , coefficient , JIN_WU_DAO_FA)
            call WuGongShangHai(source , enumUnit , damage)
        endif
        call GroupRemoveUnit(g, enumUnit)
    endloop
    call WuGongShengChong(source , JIN_WU_DAO_FA , 720)
    call DestroyGroup(g)
    set g=null
    set enumUnit=null
endfunction
function xueHuaTaiXuan takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    local real angle= LoadReal(YDHT, GetHandleId(t), 1)
    local integer j= LoadInteger(YDHT, GetHandleId(t), 2)
    local real x= 0
    local real y= 0
    if j > 200 then
        call FlushChildHashtable(YDHT, GetHandleId(t))
        call PauseTimer(t)
        call DestroyTimer(t)
    else
        call SaveInteger(YDHT, GetHandleId(t), 2, j + 1)
        call SetUnitX(u, GetUnitX(u) + 5 * CosBJ(angle))
        call SetUnitY(u, GetUnitY(u) + 5 * SinBJ(angle))
    endif
    set u=null
    set t=null
endfunction
function xueHuaLiuChu takes unit u returns nothing
    local player p= GetOwningPlayer(u)
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local integer i= 1
    local unit dummy= null
    local timer t= null
    
    call WuGongShengChong(u , XUE_HUA_LIU_CHU , 120)
    
    loop
        exitwhen i > 6
        set dummy=CreateUnit(p, 'e000', x, y, 270)
        call UnitAddAbility(dummy, 'A0EV')
        call ShowUnit(dummy, false)
        call IssuePointOrderById(dummy, $D00FA, x + 300 * CosBJ(60 * i), y + 300 * SinBJ(60 * i))
        call UnitApplyTimedLife(dummy, 'BHwe', 3)
        set i=i + 1
    endloop
    // 太玄经冲锋效果
    if GetUnitAbilityLevel(u, 'A0D8') > 0 then
        set t=CreateTimer()
        call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
        call SaveReal(YDHT, GetHandleId(t), 1, GetUnitFacing(u))
        call SaveInteger(YDHT, GetHandleId(t), 2, 0)
        call TimerStart(t, 0.01, true, function xueHuaTaiXuan)
    endif
    if GetUnitAbilityLevel(u, SHUANG_SHOU) > 0 then
        call YDWEPolledWaitNull(0.3)
        loop
            exitwhen i > 6
            set dummy=CreateUnit(p, 'e000', x, y, 270)
            call UnitAddAbility(dummy, 'A0EV')
            call ShowUnit(dummy, false)
            call IssuePointOrderById(dummy, $D00FA, x + 300 * CosBJ(60 * i), y + 300 * SinBJ(60 * i))
            call UnitApplyTimedLife(dummy, 'BHwe', 3)
            set i=i + 1
        endloop
    endif
    set t=null
    set dummy=null
    set p=null
endfunction
function xueHuaLiChuDamage takes unit hero,unit target returns nothing
    local real coefficient= 1
    local real damage= 0
    local player p= GetOwningPlayer(hero)
    // 弹指神通加成
    if GetUnitAbilityLevel(hero, 'A06H') > 0 then
        set coefficient=coefficient + 0.8
    endif
    // 罗汉伏魔功加成
    if GetUnitAbilityLevel(hero, 'A07O') > 0 then
        set coefficient=coefficient + 0.9
    endif
    // 专属加成
    if UnitHasDenomWeapon(hero , 'I0EZ') then
        set coefficient=coefficient * 4
    endif
    set damage=ShangHaiGongShi(hero , target , 300 , 500 , coefficient , XUE_HUA_LIU_CHU)
    call WuGongShangHai(hero , target , damage)
    set p=null
endfunction
function wuWangShenGongEnd takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    call UnitRemoveAbility(u, 'Agho')
    set wuwang_status[1 + GetPlayerId(GetOwningPlayer(u))]=0
    call FlushChildHashtable(YDHT, GetHandleId(t))
    call PauseTimer(t)
    call DestroyTimer(t)
    set u=null
    set t=null
endfunction
function wuWangShenGong takes unit u returns nothing
    local player p= GetOwningPlayer(u)
    local real time= GetUnitAbilityLevel(u, WU_WANG_SHEN_GONG) * 2
    local timer t= CreateTimer()
    call UnitAddAbility(u, 'Agho')
    set wuwang_status[1 + GetPlayerId(p)]=1
    call WuGongShengChong(u , WU_WANG_SHEN_GONG , 60)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call TimerStart(t, time, false, function wuWangShenGongEnd)
    set t=null
    set p=null
endfunction
function wuWangShenGongSpecial takes unit attacker,unit target returns nothing
    local player p= GetOwningPlayer(attacker)
    local integer i= 1 + GetPlayerId(p)
    local integer rand= 0
    call commonAddGold(p , 100 + GetRandomInt(1, 100))
    call WanBuff(attacker , target , 17)
    call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl" , attacker , "overhead"))) // INLINED!!
    if GetRandomInt(1, 100) <= 15 then
        call commonAddLumber(p , 1)
        // 小无相 几率永久增加暴击伤害
        if GetUnitAbilityLevel(attacker, 'A083') > 0 then
            set udg_baojishanghai[i]=udg_baojishanghai[i] + 0.01
            call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl" , attacker , "overhead"))) // INLINED!!
        endif
        // 易筋经 几率永久增加六围
        if GetUnitAbilityLevel(attacker, 'A09D') > 0 then
            set rand=GetRandomInt(1, 6)
            if rand == 1 then
                set wuxing[i]=wuxing[i] + 1
            elseif rand == 2 then
                set gengu[i]=gengu[i] + 1
            elseif rand == 3 then
                set fuyuan[i]=fuyuan[i] + 1
            elseif rand == 4 then
                set danpo[i]=danpo[i] + 1
            elseif rand == 5 then
                set jingmai[i]=jingmai[i] + 1
            elseif rand == 6 then
                set yishu[i]=yishu[i] + 1
            endif
            call DestroyEffect((AddSpecialEffectTargetEx("war3mapImported\\frozenarmor.mdx" , attacker , "overhead"))) // INLINED!!
        endif
        // 太玄经 几率永久增加内力
        if GetUnitAbilityLevel(attacker, 'A0D8') > 0 then
            call ModifyHeroStat(1, attacker, 0, 10)
            call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl" , attacker , "overhead"))) // INLINED!!
        endif
    endif
    set p=null
endfunction
function initXueShan takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > 5
        set wuwang_status[i]=0
        set i=i + 1
    endloop
endfunction
//---------------------------------------------------
// 汝阳一技能 偷看偷学
// 效果：
// 第一次使用在所有门派一技能中随机出五个进行选择
// 第二次使用在所有门派二技能中随机出五个进行选择
// 第三次使用在所有门派三技能中随机出五个进行选择
// 第四次使用在所有门派毕业技中随机出五个进行选择
// 第五次开始在所有技能中随机五个进行选择
//
// + 乾坤大挪移 学习武功等级+1
// + “郡主”称号 学习武功等级+1
// + 龙象般若功 学习武功等级+1
// + 自创武学 学习武功等级+2
//---------------------------------------------------
function closeTouKanDialog takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= LoadInteger(YDHT, GetHandleId(t), 0)
    if touKanInUse[i] then
        set touKanInUse[i]=false
        call FlushChildHashtable(YDHT, ruyangButtonKey + i)
        call DialogClear(ruyangDialog[i])
        call DialogDisplay(Player(i - 1), ruyangDialog[i], false)
    endif
    call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
endfunction
function touKanTouXue takes unit u returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    local integer array randList
    local integer j= 1
    local integer k= 1
    local integer temp= 0
    set touKanCounter[i]=touKanCounter[i] + 1
    if isKungfuFull(i) then
        return
    endif
    loop
        exitwhen j > DENOMINATION_NUMBER
        set randList[j]=j
        set j=j + 1
    endloop
    set j=1
    loop
        exitwhen j > DENOMINATION_NUMBER
        set k=GetRandomInt(1, DENOMINATION_NUMBER)
        set temp=randList[j]
        set randList[j]=randList[k]
        set randList[k]=temp
        set j=j + 1
    endloop
    if touKanCounter[i] == 1 then
        set touKanIds[1]=denomFirst[randList[1]]
        set touKanIds[2]=denomFirst[randList[2]]
        set touKanIds[3]=denomFirst[randList[3]]
        set touKanIds[4]=denomFirst[randList[4]]
        set touKanIds[5]=denomFirst[randList[5]]
    endif
    if touKanCounter[i] == 3 then
        set touKanIds[1]=denomSecond[randList[1]]
        set touKanIds[2]=denomSecond[randList[2]]
        set touKanIds[3]=denomSecond[randList[3]]
        set touKanIds[4]=denomSecond[randList[4]]
        set touKanIds[5]=denomSecond[randList[5]]
    endif
    if touKanCounter[i] == 2 then
        set touKanIds[1]=denomThird[randList[1]]
        set touKanIds[2]=denomThird[randList[2]]
        set touKanIds[3]=denomThird[randList[3]]
        set touKanIds[4]=denomThird[randList[4]]
        set touKanIds[5]=denomThird[randList[5]]
    endif
    if touKanCounter[i] == 4 then
        if GetRandomInt(1, 2) == 1 then
            set touKanIds[1]=denomFourth[randList[1]]
            set touKanIds[2]=denomFourth[randList[2]]
            set touKanIds[3]=denomFourth[randList[3]]
            set touKanIds[4]=denomFourth[randList[4]]
            set touKanIds[5]=denomFourth[randList[5]]
        else
            set touKanIds[1]=denomFifth[randList[1]]
            set touKanIds[2]=denomFifth[randList[2]]
            set touKanIds[3]=denomFifth[randList[3]]
            set touKanIds[4]=denomFifth[randList[4]]
            set touKanIds[5]=denomFifth[randList[5]]
        endif
    endif
    if touKanCounter[i] >= 5 then
        set touKanIds[1]=denomFirst[randList[1]]
        set touKanIds[2]=denomSecond[randList[2]]
        set touKanIds[3]=denomThird[randList[3]]
        set touKanIds[4]=denomFourth[randList[4]]
        set touKanIds[5]=denomFifth[randList[5]]
        set touKanIds[6]=LoadInteger(YDHT, StringHash("武学") + GetRandomInt(1, MAX_WU_GONG_NUM), 2)
    endif
    call DialogSetMessage(ruyangDialog[i], "|CFF00FFFF请选择要偷学的武功!")
    set k=1
    set j=1
    loop
        exitwhen k > 6
        if touKanIds[k] != 1095067243 and touKanIds[k] != 0 then
            call SaveButtonHandle(YDHT, ruyangButtonKey + i, j, DialogAddButtonBJ(ruyangDialog[i], GetObjectName(touKanIds[k])))
            call SaveInteger(YDHT, ruyangButtonKey + i, j, touKanIds[k])
            set j=j + 1
        endif
        set k=k + 1
    endloop
    call DialogDisplay(GetOwningPlayer(u), ruyangDialog[i], true)
    set touKanInUse[i]=true
    // 30秒后自动关闭对话框
    set touKanTimer[i]=CreateTimer()
    call SaveInteger(YDHT, GetHandleId(touKanTimer[i]), 0, i)
    call TimerStart(touKanTimer[i], 30, false, function closeTouKanDialog)
endfunction
function touKanAction takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer i= 1 + GetPlayerId(p)
    local integer k= 1
    local integer j= 1
    local integer id= 0
    local integer level= 1
    local integer l__kk= 1
    loop
        exitwhen k > 6
        if GetClickedButton() == LoadButtonHandle(YDHT, ruyangButtonKey + i, k) then
            set id=LoadInteger(YDHT, ruyangButtonKey + i, k)
            if GetUnitAbilityLevel(udg_hero[i], id) > 0 then
                call DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经拥有此武功了")
                call FlushChildHashtable(YDHT, ruyangButtonKey + i)
                call DialogClear(ruyangDialog[i])
                set touKanInUse[i]=false
                call PauseTimer(touKanTimer[i])
                call DestroyTimer(touKanTimer[i])
                return
            endif
            if GetUnitAbilityLevel(udg_hero[i], QIAN_KUN) > 0 then
                set level=level + 1
            endif
            if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( YA_HUAN) - 1)])) != 0) then // INLINED!!
                set level=level + 1
            endif
            if GetUnitAbilityLevel(udg_hero[i], LONG_XIANG) > 0 then
                set level=level + 1
            endif
            if GetUnitAbilityLevel(udg_hero[i], ZI_CHUANG_WU_XUE) > 0 then
                set level=level + 2
            endif
            call UnitAddAbility(udg_hero[i], id)
            call UnitMakeAbilityPermanent(udg_hero[i], true, id)
            call SetUnitAbilityLevel(udg_hero[i], id, IMaxBJ(level, LoadInteger(YDHT, GetHandleId(p), id * 5)))
            
            if id == 'A03Q' then
                // 百胜神拳
				call AddPlayerTechResearched(p, 'Rhri', 1)
            else
                set j=1
                loop
                    exitwhen j > wugongshu[i]
                    if I7[20 * ( i - 1 ) + j] == 1095067243 then
                        set I7[20 * ( i - 1 ) + j]=id
                        exitwhen true
                    endif
                    set j=j + 1
                endloop
            endif
            call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "习得" + GetObjectName(id) + "|r")
            if id == 'A0EL' then
                if Player(i - 1) == GetLocalPlayer() then
                    call s__Frame_show(qimen_widget)
                endif
            elseif id == 'A0EK' then
                if Player(i - 1) == GetLocalPlayer() then
                    call s__Frame_show(bibo_image)
                endif
            endif
            set l__kk=1
            loop
                exitwhen l__kk > 20
                if id == MM9[l__kk] then
                    set udg_shanghaijiacheng[i]=udg_shanghaijiacheng[i] + udg_jueneishjc[l__kk]
                    call ModifyHeroStat(1, udg_hero[i], 0, udg_jueneiminjie[l__kk])
                    set udg_baojilv[i]=udg_baojilv[i] + udg_jueneibaojilv[l__kk]
                    set juexuelingwu[i]=juexuelingwu[i] + udg_jueneijxlw[l__kk]
                    set udg_shanghaixishou[i]=udg_shanghaixishou[i] + udg_jueneishxs[l__kk]
                endif
                set l__kk=l__kk + 1
            endloop
            call FlushChildHashtable(YDHT, ruyangButtonKey + i)
            set touKanInUse[i]=false
            call PauseTimer(touKanTimer[i])
            call DestroyTimer(touKanTimer[i])
            call DialogClear(ruyangDialog[i])
            return
        endif
        set k=k + 1
    endloop
    set p=null
endfunction
//---------------------------------------------------
// 汝阳毕业技能一 玄冥神掌
// 效果：攻击时造成伤害并几率使敌人深度中毒
// + 九阴真经·内功 每杀100个敌人加1点特攻
// + 乾坤大挪移 几率使敌人虚弱
// + 九阳神功 该武功失去效果
// + 七伤拳 伤害+100%
// + 龙象般若功 伤害+150%
// 特攻：伤害范围
//---------------------------------------------------
function xuanMingAction takes unit u,unit enumUnit returns nothing
    local real coefficient= 1
    local real damage= 0
    if GetUnitAbilityLevel(u, QI_SHANG_QUAN) > 0 then
        set coefficient=coefficient + 1
    endif
    if GetUnitAbilityLevel(u, LONG_XIANG) > 0 then
        set coefficient=coefficient + 1.5
    endif
    if UnitHasDenomWeapon(u , 'I00B') then
        set coefficient=coefficient * 8
    endif
    call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl" , u , "overhead"))) // INLINED!!
    if GetRandomInt(1, 5) <= 2 then
        // 几率深度中毒
        call WanBuff(u , enumUnit , 14)
    endif
    if GetUnitAbilityLevel(u, QIAN_KUN) > 0 then
        // 几率使敌人虚弱
        call WanBuff(u , enumUnit , 16)
    endif
    set damage=ShangHaiGongShi(u , enumUnit , 100 , 120 , coefficient , XUAN_MING_SHEN_ZHANG)
    call WuGongShangHai(u , enumUnit , damage)
endfunction
function xuanMingShenZhang takes unit u returns nothing
    local player p= GetOwningPlayer(u)
    local integer i= 1 + GetPlayerId(p)
    local real range= 0
    local group g= null
    local real x= GetUnitX(u)
    local real y= GetUnitY(u)
    local unit enumUnit= null
    if GetRandomReal(0, 100) <= 15 + fuyuan[i] * 0.2 + wuxing[i] * 0.1 then
        call WuGongShengChong(u , XUAN_MING_SHEN_ZHANG , 360.0)
        set range=400 + special_attack[i] * 10
        set g=CreateGroup()
        call GroupEnumUnitsInRange(g, x, y, range, null)
        loop
            set enumUnit=FirstOfGroup(g)
            exitwhen enumUnit == null
            if IsUnitEnemy(enumUnit, p) and IsUnitAliveBJ(enumUnit) then
                call xuanMingAction(u , enumUnit)
            endif
            call GroupRemoveUnit(g, enumUnit)
        endloop
        call DestroyGroup(g)
    endif
    set enumUnit=null
    set g=null
    set p=null
endfunction
// 玄冥神掌杀100个敌人加1点特殊攻击力
function xuanMingAddSpecialAttack takes unit u returns nothing
    local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
    set xuanMingCounter[i]=xuanMingCounter[i] + 1
    if xuanMingCounter[i] >= 100 then
        set xuanMingCounter[i]=0
        set special_attack[i]=special_attack[i] + 1
        call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|CFFFF0033你的特殊攻击力提升了")
    endif
endfunction
//----------------------------------------------------
//- 汝阳毕业技能二 嫁衣神功
//- 效果1：主动使用时，提升攻击速度和闪避率，持续(技能等级*2)秒
//- 效果2：遗忘武功时，增加三围
//- 效果3：有武功到达9重时，增加悟性和伤害倍数
//- 等级 增加值
//- “郡主”称号 增加值翻倍
//- “绍敏郡主”称号 增加值翻倍
//----------------------------------------------------
function jiaYiShenGongRemoveAbilities takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    call UnitRemoveAbility(u, 1093682242)
    call UnitRemoveAbility(u, 1093682242)
    call FlushChildHashtable(YDHT, GetHandleId(t))
    call PauseTimer(t)
    call DestroyTimer(t)
    set u=null
    set t=null
endfunction
function jiaYiShenGong takes unit u returns nothing
    local real time= GetUnitAbilityLevel(u, JIA_YI_SHEN_GONG) * 2
    local timer t= CreateTimer()
    call UnitAddAbility(u, 1093682242)
    call SetUnitAbilityLevel(u, 1093682242, GetUnitAbilityLevel(u, JIA_YI_SHEN_GONG))
    call UnitAddAbility(u, 1098084450)
    call SetPlayerAbilityAvailableBJ(false, 1098084450, GetOwningPlayer(u))
    call SetUnitAbilityLevel(u, 1093682244, GetUnitAbilityLevel(u, JIA_YI_SHEN_GONG))
    call WuGongShengChong(u , JIA_YI_SHEN_GONG , 150)
    call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
    call TimerStart(t, time, false, function jiaYiShenGongRemoveAbilities)
    set t=null
endfunction
function initRuYang takes nothing returns nothing
    local integer i= 1
    local trigger t= CreateTrigger()
    loop
        exitwhen i > 5
        set touKanCounter[i]=0
        set touKanIds[i]=0
        set xuanMingCounter[i]=0
        set ruyangDialog[i]=DialogCreate()
        set touKanInUse[i]=false
        set i=i + 1
    endloop
    set i=1
    loop
        exitwhen i > 5
        call TriggerRegisterDialogEvent(t, ruyangDialog[i])
        set i=i + 1
    endloop
    call TriggerAddAction(t, function touKanAction)
    set t=null
endfunction// 门派——嵩山
// 嵩山剑法 十七路剑法
// 寒冰神掌 霜冻闪电 dota巫妖的大
// 子午十二剑  马可波罗突突枪
// 大嵩阳神掌 快速击退
// 无名内功 可以将内力隐藏起来，不让对方吸到一丝一毫。可以将内力快速转换为真实伤害，或反向转换（潮起潮落的机制）。每内化一个武功，转换时被转的属性有机率额外增加1点。
// 与寒冰真气联动
// 专属
// 寒魄剑
// 称号
// 嵩山掌门 四个技能都达到6重
// 五岳盟主 嵩山掌门+寒冰真气+寒魄剑
// 五岳盟主2 如果集齐五个门派掌门，再获得五岳盟主称号，奖励非常多
// call YDWETimerPatternMoonPriestessArrow( GetTriggerUnit(), 0, 800, 1, 0.03, 1, 'A02G', 'hpea', "attack", "overhead", "[jx3]normal_10a.mdx" )
// 一技能：嵩山剑法 被动白板

function isSongShanJian takes unit u,unit l__ut returns boolean
	return PassiveWuGongCondition(u , l__ut , SONG_SHAN_JIAN_FA)
endfunction
function songShanCondition takes nothing returns boolean
	return DamageFilter(GetAttacker() , GetFilterUnit())
endfunction
function songSanAction takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
	// 双手互搏 +80%
 local real shxishu= 1. + DamageCoefficientByAbility(GetAttacker() , 'A07U' , 0.8)
	// 连城剑法=走火入魔
	if GetUnitAbilityLevel(GetAttacker(), LIAN_CHENG_JIAN_FA) >= 1 and GetRandomInt(1, 100) <= 30 then
		call WanBuff(GetAttacker() , GetEnumUnit() , 2)
	endif
	// 寒冰真气=冰冻
	if GetUnitAbilityLevel(GetAttacker(), HAN_BING_ZHEN_QI) >= 1 and GetRandomInt(1, 100) <= 20 then
		call WanBuff(GetAttacker() , GetEnumUnit() , 17)
	endif
	// 专属
	if UnitHasDenomWeapon(GetAttacker() , ITEM_HAN_PO_JIAN) then
		set shxishu=shxishu * 4
	endif
	call PassiveWuGongEffectAndDamage(GetAttacker() , GetEnumUnit() , "war3mapImported\\62.mdx" , 12 , 16 , shxishu , SONG_SHAN_JIAN_FA)
endfunction
function songShanJianFa takes unit u,unit l__ut returns nothing
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local location loc1= GetUnitLoc(u)
 local location loc2= GetUnitLoc(l__ut)
	call PassiveWuGongAction(u , l__ut , 45 + fuyuan[i] * 0.3 , 700 , Condition(function songShanCondition) , function songSanAction , SONG_SHAN_JIAN_FA , 600.)
	// 经脉>=50 几率打出万岳朝宗的效果（在空中召唤一个山形的召唤物，投射物为小山，类似于石廪书声）
	if jingmai[i] >= 50 and GetRandomInt(1, 100) <= 15 + fuyuan[i] / 5 then
		call CreateNUnitsAtLocFacingLocBJ(1, 'o030', p, PolarProjectionBJ(loc1, 300, 180 + GetUnitFacing(u)), loc2)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
	endif
	set p=null
	set loc1=null
	set loc2=null
endfunction
// 嵩山剑法 万岳朝宗特效
function wanYueChaoZong takes unit u,unit uc returns nothing
 local real shanghai= 0.
 local real shxishu= 1.
	// 专属
	if UnitHasDenomWeapon(u , ITEM_HAN_PO_JIAN) then
		set shxishu=shxishu * 4
	endif
	set shanghai=ShangHaiGongShi(u , uc , 200. , 180. , shxishu , SONG_SHAN_JIAN_FA)
	call WuGongShangHai(u , uc , shanghai)
endfunction
// 二技能：子午十二剑 
function ziWuShiErJianAction takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
 local integer jMax= LoadInteger(YDHT, GetHandleId(t), 2)
 local real angle= GetUnitFacing(u)
 local real distance= 1000.
 local real duration= 1
 local unit dummy
	if j >= jMax then
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call DestroyTimer(t)
	else
		call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
		set dummy=CreateUnit(GetOwningPlayer(u), 'h00O', GetUnitX(u), GetUnitY(u), angle)
		call YDWETimerPatternMoonPriestessArrow(dummy , angle , distance , duration , 0.03 , 1 , 'A0FB' , 'e000' , "thunderbolt" , "overhead" , "war3mapImported\\zhiyu.mdx")
	endif
	set dummy=null
	set t=null
	set u=null
endfunction
function ziWuCdFive takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	// CD变为5秒
	call EXSetAbilityState(EXGetUnitAbility(u, ZI_WU_SHI_ER_JIAN), 1, 5)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function ziWuShiErJian takes unit u returns nothing
 local integer count= 12
 local timer t= CreateTimer()
 local timer tm= null
	call WuGongShengChong(u , ZI_WU_SHI_ER_JIAN , 180)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveInteger(YDHT, GetHandleId(t), 1, 0)
	call SaveInteger(YDHT, GetHandleId(t), 2, count)
	call TimerStart(t, 0.2, true, function ziWuShiErJianAction)
	// 左盟主称号 CD变为5秒
	if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 50) then
		set tm=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		call TimerStart(tm, 0.2, false, function ziWuCdFive)
	endif
	set t=null
	set tm=null
endfunction
function ziWuShiErJianDamage takes unit u,unit l__ut returns nothing
 local real shanghai= 0.
 local real shxishu= 1.
	// 连城剑法 伤害+100%
	if GetUnitAbilityLevel(u, LIAN_CHENG_JIAN_FA) >= 1 then
		set shxishu=shxishu + 1
	endif
	// 辟邪剑法 伤害+150%
	if GetUnitAbilityLevel(u, BI_XIE_JIAN_FA) >= 1 then
		set shxishu=shxishu + 1.5
	endif
	// 专属
	if UnitHasDenomWeapon(u , ITEM_HAN_PO_JIAN) then
		set shxishu=shxishu * 4
	endif
	// 寒冰真气 几率冰冻
	if GetUnitAbilityLevel(u, HAN_BING_ZHEN_QI) >= 1 and GetRandomInt(1, 100) <= 20 then
		call WanBuff(u , l__ut , 17)
	endif
	set shanghai=ShangHaiGongShi(u , l__ut , 100. , 100. , shxishu , ZI_WU_SHI_ER_JIAN)
	call WuGongShangHai(u , l__ut , shanghai)
endfunction
// 三技能 寒冰神掌 每次受伤害最大掉血15%，主动使用时冰冻自己同时快速回复气血（每秒10%），并对周围单位造成持续伤害
// +寒冰真气 不再冰冻自己
// +无名内功 伤害和胆魄相关
// +双手互搏 回血速度加倍
// +洗髓经 每次受伤害最大掉血10%
function hanBingShenZhangDamaged takes unit u,real damage returns nothing
 local real coeff= 15
	if GetUnitAbilityLevel(u, XI_SUI_JING) >= 1 then
		set coeff=10
	endif
	if damage > GetUnitState(u, UNIT_STATE_MAX_LIFE) * coeff / 100 then
		call EXSetEventDamage(GetUnitState(u, UNIT_STATE_MAX_LIFE) * coeff / 100)
	endif
endfunction
function hanBingShenZhangDamage takes unit u,unit l__ut returns nothing
 local real shanghai= 0.
 local real shxishu= 1.
	// 专属
	if UnitHasDenomWeapon(u , ITEM_HAN_PO_JIAN) then
		set shxishu=shxishu * 4
	endif
	set shanghai=ShangHaiGongShi(u , l__ut , 50. , 50. , shxishu , HAN_BING_SHEN_ZHANG)
	call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\AbstruseEnergy.mdx", l__ut, "origin"))
	call WuGongShangHai(u , l__ut , shanghai)
endfunction
function hanBingShenZhangAction takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
 local group g
 local unit l__ut
	if j >= 6 then
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call PauseTimer(t)
		call DestroyTimer(t)
	else
		call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
		if GetUnitAbilityLevel(u, SHUANG_SHOU) >= 1 then
			call SetWidgetLife(u, GetWidgetLife(u) + 0.2 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		else
			call SetWidgetLife(u, GetWidgetLife(u) + 0.1 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		endif
		set g=CreateGroup()
		call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 700, null)
		loop
			exitwhen CountUnitsInGroup(g) <= 0
			set l__ut=FirstOfGroup(g)
			if IsUnitEnemy(l__ut, GetOwningPlayer(u)) and IsUnitAliveBJ(l__ut) then
				call hanBingShenZhangDamage(u , l__ut)
			endif
			call GroupRemoveUnit(g, l__ut)
		endloop
		call DestroyGroup(g)
	endif
	set g=null
	set t=null
	set l__ut=null
endfunction
function hanBingShenZhang takes unit u returns nothing
 local unit dummy= CreateUnit(Player(6), 'e000', GetUnitX(u), GetUnitY(u), 270)
 local timer t= CreateTimer()
	call ShowUnit(dummy, false)
	call WuGongShengChong(u , HAN_BING_SHEN_ZHANG , 200)
	if GetUnitAbilityLevel(u, HAN_BING_ZHEN_QI) < 1 then
		call WanBuff(dummy , u , 17)
	endif
	call UnitApplyTimedLife(dummy, 'BHwe', 3.)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call SaveInteger(YDHT, GetHandleId(t), 1, 0)
	call TimerStart(t, 1, true, function hanBingShenZhangAction)
	set t=null
endfunction
// 毕业技 无名内功 增加100*等级的内力（第一次使用时加），主动使用时将增加的内力重新分配为招式伤害、内力、真实伤害。
// 每内化一个武功，重新分配时，分配总数增加10点
// +寒冰真气 每级后额外增加50点内力
// +北冥神功 内化加成额外增加10点
function wuMingNeiGong takes unit u returns nothing
 local integer level= GetUnitAbilityLevel(u, WU_MING_NEI_GONG)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer base= 100
	call WuGongShengChong(u , WU_MING_NEI_GONG , 120)
	call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\zhiyu.mdx", u, "overhead"))
	// +寒冰真气 每级后额外增加50点内力
	if GetUnitAbilityLevel(u, HAN_BING_ZHEN_QI) >= 1 then
		set base=base + 50
	endif
	// 先将之前增加的三围减掉
	call ModifyHeroStat(bj_HEROSTAT_STR, u, bj_MODIFYMETHOD_SUB, wumingStr[i])
	call ModifyHeroStat(bj_HEROSTAT_AGI, u, bj_MODIFYMETHOD_SUB, wumingAgi[i])
	call ModifyHeroStat(bj_HEROSTAT_INT, u, bj_MODIFYMETHOD_SUB, wumingInt[i])
	// 如果加的基础内力不到等级*100，就加到等级*100
	if wumingBaseCount[i] < level * base then
		// call ModifyHeroStat(bj_HEROSTAT_AGI, u, bj_MODIFYMETHOD_ADD, - wumingBaseCount[i] + level * base)
		set wumingAgi[i]=wumingAgi[i] - wumingBaseCount[i] + level * base
		set wumingBaseCount[i]=level * base
	endif
	// 重新随机分配招式伤害、内力和真实伤害
	set wumingCount[i]=wumingStr[i] + wumingAgi[i] + wumingInt[i]
	// 每内化一个武功，重新分配时，分配总数增加10点 +北冥神功 内化后额外增加10点内力
	if alreadyInternalizedCount[i] > 0 then
		set wumingCount[i]=wumingCount[i] + alreadyInternalizedCount[i] * 10 * ( 1 + GetUnitAbilityLevel(u, BEI_MING_SHEN_GONG) )
	endif
	set wumingStr[i]=GetRandomInt(0, wumingCount[i])
	set wumingAgi[i]=GetRandomInt(0, wumingCount[i] - wumingStr[i])
	set wumingInt[i]=wumingCount[i] - wumingStr[i] - wumingAgi[i]
	call ModifyHeroStat(bj_HEROSTAT_STR, u, bj_MODIFYMETHOD_ADD, wumingStr[i])
	call ModifyHeroStat(bj_HEROSTAT_AGI, u, bj_MODIFYMETHOD_ADD, wumingAgi[i])
	call ModifyHeroStat(bj_HEROSTAT_INT, u, bj_MODIFYMETHOD_ADD, wumingInt[i])
endfunction
// 毕业技 大嵩阳神掌 主动使用，将敌方缓慢牵引至自己身边
// +寒冰真气 牵引结束后，对牵引的敌人造成伤害
// +北冥神功 牵引速度减慢
function daSongYangShenZhangAction takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit l__ut= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 1)
	call PauseUnit(l__ut, false)
	// +寒冰真气 牵引结束后，对牵引的敌人造成伤害
	if GetUnitAbilityLevel(u, HAN_BING_ZHEN_QI) >= 1 and IsUnitAliveBJ(l__ut) then
		call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\icestomp.mdx", l__ut, "origin"))
		call WuGongShangHai(u , l__ut , ShangHaiGongShi(u , l__ut , 1000 , 1000 , 1 , DA_SONG_YANG_SHEN_ZHANG))
	endif
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set u=null
	set l__ut=null
	set t=null
endfunction
function daSongYangShenZhang takes unit u,unit l__ut returns nothing
 local real time= RMinBJ(4, ( YDWEDistanceBetweenUnits(u , l__ut) / 300.00 ))
 local timer t= CreateTimer()
	// +北冥神功 牵引速度减慢
	if GetUnitAbilityLevel(u, BEI_MING_SHEN_GONG) >= 1 then
		set time=time * 2
	endif
	call WuGongShengChong(u , DA_SONG_YANG_SHEN_ZHANG , 180)
	call PauseUnit(l__ut, true)
	call YDWETimerPatternRushSlide(l__ut , YDWEAngleBetweenUnits(l__ut , u) , RMinBJ(1200.00, YDWEDistanceBetweenUnits(u , l__ut)) , time , 0.02 , 0 , false , false , true , "origin" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, l__ut)
	call SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
	call TimerStart(t, time, false, function daSongYangShenZhangAction)
	set t=null
endfunction
//------------江湖武功开始------------
//弹指神通
function IsTanZhi takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A06H' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function TanZhi_Condition takes nothing returns boolean
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
endfunction
function tanZhiCdFive takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	// CD变为5秒
	call EXSetAbilityState(EXGetUnitAbility(u, 'A06H'), 1, 5)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function TanZhiShenTong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(GetSpellTargetUnit())
 local integer i= 1 + GetPlayerId(p)
 local integer level= 0
 local timer t= null
	if ( GetUnitAbilityLevel(u, 'A07U') >= 1 ) then
		// +双手 双重弹指效果
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06H')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06H', GetUnitAbilityLevel(u, 'A06H'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0097, GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(300 , loc2 , Condition(function TanZhi_Condition))))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call ShowUnitHide(bj_lastCreatedUnit)
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A06H' , 350.)
	set level=GetUnitAbilityLevel(u, 'A06H')
	// 判断如果是东邪，CD变为5秒
	if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 39) then
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call TimerStart(t, 0.2, false, function tanZhiCdFive)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set p=null
	set loc=null
	set loc2=null
endfunction
function IsTanZhiBeiDong takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A06H') >= 1 ) and ( GetUnitAbilityLevel(GetAttacker(), 'A07S') >= 1 ) )
endfunction
function TanZhiBeiDong takes nothing returns nothing
 local unit u= GetAttacker()
 local unit l__ut= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local player p= GetOwningPlayer(u)
	if GetRandomReal(0, 100) <= 8 then
		call WuGongShengChong(u , 'A06H' , 350.)
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06H')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06H', GetUnitAbilityLevel(u, 'A06H'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0097, l__ut)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call ShowUnitHide(bj_lastCreatedUnit)
	endif
	call RemoveLocation(loc)
	set u=null
	set l__ut=null
	set p=null
	set loc=null
endfunction
function IsTanZhiShangHai takes nothing returns boolean
	return ( ( GetEventDamage() == .21 ) )
endfunction
function TanZhiShangHai_Conditiom takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function TanZhiShangHai_Action takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetEnumUnit()
 local real shxishu= 1. + gengu[i] / 20
 local real shanghai= 0.
	if isTitle(i , 39) then
		// 东邪称号
		set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 60 , 60 , shxishu , 'A06H')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function TanZhiShangHai takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + gengu[i] / 20
 local real shanghai= 0.
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
	if ( ( GetUnitAbilityLevel(u, 'A06P') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A085') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A085') != 0 and GetUnitAbilityLevel(u, 'A06P') != 0 and GetUnitAbilityLevel(u, 1093679152) != 0 and GetUnitAbilityLevel(u, 1093679152) != 0 and GetUnitAbilityLevel(u, 1395666994) != 0 and GetUnitAbilityLevel(u, 'A07U') != 0 then
		set shxishu=shxishu * 6 * 2
	endif
	if isTitle(i , 39) then
		set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 30.8 , 30.8 , shxishu , 'A06H')
	call WuGongShangHai(u , uc , shanghai)
	
	if ( ( danpo[i] >= 23 ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
		call WanBuff(u , uc , 11)
	endif
	if ( ( GetUnitAbilityLevel(u, 1093679152) != 0 ) and ( UnitHasBuffBJ(uc, 'Bcri') == false ) ) then
		call WanBuff(u , uc , 4)
	endif
	if ( ( GetUnitAbilityLevel(u, 1395666994) != 0 ) ) then
		call DestroyEffect((AddSpecialEffectLocBJEx(loc2 , "war3mapImported\\PsiWave.mdx"))) // INLINED!!
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100. , loc2 , Condition(function TanZhiShangHai_Conditiom)), function TanZhiShangHai_Action)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set u=null
	set uc=null
	set loc=null
	set loc2=null
endfunction
//冰魄银针
function dF takes nothing returns boolean
	return GetSpellAbilityId() == 'A07A' or ( GetSpellAbilityId() == XUE_HUA_LIU_CHU and GetUnitAbilityLevel(GetTriggerUnit(), 'A07A') > 0 )
endfunction
function bingPoCdFive takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	// CD变为5秒
	call EXSetAbilityState(EXGetUnitAbility(u, 'A07A'), 1, 5)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function eF takes nothing returns nothing
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
 local location array loc_bp
 local integer level= 0
 local timer t= null
	if (IsUnitType((uc ), ( UNIT_TYPE_HERO)) != null) then // INLINED!!
		call WuGongShengChong(GetTriggerUnit() , 'A07A' , 260.)
	endif
	set H7=1
	loop
		exitwhen H7 > 12
		set loc_bp[H7]=pu(loc , 256 , 30. * I2R(H7))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093678914)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, loc_bp[H7])
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(loc_bp[H7])
		set loc_bp[H7]=null
		set H7=H7 + 1
	endloop
	set level=GetUnitAbilityLevel(uc, 'A07A')
	// 判断如果是赤练仙子，CD变为5秒
	if isTitle(1 + GetPlayerId(GetOwningPlayer(uc)) , 8) then
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, uc)
		call TimerStart(t, 0.2, false, function bingPoCdFive)
	endif
	call RemoveLocation(loc)
	set t=null
	set uc=null
	set loc=null
endfunction
function gF takes nothing returns boolean
	return ( ( GetEventDamage() == .24 ) )
endfunction
function hF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + yishu[i] / 20
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A083') != 0 ) ) then
		set shxishu=shxishu + 2.0
	endif
	if GetUnitAbilityLevel(u, 1093678932) != 0 and GetUnitAbilityLevel(u, 'A083') != 0 and GetUnitAbilityLevel(u, 'A07S') != 0 and GetUnitAbilityLevel(u, 1093679154) != 0 then
		set shxishu=shxishu * 4 * 2
	endif
	if isTitle(i , 8) then // 赤炼仙子
set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 26 , 26 , shxishu , 'A07A')
	call WuGongShangHai(u , uc , shanghai)
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093678915)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0102, GetTriggerUnit())
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	endif
	if ( ( GetUnitAbilityLevel(u, 1093679154) != 0 ) ) and isTitle(i , 8) then // 赤炼仙子
call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093678916)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D00F1, GetTriggerUnit())
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function jF takes nothing returns boolean
	return ( ( GetEventDamage() == .25 ) )
endfunction
function kF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 1093678932) != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A083') != 0 ) ) then
		set shxishu=shxishu + 2.0
	endif
	if GetUnitAbilityLevel(u, 1093678932) != 0 and GetUnitAbilityLevel(u, 'A083') != 0 and GetUnitAbilityLevel(u, 'A07S') != 0 and GetUnitAbilityLevel(u, 1093679154) != 0 then
		set shxishu=shxishu * 4 * 2
	endif
	if isTitle(i , 8) then // 赤炼仙子
set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 6 , 6 , shxishu , 'A07A')
	if isTitle(i , 8) then // 赤炼仙子
set shanghai=ShangHaiGongShi(u , uc , 26 , 26 , shxishu , 'A07A')
	endif
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//连城剑法
function nF takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A06J' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function oF takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A06J')
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetSpellTargetLoc())
	call SaveReal(YDHT, id * cx, - $60249D54, AngleBetweenPoints(LoadLocationHandle(YDHT, id * cx, - $72C3E060), LoadLocationHandle(YDHT, id * cx, $5E83114F)))
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 200. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 120. ) )))
	call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
	call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 200. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 240. ) )))
	call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
	call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678932) != 0 ) and ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07F') != 0 ) ) then
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 550. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 120. ) )))
		call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
		call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 550. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 240. ) )))
		call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
		call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 400. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 120. ) )))
		call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
		call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 400. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 240. ) )))
		call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
		call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
	else
		if ( ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678932) != 0 ) or ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07F') != 0 ) ) ) then
			call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 400. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 120. ) )))
			call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
			call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
			call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
			call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 400. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( 240. ) )))
			call SaveLocationHandle(YDHT, id * cx, $247CC5E5, pu(LoadLocationHandle(YDHT, id * cx, - $3348E012) , 150. , ( ( LoadReal(YDHT, id * cx, - $60249D54) ) + ( .0 ) )))
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3))
			call SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, - $2A41B3A3), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)))
			call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, $247CC5E5))
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $247CC5E5))
		endif
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A06J' , 250)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function qF takes nothing returns boolean
	return ( ( GetEventDamage() == .23 ) )
endfunction
function rF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + wuxing[i] / 20
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'A07J') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07X') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if GetUnitAbilityLevel(u, 'A07J') != 0 and GetUnitAbilityLevel(u, 'A07X') != 0 and GetUnitAbilityLevel(u, 1093678932) != 0 and GetUnitAbilityLevel(u, 'A07F') != 0 then
		set shxishu=shxishu * 4 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 53 , 53 , shxishu , 'A06J')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//化骨绵掌
function tF takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A06L' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function uF takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( UnitHasBuffBJ(GetFilterUnit(), 1114467444) == false ) and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) ) )
endfunction
//化骨搭配
function HuaGuWuDi takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer j= LoadInteger(YDHT, GetHandleId(t), 1)
 local integer jmax= 40
	if UnitHasBuffBJ(u, 'Bmlc') and j < jmax then
		call SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
	else
		call UnitRemoveAbility(u, 'A00S')
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	set t=null
	set u=null
endfunction
function yF takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local unit l__ut
 local location loc= GetUnitLoc(u)
 local player p= GetOwningPlayer(u)
 local location loc2
 local timer t= null
	if ( ( GetUnitAbilityLevel(u, 'A07Q') != 0 ) ) then
		set loc2=GetUnitLoc(uc)
		set l__ut=GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000. , loc2 , Condition(function uF)))
		call CreateNUnitsAtLoc(1, 'e000', p, loc2, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06L')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06L', GetUnitAbilityLevel(u, 'A06L'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, l__ut)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc2)
		
		set loc2=GetUnitLoc(l__ut)
		set l__ut=GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000. , loc2 , Condition(function uF)))
		call CreateNUnitsAtLoc(1, 'e000', p, loc2, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06L')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06L', GetUnitAbilityLevel(u, 'A06L'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, l__ut)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc2)
		
		set loc2=GetUnitLoc(l__ut)
		set l__ut=GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000. , loc2 , Condition(function uF)))
		call CreateNUnitsAtLoc(1, 'e000', p, loc2, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06L')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06L', GetUnitAbilityLevel(u, 'A06L'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, l__ut)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc2)
		
		set loc2=GetUnitLoc(l__ut)
		set l__ut=GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000. , loc2 , Condition(function uF)))
		call CreateNUnitsAtLoc(1, 'e000', p, loc2, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06L')
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A06L', GetUnitAbilityLevel(u, 'A06L'))
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0200, l__ut)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc2)
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07X') != 0 ) ) then
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call UnitAddAbility(u, 'A00S')
		call TimerStart(t, 0.5, true, function HuaGuWuDi)
	endif
	call WuGongShengChong(u , 'A06L' , 200.)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set l__ut=null
	set p=null
	set loc=null
	set loc2=null
	set t=null
endfunction
//化骨伤害
function AF takes nothing returns boolean
	return ( ( GetEventDamage() == .26 ) )
endfunction
function aF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + jingmai[i] / 20
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07G') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if ( ( GetUnitAbilityLevel(u, 'A084') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if GetUnitAbilityLevel(u, 'A07P') != 0 and GetUnitAbilityLevel(u, 'A07G') != 0 and GetUnitAbilityLevel(u, 'A084') != 0 and GetUnitAbilityLevel(u, 'A07Q') != 0 and GetUnitAbilityLevel(u, 'A07X') != 0 and GetUnitAbilityLevel(u, 'A07R') != 0 then
		set shxishu=shxishu * 6 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 80. , 80. , shxishu , 'A06L')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//四门刀法
function bF takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A06M' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function CF takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A06M')
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07H') != 0 ) ) then
		set H7=1
		loop
			exitwhen H7 > 4
			call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 300. , ( ( 90. ) * ( I2R(H7) ) )))
			call CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
			call Gw(20. , bj_lastCreatedUnit)
			call CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call Gw(20. , bj_lastCreatedUnit)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
			set H7=H7 + 1
		endloop
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A086') != 0 ) and ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07X') != 0 ) ) then
			set H7=1
			loop
				exitwhen H7 > 8
				call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 650. , ( ( 45. ) * ( I2R(H7) ) )))
				call CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
				call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
				call Gw(20. , bj_lastCreatedUnit)
				call CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
				call Gw(20. , bj_lastCreatedUnit)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
				set H7=H7 + 1
			endloop
		endif
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678935) != 0 ) ) then
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
			call UnitAddAbility(bj_lastCreatedUnit, 1093678670)
			call Gw(20. , bj_lastCreatedUnit)
			call ShowUnit(bj_lastCreatedUnit, false)
		endif
	else
		set H7=1
		loop
			exitwhen H7 > 4
			call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 300. , ( ( 90. ) * ( I2R(H7) ) )))
			call CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
			call Gw(10. , bj_lastCreatedUnit)
			call CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
			call Gw(10. , bj_lastCreatedUnit)
			call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
			set H7=H7 + 1
		endloop
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A086') != 0 ) and ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 'A07X') != 0 ) ) then
			set H7=1
			loop
				exitwhen H7 > 8
				call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 650. , ( ( 45. ) * ( I2R(H7) ) )))
				call CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
				call IssueImmediateOrderById(bj_lastCreatedUnit, $D00A0)
				call Gw(10. , bj_lastCreatedUnit)
				call CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
				call Gw(10. , bj_lastCreatedUnit)
				call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
				set H7=H7 + 1
			endloop
		endif
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1093678935) != 0 ) ) then
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
			call UnitAddAbility(bj_lastCreatedUnit, 1093678670)
			call Gw(10. , bj_lastCreatedUnit)
			call ShowUnit(bj_lastCreatedUnit, false)
		endif
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A06M' , 150.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function DF takes nothing returns boolean
	return ( ( GetEventDamage() == .27 ) )
endfunction
function EF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + jingmai[i] / 20
 local real shanghai= 0.
	if ( ( GetUnitAbilityLevel(u, 'A07P') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A086') != 0 ) ) and ( GetUnitAbilityLevel(u, 'A07X') != 0 ) then
		set shxishu=shxishu + 1.5
	endif
	if GetUnitAbilityLevel(u, 'A07P') != 0 and GetUnitAbilityLevel(u, 'A086') != 0 and GetUnitAbilityLevel(u, 'A07X') != 0 and GetUnitAbilityLevel(u, 1093678935) != 0 and GetUnitAbilityLevel(u, 'A07H') != 0 then
		set shxishu=shxishu * 5 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 3.6 , 3.6 , shxishu , 'A06M')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//一阳指
function GF takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A06P' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function HF takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
 local location loc2= null
 local integer i= 1
	if ( ( GetUnitAbilityLevel(GetTriggerUnit(), 1093679152) != 0 ) and ( GetRandomInt(1, 100) <= 40 ) ) then
		call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) + 80. ))
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A06P' , 250.)
	if ( GetUnitAbilityLevel(GetTriggerUnit(), 'A09D') != 0 and GetUnitAbilityLevel(GetTriggerUnit(), 'A085') != 0 ) then
		loop
			exitwhen i >= 6
			set loc2=pu(loc , 200. , 60. * i)
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, 'A06P')
			call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D009D, loc2)
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
			call RemoveLocation(loc2)
			set i=i + 1
		endloop
	endif
	call RemoveLocation(loc)
	set loc=null
	set loc2=null
endfunction
//一阳指伤害
function lF takes nothing returns boolean
	return ( ( GetEventDamage() == .29 ) ) and IsUnitAliveBJ(GetTriggerUnit())
endfunction
function JF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + gengu[i] / 20
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
 local location loc2= null
	if ( ( GetUnitAbilityLevel(u, 'A07O') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A0DN') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if GetUnitAbilityLevel(u, 'A07O') != 0 and GetUnitAbilityLevel(u, 'A0DN') != 0 and GetUnitAbilityLevel(u, 'A07U') != 0 and GetUnitAbilityLevel(u, 'A09D') != 0 and GetUnitAbilityLevel(u, 'A085') != 0 and GetUnitAbilityLevel(u, 1093679152) != 0 then
		set shxishu=shxishu * 6 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 80. , 80. , shxishu , 'A06P')
	call WuGongShangHai(u , uc , shanghai)
	// 一阳指+双手 对最终BOSS无效
	if GetUnitAbilityLevel(u, 'A07U') != 0 and (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) and GetUnitTypeId(uc) != 'nbds' then // INLINED!!
		call percentDamage(uc , 5 , true)
	endif
	if ( ( gengu[( 1 + GetPlayerId(GetOwningPlayer(u)) )] >= 30 ) and ( (IsUnitType((GetEventDamageSource() ), ( UNIT_TYPE_HERO)) != null) ) ) then // INLINED!!
		call WanBuff(u , uc , 12)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
	set loc2=null
endfunction
//唐诗剑法
function LF takes nothing returns boolean
	return ( ( GetEventDamage() == .31 ) )
endfunction
function MF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1. + jingmai[i] / 20
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	if ( ( GetUnitAbilityLevel(u, 'A06J') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07F') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07X') != 0 ) ) then
		set shxishu=shxishu + 1.
	endif
	if GetUnitAbilityLevel(u, 'A06J') != 0 and GetUnitAbilityLevel(u, 'A07F') != 0 and GetUnitAbilityLevel(u, 'A07X') != 0 and GetUnitAbilityLevel(u, 'A06M') != 0 and GetUnitAbilityLevel(u, 1093678935) != 0 and GetUnitAbilityLevel(u, 'A084') != 0 and GetUnitAbilityLevel(u, 1093678930) != 0 then
		set shxishu=shxishu * 7 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 75 , 75 , shxishu , 'A071')
	call WuGongShangHai(u , uc , shanghai)
	if ( ( GetUnitAbilityLevel(u, 'A06M') != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 1110454323) == false ) ) then
		call WanBuff(u , uc , 3)
	endif
	if ( ( GetUnitAbilityLevel(u, 1093678935) != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 'Bcri') == false ) ) then
		call WanBuff(u , uc , 4)
	endif
	if ( ( GetUnitAbilityLevel(u, 'A084') != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 1110454324) == false ) ) then
		call WanBuff(u , uc , 7)
	endif
	if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) ) then
		call SetWidgetLife(u, ( GetUnitState(u, UNIT_STATE_LIFE) + ( shanghai * .02 ) ))
	endif
	call WuGongShengChong(GetEventDamageSource() , 'A071' , 950.)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
//七伤拳
function OF takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07M') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function PF takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function QF takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= 1. + wuxing[i] / 20
 local real shanghai= 0.
	// 搭配吸星，伤害加50%
	if GetUnitAbilityLevel(u, 'A07R') != 0 then
		set shanghai=shanghai + .5
	endif
	// 搭配双手
	if GetUnitAbilityLevel(u, 'A07U') != 0 then
		set shanghai=shanghai + .6
	endif
	// 搭配弹指
	if GetUnitAbilityLevel(u, 'A06H') != 0 then
		set shanghai=shanghai + .7
	endif
	// 搭配九阴，
	if GetUnitAbilityLevel(u, 'A07S') != 0 then
		set shanghai=shanghai + .8
	endif
	
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "war3mapImported\\PhoenixAttack.mdx"))) // INLINED!!
	if GetUnitAbilityLevel(u, 'A07R') != 0 and GetUnitAbilityLevel(u, 'A07S') != 0 and GetUnitAbilityLevel(u, 'A084') != 0 and GetUnitAbilityLevel(u, 'A07X') != 0 and GetUnitAbilityLevel(u, 'A07U') != 0 and GetUnitAbilityLevel(u, 1395666994) != 0 and GetUnitAbilityLevel(u, 'A06H') != 0 then
		set shxishu=shxishu * 7 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 12. , 16. , shxishu , 'A07M')
	call WuGongShangHai(u , uc , shanghai)
	// 搭配吸星，内伤
	if ( ( GetUnitAbilityLevel(u, 'A07R') != 0 ) and ( GetRandomReal(.0, 100.) <= 5. ) and ( UnitHasBuffBJ(uc, 'B002') == false ) ) then
		call WanBuff(u , uc , 1)
	endif
	// 搭配九阴，麻痹
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1111844210) == false ) ) then
		call WanBuff(u , uc , 8)
	endif
	// 搭配蛤蟆，中毒
	if ( ( GetUnitAbilityLevel(u, 'A084') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1111847784) == false ) ) then
		call WanBuff(u , uc , 13)
	endif
	// 搭配神照，流血
	if ( ( GetUnitAbilityLevel(u, 'A07X') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454323) == false ) ) then
		call WanBuff(u , uc , 3)
	endif
	// 搭配双手，混乱
	if ( ( GetUnitAbilityLevel(u, 'A07U') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 'Bcri') == false ) ) then
		call WanBuff(u , uc , 4)
	endif
	// 搭配龙象，破防
	if ( ( GetUnitAbilityLevel(u, 1395666994) != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454326) == false ) ) then
		call WanBuff(u , uc , 9)
	endif
	// 搭配弹指，封穴
	if ( ( GetUnitAbilityLevel(u, 'A06H') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
		call WanBuff(u , uc , 11)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function RF takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, GetUnitLoc(GetAttacker()))
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07M')
	call SaveReal(YDHT, id * cx, $2392447A, 25.)
	call SaveReal(YDHT, id * cx, $41713DA3, 500.)
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( 3. + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(danpo[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .06 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 1.5 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * LoadReal(YDHT, id * cx, $1968F401) ))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)) == 9 ) ) then
		call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 10. ))
	endif
	if ( ( GetRandomReal(.0, 100.) <= LoadReal(YDHT, id * cx, $2392447A) ) ) then
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(LoadReal(YDHT, id * cx, $41713DA3) , LoadLocationHandle(YDHT, id * cx, - $72C3E060) , Condition(function PF)), function QF)
		call WuGongShengChong(GetAttacker() , 'A07M' , 500.)
	endif
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//九阴白骨爪
function TF takes nothing returns boolean
	return ( ( GetEventDamage() == .35 ) )
endfunction
function jiuZhaoCdThree takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	// CD变为3秒
	call EXSetAbilityState(EXGetUnitAbility(u, 'A07N'), 1, 3)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function UF takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0.
 local integer level= 0
 local timer t= null
	if ( ( GetUnitAbilityLevel(u, 1093678930) != 0 ) ) then
		set shxishu=shxishu + .5
	endif
	if ( ( GetUnitAbilityLevel(u, 'A06H') != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	if ( ( GetUnitAbilityLevel(u, 'A089') != 0 ) ) then
		set shxishu=shxishu + .7
	endif
	if ( ( GetUnitAbilityLevel(u, 'A07S') != 0 ) ) then
		set shxishu=shxishu + .8
	endif
	if ( ( GetUnitAbilityLevel(u, 1093679154) != 0 ) ) then
		set shxishu=shxishu + .6
	endif
	// 九阴真人加成40倍
	if isTitle(i , 37) then
		set shxishu=shxishu * 40
	endif
	if GetUnitAbilityLevel(u, 1093678930) != 0 and GetUnitAbilityLevel(u, 'A06H') != 0 and GetUnitAbilityLevel(u, 'A089') != 0 and GetUnitAbilityLevel(u, 'A07S') != 0 and GetUnitAbilityLevel(u, 1093679154) != 0 then
		set shxishu=shxishu * 5 * 2
	endif
	set shanghai=ShangHaiGongShi(u , uc , 36 , 36 , shxishu , 'A07N')
	call WuGongShangHai(u , uc , shanghai)
	call WuGongShengChong(GetEventDamageSource() , 'A07N' , 3000.)
	set level=GetUnitAbilityLevel(u, 'A07N')
	// 3判断如果是九阴真人、芷若或瑶琴，CD变为3秒
	if isTitle(i , 37) or isTitle(i , 19) or isTitle(i , 41) then
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call TimerStart(t, 0.2, false, function jiuZhaoCdThree)
	endif
	set t=null
	set u=null
	set uc=null
endfunction
//-------空明拳开始-------//
function IsKongMing takes nothing returns boolean
	return GetUnitAbilityLevel(GetAttacker(), 'A017') >= 1 and GetRandomReal(.0, 100.) <= 15. + I2R(fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]) / 5.
endfunction
function KongMing_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function KongMing_Action takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local real hujia= GetUnitState(uc, ConvertUnitState(0x20))
 local real shengming= GetUnitState(uc, UNIT_STATE_MAX_LIFE)
 local real shxishu= 1. + shengming / 500000000 + hujia / 2000
 local real shanghai= 0.
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local location loc= GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 'A07S') >= 1 then
		set shxishu=shxishu + .6
	endif
	if GetUnitAbilityLevel(u, 'A0D1') >= 1 then
		set shxishu=shxishu + .8
	endif
	if GetUnitAbilityLevel(u, 'A07S') >= 1 and GetUnitAbilityLevel(u, 'A0D1') >= 1 and GetUnitAbilityLevel(u, 'A06P') != 0 and GetUnitAbilityLevel(u, 'A07U') != 0 and GetUnitAbilityLevel(GetTriggerUnit(), 'A018') != 0 then
		set shxishu=shxishu * 5 * 2
	endif
	if isTitle(i , 13) or isTitle(i , 43) then // 老顽童或北侠
set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 10 , 8 , shxishu , 'A017')
	call WuGongShangHai(u , uc , shanghai)
	call DestroyEffect((AddSpecialEffectTargetEx("Units\\NightElf\\Wisp\\WispExplode.mdl" , uc , "overhead"))) // INLINED!!
	if ( ( GetUnitAbilityLevel(u, 'A06P') != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 'Bcri') == false ) ) then
		call WanBuff(u , uc , 4)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
function KongMingQuan takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(uc)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local group g= CreateGroup()
 local integer range= 1
call WuGongShengChong(u , 'A017' , 1200.)
	// 搭配双手，范围伤害
	if GetUnitAbilityLevel(u, 'A07U') != 0 then
		// 老顽童或者北侠称号，范围3倍
		if isTitle(i , 13) or isTitle(i , 43) then
			set range=3
		endif
		call GroupEnumUnitsInRangeOfLoc(g, loc, 400 * range, Condition(function KongMing_Condition))
	else
		call GroupAddUnit(g, uc)
	endif
	call ForGroupBJ(g, function KongMing_Action)
	call GroupClear(g)
	call DestroyGroup(g)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
	set p=null
	set g=null
endfunction
function IsKongMingBeiDa takes nothing returns boolean
	return (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) and GetUnitAbilityLevel(GetTriggerUnit(), 'A017') >= 1 and GetUnitAbilityLevel(GetTriggerUnit(), 'A018') >= 1 // INLINED!!
endfunction
function KongMingBeiDa takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if aidacishu[i] >= 100 then
		set aidacishu[i]=0
		call unitadditembyidswapped('rsps' , GetTriggerUnit())
	else
		set aidacishu[i]=aidacishu[i] + 1
	endif
endfunction
//-------空明拳结束-------//
//-------碧海潮生曲开始-------//
function IsBiHai takes nothing returns boolean
	return ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) and GetSpellAbilityId() == 'A018' // INLINED!!
endfunction
function BiHai_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function BiHai_Action takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= GetRandomInt(1, 5)
 local integer j= 5
 local real shxishu= 1.
 local real shanghai= 0.
 local string array yinlv
	set yinlv[1]="宫!"
	set yinlv[2]="商!"
	set yinlv[3]="角!"
	set yinlv[4]="徵!"
	set yinlv[5]="羽!"
	if isTitle(i , 39) then
		set shxishu=shxishu * 10
	endif
	if GetUnitAbilityLevel(u, 'A06H') >= 1 then
		set j=3
	endif
	if GetUnitAbilityLevel(u, 'A0D3') >= 1 then
		set j=GetRandomInt(2, 5)
	endif
	if GetUnitAbilityLevel(u, 'A07N') >= 1 then
		set shxishu=shxishu + 1
	endif
	if GetUnitAbilityLevel(u, 'A06H') >= 1 and GetUnitAbilityLevel(u, 'A0D3') >= 1 and GetUnitAbilityLevel(u, 'A07N') >= 1 and GetUnitAbilityLevel(u, 'A084') >= 1 then
		set shxishu=shxishu * 4 * 2
	endif
	if UnitHaveItem(u , 'I09D') then
		set shxishu=shxishu * 8
	endif
	if GetUnitAbilityLevel(u, 'A084') >= 1 and UnitHasBuffBJ(u, 'B00Y') then
		set i=5
	endif
	call CreateTextTagLocBJ(yinlv[i], loc, 40., 14., 10., 60., 30., 0)
	call Nw(1.5 , bj_lastCreatedTextTag)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
	if i == 1 then
		call WanBuff(u , uc , 1)
	elseif i == 2 then
		call WanBuff(u , uc , 9)
	elseif i == 3 then
		set shanghai=ShangHaiGongShi(u , uc , 20 , 30 , shxishu , 'A018')
		call WuGongShangHai(u , uc , shanghai)
		call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))) // INLINED!!
	elseif i == 4 then
		call WanBuff(u , uc , 4)
	elseif i == 5 then
		if UnitHasBuffBJ(u, 'B00Y') == false then
			set bihai[1 + GetPlayerId(GetOwningPlayer(u))]=1
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, 'A01A')
			call IssueTargetOrderById(bj_lastCreatedUnit, $D006B, uc)
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		else
			set bihai[1 + GetPlayerId(GetOwningPlayer(u))]=bihai[1 + GetPlayerId(GetOwningPlayer(u))] + 1
			call UnitRemoveBuffBJ('B00Y', u)
			call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(u), loc, bj_UNIT_FACING)
			call ShowUnitHide(bj_lastCreatedUnit)
			call UnitAddAbility(bj_lastCreatedUnit, 'A01A')
			call IssueTargetOrderById(bj_lastCreatedUnit, $D006B, uc)
			call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		endif
		if bihai[1 + GetPlayerId(GetOwningPlayer(u))] >= j then
			call UnitRemoveBuffBJ('B00Y', u)
			call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))) // INLINED!!
			set shanghai=ShangHaiGongShi(u , uc , 800 , 1600 , shxishu , 'A018')
			call WuGongShangHai(u , uc , shanghai)
		endif
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function BiHaiChaoSheng takes nothing returns nothing
 local group g= CreateGroup()
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local sound sd= CreateSound("Sound\\Music\\mp3Music\\UndeadVictory.mp3", false, false, false, $A, $A, "DefaultEAXON")
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\Brilliance\\Brilliance.mdl"))) // INLINED!!
	//call PlaySoundOnUnitBJ(sd,100,u)
	call WuGongShengChong(u , 'A018' , 700.)
	call GroupEnumUnitsInRangeOfLoc(g, loc, 500, Condition(function BiHai_Condition))
	call ForGroupBJ(g, function BiHai_Action)
	call GroupClear(g)
	call DestroyGroup(g)
	call RemoveLocation(loc)
	set u=null
	set g=null
	set loc=null
	set sd=null
endfunction
//-------碧海潮生曲结束-------//
//------------江湖武功结束------------
function JiangHuWuGong_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsTanZhi))
	call TriggerAddAction(t, function TanZhiShenTong)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsTanZhiBeiDong))
	call TriggerAddAction(t, function TanZhiBeiDong)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsTanZhiShangHai))
	call TriggerAddAction(t, function TanZhiShangHai)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function dF))
	call TriggerAddAction(t, function eF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function gF))
	call TriggerAddAction(t, function hF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function jF))
	call TriggerAddAction(t, function kF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function nF))
	call TriggerAddAction(t, function oF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function qF))
	call TriggerAddAction(t, function rF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function tF))
	call TriggerAddAction(t, function yF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function AF))
	call TriggerAddAction(t, function aF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function bF))
	call TriggerAddAction(t, function CF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function DF))
	call TriggerAddAction(t, function EF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function GF))
	call TriggerAddAction(t, function HF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function lF))
	call TriggerAddAction(t, function JF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function LF))
	call TriggerAddAction(t, function MF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function OF))
	call TriggerAddAction(t, function RF)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function TF))
	call TriggerAddAction(t, function UF)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsKongMingBeiDa))
	call TriggerAddAction(t, function KongMingBeiDa)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsKongMing))
	call TriggerAddAction(t, function KongMingQuan)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsBiHai))
	call TriggerAddAction(t, function BiHaiChaoSheng)
	set t=null
endfunction
//------------绝世武功开始------------
//降龙十八掌
function isXiangLong takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07E' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function xiangLongAction takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	call GroupRemoveUnit(xianglongGroup, u)
	call clearTimer(t)
	set t=null
endfunction
function xiangLong takes nothing returns nothing
 local timer t= CreateTimer()
	call GroupAddUnit(xianglongGroup, GetTriggerUnit())
	call WuGongShengChong(GetTriggerUnit() , 'A07E' , 100.)
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	call TimerStart(t, 29, false, function xiangLongAction)
	set t=null
endfunction
function ZF takes nothing returns boolean
	return ( ( CountUnitsInGroup(xianglongGroup) > 0 ) )
endfunction
function dG takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function eG takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), - $1317DA19), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shanghai= 0.
 local real shxishu= jueXueXiShu(i)
	// 北乔峰称号加强降龙伤害
	if isTitle(i , 10) then
		set shxishu=shxishu * 5
	endif
	// 北丐或北侠称号加强降龙伤害
	if isTitle(i , 9) or isTitle(i , 43) then
		set shxishu=shxishu * 3
	endif
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 60. , 60. , shxishu , 'A07E')
	
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function fG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	if ( ( IsUnitDeadBJ(GetEnumUnit()) ) ) then
	else
		call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB, GetEnumUnit())
		call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB)))
		call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3, 'A07E')
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( ( ( 3. + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3))) / 2. ) ) + ( I2R(gengu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) * .06 ) ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401, ( 10. + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )] ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401) * 2.5 ) ))
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3)) == 9 ) ) then
			call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * 10. ))
		endif
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(700. , LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060) , Condition(function dG)), function eG)
		call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060))
		call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $3348E012))
		call YDWELocalVariableEnd()
	endif
endfunction
function gG takes nothing returns nothing
	call ForGroupBJ(xianglongGroup, function fG)
endfunction
//独孤九剑
function IsDuGuJiuJian takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07F' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function DuGuJiuJian takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
	call GroupAddUnit(k9, u)
	set m9=.0
	set n9=.0
	set o9[0]=GetUnitLoc(u)
	set p9=1
	loop
		exitwhen p9 > 20
		set m9=m9 + 18.
		set o9[1]=pu(o9[0] , 300. , ( I2R(p9) * 28. ))
		call CreateNUnitsAtLoc(1, 'h003', p, o9[1], bj_UNIT_FACING)
		set q9[p9]=bj_lastCreatedUnit
		call RemoveLocation(o9[1])
		call SetUnitAnimation(q9[p9], "birth")
		call SetUnitFlyHeight(q9[p9], m9, 100.)
		set p9=p9 + 1
	endloop
	call RemoveLocation(o9[0])
	call WuGongShengChong(GetTriggerUnit() , 'A07F' , 120.)
	call YDWEPolledWaitNull(10.)
	call GroupRemoveUnit(k9, u)
	set u=null
	set p=null
endfunction
function mG takes nothing returns boolean
	return ( ( CountUnitsInGroup(k9) > 0 ) )
endfunction
function nG takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function oG takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), - $1317DA19), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 9. , 9. , shxishu , 'A07F')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function pG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	if ( ( IsUnitDeadBJ(GetEnumUnit()) ) ) then
	else
		call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB, GetEnumUnit())
		call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB)))
		set n9=( n9 + 12. )
		set p9=1
		loop
			exitwhen p9 > 48
			set o9[2]=pu(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060) , 300. , ( ( I2R(p9) * 16. ) + n9 ))
			call SetUnitPositionLoc(q9[p9], o9[2])
			call RemoveLocation(o9[2])
			set p9=p9 + 1
		endloop
		call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3, 'A07F')
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( ( ( 1. + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3))) / 2. ) ) + ( I2R(wuxing[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) * .06 ) ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401, ( .2 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )] ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401) ))
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3)) == 9 ) ) then
			call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * 10. ))
		endif
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(450. , LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060) , Condition(function nG)), function oG)
		call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060))
		call YDWELocalVariableEnd()
	endif
endfunction
function qG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call ForGroupBJ(k9, function pG)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//黯然销魂掌
function sG takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07G' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function tG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07G')
	call WuGongShengChong(GetTriggerUnit() , 'A07G' , 90.)
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function vG takes nothing returns boolean
	return ( ( GetEventDamage() == 4.21 ) )
endfunction
function wG takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	set shanghai=ShangHaiGongShi(u , uc , 33. , 33. , shxishu , 'A07G')
	call WuGongShangHai(u , uc , shanghai)
	if ( ( GetRandomInt(1, 50) >= 20 ) and ( UnitHasBuffBJ(uc, 1110454328) == false ) ) then
		call WanBuff(u , uc , 11)
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
//反两仪刀法
function yG takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07H' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function zG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07H')
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
	call UnitAddAbility(bj_lastCreatedUnit, 1093681495)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
	call ShowUnitHide(bj_lastCreatedUnit)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call WuGongShengChong(GetTriggerUnit() , 'A07H' , 90.)
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function aG takes nothing returns boolean
	return ( ( GetEventDamage() == 4.13 ) )
endfunction
function BG takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 50. , 50. , shxishu , 'A07H')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//野球拳
function CG takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07I' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function cG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07I')
	call CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()) , 325. , 0), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , GetTriggerUnit() , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()) , 325. , 120.), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , GetTriggerUnit() , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()) , 325. , 240.), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , GetTriggerUnit() , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call WuGongShengChong(GetTriggerUnit() , 'A07I' , 90.)
	call GroupAddUnit(r9, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call YDWEWaitForLocalVariable(19.)
	call GroupRemoveUnit(r9, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function EG takes nothing returns boolean
	return ( ( CountUnitsInGroup(r9) > 0 ) )
endfunction
function FG takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function GG takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), - $1317DA19), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	if isTitle(i , 42) then
		set shxishu=shxishu * 3
	endif
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "war3mapImported\\CrimsonWake.mdx"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 30 , 30 , shxishu , 'A07I')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function HG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEnumUnit())) )])
	call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060, GetUnitLoc(GetEnumUnit()))
	call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3, 'A07I')
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(650. , LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060) , Condition(function FG)), function GG)
	call RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060))
endfunction
function IG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call ForGroupBJ(r9, function HG)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//辟邪剑法
function JG takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07J' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function KG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())) ))
	set t9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=GetSpellTargetLoc()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07J')
	call WuGongShengChong(GetTriggerUnit() , 'A07J' , 80.)
	call GroupAddUnit(s9, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call YDWEWaitForLocalVariable(20.)
	call GroupRemoveUnit(s9, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call RemoveLocation(t9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)])
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function MG takes nothing returns boolean
	return ( ( CountUnitsInGroup(s9) > 0 ) )
endfunction
function NG takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function OG takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), - $1317DA19), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 43 , 43 , shxishu , 'A07J')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function PG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	if ( ( IsUnitDeadBJ(GetEnumUnit()) ) ) then
	else
		call SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB, udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEnumUnit())) )])
		call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060, t9[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )])
		call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3, 'A07J')
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( ( ( 1.7 + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3))) / 2. ) ) + ( I2R(jingmai[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )]) * .05 ) ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401, ( 8.5 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) )] ))
		call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $1968F401) ))
		if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB), LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2A41B3A3)) == 9 ) ) then
			call SaveReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086, ( LoadReal(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $2CEF3086) * 10. ))
		endif
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600. , LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060) , Condition(function NG)), function OG)
		call YDWELocalVariableEnd()
	endif
endfunction
function QG takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call ForGroupBJ(s9, function PG)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//胡家刀法
function SG takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A086' ) )
endfunction
function TG takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function UG takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 20 , 20 , shxishu , 'A086')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function VG takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 500. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 10. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, pu(GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)) , GetRandomReal(100., 350.) , ( GetRandomReal(0, 360.) )))
		call CreateNUnitsAtLoc(1, 1697656908, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F), bj_UNIT_FACING)
		call Gw(2. , bj_lastCreatedUnit)
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(350. , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , Condition(function TG)), function UG)
	endif
endfunction
function WG takes nothing returns nothing
 local timer ky
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A086')
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 2. + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(gengu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .07 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 8.3 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * LoadReal(YDHT, id * cx, $1968F401) ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 1.8 ))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)) == 9 ) ) then
		call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 10. ))
	endif
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
	call WuGongShengChong(GetTriggerUnit() , 'A086' , 100.)
	set H7=1
	loop
		exitwhen H7 > 18
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 256 , ( ( 20. ) * ( I2R(H7) ) )))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093679159)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		set H7=H7 + 1
	endloop
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call SaveReal(YDHT, GetHandleId(ky), - $2CEF3086, LoadReal(YDHT, id * cx, - $2CEF3086))
	call TimerStart(ky, .3, true, function VG)
	call FlushChildHashtable(YDHT, id * cx)
	set ky=null
endfunction
function YG takes nothing returns boolean
	return ( ( GetEventDamage() == 4.22 ) )
endfunction
function ZG takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 16.6 , 16.6 , shxishu , 'A086')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//西毒杖法
function e6 takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A089' and (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) // INLINED!!
endfunction
function f6 takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
	call CreateNUnitsAtLoc(1, 'e00M', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call UnitAddAbility(bj_lastCreatedUnit, 'A088')
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D7)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 31.)
	call RemoveLocation(loc)
	call WuGongShengChong(GetTriggerUnit() , 'A089' , 100.)
	set u=null
	set loc=null
endfunction
function h6 takes nothing returns boolean
	return ( GetEventDamage() == 4.35 )
endfunction
function i6 takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	if UnitHaveItem(u , 'I09B') then
		set shxishu=shxishu * 8
	endif
	// 西毒称号加成
	if isTitle(i , 38) then
		set shxishu=shxishu * 3
	endif
	set shanghai=ShangHaiGongShi(u , uc , 45. , 45. , shxishu , 'A089')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//六脉神剑
function k6 takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A085' ) )
endfunction
function m6 takes nothing returns boolean
	return ( ( ( IsUnitAliveBJ(GetFilterUnit()) ) and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1))) ) ) )
endfunction
function o6 takes nothing returns nothing
	call GroupRemoveUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 6), GetEnumUnit())
endfunction
function p6 takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
 local location loc3= pu(loc2 , GetRandomReal(5., 15.) , AngleBetweenPoints(loc, loc2))
	call PauseUnit(uc, true)
	call SetUnitPositionLoc(uc, loc3)
	call Jw(1. , AddSpecialEffectTargetEx("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl" , uc , "chest"))
	set shanghai=ShangHaiGongShi(u , uc , 40. , 40. , shxishu , 'A085')
	call WuGongShangHai(u , uc , shanghai)
	call PauseUnit(uc, false)
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	call RemoveLocation(loc3)
	set u=null
	set uc=null
	set loc=null
	set loc2=null
	set loc3=null
endfunction
function q6 takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local location loc= GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(t), 1))
 local real r= LoadReal(YDHT, GetHandleId(t), 4)
	if ( r >= 500. ) then
		call KillUnit(u)
		call RemoveLocation(loc)
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call PauseTimer(t)
		call DestroyTimer(t)
	else
		call SaveReal(YDHT, GetHandleId(t), 4, r + 10.)
		call SetUnitPositionLoc(u, loc)
		call SaveGroupHandle(YDHT, GetHandleId(t), 5, YDWEGetUnitsInRangeOfLocMatchingNull(r + 20. , loc , Condition(function m6)))
		call SaveGroupHandle(YDHT, GetHandleId(t), 6, YDWEGetUnitsInRangeOfLocMatchingNull(r + 40. , loc , Condition(function m6)))
		call SetUnitScalePercent(u, r + 10, r + 10, r + 10)
		call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(t), 5), function o6)
		call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(t), 6), function p6)
		call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(t), 5))
		call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(t), 6))
		call RemoveLocation(loc)
	endif
	set u=null
	set t=null
	set loc=null
endfunction
function MM6 takes nothing returns nothing
 local timer ky
 local integer i= 1
 local location loc
	call WuGongShengChong(GetTriggerUnit() , 'A085' , 100.)
	loop
		exitwhen i > 6
		set loc=GetUnitLoc(GetTriggerUnit())
		call Jw(1. , AddSpecialEffectLocEx("war3mapImported\\DarkNova.mdx" , loc))
		call CreateNUnitsAtLoc(1, 'e00K', GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 1.)
		call SetUnitTimeScalePercent(bj_lastCreatedUnit, 200.)
		set ky=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(ky), 0, bj_lastCreatedUnit)
		call SaveUnitHandle(YDHT, GetHandleId(ky), 1, GetTriggerUnit())
		call TimerStart(ky, 0.02, true, function q6)
		call YDWEPolledWaitNull(1.5)
		call RemoveLocation(loc)
		set i=i + 1
	endloop
	set ky=null
	set loc=null
endfunction
//打狗棒法
function O6 takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07L' ) )
endfunction
function P6 takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(C9)) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function Q6 takes nothing returns nothing
 local unit u= C9
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	// 北丐打狗5倍
	if isTitle(i , 9) then
		set shxishu=shxishu * 5
	endif
	if UnitHaveItem(u , 'I097') then
		set shxishu=shxishu * 8
	endif
	set shanghai=ShangHaiGongShi(u , uc , 70. , 70. , shxishu , 'A07L')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function R6 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call DisableTrigger(GetTriggeringTrigger())
	set C9=GetTriggerUnit()
	set c9=GetUnitLoc(GetTriggerUnit())
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07L')
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 1.8 + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(gengu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .06 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 9. + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * LoadReal(YDHT, id * cx, $1968F401) ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 1.5 ))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)) == 9 ) ) then
		call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 10. ))
	endif
	call WuGongShengChong(GetTriggerUnit() , 'A07L' , 70.)
	call YDWEPolledWaitNull(.2)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call PauseUnit(C9, true)
	call CreateNUnitsAtLoc(1, 1747988532, GetOwningPlayer(C9), c9, bj_UNIT_FACING)
	set D9=bj_lastCreatedUnit
	call SetUnitPositionLocFacingLocBJ(C9, pu(c9 , 800. , 135.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SetUnitPositionLocFacingLocBJ(C9, pu(c9 , 800. , 45.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SetUnitPositionLocFacingLocBJ(C9, pu(c9 , 600. , 225.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SetUnitPositionLocFacingLocBJ(C9, pu(c9 , 900. , 90.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SetUnitPositionLocFacingLocBJ(C9, pu(c9 , 600. , 315.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SetUnitPositionLocFacingLocBJ(GetTriggerUnit(), pu(c9 , 800. , 135.), c9)
	call SetUnitAnimation(C9, "ATTACK")
	call SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	call YDWEPolledWaitNull(.15)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call AddLightningLoc("FORK", pu(c9 , 800. , 135.), pu(c9 , 800. , 45.))
	set E9[1]=bj_lastCreatedLightning
	call AddLightningLoc("FORK", pu(c9 , 800. , 45.), pu(c9 , 600. , 225.))
	set E9[2]=bj_lastCreatedLightning
	call AddLightningLoc("FORK", pu(c9 , 600. , 225.), pu(c9 , 900. , 90.))
	set E9[3]=bj_lastCreatedLightning
	call AddLightningLoc("FORK", pu(c9 , 900. , 90.), pu(c9 , 600. , 315.))
	set E9[4]=bj_lastCreatedLightning
	call AddLightningLoc("FORK", pu(c9 , 600. , 315.), pu(c9 , 800. , 135.))
	set E9[5]=bj_lastCreatedLightning
	call SetUnitPositionLocFacingLocBJ(C9, c9, c9)
	call RemoveUnit(D9)
	set F9=1
	loop
		exitwhen F9 > 12
		call AddSpecialEffectLocBJEx(pu(c9 , 100. , ( 30. * I2R(F9) )) , "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		call AddSpecialEffectLocBJEx(pu(c9 , 300. , ( 30. * I2R(F9) )) , "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		call AddSpecialEffectLocBJEx(pu(c9 , 500. , ( 30. * I2R(F9) )) , "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		set F9=F9 + 1
	endloop
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600. , c9 , Condition(function P6)), function Q6)
	call YDWEPolledWaitNull(1.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call DestroyLightning(E9[1])
	call DestroyLightning(E9[2])
	call DestroyLightning(E9[3])
	call DestroyLightning(E9[4])
	call DestroyLightning(E9[5])
	call PauseUnit(C9, false)
	call ResetUnitAnimation(C9)
	call EnableTrigger(jn)
	call YDWEPolledWaitNull(6.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call DisableTrigger(jn)
	call RemoveLocation(c9)
	call EnableTrigger(in)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function T6 takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(C9)) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function U6 takes nothing returns nothing
 local unit u= C9
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 36. , 36. , shxishu , 'A07L')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function V6 takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, C9)
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07L')
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)) , GetRandomReal(100., 350.) , ( GetRandomReal(0, 360.) )))
	call CreateNUnitsAtLoc(1, 1697656905, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
	call Gw(2. , bj_lastCreatedUnit)
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 1.8 + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(gengu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .06 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 9. * udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * LoadReal(YDHT, id * cx, $1968F401) ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 1.5 ))
	if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3)) == 9 ) ) then
		call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * 10. ))
	endif
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(400. , LoadLocationHandle(YDHT, id * cx, $5E83114F) , Condition(function T6)), function U6)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//残章：辟邪剑法之流星赶月
function X6 takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07J') >= 1 ) and ( GetRandomReal(.0, 100.) <= 5. ) and ( Kd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function Y6 takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function Z6 takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 18. , 18. , shxishu , 'A07J')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function dH takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 400. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 11. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), - $2EC5CBA0)))
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200. , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , Condition(function Y6)), function Z6)
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
	endif
endfunction
function eH takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function fH takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 18. , 18. , shxishu , 'A07J')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function gH takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 400. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 11. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), - $2EC5CBA0)))
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200. , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , Condition(function eH)), function fH)
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $3348E012))
	endif
endfunction
function hH takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function iH takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 18. , 18. , shxishu , 'A07J')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function jH takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 400. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 11. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), - $2EC5CBA0)))
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200. , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , Condition(function hH)), function iH)
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $3348E012))
	endif
endfunction
function kH takes nothing returns nothing
 local timer ky
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07J')
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 1.6 + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(gengu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .07 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 8.3 + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * ( LoadReal(YDHT, id * cx, $1968F401) * 3. ) ))
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("辟邪剑法之流星赶月", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	call CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, bj_lastCreatedUnit)
	call zw(bj_lastCreatedUnit , GetAttacker() , .5 , 600. , 1500. , 2000. , 100)
	call Gw(20. , bj_lastCreatedUnit)
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call SaveUnitHandle(YDHT, GetHandleId(ky), - $2EC5CBA0, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call SaveReal(YDHT, GetHandleId(ky), - $2CEF3086, LoadReal(YDHT, id * cx, - $2CEF3086))
	call TimerStart(ky, .5, true, function dH)
	call YDWEPolledWaitNull(1.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, bj_lastCreatedUnit)
	call zw(bj_lastCreatedUnit , GetAttacker() , .5 , 600. , 1500. , 2000. , 100)
	call Gw(25. , bj_lastCreatedUnit)
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call SaveUnitHandle(YDHT, GetHandleId(ky), - $2EC5CBA0, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call SaveReal(YDHT, GetHandleId(ky), - $2CEF3086, LoadReal(YDHT, id * cx, - $2CEF3086))
	call TimerStart(ky, .5, true, function gH)
	call YDWEPolledWaitNull(1.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, bj_lastCreatedUnit)
	call zw(bj_lastCreatedUnit , GetAttacker() , .5 , 600. , 1500. , 2000. , 100)
	call Gw(25. , bj_lastCreatedUnit)
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call SaveUnitHandle(YDHT, GetHandleId(ky), - $2EC5CBA0, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call SaveReal(YDHT, GetHandleId(ky), - $2CEF3086, LoadReal(YDHT, id * cx, - $2CEF3086))
	call TimerStart(ky, .5, true, function jH)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
	set ky=null
endfunction
//残章：打狗棒法之恶狗拦路
function nH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07L') >= 1 ) and ( GetRandomReal(.0, 100.) <= 6. ) and ( Qd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function oH takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("打狗棒法之恶狗拦路", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $72C3E060) , 256 , ( ( GetUnitPropWindowBJ(GetTriggerUnit()) ) + ( 90. ) )))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093678938)
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0271, LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 12.)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $72C3E060))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function qH takes nothing returns boolean
	return ( ( GetEventDamage() == 4.51 ) )
endfunction
function rH takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	// 北丐打狗5倍
	if isTitle(i , 9) then
		set shxishu=shxishu * 5
	endif
	set shanghai=ShangHaiGongShi(u , uc , 35. , 35. , shxishu , 'A07L')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：降龙第一式、第二式
function tH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07E') >= 1 ) and ( GetRandomReal(.0, 100.) <= 8. ) and ( Nd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function uH takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function vH takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shanghai= 0.
 local real shxishu= jueXueXiShu(i)
	// 北乔峰称号加强降龙伤害
	if isTitle(i , 10) then
		set shxishu=shxishu * 5
	endif
	// 北丐或北侠称号加强降龙伤害
	if isTitle(i , 9) or isTitle(i , 43) then
		set shxishu=shxishu * 3
	endif
	set shanghai=ShangHaiGongShi(u , uc , 70. , 70. , shxishu , 'A07E')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function wH takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local location loc= GetUnitLoc(LoadUnitHandle(YDHT, p, $59BEA0CB))
	if ( ( LoadReal(YDHT, p, - $4DA64D97) >= 600. ) ) then
		call FlushChildHashtable(YDHT, p)
		call PauseTimer(t)
		call DestroyTimer(t)
	else
		call SaveReal(YDHT, p, - $4DA64D97, ( LoadReal(YDHT, p, - $4DA64D97) + 10. ))
		call SaveLocationHandle(YDHT, p, $50525CFC, GetUnitLoc(LoadUnitHandle(YDHT, p, $59BEA0CB)))
		call SaveLocationHandle(YDHT, p, - $2103C000, pu(loc , GetRandomReal(50., 600.) , ( GetRandomReal(0, 360.) )))
		call AddSpecialEffectLocBJEx(LoadLocationHandle(YDHT, p, - $2103C000) , "war3mapImported\\FireStomp.mdx")
		call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300. , LoadLocationHandle(YDHT, p, - $2103C000) , Condition(function uH)), function vH)
		call RemoveLocation(LoadLocationHandle(YDHT, p, $50525CFC))
		call RemoveLocation(LoadLocationHandle(YDHT, p, - $2103C000))
	endif
	call RemoveLocation(loc)
	set loc=null
	set t=null
endfunction
function XLES_Condition takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function XLES_Action takes nothing returns nothing
 local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shanghai= 0.
 local real shxishu= jueXueXiShu(i)
	// 北乔峰称号加强降龙伤害
	if isTitle(i , 10) then
		set shxishu=shxishu * 5
	endif
	// 北丐或北侠称号加强降龙伤害
	if isTitle(i , 9) or isTitle(i , 43) then
		set shxishu=shxishu * 3
	endif
	set shanghai=ShangHaiGongShi(u , uc , 80. , 80. , shxishu , 'A07E')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function XiangLongErShi takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local integer p= GetHandleId(t)
 local unit u= LoadUnitHandle(YDHT, p, 0)
 local location loc= GetUnitLoc(u)
 local location loc2= pu(loc , GetRandomReal(50., 600.) , ( GetRandomReal(0, 360.) ))
	if ( ( LoadReal(YDHT, p, 1) >= 600. ) ) then
		call FlushChildHashtable(YDHT, p)
		call PauseTimer(t)
		call DestroyTimer(t)
	else
		call SaveReal(YDHT, p, 1, LoadReal(YDHT, p, 1) + 10.)
		call DestroyEffect((AddSpecialEffectLocBJEx(loc2 , "war3mapImported\\ChaosExplosion.mdl"))) // INLINED!!
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300. , loc2 , Condition(function XLES_Condition)), function XLES_Action)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set loc=null
	set loc2=null
endfunction
function xH takes nothing returns nothing
 local timer t= null
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(uc)
	if Nd[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetRandomInt(1, 3) == 1 then
		set t=CreateTimer()
		call CreateTextTagLocBJ("降龙十八掌之亢龙有悔", loc, 0, 14., 21., 15., 90., .0)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
		call Nw(4. , bj_lastCreatedTextTag)
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call TimerStart(t, .3, true, function XiangLongErShi)
	else
		set t=CreateTimer()
		call CreateTextTagLocBJ("降龙十八掌之神龙摆尾", loc, 0, 14., 90., 21., 15., .0)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
		call Nw(4. , bj_lastCreatedTextTag)
		call SaveUnitHandle(YDHT, GetHandleId(t), $59BEA0CB, u)
		call TimerStart(t, .3, true, function wH)
	endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set uc=null
	set loc=null
	set loc2=null
endfunction
//残章：胡家刀法之八方藏刀式
function zH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A086') >= 1 ) and ( GetRandomReal(.0, 100.) <= 8. ) and ( Od[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function AH takes nothing returns nothing
 local unit u= GetAttacker()
 local group g= CreateGroup()
 local location loc= GetUnitLoc(u)
 local location loc2= null
	call CreateTextTagLocBJ("胡家刀法之八方藏刀式", loc, 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call YDWETimerDestroyTextTag(4. , bj_lastCreatedTextTag)
	set H7=1
	loop
		exitwhen H7 > 8
		set loc2=pu(loc , 256 , ( ( 45. ) * ( I2R(H7) ) ))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetAttacker()), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A0F7')
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, loc2)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(loc2)
		set H7=H7 + 1
	endloop
	call RemoveLocation(loc)
	call DestroyGroup(g)
	set loc2=null
	set loc=null
	set u=null
	set g=null
endfunction
//八方藏刀式伤害
function BH takes nothing returns boolean
	return ( ( GetEventDamage() == 4.53 ) )
endfunction
function bH takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 500. , 500. , shxishu , 'A086')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
//残章：西毒棍法之蛇盘青竹
function cH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A089') >= 1 ) and ( GetRandomReal(.0, 100.) <= 5. ) and ( Pd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function DH takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("西毒棍法之蛇盘青竹", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	set H7=1
	loop
		exitwhen H7 > 12
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $6923AD87) , 350. , ( ( 30. ) * ( I2R(H7) ) )))
		call CreateNUnitsAtLoc(1, 1869836340, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, - $3348E012), bj_UNIT_FACING)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 5.)
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		set H7=H7 + 1
	endloop
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function FH takes nothing returns boolean
	return ( ( GetEventDamage() == 4.54 ) )
endfunction
function GH takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	// 西毒称号加成
	if isTitle(i , 38) then
		set shxishu=shxishu * 3
	endif
	set shanghai=ShangHaiGongShi(u , uc , 42. , 42. , shxishu , 'A089')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：反两仪刀法之行气如虹
function IH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07H') >= 1 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( Jd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function lH takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SetUnitFlyHeight(GetEnumUnit(), 600., 200.)
	call IssuePointOrderByIdLoc(GetEnumUnit(), $D0012, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $6923AD87))
endfunction
function JH takes nothing returns nothing
	call RemoveUnit(GetEnumUnit())
endfunction
function KH takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function LH takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 40. , 40. , shxishu , 'A07H')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
function MH takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07H')
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("反两仪刀法之行气如虹", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call SaveGroupHandle(YDHT, id * cx, $312C4181, CreateGroup())
	set H7=1
	loop
		exitwhen H7 > 9
		call SaveReal(YDHT, id * cx, - $6329FB8A, ( LoadReal(YDHT, id * cx, - $6329FB8A) + 45. ))
		call SaveLocationHandle(YDHT, id * cx, - $3348E012, pu(LoadLocationHandle(YDHT, id * cx, - $6923AD87) , 700. , LoadReal(YDHT, id * cx, - $6329FB8A)))
		call CreateNUnitsAtLoc(1, 1747988528, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, - $6923AD87), bj_UNIT_FACING)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D0012, LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $3348E012))
		call GroupAddUnit(LoadGroupHandle(YDHT, id * cx, $312C4181), bj_lastCreatedUnit)
		set H7=H7 + 1
	endloop
	call YDWEPolledWaitNull(3.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call ForGroupBJ(LoadGroupHandle(YDHT, id * cx, $312C4181), function lH)
	call YDWEPolledWaitNull(3.)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call ForGroupBJ(LoadGroupHandle(YDHT, id * cx, $312C4181), function JH)
	call CreateNUnitsAtLoc(1, 1747988529, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, - $6923AD87), bj_UNIT_FACING)
	call SaveUnitHandle(YDHT, id * cx, $197A3E5D, bj_lastCreatedUnit)
	call DestroyGroup(LoadGroupHandle(YDHT, id * cx, $312C4181))
	call YDWEPolledWaitNull(.5)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call AddSpecialEffectLocBJEx(LoadLocationHandle(YDHT, id * cx, - $6923AD87) , "war3mapImported\\LightningWrath.mdx")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
	call YDWEPolledWaitNull(.3)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call RemoveUnit(LoadUnitHandle(YDHT, id * cx, $197A3E5D))
	call AddSpecialEffectLocBJEx(LoadLocationHandle(YDHT, id * cx, - $6923AD87) , "war3mapImported\\FrostNova.mdx")
	call DestroyEffect((bj_lastCreatedEffect)) // INLINED!!
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 2.5 + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(jingmai[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .05 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 8. + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * ( LoadReal(YDHT, id * cx, $1968F401) * 6. ) ))
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800. , LoadLocationHandle(YDHT, id * cx, - $6923AD87) , Condition(function KH)), function LH)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function OH takes nothing returns boolean
	return ( ( GetEventDamage() == 4.55 ) )
endfunction
function PH takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 20. , 20. , shxishu , 'A07H')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：黯然销魂掌之无中生有
function RH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07G') >= 1 ) and ( GetRandomReal(.0, 100.) <= 6. ) and ( Md[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function SH takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 2400. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 20. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $50525CFC, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $3348E012, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $50525CFC) , 256 , LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97)))
		call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $50525CFC), bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 1093677131)
		call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D00FA, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $3348E012))
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 2.)
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $50525CFC))
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), - $3348E012))
	endif
endfunction
function TH takes nothing returns nothing
 local timer ky
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07G')
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("黯然销魂掌之无中生有", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call TimerStart(ky, .1, true, function SH)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
	set ky=null
endfunction
function VH takes nothing returns boolean
	return ( ( GetEventDamage() == 4.56 ) )
endfunction
function WH takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 36. , 36. , shxishu , 'A07G')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：独孤九剑奥义之破剑式
function YH takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07F') >= 1 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( ld[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function ZH takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07F')
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("独孤九剑奥义之破剑式", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, pu(LoadLocationHandle(YDHT, id * cx, - $6923AD87) , 500. , ( ( GetUnitFacing(GetAttacker()) ) + ( 180. ) )))
	call CreateNUnitsAtLoc(1, 1747988530, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, $5E83114F), GetUnitFacing(GetAttacker()))
	call Gw(4. , bj_lastCreatedUnit)
	call IssuePointOrderByIdLoc(bj_lastCreatedUnit, $D02AC, LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, $5E83114F))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function eI takes nothing returns boolean
	return ( ( GetEventDamage() == 4.57 ) )
endfunction
function fI takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 44. , 44. , shxishu , 'A07F')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：六脉神剑之少商剑
function hI takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A085') >= 1 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( Id[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function iI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call YDWELocalVariableInitiliation()
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A085')
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("六脉神剑之少商剑", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $6923AD87), GetUnitFacing(GetAttacker()))
	call ShowUnitHide(bj_lastCreatedUnit)
	call Gw(4. , bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679439)
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0097, GetTriggerUnit())
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function kI takes nothing returns boolean
	return ( ( GetEventDamage() == 4.58 ) )
endfunction
function mI takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= udg_hero[i]
 local unit uc= GetTriggerUnit()
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	set shanghai=ShangHaiGongShi(u , uc , 300. , 300. , shxishu , 'A085')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//残章：野球拳第一式
function oI takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A07I') >= 1 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( Ld[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function pI takes nothing returns boolean
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function qI takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), $59BEA0CB)
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= jueXueXiShu(i)
 local real shanghai= 0.
	if isTitle(i , 42) then
		set shxishu=shxishu * 3
	endif
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 44. , 44. , shxishu , 'A07I')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set t=null
	set u=null
	set uc=null
	set loc=null
endfunction
function rI takes nothing returns nothing
	if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) >= 420. ) ) then
		call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		call DestroyTimer(GetExpiredTimer())
	else
		call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), - $4DA64D97) + 11. ))
		call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), - $2EC5CBA0)))
		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(250. , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F) , Condition(function pI)), function qI)
		call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), $5E83114F))
	endif
endfunction
function sI takes nothing returns nothing
 local timer ky
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetAttacker())
	call SaveInteger(YDHT, id * cx, - $2A41B3A3, 'A07I')
	call SaveLocationHandle(YDHT, id * cx, - $6923AD87, GetUnitLoc(GetAttacker()))
	call CreateTextTagLocBJ("野球拳之翻肘裂捶", LoadLocationHandle(YDHT, id * cx, - $6923AD87), 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	call RemoveLocation(LoadLocationHandle(YDHT, id * cx, - $6923AD87))
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(GetTriggerUnit()))
	call CreateNUnitsAtLoc(1, 1697656912, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), LoadLocationHandle(YDHT, id * cx, - $72C3E060), bj_UNIT_FACING)
	call zw(bj_lastCreatedUnit , GetAttacker() , .5 , 600. , 1500. , 2000. , 100)
	call Gw(20. , bj_lastCreatedUnit)
	call SaveUnitHandle(YDHT, id * cx, - $2EC5CBA0, bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) , 250. , 0), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0) , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) , 250. , 90.), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0) , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) , 250. , 180.), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0) , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0)) , 250. , 270.), bj_UNIT_FACING)
	call Yv(bj_lastCreatedUnit , LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0) , 6. , .0 , 0 , 20. , .03)
	call Gw(20. , bj_lastCreatedUnit)
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( ( ( 3. + I2R(juexuelingwu[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) ) + ( I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, $59BEA0CB), LoadInteger(YDHT, id * cx, - $2A41B3A3))) / 2. ) ) + ( I2R(danpo[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )]) * .07 ) ))
	call SaveReal(YDHT, id * cx, $1968F401, ( 11. + udg_shanghaijiacheng[( 1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB))) )] ))
	call SaveReal(YDHT, id * cx, - $2CEF3086, ( LoadReal(YDHT, id * cx, - $2CEF3086) * ( LoadReal(YDHT, id * cx, $1968F401) * 3. ) ))
	set ky=CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(ky), $59BEA0CB, LoadUnitHandle(YDHT, id * cx, $59BEA0CB))
	call SaveUnitHandle(YDHT, GetHandleId(ky), - $2EC5CBA0, LoadUnitHandle(YDHT, id * cx, - $2EC5CBA0))
	call SaveReal(YDHT, GetHandleId(ky), - $2CEF3086, LoadReal(YDHT, id * cx, - $2CEF3086))
	call TimerStart(ky, .5, true, function rI)
	call FlushChildHashtable(YDHT, id * cx)
	set ky=null
endfunction
//九阳真经残卷
function isJiuYangCanJuanAct takes nothing returns boolean
	return ( ( GetUnitAbilityLevel(GetAttacker(), 'A0DN') >= 1 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( JYd[( 1 + GetPlayerId(GetOwningPlayer(GetAttacker())) )] >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) ) )
endfunction
function isJiuYangEnemy takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function jiuYangCanJuanAction takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	// 九阳残章伤害乘以10
 local real shxishu= ( jueXueXiShu(i) + 5 * GetUnitAbilityLevel(u, 'A06S') ) * 10
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))) // INLINED!!
	set shanghai=ShangHaiGongShi(u , uc , 132. , 132. , shxishu , 'A0DN')
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
endfunction
function jiuYangCanJuanAct takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
 local integer i= 0
 local integer j= 0
 local location loc1= null
 local location loc2= null
 local group g= null
	call CreateTextTagLocBJ("九阳真经残卷", loc, 0, 14., 90., 21., 15., .0)
	call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., ( GetRandomReal(80., 100.) ))
	call Nw(4. , bj_lastCreatedTextTag)
	set j=0
	loop
		exitwhen j >= 5
		set loc2=PolarProjectionBJ(loc, GetRandomReal(300, 1000), GetRandomReal(0, 360))
		call DestroyEffect((AddSpecialEffectLocEx("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl" , loc2))) // INLINED!!
		set i=0
		loop
			exitwhen i >= 8
			set loc1=PolarProjectionBJ(loc2, 400, 45 * i)
			call DestroyEffect((AddSpecialEffectLocEx("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl" , loc1))) // INLINED!!
			call RemoveLocation(loc1)
			set i=i + 1
		endloop
		set g=CreateGroup()
		call GroupEnumUnitsInRangeOfLoc(g, loc2, 575, Condition(function isJiuYangEnemy))
		call ForGroupBJ(g, function jiuYangCanJuanAction)
		call DestroyGroup(g)
		call RemoveLocation(loc2)
		call YDWEPolledWaitNull(0.8)
		set j=j + 1
	endloop
	call RemoveLocation(loc)
	set g=null
	set u=null
	set loc=null
	set loc1=null
	set loc2=null
endfunction
//------------绝世武功结束------------
function JueShiWuGong_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isXiangLong))
	call TriggerAddAction(t, function xiangLong)
	
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, 1.)
	call TriggerAddCondition(t, Condition(function ZF))
	call TriggerAddAction(t, function gG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsDuGuJiuJian))
	call TriggerAddAction(t, function DuGuJiuJian)
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, .03)
	call TriggerAddCondition(t, Condition(function mG))
	call TriggerAddAction(t, function qG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function sG))
	call TriggerAddAction(t, function tG)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function vG))
	call TriggerAddAction(t, function wG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function yG))
	call TriggerAddAction(t, function zG)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function aG))
	call TriggerAddAction(t, function BG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function CG))
	call TriggerAddAction(t, function cG)
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, .3)
	call TriggerAddCondition(t, Condition(function EG))
	call TriggerAddAction(t, function IG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function JG))
	call TriggerAddAction(t, function KG)
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, 1.)
	call TriggerAddCondition(t, Condition(function MG))
	call TriggerAddAction(t, function QG)
	//胡家刀法
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function SG))
	call TriggerAddAction(t, function WG)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function YG))
	call TriggerAddAction(t, function ZG)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function e6))
	call TriggerAddAction(t, function f6)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function h6))
	call TriggerAddAction(t, function i6)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function k6))
	call TriggerAddAction(t, function MM6)
	set in=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(in, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(in, Condition(function O6))
	call TriggerAddAction(in, function R6)
	set jn=CreateTrigger()
	call DisableTrigger(jn)
	call TriggerRegisterTimerEventPeriodic(jn, .3)
	call TriggerAddAction(jn, function V6)
	
	//残章开始
	//辟邪剑法之流星赶月
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function X6))
	call TriggerAddAction(t, function kH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function nH))
	call TriggerAddAction(t, function oH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function qH))
	call TriggerAddAction(t, function rH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function tH))
	call TriggerAddAction(t, function xH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function zH))
	call TriggerAddAction(t, function AH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function BH))
	call TriggerAddAction(t, function bH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function cH))
	call TriggerAddAction(t, function DH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function FH))
	call TriggerAddAction(t, function GH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IH))
	call TriggerAddAction(t, function MH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function OH))
	call TriggerAddAction(t, function PH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function RH))
	call TriggerAddAction(t, function TH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function VH))
	call TriggerAddAction(t, function WH)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function YH))
	call TriggerAddAction(t, function ZH)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function eI))
	call TriggerAddAction(t, function fI)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function hI))
	call TriggerAddAction(t, function iI)
	set an=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(an)
	call TriggerAddCondition(an, Condition(function kI))
	call TriggerAddAction(an, function mI)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function oI))
	call TriggerAddAction(t, function sI)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function isJiuYangCanJuanAct))
	call TriggerAddAction(t, function jiuYangCanJuanAct)
	set t=null
endfunction
//-----------江湖内功和九阴武功开始-----------
//使用罗汉伏魔功
function uI takes nothing returns boolean
	return GetKillingUnit() != null and ( ( GetUnitAbilityLevel(GetKillingUnit(), 'A07O') > 0 ) )
endfunction
function vI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set G9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( G9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( G9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 100 ) ) then
		set G9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call YDWEGeneralBounsSystemUnitSetBonus(GetKillingUnit() , 2 , 0 , $A)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "防御+10")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//使用化功大法
function xI takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07P' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function yI takes nothing returns boolean
 local integer id= GetHandleId(GetTriggeringTrigger())
	return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $59BEA0CB))) ) and ( IsUnitAliveBJ(GetFilterUnit()) ) ) )
endfunction
function zI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
	call SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $3348E012, GetUnitLoc(GetEnumUnit()))
	call AddLightningLoc("DRAM", LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $72C3E060), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), - $3348E012))
	call Lw(2 , bj_lastCreatedLightning)
	call SaveInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $45541105, ( LoadInteger(YDHT, id * LoadInteger(YDHT, id, - $1317DA19), $45541105) + 1 ))
endfunction
function AI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
 local integer i= GetUnitAbilityLevel(GetTriggerUnit(), 'A07P')
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A0BQ') >= 1 then
		if UnitHaveItem(GetTriggerUnit() , 'I0AM') then
			call WuGongShengChong(GetTriggerUnit() , 'A07P' , 150)
		else
			call WuGongShengChong(GetTriggerUnit() , 'A07P' , 300)
		endif
	endif
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveUnitHandle(YDHT, id * cx, $59BEA0CB, GetTriggerUnit())
	call SaveLocationHandle(YDHT, id * cx, - $72C3E060, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)))
	call SaveInteger(YDHT, id * cx, $45541105, 0)
	call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(1000. , LoadLocationHandle(YDHT, id * cx, - $72C3E060) , Condition(function yI)), function zI)
	call ModifyHeroStat(1, LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 0, ( i * 50 * LoadInteger(YDHT, id * cx, $45541105) ))
	call DisplayTimedTextToPlayer(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, $59BEA0CB)), 0, 0, 5., ( "内力提升 ： " + I2S(( i * 50 * LoadInteger(YDHT, id * cx, $45541105) )) ))
	call YDWEWaitForLocalVariable(20.)
	call ModifyHeroStat(1, LoadUnitHandle(YDHT, id * cx, $59BEA0CB), 1, ( i * 50 * LoadInteger(YDHT, id * cx, $45541105) ))
	call YDWELocalVariableEnd()
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//使用吸星大法
function BI takes nothing returns boolean
	return GetKillingUnit() != null and ( ( GetUnitAbilityLevel(GetKillingUnit(), 1093678930) > 0 ) )
endfunction
function bI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set H9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( H9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( H9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= $C8 ) ) then
		set H9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call ModifyHeroStat(1, GetKillingUnit(), 0, $A)
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "内力+10")
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//==================九阴真经系统开始==================//
//摧坚神抓和摧心掌
function JiuYin_Condition takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetAttacker(), 'A0D1') >= 1 or GetUnitAbilityLevel(GetAttacker(), 'A0D3') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function CuiJian_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function CuiJian_Action takes nothing returns nothing
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u= GetAttacker()
 local unit uc= GetEnumUnit()
 local location loc= GetUnitLoc(uc)
 local real shxishu= 1.
 local real shanghai= 0.
	call DestroyEffect((AddSpecialEffectLocBJEx(loc , "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))) // INLINED!!
	if GetUnitAbilityLevel(GetAttacker(), 'A07S') >= 1 then
		// 九阴内功
		set shxishu=shxishu + 1.
	endif
	if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 37) then
		// 九阴真人
		set shxishu=shxishu * 40
	endif
	if isTitle(i , 41) then
		// 瑶琴
		set shxishu=shxishu * 10
	endif
	set shanghai=ShangHaiGongShi(u , uc , 30. , 30. , shxishu , 'A0D1')
	call WuGongShangHai(u , uc , shanghai)
	if ( ( GetUnitAbilityLevel(u, 'A07N') != 0 ) and ( GetRandomReal(.0, 100.) <= 10. ) and ( UnitHasBuffBJ(uc, 'B008') == false ) ) then
		call WanBuff(u , uc , 11)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
function JiuYin_Action takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real shanghai= 0.
 local real shxishu= 1.
	//摧坚神抓
	if GetUnitAbilityLevel(GetAttacker(), 'A0D1') >= 1 then
		if GetRandomReal(.0, 100.) <= 15. + I2R(fuyuan[i]) / 5. then
			call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500. , loc , Condition(function CuiJian_Condition)), function CuiJian_Action)
			call WuGongShengChong(GetAttacker() , 'A0D1' , 700.)
		endif
	endif
	//摧心掌
	if GetUnitAbilityLevel(GetAttacker(), 'A0D3') >= 1 then
		if GetRandomReal(.0, 100.) <= 15. + I2R(fuyuan[i]) / 5. then
			if GetUnitAbilityLevel(u, 'A07S') >= 1 then
				set shxishu=shxishu + 1.
			endif
			if isTitle(i , 37) then // 九阴真人
set shxishu=shxishu * 40
			endif
			if ( ( GetUnitAbilityLevel(u, 'A0D2') != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 'Bcri') == false ) ) then
				call WanBuff(u , uc , 4)
			endif
			if ( ( GetUnitAbilityLevel(u, 'A0D6') != 0 ) and ( GetRandomInt(1, $A) < 5 ) and ( UnitHasBuffBJ(uc, 1110454324) == false ) ) then
				call WanBuff(u , uc , 7)
			endif
			set shanghai=ShangHaiGongShi(u , uc , 80 , 64 , shxishu , 'A0D3')
			call AddSpecialEffectTargetUnitBJEx("overhead" , GetTriggerUnit() , "Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl")
			call DestroyEffect((GetLastCreatedEffectBJ())) // INLINED!!
			call WuGongShangHai(u , uc , shanghai)
			call WuGongShengChong(u , 'A0D3' , 1050.)
		endif
	endif
	call RemoveLocation(loc)
	set u=null
	set uc=null
	set loc=null
	set p=null
endfunction
function cI takes nothing returns boolean
	return ( GetUnitAbilityLevel(GetKillingUnit(), 'A07S') > 0 or GetUnitAbilityLevel(GetKillingUnit(), 'A0D2') > 0 or GetUnitAbilityLevel(GetKillingUnit(), 'A0D6') > 0 )
endfunction
//九阴真经杀100怪
function DI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
 local integer beishu= 1
// 九阴真人称号
if isTitle(i , 37) then
		set beishu=4
	endif
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set I9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( I9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( I9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 100 ) ) then
		set I9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		if GetUnitAbilityLevel(GetKillingUnit(), 'A07S') > 0 then
			// 九阴
			call ModifyHeroStat(0, GetKillingUnit(), 0, 10 * beishu)
			call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "招式伤害+" + I2S(10 * beishu))
		endif
		if GetUnitAbilityLevel(GetKillingUnit(), 'A0D2') > 0 then
			// 逆九阴
			if GetRandomInt(1, 2) == 1 then
				call ModifyHeroStat(0, GetKillingUnit(), 1, 10 * beishu)
				call ModifyHeroStat(1, GetKillingUnit(), 0, 30 * beishu)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "招式伤害-" + I2S(10 * beishu))
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "内力+" + I2S(30 * beishu))
			else
				call ModifyHeroStat(2, GetKillingUnit(), 0, 10 * beishu)
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "真实伤害+" + I2S(10 * beishu))
			endif
		endif
		if GetUnitAbilityLevel(GetKillingUnit(), 'A0D6') > 0 then
			// 易筋锻骨篇
			if GetRandomInt(1, 6) == 1 then
				set wuxing[i]=wuxing[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "悟性+" + I2S(beishu))
			elseif GetRandomInt(1, 5) == 1 then
				set gengu[i]=gengu[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "根骨+" + I2S(beishu))
			elseif GetRandomInt(1, 4) == 1 then
				set danpo[i]=danpo[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "胆魄+" + I2S(beishu))
			elseif GetRandomInt(1, 3) == 1 then
				set yishu[i]=yishu[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "医术+" + I2S(beishu))
			elseif GetRandomInt(1, 2) == 1 then
				set jingmai[i]=jingmai[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "经脉+" + I2S(beishu))
			else
				set fuyuan[i]=fuyuan[i] + beishu
				call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "福缘+" + I2S(beishu))
			endif
			// if GetRandomInt(1, 5) <= 2 then
			// 	if GetRandomInt(1, 6) == 1 then
			// 		set wuxing[i] = wuxing[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "悟性-" + I2S(beishu))
			// 	elseif GetRandomInt(1, 5) == 1 then
			// 		set gengu[i] = gengu[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "根骨-" + I2S(beishu))
			// 	elseif GetRandomInt(1, 4) == 1 then
			// 		set danpo[i] = danpo[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "胆魄-" + I2S(beishu))
			// 	elseif GetRandomInt(1, 3) == 1 then
			// 		set yishu[i] = yishu[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "医术-" + I2S(beishu))
			// 	elseif GetRandomInt(1, 2) == 1 then
			// 		set jingmai[i] = jingmai[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "经脉-" + I2S(beishu))
			// 	else
			// 		set fuyuan[i] = fuyuan[i] - beishu
			// 		call DisplayTextToPlayer(Player(- 1 + (LoadInteger(YDHT, id * cx, - $5E9EB4B3))), 0, 0, "福缘-" + I2S(beishu))
			// 	endif
			// endif
		endif
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//==================九阴真经系统结束==================//
//双手互搏
function FI takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A07U' ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function GI takes nothing returns nothing
	call UnitResetCooldown(GetTriggerUnit())
endfunction
function isShuangShouBeiDong takes nothing returns boolean
	// 学会双手，老顽童或郭大侠或小龙女称号
	return GetUnitAbilityLevel(GetAttacker(), 'A07U') >= 1 and ( isTitle(1 + GetPlayerId(GetOwningPlayer(GetAttacker())) , 13) or isTitle(1 + GetPlayerId(GetOwningPlayer(GetAttacker())) , 43) or isTitle(1 + GetPlayerId(GetOwningPlayer(GetAttacker())) , 6) )
endfunction
function shuangShouBeiDong takes nothing returns nothing
 local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	// 被动双手刷新概率
	if GetRandomReal(1., 2000) <= RMinBJ(fuyuan[i], 100) then
		call DisplayTextToPlayer(p, 0, 0, "|cff00FF66双手被动刷新")
		call UnitResetCooldown(u)
	endif
	set u=null
	set p=null
endfunction
//使用九阳神功
function II takes nothing returns boolean
	return GetKillingUnit() != null and ( ( GetUnitAbilityLevel(GetKillingUnit(), 'A0DN') > 0 ) )
endfunction
function lI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveInteger(YDHT, id * cx, - $5E9EB4B3, ( 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())) ))
	set l9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=( l9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] + 1 )
	if ( ( l9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)] >= 100 ) ) then
		set l9[LoadInteger(YDHT, id * cx, - $5E9EB4B3)]=0
		call DisplayTextToPlayer(Player(- 1 + ( LoadInteger(YDHT, id * cx, - $5E9EB4B3) )), 0, 0, "生命值提高2000")
		call unitadditembyidswapped('I04T' , GetKillingUnit())
	endif
	call FlushChildHashtable(YDHT, id * cx)
endfunction
//-----------江湖内功和九阴武功结束-----------
//模拟九阳神功
function IsJiuYang takes nothing returns boolean
	return GetSpellAbilityId() == 'A0DN' or GetSpellAbilityId() == 'A01B' or GetSpellAbilityId() == 'A01C' or GetSpellAbilityId() == 'A01D'
endfunction
function JiuYang_End takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	call UnitRemoveAbility(u, 'A0DL')
	call UnitRemoveAbility(u, 'A0DM')
	call UnitRemoveAbility(u, 'A0CO')
	call UnitRemoveAbility(u, 'A0CQ')
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call PauseTimer(t)
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function JiuYang takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local timer t= CreateTimer()
 local real r= 0.
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	// 九阳加攻击
	call UnitAddAbility(u, 'A0DL')
	// 九阳加护甲
	call UnitAddAbility(u, 'A0DM')
	// 九阳加
	call UnitAddAbility(u, 'A0CO')
	call UnitAddAbilityBJ('A0CQ', u)
	call SetPlayerAbilityAvailableBJ(false, 'A0CQ', GetOwningPlayer(u))
	if GetSpellAbilityId() == 'A0DN' then
		set r=30
	elseif GetSpellAbilityId() == 'A01B' then
		set r=12
	elseif GetSpellAbilityId() == 'A01C' then
		set r=20
	elseif GetSpellAbilityId() == 'A01D' then
		set r=30
	endif
	call TimerStart(t, r, false, function JiuYang_End)
	set t=null
	set u=null
endfunction
//医疗篇
function IsYiLiao takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A0D4' ) )
endfunction
function YiLiaoPian takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
	call SetWidgetLife(uc, GetWidgetLife(u) + 20000)
	if isTitle(1 + GetPlayerId(GetOwningPlayer(u)) , 37) then
		call SetWidgetLife(uc, GetWidgetLife(u) + 380000)
	endif
	set u=null
	set uc=null
endfunction
//使用洗髓经
function QI takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 1093679152 ) and ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) ) ) // INLINED!!
endfunction
function RI takes nothing returns nothing
 local integer id= GetHandleId(GetTriggeringTrigger())
 local integer cx= LoadInteger(YDHT, id, - $3021938A)
	set cx=cx + 3
	call SaveInteger(YDHT, id, - $3021938A, cx)
	call SaveInteger(YDHT, id, - $1317DA19, cx)
	call SaveLocationHandle(YDHT, id * cx, $5E83114F, GetUnitLoc(GetTriggerUnit()))
	call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, $5E83114F), bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 1093679153)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 26.)
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D8)
	call FlushChildHashtable(YDHT, id * cx)
endfunction
function JiangHuNeiGong_Trigger takes nothing returns nothing
 local trigger t= null
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function JiuYin_Condition))
	call TriggerAddAction(t, function JiuYin_Action)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsJiuYang))
	call TriggerAddAction(t, function JiuYang)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsYiLiao))
	call TriggerAddAction(t, function YiLiaoPian)
	set bn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(bn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(bn, Condition(function uI))
	call TriggerAddAction(bn, function vI)
	set Cn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Cn, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(Cn, Condition(function xI))
	call TriggerAddAction(Cn, function AI)
	set cn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(cn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(cn, Condition(function BI))
	call TriggerAddAction(cn, function bI)
	set Dn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Dn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Dn, Condition(function cI))
	call TriggerAddAction(Dn, function DI)
	set En=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(En, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(En, Condition(function FI))
	call TriggerAddAction(En, function GI)
	// 双手被动
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function isShuangShouBeiDong))
	call TriggerAddAction(t, function shuangShouBeiDong)
	set Fn=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(Fn, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(Fn, Condition(function II))
	call TriggerAddAction(Fn, function lI)
	set In=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(In, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(In, Condition(function QI))
	call TriggerAddAction(In, function RI)
	// 特殊事件——辽国进攻
	set t=CreateTrigger()
	call TriggerRegisterTimerEventSingle(t, 2100.)
	call TriggerAddAction(t, function LiaoGuoJinGong)
	// 特殊事件——灵鹫宫进攻
	set t=CreateTrigger()
	call TriggerRegisterTimerEventSingle(t, 3000.)
	call TriggerAddAction(t, function LingJiuGongJinGong)
	set t=null
endfunction
function IsTiaoZhan takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I09O' and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) )
endfunction
function TiaoZhan takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if udg_tiaozhanguai != null then
		call DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFFF00挑战场正在使用中，请耐心等待")
		call AdjustPlayerStateBJ(100000, p, PLAYER_STATE_RESOURCE_GOLD)
	else
		if ( GetPlayerController(p) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING ) then
			call DialogClear(tiaozhanwho)
			call DialogSetMessage(tiaozhanwho, "请选择要挑战的对象")
			if udg_tiaodugu[i] == false and GetUnitLevel(u) >= 90 then
				set b_dugu=DialogAddButtonBJ(tiaozhanwho, "|cFF00CC00独孤求败")
			endif
			if udg_tiaoxuedao[i] == false and GetUnitLevel(u) >= 90 then
				set b_xuedaozu=DialogAddButtonBJ(tiaozhanwho, "|cFFCC0066血刀老祖")
			endif
			// and udg_runamen[i]==1
			if udg_tiaodamo[i] == false and GetUnitLevel(u) >= 90 then
				set b_damozushi=DialogAddButtonBJ(tiaozhanwho, "|cFFCC0066达摩祖师")
			endif
			if udg_tiaozhangsanfeng[i] == false and udg_runamen[i] == 9 and GetUnitLevel(u) >= 90 then
				set b_sanfeng=DialogAddButtonBJ(tiaozhanwho, "|cFFCC0066张三丰")
			endif
			set b_ronglianlaozu=DialogAddButtonBJ(tiaozhanwho, "|cFFFF6600冯默风")
			if GetUnitLevel(u) >= 90 then
				set b_zhucong=DialogAddButtonBJ(tiaozhanwho, "|cFFFF0000朱聪")
			endif
			set b_cancel=DialogAddButtonBJ(tiaozhanwho, "|cFFFFFF00取消")
			call DialogDisplayBJ(true, tiaozhanwho, p)
		endif
	endif
	set u=null
	set p=null
endfunction
function TiaoZhan_Action takes nothing returns nothing
 local location loc= Location(12156, - 12021)
 local player p= GetTriggerPlayer()
 local unit u= udg_hero[1 + GetPlayerId(p)]
	if GetClickedButton() == b_dugu then
		call CreateNUnitsAtLoc(1, 'n005', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	if GetClickedButton() == b_xuedaozu then
		call CreateNUnitsAtLoc(1, 'o01W', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	if GetClickedButton() == b_damozushi then
		call CreateNUnitsAtLoc(1, 'o024', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	// 点击挑战张三丰
	if GetClickedButton() == b_sanfeng then
		call CreateNUnitsAtLoc(1, 'o02R', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	if GetClickedButton() == b_ronglianlaozu then
		call CreateNUnitsAtLoc(1, 'o01V', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	if GetClickedButton() == b_zhucong then
		call CreateNUnitsAtLoc(1, 'n006', Player(12), loc, bj_UNIT_FACING)
		set udg_tiaozhanguai=bj_lastCreatedUnit
		call SetUnitPosition(u, 11459, - 12021)
		call PanCameraToTimedForPlayer(p, 11459, - 12021, 0)
	endif
	if GetClickedButton() == b_cancel then
		call AdjustPlayerStateBJ(100000, p, PLAYER_STATE_RESOURCE_GOLD)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set p=null
endfunction
function DiaoLuo takes nothing returns boolean
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetKillingUnit())) and ( GetUnitTypeId(GetTriggerUnit()) == 'n005' or GetUnitTypeId(GetTriggerUnit()) == 'o01W' or GetUnitTypeId(GetTriggerUnit()) == 'o01V' or GetUnitTypeId(GetTriggerUnit()) == 'n006' or GetUnitTypeId(GetTriggerUnit()) == 'o024' or GetUnitTypeId(GetTriggerUnit()) == 'o02R' or GetUnitTypeId(GetTriggerUnit()) == 'o01D' )
endfunction
function DiaoLuo_Action takes nothing returns nothing
 local location loc= GetUnitLoc(GetTriggerUnit())
 local integer i= 0
	// 挑战独孤求败，所有玩家只能打一次
	if GetUnitTypeId(GetTriggerUnit()) == 'n005' then
		call CreateItemLoc('I09Q', loc)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF00CC00" + GetPlayerName(GetOwningPlayer(GetKillingUnit())) + "杀死了独孤求败，获得了武魂石")
		//call SaveInteger(YDHT,GetHandleId(bj_lastCreatedItem),0,25000)
		set i=1
		loop
			exitwhen i >= 6
			set udg_tiaodugu[i]=true
			set i=i + 1
		endloop
		set udg_tiaozhanguai=null
		// 挑战血刀
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o01W' then
		call CreateItemLoc('I098', loc)
		// 打不过就没了
		call SaveInteger(YDHT, GetHandleId(bj_lastCreatedItem), 0, 25000)
		set udg_tiaoxuedao[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=true
		set udg_tiaozhanguai=null
		// 挑战达摩，打不过可以再打
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o024' then
		call CreateItemLoc('I0AL', loc)
		set udg_tiaodamo[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=true
		set udg_tiaozhanguai=null
		// 挑战张三丰，打不过可以再打
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o02R' then
		call CreateItemLoc('I0DK', loc)
		set udg_tiaozhangsanfeng[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=true
		set udg_tiaozhanguai=null
		// 挑战冯默风
	elseif GetUnitTypeId(GetTriggerUnit()) == 'o01V' then
		call CreateItemLoc('I09P', loc)
		set udg_tiaozhanguai=null
		// 挑战朱聪
	elseif GetUnitTypeId(GetTriggerUnit()) == 'n006' then
		if GetRandomInt(0, 100) <= 30 then
			call CreateItemLoc('I09Z', loc) // 通神
else
			call CreateItemLoc('I06K', loc) // 遗忘石
endif
		set udg_tiaozhanguai=null
	endif
	call RemoveLocation(loc)
	set loc=null
endfunction
//离开挑战区域挑战失败
function TiaoZhanShiBai takes nothing returns boolean
	return IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetLeavingUnit())) == MAP_CONTROL_USER and udg_tiaozhanguai != null
endfunction
function TiaoZhanShiBai_Action takes nothing returns nothing
 local unit u= GetLeavingUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	call DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFFF00离开区域，挑战失败")
	if GetUnitTypeId(udg_tiaozhanguai) == 'n005' then
		set udg_tiaodugu[i]=true
	endif
	// if GetUnitTypeId(udg_tiaozhanguai)=='o01W' then
	// 	set udg_tiaoxuedao[i]=true
	// endif
	call RemoveUnit(udg_tiaozhanguai)
	set udg_tiaozhanguai=null
	set u=null
	set p=null
endfunction
function TiaoZhan_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
 local integer i= 0
	set i=1
	loop
		exitwhen i >= 6
		set udg_tiaoxuedao[i]=false
		set udg_tiaodugu[i]=false
		set udg_tiaodamo[i]=false
		set udg_tiaozhangsanfeng[i]=false
		set i=i + 1
	endloop
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsTiaoZhan))
	call TriggerAddAction(t, function TiaoZhan)
	set t=CreateTrigger()
	call TriggerRegisterDialogEvent(t, tiaozhanwho)
	call TriggerAddAction(t, function TiaoZhan_Action)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function DiaoLuo))
	call TriggerAddAction(t, function DiaoLuo_Action)
	// 离开挑战区挑战失败
	set t=CreateTrigger()
	call YDWETriggerRegisterLeaveRectSimpleNull(t , udg_tiaozhanqu)
	call TriggerAddCondition(t, Condition(function TiaoZhanShiBai))
	call TriggerAddAction(t, function TiaoZhanShiBai_Action)
	set t=null
endfunction
 function s__DaPei_create takes integer wugongid,integer dapeixiaoguo returns integer
  local integer dpi
		set dpi=s__DaPei__allocate()
		set s__DaPei_wugongid[dpi]=wugongid
		set s__DaPei_dapeixiaoguo[dpi]=dapeixiaoguo
		if dapeixiaoguo == 1 then
			set s__DaPei_r[dpi]=GetRandomReal(1.0, 1.6)
		elseif dapeixiaoguo == 2 then
			set s__DaPei_r[dpi]=I2R(GetRandomInt(1, 13))
		elseif dapeixiaoguo == 3 then
			set s__DaPei_r[dpi]=GetRandomReal(1.4, 1.9)
		elseif dapeixiaoguo == 4 then
			set s__DaPei_r[dpi]=GetRandomReal(2.0, 3.0)
		endif
		return dpi
 endfunction
 function s__DaPei_onDestroy takes integer this returns nothing
		set s__DaPei_wugongid[this]=0
		set s__DaPei_dapeixiaoguo[this]=0
		set s__DaPei_shxishu[this]=0
 endfunction

//Generated destructor of DaPei
function s__DaPei_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__DaPei_V[this]!=-1) then
        return
    endif
    call s__DaPei_onDestroy(this)
    set si__DaPei_V[this]=si__DaPei_F
    set si__DaPei_F=this
endfunction
 function s__DaPei_XiaoGuo takes integer this,unit u,unit uc returns nothing
		if s__DaPei_dapeixiaoguo[this] != 2 then
			set s__DaPei_shxishu[this]=s__DaPei_r[this]
		else
			if GetRandomReal(1, 100) <= 13 then
				call WanBuff(u , uc , R2I(s__DaPei_r[this]))
			endif
		endif
 endfunction
 function s__DaPei_XiaoGuoShuoMing takes integer this returns string
  local string s= ""
		set s=s + "+" + GetAbilityName(s__DaPei_wugongid[this]) + "："
		if s__DaPei_dapeixiaoguo[this] != 2 then
			set s=s + "伤害+" + I2S(R2I(s__DaPei_r[this] * 100)) + "%"
		else
			if R2I(s__DaPei_r[this]) == 1 then
				set s=s + "几率造成内伤"
			elseif R2I(s__DaPei_r[this]) == 2 then
				set s=s + "几率造成走火入魔"
			elseif R2I(s__DaPei_r[this]) == 3 then
				set s=s + "几率造成流血"
			elseif R2I(s__DaPei_r[this]) == 4 then
				set s=s + "几率造成混乱"
			elseif R2I(s__DaPei_r[this]) == 5 then
				set s=s + "几率造成昏迷"
			elseif R2I(s__DaPei_r[this]) == 6 then
				set s=s + "几率造成重伤"
			elseif R2I(s__DaPei_r[this]) == 7 then
				set s=s + "几率造成血流不止"
			elseif R2I(s__DaPei_r[this]) == 8 then
				set s=s + "几率造成麻痹"
			elseif R2I(s__DaPei_r[this]) == 9 then
				set s=s + "几率造成破防"
			elseif R2I(s__DaPei_r[this]) == 10 then
				set s=s + "几率造成神经错乱"
			elseif R2I(s__DaPei_r[this]) == 11 then
				set s=s + "几率造成封穴"
			elseif R2I(s__DaPei_r[this]) == 12 then
				set s=s + "几率造成穴位全封"
			elseif R2I(s__DaPei_r[this]) == 13 then
				set s=s + "几率造成中毒"
			endif
		endif
		return s
 endfunction
 function s__ZiZhiWuGong_create takes integer xishu,integer range,integer texiao,integer dapeishu,integer scrate returns integer
  local integer zz
		set zz=s__ZiZhiWuGong__allocate()
		set s__ZiZhiWuGong_xishu[zz]=xishu
		set s__ZiZhiWuGong_range[zz]=range
		set s__ZiZhiWuGong_texiao[zz]=texiao
		set s__ZiZhiWuGong_dapeishu[zz]=dapeishu
		set s__ZiZhiWuGong_scrate[zz]=scrate
		return zz
 endfunction
 function s__ZiZhiWuGong_onDestroy takes integer this returns nothing
		set s__ZiZhiWuGong_xishu[this]=0
		set s__ZiZhiWuGong_range[this]=0
		set s__ZiZhiWuGong_texiao[this]=0
		set s__ZiZhiWuGong_dapeishu[this]=0
		set s__ZiZhiWuGong_scrate[this]=0
 endfunction

//Generated destructor of ZiZhiWuGong
function s__ZiZhiWuGong_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__ZiZhiWuGong_V[this]!=-1) then
        return
    endif
    call s__ZiZhiWuGong_onDestroy(this)
    set si__ZiZhiWuGong_V[this]=si__ZiZhiWuGong_F
    set si__ZiZhiWuGong_F=this
endfunction
function IsZiZhi takes nothing returns boolean
	return ( GetRandomReal(0., 100) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] / 5 ) and ( GetUnitAbilityLevel(GetAttacker(), 'A036') >= 1 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) )
endfunction
function ZiZhiShangHai_Condition takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function ZiZhiShangHai_Action takes nothing returns nothing
 local unit u= GetAttacker()
 local unit uc=GetEnumUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 1
 local location loc= GetUnitLoc(u)
 local real shxishu= ( 1. + I2R(juexuelingwu[i]) / 3 )
 local real shanghai=0.
	loop
		exitwhen j > s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]
		if GetUnitAbilityLevel(u, s__DaPei_wugongid[dapei[i * 20 + j]]) >= 1 then
			call s__DaPei_XiaoGuo(dapei[i * 20 + j],u , uc)
			//call BJDebugMsg(R2S(dapei[i*10+j].shxishu))
			set shxishu=shxishu + s__DaPei_shxishu[dapei[i * 20 + j]]
		endif
		set j=j + 1
	endloop
	set shxishu=shxishu * ( 1. + 0.3 * I2R(s__ZiZhiWuGong_xishu[zizhiwugong[i]]) )
	set shanghai=ShangHaiGongShi(u , uc , 25. , 25. , shxishu , 'A036')
	call CreateTextTagLocBJ(s__ZiZhiWuGong_name[zizhiwugong[i]], loc, 0, 14., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
	call Nw(3 , bj_lastCreatedTextTag)
    call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 50., 90)
	call AddSpecialEffectTargetUnitBJEx("overhead" , uc , lh_texiao[s__ZiZhiWuGong_texiao[zizhiwugong[i]]])
	call DestroyEffect((GetLastCreatedEffectBJ())) // INLINED!!
	call WuGongShangHai(u , uc , shanghai)
	call RemoveLocation(loc)
	set loc=null
	set uc=null
	set u=null
	set p=null
endfunction
function ZiZhi takes nothing returns nothing
 local group g=CreateGroup()
 local unit u= GetAttacker()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer zz= zizhiwugong[i]
	call WuGongShengChong(u , 'A036' , 1000. - I2R(s__ZiZhiWuGong_scrate[zz]) * 100.)
	call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 400. + 100. * I2R(s__ZiZhiWuGong_range[zz]), Condition(function ZiZhiShangHai_Condition))
    call ForGroupBJ(g, function ZiZhiShangHai_Action)
    call GroupClear(g)
    call DestroyGroup(g)
    set g=null
    set u=null
    set p=null
endfunction
function IsAllocateWuXueDian takes nothing returns boolean
	return ( (IsUnitType((GetTriggerUnit() ), ( UNIT_TYPE_HERO)) != null) and ( GetItemTypeId(GetManipulatedItem()) == 'I0BN' or GetItemTypeId(GetManipulatedItem()) == 'I0BI' or GetItemTypeId(GetManipulatedItem()) == 'I0BJ' or GetItemTypeId(GetManipulatedItem()) == 'I0BK' or GetItemTypeId(GetManipulatedItem()) == 'I0BL' ) ) // INLINED!!
endfunction
function AllocateWuXueDian takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 'I0BN' then
		if zizhibool[i] then
			call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠已有自创武功|r\n")
		else
			if xiuxing[i] < 5 then
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠等级到历练5之后再来吧|r\n")
			else
				set L7[i]=1
				loop
					exitwhen L7[i] >= wugongshu[i] + 1
					if ( I7[( i - 1 ) * 20 + L7[i]] != 'AEfk' ) then
						if L7[i] == wugongshu[i] then
							call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠，你学的武功太多了，遗忘一些再来自创吧|r\n")
							exitwhen true
						endif
					else
						call UnitAddAbility(u, 'A036')
						set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A036'
						call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" + GetPlayerName(p) + "自创武功成功")
						set zizhibool[i]=true
						exitwhen true
					endif
					set L7[i]=L7[i] + 1
				endloop
			endif
		endif
	else
		if wuxuedian[i] >= 1 then
			set wuxuedian[i]=wuxuedian[i] - 1
			if GetItemTypeId(GetManipulatedItem()) == 'I0BI' then
				set s__ZiZhiWuGong_xishu[zizhiwugong[i]]=s__ZiZhiWuGong_xishu[zizhiwugong[i]] + 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至伤害系数|r\n")
			endif
			if GetItemTypeId(GetManipulatedItem()) == 'I0BJ' then
				if s__ZiZhiWuGong_range[zizhiwugong[i]] >= 26 then
					set wuxuedian[i]=wuxuedian[i] + 1
					call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠武功范围已达上限|r\n")
				else
					set s__ZiZhiWuGong_range[zizhiwugong[i]]=s__ZiZhiWuGong_range[zizhiwugong[i]] + 1
					call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至武功范围|r\n")
				endif
			endif
			if GetItemTypeId(GetManipulatedItem()) == 'I0BK' then
				set s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]=s__ZiZhiWuGong_dapeishu[zizhiwugong[i]] + 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至武学搭配|r\n")
				if GetRandomInt(1, 10) <= 7 then
					set dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]]=s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(1, 18), 2) , GetRandomInt(1, 2))
				else
					if GetRandomInt(1, 3) <= 2 then
						set dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]]=s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(19, 28), 2) , 3)
					else
						set dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]]=s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(29, 41), 2) , 4)
					endif
				endif
			endif
			if GetItemTypeId(GetManipulatedItem()) == 'I0BL' then
				set s__ZiZhiWuGong_scrate[zizhiwugong[i]]=s__ZiZhiWuGong_scrate[zizhiwugong[i]] + 1
				call DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至升重速率|r\n")
			endif
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 30., "|cff66ff00自创武学点不足")
		endif
	endif
	set u=null
	set p=null
endfunction
function ZiZhi_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	set lh_texiao[1]="Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl"
	set lh_texiao[2]="Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"
	set lh_texiao[3]="Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"
	set lh_texiao[4]="Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl"
	set lh_texiao[5]="Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"
	set lh_texiao[6]="Abilities\\Spells\\Human\\Brilliance\\Brilliance.mdl"
	set lh_texiao[7]="Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
	set lh_texiao[8]="Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"
	set lh_texiao[9]="Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl"
	set lh_texiao[10]="Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl"
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsZiZhi))
	call TriggerAddAction(t, function ZiZhi)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsAllocateWuXueDian))
	call TriggerAddAction(t, function AllocateWuXueDian)
	set t=null
endfunction
//金刚伏魔圈
function IsJinGangFuMo takes nothing returns boolean
	return GetSpellAbilityId() == 'A039'
endfunction
function IsFuMoEnemy takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), Player(0)) and UnitHasBuffBJ(GetFilterUnit(), 'BHds') == false and GetUnitAbilityLevel(GetFilterUnit(), 'Avul') < 1 )
endfunction
//--渡劫鞭法
function JinGang_DuJie takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 2)
 local location loc= LoadLocationHandle(YDHT, GetHandleId(t), 3)
 local unit l__ut= null
 local group g= CreateGroup()
	call GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(function IsFuMoEnemy))
	set l__ut=GroupPickRandomUnit(g)
	if i - i / 3 * 3 == 0 then
		call ShowUnitShow(u)
		call IssueTargetOrderById(u, $D0200, l__ut)
		call AddSpecialEffectEx("war3mapImported\\ChaosExplosion.mdl" , GetUnitX(l__ut) , GetUnitY(l__ut))
	else
		call ShowUnitHide(u)
	endif
	call SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call RemoveLocation(loc)
	endif
	call DestroyGroup(g)
	set u=null
	set t=null
	set l__ut=null
	set loc=null
	set g=null
endfunction
//--渡厄鞭法
function JinGang_DuE takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 2)
 local location loc= LoadLocationHandle(YDHT, GetHandleId(t), 3)
 local unit l__ut= null
 local group g= CreateGroup()
	call GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(function IsFuMoEnemy))
	set l__ut=GroupPickRandomUnit(g)
	if i - i / 3 * 3 == 1 then
		call ShowUnitShow(u)
		call IssueTargetOrderById(u, $D0200, l__ut)
		call AddSpecialEffectEx("war3mapImported\\FireStomp.mdx" , GetUnitX(l__ut) , GetUnitY(l__ut))
	else
		call ShowUnitHide(u)
	endif
	call SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call RemoveLocation(loc)
	endif
	call DestroyGroup(g)
	set u=null
	set t=null
	set l__ut=null
	set loc=null
	set g=null
endfunction
//--渡难鞭法
function JinGang_DuNan takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 2)
 local location loc= LoadLocationHandle(YDHT, GetHandleId(t), 3)
 local unit l__ut= null
 local group g= CreateGroup()
	call GroupEnumUnitsInRangeOfLoc(g, loc, 350, Condition(function IsFuMoEnemy))
	set l__ut=GroupPickRandomUnit(g)
	if i - i / 3 * 3 == 2 then
		call ShowUnitShow(u)
		call IssueTargetOrderById(u, $D0200, l__ut)
		call AddSpecialEffectEx("war3mapImported\\FireStomp.mdx" , GetUnitX(l__ut) , GetUnitY(l__ut))
	else
		call ShowUnitHide(u)
	endif
	call SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
		call RemoveLocation(loc)
	endif
	call DestroyGroup(g)
	set u=null
	set t=null
	set l__ut=null
	set loc=null
	set g=null
endfunction
//不能出伏魔圈
function FuMoBuNengChu takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local location loc= LoadLocationHandle(YDHT, GetHandleId(t), 1)
 local integer i= LoadInteger(YDHT, GetHandleId(t), 2)
 local location loc2= GetUnitLoc(u)
	if i < 500 then
		if DistanceBetweenPoints(loc2, loc) > 250 then
			call SetUnitX(u, GetLocationX(loc) + GetRandomReal(- 250., 250.) * CosBJ(AngleBetweenPoints(loc, loc2)))
			call SetUnitY(u, GetLocationY(loc) + GetRandomReal(- 250., 250.) * SinBJ(AngleBetweenPoints(loc, loc2)))
			if ( ModuloInteger(GetUnitPointValue(u), 100) == 0 ) then
				call percentDamage(GetEnumUnit() , 50 , false)
			else
				call percentDamage(GetEnumUnit() , 15 , false)
			endif
		endif
		call SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	else
		call RemoveLocation(loc)
		call PauseTimer(t)
		call DestroyTimer(t)
		call FlushChildHashtable(YDHT, GetHandleId(t))
	endif
	call RemoveLocation(loc2)
	set t=null
	set u=null
	set loc=null
	set loc2=null
endfunction
function FuMoQuan takes nothing returns nothing
 local unit l__ut= GetEnumUnit()
 local unit u= GetTriggerUnit()
 local location loc= LoadLocationHandle(YDHT, GetHandleId(u), StringHash("伏魔"))
 local timer t= CreateTimer()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, l__ut)
	call SaveLocationHandle(YDHT, GetHandleId(t), 1, loc)
	call TimerStart(t, 0.03, true, function FuMoBuNengChu)
	set t=null
	set u=null
	set l__ut=null
	set loc=null
endfunction
function FuMoTeXiao takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local location loc= LoadLocationHandle(YDHT, GetHandleId(t), 0)
	call YDWETimerDestroyEffect(15. , AddSpecialEffectLocEx("war3mapImported\\kineticfield_fx_stand.mdx" , loc))
	set t=null
	set loc=null
endfunction
function JinGangFuMo takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetSpellTargetUnit()
 local location loc= GetUnitLoc(uc)
 local location loc1= pu(loc , 325 , 90)
 local location loc2= pu(loc , 325 , 210)
 local location loc3= pu(loc , 325 , 330)
 local group g= CreateGroup()
 local timer tt1= CreateTimer()
 local timer tt2= CreateTimer()
 local timer tt3= CreateTimer()
 local timer tt4= CreateTimer()
	//伏魔圈
	call GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(function IsFuMoEnemy))
	call SaveLocationHandle(YDHT, GetHandleId(u), StringHash("伏魔"), loc)
	call YDWETimerDestroyEffect(1.2 , AddSpecialEffectLocEx("war3mapImported\\kineticfield_fx_start.mdx" , loc))
	call SaveLocationHandle(YDHT, GetHandleId(tt4), 0, loc)
	call TimerStart(tt4, 1.2, false, function FuMoTeXiao)
	call ForGroupBJ(g, function FuMoQuan)
	//渡劫
	call CreateNUnitsAtLoc(1, 'e017', GetOwningPlayer(u), loc1, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03A')
	call SaveUnitHandle(YDHT, GetHandleId(tt1), 0, bj_lastCreatedUnit)
	call SaveUnitHandle(YDHT, GetHandleId(tt1), 1, uc)
	call SaveLocationHandle(YDHT, GetHandleId(tt1), 3, loc)
	call TimerStart(tt1, 1, true, function JinGang_DuJie)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	//渡厄
    call CreateNUnitsAtLoc(1, 'e016', GetOwningPlayer(u), loc2, bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03B')
	call SaveUnitHandle(YDHT, GetHandleId(tt2), 0, bj_lastCreatedUnit)
	call SaveUnitHandle(YDHT, GetHandleId(tt2), 1, uc)
	call SaveLocationHandle(YDHT, GetHandleId(tt2), 3, loc)
	call TimerStart(tt2, 1, true, function JinGang_DuE)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	//渡难
    call CreateNUnitsAtLoc(1, 'e018', GetOwningPlayer(u), loc3, bj_UNIT_FACING)
    call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03C')
	call SaveUnitHandle(YDHT, GetHandleId(tt3), 0, bj_lastCreatedUnit)
	call SaveUnitHandle(YDHT, GetHandleId(tt3), 1, uc)
	call SaveLocationHandle(YDHT, GetHandleId(tt3), 3, loc)
	call TimerStart(tt3, 1, true, function JinGang_DuNan)
    call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 15.)
	call RemoveLocation(loc)
    call RemoveLocation(loc1)
    call RemoveLocation(loc2)
    call RemoveLocation(loc3)
    set u=null
    set uc=null
    set loc=null
    set loc1=null
    set loc2=null
    set loc3=null
    set tt1=null
    set tt2=null
    set tt3=null
    set tt4=null
    set g=null
endfunction
//伏魔圈伤害
function IsFuMoShangHai takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'e017' or GetUnitTypeId(GetEventDamageSource()) == 'e016' or GetUnitTypeId(GetEventDamageSource()) == 'e018'
endfunction
function FuMoShangHai takes nothing returns nothing
 local unit uc= GetTriggerUnit()
	call percentDamage(uc , 10 , true)
	
    set uc=null
endfunction
// 唐门：九宫八卦阵
function IsJiuGongBaGua takes nothing returns boolean
	return GetSpellAbilityId() == 'A0B3'
endfunction
function JiuGongBaGua_Condition takes nothing returns boolean
    return IsUnitEnemy(GetFilterUnit(), Player(0)) and GetUnitAbilityLevel(GetFilterUnit(), 'Avul') == 0 and IsUnitAliveBJ(GetFilterUnit())
endfunction
function JiuGongBaGua_Action takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local real x= LoadReal(YDHT, GetHandleId(t), 0)
    local real y= LoadReal(YDHT, GetHandleId(t), 1)
    local real range= LoadReal(YDHT, GetHandleId(t), 2)
    local integer j= LoadInteger(YDHT, GetHandleId(t), 3)
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 4)
    local unit dummy= null
    local unit target= null
    local group g= null
    local integer i= 1
    local integer jmax= 50
    if j > jmax then
        call clearTimer(t)
    else
        call SaveInteger(YDHT, GetHandleId(t), 3, j + 1)
        loop
            exitwhen i > 8
            set dummy=CreateUnit(GetOwningPlayer(u), 'e000', x + range * CosBJ(45 * i), y + range * SinBJ(45 * i), 270 + 45 * i)
            set g=CreateGroup()
            call GroupEnumUnitsInRange(g, GetUnitX(dummy), GetUnitY(dummy), range + 200, Condition(function JiuGongBaGua_Condition))
            set target=GroupPickRandomUnit(g)
            call ShowUnitHide(dummy)
            call UnitAddAbility(dummy, 'A09B')
            call IssueTargetOrderById(dummy, $D007F, target)
            call UnitApplyTimedLife(dummy, 'BHwe', 3)
            call DestroyGroup(g)
            set i=i + 1
        endloop
    endif
    set g=null
    set u=null
    set dummy=null
    set t=null
    set target=null
endfunction
function attackPeriodicly takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
    if GetUnitState(u, UNIT_STATE_LIFE) > 0 then
        call SetUnitAnimation(u, "attack")
    else
        call clearTimer(t)
    endif
    set t=null
    set u=null
endfunction
function JiuGongBaGua takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local unit dummy= null
    local integer id= 0
    local integer i= 1
    local real range= GetRandomReal(500, 800)
    local timer t= CreateTimer()
    local timer tt= null
	set id=getHeroDummyId(GetUnitTypeId(u))
    loop
        exitwhen i > 8
        set dummy=CreateUnit(GetOwningPlayer(u), id, GetUnitX(u) + range * CosBJ(45 * i), GetUnitY(u) + range * SinBJ(45 * i), 45 * i)
        call YDWETimerDestroyLightning(15. , AddLightning("MFPB", true, GetUnitX(u) + range * CosBJ(45 * i), GetUnitY(u) + range * SinBJ(45 * i), GetUnitX(u) + range * CosBJ(45 * i + 45), GetUnitY(u) + range * SinBJ(45 * i + 45)))
        call h__SetUnitMoveSpeed(dummy, 0)
        set tt=CreateTimer()
        call SaveUnitHandle(YDHT, GetHandleId(tt), 0, dummy)
        call TimerStart(tt, 1, true, function attackPeriodicly)
        call SetUnitVertexColorBJ(dummy, GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 80.), GetRandomReal(20., 60.))
        call UnitAddAbility(dummy, 'Aloc')
        call UnitApplyTimedLife(dummy, 1112045413, 15.)
        set i=i + 1
    endloop
    call SaveReal(YDHT, GetHandleId(t), 0, GetUnitX(u))
    call SaveReal(YDHT, GetHandleId(t), 1, GetUnitY(u))
    call SaveReal(YDHT, GetHandleId(t), 2, range)
    call SaveInteger(YDHT, GetHandleId(t), 3, 0)
    call SaveUnitHandle(YDHT, GetHandleId(t), 4, u)
    call TimerStart(t, 0.3, true, function JiuGongBaGua_Action)
    set dummy=null
    set u=null
    set t=null
    set tt=null
endfunction
//十八罗汉阵
//真武七截阵
function IsZhenWuQiJie takes nothing returns boolean
	return GetSpellAbilityId() == 'A03J'
endfunction
function ZhenWuQiJieZhen takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local location tianji= GetUnitLoc(u)
 local location tianxuan= Location(GetUnitX(u) - 500, GetUnitY(u) - 100)
 local location tianshu= Location(GetUnitX(u) + 500, GetUnitY(u) + 100)
 local location tianquan= Location(GetUnitX(u), GetUnitY(u) + 300)
 local location yuheng= Location(GetUnitX(u), GetUnitY(u) - 500)
 local location kaiyang= Location(GetUnitX(u) + 500, GetUnitY(u) - 500)
 local location yaoguang= Location(GetUnitX(u) + 500, GetUnitY(u) - 300)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, tianji, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, tianxuan, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, tianshu, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, tianquan, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, yuheng, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, kaiyang, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02G', p, yaoguang, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03K')
	call Gw(10. , bj_lastCreatedUnit)
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", kaiyang, yaoguang))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", yuheng, kaiyang))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianji, yuheng))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianquan, tianji))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianxuan, tianji))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianji, tianshu))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , tianji))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , tianxuan))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , tianquan))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , tianshu))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , yuheng))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , kaiyang))
	call YDWETimerDestroyEffect(7. , AddSpecialEffectLocEx("war3mapImported\\divinering.mdx" , yaoguang))
	call RemoveLocation(tianji)
	call RemoveLocation(tianxuan)
	call RemoveLocation(tianquan)
	call RemoveLocation(tianshu)
	call RemoveLocation(yuheng)
	call RemoveLocation(kaiyang)
	call RemoveLocation(yaoguang)
	set u=null
	set p=null
	set tianji=null
	set tianxuan=null
	set tianshu=null
	set tianquan=null
	set yuheng=null
	set kaiyang=null
	set yaoguang=null
endfunction
function IsZhenWuShangHai takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'o02G'
endfunction
function ZhenWuShangHai takes nothing returns nothing
 local integer i=1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u=udg_hero[i]
    local unit uc=GetTriggerUnit()
    local real shxishu=1. + I2R(juexuelingwu[i])
    local real shanghai=0.
    set shanghai=ShangHaiGongShi(u , uc , 3000. , 3000. , shxishu , 'A03J')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//天罡北斗阵
function IsTianGangBeiDou takes nothing returns boolean
	return GetSpellAbilityId() == 'A03G'
endfunction
function TianGangBeiDouZhen takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local location tianji= GetUnitLoc(u)
 local location tianxuan= Location(GetUnitX(u) + 300, GetUnitY(u) - 50)
 local location tianshu= Location(GetUnitX(u) + 500, GetUnitY(u) + 250)
 local location tianquan= Location(GetUnitX(u) - 50, GetUnitY(u) + 300)
 local location yuheng= Location(GetUnitX(u) - 300, GetUnitY(u) + 500)
 local location kaiyang= Location(GetUnitX(u) - 500, GetUnitY(u) + 700)
 local location yaoguang= Location(GetUnitX(u) - 800, GetUnitY(u) + 700)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, tianji, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, tianxuan, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, tianshu, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, tianquan, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, yuheng, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, kaiyang, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call CreateNUnitsAtLocFacingLocBJ(1, 'o02F', p, yaoguang, tianji)
	call UnitAddAbility(bj_lastCreatedUnit, 'A03I')
	call Gw(10. , bj_lastCreatedUnit)
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", yaoguang, kaiyang))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", kaiyang, yuheng))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", yuheng, tianquan))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianquan, tianji))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianji, tianxuan))
	call YDWETimerDestroyLightning(10. , AddLightningLoc("SPLK", tianxuan, tianshu))
	call RemoveLocation(tianji)
	call RemoveLocation(tianxuan)
	call RemoveLocation(tianquan)
	call RemoveLocation(tianshu)
	call RemoveLocation(yuheng)
	call RemoveLocation(kaiyang)
	call RemoveLocation(yaoguang)
	set u=null
	set p=null
	set tianji=null
	set tianxuan=null
	set tianshu=null
	set tianquan=null
	set yuheng=null
	set kaiyang=null
	set yaoguang=null
endfunction
function TianGangEnemy takes nothing returns boolean
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function TianGangSha takes nothing returns nothing
 local unit u= GetAttacker()
 local location loc= GetUnitLoc(u)
 local group g= CreateGroup()
 local group gg2= CreateGroup()
 local unit l__ut= null
 local integer i= 1
 local integer imax= 0
	call GroupEnumUnitsInRangeOfLoc(g, loc, 600, Condition(function TianGangEnemy))
	set imax=CountUnitsInGroup(g)
	if imax >= 1 then
		set i=1
		loop
			exitwhen i > imax
			set l__ut=FirstOfGroup(g)
			if GetUnitAbilityLevel(l__ut, 'A03I') != 0 then
				call GroupAddUnit(gg2, l__ut)
			endif
			call GroupRemoveUnit(g, l__ut)
			set i=i + 1
		endloop
	endif
	set imax=CountUnitsInGroup(gg2)
	if imax >= 1 then
		set i=1
		loop
			exitwhen i > imax
			set l__ut=FirstOfGroup(gg2)
			call IssueTargetOrderById(l__ut, $D0097, u)
			call GroupRemoveUnit(gg2, l__ut)
			set i=i + 1
		endloop
	endif
	call RemoveLocation(loc)
	call DestroyGroup(g)
	call DestroyGroup(gg2)
	set u=null
	set l__ut=null
	set loc=null
	set g=null
	set gg2=null
endfunction
function IsTianGangShangHai takes nothing returns boolean
	return GetUnitTypeId(GetEventDamageSource()) == 'o02F'
endfunction
function TianGangShangHai takes nothing returns nothing
 local integer i=1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
 local unit u=udg_hero[i]
    local unit uc=GetTriggerUnit()
    local real shxishu=1. + I2R(juexuelingwu[i])
    local real shanghai=0.
    set shanghai=ShangHaiGongShi(u , uc , 3000. , 3000. , shxishu , 'A03G')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//打狗阵
//杀狗阵
//二十八星宿阵
//六脉剑阵
//天罗地网阵
//修习阵法
function IsXueZhenFa takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I0BY' or GetItemTypeId(GetManipulatedItem()) == 'I0BZ' or GetItemTypeId(GetManipulatedItem()) == 'I0C0' or GetItemTypeId(GetManipulatedItem()) == 'I0C1' or GetItemTypeId(GetManipulatedItem()) == 'I0ER'
endfunction
function XueZhenFa takes nothing returns nothing
 local integer id= GetItemTypeId(GetManipulatedItem())
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local integer j= 0
	if (IsUnitType((u ), ( UNIT_TYPE_HERO)) != null) == false then // INLINED!!
		call DisplayTextToPlayer(p, 0, 0, "|cff00FF66侠侣不能修行阵法")
	else
		if id == 'I0C1' then
			if GetUnitAbilityLevel(u, 'A03J') != 0 then
				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 9) - 1)])) != 0) and GetUnitAbilityLevel(u, 'A08R') == 9 then // INLINED!!
					set j=1
		        	loop
		        	exitwhen j > wugongshu[i]
		        	    if ( I7[( i - 1 ) * 20 + j] ) != 'AEfk' then
			    	        if j == wugongshu[i] then
		        	        	call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
		        	    	endif
		        	    else
			    	        call UnitAddAbility(u, 'A03J')
    	    				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName('A03J'))
    	    				set L7[i]=1
    	    				loop
    	    				    exitwhen L7[i] > wugongshu[i]
    	    				    if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
    	    				    else
    	    				        set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A03J'
    	    				        exitwhen true
    	    				    endif
    	    				    set L7[i]=L7[i] + 1
    	    				endloop
    	    				exitwhen true
	    				endif
	    				set j=j + 1
	    			endloop
	    		else
	    			call DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
    			endif
    		endif
    	elseif id == 'I0BZ' then
			if GetUnitAbilityLevel(u, 'A039') != 0 then
				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 1) - 1)])) != 0) and GetUnitAbilityLevel(u, 'A05K') == 9 then // INLINED!!
					set j=1
		        	loop
		        	exitwhen j > wugongshu[i]
		        	    if ( I7[( i - 1 ) * 20 + j] ) != 'AEfk' then
			    	        if j == wugongshu[i] then
		        	        	call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
		        	    	endif
		        	    else
			    	        call UnitAddAbility(u, 'A039')
    	    				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName('A039'))
    	    				set L7[i]=1
    	    				loop
    	    				    exitwhen L7[i] > wugongshu[i]
    	    				    if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
    	    				    else
    	    				        set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A039'
    	    				        exitwhen true
    	    				    endif
    	    				    set L7[i]=L7[i] + 1
    	    				endloop
    	    				exitwhen true
	    				endif
	    				set j=j + 1
	    			endloop
	    		else
	    			call DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
    			endif
    		endif
    	elseif id == 'I0C0' then
			if GetUnitAbilityLevel(u, 'A03F') != 0 then
				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 2) - 1)])) != 0) and GetUnitAbilityLevel(u, 'A09M') == 9 then // INLINED!!
					set j=1
		        	loop
		        	exitwhen j > wugongshu[i]
		        	    if ( I7[( i - 1 ) * 20 + j] ) != 'AEfk' then
			    	        if j == wugongshu[i] then
		        	        	call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
		        	    	endif
		        	    else
			    	        call UnitAddAbility(u, 'A03F')
    	    				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName('A03F'))
    	    				set L7[i]=1
    	    				loop
    	    				    exitwhen L7[i] > wugongshu[i]
    	    				    if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
    	    				    else
    	    				        set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A03F'
    	    				        exitwhen true
    	    				    endif
    	    				    set L7[i]=L7[i] + 1
    	    				endloop
    	    				exitwhen true
	    				endif
	    				set j=j + 1
	    			endloop
	    		else
	    			call DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
    			endif
    		endif
    	elseif id == 'I0BY' then
			if GetUnitAbilityLevel(u, 'A03G') != 0 then
				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 5) - 1)])) != 0) and GetUnitAbilityLevel(u, 'A0CM') == 9 then // INLINED!!
					set j=1
		        	loop
		        	exitwhen j > wugongshu[i]
		        	    if ( I7[( i - 1 ) * 20 + j] ) != 'AEfk' then
			    	        if j == wugongshu[i] then
		        	        	call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
		        	    	endif
		        	    else
			    	        call UnitAddAbility(u, 'A03G')
    	    				call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName('A03G'))
    	    				set L7[i]=1
    	    				loop
    	    				    exitwhen L7[i] > wugongshu[i]
    	    				    if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
    	    				    else
    	    				        set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A03G'
    	    				        exitwhen true
    	    				    endif
    	    				    set L7[i]=L7[i] + 1
    	    				endloop
    	    				exitwhen true
	    				endif
	    				set j=j + 1
	    			endloop
	    		else
	    			call DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
    			endif
    		endif
    	elseif id == 'I0ER' then
            if GetUnitAbilityLevel(u, 'A03G') != 0 then
                call DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
            else
                if (YDWEBitwise_AND(chief[(i )] , ((1 ) * YDWEBitwise__C2[( ( 20) - 1)])) != 0) and GetUnitAbilityLevel(u, 'A09A') == 9 then // 唐门门主、漫天飞花达到9级 // INLINED!!
set j=1
                    loop
                    exitwhen j > wugongshu[i]
                        if ( I7[( i - 1 ) * 20 + j] ) != 'AEfk' then
                            if j == wugongshu[i] then
                                call DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
                            endif
                        else
                            call UnitAddAbility(u, 'A0B3')
                            call DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" + GetObjectName('A0B3'))
                            set L7[i]=1
                            loop
                                exitwhen L7[i] > wugongshu[i]
                                if ( ( I7[( ( ( i - 1 ) * 20 ) + L7[i] )] != 'AEfk' ) ) then
                                else
                                    set I7[( ( ( i - 1 ) * 20 ) + L7[i] )]='A0B3'
                                    exitwhen true
                                endif
                                set L7[i]=L7[i] + 1
                            endloop
                            exitwhen true
                        endif
                        set j=j + 1
                    endloop
                else
                    call DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
                endif
            endif
		endif
	endif
	set u=null
	set p=null
endfunction
//事件
function ZhenFa_Trigger takes nothing returns nothing
 local trigger t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsJinGangFuMo))
    call TriggerAddAction(t, function JinGangFuMo)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsFuMoShangHai))
    call TriggerAddAction(t, function FuMoShangHai)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsTianGangBeiDou))
    call TriggerAddAction(t, function TianGangBeiDouZhen)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	//call TriggerAddCondition(t,Condition(function HaveTianGang))
	call TriggerAddAction(t, function TianGangSha)
	set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsTianGangShangHai))
    call TriggerAddAction(t, function TianGangShangHai)
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsZhenWuQiJie))
    call TriggerAddAction(t, function ZhenWuQiJieZhen)
    set t=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(t)
    call TriggerAddCondition(t, Condition(function IsZhenWuShangHai))
    call TriggerAddAction(t, function ZhenWuShangHai)
    // 唐门：九宫八卦阵
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Condition(function IsJiuGongBaGua))
    call TriggerAddAction(t, function JiuGongBaGua)
    set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsXueZhenFa))
	call TriggerAddAction(t, function XueZhenFa)
    set t=null
endfunction
//寒冰真气
function IsHanBingZhenQi takes nothing returns boolean
	return GetSpellAbilityId() == 'A03L'
endfunction
function HanBingZhenQi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local player p= GetOwningPlayer(u)
 local location loc= GetUnitLoc(l__ut)
	call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A038')
	if GetUnitAbilityLevel(u, 'A07T') != 0 or GetUnitAbilityLevel(u, 'A07Q') != 0 then
		call SetUnitAbilityLevel(bj_lastCreatedUnit, 'A038', 3)
	endif
	if GetUnitAbilityLevel(u, 'A0DN') != 0 or GetUnitAbilityLevel(u, 'A07O') != 0 then
		call IncUnitAbilityLevel(bj_lastCreatedUnit, 'A038')
	endif
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0101, l__ut)
	call RemoveLocation(loc)
	set u=null
	set l__ut=null
	set p=null
	set loc=null
endfunction
//百步神拳
//无相劫指
function IsWuXiangJieZhi takes nothing returns boolean
	return GetSpellAbilityId() == 'A03P'
endfunction
function WuXiangTimeOut takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	call UnitRemoveAbility(u, 'A03M')
	call PauseTimer(t)
	call DestroyTimer(t)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	set u=null
	set t=null
endfunction
function WuXiangJieZhi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local timer t= CreateTimer()
	call UnitAddAbility(u, 'A03M')
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, 3600, false, function WuXiangTimeOut)
	set u=null
	set t=null
endfunction
function IsWuXiangShangHai takes nothing returns boolean
	return GetEventDamage() == 1.58
endfunction
function WuXiangShangHai takes nothing returns nothing
 local unit l__ut= GetEventDamageSource()
 local unit uc= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(l__ut))
 local unit u= udg_hero[i]
 local real shxishu= 1.
 local real shanghai= 0.
	if GetUnitAbilityLevel(u, 'A06H') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	if GetUnitAbilityLevel(u, 'A07O') >= 1 then
		set shxishu=shxishu + 0.6
	endif
	// 寒冰真气减速效果
	if UnitHasBuffBJ(uc, 'Bfro') then
		set shxishu=shxishu * 3
	endif
	if isTitle(i , 3) then // 大轮明王
set shxishu=shxishu * 5
	endif
	set shxishu=shxishu * ( 1. + I2R(danpo[i]) / 20 + I2R(juexuelingwu[i]) )
	set shanghai=ShangHaiGongShi(u , uc , 15 , 18 , shxishu , 'A03P')
	call WuGongShangHai(u , uc , shanghai)
	if GetUnitAbilityLevel(u, 'A06P') >= 1 and GetRandomInt(1, 100) <= 8 then
		call WanBuff(u , uc , 11)
	endif
	set u=null
	set uc=null
	set l__ut=null
endfunction
//神行百变
function IsShenXingBaiBian takes nothing returns boolean
	return ( ( GetSpellAbilityId() == 'A03N' ) )
endfunction
function ShenXingBaiBian_2 takes nothing returns nothing
 local trigger t= GetTriggeringTrigger()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local real r= LoadReal(YDHT, GetHandleId(t), 1)
	if ( ( ( EVENT_UNIT_SPELL_EFFECT == GetTriggerEventId() ) == true ) ) then
		set udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))]=0.
		call DestroyTrigger(t)
	else
		if udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] <= 0.00 then
			call DestroyTrigger(t)
		else
			set udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))]=udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] - 0.01
		endif
	endif
	set t=null
	set u=null
endfunction
function ShenXingBaiBian_1 takes nothing returns nothing
 local timer tm= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(tm), 0)
 local trigger t= CreateTrigger()
	set udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))]=19.5
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_SPELL_EFFECT)
	call TriggerRegisterTimerEventPeriodic(t, 0.01)
	call TriggerAddCondition(t, Condition(function ShenXingBaiBian_2))
	call DestroyTimer(tm)
	set t=null
	set tm=null
	set u=null
endfunction
function ShenXingBaiBian takes nothing returns nothing
 local timer t= CreateTimer()
 local unit u= GetTriggerUnit()
	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	call TimerStart(t, 0.5, false, function ShenXingBaiBian_1)
	set t=null
	set u=null
endfunction
function IsShenXingShangHai takes nothing returns boolean
	return ( IsUnitAlly(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == false ) and ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false ) and udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] > 0.00
endfunction
function ShenXingShaRen takes nothing returns nothing
 local unit u= GetKillingUnit()
 local integer level= 0
	//call BJDebugMsg("到这了吗2？")
	if GetUnitAbilityLevel(u, 'A06L') != 0 then
		set level=GetUnitAbilityLevel(u, 'A03N')
		call UnitRemoveAbility(u, 'A03N')
		call UnitAddAbility(u, 'A03N')
		call SetUnitAbilityLevel(u, 'A03N', level)
	endif
	set u=null
endfunction
function ShenXingShangHai_1 takes nothing returns nothing
 local trigger t= GetTriggeringTrigger()
 local trigger t2= null
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit uc= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local real shxishu= 1 + udg_lilianxishu[i]
 local real shanghai= 0.
	if GetUnitAbilityLevel(u, 'A07T') >= 1 then
		set shxishu=shxishu + 1.
	endif
	if GetUnitAbilityLevel(u, 'A07X') >= 1 then
		set shxishu=shxishu + 1.6
	endif
	set t2=CreateTrigger()
	call TriggerRegisterUnitEvent(t2, uc, EVENT_UNIT_DEATH)
	call TriggerAddAction(t2, function ShenXingShaRen)
	if ( ( ( EVENT_UNIT_DAMAGED == GetTriggerEventId() ) == true ) ) then
		if u == GetEventDamageSource() then
			call DisableTrigger(t)
			set shanghai=ShangHaiGongShi(u , uc , 300. , 400. , shxishu , 'A03N')
			call WuGongShangHai(u , uc , shanghai)
			call EnableTrigger(t)
			set udg_shenxingfuzhu[i]=u
			call DestroyTrigger(t)
		endif
	else
		set udg_shenxingfuzhu[i]=u
		call DestroyTrigger(t)
	endif
	set t=null
	set t2=null
	set u=null
	set uc=null
endfunction
function ShenXingShangHai takes nothing returns nothing
 local trigger t= CreateTrigger()
 local unit u= GetAttacker()
 local unit uc= GetAttackedUnitBJ()
	set udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]=0.00
	call UnitRemoveAbility(GetAttacker(), 'BOwk')
	if udg_shenxingfuzhu[1 + GetPlayerId(GetOwningPlayer(u))] != GetAttackedUnitBJ() then
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
		call TriggerRegisterUnitEvent(t, uc, EVENT_UNIT_DAMAGED)
		call TriggerRegisterTimerEventSingle(t, 1.00)
		call TriggerAddCondition(t, Condition(function ShenXingShangHai_1))
	endif
	set t=null
	set u=null
	set uc=null
endfunction
function IsShenXingMianShang takes nothing returns boolean
	return ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) ) and GetUnitAbilityLevel(GetTriggerUnit(), 'A03N') >= 1
endfunction
function ShenXingMianShang takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit uc= GetEventDamageSource()
 local location loc= GetUnitLoc(u)
	if GetRandomInt(0, 100) < 15 * GetUnitAbilityLevel(u, 'A07Q') then
		call WuDi(u)
		call CreateTextTagLocBJ("MISS", loc, 0, 14., GetRandomReal(0., 100), GetRandomReal(0., 100), GetRandomReal(0., 100), .0)
		call Nw(3 , bj_lastCreatedTextTag)
	endif
	call RemoveLocation(loc)
	set loc=null
	set u=null
	set uc=null
endfunction
//妙手空空
function IsMiaoShouKongKong takes nothing returns boolean
	return ( IsUnitAlly(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == false ) and ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false ) and GetUnitAbilityLevel(GetAttacker(), 'A03O') != 0
endfunction
function MiaoShouKongKong_1 takes nothing returns nothing
 local trigger t= GetTriggeringTrigger()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local unit uc= LoadUnitHandle(YDHT, GetHandleId(t), 1)
 local real shxishu= GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD) * 0.5
 local real shanghai= 0.
	if ( ( ( EVENT_UNIT_DAMAGED == GetTriggerEventId() ) ) ) then
		call commonAddGold(GetOwningPlayer(u) , 3 * GetUnitLevel(uc))
		if ( GetUnitAbilityLevel(u, 'A03N') ) != 0 then
			call commonAddGold(GetOwningPlayer(u) , 3 * GetUnitLevel(uc))
		endif
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(u))] , 'I09Z') then
			call commonAddGold(GetOwningPlayer(u) , 3 * GetUnitLevel(uc))
			set shxishu=shxishu * 2
		endif
		if ( GetUnitAbilityLevel(u, 'A03Q') ) != 0 then
			call DisableTrigger(t)
			set shanghai=ShangHaiGongShi(u , uc , 0.001 , 0.002 , shxishu , 'A03O')
			call WuGongShangHai(u , uc , shanghai)
			call DestroyEffect((AddSpecialEffectTargetEx("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl" , uc , "overhead"))) // INLINED!!
			call EnableTrigger(t)
		endif
		if ( GetUnitAbilityLevel(u, 'S002') ) != 0 and GetRandomInt(1, 100) <= 15 then
			call commonAddLumber(GetOwningPlayer(u) , 2)
		endif
		set udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]=u
		call DestroyTrigger(t)
	else
		set udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]=u
		call DestroyTrigger(t)
	endif
	set t=null
	set u=null
	set uc=null
endfunction
function MiaoShouKongKong takes nothing returns nothing
 local trigger t= CreateTrigger()
 local unit u= GetAttacker()
	if udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] != GetAttackedUnitBJ() then
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, udg_hero[1 + GetPlayerId(GetOwningPlayer(u))])
		call SaveUnitHandle(YDHT, GetHandleId(t), 1, GetAttackedUnitBJ())
		call TriggerRegisterUnitEvent(t, GetAttackedUnitBJ(), EVENT_UNIT_DAMAGED)
		call TriggerRegisterTimerEventSingle(t, 1.00)
		call TriggerAddCondition(t, Condition(function MiaoShouKongKong_1))
	endif
	set t=null
	set u=null
endfunction
//龟息功
function IsGuiXiGong takes nothing returns boolean
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0CE') != 0 and GetEventDamage() >= GetWidgetLife(GetTriggerUnit())
endfunction
//function GuiXiGong_1 takes nothing returns nothing
//	local timer t = GetExpiredTimer()
//	local unit u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
//	local integer j = LoadInteger(YDHT, GetHandleId(t), 1)
//	if j <=10 then
//endfunction
function GuiXiXianTian_Condition takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) ) and IsUnitAliveBJ(GetFilterUnit())
endfunction
function GuiXiXianTian_Action takes nothing returns nothing
 local unit uc= GetEnumUnit()
 local real shxishu= 1.
 local real shanghai= 0.
 local location loc= GetUnitLoc(uc)
	set shanghai=ShangHaiGongShi(GetTriggerUnit() , uc , 800 , 320 , shxishu , 'A0CH')
	call WuGongShangHai(GetTriggerUnit() , uc , shanghai)
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A07V') >= 1 then
		set shxishu=shxishu + 1.
	endif
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A06P') >= 1 then
		call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		call UnitAddAbility(bj_lastCreatedUnit, 1093678412)
		call IssueTargetOrderById(bj_lastCreatedUnit, $D007F, uc)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.)
		call ShowUnitHide(bj_lastCreatedUnit)
		call CreateTextTagLocBJ("封穴", loc, 0, 12., 65., 55., 42., 0)
		call Nw(3. , bj_lastCreatedTextTag)
		call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100., 90)
	endif
	if GetUnitAbilityLevel(GetTriggerUnit(), 'A07O') >= 1 then
		call CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A0DF')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, GetTriggerUnit())
		call UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.)
	endif
	call RemoveLocation(loc)
	set loc=null
	set uc=null
endfunction
function GuiXiGongTimerExpired takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
	
	set guixihuixie[1 + GetPlayerId(GetOwningPlayer(u))]=0.
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
function GuiXiGong takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local group g= CreateGroup()
 local location loc= GetUnitLoc(u)
 local real range= 800.
 local timer t= null
	//local timer t = null
	if ( GetUnitState(u, UNIT_STATE_LIFE) >= 0.99 * GetUnitState(u, UNIT_STATE_MAX_LIFE) ) or ( GetRandomReal(1, 100) <= 40 ) or ( GetRandomReal(1, 100) <= 40 and GetUnitAbilityLevel(u, 'A0DN') != 0 ) then
		call WuDi(u)
		call SetWidgetLife(u, 1.)
		if GetUnitAbilityLevel(u, 'A0CH') != 0 then
			if GetUnitAbilityLevel(u, 'A07W') >= 0 then
				set range=range + 700
			endif
			call GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(function GuiXiXianTian_Condition))
			call ForGroupBJ(g, function GuiXiXianTian_Action)
		endif
		if GetUnitAbilityLevel(u, 'A080') != 0 then
			set guixihuixie[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=20.
			set t=CreateTimer()
			call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
			call TimerStart(t, 2., false, function GuiXiGongTimerExpired)
		endif
	endif
	call GroupClear(g)
	call RemoveLocation(loc)
	set t=null
	set loc=null
	set g=null
	set u=null
	//set t = null
endfunction
function GuiXiJiaFang takes nothing returns boolean
 local integer i= 1
	set i=1
	loop
		exitwhen i >= 6
		if GetUnitAbilityLevel(udg_hero[i], 'A0CE') != 0 then
			call UnitAddAbility(udg_hero[i], 'A03R')
			if GetUnitMoveSpeed(udg_hero[i]) <= 400 then
				call UnitAddAbility(udg_hero[i], 'A03S')
			else
				call UnitRemoveAbility(udg_hero[i], 'A03S')
			endif
		endif
		set i=i + 1
	endloop
	return false
endfunction
//须弥山掌
function IsXuMiKai takes nothing returns boolean
	return GetIssuedOrderId() == $D0057 and GetUnitAbilityLevel(GetTriggerUnit(), 'A03T') >= 1
endfunction
//开启须弥山掌
function XuMiKai takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local integer level= GetUnitAbilityLevel(u, 'A03T')
	call UnitAddAbility(u, 'A0DB')
	if GetUnitAbilityLevel(u, 'A09D') >= 1 then
		call SetUnitAbilityLevel(u, 'A0DB', level + 1)
	else
		call SetUnitAbilityLevel(u, 'A0DB', level)
	endif
	set u=null
endfunction
//关闭须弥山掌
function IsXuMiGuan takes nothing returns boolean
	return GetIssuedOrderId() == $D0058 and GetUnitAbilityLevel(GetTriggerUnit(), 'A03T') >= 1
endfunction
function XuMiGuan takes nothing returns nothing
 local unit u= GetTriggerUnit()
	call UnitRemoveAbility(u, 'A0DB')
	set u=null
endfunction
//夫妻刀法
function IsYuanYangDaoFa takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A04V' )
endfunction
function YuanYangDaoFa takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local location loc= GetUnitLoc(u)
 local location loc2= GetUnitLoc(l__ut)
 local real time= 0.5
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer j= 1
 local real lasttime= 5.
	call YDWEJumpTimer(u , AngleBetweenPoints(loc, loc2) , DistanceBetweenPoints(loc, loc2) , time , 0.01 , 0.)
	call YDWEPolledWaitNull(time)
	call UnitAddAbility(u, 'A04S')
	call SetPlayerAbilityAvailableBJ(false, 'A04S', GetOwningPlayer(u))
	if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
		call UnitAddAbility(l__ut, 'A04S')
		call SetPlayerAbilityAvailableBJ(false, 'A04S', GetOwningPlayer(l__ut))
	endif
	loop
		exitwhen j > 6
		if ( udg_hero[i] == bd[j] ) then
			if ( ModuloInteger(j, 2) == 0 ) then
				if ( bd[j - 1] != null ) and bd[j - 1] == l__ut then
					call SetUnitAbilityLevel(u, 'A04T', 3)
					call SetUnitAbilityLevel(u, 'A04U', 3)
					if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
						call SetUnitAbilityLevel(l__ut, 'A04T', 3)
						call SetUnitAbilityLevel(l__ut, 'A04U', 3)
					endif
				endif
			else
				if ( bd[j + 1] != null ) and bd[j + 1] == l__ut then
					call SetUnitAbilityLevel(u, 'A04T', 3)
					call SetUnitAbilityLevel(u, 'A04U', 3)
					if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
						call SetUnitAbilityLevel(l__ut, 'A04T', 3)
						call SetUnitAbilityLevel(l__ut, 'A04U', 3)
					endif
				endif
			endif
		endif
		set j=j + 1
	endloop
	if GetUnitAbilityLevel(u, 'A09D') >= 1 then
		set lasttime=10.
	endif
	call YDWEPolledWaitNull(lasttime)
	call UnitRemoveAbility(u, 'A04S')
	// if GetUnitAbilityLevel(ut, 'A04S') >= 1 then
	// 	call UnitRemoveAbility(ut, 'A04S')
	// endif
	call RemoveLocation(loc)
	call RemoveLocation(loc2)
	set u=null
	set l__ut=null
	set loc=null
	set loc2=null
endfunction
//寿木长生功
function isShouMu takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A06A' )
endfunction
function shouMu takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local location loc= GetUnitLoc(u)
	//马甲施放防御最大化
	call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
	call ShowUnitHide(bj_lastCreatedUnit)
	call UnitAddAbility(bj_lastCreatedUnit, 'A06V')
	call IssueTargetOrderById(bj_lastCreatedUnit, $D0062, u)
	//马甲施放残废，学习九阳不减速
	if GetUnitAbilityLevel(u, 'A0DN') == 0 then
		call CreateNUnitsAtLoc(1, 'e000', p, loc, bj_UNIT_FACING)
		call ShowUnitHide(bj_lastCreatedUnit)
		call UnitAddAbility(bj_lastCreatedUnit, 'A06U')
		call IssueTargetOrderById(bj_lastCreatedUnit, $D00DD, u)
	endif
	
	call RemoveLocation(loc)
	set u=null
	set p=null
	set loc=null
endfunction
//黄沙万里鞭法
function isHuangSha takes nothing returns boolean
	return ( GetSpellAbilityId() == 'A06B' )
endfunction
function huangSha takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local location loc= GetUnitLoc(u)
 local integer i= 0
 local location loc1= null
	call CreateNUnitsAtLoc(1, 'e01D', GetOwningPlayer(u), loc, bj_UNIT_FACING)
	call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
	call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
	set i=0
	loop
		exitwhen i >= 8
		set loc1=PolarProjectionBJ(loc, 200, 45 * i)
		call CreateNUnitsAtLoc(1, 'e01D', GetOwningPlayer(u), loc1, bj_UNIT_FACING)
		call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc1)
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen i >= 18
		set loc1=PolarProjectionBJ(loc, 350, 20 * i)
		call CreateNUnitsAtLoc(1, 'e01D', GetOwningPlayer(u), loc1, bj_UNIT_FACING)
		call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
		call UnitApplyTimedLife(bj_lastCreatedUnit, 'BHwe', 10.)
		call RemoveLocation(loc1)
		set i=i + 1
	endloop
	call RemoveLocation(loc)
	set u=null
	set loc=null
	set loc1=null
endfunction
function isHuangShaSH takes nothing returns boolean
	return ( GetEventDamage() == 6.09 ) and ( GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )], 'A06B') >= 1 )
endfunction
function huangShaSH takes nothing returns nothing
 local unit u= udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
 local unit uc= GetTriggerUnit()
 local real shxishu= 1.
 local real shanghai= 0.
	if GetUnitAbilityLevel(u, 'A06A') >= 1 then
		set shxishu=shxishu + 0.8
	endif
	if GetUnitAbilityLevel(u, 'A0DN') >= 1 then
		set shxishu=shxishu + 0.6
	endif
	set shanghai=ShangHaiGongShi(u , uc , 130 , 150 , shxishu , 'A06B')
	call WuGongShangHai(u , uc , shanghai)
	set u=null
	set uc=null
endfunction
//珍珑棋局
//function IsZhenLongQiJu takes nothing returns boolean
//	return GetSpellAbilityId()=='A03U'
//endfunction
//function ZhenLong_Condition takes nothing returns boolean
//	return IsUnitAlly(GetFilterUnit(),Player(0)) and IsUnitAliveBJ(GetFilterUnit()) and GetFilterUnit()!=udg_hero[1] and GetFilterUnit()!=udg_hero[2] and GetFilterUnit()!=udg_hero[3] and GetFilterUnit()!=udg_hero[4] and GetFilterUnit()!=udg_hero[5]
//endfunction
//function ZhenLongQiJu_2 takes nothing returns nothing
//	local unit u = GetTriggerUnit()
//	call WuDi(u)
//	call DestroyTrigger(GetTriggeringTrigger())
//	set u = null
//endfunction
//function ZhenLong_Action takes nothing returns nothing
//	local trigger t = CreateTrigger()
//	//call BJDebugMsg("到这了吗2")
//	call YDWETimerDestroyEffect(0.5, AddSpecialEffectTargetEx("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",GetEnumUnit(),"origin"))
//	call TriggerRegisterUnitEvent(t, GetEnumUnit(), EVENT_UNIT_DAMAGED)
//	call TriggerAddAction(t, function ZhenLongQiJu_2)
//	set t = null
//endfunction
//function ZhenLongQiJu_1 takes nothing returns nothing
//	local timer t = GetExpiredTimer()
//	local unit u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
//	local group g = CreateGroup()
//	local integer j = LoadInteger(YDHT, GetHandleId(t), 1)
//	local location loc = GetUnitLoc(u)
//	if j < 24 then
//		//call BJDebugMsg("到这了吗1")
//		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600., loc, Condition(function ZhenLong_Condition)),function ZhenLong_Action)
//		call SaveInteger(YDHT, GetHandleId(t), 1, j+1)
//	else
//		call PauseTimer(t)
//		call DestroyTimer(t)
//		call FlushChildHashtable(YDHT, GetHandleId(t))
//	endif
//	call DestroyGroup(g)
//	call RemoveLocation(loc)
//	set t = null
//	set u = null
//	set g = null
//	set loc = null
//endfunction
//function ZhenLongQiJu takes nothing returns nothing
//	local unit u = GetTriggerUnit()
//	local timer t = CreateTimer()
//	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
//	call TimerStart(t, 0.5, true, function ZhenLongQiJu_1)
//	set u = null
//	set t = null
//endfunction
//药王神篇
//擒龙控鹤
//枯荣禅功
//function IsXuMiShanZhang takes nothing returns boolean
//	return UnitHasBuffBJ(GetTriggerUnit(),'B013')
//endfunction
//function XuMiShanZhang takes nothing returns nothing
//	local real percent = 25.
//	local real damage = GetEventDamage()
//	local location loc = GetUnitLoc(GetEventDamageSource())
//	local real r = GetRandomReal(1., 10.)
//	if GetUnitAbilityLevel(GetTriggerUnit(), 'A0D8')!=0 then
//		set percent = 50.
//	endif
//	if damage>GetWidgetLife(GetTriggerUnit()) then
//		call WuDi(GetTriggerUnit())
//		call SetWidgetLife(GetTriggerUnit(), GetWidgetLife(GetTriggerUnit())-(100-percent)/100*damage)
//	else
//		call SetWidgetLife(GetTriggerUnit(), GetWidgetLife(GetTriggerUnit())+percent/100*damage)
//	endif
//	if GetUnitAbilityLevel(GetTriggerUnit(), 'A0CE')!=0 then
//		if r*damage>GetWidgetLife(GetEventDamageSource()) then
//			call WuDi(GetEventDamageSource())
//			call SetWidgetLife(GetEventDamageSource(), 1.)
//		else
//			call SetWidgetLife(GetEventDamageSource(), GetWidgetLife(GetEventDamageSource())-r*damage)
//		endif
//		call AddSpecialEffectLocBJEx(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
//	endif
//	call RemoveLocation(loc)
//	set loc = null
//endfunction
//事件
function QiWu_Trigger takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsHanBingZhenQi))
	call TriggerAddAction(t, function HanBingZhenQi)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsWuXiangShangHai))
	call TriggerAddAction(t, function WuXiangShangHai)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsWuXiangJieZhi))
	call TriggerAddAction(t, function WuXiangJieZhi)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsShenXingBaiBian))
	call TriggerAddAction(t, function ShenXingBaiBian)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsShenXingShangHai))
	call TriggerAddAction(t, function ShenXingShangHai)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsShenXingMianShang))
	call TriggerAddAction(t, function ShenXingMianShang)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function IsMiaoShouKongKong))
	call TriggerAddAction(t, function MiaoShouKongKong)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function IsGuiXiGong))
	call TriggerAddAction(t, function GuiXiGong)
	set t=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(t, 1)
	call TriggerAddCondition(t, Condition(function GuiXiJiaFang))
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	call TriggerAddCondition(t, Condition(function IsXuMiKai))
	call TriggerAddAction(t, function XuMiKai)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	call TriggerAddCondition(t, Condition(function IsXuMiGuan))
	call TriggerAddAction(t, function XuMiGuan)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function IsYuanYangDaoFa))
	call TriggerAddAction(t, function YuanYangDaoFa)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isShouMu))
	call TriggerAddAction(t, function shouMu)
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function isHuangSha))
	call TriggerAddAction(t, function huangSha)
	set t=CreateTrigger()
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function isHuangShaSH))
	call TriggerAddAction(t, function huangShaSH)
 //   set t=CreateTrigger()
	//call YDWESyStemAnyUnitDamagedRegistTrigger( t )
	//call TriggerAddCondition(t,Condition(function IsXuMiShanZhang))
 //   call TriggerAddAction(t,function XuMiShanZhang)
	//set t = CreateTrigger()
 //   call YDWESyStemAnyUnitDamagedRegistTrigger( t )
 //   call TriggerAddCondition(t, Condition(function IsTianGangShangHai))
 //   call TriggerAddAction(t, function TianGangShangHai)
 //   set t = CreateTrigger()
 //   call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	//call TriggerAddCondition(t,Condition(function IsZhenLongQiJu))
 //   call TriggerAddAction(t,function ZhenLongQiJu)
 //   set t = CreateTrigger()
 //   call YDWESyStemAnyUnitDamagedRegistTrigger( t )
 //   call TriggerAddCondition(t, Condition(function IsZhenWuShangHai))
 //   call TriggerAddAction(t, function ZhenWuShangHai)
 //   set t=CreateTrigger()
	//call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	//call TriggerAddCondition(t,Condition(function IsXueZhenFa))
	//call TriggerAddAction(t,function XueZhenFa)
	set t=null
endfunction
//===================================================
//决战江湖1.6之掌门传奇
//===================================================
//少林：如来神掌
function RuLaiShenZhang_Conditions takes nothing returns boolean
    return GetUnitAbilityLevel(GetAttacker(), 'A04L') >= 1
endfunction
function RuLaiShenZhang_Actions takes nothing returns nothing
    local location array p
    local real r
    local real r1
    local real r2
    local integer a
    local integer b
    local integer i= 0
    local unit u= GetAttacker()
    local unit l__ut= null
    local unit array uuu
    local player ppl= GetOwningPlayer(u)
    local integer id= 0
    local real dist= RMinBJ(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 2500)
    set id=getHeroDummyId(GetUnitTypeId(GetAttacker()))
	set p[0]=GetUnitLoc(u)
    call CreateNUnitsAtLoc(1, id, ppl, p[0], GetUnitFacing(u))
    set l__ut=bj_lastCreatedUnit
    set p[17]=PolarProjectionBJ(p[0], 300, GetUnitFacing(u))
    set r=GetUnitFacing(u) + 270
    set p[0]=p[17]
    set p[1]=PolarProjectionBJ(p[0], 241.96, ( - 47.89 + r ))
    set p[2]=PolarProjectionBJ(p[0], 258.87, ( - 66.01 + r ))
    set p[3]=PolarProjectionBJ(p[0], 263.73, ( - 82.54 + r ))
    set p[4]=PolarProjectionBJ(p[0], 238.72, ( - 111.24 + r ))
    set p[5]=PolarProjectionBJ(p[0], 219.18, ( - 139.53 + r ))
    set p[6]=PolarProjectionBJ(p[0], 220.88, ( - 170.75 + r ))
    set p[7]=PolarProjectionBJ(p[0], 237.01, ( 159.50 + r ))
    set p[8]=PolarProjectionBJ(p[0], 432.59, ( 159.71 + r ))
    set p[9]=PolarProjectionBJ(p[0], 257.35, ( 133.15 + r ))
    set p[10]=PolarProjectionBJ(p[0], 639.01, ( 117.27 + r ))
    set p[11]=PolarProjectionBJ(p[0], 238.57, ( 104.94 + r ))
    set p[12]=PolarProjectionBJ(p[0], 775.44, ( 102.34 + r ))
    set p[13]=PolarProjectionBJ(p[0], 208.18, ( 67.62 + r ))
    set p[14]=PolarProjectionBJ(p[0], 687.95, ( 87.44 + r ))
    set p[15]=PolarProjectionBJ(p[0], 208.61, ( - 29.12 + r ))
    set p[16]=PolarProjectionBJ(p[0], 521.16, ( 65.24 + r ))
    call UnitAddAbilityBJ('Aloc', l__ut)
    call SetCameraFieldForPlayer(ppl, CAMERA_FIELD_TARGET_DISTANCE, 4000.00, 2.00)
    call SetUnitFlyHeight(l__ut, 2000.00, 400.00)
    call IssuePointOrderLoc(l__ut, "move", p[0])
    call YDWEPolledWaitNull(2.00)
    call SetUnitFlyHeight(l__ut, 0.00, 800.00)
    set a=1
    set b=6
    loop
        exitwhen a > b
        set p[18]=PolarProjectionBJ(p[0], 110.00, ( 60.00 * I2R(a) ))
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set a=a + 1
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        call RemoveLocation(p[18])
    endloop
    set a=0
    set b=16
    loop
        exitwhen a > b
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[a], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        set a=a + 1
    endloop
    set a=1
    set b=3
    loop
        exitwhen a > b
        set r1=DistanceBetweenPoints(p[9], p[10]) * ( I2R(a) / 4.00 )
        set r2=AngleBetweenPoints(p[9], p[10])
        set p[18]=PolarProjectionBJ(p[9], r1, r2)
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        set r1=DistanceBetweenPoints(p[13], p[14]) * ( I2R(a) / 4.00 )
        set r2=AngleBetweenPoints(p[13], p[14])
        set p[18]=PolarProjectionBJ(p[13], r1, r2)
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        set a=a + 1
    endloop
    set a=1
    set b=4
    loop
        exitwhen a > b
        set r1=DistanceBetweenPoints(p[11], p[12]) * ( I2R(a) / 5.00 )
        set r2=AngleBetweenPoints(p[11], p[12])
        set p[18]=PolarProjectionBJ(p[11], r1, r2)
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        set a=a + 1
    endloop
    set a=1
    set b=5
    loop
        exitwhen a > b
        set r1=DistanceBetweenPoints(p[15], p[16]) * ( I2R(a) / 6.00 )
        set r2=AngleBetweenPoints(p[15], p[16])
        set p[18]=PolarProjectionBJ(p[15], r1, r2)
        call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
        call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
        set uuu[i]=bj_lastCreatedUnit
        set i=i + 1
        set a=a + 1
    endloop
    set r1=DistanceBetweenPoints(p[7], p[8]) / 2.00
    set r2=AngleBetweenPoints(p[7], p[8])
    set p[18]=PolarProjectionBJ(p[7], r1, r2)
    call CreateNUnitsAtLoc(1, 'e019', ppl, p[18], 0)
    call IssueImmediateOrderById(bj_lastCreatedUnit, $D00D1)
    set uuu[i]=bj_lastCreatedUnit
    call CameraSetEQNoiseForPlayer(ppl, 10.00)
    call SetCameraFieldForPlayer(GetOwningPlayer(u), CAMERA_FIELD_TARGET_DISTANCE, dist, 5.00)
    call CinematicFilterGenericBJ(5.00, BLEND_MODE_BLEND, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 0.00, 0.00, 0.00, 0.00, 100.00, 100.00, 100.00, 100.00)
    set a=0
    set b=i
    loop
        exitwhen a > b
        call SetUnitTimeScale(uuu[a], 0.80)
        set a=a + 1
    endloop
    call YDWEPolledWaitNull(2.20)
    set a=0
    set b=i
    loop
        exitwhen a > b
        call SetUnitTimeScale(uuu[a], 0.02)
        set a=a + 1
    endloop
    call UnitRemoveAbilityBJ('Aloc', l__ut)
    call ShowUnitHide(l__ut)
    call ShowUnitShow(l__ut)
    call RemoveUnit(l__ut)
    call YDWEPolledWaitNull(4.00)
    call CameraClearNoiseForPlayer(ppl)
    set a=0
    set b=18
    loop
        exitwhen a > b
        call RemoveLocation(p[a])
        set p[a]=null
        set a=a + 1
    endloop
    set a=0
    set b=i
    loop
        exitwhen a > b
        set uuu[a]=null
        set a=a + 1
    endloop
    set u=null
    set a=0
    set b=0
    set i=0
    set r=0.00
    set r1=0.00
    set r2=0.00
    set ppl=null
    set l__ut=null
endfunction
function IsRuLaiShenZhang takes nothing returns boolean
	return ( GetEventDamage() == 5.17 ) and ( GetUnitAbilityLevel(udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )], 'A04L') >= 1 )
endfunction
function RuLaiShenZhang takes nothing returns nothing
 local unit u=udg_hero[( 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource())) )]
    local unit uc=GetTriggerUnit()
    local real shxishu=1.
    local real shanghai=0.
    set shanghai=ShangHaiGongShi(u , uc , 65 , 75 , shxishu , 'A04L')
    call WuGongShangHai(u , uc , shanghai)
    set u=null
    set uc=null
endfunction
//===========================================================================
function InitTrig_ZhangMenSkill takes nothing returns nothing
 local trigger t= CreateTrigger()
	//少林：如来神掌
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function RuLaiShenZhang_Conditions))
	call TriggerAddAction(t, function RuLaiShenZhang_Actions)
	set t=CreateTrigger()
	call Ov(t)
	call TriggerAddCondition(t, Condition(function IsRuLaiShenZhang))
	call TriggerAddAction(t, function RuLaiShenZhang)
	//武当：太极剑
	set t=null
endfunction
//===================================================
//决战江湖1.4之大辽金匠
//===================================================
//购买商店武器
function RemoveWeapon takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local item it= LoadItemHandle(YDHT, GetHandleId(t), 1)
	call UnitRemoveItem(u, it)
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
	set it=null
endfunction
 function s__ShopWeapon_create takes integer id,integer min_xiuxing returns integer
  local integer l__wp
		set l__wp=s__ShopWeapon__allocate()
		set s__ShopWeapon_min_xiuxing[l__wp]=min_xiuxing
		set s__ShopWeapon_id[l__wp]=id
		return l__wp
 endfunction
 function s__ShopWeapon_onDestroy takes integer this returns nothing
		set s__ShopWeapon_min_xiuxing[this]=0
		set s__ShopWeapon_id[this]=0
 endfunction

//Generated destructor of ShopWeapon
function s__ShopWeapon_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__ShopWeapon_V[this]!=-1) then
        return
    endif
    call s__ShopWeapon_onDestroy(this)
    set si__ShopWeapon_V[this]=si__ShopWeapon_F
    set si__ShopWeapon_F=this
endfunction
 function s__ShopWeapon_CanYeLianWeapon takes integer this,unit u,item it returns boolean
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetItemTypeId(it) == 'I09C' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 3 and GetItemTypeId(it) == 'I097' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 6 and GetItemTypeId(it) == 'I098' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 and ( GetItemTypeId(it) == 'I09B' or GetItemTypeId(it) == 'I09D' ) then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 恒山拂尘专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 7 and GetItemTypeId(it) == 'I0DU' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 华山养吾剑专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 4 and GetItemTypeId(it) == 'I0E0' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 衡山镇岳尚方专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 15 and GetItemTypeId(it) == 'I0DY' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 泰山东灵铁剑专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 18 and GetItemTypeId(it) == 'I0E2' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 神龙教毒龙鞭专属
		if ( udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 16 or udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 17 ) and GetItemTypeId(it) == 'I0DZ' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 武当真武剑专属
		if ( udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 9 ) and GetItemTypeId(it) == 'I0DK' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		if xiuxing[1 + GetPlayerId(GetOwningPlayer(u))] < s__ShopWeapon_min_xiuxing[this] and s__ShopWeapon_zhuanshu[this] == false and not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "需历练" + I2S(s__ShopWeapon_min_xiuxing[this]) + "以上方可冶炼该武器")
			call AdjustPlayerStateBJ(30000, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
			return false
		endif
		return true
 endfunction
 function s__ShopWeapon_PickUpWeapon takes integer this,unit u,item it returns nothing
  local timer t= CreateTimer()
		// 以下是专属武器
		// 恒山拂尘专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 7 and GetItemTypeId(it) == 'I0DU' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 华山养吾剑专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 4 and GetItemTypeId(it) == 'I0E0' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 衡山镇岳尚方专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 15 and GetItemTypeId(it) == 'I0DY' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 泰山东灵铁剑专属
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 18 and GetItemTypeId(it) == 'I0E2' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 神龙教毒龙鞭专属
		if ( udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 16 or udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 17 ) and GetItemTypeId(it) == 'I0DZ' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 武当真武剑专属
		if ( udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 9 ) and GetItemTypeId(it) == 'I0DK' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 峨眉倚天剑
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 8 and GetItemTypeId(it) == 'I00B' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 古墓双剑
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetItemTypeId(it) == 'I09C' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 丐帮打狗棒
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 3 and GetItemTypeId(it) == 'I097' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 血刀
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 6 and GetItemTypeId(it) == 'I098' then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		// 自由带蛇杖、玉箫无视历练
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 and ( GetItemTypeId(it) == 'I09B' or GetItemTypeId(it) == 'I09D' ) then
			set s__ShopWeapon_zhuanshu[this]=true
		endif
		if xiuxing[1 + GetPlayerId(GetOwningPlayer(u))] < s__ShopWeapon_min_xiuxing[this] - 1 and s__ShopWeapon_zhuanshu[this] == false and not (YDWEBitwise_AND(deputy[(1 + GetPlayerId(GetOwningPlayer(u)) )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "需历练" + I2S(s__ShopWeapon_min_xiuxing[this] - 1) + "以上方可使用该武器")
			call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
			call SaveItemHandle(YDHT, GetHandleId(t), 1, it)
			call TimerStart(t, 0., false, function RemoveWeapon)
		endif
		set t=null
 endfunction
function IsYeLianWuQi takes nothing returns boolean
 local integer j= 1
	if GetItemTypeId(GetManipulatedItem()) == 'I0BG' then
		if ( GetItemType(UnitItemInSlotBJ(GetTriggerUnit(), 1)) != ITEM_TYPE_ARTIFACT ) then
			call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10, "|cffff0000装备栏第一格不是武器")
			call AdjustPlayerStateBJ(30000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			return false
		else
			loop
				exitwhen j >= 30
				if GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), 1)) == s__ShopWeapon_id[shopweapon[j]] then
					if s__ShopWeapon_CanYeLianWeapon(shopweapon[j],GetTriggerUnit() , UnitItemInSlotBJ(GetTriggerUnit(), 1)) then
						return true
					else
						return false
					endif
				endif
				set j=j + 1
			endloop
			return true
		endif
	endif
	return false
endfunction
function YeLianWuQi takes nothing returns nothing
 local unit u= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local item it= UnitItemInSlotBJ(u, 1)
 local integer id= GetItemTypeId(it)
 local real zssh=LoadReal(YDHT, id, StringHash("招式伤害"))
 local real wdnl=LoadReal(YDHT, id, StringHash("内力"))
 local real zhssh=LoadReal(YDHT, id, StringHash("真实伤害"))
 local real bjsh=LoadReal(YDHT, id, StringHash("暴击伤害"))
 local real bjl=LoadReal(YDHT, id, StringHash("暴击率"))
 local real jxlw=LoadReal(YDHT, id, StringHash("绝学领悟"))
 local real wdgg=LoadReal(YDHT, id, StringHash("根骨")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real wddp=LoadReal(YDHT, id, StringHash("胆魄")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real wdwx=LoadReal(YDHT, id, StringHash("悟性")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real wdys=LoadReal(YDHT, id, StringHash("医术")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real wdjm=LoadReal(YDHT, id, StringHash("经脉")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real wdfy=LoadReal(YDHT, id, StringHash("福缘")) + LoadReal(YDHT, id, StringHash("全属性"))
 local real shhf=LoadReal(YDHT, id, StringHash("伤害回复"))
 local real sghf=LoadReal(YDHT, id, StringHash("杀怪回复"))
 local real smhf=LoadReal(YDHT, id, StringHash("生命回复"))
 local real flhf=LoadReal(YDHT, id, StringHash("法力回复"))
 local real sjgl=LoadReal(YDHT, id, StringHash("升级概率")) + LoadReal(YDHT, GetHandleId(it), StringHash("升级概率"))
	//local real wdxx=LoadReal(YDHT,id,StringHash("吸血"))
	// local real gjsd=LoadReal(YDHT,id,StringHash("攻击速度"))
	if shengwang[i] <= 2000 then
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000声望不足2000不可以冶炼武器")
		call AdjustPlayerStateBJ(30000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
	elseif sjgl <= 0. then
		call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000该武器已不可继续冶炼")
		call AdjustPlayerStateBJ(30000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
	else
		if GetRandomReal(0., 100.) < sjgl then
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000恭喜你，冶炼成功")
			if not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
				set udg_bqds[i]=udg_bqds[i] + 1
				call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您冶炼成功第" + I2S(udg_bqds[i]) + "次，您需要冶炼成功4次才能获得兵器大师哦")
			endif
			if udg_bqds[i] >= 4 and not (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
			    call Deputy_setMaster(i , BING_QI)
				// call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓兵器大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得兵器大师")
				call SetPlayerName(p, "〓兵器大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
			endif
			if id != 'I0BH' then
				call RemoveItem(FetchUnitItem(u , id))
				set it=UnitAddItemById(u, 'I0BH')
			else
				set zssh=LoadReal(YDHT, GetHandleId(it), StringHash("招式伤害"))
				set wdnl=LoadReal(YDHT, GetHandleId(it), StringHash("内力"))
				set zhssh=LoadReal(YDHT, GetHandleId(it), StringHash("真实伤害"))
				set bjsh=LoadReal(YDHT, GetHandleId(it), StringHash("暴击伤害"))
				set bjl=LoadReal(YDHT, GetHandleId(it), StringHash("暴击率"))
				set jxlw=LoadReal(YDHT, GetHandleId(it), StringHash("绝学领悟"))
				set wdgg=LoadReal(YDHT, GetHandleId(it), StringHash("根骨"))
				set wddp=LoadReal(YDHT, GetHandleId(it), StringHash("胆魄"))
				set wdwx=LoadReal(YDHT, GetHandleId(it), StringHash("悟性"))
				set wdys=LoadReal(YDHT, GetHandleId(it), StringHash("医术"))
				set wdjm=LoadReal(YDHT, GetHandleId(it), StringHash("经脉"))
				set wdfy=LoadReal(YDHT, GetHandleId(it), StringHash("福缘"))
				set shhf=LoadReal(YDHT, GetHandleId(it), StringHash("伤害回复"))
				set sghf=LoadReal(YDHT, GetHandleId(it), StringHash("杀怪回复"))
				set smhf=LoadReal(YDHT, GetHandleId(it), StringHash("生命回复"))
				set flhf=LoadReal(YDHT, GetHandleId(it), StringHash("法力回复"))
				//set wdxx=LoadReal(YDHT,GetHandleId(it),StringHash("吸血"))
				// set gjsd=LoadReal(YDHT,GetHandleId(it),StringHash("攻击速度"))
			endif
			if (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( BING_QI) - 1)])) != 0) then // INLINED!!
				set sjgl=sjgl * GetGeoNormRandomReal(0.78 , 0.95)
			else
				set sjgl=sjgl * GetGeoNormRandomReal(0.68 , 0.95)
			endif
			if sjgl < 3. then
				set sjgl=0.
			endif
			if udg_vip[i] >= 1 then
				set sjgl=RMinBJ(sjgl * GetRandomReal(1.0, 1.04), 100.)
			endif
			call SaveReal(YDHT, GetHandleId(it), StringHash("升级概率"), sjgl)
			call UnitRemoveItem(u, it)
			call SaveReal(YDHT, GetHandleId(it), StringHash("招式伤害"), ( GetGeoNormRandomReal(0. , 100.) + zssh ) * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("内力"), ( GetGeoNormRandomReal(0. , 100.) + wdnl ) * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("真实伤害"), ( GetGeoNormRandomReal(0. , 100.) + zhssh ) * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("暴击伤害"), bjsh * GetGeoNormRandomReal(1.0 , 1.1))
			call SaveReal(YDHT, GetHandleId(it), StringHash("暴击率"), bjl * GetGeoNormRandomReal(1.0 , 1.05))
			call SaveReal(YDHT, GetHandleId(it), StringHash("绝学领悟"), jxlw * GetGeoNormRandomReal(1.0 , 1.25))
			call SaveReal(YDHT, GetHandleId(it), StringHash("根骨"), ( GetRandomReal(0., 0.4) + wdgg ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("胆魄"), ( GetRandomReal(0., 0.4) + wddp ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("悟性"), ( GetRandomReal(0., 0.4) + wdwx ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("医术"), ( GetRandomReal(0., 0.4) + wdys ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("经脉"), ( GetRandomReal(0., 0.4) + wdjm ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("福缘"), ( GetRandomReal(0., 0.4) + wdfy ) * GetGeoNormRandomReal(1.0 , 1.15))
			call SaveReal(YDHT, GetHandleId(it), StringHash("伤害回复"), shhf * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("杀怪回复"), sghf * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("生命回复"), smhf * GetGeoNormRandomReal(1.0 , 1.3))
			call SaveReal(YDHT, GetHandleId(it), StringHash("法力回复"), flhf * GetGeoNormRandomReal(1.0 , 1.3))
		//call SaveReal(YDHT, GetHandleId(it), StringHash("吸血"), I2R(wdxx)*GetRandomReal(1.0, 1.5)))
		// call SaveReal(YDHT, GetHandleId(it), StringHash("攻击速度"), gjsd*GetRandomReal(1.0, 1.5))
		else
			call DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000很遗憾，冶炼失败")
			set sjgl=sjgl * GetGeoNormRandomReal(0.95 , 0.99)
			if sjgl < 3. then
				set sjgl=0.
			endif
			call SaveReal(YDHT, GetHandleId(it), StringHash("升级概率"), sjgl)
			//set shengwang[i] = shengwang[i]-100
		endif
	endif
	set u=null
	set p=null
	set it=null
endfunction
function InitShopWeapon takes nothing returns nothing
	set shopweapon[1]=s__ShopWeapon_create('I01E' , 0)
	set shopweapon[2]=s__ShopWeapon_create('I01F' , 0)
	set shopweapon[3]=s__ShopWeapon_create('I01S' , 0)
	set shopweapon[4]=s__ShopWeapon_create('I020' , 0)
	set shopweapon[5]=s__ShopWeapon_create('I021' , 0)
	set shopweapon[6]=s__ShopWeapon_create('I016' , 1)
	set shopweapon[7]=s__ShopWeapon_create('I01L' , 1)
	set shopweapon[8]=s__ShopWeapon_create('I01N' , 1)
	set shopweapon[9]=s__ShopWeapon_create('I013' , 2)
	set shopweapon[10]=s__ShopWeapon_create('I04F' , 2)
	set shopweapon[11]=s__ShopWeapon_create('I00X' , 3)
	set shopweapon[12]=s__ShopWeapon_create('I099' , 3)
	set shopweapon[13]=s__ShopWeapon_create('I09A' , 3)
	set shopweapon[14]=s__ShopWeapon_create('I00P' , 4)
	set shopweapon[15]=s__ShopWeapon_create('I00Q' , 4)
	set shopweapon[16]=s__ShopWeapon_create('I00B' , 5)
	set shopweapon[17]=s__ShopWeapon_create('I00C' , 5)
	set shopweapon[18]=s__ShopWeapon_create('I00D' , 5)
	set shopweapon[19]=s__ShopWeapon_create('I08V' , 5)
	set shopweapon[20]=s__ShopWeapon_create('I097' , 6)
	set shopweapon[21]=s__ShopWeapon_create('I098' , 6)
	set shopweapon[22]=s__ShopWeapon_create('I0DK' , 6)
	set shopweapon[23]=s__ShopWeapon_create('I0DU' , 6)
	set shopweapon[24]=s__ShopWeapon_create('I0DY' , 6)
	set shopweapon[25]=s__ShopWeapon_create('I0DZ' , 6)
	set shopweapon[26]=s__ShopWeapon_create('I0E0' , 6)
	set shopweapon[27]=s__ShopWeapon_create('I0E2' , 6)
	set shopweapon[28]=s__ShopWeapon_create('I09B' , 6)
	set shopweapon[29]=s__ShopWeapon_create('I09D' , 6)
endfunction
function SmeltingWeaponSystem takes nothing returns nothing
 local trigger t= CreateTrigger()
	call InitShopWeapon()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function IsYeLianWuQi))
	call TriggerAddAction(t, function YeLianWuQi)
	set t=null
endfunction
function CreateDestructables takes nothing returns nothing
	//call CreateDestructableZ('ATg1',-12160,-15666,0,270,.1,0)
	call CreateDestructableZ('YTfb', 3616, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('NTtc', 224, 4896, 0, 270, 1.08, 2)
	call CreateDestructableZ('NTtc', 32, 4384, 0, 270, 1.08, 2)
	call CreateDestructableZ('NTtw', - 128, 4224, 0, 270, 1.18, 9)
	call CreateDestructableZ('NTtw', 128, 4160, 0, 270, 1.15, 3)
	call CreateDestructableZ('NTtw', - 128, 3840, 0, 270, 1.15, 5)
	call CreateDestructableZ('NTtw', 576, 4672, 0, 270, .89, 7)
	call CreateDestructableZ('NTtw', 384, 5440, 0, 270, 1.05, 5)
	call CreateDestructableZ('NTtw', 256, 5504, 0, 270, .88, 0)
	call CreateDestructableZ('NTtw', - 192, 5888, 0, 270, .93, 0)
	call CreateDestructableZ('NTtw', - 320, 5952, 0, 270, .87, 5)
	call CreateDestructableZ('NTtw', - 1344, 5952, 0, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 1472, 5952, 0, 270, 1.01, 9)
	call CreateDestructableZ('NTtw', - 2240, 5824, 0, 270, .9, 1)
	call CreateDestructableZ('NTtw', - 1856, 5504, 0, 270, 1.19, 0)
	call CreateDestructableZ('NTtw', - 1728, 5248, 0, 270, .95, 6)
	call CreateDestructableZ('NTtw', - 1664, 5120, 0, 270, .96, 7)
	call CreateDestructableZ('NTtw', - 1664, 4800, 0, 270, .96, 3)
	call CreateDestructableZ('NTtw', - 1408, 4480, 0, 270, 1.19, 5)
	call CreateDestructableZ('NTtw', - 1216, 4160, 0, 270, 1.19, 2)
	call CreateDestructableZ('NTtw', - 1280, 4032, 0, 270, .82, 7)
	call CreateDestructableZ('NTtw', - 1344, 3776, 0, 270, .93, 6)
	call CreateDestructableZ('NTtw', - 1472, 3584, 0, 270, .93, 5)
	call CreateDestructableZ('NTtw', - 1408, 3392, 0, 270, .86, 7)
	call CreateDestructableZ('NTtw', - 1280, 3072, 0, 270, 1.1, 7)
	call CreateDestructableZ('NTtw', - 1216, 2880, 0, 270, 1.01, 4)
	call CreateDestructableZ('NTtw', - 1216, 2752, 0, 270, .97, 5)
	call CreateDestructableZ('NTtw', - 1344, 2432, 0, 270, .91, 1)
	call CreateDestructableZ('NTtw', - 1600, 2432, 0, 270, 1.06, 2)
	call CreateDestructableZ('NTtw', - 1792, 2496, 0, 270, .94, 7)
	call CreateDestructableZ('NTtw', - 2112, 2304, 0, 270, 1.04, 5)
	call CreateDestructableZ('NTtw', - 2176, 2816, 0, 270, .95, 1)
	call CreateDestructableZ('NTtw', - 2176, 2944, 0, 270, 1.08, 1)
	call CreateDestructableZ('NTtw', - 2176, 3136, 0, 270, 1.07, 7)
	call CreateDestructableZ('NTtw', - 2176, 3264, 0, 270, 1.05, 0)
	call CreateDestructableZ('NTtw', - 2240, 3584, 0, 270, 1.03, 5)
	call CreateDestructableZ('NTtw', - 2176, 3840, 0, 270, .92, 0)
	call CreateDestructableZ('NTtw', - 2112, 3968, 0, 270, 1.01, 9)
	call CreateDestructableZ('NTtw', - 2112, 4096, 0, 270, 1.05, 7)
	call CreateDestructableZ('NTtw', - 2176, 4224, 0, 270, .97, 0)
	call CreateDestructableZ('NTtw', - 2368, 4352, 0, 270, .91, 6)
	call CreateDestructableZ('NTtw', - 3200, 4544, 0, 270, 1.08, 5)
	call CreateDestructableZ('NTtw', - 3328, 4480, 0, 270, .93, 1)
	call CreateDestructableZ('NTtw', - 3456, 4352, 0, 270, 1, 4)
	call CreateDestructableZ('NTtw', - 3584, 4288, 0, 270, 1.02, 3)
	call CreateDestructableZ('NTtw', - 4032, 4416, 0, 270, .81, 3)
	call CreateDestructableZ('NTtw', - 4032, 4288, 0, 270, 1.15, 4)
	call CreateDestructableZ('NTtw', - 3968, 3968, 0, 270, 1.09, 5)
	call CreateDestructableZ('NTtw', - 3904, 3712, 0, 270, 1.06, 6)
	call CreateDestructableZ('NTtw', - 4032, 3328, 0, 270, 1.01, 8)
	call CreateDestructableZ('NTtw', - 4032, 3136, 0, 270, 1.08, 1)
	call CreateDestructableZ('NTtw', - 3968, 3008, 0, 270, .81, 9)
	call CreateDestructableZ('NTtw', - 3840, 3008, 0, 270, .86, 7)
	call CreateDestructableZ('NTtw', - 3776, 2880, 0, 270, .81, 8)
	call CreateDestructableZ('NTtw', - 3648, 2560, 0, 270, 1.01, 8)
	call CreateDestructableZ('NTtw', - 3456, 2496, 0, 270, .81, 9)
	call CreateDestructableZ('NTtw', - 3328, 2432, 0, 270, 1.04, 1)
	call CreateDestructableZ('NTtw', - 3200, 2048, - .25, 270, 1.07, 4)
	call CreateDestructableZ('NTtw', - 3200, 1920, - .25, 270, 1.19, 9)
	call CreateDestructableZ('NTtw', - 3264, 1728, - .06, 270, 1.1, 1)
	call CreateDestructableZ('NTtw', - 3136, 1536, 0, 270, 1.16, 7)
	call CreateDestructableZ('NTtw', - 2752, 1344, 0, 270, .9, 5)
	call CreateDestructableZ('NTtw', - 2624, 1344, 0, 270, 1.02, 4)
	call CreateDestructableZ('NTtw', - 2496, 1280, 0, 270, 1.19, 0)
	call CreateDestructableZ('NTtw', - 1984, 1344, 0, 270, 1.12, 3)
	call CreateDestructableZ('NTtw', - 1856, 1344, 0, 270, .8, 7)
	call CreateDestructableZ('NTtw', - 1664, 1280, 0, 270, .93, 8)
	call CreateDestructableZ('NTtw', - 1536, 1344, 0, 270, .92, 9)
	call CreateDestructableZ('NTtw', - 1344, 1408, 0, 270, .83, 8)
	call CreateDestructableZ('NTtw', - 128, 1344, - .25, 270, .95, 4)
	call CreateDestructableZ('NTtw', 0, 1344, - .25, 270, .84, 1)
	call CreateDestructableZ('NTtw', 320, 1344, .06, 270, 1.19, 2)
	call CreateDestructableZ('NTtw', 512, 1344, 0, 270, 1.17, 6)
	call CreateDestructableZ('NTtw', 768, 1280, 0, 270, 1.03, 9)
	call CreateDestructableZ('NTtw', 896, 1280, 0, 270, .81, 0)
	call CreateDestructableZ('NTtw', 1600, 1792, 0, 270, 1.01, 5)
	call CreateDestructableZ('NTtw', 1664, 1920, 0, 270, .85, 1)
	call CreateDestructableZ('NTtw', 1664, 2432, 0, 270, 1.02, 4)
	call CreateDestructableZ('NTtw', 2112, 2880, 0, 270, .92, 9)
	call CreateDestructableZ('NTtw', 2240, 3008, 0, 270, .86, 1)
	call CreateDestructableZ('NTtw', 2304, 3584, 0, 270, 1.1, 9)
	call CreateDestructableZ('NTtw', 2304, 3712, 0, 270, .9, 0)
	call CreateDestructableZ('NTtw', 2304, 3840, 0, 270, .8, 6)
	call CreateDestructableZ('NTtw', 2304, 4096, 0, 270, 1.06, 8)
	call CreateDestructableZ('NTtw', 1984, 4352, 0, 270, 1.03, 3)
	call CreateDestructableZ('NTtw', 1536, 4544, 0, 270, .87, 0)
	call CreateDestructableZ('NTtw', 1408, 4544, 0, 270, 1.05, 8)
	call CreateDestructableZ('NTtw', 2688, 3712, 0, 270, 1.16, 2)
	call CreateDestructableZ('NTtw', 2560, 3584, 0, 270, .93, 0)
	call CreateDestructableZ('NTtw', 2112, 2688, 0, 270, 1.11, 4)
	call CreateDestructableZ('NTtw', 1920, 2560, 0, 270, .9, 0)
	call CreateDestructableZ('NTtw', 1856, 2432, 0, 270, .99, 0)
	call CreateDestructableZ('NTtw', 2048, 2048, 0, 270, 1.06, 5)
	call CreateDestructableZ('NTtw', - 3776, 1728, 0, 270, 1.01, 2)
	call CreateDestructableZ('NTtw', 1856, 1600, 0, 270, 1.17, 5)
	call CreateDestructableZ('VTlt', 960, - 3136, - 6.12, 270, .86, 3)
	call CreateDestructableZ('NTtw', 0, 2432, 0, 270, 1.01, 2)
	call CreateDestructableZ('NTtw', - 192, 2432, - .25, 270, .99, 6)
	call CreateDestructableZ('NTtw', - 192, 3200, 0, 270, 1.17, 1)
	call CreateDestructableZ('NTtw', - 192, 3328, 0, 270, .94, 1)
	call CreateDestructableZ('NTtw', - 192, 3520, 0, 270, 1.13, 4)
	call CreateDestructableZ('NTtw', - 192, 3712, 0, 270, 1.1, 6)
	call CreateDestructableZ('NTtw', 128, 2752, 0, 270, .89, 2)
	call CreateDestructableZ('NTtw', 256, 2624, 0, 270, 1.07, 0)
	call CreateDestructableZ('NTtw', 384, 3456, 0, 270, 1.17, 7)
	call CreateDestructableZ('NTtw', 832, 4352, 0, 270, .92, 2)
	call CreateDestructableZ('NTtw', 896, 4480, 0, 270, .98, 8)
	call CreateDestructableZ('NTtw', 1088, 4544, 0, 270, .94, 0)
	call CreateDestructableZ('NTtw', 1664, 4736, 0, 270, 1.13, 8)
	call CreateDestructableZ('NTtw', 2048, 4480, 0, 270, .97, 8)
	call CreateDestructableZ('NTtw', 2240, 4288, 0, 270, .91, 2)
	call CreateDestructableZ('NTtw', - 2624, 4736, 0, 270, 1.02, 9)
	call CreateDestructableZ('NTtw', - 3072, 4672, 0, 270, .82, 7)
	call CreateDestructableZ('NTtw', - 3712, 4736, 0, 270, 1.06, 6)
	call CreateDestructableZ('NTtw', - 4032, 4864, 0, 270, 1.12, 0)
	call CreateDestructableZ('NTtw', - 4544, 4352, 0, 270, 1.19, 4)
	call CreateDestructableZ('NTtw', - 4544, 4160, 0, 270, .94, 2)
	call CreateDestructableZ('NTtw', - 4416, 3776, 0, 270, .9, 9)
	call CreateDestructableZ('NTtw', - 4672, 3264, 0, 270, .94, 9)
	call CreateDestructableZ('NTtw', - 4544, 3008, 0, 270, 1.05, 7)
	call CreateDestructableZ('NTtw', - 4480, 2752, 0, 270, 1.16, 7)
	call CreateDestructableZ('NTtw', - 3712, 2432, 0, 270, 1.06, 8)
	call CreateDestructableZ('NTtw', - 3648, 2304, 0, 270, 1.03, 5)
	call CreateDestructableZ('NTtw', - 3456, 2304, 0, 270, .96, 8)
	call CreateDestructableZ('NTtw', - 4032, 2752, 0, 270, 1.05, 7)
	call CreateDestructableZ('NTtw', 1792, 1728, 0, 270, .92, 2)
	call CreateDestructableZ('VTlt', 1344, - 3712, 256, 270, 1.01, 2)
	call CreateDestructableZ('VTlt', 1984, - 3712, 256, 270, .8, 9)
	call CreateDestructableZ('VTlt', 2112, - 3776, 256, 270, 1.19, 1)
	call CreateDestructableZ('VTlt', 2048, - 3584, 256, 270, .89, 4)
	call CreateDestructableZ('VTlt', 1216, - 3584, 256, 270, .83, 1)
	call CreateDestructableZ('VTlt', 1216, - 3904, 256, 270, .88, 1)
	call CreateDestructableZ('VTlt', 1344, - 3840, 256, 270, .95, 4)
	call CreateDestructableZ('VTlt', 1984, - 3840, 256, 270, .95, 8)
	call CreateDestructableZ('VTlt', 2112, - 3904, 256, 270, .87, 3)
	call CreateDestructableZ('YTfc', 1472, - 3712, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1600, - 3712, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1728, - 3712, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, - 3712, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, - 4096, 256, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2912, - 736, 0, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1216, - 4096, 256, 270, .88, 1)
	call CreateDestructableZ('VTlt', 1216, - 4288, 256, 270, .88, 1)
	call CreateDestructableZ('YTfc', 256, - 4032, 128, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 3584, 128, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1344, - 2496, - 1.37, 270, .88, 3)
	call CreateDestructableZ('YTfb', 6368, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1472, - 2368, - .38, 270, .9, 6)
	call CreateDestructableZ('VTlt', 1344, - 2368, 2.87, 270, .83, 0)
	call CreateDestructableZ('YTfb', 6304, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1984, - 3072, 14, 270, .87, 8)
	call CreateDestructableZ('VTlt', 1856, - 2496, 6.44, 270, 1.1, 6)
	call CreateDestructableZ('VTlt', 1920, - 3264, 0, 270, 1.19, 8)
	call CreateDestructableZ('VTlt', 2240, - 2880, 7.19, 270, .89, 7)
	call CreateDestructableZ('VTlt', 1472, - 3264, - .75, 270, 1.06, 8)
	call CreateDestructableZ('VTlt', 2112, - 3264, 0, 270, 1.03, 9)
	call CreateDestructableZ('VTlt', 1664, - 3264, 0, 270, 1.15, 3)
	call CreateDestructableZ('VTlt', 2240, - 3200, 0, 270, 1.03, 6)
	call CreateDestructableZ('VTlt', 1152, - 2560, - 8.25, 270, .99, 4)
	call CreateDestructableZ('VTlt', 1216, - 2688, - 14.63, 270, 1.04, 6)
	call CreateDestructableZ('VTlt', 704, - 2688, - 28.5, 270, 1.18, 8)
	call CreateDestructableZ('VTlt', 448, - 2688, - 13.75, 270, 1.12, 8)
	call CreateDestructableZ('VTlt', 1024, - 2624, - 15.25, 270, 1.11, 6)
	call CreateDestructableZ('VTlt', 1280, - 3264, - 4.12, 270, 1.18, 1)
	call CreateDestructableZ('YTfb', 4192, - 4064, 0, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1472, - 2496, - 2.44, 270, .86, 3)
	call CreateDestructableZ('VTlt', 1792, - 3200, 7.25, 270, 1.06, 3)
	call CreateDestructableZ('YTfb', 7008, - 2912, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 3392, 95.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6336, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5472, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 4544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3296, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3360, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6208, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('VTlt', 1920, - 4800, 133.87, 270, 1.13, 7)
	call CreateDestructableZ('VTlt', 1600, - 4928, 101.62, 270, 1.12, 1)
	call CreateDestructableZ('VTlt', 1536, - 4800, 120.62, 270, .89, 6)
	call CreateDestructableZ('VTlt', 1408, - 4800, 126.62, 270, 1.06, 3)
	call CreateDestructableZ('VTlt', 2048, - 4800, 129.87, 270, 1.04, 5)
	call CreateDestructableZ('VTlt', 1664, - 4800, 115.62, 270, .99, 3)
	call CreateDestructableZ('VTlt', 1792, - 4800, 132.75, 270, 1.18, 4)
	call CreateDestructableZ('YTfc', 320, - 2688, - 10.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', 576, - 2688, - 13.13, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 2688, - 10, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 2560, - 6.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, - 2560, - 38.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 2496, - 1.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1152, - 2432, 34.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 192, - 2752, - 11.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 64, - 2752, - 4.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 64, - 2752, - 1.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 192, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 320, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 384, - 2624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 384, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 384, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 256, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 128, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 0, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 256, - 2368, 28.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 192, - 2176, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 2176, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 448, - 2240, - 1.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', 576, - 2240, - 1.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', 704, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 832, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1472, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1344, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1280, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 1920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 960, - 2240, 12.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1280, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 960, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 576, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 640, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, 832, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, 1088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 256, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 0, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 128, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 224, 992, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 224, 1056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 224, 1120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 160, 1120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 640, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 768, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, 960, - 128, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1280, 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1280, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1408, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1408, 1088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1536, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1664, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1792, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2048, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2432, 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2560, 1088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, 832, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1664, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1792, 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2048, 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2432, 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, 256, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2560, 0, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, - 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2752, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2880, - 320, 1.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1216, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1344, - 128, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1472, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 1984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 2368, 4.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 2496, 10.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2624, - 2624, 23.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2496, - 2624, 10.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2368, - 2624, 4.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2240, - 2624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2240, - 2752, - .13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2240, - 2880, - .25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2048, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1984, - 2944, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1408, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1280, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1152, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 2880, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 2624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1216, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1344, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1472, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1536, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1664, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1792, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 2432, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1408, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2048, - 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2176, - 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2368, - 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, - 2176, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, - 2048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, - 1920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2304, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2432, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1344, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1344, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1344, - 2880, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1472, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1728, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1984, - 2688, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1984, - 2560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2112, - 2560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 1280, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 192, - 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 1280, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 32, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 32, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 96, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 160, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 224, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 288, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 352, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 416, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 480, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 928, - 1568, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 608, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 480, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 352, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 288, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 224, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 160, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 96, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 96, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10112, - 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10240, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1248, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1312, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1376, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1440, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1504, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1568, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 256, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1728, - 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 256, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1920, - 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1792, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1696, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 1632, - 32, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1728, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 1280, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1856, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1728, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1600, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1472, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1344, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1216, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1088, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1024, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1152, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1280, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 1408, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, 576, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1024, 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1920, - 2624, 12.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 2688, 25.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, - 2816, - 9.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 3264, - 2.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', 896, - 3264, - 2.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 960, - 3392, 63.69, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2464, - 1440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6080, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5952, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5824, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5696, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5568, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5440, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4928, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4928, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4288, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 4672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3904, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3392, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 4800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 4928, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4928, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4192, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4128, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4064, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4000, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3872, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3936, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3808, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3744, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3552, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3424, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3488, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, - 4160, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2400, - 1248, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2400, - 1440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3680, - 4384, 0, 270, 1, 0)
	call CreateDestructableZ('BTtc', - 2592, - 2784, 56, 270, .92, 2)
	call CreateDestructableZ('FTtw', - 2368, - 2880, 19.56, 270, .81, 7)
	call CreateDestructableZ('FTtw', - 2496, - 2880, 48.5, 270, .87, 8)
	call CreateDestructableZ('FTtw', - 2496, - 3904, 0, 270, 1.11, 7)
	call CreateDestructableZ('FTtw', - 2624, - 3776, 10.88, 270, .88, 3)
	call CreateDestructableZ('FTtw', - 2496, - 3776, 4.62, 270, .95, 2)
	call CreateDestructableZ('FTtw', - 2752, - 3648, 32.38, 270, 1.14, 3)
	call CreateDestructableZ('FTtw', - 2944, - 3648, 38.75, 270, 1.02, 0)
	call CreateDestructableZ('FTtw', - 3008, - 3520, 64.44, 270, 1.14, 8)
	call CreateDestructableZ('FTtw', - 2816, - 2624, 43.75, 270, .9, 7)
	call CreateDestructableZ('FTtw', - 2944, - 2432, 16.75, 270, .89, 8)
	call CreateDestructableZ('FTtw', - 2816, - 2496, 32.38, 270, .96, 7)
	call CreateDestructableZ('FTtw', - 3264, - 3392, 107.25, 270, 1.13, 2)
	call CreateDestructableZ('FTtw', - 3264, - 3520, 45.44, 270, 1.01, 4)
	call CreateDestructableZ('FTtw', - 3136, - 3392, 101.94, 270, .84, 3)
	call CreateDestructableZ('YTfc', - 4608, - 3264, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4608, - 3136, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4608, - 3008, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4672, - 2880, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4736, - 2752, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4992, - 2432, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5056, - 2304, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5184, - 2240, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5312, - 2112, 172.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5440, - 2112, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5568, - 2048, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5696, - 1984, 177.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, - 1920, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5440, - 3392, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, - 3264, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5632, - 3200, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5696, - 3072, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, - 3008, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5760, - 2560, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5632, - 2496, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5568, - 2368, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5632, - 2240, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5760, - 2368, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5888, - 2432, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4928, - 3072, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5056, - 3200, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4928, - 3264, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4800, - 3200, 179.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 2432, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2400, - 1184, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 2304, 340.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 2176, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3296, - 1440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3232, - 1440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 896, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1024, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1280, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, - 1856, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, - 1920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, - 2048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 2880, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 2880, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 2752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 2624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 2496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 1984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 1856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 1600, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, - 1472, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 1344, 121.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 1344, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 1088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, - 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, - 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 960, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 832, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 576, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 448, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, - 576, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 0, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 256, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, - 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, - 1344, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 1216, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, - 1344, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3168, - 1440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2528, - 608, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2528, - 672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2528, - 736, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2528, - 800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 2528, - 864, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 1344, 13.38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 1472, 17.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 1600, 55.88, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 1728, 120, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13760, 1856, 163.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 1984, 262.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 2112, 293.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 2240, 304, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 2368, 304, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 2496, 285.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 2624, 266.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 2688, 266.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 2688, 304, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 2688, 304, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 2688, 282, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 2624, 266.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 2496, 265.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 2368, 267, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 2240, 267.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 2112, 265, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 1984, 241.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 1856, 132.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 1728, 25.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 1664, 41.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 1536, 10.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 1408, 11.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 1280, 3.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11584, 10752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 2048, 346.25, 270, 1, 0)
	call CreateDestructableZ('LTrc', - 2944, - 64, 39.5, 282, 1, 0)
	call CreateDestructableZ('LTrc', - 3072, - 128, 46.25, 224, 1, 1)
	call CreateDestructableZ('LTrc', - 3072, 0, 74.25, 237, 1, 3)
	call CreateDestructableZ('LTrc', - 6080, - 320, - .38, 9, 1, 3)
	call CreateDestructableZ('LTrc', - 6080, - 448, 0, 196, 1, 0)
	call CreateDestructableZ('LTrc', - 6208, - 448, 0, 327, 1, 1)
	call CreateDestructableZ('OTtw', - 4032, 576, 1.06, 270, .71, 7)
	call CreateDestructableZ('OTtw', - 4096, 704, - .13, 270, .73, 3)
	call CreateDestructableZ('OTtw', - 4224, 640, 18.5, 270, .67, 1)
	call CreateDestructableZ('LTrc', - 4416, 448, 79.12, 218, 1, 1)
	call CreateDestructableZ('JTtw', - 4288, 448, 43.31, 270, 1.14, 1)
	call CreateDestructableZ('JTtw', - 4160, 512, 13, 270, .85, 0)
	call CreateDestructableZ('JTtw', - 4224, 320, 19.25, 270, .96, 9)
	call CreateDestructableZ('JTtw', - 4160, 192, 25, 270, 1.08, 2)
	call CreateDestructableZ('JTtw', - 4032, 256, 66.37, 270, .86, 9)
	call CreateDestructableZ('JTtw', - 4032, 384, 46.88, 270, .88, 7)
	call CreateDestructableZ('JTtw', - 3968, 128, 66, 270, 1.17, 8)
	call CreateDestructableZ('JTtw', - 3840, 512, 82.5, 270, .9, 3)
	call CreateDestructableZ('JTtw', - 4288, 192, 10.63, 270, .99, 7)
	call CreateDestructableZ('JTtw', - 3008, - 256, 12.5, 270, .85, 8)
	call CreateDestructableZ('JTtw', - 3136, - 256, 24.37, 270, 1.18, 5)
	call CreateDestructableZ('JTtw', - 3072, - 384, 5, 270, 1.12, 7)
	call CreateDestructableZ('JTtw', - 4928, - 640, - .5, 270, .9, 9)
	call CreateDestructableZ('JTtw', - 4672, - 832, .38, 270, .93, 9)
	call CreateDestructableZ('JTtw', - 4736, - 704, - 11.38, 270, 1.13, 2)
	call CreateDestructableZ('JTtw', - 5056, - 640, 1, 270, 1.19, 0)
	call CreateDestructableZ('JTtw', - 4928, - 512, 9.75, 270, 1.17, 2)
	call CreateDestructableZ('JTtw', - 4800, - 512, - 2.62, 270, 1, 4)
	call CreateDestructableZ('JTtw', - 3712, - 896, 0, 270, 1.14, 9)
	call CreateDestructableZ('JTtw', - 3520, - 896, 0, 270, .94, 4)
	call CreateDestructableZ('JTtw', - 3520, - 768, 16.37, 270, 1.16, 7)
	call CreateDestructableZ('JTtw', - 3392, - 768, 17.75, 270, 1.07, 6)
	call CreateDestructableZ('JTtw', - 3328, - 896, 0, 270, 1.09, 5)
	call CreateDestructableZ('JTtw', - 3456, - 1024, 0, 270, .88, 7)
	call CreateDestructableZ('JTtw', - 3840, - 896, - .75, 270, .92, 5)
	call CreateDestructableZ('JTtw', - 5632, - 448, 0, 270, 1.16, 8)
	call CreateDestructableZ('JTtw', - 5760, - 384, 0, 270, 1.06, 8)
	call CreateDestructableZ('JTtw', - 5504, - 576, - .13, 270, .84, 2)
	call CreateDestructableZ('JTtw', - 5440, - 448, - 3, 270, .84, 0)
	call CreateDestructableZ('JTtw', - 3968, - 960, .38, 270, .92, 5)
	call CreateDestructableZ('JTtw', - 3904, - 768, - 5.12, 270, .92, 5)
	call CreateDestructableZ('JTtw', - 3776, - 704, - 12.5, 270, .92, 5)
	call CreateDestructableZ('YTfc', - 3200, - 128, 61.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3072, 128, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 2944, 64, 68.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3136, 256, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3264, 320, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3392, 384, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3520, 384, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3648, 448, 82.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 3904, 320, 80.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4416, 320, 41.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4480, 576, 113.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4352, 576, 104.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4608, 576, 116.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4736, 576, 117.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4864, 640, 118.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 4992, 576, 118.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5120, 640, 113.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5184, 768, 97.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5312, 768, 56.13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5376, 640, 53.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 512, 20, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5632, 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5952, 64, - 20.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6080, - 64, 59.38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6144, - 192, 22.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6272, - 320, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6400, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6464, - 512, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6528, - 640, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6656, - 704, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6720, - 832, - 128, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5120, 1088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5312, 1152, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5376, 1280, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 1408, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 1536, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 1664, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 1792, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5504, 1920, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4320, - 4000, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 3456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 3712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 3968, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3968, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5440, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5568, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5696, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5824, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5952, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6080, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6208, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6336, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6592, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6720, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6848, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 3008, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3904, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3392, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4160, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 4288, 0, 270, 1, 0)
	call CreateDestructableZ('NTtw', - 960, - 5440, 0, 270, 1, 4)
	call CreateDestructableZ('YTfc', - 13760, 6592, 59.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13760, 6464, 50.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 6336, 24.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 6464, 46.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14016, 6208, 6.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 6080, 1, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14144, 5952, .13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 5696, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 6656, 64.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14016, 6656, 64.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14144, 6656, 64.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 6656, 66.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 6528, 50.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 6528, 50, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 6656, 62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 6720, 81.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14976, 6720, 81.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15104, 6720, 82.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, 6720, 83, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 6848, 106.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 6976, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 7040, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 7040, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 7168, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 7296, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 7424, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 7424, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 7424, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 7552, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 7680, 112, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 7744, 115, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 7744, 112.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, 7744, 113.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 7744, 114.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 7872, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 8000, 180.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 8128, 237.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 8256, 286.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, 8256, 287.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 8256, 285.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 8256, 282.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8256, 278, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8384, 301.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8512, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8640, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8768, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 8896, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 9024, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 9152, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 9408, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 9408, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14528, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14400, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 9280, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 9408, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14144, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14016, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13760, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 9536, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 9408, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 9280, 305.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 9152, 305.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, 9152, 314, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, 9152, 324.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13248, 9152, 341.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, 9152, 380.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 9152, 432.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 9280, 468.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 9408, 455.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 9536, 370.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 9344, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12032, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11904, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 9472, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 9344, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 9216, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 9088, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 8960, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 8960, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 8960, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 8832, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 8704, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 8576, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 8448, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 8384, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 8384, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 8256, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 8128, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 8000, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 7872, 487.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 7808, 487.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 7808, 487.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, 7808, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 7808, 496.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 7680, 526.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 7552, 566.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 7424, 612.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, 7424, 612.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 7424, 607.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 7424, 605.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 7424, 605.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 7296, 639.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 7168, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 7040, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6912, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6784, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6656, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6528, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6400, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6272, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6144, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 6016, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 5888, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11328, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11584, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11712, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11840, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11968, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12096, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, 5760, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 5888, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6016, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6144, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6272, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6400, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 6400, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 6400, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 6528, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 6656, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 6784, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 6848, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6848, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 6976, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 7104, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 7232, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 7360, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 7424, 648, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 7424, 623.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 7424, 625, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, 7424, 627.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, 7424, 625.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 7424, 625, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 7552, 562.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 7680, 520.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 7808, 495.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, 7808, 495.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, 7808, 497.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, 7808, 496, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 7808, 493.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 7936, 493.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8064, 493.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8192, 493.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8320, 469.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8448, 478.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8576, 470, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 8704, 466.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 8768, 405.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 8768, 358.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 8768, 324.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 8768, 310.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 8768, 305.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 8640, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 8512, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 8384, 305.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 8256, 292, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 8256, 279.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 8256, 274.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, 8256, 272, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 8256, 273.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 8256, 274.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 8128, 233.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 8000, 186.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 7872, 146.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 7744, 121, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 7744, 121.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, 7744, 118.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 7744, 116.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 7744, 112.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 7616, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 7488, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 7360, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 7360, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 7232, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 7104, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13888, 6976, 110.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13760, 6976, 111.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 6912, 111.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, 6784, 108.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13760, 6720, 83.56, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 12448, 6176, 648, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 12064, 6176, 648, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 11616, 6176, 648, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 11744, 7008, 648, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 12512, 7008, 648, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 12256, 8736, 488.25, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15072, 7584, 112.25, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 14944, 6368, 30.91, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6560, 53.53, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6496, 45.06, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6432, 37.19, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6368, 27.3, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6304, 15.39, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15264, 6240, 7.73, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15264, 6176, 2.58, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15328, 6112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15328, 6048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15392, 5984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15392, 5920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15456, 5920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15520, 5856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15584, 5792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15520, 5792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15456, 5856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15328, 5984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15264, 6112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15200, 6240, 7.08, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15136, 6560, 54.09, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 15136, 6624, 62.28, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10048, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9920, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9664, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9408, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9280, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9152, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8896, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 4992, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 4864, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9088, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9216, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9344, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9472, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9728, - 4864, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 4736, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 4608, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 4480, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 4352, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 4224, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9664, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9408, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9280, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9152, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8896, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8128, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, - 4160, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, - 4032, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8064, - 3648, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8192, - 3520, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8320, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 3520, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 3648, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 3904, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 3968, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, - 3968, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 3968, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 3072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8704, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8576, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8448, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8320, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2752, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2624, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2496, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2368, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, - 2240, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8128, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7744, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2240, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2368, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2496, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2624, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2752, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 2880, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7744, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 2880, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 3136, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 3264, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7744, - 3328, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, - 3520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, - 3648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7552, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 4032, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 4160, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 4288, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 4416, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 4544, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7680, - 4672, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7808, - 4672, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7936, - 4672, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8064, - 4672, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8192, - 4672, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8320, - 4672, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 4800, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, - 4928, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8320, - 5056, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8192, - 5056, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8064, - 5056, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7936, - 5056, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 5184, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, - 5312, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7744, - 5312, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, - 5312, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 5312, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 5184, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 5056, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 4928, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, - 4800, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, - 4800, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, - 4800, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7104, - 4800, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, - 4800, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9088, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9216, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9344, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9472, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9728, - 3904, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3648, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3520, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3264, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3136, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2752, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2624, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2496, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2368, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2240, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 2112, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9664, - 2112, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, - 2112, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9472, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9344, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9216, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9088, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, - 2112, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, - 1984, 356.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 2112, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 2240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 2496, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 2624, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 2752, 267.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8896, - 2752, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 2752, 89.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3776, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 2880, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3008, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3136, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3264, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3392, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3520, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, - 3648, 178.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2816, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, - 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5824, - 640, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6016, - 832, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6208, - 832, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6336, - 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6464, - 960, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6592, - 1024, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6720, - 960, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6848, - 960, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7104, - 768, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7168, - 640, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, - 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, - 384, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, - 256, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, - 128, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, 0, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, 128, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7232, 256, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7168, 384, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7040, 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6912, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6784, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6656, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6528, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6400, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6272, 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6144, 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6016, 448, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5952, 320, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5888, 192, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5824, 64, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, - 64, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, - 192, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5696, - 320, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5728, - 416, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5920, - 736, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5856, - 800, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5920, - 800, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5792, - 736, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5728, - 608, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5856, - 864, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 320, 0, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 192, 0, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 64, 0, 0, 270, 1, 0)
	call CreateDestructableZ('JTtw', - 10176, 1024, 0, 270, .93, 7)
	call CreateDestructableZ('YTfc', - 320, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 192, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 64, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 64, 192, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 64, 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4480, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4608, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4736, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4864, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4992, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5120, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5248, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5504, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5632, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5888, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6016, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6144, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6272, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6400, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6528, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6656, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6784, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6912, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 7040, - 1408, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2432, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2688, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5632, - 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5504, - 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, - 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5248, - 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 384, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 256, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 128, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 0, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 128, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 256, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 384, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 512, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 640, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 768, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, 896, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 896, 382.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 896, 246.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, 896, 294.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 896, 369.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, 896, 388.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 896, 442.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 832, 456.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 832, 388.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, 832, 327.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 832, 303.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 832, 283.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 768, 276.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 768, 248.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 768, 225.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 768, 215, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 768, 186.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, 768, 145.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, 768, 121.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, 768, 115.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 768, 83.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, 704, 53.38, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 256, 63.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 128, 49.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 64, 61.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, 64, 61.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, 64, 61.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 64, 117.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, 64, 117.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, 64, 117.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, 64, 117.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, 64, 117.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3328, 64, 111.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, 64, 139.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 64, 139.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 64, 193.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 128, 398.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 128, 441.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, 64, 360.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 64, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 192, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 320, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 448, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 576, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 704, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 832, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 960, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 1088, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, - 1216, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 1344, 242.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5440, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5568, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5696, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5824, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5952, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6080, - 1280, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6144, - 1152, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6144, - 1024, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6016, - 960, 485.75, 270, 1, 0)
	call CreateDestructableZ('NTtw', - 12992, 12480, 166.56, 270, 1.11, 4)
	call CreateDestructableZ('NTtw', - 12992, 12352, 166.69, 270, 1.13, 5)
	call CreateDestructableZ('NTtw', - 13120, 12416, 170.25, 270, 1.16, 5)
	call CreateDestructableZ('NTtw', - 13120, 12288, 160.37, 270, .9, 3)
	call CreateDestructableZ('NTtw', - 12992, 12224, 169.75, 270, 1.06, 3)
	call CreateDestructableZ('NTtw', - 12736, 10816, 269, 270, 1.06, 6)
	call CreateDestructableZ('NTtw', - 12864, 10816, 273.87, 270, .99, 1)
	call CreateDestructableZ('NTtw', - 12864, 11008, 280.12, 270, 1.15, 2)
	call CreateDestructableZ('NTtw', - 12992, 10816, 264.06, 270, 1.14, 6)
	call CreateDestructableZ('NTtw', - 12736, 10944, 274.31, 270, .8, 3)
	call CreateDestructableZ('NTtw', - 12224, 11776, 248, 270, .96, 8)
	call CreateDestructableZ('NTtw', - 12224, 11648, 248, 270, .86, 2)
	call CreateDestructableZ('NTtw', - 11392, 12160, 171.25, 270, 1.09, 4)
	call CreateDestructableZ('NTtw', - 11520, 12224, 212.75, 270, 1.11, 1)
	call CreateDestructableZ('NTtw', - 11456, 12352, 232.62, 270, .83, 4)
	call CreateDestructableZ('NTtw', - 11456, 12544, 241.25, 270, .97, 1)
	call CreateDestructableZ('NTtw', - 11520, 12672, 241.25, 270, .96, 1)
	call CreateDestructableZ('NTtw', - 11392, 12928, 241.25, 270, 1.2, 1)
	call CreateDestructableZ('NTtw', - 11392, 13056, 241.25, 270, .99, 9)
	call CreateDestructableZ('NTtw', - 11520, 12800, 241.25, 270, .83, 6)
	call CreateDestructableZ('NTtw', - 11392, 12672, 241.25, 270, .96, 7)
	call CreateDestructableZ('NTtw', - 11328, 12544, 241.25, 270, .87, 8)
	call CreateDestructableZ('NTtw', - 11328, 12416, 241.25, 270, 1, 4)
	call CreateDestructableZ('NTtw', - 12032, 12288, 241.25, 270, .84, 9)
	call CreateDestructableZ('NTtw', - 12032, 12416, 241.25, 270, .83, 2)
	call CreateDestructableZ('NTtw', - 12096, 12544, 230.12, 270, 1.14, 8)
	call CreateDestructableZ('NTtw', - 12096, 12672, 236.12, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12096, 12800, 239.62, 270, .82, 3)
	call CreateDestructableZ('NTtw', - 11712, 13888, 241.25, 270, 1.06, 2)
	call CreateDestructableZ('NTtw', - 11840, 13760, 241.25, 270, .92, 5)
	call CreateDestructableZ('NTtw', - 11776, 15168, 0, 270, 1.12, 7)
	call CreateDestructableZ('NTtw', - 11904, 15168, 0, 270, 1.04, 9)
	call CreateDestructableZ('NTtw', - 11328, 14528, .06, 270, 1.09, 1)
	call CreateDestructableZ('NTtw', - 11328, 14400, 4.06, 270, .9, 1)
	call CreateDestructableZ('NTtw', - 11456, 14400, 9.44, 270, .89, 0)
	call CreateDestructableZ('NTtw', - 11584, 14464, - 10.38, 270, .82, 3)
	call CreateDestructableZ('NTtw', - 12224, 15104, 147.75, 270, 1.04, 2)
	call CreateDestructableZ('NTtw', - 12352, 15104, 147.75, 270, 1.12, 5)
	call CreateDestructableZ('NTtw', - 12416, 14976, 147.75, 270, .99, 8)
	call CreateDestructableZ('NTtw', - 12416, 14848, 147.75, 270, 1.13, 7)
	call CreateDestructableZ('NTtw', - 12416, 14720, 147.75, 270, .95, 7)
	call CreateDestructableZ('NTtw', - 12544, 14656, 147.75, 270, 1.08, 1)
	call CreateDestructableZ('NTtw', - 12608, 14528, 147.75, 270, 1.07, 4)
	call CreateDestructableZ('NTtw', - 12672, 14400, 147.75, 270, 1.19, 9)
	call CreateDestructableZ('NTtw', - 12800, 14208, 147.75, 270, .98, 2)
	call CreateDestructableZ('NTtw', - 12928, 14080, 147.75, 270, .88, 2)
	call CreateDestructableZ('NTtw', - 14080, 14528, 147.75, 270, 1.12, 0)
	call CreateDestructableZ('NTtw', - 14144, 14656, 147.75, 270, .81, 9)
	call CreateDestructableZ('NTtw', - 14208, 14784, 147.75, 270, .96, 7)
	call CreateDestructableZ('NTtw', - 14208, 14912, 147.75, 270, 1.15, 8)
	call CreateDestructableZ('NTtw', - 14208, 15040, 147.75, 270, 1.05, 5)
	call CreateDestructableZ('NTtw', - 14656, 15040, 0, 270, .87, 5)
	call CreateDestructableZ('NTtw', - 14528, 15040, 0, 270, .81, 6)
	call CreateDestructableZ('NTtw', - 14592, 14848, 0, 270, .93, 4)
	call CreateDestructableZ('NTtw', - 14464, 14848, 0, 270, 1.19, 1)
	call CreateDestructableZ('NTtw', - 14784, 15168, 0, 270, 1.14, 9)
	call CreateDestructableZ('NTtw', - 14464, 14720, 0, 270, 1.1, 7)
	call CreateDestructableZ('NTtw', - 15424, 13888, 61.25, 270, .82, 8)
	call CreateDestructableZ('NTtw', - 15680, 14016, 0, 270, 1.18, 2)
	call CreateDestructableZ('NTtw', - 15424, 13760, 19.62, 270, .99, 5)
	call CreateDestructableZ('NTtw', - 15424, 13632, 12.06, 270, .81, 2)
	call CreateDestructableZ('NTtw', - 14784, 13696, 108, 270, .94, 2)
	call CreateDestructableZ('NTtw', - 14848, 13568, 108, 270, 1.06, 9)
	call CreateDestructableZ('NTtw', - 14912, 13440, 108, 270, 1.17, 1)
	call CreateDestructableZ('NTtw', - 13184, 13440, 147.75, 270, 1.01, 2)
	call CreateDestructableZ('NTtw', - 13312, 13504, 147.75, 270, .81, 2)
	call CreateDestructableZ('NTtw', - 13440, 13504, 147.75, 270, .99, 6)
	call CreateDestructableZ('NTtw', - 13568, 13504, 147.75, 270, .92, 7)
	call CreateDestructableZ('NTtw', - 13696, 13504, 147.75, 270, 1.09, 9)
	call CreateDestructableZ('NTtw', - 13824, 13504, 147.75, 270, .82, 4)
	call CreateDestructableZ('NTtw', - 11456, 14144, 241.25, 270, 1.17, 4)
	call CreateDestructableZ('NTtw', - 11328, 14080, 241.25, 270, 1.05, 6)
	call CreateDestructableZ('NTtw', - 12096, 12096, 241.25, 270, 1.08, 2)
	call CreateDestructableZ('NTtw', - 12160, 11904, 241.25, 270, .81, 4)
	call CreateDestructableZ('NTtw', - 12480, 11328, 260.69, 270, .82, 1)
	call CreateDestructableZ('NTtw', - 12352, 11392, 254.87, 270, .87, 8)
	call CreateDestructableZ('NTtw', - 12352, 11520, 253.5, 270, 1.03, 1)
	call CreateDestructableZ('LTrc', - 13952, 12608, 162.25, 52, 1, 5)
	call CreateDestructableZ('LTrc', - 14080, 12480, 164.12, 46, 1, 4)
	call CreateDestructableZ('LTrc', - 13952, 12416, 148.5, 42, 1, 0)
	call CreateDestructableZ('LTrc', - 14976, 13312, 0, 296, 1, 0)
	call CreateDestructableZ('LTrc', - 14848, 13248, 0, 148, 1, 2)
	call CreateDestructableZ('LTrc', - 14912, 13120, 0, 72, 1, 4)
	call CreateDestructableZ('LTrc', - 15296, 14464, 0, 320, 1, 0)
	call CreateDestructableZ('LTrc', - 15168, 14400, 0, 224, 1, 2)
	call CreateDestructableZ('LTrc', - 14080, 15104, 147.75, 252, 1, 1)
	call CreateDestructableZ('LTrc', - 14016, 14976, 147.75, 42, 1, 2)
	call CreateDestructableZ('LTrc', - 12544, 15104, 147.75, 54, 1, 3)
	call CreateDestructableZ('LTrc', - 12544, 14848, 147.75, 105, 1, 0)
	call CreateDestructableZ('LTrc', - 12608, 14976, 147.75, 113, 1, 1)
	call CreateDestructableZ('LTrc', - 12224, 13440, 241.25, 347, 1, 5)
	call CreateDestructableZ('LTrc', - 12096, 13440, 241.25, 302, 1, 4)
	call CreateDestructableZ('LTrc', - 12096, 13568, 241.25, 157, 1, 2)
	call CreateDestructableZ('LTrc', - 14464, 11328, 36.38, 86, 1, 1)
	call CreateDestructableZ('LTrc', - 14336, 11264, 0, 228, 1, 0)
	call CreateDestructableZ('LTrc', - 14336, 11392, 122.25, 262, 1, 2)
	call CreateDestructableZ('LTrc', - 15040, 11648, .5, 347, 1, 4)
	call CreateDestructableZ('LTrc', - 15040, 11520, 1.5, 165, 1, 5)
	call CreateDestructableZ('LTrc', - 14912, 11520, 21.25, 64, 1, 4)
	call CreateDestructableZ('LTrc', - 15424, 11392, 0, 132, 1, 4)
	call CreateDestructableZ('LTrc', - 15424, 11264, - .13, 287, 1, 5)
	call CreateDestructableZ('LTrc', - 15488, 11520, 0, 2, 1, 1)
	call CreateDestructableZ('LTrc', - 15424, 12736, 0, 90, 1, 3)
	call CreateDestructableZ('LTrc', - 15488, 12544, 0, 171, 1, 3)
	call CreateDestructableZ('LTrc', - 15360, 12544, 0, 5, 1, 4)
	call CreateDestructableZ('LTrc', - 13568, 10752, 0, 116, 1, 0)
	call CreateDestructableZ('LTrc', - 13760, 10752, - .5, 217, 1, 1)
	call CreateDestructableZ('LTrc', - 13632, 10880, - 1.5, 107, 1, 3)
	call CreateDestructableZ('LTrc', - 13888, 10816, - 9.56, 252, 1, 4)
	call CreateDestructableZ('LTrc', - 14080, 12736, 166.75, 96, 1, 2)
	call CreateDestructableZ('LTbr', - 13280, 12512, 186.34, 175, 1.32, 0)
	call CreateDestructableZ('LTbr', - 12512, 10720, 250.73, 129, 1.42, 0)
	call CreateDestructableZ('LTbr', - 12576, 10784, 250.12, 60, 1.36, 0)
	call CreateDestructableZ('LTbr', - 12576, 10720, 253.03, 280, 1.46, 0)
	call CreateDestructableZ('LTbr', - 11168, 11552, 58.06, 201, 1.47, 0)
	call CreateDestructableZ('LTbr', - 11104, 11488, 64.98, 175, 1.14, 0)
	call CreateDestructableZ('LTbr', - 11168, 11488, 6.64, 90, 1.48, 0)
	call CreateDestructableZ('LTbr', - 11104, 11424, 64.33, 301, 1.2, 0)
	call CreateDestructableZ('LTbr', - 11168, 11424, 4.3, 193, 1.14, 0)
	call CreateDestructableZ('YTfc', - 14208, 11392, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 11392, 146.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, 11392, 146.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 11392, 146.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 11392, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 11456, 78.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 11520, 146.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 11584, 147.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 11648, 152.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 11712, 83.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 11840, 128.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 11968, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 12096, 124.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 12224, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 12352, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 12480, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 12608, 96.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 12672, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 12736, 91.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 12800, 150.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 12864, 97.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 12864, 106, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 12864, 81.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 12864, 90, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 12864, 86.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, 12864, 91.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 12480, 140.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 12480, 150.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 12480, 145.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 12480, 159.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 12864, 69.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, 12864, 87.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 12864, 83.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14464, 12800, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14528, 12672, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 12608, 125.19, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 12480, 93.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 12480, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 12352, 97.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 12352, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 12224, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 12096, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 11968, 166.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 11840, 144.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, 11712, 93.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 11648, 95.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, 10752, 248.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, 10880, 146.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 11008, 243.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 11136, 188.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 11200, 226.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 11328, 170.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, 11456, 153.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, 11584, 111, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 11648, 227.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 11776, 137.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, 11904, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 12032, 128.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 12160, 120.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 12288, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 12416, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 12544, 130.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 12672, 207.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 12800, 221.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 12864, 188.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 12992, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 13120, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, 13248, 155.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 13376, 235, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 13504, 193.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 13568, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 13696, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12032, 13760, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11968, 13888, 189.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11904, 14016, 139.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 14080, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, 14208, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 14272, 131.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 14272, 128.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11712, 13760, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11584, 13696, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, 13632, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11328, 13568, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11840, 11072, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 10944, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 10816, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11968, 11008, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12032, 10880, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 10816, 273.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, 10816, 247.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 10688, 252.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 11200, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 11392, 241.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 11520, 217, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, 11648, 224.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11712, 11776, 197.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12096, 14976, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, 14848, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12224, 14720, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, 14592, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12352, 14464, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, 14336, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, 14208, 80.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, 14080, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, 13952, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, 13824, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 13696, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 13568, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, 13440, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 13312, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, 13184, 132.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, 13184, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, 13184, 132.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, 13184, 139.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, 13248, 127.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, 13248, 75.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, 13248, 68.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, 13312, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, 13312, 16, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 13376, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 13504, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 13632, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 13760, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 13888, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 14016, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, 14144, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14144, 14272, 110.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 14336, 86, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 14464, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, 14592, 73.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 14720, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 14848, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 14976, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 15104, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, 15232, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, 13376, 54, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 13504, 108, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 13632, 52.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 13760, 53.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, 13888, 59.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, 14080, 93.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, 14144, 108, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, 14144, 107.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 14144, 107.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 14208, 108, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 13952, 85.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 13952, 86.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14976, 13952, 108, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, 13824, 108, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, 14912, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, 14912, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15104, 15040, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15104, 15168, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, 15168, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, 15040, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, 15040, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13248, 15040, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, 15040, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 15040, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, 15168, 147.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, 15040, - .38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, 14976, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11392, 14912, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11264, 14976, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11200, 10752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11328, 10752, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, 10752, 0, 270, 1, 0)
	call CreateDestructableZ('NTtw', - 12224, 12928, 241.25, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12032, 11968, 241.25, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12928, 13952, 147.75, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12992, 13824, 147.75, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12992, 13696, 147.75, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12288, 13056, 241.25, 270, .88, 6)
	call CreateDestructableZ('NTtw', - 12096, 12928, 241.25, 270, .88, 6)
	call CreateDestructableZ('YTfc', 4416, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5312, - 4096, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, - 4096, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 1664, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 1536, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2176, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 2048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 1920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 6976, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6944, - 2912, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 2112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, - 1984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15424, - 6528, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15424, - 6400, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15424, - 6272, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15360, - 6144, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 6080, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15104, - 6016, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14976, - 6016, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, - 5952, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, - 5952, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14592, - 5888, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14464, - 5888, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 5760, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 5824, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 5760, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 5760, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 5696, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, - 5632, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12992, - 5504, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, - 5440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, - 5312, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, - 5184, 53.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, - 5248, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, - 5312, 68, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 5376, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 5376, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 5376, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 5376, 31.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 5312, 57.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 5248, 11.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 5120, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4992, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4864, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4736, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4608, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4480, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 4352, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 4352, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, - 4224, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, - 4224, 135.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 4096, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 4032, 131.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 4032, 127.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, - 4096, 129, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, - 4160, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12864, - 4288, 102, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, - 4352, 68, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, - 4480, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, - 4608, 81.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, - 4672, 36.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, - 4544, 13.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, - 4352, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, - 4224, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, - 4032, 68, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 3904, 61.13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 3776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 3776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 3904, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14080, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 4096, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, - 4224, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, - 4352, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, - 4480, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, - 4608, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 4736, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 4864, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 4992, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14272, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, - 5248, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14464, - 5184, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14528, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14656, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14784, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, - 5184, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, - 5312, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, - 5440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, - 5440, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 5312, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 5184, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 5056, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 4928, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 4800, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 4672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, - 4544, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15296, - 4416, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15232, - 4288, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15168, - 4160, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, - 4160, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14912, - 4032, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14848, - 3904, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, - 3840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14720, - 3712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14592, - 3648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14464, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14336, - 3520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14208, - 3456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14144, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14016, - 3328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13952, - 3200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13824, - 3200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, - 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13248, - 3072, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 3200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13120, - 3328, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, - 3456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, - 3520, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, - 3648, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, - 3712, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, - 3776, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, - 3776, 102.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 2880, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, - 2688, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, - 2560, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, - 2432, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13376, - 2304, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 2176, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13312, - 2048, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13248, - 1920, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13184, - 1792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13056, - 1792, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12928, - 1728, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, - 1664, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, - 1600, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12032, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11904, - 1536, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, - 1600, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, - 1664, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11584, - 1792, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, - 1920, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, - 2048, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, - 2176, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, - 2304, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, - 2432, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, - 2560, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11456, - 2688, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, - 2816, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, - 2944, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11584, - 3072, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, - 3200, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11712, - 3328, 109.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11840, - 3456, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11776, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11648, - 3584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11520, - 3520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, - 6272, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12736, - 6144, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, - 6144, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, - 6080, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12608, - 6272, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12480, - 6208, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 11904, - 5376, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12800, - 1856, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12672, - 1920, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12544, - 1920, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12416, - 1920, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12288, - 1920, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, - 1856, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12160, - 1728, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 12032, - 1664, 218.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15104, - 4736, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14976, - 4864, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 14976, - 4992, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 15040, - 5120, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13696, - 4928, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 4928, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13568, - 4800, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, - 4672, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13440, - 4544, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13504, - 4416, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 13632, - 4480, 136, 270, 1, 0)
	call CreateDestructableZ('ZTtw', - 13312, - 7552, 128, 270, 1.02, 1)
	call CreateDestructableZ('ZTtc', - 13408, - 7648, 128, 270, 1.05, 2)
	call CreateDestructableZ('ZTtc', - 13344, - 7648, 128, 270, .91, 0)
	call CreateDestructableZ('ZTtc', - 13280, - 7648, 128, 270, 1.02, 0)
	call CreateDestructableZ('ZTtc', - 13088, - 7520, 128, 270, 1.18, 2)
	call CreateDestructableZ('ZTtc', - 13024, - 7520, 128, 270, .89, 1)
	call CreateDestructableZ('ZTtc', - 12960, - 7520, 128, 270, 1.08, 0)
	call CreateDestructableZ('ZTtc', - 12896, - 7584, 128, 270, .89, 1)
	call CreateDestructableZ('ZTtc', - 12896, - 7648, 128, 270, .92, 0)
	call CreateDestructableZ('ZTtc', - 12896, - 7712, 128, 270, .99, 2)
	call CreateDestructableZ('ZTtc', - 12832, - 7776, 128, 270, 1.03, 2)
	call CreateDestructableZ('ZTtc', - 13152, - 7648, 128, 270, .92, 1)
	call CreateDestructableZ('ZTtc', - 12960, - 7840, 128, 270, .87, 1)
	call CreateDestructableZ('ZTtc', - 12768, - 8032, 128, 270, .81, 1)
	call CreateDestructableZ('ZTtc', - 12704, - 8160, 128, 270, .89, 0)
	call CreateDestructableZ('ZTtc', - 13216, - 7840, 128, 270, .97, 1)
	call CreateDestructableZ('ZTtc', - 13024, - 8096, 128, 270, 1.06, 1)
	call CreateDestructableZ('ZTtc', - 12896, - 8288, 128, 270, .98, 1)
	call CreateDestructableZ('ZTtc', - 12896, - 8352, 128, 270, 1.12, 2)
	call CreateDestructableZ('ZTtc', - 12960, - 8416, 128, 270, .87, 0)
	call CreateDestructableZ('ZTtc', - 12960, - 8480, 128, 270, .9, 2)
	call CreateDestructableZ('ZTtc', - 12960, - 8544, 128, 270, 1.18, 0)
	call CreateDestructableZ('ZTtc', - 14624, - 7648, 256, 270, .94, 0)
	call CreateDestructableZ('ZTtc', - 14880, - 7648, 256, 270, .84, 0)
	call CreateDestructableZ('ZTtc', - 15136, - 7712, 256, 270, .96, 2)
	call CreateDestructableZ('ZTtc', - 15200, - 7712, 256, 270, .9, 2)
	call CreateDestructableZ('ZTtc', - 15328, - 7904, 256, 270, .89, 1)
	call CreateDestructableZ('ZTtc', - 15328, - 7968, 256, 270, .86, 1)
	call CreateDestructableZ('ZTtc', - 15456, - 7776, 256, 270, .83, 1)
	call CreateDestructableZ('ZTtc', - 15520, - 7968, 256, 270, .99, 1)
	call CreateDestructableZ('ZTtc', - 15520, - 8160, 256, 270, 1.15, 2)
	call CreateDestructableZ('ZTtc', - 15520, - 8224, 256, 270, .9, 1)
	call CreateDestructableZ('ZTtc', - 15520, - 8352, 256, 270, .97, 1)
	call CreateDestructableZ('ZTtc', - 15520, - 8416, 256, 270, 1.19, 0)
	call CreateDestructableZ('ZTtc', - 15392, - 8352, 256, 270, 1.17, 2)
	call CreateDestructableZ('ZTtc', - 15392, - 8224, 256, 270, .96, 2)
	call CreateDestructableZ('ZTtc', - 15328, - 8160, 256, 270, 1.07, 1)
	call CreateDestructableZ('ZTtc', - 14816, - 7776, 256, 270, .83, 1)
	call CreateDestructableZ('ZTtc', - 14624, - 7712, 256, 270, 1.03, 2)
	call CreateDestructableZ('ZTtc', - 14560, - 7648, 256, 270, 1.17, 2)
	call CreateDestructableZ('ZTtc', - 15456, - 7584, 256, 270, .81, 0)
	call CreateDestructableZ('ZTtc', - 15456, - 7648, 256, 270, 1.08, 0)
	call CreateDestructableZ('ZTtc', - 15456, - 7712, 256, 270, .96, 0)
	call CreateDestructableZ('ZTtc', - 15008, - 7648, 256, 270, .94, 1)
	call CreateDestructableZ('ZTtc', - 15264, - 9312, 256, 270, .99, 0)
	call CreateDestructableZ('ZTtc', - 15136, - 9312, 256, 270, .97, 2)
	call CreateDestructableZ('ZTtc', - 15072, - 9376, 256, 270, 1.17, 2)
	call CreateDestructableZ('ZTtc', - 15008, - 9376, 256, 270, .97, 1)
	call CreateDestructableZ('ZTtc', - 14944, - 9376, 256, 270, 1.14, 2)
	call CreateDestructableZ('ZTtc', - 14880, - 9376, 256, 270, 1.04, 1)
	call CreateDestructableZ('ZTtc', - 14880, - 9440, 256, 270, .99, 1)
	call CreateDestructableZ('ZTtc', - 15456, - 9440, 256, 270, .99, 2)
	call CreateDestructableZ('ZTtc', - 12832, - 9824, 256, 270, 1.14, 0)
	call CreateDestructableZ('ZTtc', - 12896, - 10016, 256, 270, .95, 2)
	call CreateDestructableZ('ZTtc', - 12960, - 10144, 256, 270, 1.14, 0)
	call CreateDestructableZ('ZTtc', - 13024, - 10272, 256, 270, .97, 2)
	call CreateDestructableZ('ZTtc', - 13088, - 10336, 256, 270, 1.18, 0)
	call CreateDestructableZ('ZTtc', - 13216, - 10400, 256, 270, .99, 1)
	call CreateDestructableZ('ZTtc', - 13280, - 10400, 256, 270, 1.1, 2)
	call CreateDestructableZ('ZTtc', - 13088, - 10464, 256, 270, 1.13, 2)
	call CreateDestructableZ('ZTtc', - 12960, - 10464, 256, 270, 1, 0)
	call CreateDestructableZ('ZTtc', - 12896, - 10400, 256, 270, 1.03, 0)
	call CreateDestructableZ('ZTtc', - 12896, - 10336, 256, 270, 1.13, 2)
	call CreateDestructableZ('ZTtc', - 12832, - 10208, 256, 270, .89, 1)
	call CreateDestructableZ('ZTtc', - 12704, - 10080, 256, 270, .99, 1)
	call CreateDestructableZ('ZTtc', - 12704, - 10016, 256, 270, 1.19, 0)
	call CreateDestructableZ('ZTtc', - 12704, - 9952, 256, 270, 1.01, 2)
	call CreateDestructableZ('ZTtc', - 12640, - 9888, 256, 270, 1.01, 2)
	call CreateDestructableZ('ZTtc', - 13216, - 10464, 256, 270, 1.09, 1)
	call CreateDestructableZ('ZTtc', - 13344, - 10336, 256, 270, 1.06, 0)
	call CreateDestructableZ('ZTtc', - 13152, - 8032, 128, 270, 1.15, 0)
	call CreateDestructableZ('ZTtc', - 12640, - 7712, 128, 270, 1.03, 2)
	call CreateDestructableZ('ZTtc', - 15072, - 7712, 256, 270, .86, 0)
	call CreateDestructableZ('ZTtc', - 15264, - 7712, 256, 270, .83, 2)
	call CreateDestructableZ('ZTtc', - 15328, - 7648, 256, 270, 1.08, 2)
	call CreateDestructableZ('ZTtc', - 13280, - 7840, 128, 270, .96, 0)
	call CreateDestructableZ('ATg1', - 1152, 11584, 512, 270, .1, 0)
	call CreateDestructableZ('YTfc', 2112, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 11584, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 11648, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 11776, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 11904, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 12032, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 12160, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 12288, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 12416, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4736, 12544, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4864, 12544, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 12672, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 12800, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 13056, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 13376, 294.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 13504, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 13632, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 13760, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, 13824, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, 13824, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, 13824, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, 13952, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3328, 13952, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, 13952, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3712, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3840, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4480, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4608, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4736, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4864, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4992, 13888, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14016, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14144, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14272, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14400, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14528, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14656, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14784, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 15040, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 15040, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 15040, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3840, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3712, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 15168, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 15040, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 14912, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 14784, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 14656, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 14528, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 14400, 294.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 14336, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 14336, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 14336, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 14464, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 14336, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 14208, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 14080, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 13952, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 13824, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 13696, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 13568, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 13440, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 13312, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 13184, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 13056, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3328, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3712, 12928, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 12800, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3840, 12672, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 12672, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 12672, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 12672, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 12544, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 12416, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4288, 12288, 196.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3840, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3712, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3328, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, 12160, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, 12032, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, 11904, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, 11776, 392.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, 11648, 196.25, 270, 1, 0)
	call CreateDestructableZ('VTlt', 2624, 896, 85.25, 270, 1.01, 8)
	call CreateDestructableZ('VTlt', 3200, 960, 81.37, 270, 1.09, 5)
	call CreateDestructableZ('VTlt', 3584, 192, 299, 270, 1.1, 5)
	call CreateDestructableZ('VTlt', 3456, 192, 291.5, 270, 1.17, 6)
	call CreateDestructableZ('VTlt', 3328, 192, 250.87, 270, 1.14, 8)
	call CreateDestructableZ('VTlt', 2048, 64, 24.62, 270, 1.13, 0)
	call CreateDestructableZ('VTlt', 3008, 192, 235, 270, .91, 9)
	call CreateDestructableZ('VTlt', 3712, 192, 395.37, 270, 1.06, 2)
	call CreateDestructableZ('VTlt', 4096, 704, 470.62, 270, 1.16, 6)
	call CreateDestructableZ('VTlt', 4288, 704, 482.69, 270, .81, 5)
	call CreateDestructableZ('VTlt', 4416, 704, 473.94, 270, 1.14, 6)
	call CreateDestructableZ('VTlt', 4800, 768, 485.75, 270, .94, 1)
	call CreateDestructableZ('VTlt', 4928, 768, 485.75, 270, .91, 1)
	call CreateDestructableZ('VTlt', 5056, 192, 485.75, 270, .8, 0)
	call CreateDestructableZ('VTlt', 5056, 64, 485.75, 270, 1.09, 6)
	call CreateDestructableZ('VTlt', 5056, - 256, 485.75, 270, 1.17, 9)
	call CreateDestructableZ('VTlt', 5120, - 512, 485.75, 270, 1.05, 0)
	call CreateDestructableZ('VTlt', 5120, - 1152, 485.75, 270, .91, 7)
	call CreateDestructableZ('VTlt', 4992, - 1152, 485.75, 270, 1.09, 3)
	call CreateDestructableZ('VTlt', 4736, - 1152, 485.75, 270, .93, 3)
	call CreateDestructableZ('VTlt', 4544, - 1152, 485.75, 270, .89, 8)
	call CreateDestructableZ('VTlt', 4416, - 1152, 485.75, 270, .95, 7)
	call CreateDestructableZ('VTlt', 4288, - 1216, 485.75, 270, 1.06, 6)
	call CreateDestructableZ('VTlt', 4288, - 960, 485.75, 270, 1.08, 6)
	call CreateDestructableZ('VTlt', 4288, - 832, 485.75, 270, 1.06, 8)
	call CreateDestructableZ('VTlt', 4288, - 704, 485.75, 270, .91, 9)
	call CreateDestructableZ('VTlt', 4288, - 576, 485.75, 270, .82, 2)
	call CreateDestructableZ('VTlt', 4288, - 192, 485.75, 270, 1.15, 3)
	call CreateDestructableZ('VTlt', 4288, - 384, 485.75, 270, .93, 8)
	call CreateDestructableZ('VTlt', 3776, 704, 418.94, 270, .91, 9)
	call CreateDestructableZ('VTlt', 3648, 704, 370.94, 270, .83, 9)
	call CreateDestructableZ('VTlt', 3328, 960, 172, 270, .99, 2)
	call CreateDestructableZ('VTlt', 3392, 1088, 38.56, 270, .88, 7)
	call CreateDestructableZ('VTlt', 3456, 704, 309.37, 270, 1.11, 2)
	call CreateDestructableZ('VTlt', 3072, 640, 254.5, 270, .83, 9)
	call CreateDestructableZ('VTlt', 6016, - 1088, 485.75, 270, 1.15, 6)
	call CreateDestructableZ('VTlt', 5888, - 1088, 485.75, 270, .91, 3)
	call CreateDestructableZ('VTlt', 5760, - 1152, 485.75, 270, 1.14, 3)
	call CreateDestructableZ('YTfc', 6080, - 704, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5952, - 576, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5888, - 448, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6048, - 608, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5984, - 480, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6112, - 608, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6048, - 544, 485.75, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 10656, - 9184, 256, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 10592, - 9184, 256, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 10528, - 9184, 256, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 10464, - 9184, 256, 270, 1, 0)
	call CreateDestructableZ('YTfb', - 10400, - 9184, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10816, - 8256, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10688, - 8256, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10560, - 8256, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10432, - 8256, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10304, - 8256, 256, 270, 1, 0)
	call CreateDestructableZ('OTds', - 14784, - 15232, 0, 291, 1, 0)
	call CreateDestructableZ('YTfb', 5280, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5408, - 5152, - 16, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5472, - 5152, - 48, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5536, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5600, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5664, - 5152, - 56, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5728, - 5152, - 40, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5792, - 5152, - 40, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5856, - 5152, - 56, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5920, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5984, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6048, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6112, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6176, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6240, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6304, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6368, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6432, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6496, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6560, - 5152, - 112, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3232, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3296, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3360, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3488, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3552, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3616, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3680, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3744, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3808, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3872, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 3936, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4000, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4064, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4128, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4192, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4256, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4320, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 4384, - 5152, - 64, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5536, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5600, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5664, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5728, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5792, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5856, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5920, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 5984, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6048, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6112, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6176, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfb', 6240, - 5088, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1920, 8512, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 8896, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 9024, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 9280, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 9408, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1856, 9536, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, 9664, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, 9664, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2432, 9664, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, 9600, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, 8384, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3200, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1984, 9536, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, 9536, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, 9536, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2112, 9536, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, 9472, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2624, 9344, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 9216, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 9088, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 8960, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3072, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 8960, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3328, 8256, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, 10368, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 10432, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 10432, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 10496, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 10496, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, 10496, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4480, 10496, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4608, 10432, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 10304, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 10176, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 10048, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 9920, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4736, 9792, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 9728, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4416, 9728, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 9728, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 9728, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 9600, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 9472, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 9344, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 9216, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 9088, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 8960, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4096, 8832, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4224, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4544, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4672, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4800, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 8768, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5184, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5504, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5696, 8704, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 8576, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 8448, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 8192, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 8064, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 7936, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5760, 7808, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5632, 7808, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5504, 7744, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5376, 7744, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5248, 7680, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 5056, 7680, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 7680, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 7808, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 7936, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 8064, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 8192, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4928, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4736, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4608, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4480, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4352, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4160, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 4032, 8320, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 8192, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 8064, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 7872, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 7744, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3968, 7616, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 7488, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 7360, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 7232, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 7104, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 6976, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 6848, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3904, 6720, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3648, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3520, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 6592, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, 6720, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 6848, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 6976, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 7104, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 7232, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2752, 7360, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2880, 7360, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, 7424, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3136, 7424, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3264, 7424, 512, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3392, 7424, 512, 270, 1, 0)
	call CreateDestructableZ('JTtw', - 5696, 1472, 346, 270, 1.02, 8)
	call CreateDestructableZ('JTtw', - 5760, 1792, 343.25, 270, 1.12, 1)
	call CreateDestructableZ('JTtw', - 5696, 1984, 337.25, 270, 1.18, 3)
	call CreateDestructableZ('JTtw', - 5632, 2176, 346, 270, .9, 0)
	call CreateDestructableZ('JTtw', - 5696, 2368, 343.69, 270, 1.16, 1)
	call CreateDestructableZ('JTtw', - 5632, 2496, 346, 270, 1.17, 6)
	call CreateDestructableZ('JTtw', - 5632, 2624, 345.87, 270, 1.11, 2)
	call CreateDestructableZ('JTtw', - 5632, 2752, 345.87, 270, .87, 2)
	call CreateDestructableZ('JTtw', - 5696, 3200, 345.75, 270, 1.17, 7)
	call CreateDestructableZ('JTtw', - 5760, 3072, 346.25, 270, 1.02, 9)
	call CreateDestructableZ('JTtw', - 5952, 2816, 347.25, 270, 1.15, 8)
	call CreateDestructableZ('JTtw', - 6272, 2560, 341.75, 270, .93, 5)
	call CreateDestructableZ('JTtw', - 6400, 2496, 346, 270, .96, 4)
	call CreateDestructableZ('JTtw', - 6656, 2048, 346.75, 270, 1.15, 5)
	call CreateDestructableZ('JTtw', - 6400, - 128, 270.5, 270, .87, 0)
	call CreateDestructableZ('JTtw', - 6592, - 320, 270.62, 270, .99, 5)
	call CreateDestructableZ('JTtw', - 6720, - 384, 271.37, 270, 1.16, 5)
	call CreateDestructableZ('JTtw', - 7040, - 640, 270.5, 270, 1.01, 4)
	call CreateDestructableZ('JTtw', - 7168, - 768, 270.5, 270, 1.04, 9)
	call CreateDestructableZ('JTtw', - 7296, - 832, 270.5, 270, 1.03, 6)
	call CreateDestructableZ('JTtw', - 7360, - 1024, 270.5, 270, .93, 9)
	call CreateDestructableZ('JTtw', - 7424, - 896, 270.5, 270, .81, 5)
	call CreateDestructableZ('JTtw', - 7552, - 896, 270.5, 270, 1.1, 9)
	call CreateDestructableZ('JTtw', - 7680, - 896, 270.5, 270, .98, 0)
	call CreateDestructableZ('JTtw', - 7808, - 896, 270.5, 270, 1.17, 8)
	call CreateDestructableZ('JTtw', - 8000, - 832, 270.69, 270, .85, 5)
	call CreateDestructableZ('JTtw', - 8192, - 704, 268.87, 270, 1.09, 6)
	call CreateDestructableZ('JTtw', - 8320, - 640, 269.75, 270, 1.06, 1)
	call CreateDestructableZ('JTtw', - 8064, 192, 270.25, 270, 1.08, 6)
	call CreateDestructableZ('JTtw', - 7936, 256, 270.25, 270, .92, 1)
	call CreateDestructableZ('JTtw', - 7808, 320, 269.5, 270, 1.03, 1)
	call CreateDestructableZ('JTtw', - 7680, 320, 268.12, 270, 1.11, 1)
	call CreateDestructableZ('JTtw', - 7552, 320, 263.5, 270, .96, 7)
	call CreateDestructableZ('JTtw', - 7360, 256, 268.87, 270, 1.18, 1)
	call CreateDestructableZ('JTtw', - 7168, 256, 265.25, 270, 1.02, 0)
	call CreateDestructableZ('JTtw', - 6784, 64, 267.75, 270, .88, 6)
	call CreateDestructableZ('JTtw', - 8512, 1344, 0, 270, 1, 0)
	call CreateDestructableZ('JTtw', - 8576, 1536, 0, 270, .88, 0)
	call CreateDestructableZ('JTtw', - 8640, 1728, 0, 270, 1.19, 1)
	call CreateDestructableZ('JTtw', - 8704, 1856, 0, 270, .8, 0)
	call CreateDestructableZ('JTtw', - 8832, 1920, 0, 270, 1.18, 4)
	call CreateDestructableZ('JTtw', - 8960, 1984, 0, 270, .94, 5)
	call CreateDestructableZ('JTtw', - 9024, 2112, 0, 270, .96, 7)
	call CreateDestructableZ('JTtw', - 8960, 1728, 0, 270, 1.11, 9)
	call CreateDestructableZ('JTtw', - 8896, 1536, - .25, 270, .88, 4)
	call CreateDestructableZ('JTtw', - 8768, 1408, 0, 270, .87, 0)
	call CreateDestructableZ('JTtw', - 9344, 2240, .75, 270, 1.15, 7)
	call CreateDestructableZ('JTtw', - 9472, 2432, 0, 270, .93, 3)
	call CreateDestructableZ('JTtw', - 9536, 2816, - .13, 270, 1.13, 2)
	call CreateDestructableZ('JTtw', - 9664, 3008, .06, 270, 1.07, 8)
	call CreateDestructableZ('JTtw', - 9728, 3136, .13, 270, 1.01, 6)
	call CreateDestructableZ('JTtw', - 9280, 4928, 346.25, 270, 1.19, 4)
	call CreateDestructableZ('JTtw', - 9216, 4800, 346.25, 270, .99, 0)
	call CreateDestructableZ('JTtw', - 9088, 4672, 346.25, 270, .99, 1)
	call CreateDestructableZ('JTtw', - 8768, 4288, 346.37, 270, .97, 6)
	call CreateDestructableZ('JTtw', - 8704, 4160, 346.25, 270, .81, 2)
	call CreateDestructableZ('JTtw', - 8704, 4032, 346.25, 270, 1.1, 5)
	call CreateDestructableZ('JTtw', - 8576, 3712, 346.75, 270, 1.13, 8)
	call CreateDestructableZ('JTtw', - 8576, 3584, 346.25, 270, .98, 2)
	call CreateDestructableZ('JTtw', - 8128, 3200, 346.25, 270, .95, 7)
	call CreateDestructableZ('JTtw', - 8064, 3072, 346.25, 270, 1.01, 4)
	call CreateDestructableZ('JTtw', - 7936, 3008, 346.25, 270, .82, 8)
	call CreateDestructableZ('JTtw', - 7552, 2688, 346.25, 270, .99, 8)
	call CreateDestructableZ('JTtw', - 7424, 2816, 346.25, 270, 1.11, 9)
	call CreateDestructableZ('JTtw', - 7680, 3520, 345.37, 270, .92, 7)
	call CreateDestructableZ('JTtw', - 7680, 3712, 346, 270, 1.05, 8)
	call CreateDestructableZ('JTtw', - 7744, 3904, 346.19, 270, 1.01, 3)
	call CreateDestructableZ('JTtw', - 7744, 4096, 346.25, 270, .99, 6)
	call CreateDestructableZ('JTtw', - 7680, 4224, 346.25, 270, 1.03, 7)
	call CreateDestructableZ('JTtw', - 7552, 4608, 345.5, 270, 1.15, 4)
	call CreateDestructableZ('JTtw', - 7360, 4800, 341.87, 270, 1.05, 7)
	call CreateDestructableZ('JTtw', - 7296, 4928, 346.25, 270, 1.04, 5)
	call CreateDestructableZ('JTtw', - 6848, 5120, 346.25, 270, 1.11, 7)
	call CreateDestructableZ('JTtw', - 6656, 5184, 339, 270, 1.02, 0)
	call CreateDestructableZ('JTtw', - 5888, 5056, 346.25, 270, 1.18, 6)
	call CreateDestructableZ('JTtw', - 5760, 4928, 346.25, 270, .94, 0)
	call CreateDestructableZ('JTtw', - 5632, 4736, 346.25, 270, 1.12, 6)
	call CreateDestructableZ('JTtw', - 5632, 4480, 346.25, 270, .95, 1)
	call CreateDestructableZ('JTtw', - 9856, 3648, - .25, 270, 1.02, 5)
	call CreateDestructableZ('JTtw', - 9920, 3776, - 1.56, 270, 1.09, 3)
	call CreateDestructableZ('JTtw', - 9984, 4032, - .38, 270, 1.15, 8)
	call CreateDestructableZ('JTtw', - 10176, 4352, - .88, 270, 1.02, 9)
	call CreateDestructableZ('JTtw', - 10304, 4608, - 5.62, 270, 1.01, 3)
	call CreateDestructableZ('JTtw', - 10432, 4864, .25, 270, .96, 2)
	call CreateDestructableZ('JTtw', - 10496, 4992, 3.5, 270, .96, 3)
	call CreateDestructableZ('JTtw', - 10688, 4992, - .25, 270, .88, 8)
	call CreateDestructableZ('JTtw', - 10816, 4800, .13, 270, 1.2, 0)
	call CreateDestructableZ('JTtw', - 10048, 1472, 0, 270, .96, 2)
	call CreateDestructableZ('JTtw', - 10112, 1152, 0, 270, 1.04, 9)
	call CreateDestructableZ('JTtw', - 10240, - 128, 0, 270, .88, 4)
	call CreateDestructableZ('JTtw', - 9792, 1344, - .06, 270, 1.11, 8)
	call CreateDestructableZ('JTtw', - 9600, 1344, - 1, 270, .81, 6)
	call CreateDestructableZ('JTtw', - 9472, 1280, - 40.5, 270, 1.07, 0)
	call CreateDestructableZ('JTtw', - 8896, 1088, - .13, 270, 1.07, 3)
	call CreateDestructableZ('JTtw', - 9152, 1792, .38, 270, .8, 3)
	call CreateDestructableZ('JTtw', - 9216, 1920, 2.5, 270, .9, 3)
	call CreateDestructableZ('JTtw', - 9856, 2240, - .25, 270, 1, 4)
	call CreateDestructableZ('JTtw', - 9920, 2112, - .13, 270, 1.17, 0)
	call CreateDestructableZ('JTtw', - 9792, 1728, - .13, 270, 1.02, 9)
	call CreateDestructableZ('JTtw', - 10176, 64, 0, 270, 1.04, 8)
	call CreateDestructableZ('JTtw', - 10240, - 320, 0, 270, .84, 9)
	call CreateDestructableZ('JTtw', - 10048, - 704, 0, 270, .96, 5)
	call CreateDestructableZ('JTtw', - 9664, - 896, 0, 270, 1.17, 3)
	call CreateDestructableZ('JTtw', - 9536, - 896, 0, 270, .94, 2)
	call CreateDestructableZ('JTtw', - 8896, - 768, 0, 270, .92, 7)
	call CreateDestructableZ('JTtw', - 9984, - 128, 0, 270, .97, 5)
	call CreateDestructableZ('JTtw', - 9856, 0, 7, 270, 1.1, 1)
	call CreateDestructableZ('JTtw', - 9216, - 768, .25, 270, .94, 9)
	call CreateDestructableZ('JTtw', - 8896, - 448, - .06, 270, .8, 0)
	call CreateDestructableZ('JTtw', - 9856, 448, .38, 270, .92, 0)
	call CreateDestructableZ('JTtw', - 8192, - 192, 265.87, 270, .82, 3)
	call CreateDestructableZ('JTtw', - 6784, 1600, 346.25, 270, .96, 8)
	call CreateDestructableZ('JTtw', - 6592, 1472, 346.25, 270, .84, 1)
	call CreateDestructableZ('JTtw', - 6464, 1472, 346.25, 270, 1.12, 9)
	call CreateDestructableZ('JTtw', - 6336, 1472, 346.69, 270, 1.19, 0)
	call CreateDestructableZ('JTtw', - 7744, 2944, 346.25, 270, 1.15, 5)
	call CreateDestructableZ('JTtw', - 8384, 3392, 347.06, 270, 1.04, 8)
	call CreateDestructableZ('JTtw', - 8448, 3584, 346.75, 270, .88, 6)
	call CreateDestructableZ('JTtw', - 8448, 4288, 337.5, 270, .97, 2)
	call CreateDestructableZ('JTtw', - 8128, 4032, 360.19, 270, 1.17, 8)
	call CreateDestructableZ('JTtw', - 8064, 3776, 360.25, 270, .92, 0)
	call CreateDestructableZ('JTtw', - 8000, 3456, 306, 270, 1.11, 6)
	call CreateDestructableZ('JTtw', - 8000, 4800, 337.25, 270, 1.11, 1)
	call CreateDestructableZ('JTtw', - 7872, 4928, 324, 270, 1.02, 5)
	call CreateDestructableZ('JTtw', - 8704, 4736, 324.5, 270, .94, 8)
	call CreateDestructableZ('JTtw', - 9024, - 640, - .38, 270, 1.01, 6)
	call CreateDestructableZ('JTtw', - 9088, - 768, 0, 270, 1.16, 6)
	call CreateDestructableZ('JTtw', - 9088, - 960, 0, 270, 1.06, 8)
	call CreateDestructableZ('JTtw', - 9216, - 1024, 0, 270, .84, 0)
	call CreateDestructableZ('JTtw', - 9344, - 1024, 0, 270, 1.05, 5)
	call CreateDestructableZ('JTtw', - 9472, - 1024, 0, 270, 1.06, 0)
	call CreateDestructableZ('LT07', 3904, - 11584, - 88.78, 90, .1, 0)
	call CreateDestructableZ('YTfc', - 9728, - 768, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10112, - 256, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9856, - 512, 1, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9856, - 896, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, - 640, - .5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9920, - 384, 4, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10240, 5056, 127.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10368, 5120, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10176, 4928, 98.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10112, 4800, 59, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10048, 4672, 59.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9984, 4544, 57.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9920, 4416, 54.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9856, 4288, 56.88, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9792, 4160, 55.88, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9728, 4032, 120.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9728, 3904, 64.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, 3776, 60.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9600, 3648, 9.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, 3520, 45.88, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, 3392, 32.13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, 3264, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9472, 3136, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9408, 3008, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9280, 2944, 64.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9280, 2816, 5.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9216, 2688, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9152, 2560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, 2496, 1.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8960, 2368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 2304, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, 2176, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8704, 2048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8576, 1984, 64.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, 1856, 29.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8448, 1728, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 1600, 60.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 1472, 58.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 1344, 50.38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 1216, 34.63, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5440, 1088, 86.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5568, 1088, 173.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5696, 1088, 173.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 1088, 86.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5952, 1088, 86.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6080, 1088, 173.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6208, 1152, 187.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6336, 1216, 188.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6464, 1216, 118.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6592, 1280, 60.38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6720, 1344, 198.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6848, 1344, 117.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6912, 1472, 199.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7040, 1536, 133.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7168, 1600, 200, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, 1728, 218.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, 1856, 218.31, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7168, 1984, 220.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7040, 2048, 273.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, 2176, 191.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6848, 2304, 253.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6784, 2432, 283.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6720, 2560, 296.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6592, 2688, 265.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6592, 2560, 335.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6464, 2752, 297.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6400, 2880, 286.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6272, 2944, 308.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6144, 3008, 256.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6080, 3136, 205.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6016, 3264, 145.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5952, 3392, 183, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5888, 3520, 158.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5888, 3648, 170.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 3776, 255.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 3904, 243.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 4032, 232.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 4160, 236.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 4288, 180, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5760, 4416, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5824, 4544, 186.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5888, 4672, 133.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 5952, 4800, 183.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6080, 4928, 184.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6208, 4992, 136, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6336, 4992, 150.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6464, 4992, 160.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6592, 4992, 154.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6720, 4992, 149, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6848, 4992, 141.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, 4992, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7104, 4928, 300.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, 4864, 147.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7104, 4800, 204.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7168, 4672, 155.87, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, 4544, 173.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, 4416, 159, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, 4288, 232.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, 4160, 197.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 4032, 174.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 3904, 142.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 3776, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 3648, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 3520, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, 3392, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, 3264, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, 3136, 199.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7168, 3008, 221.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7168, 2880, 232.12, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, 2752, 265.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7296, 2624, 256, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7424, 2560, 328.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7552, 2496, 333.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7680, 2496, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7808, 2496, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7936, 2560, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8064, 2688, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8192, 2816, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8320, 2944, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 3072, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, 3136, 185.56, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8576, 3264, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8704, 3328, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 3392, 253.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 3520, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 3648, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 3776, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, 3904, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8896, 4032, 182.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8896, 4160, 182.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9024, 4288, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9088, 4416, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9216, 4480, 147, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9280, 4608, 243, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9344, 4736, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9472, 4864, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, 4992, 237.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9536, 5120, 346.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6208, 64, 192.69, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6336, 128, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6464, 192, 270.44, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6592, 256, 261, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6720, 320, 124.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6848, 320, 187.06, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, 320, 260.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7104, 384, 261.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7232, 384, 244.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7360, 384, 246.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7488, 448, 196.94, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7616, 512, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7744, 512, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 7872, 512, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8000, 448, 263.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8128, 384, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8192, 256, 270.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8256, 128, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8384, 64, 67.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8448, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 192, 67.62, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 320, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 448, 200.75, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, - 512, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, - 640, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, - 768, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, - 896, 135.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 6976, 448, 131.75, 270, 1, 0)
	call CreateDestructableZ('VTlt', - 10240, 192, 0, 270, 1.03, 6)
	call CreateDestructableZ('VTlt', - 9984, 192, 0, 270, .84, 2)
	call CreateDestructableZ('VTlt', - 10048, 64, .38, 270, .87, 0)
	call CreateDestructableZ('VTlt', - 9856, 192, - 31.25, 270, .98, 0)
	call CreateDestructableZ('VTlt', - 9856, 320, - 28.87, 270, .93, 2)
	call CreateDestructableZ('YTfc', - 10496, 5248, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10368, 5248, 128.5, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 10304, 4928, 32.81, 270, 1, 0)
	call CreateDestructableZ('ZTtc', 2848, - 9824, 0, 270, .89, 1)
	call CreateDestructableZ('ZTtc', 2656, - 9888, 0, 270, 1.08, 1)
	call CreateDestructableZ('ZTtc', 2656, - 9952, 0, 270, 1.01, 1)
	call CreateDestructableZ('ZTtc', 2720, - 9952, 0, 270, 1.11, 0)
	call CreateDestructableZ('ZTtc', 2720, - 10016, 0, 270, 1.04, 1)
	call CreateDestructableZ('ZTtc', 2656, - 10144, 0, 270, 1.07, 0)
	call CreateDestructableZ('ZTtc', 2656, - 10272, 0, 270, 1.04, 2)
	call CreateDestructableZ('ZTtc', 2912, - 10208, 0, 270, 1.07, 0)
	call CreateDestructableZ('ZTtc', 2976, - 10016, 0, 270, 1.17, 1)
	call CreateDestructableZ('ZTtc', 2720, - 10528, 0, 270, .93, 1)
	call CreateDestructableZ('ZTtc', 2912, - 10528, 0, 270, 1.17, 0)
	call CreateDestructableZ('ZTtc', 3104, - 10400, 0, 270, .91, 1)
	call CreateDestructableZ('ZTtc', 3168, - 10336, 0, 270, 1.09, 1)
	call CreateDestructableZ('ZTtc', 3168, - 10208, 0, 270, 1.13, 1)
	call CreateDestructableZ('ZTtc', 3360, - 10016, 0, 270, 1.05, 2)
	call CreateDestructableZ('ZTtc', 3296, - 9824, 0, 270, .82, 0)
	call CreateDestructableZ('ZTtc', 4064, - 9376, - 18.25, 270, .86, 1)
	call CreateDestructableZ('ZTtc', 3168, - 9760, 0, 270, 1.18, 1)
	call CreateDestructableZ('ZTtc', 3040, - 9760, 0, 270, .85, 2)
	call CreateDestructableZ('ZTtc', 3104, - 11808, 0, 270, .87, 2)
	call CreateDestructableZ('ZTtc', 3168, - 11680, 0, 270, 1.12, 0)
	call CreateDestructableZ('ZTtc', 3296, - 11552, 0, 270, 1.16, 1)
	call CreateDestructableZ('ZTtc', 3424, - 11616, 0, 270, .84, 0)
	call CreateDestructableZ('ZTtc', 4000, - 10656, 0, 270, .98, 0)
	call CreateDestructableZ('ZTtc', 4064, - 10592, 0, 270, .87, 2)
	call CreateDestructableZ('ZTtc', 4128, - 10464, 0, 270, 1.01, 2)
	call CreateDestructableZ('ZTtc', 4128, - 10400, 0, 270, .95, 1)
	call CreateDestructableZ('ZTtc', 4192, - 10336, 0, 270, 1.2, 0)
	call CreateDestructableZ('ZTtc', 4256, - 9888, 0, 270, 1.14, 1)
	call CreateDestructableZ('ZTtc', 4256, - 9760, - 1.27, 270, .98, 2)
	call CreateDestructableZ('YTfc', - 9984, - 832, 0, 270, 1, 0)
	call CreateDestructableZ('ZTtc', 3296, - 10272, 0, 270, .91, 2)
	call CreateDestructableZ('ZTtc', 3232, - 10272, 0, 270, .83, 2)
	call CreateDestructableZ('ZTtc', 3104, - 10016, 0, 270, 1.03, 1)
	call CreateDestructableZ('ZTtc', 2592, - 11488, 0, 270, .83, 2)
	call CreateDestructableZ('ZTtc', 2592, - 11360, 0, 270, 1.07, 1)
	call CreateDestructableZ('ZTtc', 2528, - 11296, 0, 270, .8, 2)
	call CreateDestructableZ('ZTtc', 2720, - 11296, 0, 270, 1.03, 2)
	call CreateDestructableZ('ZTtc', 2528, - 11936, 0, 270, 1.1, 1)
	call CreateDestructableZ('ZTtc', 3040, - 12000, 0, 270, .94, 1)
	call CreateDestructableZ('ZTtc', 2336, - 11936, 0, 270, .87, 0)
	call CreateDestructableZ('ZTtc', 2208, - 11936, 0, 270, .87, 2)
	call CreateDestructableZ('ZTtc', 2080, - 11936, 0, 270, .97, 0)
	call CreateDestructableZ('ZTtc', 1888, - 12000, 0, 270, .85, 1)
	call CreateDestructableZ('ZTtc', 1760, - 12000, 0, 270, .8, 2)
	call CreateDestructableZ('ZTtc', 1632, - 12000, 0, 270, 1.07, 2)
	call CreateDestructableZ('ZTtc', 1568, - 12000, 0, 270, .91, 2)
	call CreateDestructableZ('ZTtc', 1504, - 12000, 0, 270, 1.19, 1)
	call CreateDestructableZ('ZTtc', 1376, - 12000, 0, 270, 1, 0)
	call CreateDestructableZ('ZTtc', 1184, - 11936, 0, 270, 1.08, 2)
	call CreateDestructableZ('ZTtc', 1056, - 11936, 0, 270, 1.14, 2)
	call CreateDestructableZ('ZTtc', 4256, - 9568, - 2.95, 270, 1.15, 1)
	call CreateDestructableZ('ZTtc', 4384, - 11360, - .05, 270, .81, 2)
	call CreateDestructableZ('ZTtc', 4384, - 11424, - .05, 270, .86, 0)
	call CreateDestructableZ('ZTtc', 4576, - 11424, .98, 270, .86, 0)
	call CreateDestructableZ('ZTtc', 3808, - 10976, 0, 270, 1.16, 1)
	call CreateDestructableZ('ZTtc', 3744, - 10976, 0, 270, 1.04, 1)
	call CreateDestructableZ('YTfc', 2496, - 10624, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 10496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 10368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 10240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 10112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 10048, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, - 9920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2240, - 9792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, - 9920, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1920, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1792, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1664, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1536, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1536, - 9856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1408, - 9856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1280, - 9856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1216, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 960, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 832, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 704, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 640, - 9856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 9792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, - 9792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 256, - 9792, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 9856, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 9984, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 10112, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 10240, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 10368, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 10496, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 256, - 10560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, - 10560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 10560, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 10688, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 10816, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 10944, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 512, - 11072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 384, - 11072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 256, - 11072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 11072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 11200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 11328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 128, - 11584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 192, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 320, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 448, - 11776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 576, - 11776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 704, - 11776, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 704, - 11648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 704, - 11520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 832, - 11520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 960, - 11520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1088, - 11520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1216, - 11520, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1216, - 11648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1344, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1472, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1536, - 11584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1536, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1664, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1792, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 1920, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 11584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2048, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2176, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2304, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 11584, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 11456, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 11328, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 11200, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2368, - 11072, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2816, - 11648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2688, - 11648, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2560, - 11712, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2496, - 11840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3008, - 11840, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 2944, - 11968, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, - 12864, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3456, - 12736, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3584, - 12672, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3712, - 12608, - 1.25, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3840, - 12544, - 1, 270, 1, 0)
	call CreateDestructableZ('YTfc', 3776, - 12416, - .38, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8512, 128, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, 192, - 16.81, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8640, 64, - 2.37, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8704, - 64, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8768, - 192, .13, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8832, - 320, .25, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 8704, - 384, 0, 270, 1, 0)
	call CreateDestructableZ('YTfc', - 9984, - 256, 3, 270, 1, 0)
endfunction
//基地和传送石
function CreateUnitsForPlayer_5 takes nothing returns nothing
 local player p= Player(5)
 local unit u= null
	set udg_ZhengPaiWL=CreateUnit(p, 'nfrm', - 768., - 768., 270.)
	set u=CreateUnit(p, 'nbse', - 5920., - 224., 270.)
	set u=CreateUnit(p, 'nbse', - 4448., - 2976., 270.)
	set u=CreateUnit(p, 'nbse', 1888., - 224., 270.)
	set u=CreateUnit(p, 'nbse', - 1440., 8160., 270.)
	set u=CreateUnit(p, 'nbse', - 2336., - 3872., 270.)
	set u=CreateUnit(p, 'nbse', 1632., - 2464., 270.)
	set u=CreateUnit(p, 'nbse', 3616., - 8928., 270.)
	set p=null
	set u=null
endfunction
//中立敌对
function CreateUnitsForPlayer_12 takes nothing returns nothing
 local player p= Player(12)
 local unit u= null
	set u=CreateUnit(p, 'nwlt', 1456.2, - 2702.9, 345.717)
	set u=CreateUnit(p, 'nwlt', 1292.4, - 3062.2, 282.159)
	set u=CreateUnit(p, 'nwlt', 976., - 2795.9, 171.798)
	set u=CreateUnit(p, 'nwlt', 792.7, - 3097.9, 308.143)
	set u=CreateUnit(p, 'nwlt', 588.4, - 2846.8, 286.411)
	set u=CreateUnit(p, 'nwlt', 1704.9, - 3005.6, 253.407)
	set u=CreateUnit(p, 'nqb2', 776.3, - 4506.1, 213.306)
	set u=CreateUnit(p, 'nass', - 12157., 824.7, 21.907)
	set u=CreateUnit(p, 'nqb2', 1226.6, - 4653.2, 40.651)
	set u=CreateUnit(p, 'nfrl', - 14365.7, 11054.6, 266.525)
	set u=CreateUnit(p, 'nqb2', 1169.5, - 5100.4, 263.867)
	set u=CreateUnit(p, 'nqb3', 1916.5, - 5171.2, 190.732)
	set u=CreateUnit(p, 'ngns', - 2913.8, - 3328.4, 206.494)
	set u=CreateUnit(p, 'ngns', - 2932.2, - 2943.6, 51.099)
	set u=CreateUnit(p, 'ngns', - 3329.7, - 2739.6, 66.305)
	set u=CreateUnit(p, 'ngns', - 3756.6, - 2500.1, 303.023)
	set u=CreateUnit(p, 'ngns', - 4586.6, - 2442., 262.746)
	set u=CreateUnit(p, 'nass', - 11958.4, 1297.8, 328.292)
	set u=CreateUnit(p, 'ngns', - 4257.5, - 2708.6, 40.244)
	set u=CreateUnit(p, 'ngns', - 4614.6, - 2148.9, 22.665)
	set u=CreateUnit(p, 'ngns', - 4901., - 2249.5, 356.319)
	set u=CreateUnit(p, 'ngns', - 4918.3, - 1944.5, 194.332)
	set u=CreateUnit(p, 'ngns', - 5489.1, - 1749.5, 165.119)
	set u=CreateUnit(p, 'ngns', - 5874.2, - 1506., 159.153)
	set u=CreateUnit(p, 'ngns', - 3780.6, - 2955.4, 310.736)
	set u=CreateUnit(p, 'ngns', - 4115.4, - 2177.3, 294.234)
	set u=CreateUnit(p, 'nanb', 1371.9, - 6049.3, 12.558)
	set u=CreateUnit(p, 'nanb', 1417.5, - 6407., 323.14)
	set u=CreateUnit(p, 'nanb', 1739.3, - 6366.4, 183.631)
	set u=CreateUnit(p, 'nanb', 2001.2, - 6587.5, 65.327)
	set u=CreateUnit(p, 'nass', - 11556.2, 1961.9, 151.616)
	set u=CreateUnit(p, 'nanb', 2270.7, - 6280.2, 124.116)
	set u=CreateUnit(p, 'nanb', 2507.1, - 6397.7, 272.118)
	set u=CreateUnit(p, 'nanb', 2838.3, - 6375.6, 87.223)
	set u=CreateUnit(p, 'nass', - 12041.7, 2502.1, 354.408)
	set u=CreateUnit(p, 'nass', - 11753.8, 2970.5, 343.564)
	set u=CreateUnit(p, 'nass', - 12365.2, 3640.6, 246.98)
	set u=CreateUnit(p, 'nass', - 13564.5, 3750.5, 309.626)
	set u=CreateUnit(p, 'nass', - 14561.2, 3817.1, 338.675)
	set u=CreateUnit(p, 'nass', - 14973.8, 2948.4, 164.437)
	set u=CreateUnit(p, 'nass', - 15112.2, 2181.7, 248.617)
	set u=CreateUnit(p, 'oshm', - 12090.6, 1743.3, 71.435)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 12505.3, 2980.7, 214.515)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14040.9, 3503.2, 7.614)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14836.4, 3400.2, 71.556)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14612.9, 1634.5, 166.679)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14526.5, 1094.6, 196.222)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 15071.7, 985.4, 304.803)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14683.9, 639., 126.676)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 14255.2, 334.2, 347.453)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 13786., 618.3, 225.853)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'oshm', - 13406.7, 303.3, 217.964)
	call SetUnitState(u, UNIT_STATE_MANA, 0)
	set u=CreateUnit(p, 'odoc', - 11632.9, 3526.4, 248.33)
	set u=CreateUnit(p, 'nfrl', - 13768.6, 11013.8, 26.939)
	set u=CreateUnit(p, 'orai', - 15073.4, 627.9, 69.342)
	set u=CreateUnit(p, 'nfrl', - 13337.3, 11162., 296.266)
	set u=CreateUnit(p, 'nfrl', - 14512.9, 11751.2, 329.105)
	set u=CreateUnit(p, 'nfrl', - 14160.7, 12171.9, 70.359)
	set u=CreateUnit(p, 'nfrl', - 13369.4, 12026.6, 351.057)
	set u=CreateUnit(p, 'nfrl', - 12020.4, 11812.1, 44.243)
	set u=CreateUnit(p, 'nfrl', - 11481.9, 11877.2, .352)
	set u=CreateUnit(p, 'nfrl', - 11688.9, 12311.7, 39.684)
	set u=CreateUnit(p, 'nfrl', - 11930.7, 12808.3, 36.915)
	set u=CreateUnit(p, 'nfrl', - 13449.4, 13827.7, 89.377)
	set u=CreateUnit(p, 'nfrl', - 13699.4, 14328.7, 123.963)
	set u=CreateUnit(p, 'nfrl', - 13048.2, 14421.4, 285.434)
	set u=CreateUnit(p, 'nfrl', - 11933.3, 14513.9, 354.946)
	set u=CreateUnit(p, 'nfrl', - 12259.8, 13985.9, 268.119)
	set u=CreateUnit(p, 'nfrl', - 12522.3, 13591.6, 341.257)
	set u=CreateUnit(p, 'nfrl', - 12901.2, 12929.9, 71.117)
	set u=CreateUnit(p, 'nfrl', - 12411.2, 12526.1, 248.299)
	set u=CreateUnit(p, 'nfrl', - 12639.8, 11877., 73.611)
	set u=CreateUnit(p, 'nfrl', - 15307.9, 11731.7, 126.105)
	set u=CreateUnit(p, 'nfrl', - 14938., 12761.9, 338.082)
	set u=CreateUnit(p, 'nfrl', - 14360.7, 13212.6, 204.605)
	set u=CreateUnit(p, 'nfrl', - 13428.5, 13047.6, 65.151)
	set u=CreateUnit(p, 'nfrl', - 14331.4, 13670.1, 55.208)
	set u=CreateUnit(p, 'nfrl', - 14481.8, 14188.4, 25.841)
	set u=CreateUnit(p, 'nfrl', - 14987., 14628., 116.558)
	set u=CreateUnit(p, 'nubw', - 11610.2, 13396.9, 263.12)
	set u=CreateUnit(p, 'nsqo', - 13636.9, 12292.7, 269.383)
	set u=CreateUnit(p, 'nhrr', - 12256.3, 10995.4, 135.256)
	set u=CreateUnit(p, 'nomg', - 15162.7, 13751.3, 266.022)
	set u=CreateUnit(p, 'nnwr', - 9026.4, 6848.3, 6.229)
	set u=CreateUnit(p, 'nnwr', - 8413.3, 6831.6, 357.671)
	set u=CreateUnit(p, 'nfor', - 7792.1, 7248.4, 266.734)
	set u=CreateUnit(p, 'nfor', - 7908.6, 8889.9, 207.176)
	set u=CreateUnit(p, 'nfor', - 8798.7, 10099.6, 190.146)
	set u=CreateUnit(p, 'nfor', - 8226., 10636.6, 187.224)
	set u=CreateUnit(p, 'nfor', - 7940.4, 11474.2, 155.582)
	set u=CreateUnit(p, 'nfor', - 8601.1, 11872.3, 344.509)
	set u=CreateUnit(p, 'nfor', - 9570.8, 12514.5, 287.136)
	set u=CreateUnit(p, 'nfor', - 9480.5, 11722.3, 215.383)
	set u=CreateUnit(p, 'nfor', - 9477.6, 13831.8, 188.63)
	set u=CreateUnit(p, 'nfor', - 8579.4, 14378.1, 7.438)
	set u=CreateUnit(p, 'nfor', - 7831.1, 14977., 304.88)
	set u=CreateUnit(p, 'nfor', - 7802.7, 13997., 135.762)
	set u=CreateUnit(p, 'nfor', - 6817.4, 13990.2, 137.201)
	set u=CreateUnit(p, 'nfor', - 6783.1, 13080.5, 187.784)
	set u=CreateUnit(p, 'nfor', - 7076.7, 12152.2, 345.289)
	set u=CreateUnit(p, 'nfor', - 7617., 12300.3, 86.872)
	set u=CreateUnit(p, 'nfor', - 9621., 8505.5, 50.901)
	set u=CreateUnit(p, 'nfor', - 7081.3, 7260.3, 129.555)
	set u=CreateUnit(p, 'nnwr', - 9222.1, 7754.9, 312.823)
	set u=CreateUnit(p, 'nnwr', - 8778.8, 8595.9, 212.251)
	set u=CreateUnit(p, 'nnwr', - 7732.1, 9779.6, 12.953)
	set u=CreateUnit(p, 'nnwr', - 9095.2, 9803.3, 14.843)
	set u=CreateUnit(p, 'nnwr', - 9590., 10390.3, 34.026)
	set u=CreateUnit(p, 'hsor', - 3478., - 4354.1, 273.75)
	set u=CreateUnit(p, 'owar', - 5591.7, - 5366.8, 357.78)
	set u=CreateUnit(p, 'ntkt', - 3401.8, - 6576.7, 342.687)
	set u=CreateUnit(p, 'nogm', - 5597.7, - 6398.5, 6.971)
	set u=CreateUnit(p, 'opeo', - 2411.9, - 6253.7, 107.714)
	set u=CreateUnit(p, 'ohun', - 4541.3, - 4202.2, 273.77)
	set u=CreateUnit(p, 'nw2w', - 5653.5, - 4360.4, 343.67)
	set u=CreateUnit(p, 'hwat', - 4757.9, - 6079.6, 213.987)
	set u=CreateUnit(p, 'hwat', - 4500.9, - 5803.9, 111.855)
	set u=CreateUnit(p, 'hwat', - 4999.7, - 5294.7, 357.121)
	set u=CreateUnit(p, 'hwat', - 4356.5, - 5113.1, 160.581)
	set u=CreateUnit(p, 'hwat', - 4790.6, - 4519.7, 4.45)
	set u=CreateUnit(p, 'hwat', - 3694.3, - 5386.9, 13.656)
	set u=CreateUnit(p, 'hwat', - 3358.8, - 4973.8, 135.982)
	set u=CreateUnit(p, 'hwat', - 3280.4, - 5722.1, 100.912)
	set u=CreateUnit(p, 'hwat', - 2808.8, - 5243.2, 5.57)
	set u=CreateUnit(p, 'hwat', - 3162.6, - 6179.2, 143.563)
	set u=CreateUnit(p, 'hwat', - 5086.2, - 6464.6, 294.201)
	set u=CreateUnit(p, 'hwat', - 5132., - 4311.6, 70.205)
	set u=CreateUnit(p, 'ndrw', - 11769.7, 8626.3, 184.141)
	set u=CreateUnit(p, 'nbdw', - 14468.8, 9138.2, 271.753)
	set u=CreateUnit(p, 'nowb', - 14654.6, 7353.7, 60.537)
	set u=CreateUnit(p, 'nowb', - 14662.7, 8675.2, 241.893)
	set u=CreateUnit(p, 'nowb', - 14024.6, 8955.4, 54.505)
	set u=CreateUnit(p, 'nowb', - 12790., 8932.6, 257.516)
	set u=CreateUnit(p, 'nowb', - 12185.4, 8447.7, 46.474)
	set u=CreateUnit(p, 'nowb', - 12203.5, 6950.2, 119.161)
	set u=CreateUnit(p, 'nowb', - 12755.9, 7098.6, 128.83)
	set u=CreateUnit(p, 'nowb', - 11582.2, 6792.9, 44.584)
	set u=CreateUnit(p, 'nowb', - 12616.1, 6183.4, 12.481)
	set u=CreateUnit(p, 'nowb', - 12123.6, 6321.7, 269.558)
	set u=CreateUnit(p, 'efon', - 14785., 6073.2, 119.634)
	set u=CreateUnit(p, 'efon', - 14431.2, 5863.3, 242.794)
	set u=CreateUnit(p, 'efon', - 14211.2, 7038.3, 212.856)
	set u=CreateUnit(p, 'efon', - 14342.6, 7650.2, 333.83)
	set u=CreateUnit(p, 'efon', - 15000.2, 8911.7, 137.432)
	set u=CreateUnit(p, 'efon', - 14472.1, 8182.7, 92.574)
	set u=CreateUnit(p, 'efon', - 12125.2, 9114.6, 172.524)
	set u=CreateUnit(p, 'efon', - 12009.1, 7651.9, 66.678)
	set u=CreateUnit(p, 'efon', - 12495.2, 8221.5, 61.767)
	set u=CreateUnit(p, 'ndqv', - 9388.5, - 5304.5, 198.232)
	set u=CreateUnit(p, 'ndqv', - 8863.6, - 5460.6, 69.216)
	set u=CreateUnit(p, 'ndqv', - 8668.9, - 5152.1, 168.645)
	set u=CreateUnit(p, 'ndqv', - 8108.6, - 5453.9, 143.486)
	set u=CreateUnit(p, 'ndqv', - 8539.6, - 4553.2, 156.582)
	set u=CreateUnit(p, 'ndqv', - 9058.9, - 4334.5, 294.41)
	set u=CreateUnit(p, 'ndqv', - 9488.1, - 4526.7, 91.772)
	set u=CreateUnit(p, 'ndqv', - 8023.1, - 4337.1, 336.95)
	set u=CreateUnit(p, 'ndqv', - 7781.9, - 3873.8, 43.244)
	set u=CreateUnit(p, 'ndqv', - 7443.1, - 3536.5, 195.607)
	set u=CreateUnit(p, 'ndqv', - 8000.7, - 3194.8, 98.034)
	set u=CreateUnit(p, 'ndqv', - 8475.3, - 3172.2, 359.615)
	set u=CreateUnit(p, 'ndqv', - 7977.2, - 2488.3, 258.077)
	set u=CreateUnit(p, 'ndqv', - 9304.3, - 3327.9, 235.345)
	set u=CreateUnit(p, 'ndqv', - 9644.6, - 2873.3, 12.964)
	set u=CreateUnit(p, 'ndqv', - 9223.6, - 2715.1, 168.502)
	set u=CreateUnit(p, 'ndqv', - 9642.7, - 3627.5, 235.895)
	set u=CreateUnit(p, 'ndqv', - 7527.3, - 5484.4, 242.223)
	set u=CreateUnit(p, 'ndqv', - 7100.4, - 5219.8, 207.373)
	set u=CreateUnit(p, 'ndqv', - 7622.2, - 2609.1, 94.507)
	set u=CreateUnit(p, 'ndqs', - 9301.8, - 2486.7, 309.187)
	set u=CreateUnit(p, 'nnwr', - 8770., 10894.8, 16.733)
	set u=CreateUnit(p, 'nnwr', - 8873.2, 12457.8, 12.843)
	set u=CreateUnit(p, 'nnwr', - 8064.7, 12827.7, 216.448)
	set u=CreateUnit(p, 'nnwr', - 7131.5, 14976.5, 344.41)
	set u=CreateUnit(p, 'nnwr', - 8742.7, 13760.7, 202.693)
	set u=CreateUnit(p, 'nnwr', - 9158.8, 14291., 5.405)
	set u=CreateUnit(p, 'nfor', - 7305.8, 11421.5, 344.509)
	set u=CreateUnit(p, 'nnwr', - 6670.2, 7880.8, 182.532)
	set u=CreateUnit(p, 'nnwr', - 6507.8, 7078., 77.731)
	set u=CreateUnit(p, 'nnwr', - 6750.7, 9551.3, 295.574)
	set u=CreateUnit(p, 'nnwr', - 6876.6, 10806.8, 250.979)
	set u=CreateUnit(p, 'nfov', - 8901.9, 14908.1, 277.826)
	set u=CreateUnit(p, 'nfor', - 8338.2, 9687.3, 190.146)
	set u=CreateUnit(p, 'nnwr', - 6716.6, 10259.8, 226.077)
	set u=CreateUnit(p, 'nnwr', - 6934.1, 13520., 325.927)
	set u=CreateUnit(p, 'nnwr', - 7804.9, 6826., 357.671)
	set u=CreateUnit(p, 'nfor', - 7765.8, 7729., 266.734)
	set u=CreateUnit(p, 'nfor', - 8648.5, 6633.5, 95.101)
	set u=CreateUnit(p, 'nfor', - 8930.8, 7902.6, 154.297)
	set u=CreateUnit(p, 'nfor', - 8937.6, 8268.5, 174.809)
	set u=CreateUnit(p, 'nfor', - 8329.2, 8666.6, 326.062)
	set u=CreateUnit(p, 'nfor', - 7775.5, 8544.4, 33.52)
	set u=CreateUnit(p, 'nfor', - 7470.8, 8841.2, 59.987)
	set u=CreateUnit(p, 'nfor', - 8179.3, 10039.3, 27.533)
	set u=CreateUnit(p, 'nfor', - 7226.8, 10843.3, 309.681)
	set u=CreateUnit(p, 'nfor', - 8024.7, 12369.3, 11.195)
	set u=CreateUnit(p, 'nfor', - 6540.4, 13723.9, 115.228)
	set u=CreateUnit(p, 'nnwr', - 7059.5, 12869.6, 332.412)
	set u=CreateUnit(p, 'nnwr', - 7928.6, 13708.7, 251.375)
	set u=CreateUnit(p, 'nnwr', - 7733.6, 14469.6, 149.012)
	set u=CreateUnit(p, 'nnwr', - 7485.8, 15140.4, 225.776)
	set u=CreateUnit(p, 'nnwr', - 9156.5, 13784.7, 118.227)
	set u=CreateUnit(p, 'nnwr', - 9477.2, 14666.3, 308.758)
	set u=CreateUnit(p, 'nnwr', - 9374.9, 12165.6, 275.095)
	set u=CreateUnit(p, 'nnwr', - 8682.5, 9543., 11.327)
	set u=CreateUnit(p, 'nnwr', - 6911.5, 8331.2, 331.501)
	set u=CreateUnit(p, 'nnwr', - 6744.8, 7382.2, 271.689)
	set u=CreateUnit(p, 'nnwr', - 7044.7, 6821.3, 190.827)
	set u=CreateUnit(p, 'nnwr', - 8181.9, 7160.5, 160.471)
	set u=CreateUnit(p, 'nnwr', - 9481.9, 7072.3, 16.425)
	set u=CreateUnit(p, 'nnwr', - 9651.9, 7969.8, 16.414)
	set u=CreateUnit(p, 'nnwr', - 7944.7, 10934.6, 6.9)
	set u=CreateUnit(p, 'nnwr', - 7815.7, 12057.6, 355.276)
	set u=CreateUnit(p, 'ndtb', - 4275., 7430., 167.536)
	set u=CreateUnit(p, 'ndtb', - 4215.6, 7142.6, 171.227)
	set u=CreateUnit(p, 'ndtb', - 4002.8, 7510.9, 35.575)
	set u=CreateUnit(p, 'ndtb', - 3901.1, 7125.6, 328.534)
	set u=CreateUnit(p, 'ndtb', - 3743.5, 7585.4, 98.957)
	set u=CreateUnit(p, 'ndtb', - 3570.7, 7302.6, 273.392)
	set u=CreateUnit(p, 'ndtb', - 3351.4, 7576.7, 146.727)
	set u=CreateUnit(p, 'ndtb', - 3471.9, 7869.4, 44.309)
	set u=CreateUnit(p, 'ndtb', - 3687.5, 8033.3, 217.338)
	set u=CreateUnit(p, 'ndtb', - 3759.1, 8222.6, 345.047)
	set u=CreateUnit(p, 'ndtb', - 4007.4, 8314.9, 126.632)
	set u=CreateUnit(p, 'ndtb', - 4053.2, 8118.3, 131.983)
	set u=CreateUnit(p, 'ndtb', - 4262.5, 8283.8, 244.168)
	set u=CreateUnit(p, 'ndtb', - 4428.8, 8154.5, 289.949)
	set u=CreateUnit(p, 'ndtb', - 4693.5, 8253.5, 85.191)
	set u=CreateUnit(p, 'ndtb', - 4879., 8138.2, 328.183)
	set u=CreateUnit(p, 'ndtb', - 5042.9, 8425.5, 215.778)
	set u=CreateUnit(p, 'ndtb', - 5269.5, 8521.1, 153.198)
	set u=CreateUnit(p, 'ndtb', - 5107.7, 8810.2, 288.773)
	set u=CreateUnit(p, 'ndtb', - 5212.1, 9096.6, 180.577)
	set u=CreateUnit(p, 'ndtb', - 4998.6, 9432.3, 260.549)
	set u=CreateUnit(p, 'ndtb', - 5007.5, 9906.4, 36.695)
	set u=CreateUnit(p, 'ndtb', - 4810.6, 9362.7, 153.758)
	set u=CreateUnit(p, 'ndtb', - 4796.5, 9810., 322.634)
	set u=CreateUnit(p, 'ndtb', - 4644.5, 9562.9, 270.415)
	set u=CreateUnit(p, 'ndtb', - 4754.2, 10103.3, 50.022)
	set u=CreateUnit(p, 'ndtb', - 4849.7, 10395.4, 83.839)
	set u=CreateUnit(p, 'ndtb', - 4475.7, 10340.8, 269.887)
	set u=CreateUnit(p, 'ndtb', - 4523.7, 10058.6, 10.734)
	set u=CreateUnit(p, 'ndtb', - 4389.9, 9811.2, 237.367)
	set u=CreateUnit(p, 'ndtb', - 4329., 9586.7, 355.979)
	set u=CreateUnit(p, 'ndtb', - 4203.1, 10252.9, 264.163)
	set u=CreateUnit(p, 'ndtb', - 4121.5, 9939.9, 97.111)
	set u=CreateUnit(p, 'ndtb', - 4117.4, 9676.2, 52.494)
	set u=CreateUnit(p, 'ndtb', - 4155.7, 9450.6, 169.612)
	set u=CreateUnit(p, 'ndtb', - 3861.7, 9485.7, 207.615)
	set u=CreateUnit(p, 'ndtb', - 3839.6, 9845.2, 274.161)
	set u=CreateUnit(p, 'ndtb', - 3815.7, 10318.2, 206.78)
	set u=CreateUnit(p, 'ndtb', - 3944.2, 10167.6, 253.177)
	set u=CreateUnit(p, 'ndtb', - 3478.5, 10294., 8.416)
	set u=CreateUnit(p, 'ndtb', - 3615.5, 9959.3, 260.757)
	set u=CreateUnit(p, 'ndtb', - 3546.1, 9642.5, 298.233)
	set u=CreateUnit(p, 'ndtb', - 3656.1, 9414.1, 246.98)
	set u=CreateUnit(p, 'ndtb', - 3417.8, 9482.1, 161.141)
	set u=CreateUnit(p, 'ndtb', - 3365.3, 10142.6, 37.695)
	set u=CreateUnit(p, 'ndtb', - 3395.2, 9888.4, 51.989)
	set u=CreateUnit(p, 'nsrh', 6788.6, - 2224.5, 179.099)
	set u=CreateUnit(p, 'nogr', 6435., - 1894.1, 95.969)
	set u=CreateUnit(p, 'nogr', 6438.7, - 2248.3, 158.724)
	set u=CreateUnit(p, 'nogr', 6154.1, - 2604., 111.833)
	set u=CreateUnit(p, 'nogr', 6038.2, - 2199.1, 109.273)
	set u=CreateUnit(p, 'nogr', 5904.8, - 1786.5, 311.263)
	set u=CreateUnit(p, 'nogr', 5551.3, - 1965.8, 254.506)
	set u=CreateUnit(p, 'nogr', 5381.7, - 2323.9, 353.639)
	set u=CreateUnit(p, 'nogr', 5257.4, - 2641.1, 310.263)
	set u=CreateUnit(p, 'nogr', 5213.1, - 1761.3, 234.148)
	set u=CreateUnit(p, 'nogr', 6757.6, - 1645.8, 145.892)
	set u=CreateUnit(p, 'nwrg', - 14793.9, - 6329.7, 92.98)
	set u=CreateUnit(p, 'nwrg', - 14461.8, - 6133.7, 100.286)
	set u=CreateUnit(p, 'nwrg', - 14048.8, - 6240.6, 292.806)
	set u=CreateUnit(p, 'nwrg', - 13679.4, - 6068.1, 32.279)
	set u=CreateUnit(p, 'nwrg', - 13264.4, - 6194.2, 145.244)
	set u=CreateUnit(p, 'nwrg', - 12990.6, - 5855.3, 332.995)
	set u=CreateUnit(p, 'nwrg', - 12556.6, - 5669.8, 146.65)
	set u=CreateUnit(p, 'nwrg', - 12244.7, - 5274.1, 99.341)
	set u=CreateUnit(p, 'nwrg', - 12518.3, - 4890.1, 101.385)
	set u=CreateUnit(p, 'nwrg', - 12006.7, - 4710.6, 182.335)
	set u=CreateUnit(p, 'nwrg', - 12417.5, - 4207.4, 157.087)
	set u=CreateUnit(p, 'nwrg', - 11997.7, - 3996.8, 52.912)
	set u=CreateUnit(p, 'nwrg', - 12504.3, - 3156.4, 304.906)
	set u=CreateUnit(p, 'nwrg', - 12029.9, - 3093.7, 259.173)
	set u=CreateUnit(p, 'nwrg', - 12048.2, - 2660.6, 264.761)
	set u=CreateUnit(p, 'nwrg', - 12611.5, - 2650.1, 294.612)
	set u=CreateUnit(p, 'nwrg', - 12922.2, - 2340.6, 300.307)
	set u=CreateUnit(p, 'nwrg', - 11869.2, - 2237.3, 259.289)
	set u=CreateUnit(p, 'nwrg', - 12823.6, - 3845.9, 358.967)
	set u=CreateUnit(p, 'nwrg', - 13324., - 3563.9, 123.424)
	set u=CreateUnit(p, 'nwrg', - 13850.1, - 3490.5, 266.976)
	set u=CreateUnit(p, 'nwrg', - 14336.5, - 4002., 319.91)
	set u=CreateUnit(p, 'nwrg', - 14679.1, - 4034.5, 297.936)
	set u=CreateUnit(p, 'nwrg', - 14482.3, - 4620.8, 260.197)
	set u=CreateUnit(p, 'nwrg', - 13082.1, - 4518.5, 324.962)
	set u=CreateUnit(p, 'nwrg', - 13083.6, - 5033.5, 12.554)
	set u=CreateUnit(p, 'nrzb', - 13378.5, - 4721.9, 338.837)
	set u=CreateUnit(p, 'nfpu', - 12407.6, - 2143.8, 284.172)
	set u=CreateUnit(p, 'nmpg', - 14815.3, - 10078.4, 103.615)
	set u=CreateUnit(p, 'nmpg', - 14436.5, - 10108.6, 252.616)
	set u=CreateUnit(p, 'nmpg', - 14339.3, - 9787.8, 337.664)
	set u=CreateUnit(p, 'nmpg', - 13835.3, - 9856.3, 35.926)
	set u=CreateUnit(p, 'nmpg', - 13992.8, - 9321.1, 260.648)
	set u=CreateUnit(p, 'nmpg', - 13581.6, - 9598.2, 359.176)
	set u=CreateUnit(p, 'nmpg', - 13879.4, - 8845.2, 240.454)
	set u=CreateUnit(p, 'nmpg', - 14246.3, - 9049., 278.094)
	set u=CreateUnit(p, 'nmpg', - 13576.5, - 8492.8, 185.828)
	set u=CreateUnit(p, 'nmpg', - 13830.7, - 8241.2, 86.959)
	set u=CreateUnit(p, 'nmpg', - 14189.9, - 8505.9, 10.196)
	set u=CreateUnit(p, 'nmpg', - 14597.9, - 8710.5, 40.936)
	set u=CreateUnit(p, 'ntkc', - 2634.1, 12329.1, 91.114)
	set u=CreateUnit(p, 'nrvi', 10235.4, 15096.9, 245.749)
	set u=CreateUnit(p, 'nsgn', - 1488., 14913.8, 271.232)
	set u=CreateUnit(p, 'nsgb', - 742.8, 12726.2, 92.938)
	set u=CreateUnit(p, 'nwzr', - 4659.9, 14915.5, 273.386)
	set u=CreateUnit(p, 'nstl', - 4783.8, 14102.9, 277.997)
	set u=CreateUnit(p, 'nstl', - 4427., 14063.4, 265.895)
	set u=CreateUnit(p, 'nstl', - 4819.5, 13523.7, 283.794)
	set u=CreateUnit(p, 'nstl', - 4429.5, 13494.9, 263.889)
	set u=CreateUnit(p, 'nstl', - 4777.4, 12827.1, 298.967)
	set u=CreateUnit(p, 'nstl', - 4437.1, 12816.9, 255.093)
	set u=CreateUnit(p, 'nstl', - 4545.6, 12201.1, 234.192)
	set u=CreateUnit(p, 'nstl', - 4069.5, 12294.7, 330.127)
	set u=CreateUnit(p, 'hmtt', - 12201., - 15223.2, 248.28)
	set u=CreateUnit(p, 1852207203, - 7846.3, - 9418.4, 285.423)
	set u=CreateUnit(p, 1852207203, - 7499.2, - 9250.3, 285.423)
	set u=CreateUnit(p, 'nstl', - 2869.3, 12660.5, 353.21)
	set u=CreateUnit(p, 'nstl', - 2509.5, 13262.8, 302.023)
	set u=CreateUnit(p, 'nstl', - 2772.6, 13610.9, 96.254)
	set u=CreateUnit(p, 'nstl', - 2812., 13096.1, 305.023)
	set u=CreateUnit(p, 'nstl', - 2433.1, 12741.7, 110.46)
	set u=CreateUnit(p, 'nstl', - 2443., 13759.6, 136.685)
	set u=CreateUnit(p, 'nstl', - 2738.5, 14172.5, 308.495)
	set u=CreateUnit(p, 'nstl', - 2473.9, 14246.3, 217.877)
	set u=CreateUnit(p, 'nstl', - 2760.9, 15020.9, 197.101)
	set u=CreateUnit(p, 'nstl', - 2379.6, 14865.7, 335.533)
	set u=CreateUnit(p, 'nstl', - 2001.7, 15075.5, 168.393)
	set u=CreateUnit(p, 'nstl', - 1784., 14374.5, 2.922)
	set u=CreateUnit(p, 'nstl', - 1429.4, 14281.8, 188.685)
	set u=CreateUnit(p, 'nstl', - 1688.6, 13921.2, 147.111)
	set u=CreateUnit(p, 'nstl', - 1401.8, 13660.9, 233.862)
	set u=CreateUnit(p, 'nstl', - 1736.4, 13398.7, 88.596)
	set u=CreateUnit(p, 'nstl', - 1467.2, 13180.2, 64.843)
	set u=CreateUnit(p, 'nstl', - 1789.5, 12909.6, 97.979)
	set u=CreateUnit(p, 'nstl', - 1493.3, 12733.9, 39.069)
	set u=CreateUnit(p, 'nstl', - 1776.5, 12407.5, 10.602)
	set u=CreateUnit(p, 'nstl', - 1414.2, 12260., 5.647)
	set u=CreateUnit(p, 'nstl', - 978.7, 12463.7, 63.129)
	set u=CreateUnit(p, 'nstl', - 668., 12251.4, 112.273)
	set u=CreateUnit(p, 'nstl', - 642.1, 13261.8, 301.496)
	set u=CreateUnit(p, 'nstl', - 924.3, 13448.1, 29.972)
	set u=CreateUnit(p, 'nstl', - 629.9, 13829.5, 167.931)
	set u=CreateUnit(p, 'nstl', - 872.2, 14201.3, 86.883)
	set u=CreateUnit(p, 'nstl', - 587.9, 14519.1, 102.297)
	set u=CreateUnit(p, 'nstl', - 833.4, 14795.4, 223.732)
	set u=CreateUnit(p, 'nstl', - 587., 15076., 300.32)
	set u=CreateUnit(p, 'nstl', - 233.4, 14971.1, 168.997)
	set u=CreateUnit(p, 1853056884, 200., 14891.6, 267.94)
	set u=CreateUnit(p, 'nstl', 362.3, 14587., 177.237)
	set u=CreateUnit(p, 'nstl', 12.8, 14449.1, 288.202)
	set u=CreateUnit(p, 'nstl', 240.1, 14185.1, 326.612)
	set u=CreateUnit(p, 'nstl', - 68.2, 14037.9, 151.429)
	set u=CreateUnit(p, 'nstl', 315.7, 13742., 209.593)
	set u=CreateUnit(p, 'nstl', - .0, 13524.8, 86.707)
	set u=CreateUnit(p, 'nstl', 308., 13193., 83.389)
	set u=CreateUnit(p, 'nstl', - 19.7, 13055.2, 184.752)
	set u=CreateUnit(p, 'nstl', 333.8, 12762.7, 314.735)
	set u=CreateUnit(p, 'nstl', - 7.6, 12558.8, 82.795)
	set u=CreateUnit(p, 'nstl', 350.2, 12368.5, 278.193)
	set u=CreateUnit(p, 'nstl', - 2867.7, 14559.8, 20.974)
	set u=CreateUnit(p, 1852861538, 2765.4, 11990.3, 354.551)
	set u=CreateUnit(p, 1852861538, 3192.8, 11863.9, 36.509)
	set u=CreateUnit(p, 1852207212, 2489.2, 11815.6, 61.8)
	set u=CreateUnit(p, 1852861538, 4320.7, 11980.7, 281.852)
	set u=CreateUnit(p, 1852861538, 4503.5, 12242.4, 158.274)
	set u=CreateUnit(p, 1852861538, 4039., 13071.9, 42.694)
	set u=CreateUnit(p, 1852861538, 3593.1, 13185.8, 82.752)
	set u=CreateUnit(p, 1852207212, 3505., 11993.9, 335.785)
	set u=CreateUnit(p, 1852861538, 2454.7, 13204.6, 98.045)
	set u=CreateUnit(p, 1852861538, 3069.1, 14146.7, 288.477)
	set u=CreateUnit(p, 1852861538, 3607.9, 14145.5, 323.887)
	set u=CreateUnit(p, 1852861538, 3902.4, 14598.5, 316.921)
	set u=CreateUnit(p, 1852861538, 4668.3, 14134.5, 317.932)
	set u=CreateUnit(p, 1852861538, 4812.6, 14612.9, 339.092)
	set u=CreateUnit(p, 1852207212, 3983.6, 11873.8, 156.527)
	set u=CreateUnit(p, 1852207212, 4561.7, 12712.3, 177.687)
	set u=CreateUnit(p, 1852207212, 3142.1, 13153.1, 145.112)
	set u=CreateUnit(p, 1852207212, 2714.3, 13246.9, 83.268)
	set u=CreateUnit(p, 1852207212, 2471., 13575.8, 222.304)
	set u=CreateUnit(p, 1852207212, 2605., 14035.9, 105.45)
	set u=CreateUnit(p, 1852207212, 3899.3, 14099., 310.637)
	set u=CreateUnit(p, 1852207212, 4277.5, 14233.6, 261.131)
	set u=CreateUnit(p, 1852207212, 4886.9, 14357.2, 189.08)
	set u=CreateUnit(p, 1852270642, 4457.5, 12995.6, 272.607)
	set u=CreateUnit(p, 1852663652, 4343., 14740.7, 263.536)
	set u=CreateUnit(p, 1852207984, 2347.2, 14172.4, 350.717)
	set u=CreateUnit(p, 1853320818, 4287.7, 10151.4, 228.747)
	set u=CreateUnit(p, 1853058150, 2236.8, 9150.8, 298.574)
	set u=CreateUnit(p, 1853323879, 3039., 7028.4, 17.448)
	set u=CreateUnit(p, 1869050475, 5348., 8028., 129.94)
	set u=CreateUnit(p, 'nfrl', - 15144.8, 12236.8, 202.253)
	set u=CreateUnit(p, 'nfrl', - 15278.3, 13248.3, 134.158)
	set u=CreateUnit(p, 'nfrl', - 13600.1, 14777.7, 226.831)
	set u=CreateUnit(p, 'nfrl', - 13929.8, 13124.6, 111.174)
	set u=CreateUnit(p, 'nfrl', - 13845.3, 11670.9, 12.909)
	set u=CreateUnit(p, 'nfrl', - 12193.3, 11352.5, 181.093)
	set u=CreateUnit(p, 'nfrl', - 11587.7, 13124.9, 205.725)
	set u=CreateUnit(p, 1853252716, 9795.2, 15164.8, 286.575)
	set u=CreateUnit(p, 1852794732, 9398.7, 14965.4, 317.012)
	set u=CreateUnit(p, 1851944036, 10511.7, 15018.8, 208.698)
	set u=CreateUnit(p, 1852141158, - 10306.4, 4076.3, 272.722)
	set u=CreateUnit(p, 1852141158, - 10005.8, 3398.9, 59.207)
	set u=CreateUnit(p, 1852141158, - 10118.7, 2897.8, 107.911)
	set u=CreateUnit(p, 1852141158, - 9694.7, 2524.1, 84.729)
	set u=CreateUnit(p, 1852141158, - 9428.9, 1948.5, 265.603)
	set u=CreateUnit(p, 1852141158, - 7637.7, 1943.7, 26.357)
	set u=CreateUnit(p, 1852141158, - 8193.2, 1672.9, 257.934)
	set u=CreateUnit(p, 1852141158, - 8126.7, 2372.8, 283.451)
	set u=CreateUnit(p, 1852141158, - 8402.5, 2766., 258.582)
	set u=CreateUnit(p, 1752395892, - 14692.2, - 15042.8, 287.223)
	set u=CreateUnit(p, 1969976430, 7282.8, 13564.4, 268.457)
	set u=CreateUnit(p, 1869836407, 7140.3, 14205.1, 272.252)
	set u=CreateUnit(p, 1869836407, 7428.2, 14196.2, 270.132)
	set u=CreateUnit(p, 1869836407, 7139.1, 13752., 272.252)
	set u=CreateUnit(p, 1869836407, 7427., 13743.1, 270.132)
	set u=CreateUnit(p, 1869836407, 7163., 13336.6, 272.252)
	set u=CreateUnit(p, 1869836407, 7450.9, 13327.7, 270.132)
	set u=CreateUnit(p, 1869836407, 7163.2, 12871.5, 272.252)
	set u=CreateUnit(p, 1869836407, 7451.1, 12862.6, 270.132)
	set u=CreateUnit(p, 1869836407, 7154.8, 12443.3, 272.252)
	set u=CreateUnit(p, 1869836407, 7442.7, 12434.4, 270.132)
	set u=CreateUnit(p, 1852141158, - 8881.8, 2708.9, 297.695)
	set u=CreateUnit(p, 1852141158, - 8811.2, 3189.8, 258.329)
	set u=CreateUnit(p, 1852141158, - 9304.6, 3306.9, 323.964)
	set u=CreateUnit(p, 1852141158, - 9142.7, 3832.2, 4.098)
	set u=CreateUnit(p, 1852141158, - 9673.4, 4347.6, 9.02)
	set u=CreateUnit(p, 1852141158, - 9456.6, 3835.1, 224.985)
	set u=CreateUnit(p, 1852141158, - 9612.5, 4663., 120.776)
	set u=CreateUnit(p, 1852141158, - 9928.1, 4934.5, 66.887)
	set u=CreateUnit(p, 1852141158, - 9738.6, 5210.6, 344.421)
	set u=CreateUnit(p, 1852141158, - 9288.5, 4243.4, 122.622)
	set u=CreateUnit(p, 1852141158, - 8529.3, 2186.1, 139.959)
	set u=CreateUnit(p, 'njgb', 5236.1, - 12937.8, 1.681)
	set u=CreateUnit(p, 'njgb', 4818.5, - 12457.3, 10.108)
	set u=CreateUnit(p, 'njgb', 5432.7, - 12048.3, 259.197)
	set u=CreateUnit(p, 'njgb', 4864.3, - 11493.7, 285.939)
	set u=CreateUnit(p, 'njgb', 5190.9, - 10875.7, 21.841)
	set u=CreateUnit(p, 'njgb', 5575.9, - 11433.9, 43.123)
	set u=CreateUnit(p, 'njgb', 6112.7, - 11116.9, 196.464)
	set u=CreateUnit(p, 'njgb', 5871.2, - 10670.6, 352.529)
	set u=CreateUnit(p, 'njgb', 5516.4, - 10235.7, 253.539)
	set u=CreateUnit(p, 'njgb', 6100.6, - 10189.3, 65.942)
	set u=CreateUnit(p, 'njgb', 6007., - 9673.8, 169.623)
	set u=CreateUnit(p, 'njgb', 5210.1, - 10415.4, 297.5)
	set u=CreateUnit(p, 1751871081, - 6915.4, 3983.4, 272.767)
	set u=CreateUnit(p, 1751871081, - 6857., 3524.6, 272.767)
	set u=CreateUnit(p, 1751871081, - 7127.3, 3460.5, 272.767)
	set u=CreateUnit(p, 1751871081, - 6397.8, 3139.2, 233.41)
	set u=CreateUnit(p, 1751871081, - 6544., 3469.7, 233.41)
	set u=CreateUnit(p, 1751871081, - 6331.6, 3799.7, 233.41)
	set u=CreateUnit(p, 1751871081, - 6722.1, 4353.1, 253.553)
	set u=CreateUnit(p, 1751871081, - 6231.4, 4227.2, 253.553)
	set u=CreateUnit(p, 1751871081, - 7045.6, 2863.2, 253.553)
	set u=CreateUnit(p, 1751871081, - 6644.2, 2934.8, 253.553)
	set u=CreateUnit(p, 1751543663, - 6426.9, 4526.3, 259.71)
	set u=null
	set p=null
endfunction
function CreateUnitsForPlayer_15 takes nothing returns nothing
 local player p= Player(15)
 local unit u= null
	set u=CreateUnit(p, 'ncop', - 6336., - 1536., 270.)
	set u=CreateUnit(p, 'ncop', - 8640., - 3776., 270.)
	set u=CreateUnit(p, 'ncop', - 9216., - 3776., 270.)
	set u=CreateUnit(p, 'ncop', - 9984., - 5376., 270.)
	set u=CreateUnit(p, 'ncop', - 13376., 11712., 270.)
	set u=CreateUnit(p, 'ncop', - 12736., 11200., 270.)
	set u=CreateUnit(p, 'ncop', - 12992., 13440., 270.)
	set u=CreateUnit(p, 'ncop', - 12352., 13248., 270.)
	set u=CreateUnit(p, 'ncop', - 10048., 5312., 270.)
	set u=CreateUnit(p, 'ncop', - 10624., 4800., 270.)
	set Ns=CreateUnit(p, 'O004', 2000, - 4100, 180)
	set Os=CreateUnit(p, 'O003', 1930, - 3907, 220)
	set Ps=CreateUnit(p, 'O000', 1752, - 3805, 260)
	set Qs=CreateUnit(p, 'O001', 1550, - 3840, 300)
	set Ls=CreateUnit(p, 'O002', 1418, - 3997, 340)
	set LanXin=CreateUnit(p, 'O023', 1418, - 4203, 20)
	set XuanJin=CreateUnit(p, 'O02J', 1550, - 4360, 60)
	set kongYao=CreateUnit(p, 'O032', 1752, - 4395, 100)
	set qiXiao=CreateUnit(p, 'O031', 1930, - 4293, 140)
	call SetUnitState(Ns, UNIT_STATE_MANA, 0)
	call SetUnitState(Os, UNIT_STATE_MANA, 0)
	call SetUnitState(Ps, UNIT_STATE_MANA, 0)
	call SetUnitState(Qs, UNIT_STATE_MANA, 0)
	call SetUnitState(Ls, UNIT_STATE_MANA, 0)
	call SetUnitState(LanXin, UNIT_STATE_MANA, 0)
	call SetUnitState(XuanJin, UNIT_STATE_MANA, 0)
	call SetUnitState(kongYao, UNIT_STATE_MANA, 0)
	call SetUnitState(qiXiao, UNIT_STATE_MANA, 0)
	set vipbanlv[1]=CreateUnit(Player(0), 'n00G', 1860, - 4140, 254.7)
	set vipbanlv[2]=CreateUnit(Player(1), 'n00G', 1860, - 4140, 254.7)
	set vipbanlv[3]=CreateUnit(Player(2), 'n00G', 1860, - 4140, 254.7)
	set vipbanlv[4]=CreateUnit(Player(3), 'n00G', 1860, - 4140, 254.7)
	set vipbanlv[5]=CreateUnit(Player(4), 'n00G', 1860, - 4140, 254.7)
	set Rs=CreateUnit(p, 'o005', 1550, - 4100, 270)
	set tianXiaMenPai2=CreateUnit(p, 'o02L', 1700, - 4100, 270)
	set tianXiaMenPai3=CreateUnit(p, 'o02Z', 1850, - 4100, 270)
	// set SuiFeng=CreateUnit(p,'N007',488,-597,135) // 随风
	// set CangQiong=CreateUnit(p,'N00F',-1412,-113,300) // 苍穹
	// set FengLing=CreateUnit(p,'N00P',-1411,-1344,0) // 风陵
	set ut=CreateUnit(p, 1865429060, - 5498.1, - 3020.3, 60.353)
	set ft=CreateUnit(p, 1865429046, - 5503.8, 5213.9, 156.857)
	set gt=CreateUnit(p, 1865429046, - 5538.1, 5186.3, 209.428)
	//set u=CreateUnit(p,'o00K',-1256.,-1921.,266.75)
	set Ts=CreateUnit(p, 'o007', 1939.6, - 2738.2, 217.84) // 店小二
set u=CreateUnit(p, 1865429061, - 5054.2, - 3013.2, 129.225)
	//set u=CreateUnit(p,1865429049,-2209.8,459.5,295.041)
	set nt=CreateUnit(p, 'o00A', - 2053.7, - 339.5, 181.33) // 副职郭靖
set ot=CreateUnit(p, 1865429058, 347.5, - 3809.3, 20.701)
	set ht=CreateUnit(p, 1865429046, - 5425.9, 5155.9, 280.391)
	set jt=CreateUnit(p, 1865429046, - 5448.9, 5202.9, 106.67)
	set kt=CreateUnit(p, 1865429046, - 5487.7, 5169.9, 191.717)
	set Us=CreateUnit(p, 1865429046, - 5517.6, 5090.4, 182.565)
	set Zs=CreateUnit(p, 1865429046, - 5540.2, 5134.9, 255.418)
	set Ys=CreateUnit(p, 1865429046, - 5483.4, 5122.9, 225.216)
	set Xs=CreateUnit(p, 1865429046, - 5429.8, 5108.7, 262.307)
	set Ws=CreateUnit(p, 1865429046, - 5453.9, 5084.4, 242.388)
	set Vs=CreateUnit(p, 1865429046, - 5467.9, 5207.8, 242.388)
	set u=CreateUnit(p, 1751671916, - 2092.9, - 2759.4, 336.13)
	set u=CreateUnit(p, 1751671916, - 2095.1, - 2894.8, 344.957)
	set Ss=CreateUnit(p, 1865429048, - 1689.9, - 2919.2, 272.018)
	set u=CreateUnit(p, 1865429062, - 5514., - 2567.8, 315.259)
	set u=CreateUnit(p, 1865429063, 2900.8, - 6110.5, 233.25)
	set u=CreateUnit(p, 1865429064, 3065.6, - 415.5, 260.325)
	set u=CreateUnit(p, 1865429064, 2800.7, - 432.4, 260.325)
	set u=CreateUnit(p, 1865429064, 2554.3, - 442., 260.325)
	set u=CreateUnit(p, 1865429064, 2326.7, - 440.3, 260.325)
	set u=CreateUnit(p, 1865429064, 3095.5, - 1042.9, 88.198)
	set u=CreateUnit(p, 1865429064, 2830.6, - 1059.8, 88.075)
	set u=CreateUnit(p, 1865429064, 2584.1, - 1069.5, 89.265)
	set u=CreateUnit(p, 1865429064, 2356.6, - 1067.7, 91.855)
	set u=CreateUnit(p, 1865429065, 3414.3, - 699.1, 185.39)
	set vt=CreateUnit(p, 1865429066, - 4885.4, 423.9, 273.2)
	//set u=CreateUnit(p,1865429070,503.2,467.8,218.898)
	set xt=CreateUnit(p, 1865429072, 5741.1, - 877.8, 224.9)
	set yt=CreateUnit(p, 1865429074, - 3452.7, 153.4, 251.26)
	set u=CreateUnit(p, 1865429075, 4045.8, - 2255.6, 181.936)
	// 少林高僧-江湖内功
	set udg_sellSkillBook[0]=CreateUnit(p, 1865429329, 3070.6, - 1542.5, 268.656)
	set u=CreateUnit(p, 1865429077, - 14635.1, - 8394.7, 327.01)
	set zt=CreateUnit(p, 1865429078, - 12182.9, - 5939.8, 148.96)
	// 少林高僧-绝学
	set udg_sellSkillBook[2]=CreateUnit(p, 1865429331, 3343.6, - 2375.3, 5.029)
	// 少林高僧-绝内
	set udg_sellSkillBook[3]=CreateUnit(p, 1865429332, 3322.4, - 2730.6, 11.064)
	// 少林高僧-江湖武学
	set udg_sellSkillBook[1]=CreateUnit(p, 1865429330, 2649.6, - 1514.4, 277.06)
	
	set u=CreateUnit(p, 1865429328, - 134.4, 372.9, 106.56)
	set At=CreateUnit(p, 1865429079, - 1174.4, 11346.6, 274.031)
	set Bt=CreateUnit(p, 1865429081, 4580., 419., 179.83)
	set BAO_SHI_SHANG_REN=CreateUnit(p, 'o018', 598.6, - 2015.8, 94.58)
	set SHI_PO_TIAN=CreateUnit(p, 'o019', - 2081.6, - 1962.8, 24.21)
	set u=CreateUnit(p, 1865429313, - 4242.4, - 492.4, 63.2)
	set Ct=CreateUnit(p, 1865429296, - 129.2, - 2927.6, 277.91)
	set GU_DONG_SHANG_REN=CreateUnit(p, 'o011', 670.9, - 1270.5, 175.947)
	set ct=CreateUnit(p, 1865429298, - 11366.8, 10882.4, 86.53)
	set Dt=CreateUnit(p, 1865429314, - 10140.6, 719.9, 154.876)
	set Et=CreateUnit(p, 1865429315, - 9636.7, - 400.7, 28.58)
	set Ft=CreateUnit(p, 1865429320, - 8902.4, - 26., 141.62)
	set PING_YI_ZHI=CreateUnit(p, 'o01J', - 2032.3, - 1442.2, 179.83)
	call ShowUnitHide(gg_unit_nvl2_0005)
	set u=null
	set p=null
endfunction
function InitEnvironment takes nothing returns nothing
 local weathereffect we
 local destructable d
	call SetCameraBounds(- 15616. + GetCameraMargin(CAMERA_MARGIN_LEFT), - 15872. + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 15616. - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15360. - GetCameraMargin(CAMERA_MARGIN_TOP), - 15616. + GetCameraMargin(CAMERA_MARGIN_LEFT), 15360. - GetCameraMargin(CAMERA_MARGIN_TOP), 15616. - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 15872. + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
	call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
	call SetTerrainFogEx(0, 3000., 5000., .5, .0, .0, .0)
	call NewSoundEnvironment("Default")
	call SetAmbientDaySound("VillageDay")
	call SetAmbientNightSound("VillageNight")
	call SetMapMusic("Music", true, 0)
	set wh=CreateSound("Sound\\Ambient\\DoodadEffects\\Seagull1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(wh, "SeagullSound")
	call SetSoundDuration(wh, $E09)
	set ah=CreateSound("Sound\\Music\\mp3Music\\Undead1.mp3", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundDuration(ah, $4A193)
	call SetSoundChannel(ah, 0)
	call SetSoundVolume(ah, $7F)
	call SetSoundPitch(ah, 1.)
	set Bh=CreateSound("Sound\\Music\\mp3Music\\SadMystery.mp3", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundDuration(Bh, 84515)
	call SetSoundChannel(Bh, 0)
	call SetSoundVolume(Bh, $7F)
	call SetSoundPitch(Bh, 1.)
	set bh=CreateSound("Sound\\Interface\\Hint.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(bh, "Hint")
	call SetSoundDuration(bh, $7D6)
	set Ch=CreateSound("Sound\\Ambient\\DoodadEffects\\SargerasLaugh.wav", false, true, true, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(Ch, "SargerasLaugh")
	call SetSoundDuration(Ch, $CFE)
	set Dh=CreateSound("Sound\\Ambient\\DoodadEffects\\UtherReturns.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(Dh, "UtherReturnsSound")
	call SetSoundDuration(Dh, 6711)
	set Eh=CreateSound("Abilities\\Spells\\NightElf\\FaerieFire\\FaerieFireLaunch1.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(Eh, "FaerieFire")
	call SetSoundDuration(Eh, $813)
	set Fh=CreateSound("Abilities\\Spells\\Orc\\Reincarnation\\Reincarnation.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(Fh, "Reincarnation")
	call SetSoundDuration(Fh, $AA8)
	set Gh=CreateSound("Sound\\Interface\\Warning.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(Gh, "Warning")
	call SetSoundDuration(Gh, $770)
	set Hh=CreateSound("Sound\\Interface\\QuestCompleted.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(Hh, "QuestCompleted")
	call SetSoundDuration(Hh, 5155)
	set Ih=CreateSound("Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(Ih, "ReceiveGold")
	call SetSoundDuration(Ih, 589)
	set udg_jail=Rect(9703., - 15845., 11395., - 13510.)
	set udg_yizhan=Rect(- 224, - 1504, 32, - 1248)
	set udg_xuanmenpai=Rect(952, - 4548, 2330, - 2956)
	set udg_tiaozhanqu=Rect(10000, - 13320, 13530, - 10600)
	set Ge=Rect(1504., - 4288., 1856., - 3968.)
	set He=Rect(1664., - 2944., 1920., - 2688.)
	set Ie=Rect(4192., - 4032., 5312., - 3264.)
	set le=Rect(3200., - 4992., 4256., - 4384.)
	set Je=Rect(- 1472., - 1536., 64., - 864.)
	set Ke=Rect(- 1568., - 672., .0, - 64.)
	set Le=Rect(- 3296., 3488., - 2784., 3936.)
	set Me=Rect(- 1056., 5024., - 448., 5600.)
	set Ne=Rect(1216., 3424., 1760., 3936.)
	set Oe=Rect(- 960., - 5248., - 480., - 4896.)
	set botong=Rect(12300, 1550, 12800, 2050)
	set Pe=Rect(- 2240., - 544., - 1952., - 128.)
	set Qe=Rect(1024., - 2944., 1344., - 2752.)
	set Re=Rect(5344., - 5056., 6496., - 4448.)
	set Se=Rect(1728., - 5280., 1984., - 5088.)
	set Te=Rect(- 5600., - 3104., - 5312., - 2816.)
	set Ue=Rect(- 3840., - 2816., - 3328., - 2592.)
	set Ve=Rect(2688., - 6240., 3008., - 5952.)
	set We=Rect(1280., - 6464., 1632., - 6208.)
	set Xe=Rect(3168., - 864., 3488., - 576.)
	set Ye=Rect(- 5056., 192., - 4736., 512.)
	set Ze=Rect(- 11968., 448., - 11680., 736.)
	set df=Rect(- 10688., - 1152., - 4864., 5792.)
	set lh_r=Rect(8800, - 4500, 14300, 4500)
	set we=AddWeatherEffect(df, 1464820599)
	call EnableWeatherEffect(we, true)
	set ef=Rect(- 13568., 2272., - 13440., 2400.)
	set ff=Rect(1376., - 3840., 1472., - 3744.)
	set gf=Rect(- 12448., 1440., - 12288., 1600.)
	set hf=Rect(- 11584., 2496., - 11456., 2624.)
	set jf=Rect(- 12704., 3680., - 12576., 3808.)
	set kf=Rect(- 14688., 3552., - 14560., 3680.)
	set mf=Rect(- 14752., 1760., - 14624., 1888.)
	set nf=Rect(- 14080., 288., - 13952., 416.)
	set of=Rect(- 15328., 96., - 11296., 4352.)
	set we=AddWeatherEffect(of, 1178886760)
	call EnableWeatherEffect(we, true)
	set pf=Rect(- 5568., - 5472., - 5280., - 5216.)
	set qf=Rect(- 4064., - 5408., - 3744., - 5184.)
	set rf=Rect(- 5600., - 4512., - 5376., - 4256.)
	set sf=Rect(- 4608., - 4448., - 4416., - 4288.)
	set tf=Rect(- 3520., - 4576., - 3296., - 4384.)
	set uf=Rect(- 2560., - 6144., - 2368., - 5984.)
	set vf=Rect(- 3424., - 6592., - 3200., - 6368.)
	set wf=Rect(- 5568., - 6496., - 5344., - 6272.)
	set xf=Rect(- 15712., 5568., - 11008., 10176.)
	set we=AddWeatherEffect(xf, 1464755063)
	call EnableWeatherEffect(we, true)
	set yf=Rect(- 15392., 5184., - 15136., 5440.)
	set zf=Rect(- 12768., 6496., - 12576., 6688.)
	set Af=Rect(- 14240., 6176., - 14080., 6304.)
	set af=Rect(- 14144., 7136., - 13984., 7296.)
	set Bf=Rect(- 13888., 8352., - 13728., 8480.)
	set bf=Rect(- 11488., 7936., - 11328., 8096.)
	set Cf=Rect(- 11456., 5856., - 11296., 6048.)
	set cf=Rect(- 13088., 5856., - 12928., 5984.)
	set Df=Rect(- 10272., - 5824., - 6752., - 1600.)
	set we=AddWeatherEffect(Df, 1178886760)
	call EnableWeatherEffect(we, true)
	call SetSoundPosition(ah, - 8512., - 3712., .0)
	call RegisterStackedSound(ah, true, 3520., 4224.)
	set Ef=Rect(- 6080., - 7136., - 1728., - 4224.)
	set we=AddWeatherEffect(Ef, 1380018290)
	call EnableWeatherEffect(we, true)
	set Ff=Rect(- 6400., - 1600., - 6272., - 1472.)
	set Gf=Rect(- 9760., - 5440., - 9632., - 5312.)
	set Hf=Rect(- 10048., - 5440., - 9920., - 5312.)
	set If=Rect(- 6208., - 1568., - 6080., - 1440.)
	set lf=Rect(- 8704., - 3840., - 8576., - 3712.)
	set Jf=Rect(- 8704., - 3648., - 8576., - 3520.)
	set Kf=Rect(- 9280., - 3840., - 9152., - 3712.)
	set Lf=Rect(- 9568., - 3840., - 9440., - 3712.)
	set Mf=Rect(6048., - 672., 7040., 384.)
	set Nf=Rect(- 15680., 10432., - 10976., 15296.)
	set we=AddWeatherEffect(Nf, 1464755063)
	call EnableWeatherEffect(we, true)
	set Of=Rect(- 13440., 11648., - 13312., 11776.)
	set Pf=Rect(- 13728., 11840., - 13600., 11968.)
	set Qf=Rect(- 12800., 11136., - 12672., 11264.)
	set Rf=Rect(1664., 6336., 6048., 10624.)
	set we=AddWeatherEffect(Rf, 1464822903)
	call EnableWeatherEffect(we, true)
	call SetSoundPosition(Bh, 3856., 8480., 512.)
	call RegisterStackedSound(Bh, true, 4384., 4288.)
	set Sf=Rect(- 12480., 11168., - 12352., 11296.)
	set Tf=Rect(- 12416., 13184., - 12288., 13312.)
	set Uf=Rect(- 12160., 12992., - 12032., 13120.)
	set Vf=Rect(- 13056., 13376., - 12928., 13504.)
	set Wf=Rect(- 13248., 13664., - 13120., 13792.)
	set Xf=Rect(- 15264., 10912., - 15136., 11040.)
	set Yf=Rect(- 13312., 14688., - 13184., 14816.)
	set Zf=Rect(- 15072., 14752., - 14944., 14880.)
	set dg=Rect(- 9088., 13504., - 8896., 13664.)
	set eg=Rect(- 6688., 15008., - 6496., 15168.)
	set fg=Rect(- 7968., 13408., - 7776., 13568.)
	set gg=Rect(- 8864., 12992., - 8672., 13152.)
	set hg=Rect(- 8768., 11360., - 8576., 11552.)
	set ig=Rect(- 9504., 12832., - 9312., 13024.)
	set jg=Rect(- 6784., 11328., - 6592., 11520.)
	set kg=Rect(- 6880., 9184., - 6688., 9376.)
	set mg=Rect(- 9568., 11360., - 9376., 11552.)
	set ng=Rect(- 9632., 10880., - 9440., 11072.)
	set og=Rect(- 9056., 9344., - 8864., 9536.)
	set pg=Rect(- 8992., 8832., - 8800., 9024.)
	set qg=Rect(- 7456., 10144., - 7264., 10336.)
	set rg=Rect(- 7136., 12736., - 6944., 12928.)
	set sg=Rect(- 6656., 14176., - 6464., 14368.)
	set tg=Rect(- 6848., 6688., - 6656., 6880.)
	set ug=Rect(- 6912., 8576., - 6720., 8768.)
	set vg=Rect(- 9728., 7584., - 9536., 7744.)
	set wg=Rect(- 9632., 9184., - 9408., 9376.)
	set xg=Rect(- 9088., 7008., - 8928., 7200.)
	set yg=Rect(- 8192., 7776., - 8032., 7936.)
	set zg=Rect(- 9856., 6624., - 9664., 6816.)
	set Ag=Rect(- 5216., 6848., - 5088., 6976.)
	set ag=Rect(5568., - 1056., 5792., - 768.)
	set Bg=Rect(- 3616., - 96., - 3328., 224.)
	set bg=Rect(- 5856., 6784., - 2848., 11328.)
	set Cg=Rect(4576., - 2304., 4736., - 2112.)
	set cg=Rect(4160., - 3168., 7200., - 1216.)
	set we=AddWeatherEffect(cg, 1296393331)
	call EnableWeatherEffect(we, true)
	set Dg=Rect(- 14912., - 4928., - 14720., - 4768.)
	set Eg=Rect(- 15264., - 6560., - 15072., - 6368.)
	set Fg=Rect(- 13120., - 2112., - 12960., - 1952.)
	set Gg=Rect(- 15744., - 6752., - 10656., - 320.)
	set Hg=Rect(- 16096., - 10656., - 12352., - 7168.)
	set Ig=Rect(- 15520., - 10208., - 15296., - 9952.)
	set lg=Rect(- 12384., - 6080., - 12000., - 5600.)
	set Jg=Rect(- 32., 11968., 256., 12224.)
	set Kg=Rect(- 5760., 11520., 512., 15296.)
	set we=AddWeatherEffect(Kg, 1280470369)
	call EnableWeatherEffect(we, true)
	set Lg=Rect(- 1280., 10944., - 1056., 11200.)
	set Mg=Rect(1792., 11456., 5504., 15648.)
	set we=AddWeatherEffect(Mg, 1397647475)
	call EnableWeatherEffect(we, true)
	set Ng=Rect(2112., 11840., 2304., 12032.)
	set Og=Rect(4800., 14016., 4992., 14208.)
	set Pg=Rect(3904., 12800., 4032., 12928.)
	set Qg=Rect(3616., 8448., 3840., 8672.)
	set Rg=Rect(4320., 320., 4512., 512.)
	set Sg=Rect(864., - 5248., 1024., - 5088.)
	set Ug=Rect(- 15424., - 15904., - 13888., - 14368.)
	set Vg=Rect(- 14816., - 15616., - 14592., - 15488.)
	set Wg=Rect(7200., 11904., 7392., 12064.)
	set Xg=Rect(7200., 14592., 7328., 14720.)
	set Yg=Rect(6432., 11648., 8256., 15264.)
	set we=AddWeatherEffect(Yg, 1296393331)
	call EnableWeatherEffect(we, true)
	call SetSoundPosition(ah, 7344., 13456., .0)
	call RegisterStackedSound(ah, true, 1824., 3616.)
	set Zg=Rect(- 10080., 608., - 9888., 800.)
	set dh=Rect(9312., 13696., 9504., 13888.)
	set eh=Rect(8960., 13440., 10976., 15744.)
	set fh=Rect(- 10688., 4704., - 10560., 4864.)
	set gh=Rect(- 10112., 5216., - 9984., 5376.)
	set hh=Rect(- 9824., - 320., - 9664., - 160.)
	set udg_liuqiu=Rect(5728., - 13472., 5952., - 13248.)
	set jh=Rect(3104., - 13344., 3328., - 13120.)
	set kh=Rect(- 9248., - 96., - 8832., 320.)
	set mh=Rect(- 6528., 4224., - 6336., 4384.)
	set nh=Rect(416., - 864., 576., - 704.)
	set oh=Rect(416., - 1152., 576., - 992.)
	set ph=Rect(416., - 1472., 576., - 1312.)
	set qh=Rect(416., - 1760., 576., - 1600.)
	set rh=Rect(- 2784., - 832., - 2624., - 672.)
	set sh=Rect(- 2336., - 832., - 2176., - 672.)
	set th=Rect(- 2272., - 1280., - 2112., - 1120.)
	set uh=Rect(- 9216., - 14464., - 8800., - 14048.)
	set vh=Rect(- 7584., - 11648., - 7392., - 11456.)
	set Gt=CreateDestructable('ATg1', - 12160., - 15104., 270., .1, 0)
call CreateItem(('I04S' ), (( - 13670. )*1.0), (( - 5176.9)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 15044.5 )*1.0), (( - 4362.7)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 14352.8 )*1.0), (( - 5099.9)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 12961.7 )*1.0), (( - 1926.6)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 11668.2 )*1.0), (( - 3676.2)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 13280.1 )*1.0), (( - 3255.6)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 14558.4 )*1.0), (( - 3730.4)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 12682.9 )*1.0), (( - 5421.)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 12819.6 )*1.0), (( - 6280.9)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 11757.7 )*1.0), (( - 1760.2)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 11871.1 )*1.0), (( - 1750.7)*1.0)) // INLINED!!
call CreateItem(('I04S' ), (( - 12008.6 )*1.0), (( - 5355.2)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1694.1 )*1.0), (( - 1810.2)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1881.7 )*1.0), (( - 1924.9)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1657.2 )*1.0), (( - 1924.9)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1772.9 )*1.0), (( - 1919.8)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1894.2 )*1.0), (( - 1812.9)*1.0)) // INLINED!!
call CreateItem((1227897138 ), (( - 1799.6 )*1.0), (( - 1810.2)*1.0)) // INLINED!!
	set we=null
	set d=null
endfunction
function MapStartCreateUnitsAndInitEnvironments takes nothing returns nothing
	call CreateUnitsForPlayer_5()
	call CreateUnitsForPlayer_12()
	call CreateUnitsForPlayer_15()
	call InitEnvironment()
endfunction
//===========================================================
//被动技能范围伤害
//attacker = 攻击者
//attacker = 被攻击者
//spell_id = 技能ID
//range    = 技能范围
//damage   = 伤害值
//effects  = 特效
//possibility = 概率
//mana_cost = 蓝耗
//===========================================================
function UnitAttack_Conditions takes nothing returns boolean
 local unit u= GetAttacker()
 local unit l__ut= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local group g= null
 local integer j= 0
 local integer k= 0
 local real x= 0
 local real y= 0
 local unit dummy= null
	// 嵩山剑法
	if (PassiveWuGongCondition((u ) , ( l__ut) , SONG_SHAN_JIAN_FA)) then // INLINED!!
		call songShanJianFa(u , l__ut)
	endif
	// 千蛛手
    if PassiveWuGongCondition(u , l__ut , QIAN_ZHU_SHOU) then
        call qianZhuShou()
    endif
    // 千蛛手的蜘蛛攻击
    if GetUnitTypeId(u) == 'n00Y' then
        call qianZhuZhu()
    endif
    // 驭蛇奇术
    if PassiveWuGongCondition(u , l__ut , YU_SHE_SHU) then
        call yuSheShu()
	endif
	
	// 落英剑法
	if PassiveWuGongCondition(u , l__ut , LUO_YING_JIAN) and GetRandomReal(1, 100) <= 18 + fuyuan[i] * 0.2 then
		call luoYingJian(u , l__ut)
	endif
	
	// 旋风扫叶腿
	if PassiveWuGongCondition(u , l__ut , XUAN_FENG_TUI) and GetRandomReal(1, 100) <= 18 + fuyuan[i] * 0.2 then
		call xuanFengTui(u , l__ut)
	endif
	// 遭雷劈
	if PassiveWuGongCondition(u , l__ut , ZAO_LEI_PI) and GetRandomReal(1, 100) <= 16 + fuyuan[i] * 0.2 then
		call zaoLeiPi(u , l__ut)
	endif
	// 玄冥神掌
	if GetUnitAbilityLevel(u, XUAN_MING_SHEN_ZHANG) > 0 and GetUnitAbilityLevel(u, JIU_YANG) == 0 and IsUnitEnemy(u, GetOwningPlayer(l__ut)) then
	    call xuanMingShenZhang(u)
	endif
	// 雪山剑法
	if PassiveWuGongCondition(u , l__ut , XUE_SHAN_JIAN_FA) and GetRandomReal(1, 100) <= 16 + fuyuan[i] * 0.2 then
		call xueShanJianFa(u , l__ut)
	endif
	// 金乌刀法
	if PassiveWuGongCondition(l__ut , u , JIN_WU_DAO_FA) and GetRandomReal(1, 100) <= 10 + fuyuan[1 + GetPlayerId(GetOwningPlayer(l__ut))] * 0.4 then
		call jinWuDaoFa(l__ut , u)
	endif
	// 无妄神功
	if PassiveWuGongCondition(u , l__ut , WU_WANG_SHEN_GONG) then
		call wuWangShenGongSpecial(u , l__ut)
	endif
	set u=null
	set l__ut=null
	set p=null
	set dummy=null
	return false
endfunction
function UnitAttack takes nothing returns nothing
 local trigger t= CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t, Condition(function UnitAttack_Conditions))
	set t=null
endfunction
function isDAntique takes integer id returns boolean
	return id == 'I053' or id == 'I054' or id == 'I055'
endfunction
function isCAntique takes integer id returns boolean
	return id == 'I056' or id == 'I057' or id == 'I058'
endfunction
function isBAntique takes integer id returns boolean
	return id == 'I059' or id == 'I05A' or id == 'I05B'
endfunction
function isAAntique takes integer id returns boolean
	return id == 'I05C'
endfunction
function doExchangeBooks takes nothing returns nothing
 local integer id= GetItemTypeId(GetEnumItem())
 local integer dSuit= 0
 local item itemD1= null
 local item itemD2= null
 local item itemD3= null
 local item itemC1= null
 local item itemC2= null
 local item itemC3= null
 local item itemB1= null
 local item itemB2= null
 local item itemB3= null
 local item itemA1= null
 local item itemA2= null
 local integer cSuit= 0
 local integer bSuit= 0
 local integer aSuit= 0
 local integer i= 1
 local real x= GetItemX(GetEnumItem())
 local real y= GetItemY(GetEnumItem())
	set antiqueIndex=antiqueIndex + 1
	call SaveItemHandle(YDHT, antiqueKey, antiqueIndex, GetEnumItem())
	if isDAntique(id) then
		loop
			exitwhen i > antiqueIndex
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I053' then
				set dSuit=YDWEBitwise_OR(dSuit , 1)
				set itemD1=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I054' then
				set dSuit=YDWEBitwise_OR(dSuit , 2)
				set itemD2=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I055' then
				set dSuit=YDWEBitwise_OR(dSuit , 4)
				set itemD3=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			set i=i + 1
		endloop
		if dSuit == 7 then
			call RemoveItem(itemD1)
			call RemoveItem(itemD2)
			call RemoveItem(itemD3)
			call CreateItem(udg_jianghu[GetRandomInt(1, 18)], x, y)
			set itemScore=itemScore + 2
		endif
	endif
	if isCAntique(id) then
		loop
			exitwhen i > antiqueIndex
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I056' then
				set cSuit=YDWEBitwise_OR(cSuit , 1)
				set itemC1=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I057' then
				set cSuit=YDWEBitwise_OR(cSuit , 2)
				set itemC2=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I058' then
				set cSuit=YDWEBitwise_OR(cSuit , 4)
				set itemC3=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			set i=i + 1
		endloop
		if cSuit == 7 then
			call RemoveItem(itemC1)
			call RemoveItem(itemC2)
			call RemoveItem(itemC3)
			call CreateItem(udg_juexue[GetRandomInt(1, 10)], x, y)
			set itemScore=itemScore + 4
		endif
	endif
	if isBAntique(id) then
		loop
			exitwhen i > antiqueIndex
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I059' then
				set bSuit=YDWEBitwise_OR(bSuit , 1)
				set itemB1=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I05A' then
				set bSuit=YDWEBitwise_OR(bSuit , 2)
				set itemB2=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I05B' then
				set bSuit=YDWEBitwise_OR(bSuit , 4)
				set itemB3=LoadItemHandle(YDHT, antiqueKey, i)
			endif
			set i=i + 1
		endloop
		if bSuit == 7 then
			call RemoveItem(itemB1)
			call RemoveItem(itemB2)
			call RemoveItem(itemB3)
			call CreateItem(udg_juenei[GetRandomInt(1, 8)], x, y)
			set itemScore=itemScore + 6
		endif
	endif
	if ((id) == 'I05C') then // INLINED!!
		loop
			exitwhen i > antiqueIndex
			if GetItemTypeId(LoadItemHandle(YDHT, antiqueKey, i)) == 'I05C' then
				if itemA1 == null then
					set aSuit=YDWEBitwise_OR(aSuit , 1)
					set itemA1=LoadItemHandle(YDHT, antiqueKey, i)
				else
					set aSuit=YDWEBitwise_OR(aSuit , 2)
					set itemA2=LoadItemHandle(YDHT, antiqueKey, i)
				endif
			endif
			set i=i + 1
		endloop
		if aSuit == 3 then
			call RemoveItem(itemA1)
			call RemoveItem(itemA2)
			call CreateItem(udg_canzhang[GetRandomInt(1, 10)], x, y)
			set itemScore=itemScore + 10
		endif
	endif
	set itemD1=null
	set itemD2=null
	set itemD3=null
	set itemC1=null
	set itemC2=null
	set itemC3=null
	set itemB1=null
	set itemB2=null
	set itemB3=null
	set itemA1=null
	set itemA2=null
endfunction
function piLiangJianDing takes unit u,real x,real y returns nothing
 local rect r= Rect(x - 300, y - 300, x + 300, y + 300)
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
	set antiqueIndex=0
	set itemScore=0
	call EnumItemsInRect(r, null, function doExchangeBooks)
	call FlushChildHashtable(YDHT, antiqueKey)
	set udg_jdds[i]=udg_jdds[i] + itemScore
	if udg_jdds[i] <= 10 and not ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) ) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
		call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" + I2S(udg_jdds[i]) + "分，得到10分可获得鉴定大师哦")
	endif
	if udg_jdds[i] >= 10 and not ( (YDWEBitwise_AND(master[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) ) and (YDWEBitwise_AND(deputy[(i )] , ((1 ) * YDWEBitwise__C2[( ( JIAN_DING) - 1)])) != 0) then // INLINED!!
		set wuxing[i]=wuxing[i] + 10 // 悟性加10
call Deputy_setMaster(i , JIAN_DING)
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00恭喜" + GetPlayerName(p) + "获得鉴定大师")
		call SetPlayerName(p, "〓鉴定大师〓" + LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	endif
endfunction
function shortenAbilityCd takes nothing returns nothing
 local timer t= GetExpiredTimer()
 local unit u= LoadUnitHandle(YDHT, GetHandleId(t), 0)
 local integer id= LoadInteger(YDHT, GetHandleId(t), 1)
	// CD变为0.5倍
	call EXSetAbilityState(EXGetUnitAbility(u, id), 1, EXGetAbilityState(EXGetUnitAbility(u, id), 1) * 0.5)
	call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "岚葵发动了|CFF66FF00岚葵的祝福|r，" + GetObjectName(id) + "的冷却时间缩短了")
	call FlushChildHashtable(YDHT, GetHandleId(t))
	call DestroyTimer(t)
	set t=null
	set u=null
endfunction
//使用技能系统
function UseAbility_Conditions takes nothing returns boolean
 local integer id= GetSpellAbilityId()
 local unit u= GetTriggerUnit()
 local unit l__ut= GetSpellTargetUnit()
 local unit last= null
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local timer t= null
 local real r= 0
 local integer j= 0
 local real range= 500
 local real rand= 0
 local integer randInt= 0
 local group g= null
 local integer life= 0
	
	// 岚葵皮肤效果岚葵的禅定——使用技能时，有一定几率CD减少为原来的0.67倍
	if ( GetUnitTypeId(P4[i]) == 'n018' and GetRandomInt(1, 100) <= 30 ) and id != 'A00C' and IsUnitType(u, UNIT_TYPE_HERO) then
		set t=CreateTimer()
		call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		call SaveInteger(YDHT, GetHandleId(t), 1, id)
		call TimerStart(t, 0.2, false, function shortenAbilityCd)
	endif
	// 五毒教：五毒笛咒
	if id == WU_DU_ZHOU then
		call wuDuZhou()
	endif
	
	// 五毒教：补天心经
	if id == BU_TIAN_JING then
		call buTianJing()
	endif
	
	// 五毒教：万蜍噬心
	if id == WAN_CHU_SHI_XIN then
		call wanChuShiXin()
	endif
	
	// 桃花岛：落英神剑掌 
	if id == LUO_YING_ZHANG then
		call luoYingZhang(u)
	endif
	// 桃花岛：碧波心经 
	if id == BI_BO_XIN_JING then
		call biBoXinJing(u)
	endif
	
	// 桃花岛：奇门术数 
	if id == QI_MEN_SHU_SHU then
		call qiMenShuShu(u)
	endif
	// 野螺派：反手牵猪
	if id == FAN_SHOU_QIAN_ZHU then
		call fanShouQianZhu(u , l__ut)
	endif
	// 野螺派：乾坤一掷
	if id == QIAN_KUN_YI_ZHI then
		call qianKunYiZhi(u)
	endif
	// 汝阳王府：嫁衣神功
	if id == JIA_YI_SHEN_GONG then
		call jiaYiShenGong(u)
	endif
	// 汝阳王府：偷看偷学
	if id == TOU_KAN_TOU_XUE then
		call touKanTouXue(u)
	endif
	// 宠物：批量鉴定
	if id == 'A08O' then
		call piLiangJianDing(u , GetSpellTargetX() , GetSpellTargetY())
	endif
	// 雪山：风沙莽莽
	if id == FENG_SHA_MANG_MANG then
		call fengShaMangMang(u)
	endif
	// 雪山：雪花六出
	if id == XUE_HUA_LIU_CHU or ( id == 'A07A' and GetUnitAbilityLevel(u, XUE_HUA_LIU_CHU) > 0 ) then
		call xueHuaLiuChu(u)
	endif
	// 雪山：无妄神功
	if id == WU_WANG_SHEN_GONG then
		call wuWangShenGong(u)
	endif
	// 嵩山：子午十二剑
	if id == ZI_WU_SHI_ER_JIAN then
		call ziWuShiErJian(u)
	endif
	// 嵩山：寒冰神掌
	if id == HAN_BING_SHEN_ZHANG then
		call hanBingShenZhang(u)
	endif
	// 嵩山：无名内功
	if id == WU_MING_NEI_GONG then
		call wuMingNeiGong(u)
	endif
	// 嵩山：大嵩阳神掌
	if id == DA_SONG_YANG_SHEN_ZHANG then
		call daSongYangShenZhang(u , l__ut)
	endif
 
	set u=null
	set l__ut=null
	set p=null
	set g=null
	set last=null
	set t=null
	return false
endfunction
//单位使用技能系统
function UseAbility takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t, Condition(function UseAbility_Conditions))
	set t=null
endfunction
function UnitDamage_Conditions takes nothing returns boolean
 local unit u= GetEventDamageSource()
 local unit uc= null
 local unit l__ut= GetTriggerUnit()
 local player p= GetOwningPlayer(u)
 local integer i= 1 + GetPlayerId(p)
 local real damage= GetEventDamage()
 local trigger t= null
	
	if damage == 5.93 then
		call wanChuEffect()
	endif
	
	if damage == 5.41 then
		call wuDuZhouDamage()
	endif
	
	// 落英神剑掌
	if damage == 6.01 then
		call luoYingZhangDamage(udg_hero[i] , l__ut)
	endif
	
	// 落英剑法
	if damage == 6.02 then
		call luoYingJianDamage(udg_hero[i] , l__ut)
	endif
	
	// 旋风扫叶腿
	if damage == 6.03 then
		call xuanFengTuiDamage(udg_hero[i] , l__ut)
	endif
	// 奇门术数
	if damage == 6.04 then
		call qiMenShuShuDamage(udg_hero[i] , l__ut)
	endif
	
	// 遭雷劈
	if damage == 6.05 then
		call zaoLeiPiDamage(udg_hero[i] , l__ut)
	endif
	// 大功告成
	if damage > GetWidgetLife(l__ut) and GetUnitAbilityLevel(l__ut, DA_GONG_GAO_CHENG) >= 1 then
		call daGongGaoCheng(l__ut)
	endif
	// 风沙莽莽
	if damage == 0.58 then
		call fengShaMangMangDamage(udg_hero[i] , l__ut)
	endif
	// 雪花六出
	if damage == 0.59 then
		call xueHuaLiChuDamage(udg_hero[i] , l__ut)
	endif
	// 嵩山剑法-万岳朝宗
	if GetUnitTypeId(u) == 'o030' then
		call wanYueChaoZong(udg_hero[i] , l__ut)
	endif
	// 嵩山-子午十二剑
	if damage == 0.94 then
		call ziWuShiErJianDamage(udg_hero[i] , l__ut)
	endif
	// 嵩山-寒冰神掌
	// if GetUnitAbilityLevel(ut, HAN_BING_SHEN_ZHANG) >= 1 then
	// 	call hanBingShenZhangDamaged(ut, damage)
	// endif
	
	set t=null
	set u=null
	set l__ut=null
	set uc=null
	set p=null
	return false
endfunction
//任意单位伤害事件系统
function UnitDamage takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	call YDWESyStemAnyUnitDamagedRegistTrigger(t)
	call TriggerAddCondition(t, Condition(function UnitDamage_Conditions))
	set t=null
endfunction
// 任意单位死亡事件
function UnitDeath_Conditions takes nothing returns boolean
 local unit u= GetKillingUnit()
 local unit l__ut= GetTriggerUnit()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer count= IMaxBJ(LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT), 10)
 local integer j= 1
	// 清空死亡单位的哈希表
	if GetPlayerController(GetOwningPlayer(l__ut)) != MAP_CONTROL_USER then
		call FlushChildHashtable(YDHT, GetHandleId(l__ut))
	endif
	if IsUnitEnemy(l__ut, GetOwningPlayer(u)) and GetUnitAbilityLevel(u, BI_BO_XIN_JING) >= 1 then
		set bibo_kill[i]=bibo_kill[i] + 1
		if bibo_kill[i] > count then
			set bibo_kill[i]=bibo_kill[i] - count
			if GetUnitAbilityLevel(u, QI_MEN_SHU_SHU) >= 1 then
				set j=2
			endif
			call SaveInteger(YDHT, GetHandleId(u), BI_BO_POINT, LoadInteger(YDHT, GetHandleId(u), BI_BO_POINT) + j)
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "碧波心经点数+" + I2S(j))
		endif
	endif
	if GetUnitAbilityLevel(u, XUAN_MING_SHEN_ZHANG) > 0 and GetUnitAbilityLevel(u, JIU_YIN) > 0 and GetUnitAbilityLevel(u, JIU_YANG) == 0 then
		// 玄冥神掌杀100个敌人加1点特攻
		call xuanMingAddSpecialAttack(u)
	endif
	if GetUnitTypeId(l__ut) == 'n016' then
		call CreateItem('I0EW', GetUnitX(l__ut), GetUnitY(l__ut))
		// 杀大汗掉落胡卜处迩
		if dahanTask[i] == 1 then
			set dahanTask[i]=0
			call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 1000)
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "|cff00ff00成功刺杀大汗，奖励1000声望和胡卜处迩|r")
		endif
	endif
	if GetUnitTypeId(l__ut) == 'n015' then
		// 杀尼摩星获取中原武学散篇
		if nimoxingTask[i] == 1 then
			set nimoxingTask[i]=0
			call CreateItem('I0F2', GetUnitX(l__ut), GetUnitY(l__ut))
			call commonAddReputation(GetOwningPlayer(GetKillingUnit()) , 200)
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "|cff00ff00成功刺杀尼摩星，奖励200声望和中原武学散篇|r")
		endif
	endif
	if GetUnitTypeId(l__ut) == 'n019' then
		call killGreenDragon()
		call RemoveUnit(l__ut)
	endif
	
	
	set u=null
	set l__ut=null
	return false
endfunction
//任意单位死亡事件系统
function UnitDeath takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t, Condition(function UnitDeath_Conditions))
	set t=null
endfunction
// 购买物品
function BuyItem_Conditions takes nothing returns boolean
 local unit u= GetBuyingUnit()
 local unit l__ut= GetSellingUnit()
 local item it= GetSoldItem()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
	
	// 八面玲珑
	if GetUnitAbilityLevel(udg_hero[i], BA_MIAN_LING_LONG) >= 1 then
		call baMianLingLong(udg_hero[i] , it)
	endif
	
	set u=null
	set l__ut=null
	return false
endfunction
function getDenomExclusive takes integer i returns integer
	if i == 1 then
		return 'I0AL'
	elseif i == 2 then
		return 'I09C'
	elseif i == 3 then
		return 'I097'
	elseif i == 4 then
		return 'I0E0'
	elseif i == 5 then
		return 'I0DP'
	elseif i == 6 then
		return 'I098'
	elseif i == 7 then
		return 'I0DU'
	elseif i == 8 then
		return 'I00B'
	elseif i == 9 then
		return 'I0DK'
	elseif i == 10 then
		return 'I0AM'
	elseif i == 11 then
		return 'I0EE'
	elseif i == 12 then
		return 'I0DT'
	elseif i == 13 then
		return 'I0DS'
	elseif i == 14 then
		return 'I00D'
	elseif i == 15 then
		return 'I0DY'
	elseif i == 16 then
		return 'I0DZ'
	elseif i == 17 then
		return 'I0DZ'
	elseif i == 18 then
		return 'I0E2'
	elseif i == 19 then
		return 'I0EJ'
	elseif i == 20 then
		return 'I0EP'
	elseif i == 21 then
		return 'I0AE'
	elseif i == 22 then
		return 'I09D'
	elseif i == 23 then
		return 'I0EU'
	elseif i == 24 then
		return 'I0EZ'
	elseif i == 25 then
		return 'I00B'
	elseif i == 26 then
		return ITEM_HAN_PO_JIAN
	endif
	return 0
endfunction
function UseItem_Conditions takes nothing returns boolean
 local unit u= GetTriggerUnit()
 local item it= GetManipulatedItem()
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer id= 0
	
	if GetItemTypeId(it) == ITEM_YE_LUO then
		call addAllAttrs(i , 2)
		call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFFDDFF00有玩家食用了野螺，获得全属性+2")
	endif
	if GetItemTypeId(it) == 'I0EW' then
		if ateDenom[i] == 1 and ateTianShu[i] == 1 then
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "每局限使用两次哦（一次本门派专属和一次十四天书）")
			call UnitAddItemById(u, 'I0EW')
			return false
		endif
		if not IsUnitType(u, UNIT_TYPE_HERO) then
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "只有英雄才能使用哦")
			call UnitAddItemById(u, 'I0EW')
			return false
		endif
		if ateDenom[i] == 0 then
			if UnitHaveItem(u , getDenomExclusive(udg_runamen[i])) then
				set id=getDenomExclusive(udg_runamen[i])
			elseif udg_runamen[i] == 20 and UnitHaveItem(u , 'I0EQ') then
				set id='I0EQ'
			endif
			if id != 0 then
				call RemoveItem(FetchUnitItem(u , id))
				set ateDenom[i]=1
				call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFDDFF00已将专属" + GetObjectName(id) + "内化")
				return false
			endif
		endif
		if ateTianShu[i] == 0 and UnitHaveItem(u , 'I0EE') then
			call RemoveItem(FetchUnitItem(u , 'I0EE'))
			set ateTianShu[i]=1
			call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFDDFF00已将十四天书内化")
			return false
		endif
		call DisplayTextToPlayer(Player(i - 1), 0, 0, "|CFFDDFF00身上没有专属或者已经内化过该专属了")
		call UnitAddItemById(u, 'I0EW')
	endif
	if GetItemTypeId(it) == 'I0F2' then
		call learnOpenDenoms(udg_hero[i])
	endif
	
	set u=null
	set it=null
	return false
endfunction
function PickupItem_Conditions takes nothing returns boolean
 local unit u= GetTriggerUnit()
 local item it= GetManipulatedItem()
 local item itt
 local integer i= 1 + GetPlayerId(GetOwningPlayer(u))
 local integer point= GetItemCharges(it)
 local integer j= 0
	
	// 多个野螺合并次数
	if GetItemTypeId(it) == ITEM_YE_LUO then
		loop
			exitwhen j > 5
			set itt=UnitItemInSlot(u, j)
			if itt != it and GetItemTypeId(itt) == ITEM_YE_LUO then
				call RemoveItem(it)
				call SetItemCharges(itt, GetItemCharges(itt) + point)
				exitwhen true
			endif
		endloop
	endif
	// 击杀尼摩星任务
	if GetItemTypeId(it) == 'I0F3' then
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC0郭靖：|r |cFF99FFCC尼摩星偷走了中原武学书籍，侠士请速去将其击杀夺回武学|r\n|cFFFFCC00提示：|r |cFF99FFCC尼摩星在蒙古大营|r\n")
		call checkOpenDenoms(GetOwningPlayer(u))
		set nimoxingTask[i]=1
	endif
	// 刺杀大汗任务
	if GetItemTypeId(it) == 'I0F4' then
		call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC0郭靖：|r |cFF99FFCC听说大汗要率领蒙古铁骑进攻中原，但他对我有养育之恩，我不能去刺杀他，请侠士代我去吧|r\n|cFFFFCC00提示：|r |cFF99FFCC大汗在蒙古大营|r\n")
		set dahanTask[i]=1
	endif
	
	set u=null
	set it=null
	set itt=null
	return false
endfunction
//任意单位购买物品系统
function ItemEvent takes nothing returns nothing
 local trigger t= CreateTrigger()
	
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SELL_ITEM)
	call TriggerAddCondition(t, Condition(function BuyItem_Conditions))
	
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(t, Condition(function UseItem_Conditions))
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t, Condition(function PickupItem_Conditions))
	set t=null
endfunction
function CunWuGong takes integer num,integer id1,integer id2,string s,integer dp1,integer fy1,integer gg1,integer jm1,integer wx1,integer ys1 returns nothing
 local integer i= StringHash("武学")
	call SaveInteger(YDHT, i + num, 0, num)
	call SaveInteger(YDHT, i + num, 1, id1)
	call SaveInteger(YDHT, i + num, 2, id2)
	call SaveStr(YDHT, i + num, 3, s)
	call SaveInteger(YDHT, i + num, 4, dp1)
	call SaveInteger(YDHT, i + num, 5, fy1)
	call SaveInteger(YDHT, i + num, 6, gg1)
	call SaveInteger(YDHT, i + num, 7, jm1)
	call SaveInteger(YDHT, i + num, 8, wx1)
	call SaveInteger(YDHT, i + num, 9, ys1)
endfunction
function CunWuGongS takes nothing returns nothing
	//顺序：胆魄、福缘、根骨、经脉、悟性、医术
	call CunWuGong(1 , 'I03J' , 'A07A' , "江湖武学" , 0 , 10 , 0 , 0 , 14 , 15)
	call CunWuGong(2 , 'I03H' , 'A06H' , "江湖武学" , 14 , 12 , 18 , 0 , 0 , 0)
	call CunWuGong(3 , 'I02V' , 'A07Q' , "江湖内功" , 0 , 12 , 0 , 18 , 0 , 14)
	call CunWuGong(4 , 'I02U' , 'A07P' , "江湖内功" , 17 , 0 , 0 , 22 , 0 , 0)
	call CunWuGong(5 , 'I03G' , 'A06L' , "江湖武学" , 0 , 0 , 0 , 15 , 10 , 12)
	call CunWuGong(6 , 'I02Z' , 'A0DN' , "江湖内功" , 17 , 14 , 18 , 0 , 0 , 0)
	call CunWuGong(7 , 'I02X' , 'A07S' , "九阴内功" , 0 , 17 , 17 , 17 , 20 , 0)
	call CunWuGong(8 , 'I03I' , 'A07N' , "九阴武学" , 13 , 0 , 12 , 12 , 16 , 0)
	call CunWuGong(9 , 'I02Y' , 'A07T' , "江湖内功" , 22 , 20 , 0 , 17 , 0 , 0)
	call CunWuGong(10 , 'I03K' , 'A06J' , "江湖武学" , 14 , 0 , 0 , 16 , 20 , 0)
	call CunWuGong(11 , 'I03D' , 'A07O' , "江湖内功" , 0 , 16 , 0 , 0 , 0 , 16)
	call CunWuGong(12 , 'I03L' , 'A07M' , "江湖武学" , 0 , 14 , 14 , 14 , 14 , 0)
	call CunWuGong(13 , 'I030' , 'A07W' , "江湖内功" , 0 , 0 , 0 , 23 , 18 , 17)
	call CunWuGong(14 , 'I031' , 'A07U' , "江湖内功" , 18 , 20 , 16 , 0 , 0 , 0)
	call CunWuGong(15 , 'I03E' , 'A06M' , "江湖武学" , 0 , 0 , 18 , 18 , 0 , 0)
	call CunWuGong(16 , 'I033' , 'A071' , "江湖武学" , 0 , 12 , 0 , 16 , 0 , 11)
	call CunWuGong(17 , 'I02W' , 'A07R' , "江湖内功" , 0 , 0 , 0 , 14 , 12 , 11)
	call CunWuGong(18 , 'I03F' , 'A06P' , "江湖武学" , 0 , 0 , 22 , 17 , 15 , 0)
	call CunWuGong(19 , 'I039' , 'A07G' , "绝世武学" , 18 , 21 , 27 , 0 , 0 , 0)
	call CunWuGong(20 , 'I034' , 'A07L' , "绝世武学" , 20 , 0 , 26 , 18 , 0 , 0)
	call CunWuGong(21 , 'I038' , 'A07F' , "绝世武学" , 0 , 19 , 0 , 22 , 28 , 0)
	call CunWuGong(22 , 'I037' , 'A07H' , "绝世武学" , 17 , 25 , 0 , 0 , 17 , 0)
	call CunWuGong(23 , 'I03B' , 'A086' , "绝世武学" , 0 , 23 , 20 , 0 , 29 , 0)
	call CunWuGong(24 , 'I032' , 'A07E' , "绝世武学" , 24 , 0 , 30 , 24 , 0 , 0)
	call CunWuGong(25 , 'I035' , 'A085' , "绝世武学" , 0 , 0 , 0 , 24 , 19 , 16)
	call CunWuGong(26 , 'I036' , 'A07J' , "绝世武学" , 23 , 0 , 0 , 18 , 0 , 16)
	call CunWuGong(27 , 'I03C' , 'A089' , "绝世武学" , 23 , 0 , 0 , 20 , 22 , 0)
	call CunWuGong(28 , 'I03A' , 'A07I' , "绝世武学" , 25 , 0 , 25 , 25 , 20 , 0)
	call CunWuGong(29 , 'I03S' , 'A082' , "绝世内功" , 22 , 32 , 0 , 22 , 0 , 25)
	call CunWuGong(30 , 'I03O' , 'A084' , "绝世内功" , 28 , 19 , 0 , 28 , 0 , 0)
	call CunWuGong(31 , 'I03T' , 'S002' , "绝世内功" , 20 , 0 , 29 , 0 , 0 , 23)
	call CunWuGong(32 , 'I03Q' , 'A07X' , "绝世内功" , 0 , 23 , 31 , 33 , 0 , 0)
	call CunWuGong(33 , 'I03M' , 'A0D8' , "绝世内功" , 28 , 24 , 0 , 33 , 0 , 30)
	call CunWuGong(34 , 'I03P' , 'A080' , "绝世内功" , 25 , 0 , 0 , 32 , 22 , 32)
	call CunWuGong(35 , 'I03U' , 'A083' , "绝世内功" , 0 , 24 , 0 , 30 , 24 , 21)
	call CunWuGong(36 , 'I03R' , 'A09D' , "绝世内功" , 0 , 30 , 0 , 27 , 34 , 23)
	call CunWuGong(37 , 'I09G' , 'A0D2' , "九阴内功" , 0 , 17 , 17 , 17 , 20 , 0)
	call CunWuGong(38 , 'I09H' , 'A0D4' , "九阴内功" , 0 , 17 , 17 , 17 , 20 , 0)
	call CunWuGong(39 , 'I09I' , 'A0D6' , "九阴内功" , 0 , 17 , 17 , 17 , 20 , 0) // 易筋断骨篇
call CunWuGong(40 , 'I09J' , 'A0D1' , "九阴武学" , 13 , 0 , 12 , 12 , 16 , 0) // 摧坚
call CunWuGong(41 , 'I09K' , 'A0D3' , "九阴武学" , 13 , 0 , 12 , 12 , 16 , 0) // 摧心掌
call CunWuGong(42 , 'I0C2' , 'A03N' , "奇武" , 0 , 0 , 0 , 15 , 14 , 16)
	call CunWuGong(43 , 'I0C3' , 'A03P' , "奇武" , 0 , 18 , 20 , 0 , 0 , 16)
	call CunWuGong(44 , 'I0C4' , 'A03L' , "奇武" , 12 , 14 , 16 , 0 , 0 , 0)
	call CunWuGong(45 , 'I0C5' , 'A03Q' , "奇武" , 17 , 0 , 0 , 0 , 20 , 0)
	call CunWuGong(46 , 'I0C6' , 'A03O' , "奇武" , 14 , 15 , 16 , 0 , 0 , 12)
	call CunWuGong(47 , 'I0C8' , 'A0CE' , "奇武" , 12 , 0 , 0 , 0 , 18 , 0)
	call CunWuGong(48 , 'I0C9' , 'A03T' , "奇武" , 14 , 17 , 0 , 16 , 0 , 0)
	call CunWuGong(49 , 'I0CA' , 'A03U' , "奇武" , 0 , 0 , 0 , 20 , 0 , 0)
	call CunWuGong(50 , 'I0CB' , 'A03W' , "奇武" , 0 , 0 , 0 , 14 , 14 , 0)
	call CunWuGong(51 , 'I0CC' , 'A03V' , "奇武" , 0 , 0 , 0 , 0 , 15 , 12)
	call CunWuGong(52 , 'I0CD' , 'A03Z' , "奇武" , 13 , 17 , 16 , 0 , 0 , 0)
	call CunWuGong(53 , 'I0CJ' , 'A04V' , "奇武" , 15 , 0 , 16 , 0 , 17 , 0)
	call CunWuGong(54 , 'I0CT' , 'A06A' , "奇武" , 15 , 0 , 15 , 15 , 15 , 0) //《寿木长生功》
call CunWuGong(55 , 'I0CU' , 'A06B' , "奇武" , 20 , 20 , 0 , 25 , 20 , 0) //《黄沙万里鞭法》
call CunWuGong(56 , 'I0CV' , 'A06S' , "奇武" , 0 , 0 , 0 , 25 , 0 , 25) //《九阳真经散篇》
endfunction
//万能装备系统
function Cun takes integer id,string name,string s11,real i11,string s12,real i12,string s13,real i13,string s14,real i14 returns nothing
 local item it=CreateItem(id, 0, 0)
 local integer l__hp=R2I(GetWidgetLife(it))
 local integer lv=0
	if HaveSavedInteger(YDHT, id, id) == false then
		call SaveInteger(YDHT, id, id, id)
	endif
	if StringLength(s11) > 0 and i11 > 0 then
		call SaveReal(YDHT, id, StringHash(s11), i11)
	endif
	if StringLength(s12) > 0 and i12 > 0 then
		call SaveReal(YDHT, id, StringHash(s12), i12)
	endif
	if StringLength(s13) > 0 and i13 > 0 then
		call SaveReal(YDHT, id, StringHash(s13), i13)
	endif
	if StringLength(s14) > 0 and i14 > 0 then
		call SaveReal(YDHT, id, StringHash(s14), i14)
	endif
	call SaveReal(YDHT, id, StringHash("升级概率"), 100.)
	call RemoveItem(it)
	set it=null
endfunction

function Cuns takes nothing returns nothing
	//攻击力、护甲、招式伤害、内力、真实伤害
	//call BJDebugMsg("开始存储装备属性")
	call Cun('I00C' , "龙鳞剑" , "攻击力" , 5000 , "招式伤害" , 750 , "内力" , 200 , "真实伤害" , 200)
	call Cun('I00B' , "倚天剑" , "攻击力" , 4500 , "招式伤害" , 700 , "内力" , 190 , "真实伤害" , 0)
	call Cun('I00D' , "屠龙刀" , "攻击力" , 4850 , "招式伤害" , 720 , "内力" , 195 , "真实伤害" , 300)
	call Cun('I04F' , "断肠" , "攻击力" , 1000 , "招式伤害" , 150 , "内力" , 0 , "真实伤害" , 80)
	call Cun('I00P' , "晶玉扇" , "攻击力" , 3000 , "招式伤害" , 250 , "内力" , 150 , "真实伤害" , 0)
	call Cun('I00Q' , "紫金刀" , "攻击力" , 2700 , "招式伤害" , 230 , "内力" , 0 , "真实伤害" , 100)
	call Cun('I01L' , "精钢剑" , "攻击力" , 650 , "招式伤害" , 80 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01N' , "七星扇" , "攻击力" , 800 , "招式伤害" , 100 , "内力" , 0 , "真实伤害" , 40)
	call Cun('I00X' , "鸳鸯刀" , "攻击力" , 1500 , "招式伤害" , 150 , "内力" , 50 , "真实伤害" , 0)
	call Cun('I097' , "打狗棒" , "攻击力" , 4500 , "招式伤害" , 650 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I099' , "君子剑" , "攻击力" , 2000 , "招式伤害" , 100 , "内力" , 50 , "真实伤害" , 50)
	call Cun('I09B' , "蛇杖" , "攻击力" , 4500 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 1000)
	call Cun('I09A' , "淑女剑" , "攻击力" , 1800 , "招式伤害" , 50 , "内力" , 100 , "真实伤害" , 50)
	call Cun('I09C' , "双剑合璧" , "攻击力" , 3800 , "招式伤害" , 220 , "内力" , 220 , "真实伤害" , 150)
	call Cun('I098' , "血刀" , "攻击力" , 50000 , "招式伤害" , 700 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I09D' , "玉箫" , "攻击力" , 4850 , "招式伤害" , 0 , "内力" , 900 , "真实伤害" , 0)
	call Cun('I0DK' , "真武剑" , "攻击力" , 2000 , "招式伤害" , 0 , "内力" , 400 , "真实伤害" , 0)
	call Cun('I0DU' , "拂尘" , "攻击力" , 3000 , "招式伤害" , 300 , "内力" , 300 , "真实伤害" , 300)
	call Cun('I0DY' , "镇岳尚方" , "攻击力" , 5000 , "招式伤害" , 300 , "内力" , 400 , "真实伤害" , 0)
	call Cun('I0EJ' , "铁掌令" , "攻击力" , 5000 , "招式伤害" , 0 , "内力" , 600 , "真实伤害" , 0)
	call Cun('I0DZ' , "毒龙鞭" , "攻击力" , 5000 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 700)
	call Cun('I0E0' , "养吾剑" , "攻击力" , 4000 , "招式伤害" , 0 , "内力" , 300 , "真实伤害" , 400)
	call Cun('I0E2' , "东灵铁剑" , "攻击力" , 5000 , "招式伤害" , 300 , "内力" , 300 , "真实伤害" , 0)
	call Cun('I0EZ' , "碧水剑" , "攻击力" , 5000 , "招式伤害" , 300 , "内力" , 0 , "真实伤害" , 300)
	call Cun('I0F6' , "寒魄剑" , "攻击力" , 5000 , "招式伤害" , 300 , "内力" , 0 , "真实伤害" , 300)
	call Cun('I08V' , "江湖·忠" , "攻击力" , 10000 , "招式伤害" , 350 , "内力" , 350 , "真实伤害" , 350)
	call Cun('I02S' , "镇妖+1" , "攻击力" , 1000 , "招式伤害" , 150 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I02M' , "镇妖+2" , "攻击力" , 2000 , "招式伤害" , 300 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I02Q' , "镇妖+3" , "攻击力" , 3000 , "招式伤害" , 450 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I02R' , "镇妖+4" , "攻击力" , 4000 , "招式伤害" , 600 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I02P' , "镇妖+5" , "攻击力" , 5000 , "招式伤害" , 750 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01F' , "点金" , "攻击力" , 500 , "招式伤害" , 50 , "内力" , 20 , "真实伤害" , 0)
	call Cun('I01S' , "开山斧" , "攻击力" , 450 , "招式伤害" , 30 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I020' , "青铜刀" , "攻击力" , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01E' , "秋叶刃" , "攻击力" , 600 , "招式伤害" , 60 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I021' , "锁候枪" , "攻击力" , 200 , "招式伤害" , 15 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I016' , "宣花斧" , "攻击力" , 800 , "招式伤害" , 100 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I013' , "饮血枪" , "攻击力" , 1200 , "招式伤害" , 120 , "内力" , 0 , "真实伤害" , 50)
	call Cun('I022' , "布衣" , "防御" , 35 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01T' , "彩衣" , "防御" , 60 , "招式伤害" , 0 , "内力" , 15 , "真实伤害" , 0)
	call Cun('I01H' , "虎皮衣" , "防御" , 85 , "招式伤害" , 0 , "内力" , 40 , "真实伤害" , 0)
	call Cun('I01G' , "蛇皮裘" , "防御" , 90 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I017' , "开阳衣" , "防御" , 150 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I014' , "烈火衣" , "防御" , 300 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01O' , "七星锦服" , "防御" , 150 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I04E' , "金蝉衣" , "防御" , 250 , "招式伤害" , 0 , "内力" , 80 , "真实伤害" , 0)
	call Cun('I00O' , "软猬甲" , "防御" , 450 , "招式伤害" , 0 , "内力" , 100 , "真实伤害" , 0)
	call Cun('I00F' , "六合纵横" , "防御" , 700 , "招式伤害" , 200 , "内力" , 100 , "真实伤害" , 200)
	call Cun('I00G' , "破军无双" , "防御" , 800 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I090' , "决战·霸" , "防御" , 1000 , "招式伤害" , 0 , "内力" , 250 , "真实伤害" , 0)
	call Cun('I0AL' , "少林袈裟" , "防御" , 500 , "招式伤害" , 300 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I0DP' , "七星道袍" , "防御" , 400 , "招式伤害" , 0 , "内力" , 300 , "真实伤害" , 0)
	call Cun('I09Z' , "通神" , "防御" , 500 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01Q' , "破军帽" , "防御" , 20 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 30)
	call Cun('I00M' , "灭云冠" , "防御" , 300 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I08Z' , "决战·恶" , "防御" , 500 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01R' , "破军鞋" , "防御" , 25 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 30)
	call Cun('I00T' , "神行鞋" , "防御" , 200 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I00N' , "踏风靴" , "防御" , 200 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I08Y' , "决战·魁" , null , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 500)
	call Cun('I0AM' , "神木王鼎" , null , 0 , "招式伤害" , 100 , "内力" , 100 , "真实伤害" , 100)
	call Cun('I0EP' , "子午砂" , null , 0 , "招式伤害" , 80 , "内力" , 80 , "真实伤害" , 80)
	call Cun('I0DS' , "玉扳指" , null , 0 , "招式伤害" , 150 , "内力" , 150 , "真实伤害" , 150)
	call Cun(ITEM_HAN_SHA , "含沙射影" , null , 0 , "招式伤害" , 30 , "内力" , 30 , "真实伤害" , 30)
	call Cun('I0EQ' , "观音泪" , null , 0 , "招式伤害" , 120 , "内力" , 120 , "真实伤害" , 120)
	call Cun('I0DS' , "燕国玉玺" , null , 0 , "招式伤害" , 150 , "内力" , 150 , "真实伤害" , 150)
	call Cun('I01V' , "苍蟒护腕" , "攻击力" , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 10)
	call Cun('I01U' , "纱绒护腕" , "攻击力" , 0 , "招式伤害" , 15 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I018' , "彩云腕" , null , 0 , "招式伤害" , 50 , "内力" , 20 , "真实伤害" , 0)
	call Cun('I01D' , "天璇护腕" , null , 0 , "招式伤害" , 100 , "内力" , 100 , "真实伤害" , 100)
	call Cun('I01M' , "精钢护腕" , "防御" , 30 , "招式伤害" , 40 , "内力" , 20 , "攻击力" , 250)
	call Cun('I00Z' , "追月手" , null , 0 , "招式伤害" , 120 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I00R' , "天玑毒掌" , "攻击力" , 1200 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 150)
	call Cun('I00S' , "无魅雷手" , null , 0 , "招式伤害" , 200 , "内力" , 100 , "真实伤害" , 0)
	call Cun('I00H' , "魔影炎掌" , "攻击力" , 2000 , "招式伤害" , 300 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I00I' , "踏风冰手" , "攻击力" , 1800 , "招式伤害" , 0 , "内力" , 150 , "真实伤害" , 0)
	call Cun('I023' , "护身符" , "防御" , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I024' , "环戒" , "攻击力" , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01X' , "琥珀项链" , null , 0 , "招式伤害" , 0 , "内力" , 15 , "真实伤害" , 0)
	call Cun('I01Y' , "水碧护符" , null , 0 , "招式伤害" , 10 , "内力" , 15 , "真实伤害" , 0)
	call Cun('I01Z' , "闪避护符" , "防御" , 0 , "招式伤害" , 15 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01W' , "传家符" , "防御" , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 15)
	call Cun('I01J' , "七绝护符" , null , 0 , "招式伤害" , 50 , "内力" , 50 , "真实伤害" , 50)
	call Cun('I0DB' , "新手神器" , null , 0 , "招式伤害" , 100 , "内力" , 100 , "真实伤害" , 100)
	call Cun('I0DJ' , "新手神器lv.1" , null , 0 , "招式伤害" , 50 , "内力" , 50 , "真实伤害" , 50)
	call Cun('I0DL' , "新手神器lv.2" , null , 0 , "招式伤害" , 50 , "内力" , 50 , "真实伤害" , 50)
	
	call Cun('I0E8' , "游侠印记" , null , 0 , "招式伤害" , 50 , "内力" , 50 , "真实伤害" , 50)
	call Cun('I0E9' , "小侠印记" , null , 0 , "招式伤害" , 60 , "内力" , 60 , "真实伤害" , 60)
	call Cun('I0EA' , "名侠印记" , null , 0 , "招式伤害" , 90 , "内力" , 90 , "真实伤害" , 90)
	call Cun('I0EB' , "大虾印记" , null , 0 , "招式伤害" , 120 , "内力" , 120 , "真实伤害" , 120)
	call Cun('I0EC' , "巨侠印记" , null , 0 , "招式伤害" , 150 , "内力" , 150 , "真实伤害" , 150)
	call Cun('I0ED' , "虾米印记" , null , 0 , "招式伤害" , 200 , "内力" , 200 , "真实伤害" , 200)
	call Cun('I0EE' , "十四天书" , null , 0 , "招式伤害" , 300 , "内力" , 300 , "真实伤害" , 300)
	call Cun('I01K' , "青竹戒指" , "攻击力" , 200 , "招式伤害" , 20 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01I' , "星云戒指" , null , 0 , "招式伤害" , 30 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I019' , "白虎符" , "攻击力" , 300 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I01A' , "蓝魔项链" , "防御" , 50 , "招式伤害" , 0 , "内力" , 40 , "真实伤害" , 0)
	call Cun('I01B' , "北斗护符" , "攻击力" , 500 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 60)
	call Cun('I01C' , "梦蝶项链" , null , 0 , "招式伤害" , 50 , "内力" , 0 , "真实伤害" , 40)
	call Cun('I01P' , "七星戒指" , null , 0 , "招式伤害" , 0 , "内力" , 30 , "真实伤害" , 0)
	call Cun('I010' , "云海链" , null , 0 , "招式伤害" , 120 , "内力" , 60 , "真实伤害" , 0)
	call Cun('I00Y' , "七情束" , null , 0 , "招式伤害" , 100 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I011' , "影岚护符" , null , 0 , "招式伤害" , 100 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I012' , "玉修护符" , null , 0 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 50)
	call Cun('I00U' , "云灭护符" , "攻击力" , 1000 , "招式伤害" , 200 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I00V' , "抗魔护符" , null , 0 , "招式伤害" , 0 , "内力" , 150 , "真实伤害" , 100)
	call Cun('I00W' , "重生链" , "防御" , 100 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I00J' , "神迹戒" , null , 0 , "招式伤害" , 0 , "内力" , 150 , "真实伤害" , 200)
	call Cun('I00K' , "如意戒" , "攻击力" , 1500 , "招式伤害" , 0 , "内力" , 150 , "真实伤害" , 0)
	call Cun('I00L' , "绿扳指" , "防御" , 200 , "招式伤害" , 0 , "内力" , 0 , "真实伤害" , 0)
	call Cun('I08W' , "江湖·情" , null , 0 , "招式伤害" , 900 , "内力" , 400 , "真实伤害" , 0)
	call Cun('I08X' , "江湖·义" , null , 0 , "招式伤害" , 800 , "内力" , 0 , "真实伤害" , 500)
	//根骨、悟性、绝学领悟
	call Cun('I00C' , "龙鳞剑" , "福缘" , 4 , "全属性" , 1 , "绝学领悟" , 2 , null , 0)
	call Cun('I00B' , "倚天剑" , "悟性" , 3 , "全属性" , 1 , "绝学领悟" , 2 , null , 0)
	call Cun('I00D' , "屠龙刀" , "经脉" , 3 , "全属性" , 1 , "绝学领悟" , 1 , null , 0)
	call Cun('I04F' , "断肠" , "经脉" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I00P' , "晶玉扇" , "悟性" , 2 , "福缘" , 2 , "绝学领悟" , 1 , null , 0)
	call Cun('I00Q' , "紫金刀" , "经脉" , 2 , "医术" , 2 , null , 0 , null , 0)
	call Cun('I01N' , "七星扇" , "医术" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01E' , "秋叶刃" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I00X' , "鸳鸯刀" , "福缘" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I097' , "打狗棒" , "胆魄" , 3 , "全属性" , 1 , "绝学领悟" , 2 , null , 0)
	call Cun('I099' , "君子剑" , "悟性" , 1 , "医术" , 1 , "绝学领悟" , 1 , null , 0)
	call Cun('I09B' , "蛇杖" , "根骨" , 4 , "全属性" , 2 , "绝学领悟" , 1 , null , 0)
	call Cun('I09A' , "淑女剑" , "福缘" , 1 , "经脉" , 1 , "绝学领悟" , 1 , null , 0)
	call Cun('I09C' , "双剑合璧" , "悟性" , 3 , "全属性" , 1 , "绝学领悟" , 3 , null , 0)
	call Cun('I098' , "血刀" , "根骨" , 7 , "胆魄" , 4 , "绝学领悟" , 2 , null , 0)
	call Cun('I09D' , "玉箫" , "福缘" , 2 , "全属性" , 2 , "绝学领悟" , 3 , null , 0)
	call Cun('I0DK' , "真武剑" , "悟性" , 2 , "全属性" , 2 , "绝学领悟" , 3 , null , 0)
	call Cun('I0DU' , "拂尘" , "悟性" , 2 , "全属性" , 2 , "绝学领悟" , 3 , null , 0)
	call Cun('I0DY' , "镇岳尚方" , "福缘" , 5 , "悟性" , 4 , "绝学领悟" , 3 , null , 0)
	call Cun('I0EJ' , "铁掌令" , "胆魄" , 4 , "悟性" , 4 , "绝学领悟" , 2 , null , 0)
	call Cun('I0DZ' , "毒龙鞭" , "经脉" , 3 , "胆魄" , 5 , "绝学领悟" , 2 , null , 0)
	call Cun('I0E0' , "养吾剑" , "胆魄" , 5 , "悟性" , 4 , "绝学领悟" , 5 , null , 0)
	call Cun('I0E2' , "东灵铁剑" , "胆魄" , 5 , "经脉" , 4 , "绝学领悟" , 5 , null , 0)
	call Cun('I0EZ' , "碧水剑" , "医术" , 5 , "福缘" , 4 , "绝学领悟" , 5 , null , 0)
	call Cun('I0F6' , "寒魄剑" , "医术" , 5 , "福缘" , 4 , "绝学领悟" , 5 , null , 0)
	call Cun('I08V' , "江湖·忠" , "全属性" , 2 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I013' , "饮血枪" , "胆魄" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01L' , "精钢剑" , "胆魄" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01G' , "蛇皮裘" , "经脉" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I014' , "烈火衣" , "经脉" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01O' , "七星锦服" , "胆魄" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I04E' , "金蝉衣" , "悟性" , 1 , "福缘" , 1 , null , 0 , null , 0)
	call Cun('I00O' , "软猬甲" , "根骨" , 2 , "胆魄" , 2 , "绝学领悟" , 1 , null , 0)
	call Cun('I00F' , "六合纵横" , "根骨" , 2 , "胆魄" , 2 , "福缘" , 1 , null , 0)
	call Cun('I00G' , "破军无双" , "医术" , 3 , "悟性" , 2 , null , 0 , null , 0)
	call Cun('I090' , "决战·霸" , "全属性" , 1 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I0AL' , "少林袈裟" , "全属性" , 1 , "根骨" , 2 , null , 0 , null , 0)
	call Cun('I0DP' , "七星道袍" , "全属性" , 1 , "胆魄" , 2 , null , 0 , null , 0)
	call Cun('I01Q' , "破军帽" , "悟性" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I00M' , "灭云冠" , "根骨" , 1 , "悟性" , 2 , "经脉" , 1 , "绝学领悟" , 1)
	call Cun('I08Z' , "决战·恶" , "全属性" , 1 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I01R' , "破军鞋" , "福缘" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I00T' , "神行鞋" , "福缘" , 3 , "经脉" , 3 , null , 0 , null , 0)
	call Cun('I00N' , "踏风靴" , "悟性" , 2 , "福缘" , 1 , "医术" , 1 , null , 0)
	call Cun('I08Y' , "决战·魁" , "全属性" , 1 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I01V' , "苍蟒护腕" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01U' , "纱绒护腕" , "悟性" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01D' , "天璇护腕" , "胆魄" , 3 , null , 0 , null , 0 , null , 0)
	call Cun('I015' , "霓云手套" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01M' , "精钢护腕" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I00Z' , "追月手" , "悟性" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I00R' , "天玑毒掌" , "胆魄" , 2 , "经脉" , 1 , null , 0 , null , 0)
	call Cun('I00S' , "无魅雷手" , "悟性" , 3 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I00H' , "魔影炎掌" , "根骨" , 2 , "经脉" , 2 , "绝学领悟" , 1 , null , 0)
	call Cun('I00I' , "踏风冰手" , "悟性" , 2 , "胆魄" , 2 , null , 0 , null , 0)
	call Cun('I01W' , "传家符" , "医术" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I0AM' , "神木王鼎" , "医术" , 5 , null , 0 , null , 0 , null , 0)
	call Cun('I0EP' , "子午砂" , "胆魄" , 5 , null , 0 , null , 0 , null , 0)
	call Cun('I0DS' , "燕国玉玺" , "悟性" , 5 , null , 0 , null , 0 , null , 0)
	call Cun('I0DT' , "玉扳指" , "福缘" , 5 , null , 0 , null , 0 , null , 0)
	call Cun('I0EQ' , "观音泪" , "悟性" , 4 , "经脉" , 4 , null , 0 , null , 0)
	call Cun('I01X' , "琥珀项链" , "经脉" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01Y' , "水碧护符" , "胆魄" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01Z' , "闪避护符" , "福缘" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01J' , "七绝护符" , "福缘" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I0DB' , "新手神器" , "全属性" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I0DL' , "新手神器lv.2" , "全属性" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I0E8' , "游侠印记" , "全属性" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I0E9' , "小侠印记" , "全属性" , 1 , "福缘" , 1 , null , 0 , null , 0)
	call Cun('I0EA' , "名侠印记" , "全属性" , 1 , "福缘" , 2 , null , 0 , null , 0)
	call Cun('I0EB' , "大虾印记" , "全属性" , 1 , "福缘" , 3 , null , 0 , null , 0)
	call Cun('I0EC' , "巨侠印记" , "全属性" , 1 , "福缘" , 4 , null , 0 , null , 0)
	call Cun('I0ED' , "虾米印记" , "全属性" , 1 , "福缘" , 5 , null , 0 , null , 0)
	call Cun('I0EE' , "十四天书" , "全属性" , 3 , "福缘" , 6 , null , 0 , null , 0)
	call Cun('I01I' , "星云戒指" , "医术" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01A' , "蓝魔项链" , "医术" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01B' , "北斗护符" , "福缘" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01C' , "梦蝶项链" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I01P' , "七星戒指" , "经脉" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I010' , "云海链" , "医术" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I00Y' , "七情束" , "经脉" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I0CH' , "郭靖戴过的环戒" , "根骨" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I0DO' , "乔峰穿过的草鞋" , "胆魄" , 1 , null , 0 , null , 0 , null , 0)
	call Cun('I011' , "影岚护符" , "悟性" , 2 , "经脉" , 1 , null , 0 , null , 0)
	call Cun('I012' , "玉修护符" , "根骨" , 1 , "胆魄" , 2 , null , 0 , null , 0)
	call Cun('I00U' , "云灭护符" , "根骨" , 2 , "医术" , 1 , null , 0 , null , 0)
	call Cun('I00V' , "抗魔护符" , "胆魄" , 1 , "经脉" , 2 , null , 0 , null , 0)
	call Cun('I00W' , "重生链" , "医术" , 3 , null , 0 , null , 0 , null , 0)
	call Cun('I00J' , "神迹戒" , "福缘" , 4 , null , 0 , null , 0 , null , 0)
	call Cun('I00K' , "如意戒" , "经脉" , 1 , "胆魄" , 3 , null , 0 , null , 0)
	call Cun('I00L' , "绿扳指" , "医术" , 1 , "胆魄" , 1 , "福缘" , 2 , null , 0)
	call Cun('I08W' , "江湖·情" , "全属性" , 1 , "绝学领悟" , 1 , null , 0 , null , 0)
	call Cun('I08X' , "江湖·义" , "全属性" , 1 , "绝学领悟" , 1 , null , 0 , null , 0)
	//攻击速度、暴击伤害、暴击率、杀怪回复、生命回复等等
	call Cun('I00C' , "龙鳞剑" , "攻击速度" , 30 , "暴击伤害" , 0.6 , "暴击率" , 0.05 , null , 0)
	call Cun('I00B' , "倚天剑" , "闪避" , 15 , "法力回复" , 5 , "杀怪回复" , 2000 , "伤害回复" , 500)
	call Cun('I04F' , "断肠" , "攻击速度" , 30 , "暴击率" , 0.02 , null , 0 , null , 0)
	call Cun('I00P' , "晶玉扇" , "攻击速度" , 25 , "杀怪回复" , 1500 , null , 0 , null , 0)
	call Cun('I00Q' , "紫金刀" , "暴击伤害" , 0.6 , "暴击率" , 0.05 , "杀怪回复" , 1500 , null , 0)
	call Cun('I01L' , "精钢剑" , "攻击速度" , 20 , "吸血" , 0.05 , "暴击率" , 0.03 , null , 0)
	call Cun('I01N' , "七星扇" , "法力回复" , 2 , null , 0 , null , 0 , null , 0)
	call Cun('I00X' , "鸳鸯刀" , "攻击速度" , 20 , null , 0 , null , 0 , null , 0)
	call Cun('I097' , "打狗棒" , "攻击速度" , 60 , "暴击伤害" , 1.5 , null , 0 , null , 0)
	call Cun('I099' , "君子剑" , "吸血" , 0.15 , "法力回复" , 2 , "杀怪回复" , 500 , "生命回复" , 200)
	call Cun('I09B' , "蛇杖" , "暴击伤害" , 0.9 , "暴击率" , 0.5 , null , 0 , null , 0)
	call Cun('I09A' , "淑女剑" , "闪避" , 15 , "伤害回复" , 500 , "暴击伤害" , 0.3 , "暴击率" , 0.03)
	call Cun('I09C' , "双剑合璧" , "吸血" , 0.15 , "法力回复" , 5 , "杀怪回复" , 2000 , "生命回复" , 500)
	call Cun('I09C' , "双剑合璧" , "闪避" , 15 , "伤害回复" , 800 , "暴击伤害" , 0.5 , "暴击率" , 0.05)
	call Cun('I098' , "血刀" , "攻击速度" , 60 , "暴击伤害" , 0.8 , "杀怪回复" , 10000 , null , 0)
	call Cun('I09D' , "玉箫" , "法力回复" , 15 , "杀怪回复" , 2000 , "生命回复" , 1500 , null , 0)
	call Cun('I0DK' , "真武剑" , "法力回复" , 10 , "杀怪回复" , 2000 , "生命回复" , 1500 , null , 0)
	call Cun('I0DU' , "拂尘" , "法力回复" , 15 , "杀怪回复" , 1000 , "生命回复" , 3000 , null , 0)
	call Cun('I0DY' , "镇岳尚方" , "攻击速度" , 60 , "暴击伤害" , 0.5 , "杀怪回复" , 10000 , null , 0)
	call Cun('I0EJ' , "铁掌令" , "攻击速度" , 45 , "暴击率" , 0.2 , "伤害回复" , 2000 , null , 0)
	call Cun('I0DZ' , "毒龙鞭" , "攻击速度" , 45 , "暴击伤害" , 1 , "杀怪回复" , 10000 , null , 0)
	call Cun('I0E0' , "养吾剑" , "攻击速度" , 50 , "暴击伤害" , 0.6 , "杀怪回复" , 10000 , null , 0)
	call Cun('I0E2' , "东灵铁剑" , "攻击速度" , 60 , "暴击伤害" , 1.5 , "杀怪回复" , 6000 , null , 0)
	call Cun('I0EZ' , "碧水剑" , "攻击速度" , 60 , "暴击伤害" , 1.5 , "杀怪回复" , 6000 , null , 0)
	call Cun('I0F6' , "寒魄剑" , "攻击速度" , 60 , "暴击伤害" , 1.5 , "杀怪回复" , 6000 , null , 0)
	call Cun('I08V' , "江湖·忠" , "攻击速度" , 60 , "暴击伤害" , 1 , "暴击率" , 0.2 , "杀怪回复" , 3000)
	call Cun('I02S' , "镇妖+1" , "攻击速度" , 20 , "暴击伤害" , 0.15 , "杀怪回复" , 300 , null , 0)
	call Cun('I02M' , "镇妖+2" , "攻击速度" , 30 , "暴击伤害" , 0.3 , "杀怪回复" , 600 , null , 0)
	call Cun('I02Q' , "镇妖+3" , "攻击速度" , 40 , "暴击伤害" , 0.45 , "杀怪回复" , 900 , null , 0)
	call Cun('I02R' , "镇妖+4" , "攻击速度" , 50 , "暴击伤害" , 0.6 , "杀怪回复" , 1200 , null , 0)
	call Cun('I02P' , "镇妖+5" , "攻击速度" , 60 , "暴击伤害" , 0.75 , "杀怪回复" , 1500 , null , 0)
	call Cun('I01S' , "开山斧" , "暴击伤害" , 0.15 , "杀怪回复" , 300 , null , 0 , null , 0)
	call Cun('I020' , "青铜刀" , "攻击速度" , 40 , "杀怪回复" , 0 , null , 0 , null , 0)
	call Cun('I0CI' , "张无忌用过的青铜刀" , "攻击速度" , 60 , "杀怪回复" , 0 , null , 0 , null , 0)
	call Cun('I01E' , "秋叶刃" , "攻击速度" , 15 , "杀怪回复" , 500 , null , 0 , null , 0)
	call Cun('I021' , "锁候枪" , "分裂" , 0.3 , "暴击率" , 0.03 , null , 0 , null , 0)
	call Cun('I016' , "宣花斧" , "吸血" , 0.15 , null , 0 , null , 0 , null , 0)
	call Cun('I013' , "饮血枪" , "攻击速度" , 20 , null , 0 , null , 0 , null , 0)
	call Cun('I022' , "布衣" , "气血" , 1000 , "杀怪回复" , 30 , "移动速度" , 30 , null , 0)
	call Cun('I01T' , "彩衣" , "气血" , 3000 , "伤害回复" , 70 , null , 0 , null , 0)
	call Cun('I01H' , "虎皮衣" , "气血" , 3000 , null , 0 , null , 0 , null , 0)
	call Cun('I01G' , "蛇皮裘" , "气血" , 5000 , "伤害回复" , 100 , "生命回复" , 250 , null , 0)
	call Cun('I017' , "开阳衣" , "气血" , 10000 , null , 0 , null , 0 , null , 0)
	call Cun('I014' , "烈火衣" , "气血" , 20000 , "闪避" , 10 , null , 0 , null , 0)
	call Cun('I01O' , "七星锦服" , "气血" , 7000 , "攻击速度" , 30 , "伤害回复" , 300 , null , 0)
	call Cun('I04E' , "金蝉衣" , "气血" , 15000 , "生命回复" , 700 , "法力上限" , 20 , "法力回复" , 5)
	call Cun('I00O' , "软猬甲" , "气血" , 40000 , "生命回复" , 1200 , "法力上限" , 20 , null , 0)
	call Cun('I00F' , "六合纵横" , "气血" , 100000 , "伤害回复" , 500 , null , 0 , null , 0)
	call Cun('I00G' , "破军无双" , "气血" , 100000 , "生命回复" , 1500 , "闪避" , 20 , null , 0)
	call Cun('I090' , "决战·霸" , "气血" , 100000 , "生命回复" , 2000 , "暴击率" , 0.05 , null , 0)
	call Cun('I0AL' , "少林袈裟" , "气血" , 50000 , "伤害回复" , 2000 , "暴击伤害" , 0.7 , null , 0)
	call Cun('I0DP' , "七星道袍" , "气血" , 50000 , "伤害回复" , 1500 , "暴击伤害" , 0.7 , "法力回复" , 10)
	call Cun('I09Z' , "通神" , "气血" , 40000 , null , 0 , null , 0 , null , 0)
	call Cun('I01Q' , "破军帽" , "气血" , 1500 , "伤害回复" , 150 , null , 0 , null , 0)
	call Cun('I00M' , "灭云冠" , "法力上限" , 40 , "暴击伤害" , 0.2 , null , 0 , null , 0)
	call Cun('I08Z' , "决战·恶" , "气血" , 50000 , "攻击速度" , 50 , "伤害回复" , 800 , "法力上限" , 100)
	call Cun('I01R' , "破军鞋" , "生命回复" , 150 , "移动速度" , 70 , null , 0 , null , 0)
	call Cun('I0DO' , "乔峰穿过的草鞋" , null , 0 , "移动速度" , 100 , null , 0 , null , 0)
	call Cun('I00T' , "神行鞋" , "气血" , 25000 , "移动速度" , 160 , "法力上限" , 25 , "法力回复" , 10)
	call Cun('I00N' , "踏风靴" , "移动速度" , 180 , "杀怪回复" , 1000 , "生命回复" , 500 , "法力回复" , 4)
	call Cun('I08Y' , "决战·魁" , "移动速度" , 200 , "闪避" , 30 , "伤害回复" , 600 , "暴击伤害" , 0.8)
	call Cun('I01V' , "苍蟒护腕" , "攻击速度" , 15 , "暴击率" , 0.05 , "特殊攻击" , 2 , null , 0)
	call Cun('I01U' , "纱绒护腕" , "攻击速度" , 15 , "暴击伤害" , 0.15 , "特殊攻击" , 3 , null , 0)
	call Cun('I018' , "彩云腕" , "生命回复" , 200 , "特殊攻击" , 3 , null , 0 , null , 0)
	call Cun('I01D' , "天璇护腕" , "攻击速度" , 20 , "特殊攻击" , 5 , "气血" , 6000 , null , 0)
	call Cun('I015' , "霓云手套" , "吸血" , 0.03 , "生命回复" , 300 , "法力上限" , 20 , "特殊攻击" , 10)
	call Cun('I01M' , "精钢护腕" , "气血" , 2000 , "特殊攻击" , 3 , null , 0 , null , 0)
	call Cun('I00Z' , "追月手" , "攻击速度" , 25 , "伤害回复" , 400 , "法力回复" , 5 , "特殊攻击" , 6)
	call Cun('I00R' , "天玑毒掌" , "攻击速度" , 30 , "伤害回复" , 400 , "暴击伤害" , 0.3 , "暴击率" , 0.02)
	call Cun('I00S' , "无魅雷手" , "攻击速度" , 30 , "杀怪回复" , 1500 , "法力回复" , 5 , "特殊攻击" , 7)
	call Cun('I00H' , "魔影炎掌" , "攻击速度" , 40 , "杀怪回复" , 2000 , "特殊攻击" , 8 , null , 0)
	call Cun('I00I' , "踏风冰手" , "攻击速度" , 40 , "伤害回复" , 500 , "暴击伤害" , 0.5 , "暴击率" , 0.05)
	call Cun('I023' , "护身符" , "伤害回复" , 40 , null , 0 , null , 0 , null , 0)
	call Cun('I024' , "环戒" , "杀怪回复" , 100 , "生命回复" , 50 , null , 0 , null , 0)
	call Cun('I0CH' , "郭靖戴过的环戒" , "闪避" , 20 , "杀怪回复" , 100 , "生命回复" , 50 , null , 0)
	call Cun('I01W' , "传家符" , "杀怪回复" , 150 , "生命回复" , 300 , null , 0 , null , 0)
	call Cun('I01X' , "琥珀项链" , "杀怪回复" , 250 , "生命回复" , 150 , null , 0 , null , 0)
	call Cun('I01Y' , "水碧护符" , "杀怪回复" , 200 , "生命回复" , 120 , "法力回复" , 3 , "伤害回复" , 60)
	call Cun('I01Z' , "闪避护符" , "杀怪回复" , 150 , "闪避" , 10 , "伤害回复" , 80 , null , 0)
	//call Cun('I01J',"七绝护符","攻击速度",30,"暴击率",0.02,null,0,null,0)
	call Cun('I01K' , "青竹戒指" , "法力回复" , 3 , null , 0 , null , 0 , null , 0)
	call Cun('I01I' , "星云戒指" , "杀怪回复" , 300 , "暴击伤害" , 0.1 , null , 0 , null , 0)
	call Cun('I019' , "白虎符" , "气血" , 5000 , null , 0 , null , 0 , null , 0)
	call Cun('I01A' , "蓝魔项链" , "杀怪回复" , 800 , "法力上限" , 40 , "法力回复" , 5 , null , 0)
	call Cun('I01B' , "北斗护符" , "移动速度" , 80 , "生命回复" , 600 , null , 0 , null , 0)
	call Cun('I01C' , "梦蝶项链" , null , 0 , "攻击速度" , 15 , "气血" , 8000 , "伤害回复" , 100)
	call Cun('I01P' , "七星戒指" , null , 0 , "攻击速度" , 15 , "生命回复" , 200 , "暴击伤害" , 0.15)
	call Cun('I010' , "云海链" , "气血" , 13000 , "杀怪回复" , 500 , "法力上限" , 25 , "暴击伤害" , 0.2)
	call Cun('I00Y' , "七情束" , "生命回复" , 400 , "法力上限" , 20 , "法力回复" , 5 , "暴击率" , 0.02)
	call Cun('I011' , "影岚护符" , "吸血" , 0.05 , "攻击速度" , 20 , "移动速度" , 100 , "生命回复" , 400)
	call Cun('I012' , "玉修护符" , "气血" , 25000 , "杀怪回复" , 700 , "生命回复" , 600 , "暴击率" , 0.01)
	call Cun('I00U' , "云灭护符" , "攻击速度" , 40 , "杀怪回复" , 1000 , "暴击伤害" , 0.3 , null , 0)
	call Cun('I00V' , "抗魔护符" , "吸血" , 0.1 , "气血" , 25000 , "法力上限" , 15 , "暴击伤害" , 0.4)
	call Cun('I00W' , "重生链" , "吸血" , 0.05 , "攻击速度" , 45 , "生命回复" , 700 , "暴击率" , 0.01)
	call Cun('I00J' , "神迹戒" , "杀怪回复" , 1000 , "伤害回复" , 500 , "法力回复" , 8 , null , 0)
	call Cun('I00K' , "如意戒" , "攻击速度" , 40 , "伤害回复" , 400 , "法力上限" , 50 , null , 0)
	call Cun('I00L' , "绿扳指" , "攻击速度" , 50 , "生命回复" , 500 , "气血" , 20000 , "暴击伤害" , 0.5)
	call Cun('I08W' , "江湖·情" , "生命回复" , 1000 , "法力回复" , 7 , "暴击率" , 0.1 , null , 0)
	call Cun('I08X' , "江湖·义" , "吸血" , 0.3 , "攻击速度" , 0.5 , "暴击伤害" , 1 , "暴击率" , 0.05)
	call Cun('I0E8' , "游侠印记" , "杀怪回复" , 250 , "生命回复" , 150 , "法力回复" , 3 , null , 0)
	call Cun('I0E9' , "小侠印记" , "杀怪回复" , 250 , "生命回复" , 150 , "法力回复" , 5 , null , 0)
	call Cun('I0EA' , "名侠印记" , "杀怪回复" , 350 , "生命回复" , 200 , "法力回复" , 8 , null , 0)
	call Cun('I0EB' , "大侠印记" , "杀怪回复" , 550 , "生命回复" , 500 , "法力回复" , 8 , null , 0)
	call Cun('I0EC' , "巨侠印记" , "杀怪回复" , 750 , "生命回复" , 700 , "法力回复" , 10 , null , 0)
	call Cun('I0ED' , "虾米印记" , "杀怪回复" , 1000 , "生命回复" , 1000 , "法力回复" , 10 , null , 0)
	call Cun('I0EE' , "十四天书" , "杀怪回复" , 2000 , "生命回复" , 2000 , "法力回复" , 20 , "暴击伤害" , 1)
endfunction
//刚进入地图
function Zw takes nothing returns nothing
	call FogEnableOff()
	call FogMaskEnableOff()
	call SetCreepCampFilterState(false)
	call jw(false)
	call SetPlayerAllianceStateBJ(Player(12), Player(6), 3)
	call SetPlayerHandicapXP(Player(0), .43)
	call SetPlayerHandicapXP(Player(1), .43)
	call SetPlayerHandicapXP(Player(2), .43)
	call SetPlayerHandicapXP(Player(3), .43)
	call SetPlayerHandicapXP(Player(4), .43)
	call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, 2200., .0)
	call SaveInteger(YDHT, GetHandleId(Player(0)), 0xA816E128, 2200)
	call PlayMusicBJ(xh)
	set K4[1]=Ls
	set K4[2]=Qs
	set K4[3]=Os
	set K4[4]=Ns
	set K4[5]=Ps
	set K4[6]=LanXin
	set K4[7]=XuanJin
	set K4[8]=kongYao
	set K4[9]=qiXiao
	call GroupAddUnit(i7, Ls)
	call GroupAddUnit(i7, Ns)
	call GroupAddUnit(i7, Qs)
	call GroupAddUnit(i7, Os)
	call GroupAddUnit(i7, Ps)
	call GroupAddUnit(i7, LanXin)
	call GroupAddUnit(i7, XuanJin)
	call GroupAddUnit(i7, kongYao)
	call GroupAddUnit(i7, qiXiao)
	set y7[1]=1969711215
	set y7[2]=1970498413
	set y7[3]=1852798821
	set y7[4]=1851879023
	set y7[5]=1852008562
	set y7[6]=1852273524
	set y7[7]=1969381742
	set y7[8]=1852466993
	set y7[9]=1869898354
	set y7[10]=1853320292
	set y7[11]=1852208244
	set y7[12]=1701077869
	set y7[13]=1751410807
	set y7[14]=1852076648
	set y7[15]=1970107511
	set y7[16]=1852990571
	set y7[17]=1852207714
	set y7[18]=1869898347
	set y7[19]=1853517677
	set y7[20]=1869311844
	set y7[21]=1852076404
	set y7[22]=1852076662
	set y7[23]=1852204908
	set y7[24]=1701013613
	set y7[25]=1853125236
	set y7[26]=1852601452
	set y7[27]=1702064246
	set y7[28]=1852403302
	set y7[29]='nbdk'
	set y7[30]='nhyd'
	set u7[1]='ncer'
	set u7[2]='nhea'
	set u7[3]='nlkl'
	set u7[4]='nele'
	set u7[5]='nenp'
	set u7[6]='nbda'
	set u7[7]='n002'
	set u7[8]='nbds'
	//call SetHeroLevel(gg_unit_N008_0054,99,true)
	call SetUnitLifePercentBJ(gg_unit_N007_0055, 5)
	call SetUnitLifePercentBJ(gg_unit_N012_0095, 5)
	//call UnitAddAbility(gg_unit_N00F_0112,'A02Z')
	//call IssueTargetOrderById(gg_unit_N00F_0112, 852063, gg_unit_N007_0055)
	call AddSpecialEffectTargetUnitBJEx("overhead" , Ts , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Ft , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Ss , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , vt , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , ot , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , nt , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Et , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , ct , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , zt , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Ct , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , ut , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , xt , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , yt , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Dt , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , At , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , Bt , "Objects\\RandomObject\\RandomObject.mdl")
	call AddSpecialEffectTargetUnitBJEx("overhead" , gg_unit_N007_0055 , "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	call CreateTextTagUnitBJ("双击选人再选门派", Rs, .0, 15., 100., 100., .0, 50.)
	// call CreateTextTagUnitBJ("新手教官",SuiFeng,.0,15.,100.,100.,.0,50.)
	// call CreateTextTagLocBJ("新手教官",Location(420,-597),100.0,15.,100.,100.,.0,50.)
	// call CreateTextTagLocBJ("地图等级福利",Location(-1500,-113),100.0,15.,100.,100.,.0,50.)
	// call CreateTextTagLocBJ("积分商店",Location(-1500,-1344),120.0,15.,100.,100.,.0,50.)
	call CreateTextTagLocBJ("决战江湖名人榜", GetRectCenter(uh), 100., $A, 100, 100, .0, 50.)
	set v7[1]=GetRectCenter(Ie)
	set v7[2]=GetRectCenter(le)
	set v7[3]=GetRectCenter(Je)
	set v7[4]=GetRectCenter(Ke)
	set v7[5]=GetRectCenter(Le)
	set v7[6]=GetRectCenter(Me)
	set v7[7]=GetRectCenter(Ne)
	set v7[8]=GetRectCenter(Oe)
	set v7[9]=GetRectCenter(Ge)
	set v7[$A]=GetRectCenter(Re)
	set v7[$B]=GetRectCenter(ff)
	set C7[1]=ft
	set C7[2]=gt
	set C7[3]=ht
	set C7[4]=jt
	set C7[5]=kt
	set b7[1]=Us
	set b7[2]=Zs
	set b7[3]=Ys
	set b7[4]=Xs
	set b7[5]=Ws
	call commonAddGold(Player(0) , 10000)
	call commonAddGold(Player(1) , 10000)
	call commonAddGold(Player(2) , 10000)
	call commonAddGold(Player(3) , 10000)
	call commonAddGold(Player(4) , 10000)
	call commonAddLumber(Player(0) , 10)
	call commonAddLumber(Player(1) , 10)
	call commonAddLumber(Player(2) , 10)
	call commonAddLumber(Player(3) , 10)
	call commonAddLumber(Player(4) , 10)
	call ChooseMoShi()
	set bj_forLoopAIndex=0
	loop
		exitwhen bj_forLoopAIndex >= 5
		if GetPlayerController(Player(bj_forLoopAIndex)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(bj_forLoopAIndex)) == PLAYER_SLOT_STATE_PLAYING then
			call SaveStr(YDHT, GetHandleId(Player(bj_forLoopAIndex)), GetHandleId(Player(bj_forLoopAIndex)), GetPlayerName(Player(bj_forLoopAIndex)))
			call SaveStr(YDHT, GetHandleId(Player(bj_forLoopAIndex)), GetHandleId(Player(bj_forLoopAIndex)) * 2, GetPlayerName(Player(bj_forLoopAIndex)))
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	call YDWEPolledWaitNull(40.)
	call StartTimerBJ(A7[3], false, 90.)
	call CreateTimerDialogBJ(bj_lastStartedTimer, "邪教进攻倒计时：")
	call TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	set z7[3]=bj_lastCreatedTimerDialog
	call YDWEPolledWaitNull(120.)
	call TriggerExecute(ss)
	set hd=true
endfunction
function InitFamouses takes nothing returns nothing
	set ve[1]=1328558411
	set xe[1]=400
	set ye[1]=20
	set ze[1]=600
	set ve[2]=1429221424
	set xe[2]=350
	set ye[2]=15
	set ze[2]=730
	set ve[3]=1160786002
	set xe[3]=260
	set ye[3]=12
	set ze[3]=540
	set ve[4]=1211117633
	set xe[4]=$FA
	set ye[4]=18
	set ze[4]=500
	set ve[5]=1328558412
	set xe[5]=310
	set ye[5]=16
	set ze[5]=750
	set ve[6]=1328558413
	set xe[6]=$DC
	set ye[6]=19
	set ze[6]=700
	set ve[7]=1328558414
	set xe[7]=340
	set ye[7]=17
	set ze[7]=640
	set ve[8]=1160786003
	set xe[8]=320
	set ye[8]=$A
	set ze[8]=780
	set ve[9]=1160786004
	set xe[9]=$C8
	set ye[9]=12
	set ze[9]=550
	set ve[10]=1311780913
	set xe[10]=380
	set ye[10]=$B
	set ze[10]=580
	set ve[11]=1328558415
	set xe[11]=280
	set ye[11]=$E
	set ze[11]=800
endfunction
function InitBosses takes nothing returns nothing
	set Ae[1]=1227896898
	set Ae[2]=1227896665
	set Ae[3]=1227896666
	set Ae[4]=1227896880
	set Ae[5]=1227896881
	set Ae[6]=1227896882
	set Ae[7]=1227896883
	set Ae[8]=1227896884
	set Ae[9]=1227896885
	set Ae[10]=1227896886
	set Ae[11]=1227896887
	set Ae[12]=1227896888
	set Ae[13]=1227896889
	set Ae[14]=1227896897
	set Ae[15]=1227896911
	set Ae[16]=1227896899
	set Ae[17]=1227896900
	set Ae[18]=1227896901
	set Ae[19]=1227896902
	set Ae[20]=1227896903
	set Ae[21]=1227896904
	set Ae[22]=1227896905
	set Ae[23]=1227896906
	set Ae[24]=1227896907
	set Ae[25]=1227896908
	set Ae[26]=1227896909
	set Ae[27]=1227896910
	set Ae[28]=1227896912
endfunction
function InitHerbs takes nothing returns nothing
	set YaoCao[1]='I07F'
	set YaoCao[2]='I07G'
	set YaoCao[3]='I07E'
	set YaoCao[4]='I076'
	set YaoCao[5]='I077'
	set YaoCao[6]='I078'
	set YaoCao[7]='I079'
	set YaoCao[8]='I07B'
	set YaoCao[9]='I07A'
	set YaoCao[10]='I07C'
	set YaoCao[11]='I07D'
	set YaoCao[12]='I07H'
endfunction
function InitEquipments takes nothing returns nothing
	//衣服清单
	set ZhuangBei[1]='I022' // 布衣
set ZhuangBei[2]='I01T' // 彩衣
set ZhuangBei[3]='I01H' // 虎皮衣
set ZhuangBei[4]='I01G' // 蛇皮裘
set ZhuangBei[5]='I017' // 开阳衣
set ZhuangBei[6]='I014' // 烈火衣
set ZhuangBei[7]='I01O'
	set ZhuangBei[8]='I04E'
	set ZhuangBei[9]='I09Z'
	set ZhuangBei[10]='I00O'
	set ZhuangBei[11]='I00F'
	set ZhuangBei[12]='I00G'
	set ZhuangBei[13]='I0AL'
	set ZhuangBei[14]='I090'
	//饰品清单
	//白字
	set ShiPin[1]='I023' // 护身符
set ShiPin[2]='I023' // 护身符
set ShiPin[3]='I01U' // 纱绒护腕
set ShiPin[4]='I01V' // 苍蟒护腕
set ShiPin[5]='I01W' // 传家符
set ShiPin[6]='I01X' // 琥珀项链
set ShiPin[7]='I01Y' // 水碧护符
set ShiPin[8]='I01Z' // 闪避护符
set ShiPin[9]='I01I' // 星云戒指
set ShiPin[10]='I01J'
	set ShiPin[11]='I01K'
	set ShiPin[12]='I015'
	set ShiPin[13]='I018'
	set ShiPin[14]='I019'
	set ShiPin[15]='I01A'
	set ShiPin[16]='I01B'
	set ShiPin[17]='I01C'
	set ShiPin[18]='I01D'
	//蓝字
	set ShiPin[19]='I01M'
	set ShiPin[20]='I011'
	set ShiPin[21]='I012'
	set ShiPin[22]='I01Q'
	set ShiPin[23]='I01R'
	set ShiPin[24]='I01O'
	set ShiPin[25]='I01P'
	set ShiPin[26]='I00Y'
	set ShiPin[27]='I00Z'
	set ShiPin[28]='I00R'
	set ShiPin[29]='I00S'
	set ShiPin[30]='I00T'
	set ShiPin[31]='I00U'
	set ShiPin[32]='I00V'
	set ShiPin[33]='I00W'
	//紫字
	set ShiPin[34]='I00H'
	set ShiPin[35]='I00I'
	set ShiPin[36]='I00J'
	set ShiPin[37]='I00K'
	set ShiPin[38]='I00L'
	set ShiPin[39]='I00M'
	set ShiPin[40]='I00N'
	//红字
	set ShiPin[41]='I08W'
	set ShiPin[42]='I08X'
	set ShiPin[43]='I08Y'
	set ShiPin[44]='I08Z'
	
	
	// 地图等级奖励物品id
	// 3级奖励
	set mapLevelReward[1]='I06H'
	set mapLevelReward[2]='I01X'
	set mapLevelReward[3]='I01U'
	// 5级奖励
	set mapLevelReward[4]='I02T'
	set mapLevelReward[5]='I01P'
	set mapLevelReward[6]='I01G'
	set mapLevelReward[7]='I01M'
	// 8级奖励
	set mapLevelReward[8]='I01A'
	set mapLevelReward[9]='I01C'
	set mapLevelReward[10]='I01B'
	// 10级奖励
	set mapLevelReward[11]='I019'
	set mapLevelReward[12]='I00Z'
	set mapLevelReward[13]='I010'
	set mapLevelReward[14]='I00X'
	set mapLevelReward[15]='I00Y'
	// 11级奖励
	set mapLevelReward[16]='I06Z'
	set mapLevelReward[17]='I071'
	set mapLevelReward[18]='I02K'
	set mapLevelReward[19]='I070'
	// 12级奖励
	set mapLevelReward[20]='I0AM'
	set mapLevelReward[21]='I01D'
	set mapLevelReward[22]='I01J'
	// 14级奖励
	set mapLevelReward[23]='I0E9'
	
endfunction
//门派武功
function InitDenominationSkills takes nothing returns nothing
	set udg_menpainame[1]="少林派"
	set denomFirst[1]='A05G'
	set denomThird[1]='A000'
	set denomSecond[1]='A05K'
	set denomFourth[1]='A05O'
	set denomFifth[1]='S000'
	set udg_menpainame[2]="古墓派"
	set denomFirst[2]='A09E'
	set denomThird[2]='A09J'
	set denomSecond[2]='A09M'
	set denomFourth[2]='A09T'
	set denomFifth[2]='A09U'
	set udg_menpainame[3]="丐帮"
	set denomFirst[3]='A0C9'
	set denomThird[3]='A0CB'
	set denomSecond[3]='A0C8'
	set denomFourth[3]='A0CA'
	set denomFifth[3]='A0DI'
	set udg_menpainame[4]="华山派"
	set denomFirst[4]='A08Y'
	set denomThird[4]='A08W'
	set denomSecond[4]='A08X'
	set denomFourth[4]='A037'
	set denomFifth[4]='A091'
	set udg_menpainame[5]="全真教"
	set denomFirst[5]='A0CF'
	set denomThird[5]='A0DA'
	set denomSecond[5]='A0CM'
	set denomFourth[5]='A0CH'
	set denomFifth[5]='A0DE'
	set udg_menpainame[6]="血刀门"
	set denomFirst[6]='A0CI'
	set denomThird[6]='A0CJ'
	set denomSecond[6]='A0CN'
	set denomFourth[6]='A0CK'
	set denomFifth[6]='A0DH'
	set udg_menpainame[7]="恒山派"
	set denomFirst[7]='A021'
	set denomThird[7]='A01Z'
	set denomSecond[7]='A0CD'
	set denomFourth[7]='A023'
	set denomFifth[7]='A024'
	set udg_menpainame[8]="峨眉派"
	set denomFirst[8]='A0C7'
	set denomThird[8]='A0C2'
	set denomSecond[8]='A0C5'
	set denomFourth[8]='A0C4'
	set denomFifth[8]='A0C6'
	set udg_menpainame[9]="武当派"
	set denomFirst[9]='A04D'
	set denomThird[9]='A08S'
	set denomSecond[9]='A08R'
	set denomFourth[9]='A08Q'
	set denomFifth[9]='A08V'
	set udg_menpainame[10]="星宿派"
	set denomFirst[10]='A0BP'
	set denomThird[10]='A0BS'
	set denomSecond[10]='A0BQ'
	set denomFourth[10]='A0BT'
	set denomFifth[10]='A0BV'
	set udg_menpainame[11]="自由门派"
	set denomFirst[11]='AEfk'
	set denomThird[11]='AEfk'
	set denomSecond[11]='AEfk'
	set denomFourth[11]='AEfk'
	set denomFifth[11]='AEfk'
	set udg_menpainame[12]="灵鹫宫"
	set denomFirst[12]='A02B'
	set denomThird[12]='A02C'
	set denomSecond[12]='A02F'
	set denomFourth[12]='A02G'
	set denomFifth[12]='A02H'
	set udg_menpainame[13]="姑苏慕容"
	set denomFirst[13]='A02K'
	set denomThird[13]='A0CC'
	set denomSecond[13]='A02M'
	set denomFourth[13]='A02V'
	set denomFifth[13]='A02R'
	set udg_menpainame[14]="明教"
	set denomFirst[14]='A030'
	set denomThird[14]='A032'
	set denomSecond[14]='A06R'
	set denomFourth[14]='A034'
	set denomFifth[14]='A07W'
	set udg_menpainame[15]="衡山派"
	set denomFirst[15]='A04M'
	set denomThird[15]='A04N'
	set denomSecond[15]='A04P'
	set denomFourth[15]='A026'
	set denomFifth[15]='A04R'
	set udg_menpainame[16]="神龙教"
	set denomFirst[16]='A04W'
	set denomThird[16]='A04Z'
	set denomSecond[16]='A051'
	set denomFourth[16]='A057'
	set denomFifth[16]='A059'
	set udg_menpainame[17]="神龙教"
	set denomFirst[17]='A056'
	set denomThird[17]='A054'
	set denomSecond[17]='A04X'
	set denomFourth[17]='A057'
	set denomFifth[17]='A059'
	set udg_menpainame[18]="泰山派"
	set denomFirst[18]='A08A'
	set denomThird[18]='A08B'
	set denomSecond[18]='A08E'
	set denomFourth[18]='A08G'
	// set denomFifth[18]='A08H' // 快活三剑太卡，不用
	set denomFifth[18]='A08G'
	set udg_menpainame[19]="铁掌帮"
	set denomFirst[19]='A06Y'
	set denomThird[19]='A06Z'
	set denomSecond[19]='A07Y'
	set denomFourth[19]='A070'
	set denomFifth[19]='A0DP'
	set udg_menpainame[20]="唐门"
	set denomFirst[20]='A098'
	set denomThird[20]='A09A'
	set denomSecond[20]='A0B0'
	set denomFourth[20]='A0B6'
	set denomFifth[20]='A0B1'
	set udg_menpainame[21]="五毒教"
	set denomFirst[21]='A0BL'
	set denomThird[21]='A0DU'
	set denomSecond[21]='A0DT'
	set denomFourth[21]='A0DS'
	set denomFifth[21]='A0DR'
	set udg_menpainame[22]="桃花岛"
	set denomFirst[22]='A0EE'
	set denomThird[22]='A0EG'
	set denomSecond[22]='A0EI'
	set denomFourth[22]='A0EK'
	set denomFifth[22]='A0EL'
	set udg_menpainame[23]="野螺派"
	set denomFirst[23]=ZAO_LEI_PI
	set denomThird[23]=BA_MIAN_LING_LONG
	set denomSecond[23]=FAN_SHOU_QIAN_ZHU
	set denomFourth[23]=QIAN_KUN_YI_ZHI
	set denomFifth[23]=DA_GONG_GAO_CHENG
	set udg_menpainame[24]="雪山派"
	set denomFirst[24]=XUE_SHAN_JIAN_FA
	set denomThird[24]=FENG_SHA_MANG_MANG
	set denomSecond[24]=JIN_WU_DAO_FA
	set denomFourth[24]=XUE_HUA_LIU_CHU
	set denomFifth[24]=WU_WANG_SHEN_GONG
	set udg_menpainame[25]="汝阳王府"
	set denomFirst[25]=TOU_KAN_TOU_XUE
	set denomThird[25]='AEfk'
	set denomSecond[25]='AEfk'
	set denomFourth[25]=XUAN_MING_SHEN_ZHANG
	set denomFifth[25]=JIA_YI_SHEN_GONG
	set udg_menpainame[26]="嵩山派"
	set denomFirst[26]=SONG_SHAN_JIAN_FA
	set denomThird[26]=ZI_WU_SHI_ER_JIAN
	set denomSecond[26]=HAN_BING_SHEN_ZHANG
	set denomFourth[26]=WU_MING_NEI_GONG
	set denomFifth[26]=DA_SONG_YANG_SHEN_ZHANG
endfunction
function InitSkillBooks takes nothing returns nothing
	set udg_jianghu[1]='I03J'
	set udg_jianghu[2]='I03H'
	set udg_jianghu[3]='I02V'
	set udg_jianghu[4]='I02U'
	set udg_jianghu[5]='I03G'
	set udg_jianghu[6]='I02Z'
	set udg_jianghu[7]='I03I'
	set udg_jianghu[8]='I02X'
	set udg_jianghu[9]='I02Y'
	set udg_jianghu[10]='I03K'
	set udg_jianghu[11]='I03D'
	set udg_jianghu[12]='I03L'
	set udg_jianghu[13]='I030'
	set udg_jianghu[14]='I031'
	set udg_jianghu[15]='I03E'
	set udg_jianghu[16]='I033'
	set udg_jianghu[17]='I02W'
	set udg_jianghu[18]='I03F'
	
	set udg_juexue[1]='I039'
	set udg_juexue[2]='I034'
	set udg_juexue[3]='I038'
	set udg_juexue[4]='I037'
	set udg_juexue[5]='I03B'
	set udg_juexue[6]='I032'
	set udg_juexue[7]='I035'
	set udg_juexue[8]='I036'
	set udg_juexue[9]='I03C'
	set udg_juexue[10]='I03A'
	set udg_juenei[1]='I03S'
	set udg_juenei[2]='I03O'
	set udg_juenei[3]='I03T'
	set udg_juenei[4]='I03Q'
	set udg_juenei[5]='I03M'
	set udg_juenei[6]='I03P'
	set udg_juenei[7]='I03U'
	set udg_juenei[8]='I03R'
	
	set udg_canzhang[1]='I065'
	set udg_canzhang[2]='I061'
	set udg_canzhang[3]='I066'
	set udg_canzhang[4]='I064'
	set udg_canzhang[5]='I067'
	set udg_canzhang[6]='I062'
	set udg_canzhang[7]='I069'
	set udg_canzhang[8]='I060'
	set udg_canzhang[9]='I068'
	set udg_canzhang[10]='I063'
	set udg_canzhang[11]='I0CW'
	
	set udg_qiwu[1]='I0C2'
	set udg_qiwu[2]='I0C3'
	set udg_qiwu[3]='I0C4'
	set udg_qiwu[4]='I0C5'
	set udg_qiwu[5]='I0C6'
	set udg_qiwu[6]='I0C8'
	set udg_qiwu[7]='I0C9'
	set udg_qiwu[8]='I0CA'
	set udg_qiwu[9]='I0CB'
	set udg_qiwu[10]='I0CC'
	set udg_qiwu[11]='I0CD'
	set udg_qiwu[12]='I0CJ'
	set udg_qiwu[13]='I0CT'
	set udg_qiwu[14]='I0CU'
	set udg_qiwu[15]='I0CV'
	
	set udg_dan[1]='I06Y'
	set udg_dan[2]='I071'
	set udg_dan[3]='I06W'
	set udg_dan[4]='I074'
	set udg_dan[5]='I06V'
	set udg_dan[6]='I075'
	set udg_dan[7]='I073'
	set udg_dan[8]='I072'
	set udg_dan[9]='I070'
	set udg_dan[10]='I06X'
	set udg_dan[11]='I06Z'
	set udg_weapon[1]='I04F'
	set udg_weapon[2]='I00P'
	set udg_weapon[3]='I00Q'
	set udg_weapon[4]='I01L'
	set udg_weapon[5]='I01N'
	set udg_weapon[6]='I00X'
	set udg_weapon[7]='I00C'
	set udg_weapon[8]='I00D'
	set udg_weapon[9]='I00B'
	set udg_weapon[10]='I01F'
	set udg_weapon[11]='I01S'
	set udg_weapon[12]='I020'
	set udg_weapon[13]='I01E'
	set udg_weapon[14]='I021'
	set udg_weapon[15]='I016'
	set udg_weapon[16]='I013'
	set udg_weapon[17]='I08V'
	set udg_weapon[18]='I097'
	set udg_weapon[19]='I098'
	set udg_weapon[20]='I099'
	set udg_weapon[21]='I09A'
	set udg_weapon[22]='I09B'
	set udg_weapon[23]='I09C'
	set udg_weapon[24]='I09D'
	set udg_weapon[25]='I0DK'
	set udg_weapon[26]='I0DU'
	set udg_weapon[27]='I0DY'
	set udg_weapon[28]='I0DZ'
	set udg_weapon[29]='I0E0'
	set udg_weapon[30]='I0E2'
endfunction
function InitKillingTaskCreatures takes nothing returns nothing
	//阳寿已尽任务怪
	set udg_yangshou[1]='odoc'
	set udg_yangshou[2]='orai'
	set udg_yangshou[3]='hsor'
	set udg_yangshou[4]='nbdw'
	set udg_yangshou[5]='ndrw'
	set udg_yangshou[6]='ndqs'
	set udg_yangshou[7]='nsqo'
	set udg_yangshou[8]='nhrr'
	set udg_yangshou[9]='nomg'
	set udg_yangshou[10]='nubw'
	set udg_yangshou[11]='nrzb'
	set udg_yangshou[12]='nfpu'
	set udg_yangshou[13]='ngh2'
	set udg_yangshou[14]='nfsp'
	set udg_yangshou[15]='nmgd'
	set udg_yangshou[16]='uktn'
	set udg_yangshou[17]='nsrh'
	set udg_yangshou[18]='hspt'
	set udg_yangshou[19]='n00D'
	set udg_yangshou[20]='Hmkg'
	set udg_yangshou[21]='nfpc'
endfunction
// 单多通门派存档校正位数
function replenishSaveStr takes string oldSaveStr returns string
	if StringLength(oldSaveStr) < DENOMINATION_NUMBER then
		loop
			exitwhen StringLength(oldSaveStr) == DENOMINATION_NUMBER
			// body
			set oldSaveStr=oldSaveStr + "0"
		endloop
	endif
	if StringLength(oldSaveStr) > DENOMINATION_NUMBER then
		set oldSaveStr=SubString(oldSaveStr, 0, DENOMINATION_NUMBER)
	endif
	return oldSaveStr
endfunction
// 计算通关门派数量
function calMpCount takes integer i returns nothing
 local integer j= 0
 local integer msCount= 0
local integer ssCount= 0
local integer parentId= 1 + GetPlayerId(Player(i))
	// 截取存档，相加
	loop
		exitwhen j > DENOMINATION_NUMBER - 1
		// body
		set msCount=msCount + S2I(SubString(manySuccess[i], j, j + 1))
		set j=j + 1
	endloop
	set j=0
	loop
		exitwhen j > DENOMINATION_NUMBER - 1
		// body
		set ssCount=ssCount + S2I(SubString(singleSuccess[i], j, j + 1))
		set j=j + 1
	endloop
	
	
	// 单通奖励
	if ssCount >= 1 then
		// 双倍积分
		set extraDoubleJf[i]=2
		call SetPlayerTechResearched(Player(i), 'R007', 1)
	endif
	if ssCount >= 5 then
		call SetPlayerTechResearched(Player(i), 'R008', 1)
	endif
	if ssCount >= 8 then
		call SetPlayerTechResearched(Player(i), 'R009', 1)
	endif
	if ssCount >= 11 then
		// 积分兑换奇武次数加1
		set jfQiWuLimit[i]=4 // 角标0开始
call SetPlayerTechResearched(Player(i), 'R00A', 1)
	endif
	if ssCount >= 18 then
		call SetPlayerTechResearched(Player(i), 'R00B', 1)
	endif
	
	// 多通奖励
	if msCount >= 2 then
		// 1w金币
		call commonAddGold(Player(i) , 10000)
		call SetPlayerTechResearched(Player(i), 'R00C', 1)
	endif
	if msCount >= 5 then
		// 25木头
		call commonAddLumber(Player(i) , 25)
		call SetPlayerTechResearched(Player(i), 'R00D', 1)
	endif
	if msCount >= 8 then
		// 额外100移速
		set extraSpeed[i]=100
		call SetPlayerTechResearched(Player(i), 'R00E', 1)
	endif
	if msCount >= 11 then
		// 特攻加5
		set special_attack[i + 1]=special_attack[i + 1] + 5
		call SetPlayerTechResearched(Player(i), 'R00F', 1)
	endif
	if msCount >= 18 then
		// 守家积分加300
		set shoujiajf[i + 1]=shoujiajf[i + 1] + 300
		call SetPlayerTechResearched(Player(i), 'R00G', 1)
	endif
	// 通关门派存到哈希表，parentId从1开始
	call SaveInteger(YDHT, parentId, StringHash("多通门派数量"), msCount)
	call SaveInteger(YDHT, parentId, StringHash("单通门派数量"), ssCount)
	
	
endfunction
// 初始化服务器存档
function InitGlobalSave takes nothing returns nothing
 local integer i= 0
 local integer j= 0
 local integer a= 0
	
	// 获取全局存档
	set admin=DzAPI_Map_GetMapConfig("admin") // 测试码开关
if admin == "" then
		set admin="0"
	endif
	// 积分倍数全局存档
	set jfBeishu=DzAPI_Map_GetMapConfig("jfBeishu")
	
	set priKey=DzAPI_Map_GetMapConfig("priKey")
	
	loop
		exitwhen i > 4
		set extraDoubleJf[i]=1 // 无额外双倍积分
// set extraSpeed[i] = 0 // 无额外移速
set manySuccess[i]=(DzAPI_Map_GetServerValue((Player(i) ), "S" + ( "manySuccess"))) // 获取多通门派存档 // INLINED!!
set singleSuccess[i]=(DzAPI_Map_GetServerValue((Player(i) ), "S" + ( "singleSuccess"))) // 获取单通门派存档 // INLINED!!
// 出bug补档
set singleSuccess[i]=replenishSaveStr(singleSuccess[i])
		set manySuccess[i]=replenishSaveStr(manySuccess[i])
		set udg_zdl[i]=DzAPI_Map_GetStoredInteger(Player(i) , "zdl") // 获取战斗力存档
set udg_jf[i]=DzAPI_Map_GetStoredInteger(Player(i) , "jf") // 获取积分
set udg_success[i]=DzAPI_Map_GetStoredInteger(Player(i) , "success") // 获取通关次数
set max_damage[i]=DzAPI_Map_GetStoredReal(Player(i) , "maxDamage") // 获取最高伤害
set bonus_wugong[i]=DzAPI_Map_GetStoredReal(Player(i) , "wugong") // 获取武功伤害加成
set bonus_baoshang[i]=DzAPI_Map_GetStoredReal(Player(i) , "baoshang") // 获取爆伤加成
// 积分购买武功加成和爆伤上限30%，超过视为作弊，不加伤害
if bonus_wugong[i] > 0.3 then
			set bonus_wugong[i]=0
			call BJDebugMsg("伤害加成超过30%")
		endif
		if bonus_baoshang[i] > 0.3 then
			set bonus_baoshang[i]=0
			call BJDebugMsg("伤害加成超过30%")
		endif
		// 伤害加成加到武功伤害和暴击上
		set udg_shanghaijiacheng[i + 1]=udg_shanghaijiacheng[i + 1] + bonus_wugong[i]
		set udg_baojishanghai[i + 1]=udg_baojishanghai[i + 1] + bonus_baoshang[i]
		// 测试版本开局1000积分
		if testVersion then
			set udg_jf[i]=udg_jf[i] + 1000
		endif
		set jf_useMax[i]=0 // 每局已用积分

		// 计算通关门派及奖励
		call calMpCount(i)
		
		set i=i + 1
	endloop
	
endfunction
// 初始化测试人员的权限
function InitPriv takes nothing returns nothing
 local integer i= 0
	loop
		exitwhen i > 4
		if GetPlayerName(Player(i)) == "WorldEdit" or GetPlayerName(Player(i)) == "zeikale" or GetPlayerName(Player(i)) == "zeikala" or GetPlayerName(Player(i)) == "非我莫属xq" or GetPlayerName(Player(i)) == "苍穹而降" or GetPlayerName(Player(i)) == "晓窗临风" or GetPlayerName(Player(i)) == "沫Mu" or GetPlayerName(Player(i)) == "wenhuang" then
			if admin == "0" or testVersion then
				set udg_isTest[i]=true
				set talent_flag[i + 1]=1
				set tiezhang_flag[i + 1]=1
				set tangmen_flag[i + 1]=1
				set mall_addition[i + 1]=1
				set level_award[i + 1]=1
				// set extraDoubleJf[i] = 2 // 额外双倍积分
				call DisplayTextToPlayer(Player(i), 0, 0, "|Cff008C00开|r|Cff088f00启|r|Cff119300了|r|Cff1a9700天|r|Cff239b00赋|r|Cff2b9f00、|r|Cff34a300铁|r|Cff3da700掌|r|Cff46ab00帮|r|Cff4faf00和|r|Cff57b300唐|r|Cff60b700门|r|Cff69bb00的|r|Cff72bf00权|r|Cff7bc300限|r|Cff83c700，|r|Cff8ccb00开|r|Cff95cf00启|r|Cff9ed300双|r|Cffa7d700倍|r|Cffafdb00积|r|Cffb8df00分|r|Cffc1e300和|r|Cffcae700萌|r|Cffd3eb00新|r|Cffdbef00礼|r|Cffe4f300包|r|Cffedf700权|r|Cfff6fb00限|r")
			endif
		endif
		set i=i + 1
	endloop
endfunction
// 初始化玩家数量
function initPlayerCount takes nothing returns nothing
 local integer i= 1
	loop
		exitwhen i > 12
		// body
		if GetPlayerController(ConvertedPlayer(i)) == MAP_CONTROL_USER and GetPlayerSlotState(ConvertedPlayer(i)) == PLAYER_SLOT_STATE_PLAYING then
			set udg_wanjiashu=udg_wanjiashu + 1
		endif
		set i=i + 1
	endloop
	call BJDebugMsg("|CffFF0000玩家数量|r：" + I2S(udg_wanjiashu))
endfunction
function InitGlobalVariables takes nothing returns nothing
	call InitFamouses() //初始化名门
call InitBosses() //初始化BOSS
call InitHerbs() //初始化草药
call InitEquipments() //初始化装备
call InitDenominationSkills() //初始化门派武功
call InitSkillBooks() //初始化武功书
call InitKillingTaskCreatures() //初始化阳寿已尽任务怪
call InitGlobalSave() // 初始化服务器存档
call InitPriv() // 初始化测试权限
call initPlayerCount() // 初始化玩家数量
endfunction

function MenPai_Trigger takes nothing returns nothing
	call EMei_Trigger() //峨眉武功触发
call GaiBang_Trigger() //丐帮武功触发
call GuMu_Trigger() //古墓武功触发
call HuaShan_Trigger() //华山武功触发
call HengShan_Trigger() //恒山武功触发
call HengShan2_Trigger() //衡山武功触发
call LingJiuGong_Trigger() //灵鹫宫武功触发
call MuRongJia_Trigger() //慕容世家武功触发
call QuanZhen_Trigger() //全真武功触发
call ShaoLin_Trigger() //少林武功触发
call ShenLong_Trigger() //神龙教武功触发
call TieZhang_Trigger() //铁掌帮武功触发
call tangMenTrigger() //唐门武功触发
call TaiShan_Trigger() //泰山派武功触发
call VIPMingJiao_Trigger() //明教武功触发
call WuDang_Trigger() //武当武功触发
call XueDao_Trigger() //血刀门武功触发
call XingXiu_Trigger() //星宿武功触发
call initXueShan() // 初始化雪山变量
call initRuYang() // 初始化汝阳变量

	call JiangHuNeiGong_Trigger() //江湖内功触发（含九阴、绝内）
call JiangHuWuGong_Trigger() //江湖武功触发
call JueShiWuGong_Trigger() //绝世武功触发
endfunction
//地图初始化
function main1 takes nothing returns nothing
 local trigger t
 local real life
 local integer itemID
 local integer i
 local integer cu
 local integer Du
 local version v
 local integer wu
	call MapStartCreateUnitsAndInitEnvironments() // 创建单位并初始化环境

	set i=1
	loop
		exitwhen i >= 6
		set udg_shuxing[i]=10
		set qiuhun[i]=0
		set zhaoyangguo[i]=0
		set linganran[i]=0
		set touxiao[i]=0
		set bihai[i]=0
		set bibo_kill[i]=0
		set aidacishu[i]=0
		set udg_wuqishu[i]=0
		set udg_yifushu[i]=0
		set showDamage[i]=true
		set showEffect[i]=true
		set i=i + 1
	endloop
	call ExecuteFunc("mv")
	call ExecuteFunc("Pw")
	set i=0
	set i=0
	loop
		exitwhen ( i > 16 )
		set udg_jdds[i]=0
		set udg_ldds[i]=0
		set udg_xbds[i]=0
		set udg_bqds[i]=0
		set udg_dzds[i]=0
		set udg_jwjs[i]=0
		set juexuelingwu[i]=1
		set udg_baojishanghai[i]=1.5
		set udg_baojilv[i]=.03
		set shanghaihuifu[i]=100.
		set shaguaihufui[i]=200.
		set shengminghuifu[i]=0
		set falihuifu[i]=0
		set udg_lilianxishu[i]=1.
		set udg_hashero[i]=false
		set udg_baoji[i]=false
		set udg_yiwang[i]=false
		
		set tide_rising[i]=false
		set wumingBaseCount[i]=0
		set wumingCount[i]=0
		set wumingStr[i]=0
		set wumingAgi[i]=0
		set wumingInt[i]=0
		set R4[i]=DialogCreate()
		set Y4[i]=1
		set udg_xinggeA[i]=0
		set udg_xinggeB[i]=0
		// 赞助相关
		set udg_vip[i]=2
		set udg_changevip[i]=1
		set udg_elevenvip[i]=1
		// 是否是测试人员
		set udg_isTest[i]=false
		
		set saveFlag[i]=false // 默认未保存存档
// 初始奖励
set bonus_wugong[i]=0
		set bonus_baoshang[i]=0
		// 初始化最高伤害
		set max_damage[i]=0
		set wugongshu[i]=11 // 11格
set udg_zhemei[i]=0
		
		set jfQiWuLimit[i]=3 // 积分奇武限定兑换3次

		set chief[i]=0 // 掌门称号
set title0[i]=0 // 称号1 1-30
set title1[i]=0 // 称号2 31-60
set deputy[i]=0 // 副职
set master[i]=0 // 大师

		set qimen_status[i]=0 // 奇门术数标识
set ateDenom[i]=0 // 是否吞了专属
set ateTianShu[i]=0 // 是否吞了天书
set qiankunCd[i]=false // 乾坤是否处理CD中

		set wuxing[i]=9
		set jingmai[i]=9
		set gengu[i]=9
		set fuyuan[i]=9
		set danpo[i]=9
		set yishu[i]=9
		set jianghuLevel[i]=0
		if i >= 1 and i <= 5 then
			// set special_attack[i] = DzAPI_Map_GetMapLevel(Player(i - 1))
			// 特攻暂时改成:25 + 天赋树等级 * 2
			set special_attack[i]=25
		endif
		set udg_runamen[i]=0
		set D7[i]=0
		set F7[i]=0
		set G7[i]=0
		set K7[i]=DialogCreate()
		set L7[i]=0
		set O7[i]=0
		set P7[i]=0
		set wolfSkinCount[i]=0
		set wolfSkinFlag[i]=1
		set udg_revivetimer[i]=CreateTimer()
		set S7[i]=0
		set udg_MaxDamage[i]=0
		set d8[i]=0
		set e8[i]=0
		set shengwang[i]=0
		set g8[i]=0
		set h8[i]=0
		set i8[i]=0
		set j8[i]=0
		set o8[i]=false
		set v8[i]=DialogCreate()
		set b8[i]=false
		set C8[i]=false
		set c8[i]=false
		set D8[i]=DialogCreate()
		set F8[i]=false
		set XNKL[i]=false
		set daxia[i]=false
		set G8[i]=false
		set H8[i]=false
		set I8[i]=false
		set l8[i]=false
		set J8[i]=0
		set xiuxing[i]=0
		set MM8[i]=0
		set N8[i]=0
		set O8[i]=0
		set Z8[i]=false
		set d9[i]=false
		set e9[i]=false
		set f9[i]=CreateTimer()
		set h9[i]=false
		set i9[i]=0
		set v9[i]=false
		set w9[i]=false
		set x9[i]=false
		set y9[i]=false
		set z9[i]=0
		set A9[i]=0
		set G9[i]=0
		set H9[i]=0
		set I9[i]=0
		set l9[i]=0
		set udg_shanghaijiacheng[i]=.0
		set udg_shanghaixishou[i]=0
		set max_damage_absorb[i]=0.8
		set T9[i]=false
		set LLguaiA[i]=0
		set LLguaiE[i]=0
		set LLguaiB[i]=0
		set LLguaiC[i]=0
		set LLguaiD[i]=0
		set LLguaiF[i]=0
		set LLguaiG[i]=0
		set Z9[i]=CreateTimer()
		set ed[i]=false
		set fd[i]=CreateTimer()
		set jd[i]=0
		set kd[i]=0
		set qd[i]=0
		set rd[i]=0
		set ud[i]=0
		set wugongxiuwei[i]=0
		set xd[i]=0
		set yd[i]=0
		set Ad[i]=false
		set Bd[i]=false
		set Cd[i]=0
		set cd[i]=false
		set Dd[i]=0
		set Ed[i]=0
		set Fd[i]=CreateGroup()
		set Gd[i]=0
		set Id[i]=0
		set ld[i]=0
		set Jd[i]=0
		set Kd[i]=0
		set Ld[i]=0
		set Md[i]=0
		set Nd[i]=0
		set Od[i]=0
		set Pd[i]=0
		set Qd[i]=0
		set Rd[i]=false
		set Sd[i]=0
		set Td[i]=0
		set Ud[i]=0
		set Vd[i]=0
		set Wd[i]=0
		set jiuazi[i]=0
		set shoujiajf[i]=0
		set ge[i]=false
		set he[i]=false
		set je[i]=DialogCreate()
		set te[i]=0
		set ce[i]=0
		set De[i]=false
		set Ee[i]=false
		set i=i + 1
	endloop
	//set udg_menpaineigong=DialogCreate()
	set udg_index=DialogCreate()
	set udg_nan=DialogCreate()
	// 初始化挑战模式弹窗
	set udg_tiaoZhan=DialogCreate()
	set i7=CreateGroup()
	set udg_shanghaidanweizu=CreateGroup()
	set udg_boshu=1
	set w7=CreateGroup()
	set i=0
	loop
		exitwhen ( i > 5 )
		set A7[i]=CreateTimer()
		set i=i + 1
	endloop
	set ShiFouShuaGuai=true
	set i=0
	loop
		exitwhen ( i > 100 )
		set I7[i]='AEfk'
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > DENOMINATION_NUMBER )
		set udg_menpainame[i]="未加入"
		set denomFirst[i]='AEfk'
		set denomSecond[i]='AEfk'
		set denomThird[i]='AEfk'
		set denomFifth[i]='AEfk'
		set denomFourth[i]='AEfk'
		set nd[i]=0
		set od[i]=0
		set i=i + 1
	endloop
	set pd[1]=2000
	set pd[2]=2000
	set pd[3]=2000
	set pd[4]=5000
	set pd[5]=5000
	set pd[6]=5000
	set pd[7]=15000
	set pd[8]=15000
	set pd[9]=15000
	set pd[10]=500000
	
	set i=0
	loop
		exitwhen ( i > $A )
		set m8[i]=false
		set q8[i]='crys'
		set yongdanshu[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > $D )
		set udg_blgg[i]=0
		set udg_blwx[i]=0
		set udg_bljm[i]=0
		set udg_blfy[i]=0
		set udg_bldp[i]=0
		set udg_blys[i]=0
		set i=i + 1
	endloop
	set xianglongGroup=CreateGroup()
	set k9=CreateGroup()
	set r9=CreateGroup()
	set s9=CreateGroup()
	set i=0
	loop
		exitwhen ( i > 20 )
		set udg_jueneishxs[i]=0
		set udg_jueneishjc[i]=0
		set udg_jueneiminjie[i]=0
		set udg_jueneijxlw[i]=0
		set udg_jueneibaojilv[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 7 )
		set Hd[i]=CreateTimer()
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 15 )
		set xe[i]=0
		set ye[i]=0
		set ze[i]=0
		set i=i + 1
	endloop
	set Fe=CreateGroup()
	//刚进入地图
	set lh=CreateTrigger()
	call TriggerRegisterTimerEventSingle(lh, .1)
	call TriggerAddAction(lh, function Zw)
	
	call InitGlobalVariables() //初始化全局变量

	call KeyInputSystem() //键盘输入系统
call BlizzardEventSystem() //暴雪新API系统
call SmeltingWeaponSystem() //决战江湖1.4之大辽金匠
	call CreateDestructables() //创建可破坏物
call Cuns() //存储装备属性
call CunWuGongS() //存储武功
call najitest() //纳吉的测试代码

	set t=null
	set v=null
endfunction
function main2 takes nothing returns nothing
	call mallInit() // 商城逻辑初始化
call GameLogic_Trigger() // 游戏逻辑触发器
call GameDetail_Trigger() // 游戏细节处理
// call VIP_Trigger() // VIP系统

	call InitTrig_ZhangMenSkill()
	
	call Equipment_Trigger() //装备属性触发器
call MenPai_Trigger() //门派触发器
call ZiZhi_Trigger() //自制武器触发器
call ZhenFa_Trigger() //阵法触发器
call TiaoZhan_Trigger() //挑战场触发器
call QiWu_Trigger() //奇武触发器
call TaoHuaDao_Trigger() //桃花岛触发器
call Instances_Trigger() //副本和任务系统
call Experiences_Trigger() //历练系统
call ElixirSystem_Trigger() //丹药系统
call Tasks_Trigger() //任务系统
call checkActivityAddition() // 判断是否在活动期间
call initEgg() // 彩蛋系统
call initS1Passport() // 通行证系统 // INLINED!!

	
	call cleanItems() // 清除物品命令
call enhanceDefense() // 难度七提升防御
call npcHint() // NPC提示
call showHealthPoint() //展示单位血量
call talent() //天赋系统
call EverySecond() // 记录游戏时间
call initPetSkill() // 宠物技能
call initUI() // 初始化UI

	call UnitAttack() // 注册单位攻击事件
call UseAbility() // 注册使用技能事件
call UnitDamage() // 注册任意单位伤害事件
call UnitDeath() // 注册任意单位死亡事件
call ItemEvent() // 注册物品相关事件

endfunction
//#include "./denomination/XueDao.j"
//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************
//===========================================================================
// Trigger: ShiJiaZhiXiang
//===========================================================================
//TESH.scrollpos=117
//TESH.alwaysfold=0
function Trig_youLingChuanConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A17C' ) )
endfunction
function Trig_youLingChuanFunc014Func001Func021003003 takes nothing returns boolean
    return ( ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) and ( ( IsUnitAliveBJ(GetFilterUnit()) == true ) and ( ( IsUnitInGroup(GetFilterUnit(), LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF3DA78D7)) == false ) and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xB95F828C))) == false ) ) ) ) )
endfunction
function Trig_youLingChuanFunc014Func001Func022Func005Conditions takes nothing returns nothing
    if ( ( UnitHasBuffBJ(GetTriggerUnit(), 'B023') == true ) ) then
        call SetUnitLifeBJ(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xF017C0F3), ( GetUnitState(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xF017C0F3), UNIT_STATE_LIFE) + ( GetEventDamage() * 0.50 ) ))
        call SaveReal(YDHT, GetHandleId(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xF017C0F3)), 0xB6A20AC2, ( LoadReal(YDHT, GetHandleId(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xF017C0F3)), 0xB6A20AC2) + ( GetEventDamage() * 0.50 ) ))
    else
        call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()))
        call DestroyTrigger(GetTriggeringTrigger())
    endif
endfunction
function Trig_youLingChuanFunc014Func001Func022Func006T takes nothing returns nothing
    call UnitRemoveAbility(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), 'A17F')
    call UnitRemoveAbility(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), 'A17E')
    call UnitRemoveAbility(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), 'B023')
    if ( ( ( GetUnitState(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), UNIT_STATE_LIFE) + 2.00 ) <= LoadReal(YDHT, GetHandleId(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3)), 0xB6A20AC2) ) ) then
        call SetUnitLifeBJ(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), 2.00)
    else
        call SetUnitLifeBJ(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), ( GetUnitState(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), UNIT_STATE_LIFE) - LoadReal(YDHT, GetHandleId(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3)), 0xB6A20AC2) ))
    endif
    call SaveReal(YDHT, GetHandleId(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3)), 0xB6A20AC2, 0.00)
    call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
    call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_youLingChuanFunc014Func001Func022A takes nothing returns nothing
    local trigger ydl_trigger
    local timer ydl_timer
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF3DA78D7), GetEnumUnit())
    call UnitAddAbility(GetEnumUnit(), 'A17E')
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3, GetEnumUnit())
    call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()), 'A17E', false)
    set ydl_trigger=CreateTrigger()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_trigger), 0xF017C0F3, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3))
    call TriggerRegisterUnitEvent(ydl_trigger, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3), EVENT_UNIT_DAMAGED)
    call TriggerRegisterTimerEventSingle(ydl_trigger, 10.00)
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_youLingChuanFunc014Func001Func022Func005Conditions))
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xF017C0F3, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF017C0F3))
    call TimerStart(ydl_timer, 10.00, false, function Trig_youLingChuanFunc014Func001Func022Func006T)
    set ydl_trigger=null
    set ydl_timer=null
endfunction
function Trig_youLingChuanFunc014T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local trigger ydl_trigger
    local timer ydl_timer
    if ( ( IsUnitAliveBJ(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x90BB9840)) == true ) ) then
        call SetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x90BB9840), (RMinBJ(RMaxBJ(((( GetLocationX(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x247CC5E5)) + ( ( 20.00 * LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xD9A5AB73) ) * CosBJ(AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x247CC5E5), LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF4C4BD37))) ) ))*1.0), yd_MapMinX), yd_MapMaxX))) // INLINED!!
        call SetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x90BB9840), (RMinBJ(RMaxBJ(((( GetLocationY(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x247CC5E5)) + ( ( 20.00 * LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xD9A5AB73) ) * SinBJ(AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x247CC5E5), LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF4C4BD37))) ) ))*1.0), yd_MapMinY), yd_MapMaxY))) // INLINED!!
        call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xD9A5AB73, ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xD9A5AB73) + 1 ))
        call SaveLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x77986342, GetUnitLoc(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x90BB9840)))
        call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x93FE3865, YDWEGetUnitsInRangeOfLocMatchingNull(525.00 , LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x77986342) , Condition(function Trig_youLingChuanFunc014Func001Func021003003)))
        call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x93FE3865), function Trig_youLingChuanFunc014Func001Func022A)
    else
        call CreateNUnitsAtLoc(1, 'e10E', LoadPlayerHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xAC95C7C6), LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF4C4BD37), AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x8D3C1FA0), LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xCCB71FEE)))
        call SaveUnitHandle(YDHT, GetHandleId(GetLastCreatedUnit()), 0xD431C5F7, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xB95F828C))
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x3893EA54, GetLastCreatedUnit())
        call UnitAddAbility(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x3893EA54), 'A17D')
        call SetUnitAbilityLevelSwapped('A17D', LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x3893EA54), GetUnitAbilityLevel(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xB95F828C), 'A17C'))
        call IssueImmediateOrder(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x3893EA54), "stomp")
        call YDWETimerRemoveUnit(2 , LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x3893EA54))
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x8D3C1FA0))
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xCCB71FEE))
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x247CC5E5))
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF4C4BD37))
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x77986342))
        call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x93FE3865))
        call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xF3DA78D7))
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    endif
    set ydl_group=null
    set ydl_unit=null
    set ydl_trigger=null
    set ydl_timer=null
endfunction
function Trig_youLingChuanActions takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
 set ydl_localvar_step=ydl_localvar_step + 3
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB95F828C, GetTriggerUnit())
    call SaveLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0, GetUnitLoc(GetTriggerUnit()))
    call SaveLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE, GetSpellTargetLoc())
    call SaveLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247CC5E5, PolarProjectionBJ(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), 1000.00, AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0))))
    call SaveLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF4C4BD37, PolarProjectionBJ(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), 1000.00, AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE))))
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9A5AB73, 1.00)
    call SaveGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF3DA78D7, CreateGroup())
    call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\whirlpool.mdx", LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF4C4BD37)))
    if ( ( GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId()) == 1 ) ) then
        call CreateNUnitsAtLoc(1, 'etrs', GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB95F828C)), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247CC5E5), AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE)))
    else
        if ( ( GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId()) == 2 ) ) then
            call CreateNUnitsAtLoc(1, 'udes', GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB95F828C)), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247CC5E5), AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE)))
        else
            if ( ( GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId()) == 3 ) ) then
                call CreateNUnitsAtLoc(1, 'uubs', GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB95F828C)), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247CC5E5), AngleBetweenPoints(LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0), LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE)))
            else
            endif
        endif
    endif
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x90BB9840, GetLastCreatedUnit())
    call AddSpecialEffectTargetUnitBJ("origin", GetLastCreatedUnit(), "Abilities\\Spells\\Items\\ClarityPotion\\ClarityTarget.mdl")
    call YDWETimerDestroyEffect(3.00 , bj_lastCreatedEffect)
    call UnitApplyTimedLife(GetLastCreatedUnit(), 'BHwe', 3.00)
    set ydl_timer=CreateTimer()
    call SavePlayerHandle(YDLOC, GetHandleId(ydl_timer), 0xAC95C7C6, GetTriggerPlayer())
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xB95F828C, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB95F828C))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xD9A5AB73, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9A5AB73))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x93FE3865, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x93FE3865))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0xF3DA78D7, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF3DA78D7))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x90BB9840, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x90BB9840))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x3893EA54, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x3893EA54))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x8D3C1FA0, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8D3C1FA0))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0xCCB71FEE, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCCB71FEE))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x247CC5E5, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247CC5E5))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0xF4C4BD37, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF4C4BD37))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x77986342, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x77986342))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xF017C0F3, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xF017C0F3))
    call TimerStart(ydl_timer, 0.03, true, function Trig_youLingChuanFunc014T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_youLingChuan takes nothing returns nothing
    set udg_youLingChuan=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(udg_youLingChuan, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(udg_youLingChuan, Condition(function Trig_youLingChuanConditions))
    call TriggerAddAction(udg_youLingChuan, function Trig_youLingChuanActions)
endfunction
//===========================================================================
// Trigger: YuJiaMiCheng
//===========================================================================
function Trig_YuJiaMiChengConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'q01k' ) )
endfunction
function Trig_YuJiaMiChengFunc008Func008Func006Func007003003 takes nothing returns boolean
    return ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D))) == true ) )
endfunction
function Trig_YuJiaMiChengFunc008Func008Func006Func008A takes nothing returns nothing
    if ( ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false ) and ( IsUnitInGroup(GetEnumUnit(), LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xE62D96DE)) == false ) ) ) then
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845, GetEnumUnit())
        call GroupAddUnitSimple(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845), LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xE62D96DE))
        call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC0ABED4A, ShangHaiGongShi(GetTriggerUnit() , GetEnumUnit() , 5 , 5 , 1 , 'q01k'))
        call UnitDamageTargetBJ(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D), LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC0ABED4A), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
        call SaveEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x7BC7C5A7, AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845), "chest"))
        call SaveEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x8EF89593, AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845), "chest"))
        call DestroyEffect(LoadEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x7BC7C5A7))
        call DestroyEffect(LoadEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x8EF89593))
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845, null)
    else
        call DoNothing()
    endif
endfunction
function Trig_YuJiaMiChengFunc008Func008Func006T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x49645424, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x49645424) ) + ( 0.03 ) ))
    call SaveLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x32A9E4C8, GetUnitLoc(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D)))
    call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x214C62CC, YDWEGetUnitsInRangeOfLocMatchingNull(150.00 , LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x32A9E4C8) , Condition(function Trig_YuJiaMiChengFunc008Func008Func006Func007003003)))
    call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x214C62CC), function Trig_YuJiaMiChengFunc008Func008Func006Func008A)
    call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x214C62CC))
    call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x32A9E4C8))
    if ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x49645424) >= 0.50 ) ) then
        call RemoveUnit(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D))
        call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xE62D96DE))
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D, null)
        call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460))
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
        call DoNothing()
    endif
    set ydl_group=null
    set ydl_unit=null
endfunction
function Trig_YuJiaMiChengFunc008T takes nothing returns nothing
    local timer ydl_timer
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x312C4181, ( ( 0.25 ) + ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x312C4181) ) ))
    call SaveLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x329FF8E6, GetUnitLoc(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D)))
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC, GetUnitFacing(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D)))
    call SaveEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2, AddSpecialEffectTarget("war3mapImported\\IceNova.mdx", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D), "origin"))
    call DestroyEffect(LoadEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2))
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=6
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC62900B7, ( ( ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC) ) - ( 40.00 ) ) ) + ( ( ( 16.00 ) * ( ( ( I2R(bj_forLoopAIndex) ) - ( 1.00 ) ) ) ) ) ))
        call SaveLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460, PolarProjectionBJ(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x329FF8E6), 1000.00, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC62900B7)))
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D)), 'q01s', LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x329FF8E6), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC62900B7)))
        call PauseUnitBJ(true, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D))
        call YDWETimerPatternRushSlide(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) , LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC62900B7) , 850.00 , 0.50 , 0.03 , 0 , false , false , false , "origin" , "" , "")
        set ydl_timer=CreateTimer()
        call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x49645424, 0.00)
        call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xC303079D, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D))
        call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D))
        call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0xE62D96DE, CreateGroup())
        call SaveEffectHandle(YDLOC, GetHandleId(ydl_timer), 0x7BC7C5A7, LoadEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x7BC7C5A7))
        call SaveEffectHandle(YDLOC, GetHandleId(ydl_timer), 0x8EF89593, LoadEffectHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x8EF89593))
        call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xC0ABED4A, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xC0ABED4A))
        call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x214C62CC, LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x214C62CC))
        call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2B0A6845, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845))
        call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x32A9E4C8, LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x32A9E4C8))
        call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0xD13A3460, LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460))
        call TimerStart(ydl_timer, 0.03, true, function Trig_YuJiaMiChengFunc008Func008Func006T)
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    call RemoveLocation(LoadLocationHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x329FF8E6))
    if ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x312C4181) > 3.00 ) ) then
        call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xC303079D, null)
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
        call DoNothing()
    endif
    set ydl_timer=null
endfunction
function Trig_YuJiaMiChengActions takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
 set ydl_localvar_step=ydl_localvar_step + 3
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    // 伤害设置
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xB6A6EBAA, GetTriggerUnit())
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D, GetTriggerUnit())
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC0ABED4A, 1.00)
    // 伤害设置
    set ydl_timer=CreateTimer()
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x312C4181, 0.00)
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xC303079D, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D))
    call SaveEffectHandle(YDLOC, GetHandleId(ydl_timer), 0xA3098AE2, LoadEffectHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2))
    call SaveEffectHandle(YDLOC, GetHandleId(ydl_timer), 0x7BC7C5A7, LoadEffectHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x7BC7C5A7))
    call SaveEffectHandle(YDLOC, GetHandleId(ydl_timer), 0x8EF89593, LoadEffectHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8EF89593))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xC0ABED4A, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC0ABED4A))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x214C62CC, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x214C62CC))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x9FDB62AC, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9FDB62AC))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xC62900B7, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC62900B7))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2B0A6845, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x32A9E4C8, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x32A9E4C8))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0xD13A3460, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD13A3460))
    call SaveLocationHandle(YDLOC, GetHandleId(ydl_timer), 0x329FF8E6, LoadLocationHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x329FF8E6))
    call TimerStart(ydl_timer, 0.25, true, function Trig_YuJiaMiChengFunc008T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_YuJiaMiCheng takes nothing returns nothing
    set gg_trg_YuJiaMiCheng=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_YuJiaMiCheng, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_YuJiaMiCheng, Condition(function Trig_YuJiaMiChengConditions))
    call TriggerAddAction(gg_trg_YuJiaMiCheng, function Trig_YuJiaMiChengActions)
endfunction
//===========================================================================
// Trigger: japi变身
//===========================================================================
function Trig_japi______uActions takes nothing returns nothing
    call YDWEUnitTransform(GetSellingUnit() , 'AEme' , 'hpea')
endfunction
//===========================================================================
function InitTrig_japi______u takes nothing returns nothing
    set gg_trg_japi______u=CreateTrigger()
    call TriggerAddAction(gg_trg_japi______u, function Trig_japi______uActions)
endfunction
//===========================================================================
// Trigger: firstOccur
//===========================================================================
function Trig_firstOccurActions takes nothing returns nothing
    call YDWETimerPatternMoonPriestessArrow(GetTriggerUnit() , 0 , 800 , 1 , 0.03 , 1 , 'A02G' , 'hpea' , "attack" , "overhead" , "[jx3]normal_10a.mdx")
    call YDWESetUnitAbilityDataString(GetTriggerUnit() , 'A04B' , 1 , 215 , "")
    call YDWECreateEwsp(GetTriggerUnit() , 'hfoo' , 1 , 300 , 20 , 0.01 , 1)
    call ShowUnit(gg_unit_N007_0055, true)
    call ShowUnit(gg_unit_N012_0095, true)
    call ShowUnit(gg_unit_N00F_0085, true)
    call ShowUnit(gg_unit_N008_0054, true)
    call ShowUnit(gg_unit_N00P_0084, true)
    call ShowUnit(gg_unit_N00U_0092, true)
    call ShowUnit(gg_unit_o02D_0069, true)
    call ShowUnit(gg_unit_o00K_0126, true)
    call ShowUnit(gg_unit_N00B_0086, true)
    call ShowUnit(gg_unit_n00E_0066, true)
endfunction
//===========================================================================
function InitTrig_firstOccur takes nothing returns nothing
    set gg_trg_firstOccur=CreateTrigger()
    call TriggerAddAction(gg_trg_firstOccur, function Trig_firstOccurActions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 007
//===========================================================================
function Trig____________________007Actions takes nothing returns nothing
    call YDWETimerPatternRushSlide(GetTriggerUnit() , 0 , 800 , 1 , 0.03 , 0 , false , false , false , "origin" , "Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster.mdl" , "hellscream.mdx")
endfunction
//===========================================================================
function InitTrig____________________007 takes nothing returns nothing
    set gg_trg____________________007=CreateTrigger()
    call TriggerAddAction(gg_trg____________________007, function Trig____________________007Actions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 001
//===========================================================================
function Trig____________________001Actions takes nothing returns nothing
    call InitTrig_youLingChuan()
    call SetPlayerStateBJ(Player(0), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call SetPlayerStateBJ(Player(1), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call SetPlayerStateBJ(Player(2), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call SetPlayerStateBJ(Player(3), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call SetPlayerStateBJ(Player(4), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call SetPlayerStateBJ(Player(5), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
    call ShowUnit(gg_unit_nvl2_0005, false)
    call ShowUnit(gg_unit_n00M_0131, false)
    call ShowUnit(gg_unit_n00N_0132, false)
    call ShowUnit(gg_unit_N00I_0116, true)
    call ShowUnit(gg_unit_N007_0055, true)
    call main1()
    //Function not found: call InitTrig_AM_1_Orig()
endfunction
//===========================================================================
function InitTrig____________________001 takes nothing returns nothing
    set gg_trg____________________001=CreateTrigger()
    call TriggerAddAction(gg_trg____________________001, function Trig____________________001Actions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 004
//===========================================================================
function Trig____________________004Actions takes nothing returns nothing
    call main2()
    call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 0 , 0 , 300)
    call YDWESetLocalVariableReal("R" , (YDWELogarithm__Log2(((0.01)*1.0)) * 0.3010300)) // INLINED!!
endfunction
//===========================================================================
function InitTrig____________________004 takes nothing returns nothing
    set gg_trg____________________004=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg____________________004, 0.05)
    call TriggerAddAction(gg_trg____________________004, function Trig____________________004Actions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 005
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig____________________005Conditions takes nothing returns boolean
    return ( ( YDWEUnitHasItemOfTypeBJNull(GetTriggerUnit() , 'texp') == true ) )
endfunction
function Trig____________________005Actions takes nothing returns nothing
    call YDWENewItemsFormula('I099' , 1 , 'I09A' , 1 , 'I09P' , 1 , 'ches' , 0 , 'ches' , 0 , 'ches' , 0 , 'I09C')
    call SelectHeroSkill(gg_unit_N007_0055, 'AHbz')
endfunction
//===========================================================================
function InitTrig____________________005 takes nothing returns nothing
    //set gg_trg____________________005 = CreateTrigger()
    //call YDWESyStemItemCombineRegistTrigger( gg_trg____________________005 )
    //call TriggerAddCondition(gg_trg____________________005, Condition(function Trig____________________005Conditions))
    //call TriggerAddAction(gg_trg____________________005, function Trig____________________005Actions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 002
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig____________________002Actions takes nothing returns nothing
    call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 0 , 0 , 300)
    call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 1 , 0 , 300)
    call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 3 , 0 , 300)
    call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 0 , 300)
    call YDWEJumpTimer(GetTriggerUnit() , 0 , 0.00 , 2 , 0.01 , GetRandomReal(100, 500))
    call YDWEJumpTimer(GetTriggerUnit() , 0 , 0.00 , 2 , 0.01 , GetRandomReal(100, 500))
    call YDWETimerDestroyEffect(15. , AddSpecialEffectLoc("war3mapImported\\kineticfield_fx_stand.mdx", Location(0, 0)))
    call YDWETimerDestroyLightning(2 , GetLastCreatedLightningBJ())
endfunction
//===========================================================================
function InitTrig____________________002 takes nothing returns nothing
    set gg_trg____________________002=CreateTrigger()
    call TriggerAddAction(gg_trg____________________002, function Trig____________________002Actions)
endfunction
//===========================================================================
// Trigger: 未命名触发器 003
//===========================================================================
function Trig____________________003Actions takes nothing returns nothing
endfunction
//===========================================================================
function InitTrig____________________003 takes nothing returns nothing
    set gg_trg____________________003=CreateTrigger()
    call DisableTrigger(gg_trg____________________003)
    call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg____________________003)
    call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg____________________003 , GetCurrentCameraBoundsMapRectBJ())
    call TriggerAddAction(gg_trg____________________003, function Trig____________________003Actions)
endfunction
//===========================================================================
// Trigger: 读取存档积分
//===========================================================================
function Trig___________________uActions takes nothing returns nothing
    set bj_forLoopBIndex=1
    set bj_forLoopBIndexEnd=6
    loop
        exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
        call YDWE_PreloadSL_Load(ConvertedPlayer(bj_forLoopBIndex) , "JueZhan" , "JiangHu" , 1)
        set udg_MeiJuJiFen[bj_forLoopBIndex]=( udg_MeiJuJiFen[bj_forLoopBIndex] + YDWE_PreloadSL_Get(ConvertedPlayer(bj_forLoopBIndex) , "总积分" , 1) )
        set bj_forLoopBIndex=bj_forLoopBIndex + 1
    endloop
endfunction
//===========================================================================
function InitTrig___________________u takes nothing returns nothing
    set gg_trg___________________u=CreateTrigger()
    call DisableTrigger(gg_trg___________________u)
    call TriggerRegisterTimerEventSingle(gg_trg___________________u, 1.00)
    call TriggerAddAction(gg_trg___________________u, function Trig___________________uActions)
endfunction
//===========================================================================
// Trigger: 存档积分
//===========================================================================
function Trig_____________uActions takes nothing returns nothing
    set udg_MeiJuJiFen[1]=( udg_MeiJuJiFen[1] + 500 )
    call YDWE_PreloadSL_Set(Player(0) , "总积分" , 1 , udg_MeiJuJiFen[1])
    call YDWE_PreloadSL_Save(Player(0) , "JueZhan" , "JiangHu" , 1)
endfunction
//===========================================================================
function InitTrig_____________u takes nothing returns nothing
    set gg_trg_____________u=CreateTrigger()
    call DisableTrigger(gg_trg_____________u)
    call TriggerRegisterPlayerChatEvent(gg_trg_____________u, Player(0), "-Test", true)
    call TriggerAddAction(gg_trg_____________u, function Trig_____________uActions)
endfunction
//===========================================================================
// Trigger: ChangeClothes
//===========================================================================
//TESH.scrollpos=26
//TESH.alwaysfold=0
function Trig_ChangeClothesConditions takes nothing returns boolean
    return ( udg_vip[1 + GetPlayerId(GetTriggerPlayer())] >= 1 ) and ( ( ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O02H' ) or ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O023' ) or ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O02I' ) ) )
endfunction
function Trig_ChangeClothesActions takes nothing returns nothing
    //if udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]==false then
        //set udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]=true
        //黑变绿或粉
        if ( ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O02H' ) ) then
            if GetRandomInt(1, 2) == 1 then
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A044')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A044')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            else
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A047')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A047')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            endif
            //call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
        //绿变粉或黑
        elseif ( ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O02I' ) ) then
            if GetRandomInt(1, 2) == 1 then
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A045')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A045')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            else
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A048')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A048')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            endif
            //call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
        //粉变黑或绿
        elseif ( ( GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 'O023' ) ) then
            if GetRandomInt(1, 2) == 1 then
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A043')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A043')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            else
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A046')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'A046')
                call UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 'Avul')
            endif
            //call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
        endif
        set bj_forLoopAIndex=1
        set bj_forLoopAIndexEnd=11
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            if ( I7[( GetPlayerId(GetTriggerPlayer()) ) * 20 + bj_forLoopAIndex] != 'AEfk' ) then
                call UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], I7[( GetPlayerId(GetTriggerPlayer()) ) * 20 + bj_forLoopAIndex])
                call SetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], I7[( GetPlayerId(GetTriggerPlayer()) ) * 20 + bj_forLoopAIndex], LoadInteger(YDHT, GetHandleId(GetTriggerPlayer()), I7[( GetPlayerId(GetTriggerPlayer()) ) * 20 + bj_forLoopAIndex] * 5))
            endif
            set bj_forLoopAIndex=bj_forLoopAIndex + 1
        endloop
        //call YDWEPolledWaitNull(300.)
        //set udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]=false
    //else
        //call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "换装功能CD中")
    //endif
endfunction
//===========================================================================
function InitTrig_ChangeClothes takes nothing returns nothing
    set gg_trg_ChangeClothes=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(0), "换装", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(1), "换装", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(2), "换装", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(3), "换装", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(4), "换装", true)
    call TriggerAddCondition(gg_trg_ChangeClothes, Condition(function Trig_ChangeClothesConditions))
    call TriggerAddAction(gg_trg_ChangeClothes, function Trig_ChangeClothesActions)
endfunction
//===========================================================================
// Trigger: QinLongKongHe
//===========================================================================
function Trig_QinLongKongHeConditions takes nothing returns boolean
    return ( ( ( GetSpellAbilityId() == 'A03V' ) and ( GetSpellTargetUnit() != gg_unit_N008_0054 ) ) )
endfunction
function Trig_QinLongKongHeActions takes nothing returns nothing
    if ( ( GetSpellTargetUnit() == GetTriggerUnit() ) ) then
        call YDWETimerPatternRushSlide(GetSpellTargetUnit() , GetUnitFacing(GetTriggerUnit()) , 1200.00 , 1.20 , 0.01 , 0 , false , false , true , "origin" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
    else
        if ( ( YDWEDistanceBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit()) >= 1000.00 ) ) then
            call YDWETimerPatternRushSlide(GetSpellTargetUnit() , YDWEAngleBetweenUnits(GetSpellTargetUnit() , GetTriggerUnit()) , RMinBJ(1200.00, YDWEDistanceBetweenUnits(GetTriggerUnit() , GetLastCreatedUnit())) , RMinBJ(1.20, ( YDWEDistanceBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit()) / 1000.00 )) , 0.01 , 0 , false , false , true , "origin" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
        else
            call YDWETimerPatternRushSlide(GetSpellTargetUnit() , YDWEAngleBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit()) , 1200.00 , 1.20 , 0.01 , 0 , false , false , true , "origin" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl" , "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
        endif
    endif
    if ( ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A06L') != 0 ) and ( IsUnitAlly(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) ) ) then
        call SetUnitLifePercentBJ(GetSpellTargetUnit(), 100)
    else
    endif
    if ( ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A0CE') != 0 ) and ( IsUnitAlly(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) == false ) ) ) then
        call WanBuff(GetTriggerUnit() , GetSpellTargetUnit() , 11)
    else
    endif
endfunction
//===========================================================================
function InitTrig_QinLongKongHe takes nothing returns nothing
    set gg_trg_QinLongKongHe=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_QinLongKongHe, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_QinLongKongHe, Condition(function Trig_QinLongKongHeConditions))
    call TriggerAddAction(gg_trg_QinLongKongHe, function Trig_QinLongKongHeActions)
endfunction
//===========================================================================
// Trigger: YaoWangShenPian
//===========================================================================
//TESH.scrollpos=2
//TESH.alwaysfold=0
function Trig_YaoWangShenPianConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A03W' ) )
endfunction
function Trig_YaoWangShenPianFunc003001003 takes nothing returns boolean
    return ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) )
endfunction
function Trig_YaoWangShenPianFunc003Func006T takes nothing returns nothing
    local unit u= LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
    if ( ( ( GetUnitLifePercent(u) > 1.00 ) and ( UnitHasBuffBJ(u, 'BUsl') == true ) ) ) then
        call SetUnitLifePercentBJ(u, ( GetUnitLifePercent(u) - 0.5 ))
    else
        call DestroyTimer(GetExpiredTimer())
    endif
endfunction
function Trig_YaoWangShenPianFunc003A takes nothing returns nothing
    local timer ydl_timer
    call CreateNUnitsAtLoc(1, 'e000', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetEnumUnit()), bj_UNIT_FACING)
    call UnitAddAbility(GetLastCreatedUnit(), 'A03X')
    call ShowUnitHide(GetLastCreatedUnit())
    call UnitApplyTimedLife(GetLastCreatedUnit(), 'BHwe', 3.00)
    call IssueTargetOrderById(GetLastCreatedUnit(), 852227, GetEnumUnit())
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0, GetEnumUnit())
    call TimerStart(ydl_timer, 1.00, true, function Trig_YaoWangShenPianFunc003Func006T)
    set ydl_timer=null
endfunction
function Trig_YaoWangShenPianActions takes nothing returns nothing
    local real range= 900
    if ( ( GetUnitAbilityLevel(GetTriggerUnit(), 'A07A') != 0 ) ) then
        set range=1300
    endif
    call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range , GetUnitLoc(GetTriggerUnit()) , Condition(function Trig_YaoWangShenPianFunc003001003)), function Trig_YaoWangShenPianFunc003A)
    
endfunction
//===========================================================================
function InitTrig_YaoWangShenPian takes nothing returns nothing
    set gg_trg_YaoWangShenPian=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_YaoWangShenPian, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_YaoWangShenPian, Condition(function Trig_YaoWangShenPianConditions))
    call TriggerAddAction(gg_trg_YaoWangShenPian, function Trig_YaoWangShenPianActions)
endfunction
//===========================================================================
// Trigger: KuRongShenGong
//===========================================================================
function Trig_KuRongShenGongConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'A03Z' ) )
endfunction
function Trig_KuRongShenGongActions takes nothing returns nothing
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
 set ydl_localvar_step=ydl_localvar_step + 3
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SetUnitLifePercentBJ(GetTriggerUnit(), ( GetUnitLifePercent(GetTriggerUnit()) / 2.00 ))
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820, 150 + 150 * xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
    if ( ( GetUnitAbilityLevel(GetKillingUnitBJ(), 'A07P') != 0 ) ) then
        call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820, 500 + 500 * xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
    else
    endif
    call ModifyHeroStat(bj_HEROSTAT_STR, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call ModifyHeroStat(bj_HEROSTAT_AGI, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call ModifyHeroStat(bj_HEROSTAT_INT, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call YDWEPolledWaitNull(15.00)
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call ModifyHeroStat(bj_HEROSTAT_STR, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call ModifyHeroStat(bj_HEROSTAT_AGI, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call ModifyHeroStat(bj_HEROSTAT_INT, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820))
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
endfunction
//===========================================================================
function InitTrig_KuRongShenGong takes nothing returns nothing
    set gg_trg_KuRongShenGong=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_KuRongShenGong, Condition(function Trig_KuRongShenGongConditions))
    call TriggerAddAction(gg_trg_KuRongShenGong, function Trig_KuRongShenGongActions)
endfunction
//===========================================================================
// Trigger: KuRongShenGong_2
//===========================================================================
function Trig_KuRongShenGong_2Conditions takes nothing returns boolean
    return ( ( GetUnitAbilityLevel(GetKillingUnitBJ(), 'A03Z') != 0 ) )
endfunction
function Trig_KuRongShenGong_2Actions takes nothing returns nothing
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
 set ydl_localvar_step=ydl_localvar_step + 3
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820, GetConvertedPlayerId(GetTriggerPlayer()))
    set udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820)]=( udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820)] + 1 )
    if ( ( udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820)] >= 300 ) ) then
        set udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x25DAB820)]=0
        if ( ( GetUnitState(GetKillingUnitBJ(), UNIT_STATE_LIFE) > 2000.00 ) ) then
            call YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit() , 2 , 1 , 10)
            call ModifyHeroStat(bj_HEROSTAT_STR, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 20)
            call ModifyHeroStat(bj_HEROSTAT_AGI, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 30)
            call ModifyHeroStat(bj_HEROSTAT_INT, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 10)
            if ( ( GetUnitAbilityLevel(GetKillingUnitBJ(), 'A07W') != 0 ) ) then
                call ModifyHeroStat(bj_HEROSTAT_AGI, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 30)
            else
            endif
        else
        endif
    else
    endif
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
endfunction
//===========================================================================
function InitTrig_KuRongShenGong_2 takes nothing returns nothing
    set gg_trg_KuRongShenGong_2=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong_2, EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_KuRongShenGong_2, Condition(function Trig_KuRongShenGong_2Conditions))
    call TriggerAddAction(gg_trg_KuRongShenGong_2, function Trig_KuRongShenGong_2Actions)
endfunction
//===========================================================================
// Trigger: KuRongShenGong_3
//===========================================================================
function Trig_KuRongShenGong_3Conditions takes nothing returns boolean
    return ( ( ( GetUnitAbilityLevel(GetAttacker(), 'A03Z') != 0 ) and ( GetUnitAbilityLevel(GetAttacker(), 'A084') != 0 ) and ( GetRandomReal(0.00, 100.00) <= 15.00 ) ) )
endfunction
function Trig_KuRongShenGong_3Actions takes nothing returns nothing
    call percentDamage(GetTriggerUnit() , 10 , false)
endfunction
//===========================================================================
function InitTrig_KuRongShenGong_3 takes nothing returns nothing
    set gg_trg_KuRongShenGong_3=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong_3, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_KuRongShenGong_3, Condition(function Trig_KuRongShenGong_3Conditions))
    call TriggerAddAction(gg_trg_KuRongShenGong_3, function Trig_KuRongShenGong_3Actions)
endfunction
//===========================================================================
// Trigger: ShuiShangPiao
//===========================================================================
function Trig_ShuiShangPiaoActions takes nothing returns nothing
endfunction
//===========================================================================
function InitTrig_ShuiShangPiao takes nothing returns nothing
    set gg_trg_ShuiShangPiao=CreateTrigger()
    call TriggerAddAction(gg_trg_ShuiShangPiao, function Trig_ShuiShangPiaoActions)
endfunction
//===========================================================================
// Trigger: SH
//===========================================================================
function Trig_SHConditions takes nothing returns boolean
    return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stoneform") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("hex") ) ) )
endfunction
function Trig_SHActions takes nothing returns nothing
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stoneform") ) ) then
        call IssueImmediateOrder(GetTriggerUnit(), "stop")
    else
    endif
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("hex") ) ) then
        call IssueImmediateOrder(GetTriggerUnit(), "holdposition")
    else
    endif
endfunction
//===========================================================================
function InitTrig_SH takes nothing returns nothing
    set gg_trg_SH=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_SH, EVENT_PLAYER_UNIT_ISSUED_ORDER)
    call TriggerAddCondition(gg_trg_SH, Condition(function Trig_SHConditions))
    call TriggerAddAction(gg_trg_SH, function Trig_SHActions)
endfunction
//===========================================================================
// Trigger: AM_1
//===========================================================================
function Trig_AM_1Conditions takes nothing returns boolean
    return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") ) ) )
endfunction
function Trig_AM_1Actions takes nothing returns nothing
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") ) ) then
        call IssuePointOrderByIdLoc(GetTriggerUnit(), 851986, GetOrderPointLoc())
    else
    endif
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") ) ) then
        call IssuePointOrderByIdLoc(GetTriggerUnit(), 851983, GetOrderPointLoc())
    else
    endif
endfunction
//===========================================================================
function InitTrig_AM_1 takes nothing returns nothing
    set gg_trg_AM_1=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AM_1, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
    call TriggerAddCondition(gg_trg_AM_1, Condition(function Trig_AM_1Conditions))
    call TriggerAddAction(gg_trg_AM_1, function Trig_AM_1Actions)
endfunction
//===========================================================================
// Trigger: AM_2
//===========================================================================
function Trig_AM_2Conditions takes nothing returns boolean
    return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") ) ) )
endfunction
function Trig_AM_2Actions takes nothing returns nothing
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") ) ) then
        call IssueTargetOrderById(GetTriggerUnit(), 851986, GetOrderTargetUnit())
    else
    endif
    if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") ) ) then
        call IssueTargetOrderById(GetTriggerUnit(), 851983, GetOrderTargetUnit())
    else
    endif
endfunction
//===========================================================================
function InitTrig_AM_2 takes nothing returns nothing
    set gg_trg_AM_2=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AM_2, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
    call TriggerAddCondition(gg_trg_AM_2, Condition(function Trig_AM_2Conditions))
    call TriggerAddAction(gg_trg_AM_2, function Trig_AM_2Actions)
endfunction
//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    //Function not found: call InitTrig_ShiJiaZhiXiang()
    call InitTrig_YuJiaMiCheng()
    call InitTrig_japi______u()
    call InitTrig_firstOccur()
    call InitTrig____________________007()
    call InitTrig____________________001()
    call InitTrig____________________004()
    call InitTrig____________________005()
    call InitTrig____________________002()
    call InitTrig____________________003()
    call InitTrig___________________u()
    call InitTrig_____________u()
    call InitTrig_ChangeClothes()
    call InitTrig_QinLongKongHe()
    call InitTrig_YaoWangShenPian()
    call InitTrig_KuRongShenGong()
    call InitTrig_KuRongShenGong_2()
    call InitTrig_KuRongShenGong_3()
    call InitTrig_ShuiShangPiao()
    call InitTrig_SH()
    call InitTrig_AM_1()
    call InitTrig_AM_2()
endfunction
//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg____________________001)
endfunction
//***************************************************************************
//*
//*  Players
//*
//***************************************************************************
function InitCustomPlayerSlots takes nothing returns nothing
    // Player 0
    call SetPlayerStartLocation(Player(0), 0)
    call ForcePlayerStartLocation(Player(0), 0)
    call SetPlayerColor(Player(0), ConvertPlayerColor(0))
    call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(0), false)
    call SetPlayerController(Player(0), MAP_CONTROL_USER)
    // Player 1
    call SetPlayerStartLocation(Player(1), 1)
    call ForcePlayerStartLocation(Player(1), 1)
    call SetPlayerColor(Player(1), ConvertPlayerColor(1))
    call SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(1), false)
    call SetPlayerController(Player(1), MAP_CONTROL_USER)
    // Player 2
    call SetPlayerStartLocation(Player(2), 2)
    call ForcePlayerStartLocation(Player(2), 2)
    call SetPlayerColor(Player(2), ConvertPlayerColor(2))
    call SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(2), false)
    call SetPlayerController(Player(2), MAP_CONTROL_USER)
    // Player 3
    call SetPlayerStartLocation(Player(3), 3)
    call ForcePlayerStartLocation(Player(3), 3)
    call SetPlayerColor(Player(3), ConvertPlayerColor(3))
    call SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(3), false)
    call SetPlayerController(Player(3), MAP_CONTROL_USER)
    // Player 4
    call SetPlayerStartLocation(Player(4), 4)
    call ForcePlayerStartLocation(Player(4), 4)
    call SetPlayerColor(Player(4), ConvertPlayerColor(4))
    call SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(4), false)
    call SetPlayerController(Player(4), MAP_CONTROL_USER)
    // Player 5
    call SetPlayerStartLocation(Player(5), 5)
    call ForcePlayerStartLocation(Player(5), 5)
    call SetPlayerColor(Player(5), ConvertPlayerColor(5))
    call SetPlayerRacePreference(Player(5), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(5), false)
    call SetPlayerController(Player(5), MAP_CONTROL_COMPUTER)
    // Player 6
    call SetPlayerStartLocation(Player(6), 6)
    call ForcePlayerStartLocation(Player(6), 6)
    call SetPlayerColor(Player(6), ConvertPlayerColor(6))
    call SetPlayerRacePreference(Player(6), RACE_PREF_UNDEAD)
    call SetPlayerRaceSelectable(Player(6), false)
    call SetPlayerController(Player(6), MAP_CONTROL_COMPUTER)
    // Player 7
    call SetPlayerStartLocation(Player(7), 7)
    call ForcePlayerStartLocation(Player(7), 7)
    call SetPlayerColor(Player(7), ConvertPlayerColor(7))
    call SetPlayerRacePreference(Player(7), RACE_PREF_NIGHTELF)
    call SetPlayerRaceSelectable(Player(7), false)
    call SetPlayerController(Player(7), MAP_CONTROL_COMPUTER)
    // Player 8
    call SetPlayerStartLocation(Player(8), 8)
    call ForcePlayerStartLocation(Player(8), 8)
    call SetPlayerColor(Player(8), ConvertPlayerColor(8))
    call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(8), false)
    call SetPlayerController(Player(8), MAP_CONTROL_COMPUTER)
endfunction
function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_010
    call SetPlayerTeam(Player(0), 0)
    call SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(1), 0)
    call SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(2), 0)
    call SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(3), 0)
    call SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(4), 0)
    call SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(5), 0)
    call SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1)
    //   Allied
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true)
    //   Shared Vision
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true)
    // Force: TRIGSTR_011
    call SetPlayerTeam(Player(6), 1)
    call SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(7), 1)
    call SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1)
    call SetPlayerTeam(Player(8), 1)
    call SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1)
    //   Allied
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
    //   Shared Vision
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
endfunction
function InitAllyPriorities takes nothing returns nothing
    call SetStartLocPrioCount(0, 4)
    call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(1, 4)
    call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(2, 4)
    call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(3, 4)
    call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(4, 4)
    call SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH)
endfunction
//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************
//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds(- 15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    call NewSoundEnvironment("Default")
    call SetAmbientDaySound("VillageDay")
    call SetAmbientNightSound("VillageNight")
    call SetMapMusic("Music", true, 0)
    call CreateAllUnits()
    call InitBlizzard()

call ExecuteFunc("jasshelper__initstructs364733109")
call ExecuteFunc("FrameLibrary__init")
call ExecuteFunc("initShowEffect")
call ExecuteFunc("UniMissileSystem3D__Init")
call ExecuteFunc("YDTriggerSaveLoadSystem__Init")
call ExecuteFunc("InitializeYD")
call ExecuteFunc("YDWEBitwise__onInit")
call ExecuteFunc("YDWEGeneralBounsSystem__Initialize")
call ExecuteFunc("YDWELogarithm__onInit")
call ExecuteFunc("YDWESync__onInit")
call ExecuteFunc("YDWEPreloadSL__Init")
call ExecuteFunc("YDWEStringFormula__Init")
call ExecuteFunc("YDWETimerPattern__Init")
call ExecuteFunc("YDWETimerSystem__Init")
call ExecuteFunc("init")

    call InitGlobals()
    call InitCustomTriggers()
    call ConditionalTriggerExecute(gg_trg____________________001) // INLINED!!
endfunction
//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************
function config takes nothing returns nothing
    call SetMapName("决战江湖1.6.70正式版")
    call SetMapDescription("|cFFFF00FF当你打开这个游戏的时候，你的江湖已经开始了.....|r")
    call SetPlayers(9)
    call SetTeams(9)
    call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
    call DefineStartLocation(0, 1728.0, - 4160.0)
    call DefineStartLocation(1, 1728.0, - 4160.0)
    call DefineStartLocation(2, 1728.0, - 4160.0)
    call DefineStartLocation(3, 1728.0, - 4160.0)
    call DefineStartLocation(4, 1728.0, - 4160.0)
    call DefineStartLocation(5, - 3328.0, - 15616.0)
    call DefineStartLocation(6, 1728.0, - 4160.0)
    call DefineStartLocation(7, 1728.0, - 4160.0)
    call DefineStartLocation(8, 1728.0, - 4160.0)
    // Player setup
    call InitCustomPlayerSlots()
    call InitCustomTeams()
    call InitAllyPriorities()
endfunction
//===========================================================================
//修改生命
//===========================================================================
//===========================================================================
//��Ծϵͳ 
//===========================================================================
     
 
                 
//===========================================================================  
//===========================================================================  
//�Զ����¼� 
//===========================================================================
//===========================================================================   
//===========================================================================
//ϵͳ-TimerSystem
//===========================================================================




//Struct method generated initializers/callers:
function sa__Frame_onDestroy takes nothing returns boolean
local integer this=f__arg_this
            if s__Frame_id[this] != 0 then
                call DzDestroyFrame(s__Frame_id[this])
            endif
            set s__Frame_id[this]=0
   return true
endfunction
function sa__ShopWeapon_onDestroy takes nothing returns boolean
local integer this=f__arg_this
		set s__ShopWeapon_min_xiuxing[this]=0
		set s__ShopWeapon_id[this]=0
   return true
endfunction
function sa__ShopWeapon_PickUpWeapon takes nothing returns boolean
    call s__ShopWeapon_PickUpWeapon(f__arg_this,f__arg_unit1,f__arg_item1)
   return true
endfunction
function sa__ZiZhiWuGong_create takes nothing returns boolean
local integer xishu=f__arg_integer1
local integer range=f__arg_integer2
local integer texiao=f__arg_integer3
local integer dapeishu=f__arg_integer4
local integer scrate=f__arg_integer5
  local integer zz
		set zz=s__ZiZhiWuGong__allocate()
		set s__ZiZhiWuGong_xishu[zz]=xishu
		set s__ZiZhiWuGong_range[zz]=range
		set s__ZiZhiWuGong_texiao[zz]=texiao
		set s__ZiZhiWuGong_dapeishu[zz]=dapeishu
		set s__ZiZhiWuGong_scrate[zz]=scrate
set f__result_integer= zz
   return true
endfunction
function sa__ZiZhiWuGong_onDestroy takes nothing returns boolean
local integer this=f__arg_this
		set s__ZiZhiWuGong_xishu[this]=0
		set s__ZiZhiWuGong_range[this]=0
		set s__ZiZhiWuGong_texiao[this]=0
		set s__ZiZhiWuGong_dapeishu[this]=0
		set s__ZiZhiWuGong_scrate[this]=0
   return true
endfunction
function sa__DaPei_onDestroy takes nothing returns boolean
local integer this=f__arg_this
		set s__DaPei_wugongid[this]=0
		set s__DaPei_dapeixiaoguo[this]=0
		set s__DaPei_shxishu[this]=0
   return true
endfunction
function sa__DaPei_XiaoGuoShuoMing takes nothing returns boolean
local integer this=f__arg_this
  local string s= ""
		set s=s + "+" + GetAbilityName(s__DaPei_wugongid[this]) + "："
		if s__DaPei_dapeixiaoguo[this] != 2 then
			set s=s + "伤害+" + I2S(R2I(s__DaPei_r[this] * 100)) + "%"
		else
			if R2I(s__DaPei_r[this]) == 1 then
				set s=s + "几率造成内伤"
			elseif R2I(s__DaPei_r[this]) == 2 then
				set s=s + "几率造成走火入魔"
			elseif R2I(s__DaPei_r[this]) == 3 then
				set s=s + "几率造成流血"
			elseif R2I(s__DaPei_r[this]) == 4 then
				set s=s + "几率造成混乱"
			elseif R2I(s__DaPei_r[this]) == 5 then
				set s=s + "几率造成昏迷"
			elseif R2I(s__DaPei_r[this]) == 6 then
				set s=s + "几率造成重伤"
			elseif R2I(s__DaPei_r[this]) == 7 then
				set s=s + "几率造成血流不止"
			elseif R2I(s__DaPei_r[this]) == 8 then
				set s=s + "几率造成麻痹"
			elseif R2I(s__DaPei_r[this]) == 9 then
				set s=s + "几率造成破防"
			elseif R2I(s__DaPei_r[this]) == 10 then
				set s=s + "几率造成神经错乱"
			elseif R2I(s__DaPei_r[this]) == 11 then
				set s=s + "几率造成封穴"
			elseif R2I(s__DaPei_r[this]) == 12 then
				set s=s + "几率造成穴位全封"
			elseif R2I(s__DaPei_r[this]) == 13 then
				set s=s + "几率造成中毒"
			endif
		endif
set f__result_string= s
   return true
endfunction
function sa__YDWEStringFormula__Inventory_onDestroy takes nothing returns boolean
local integer this=f__arg_this
            call FlushChildHashtable(YDHT, StringHash(("YDWEStringFormula." + I2S(this)))) // INLINED!!
   return true
endfunction
function sa__YDWETimerPattern__Thread_onDestroy takes nothing returns boolean
local integer this=f__arg_this
            call RemoveSavedInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_obj[this])))))))) // INLINED!!
            call RemoveSavedInteger(YDHT, StringHash(("YDWETimerPattern." )), StringHash(( I2S((GetHandleId(((s__YDWETimerPattern__Thread_t[this])))))))) // INLINED!!
            call GroupClear(s__YDWETimerPattern__Thread_g[this])
            call DestroyGroup(s__YDWETimerPattern__Thread_g[this])
            call PauseTimer(s__YDWETimerPattern__Thread_t[this])
            call DestroyTimer(s__YDWETimerPattern__Thread_t[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_des[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_pos[this])
            call s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_vel[this])
            set s__YDWETimerPattern__Thread_caster[this]=null
            set s__YDWETimerPattern__Thread_target[this]=null
            set s__YDWETimerPattern__Thread_obj[this]=null
            set s__YDWETimerPattern__Thread_g[this]=null
            set s__YDWETimerPattern__Thread_t[this]=null
            set s__YDWETimerPattern__Thread_amount[this]=0
            set s__YDWETimerPattern__Thread_skills[this]=0
            set s__YDWETimerPattern__Thread_order[this]=0
            set s__YDWETimerPattern__Thread_dsfx[this]=""
            set s__YDWETimerPattern__Thread_gsfx[this]=""
            set s__YDWETimerPattern__Thread_wsfx[this]=""
            set s__YDWETimerPattern__Thread_part[this]=""
   return true
endfunction
function sa__YDWEStringFormula__Sorting_onDestroy takes nothing returns boolean
local integer this=f__arg_this
            local integer i= 0
            loop
                exitwhen i == s___YDWEStringFormula__Sorting_stack_size
                set s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this]+i]=0
                set s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this]+i]=0
                set i=i + 1
            endloop
            set s__YDWEStringFormula__Sorting_char[this]=""
   return true
endfunction
function sa___prototype4_SetUnitMoveSpeedEx takes nothing returns boolean
    call s__ModSpeed_setSpeed((f__arg_unit1) , ((f__arg_real1)*1.0)) // INLINED!!
    return true
endfunction

function jasshelper__initstructs364733109 takes nothing returns nothing
    set st__Frame_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__Frame_onDestroy,Condition( function sa__Frame_onDestroy))
    set st__ShopWeapon_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__ShopWeapon_onDestroy,Condition( function sa__ShopWeapon_onDestroy))
    set st__ShopWeapon_PickUpWeapon=CreateTrigger()
    call TriggerAddCondition(st__ShopWeapon_PickUpWeapon,Condition( function sa__ShopWeapon_PickUpWeapon))
    set st__ZiZhiWuGong_create=CreateTrigger()
    call TriggerAddCondition(st__ZiZhiWuGong_create,Condition( function sa__ZiZhiWuGong_create))
    set st__ZiZhiWuGong_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__ZiZhiWuGong_onDestroy,Condition( function sa__ZiZhiWuGong_onDestroy))
    set st__DaPei_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__DaPei_onDestroy,Condition( function sa__DaPei_onDestroy))
    set st__DaPei_XiaoGuoShuoMing=CreateTrigger()
    call TriggerAddCondition(st__DaPei_XiaoGuoShuoMing,Condition( function sa__DaPei_XiaoGuoShuoMing))
    set st__YDWEStringFormula__Inventory_onDestroy[4]=CreateTrigger()
    set st__YDWEStringFormula__Inventory_onDestroy[5]=st__YDWEStringFormula__Inventory_onDestroy[4]
    call TriggerAddCondition(st__YDWEStringFormula__Inventory_onDestroy[4],Condition( function sa__YDWEStringFormula__Inventory_onDestroy))
    set st__YDWETimerPattern__Thread_onDestroy[12]=CreateTrigger()
    set st__YDWETimerPattern__Thread_onDestroy[13]=st__YDWETimerPattern__Thread_onDestroy[12]
    set st__YDWETimerPattern__Thread_onDestroy[14]=st__YDWETimerPattern__Thread_onDestroy[12]
    set st__YDWETimerPattern__Thread_onDestroy[15]=st__YDWETimerPattern__Thread_onDestroy[12]
    call TriggerAddCondition(st__YDWETimerPattern__Thread_onDestroy[12],Condition( function sa__YDWETimerPattern__Thread_onDestroy))
    set st__YDWEStringFormula__Sorting_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__YDWEStringFormula__Sorting_onDestroy,Condition( function sa__YDWEStringFormula__Sorting_onDestroy))
    set st___prototype4[1]=CreateTrigger()
    call TriggerAddAction(st___prototype4[1],function sa___prototype4_SetUnitMoveSpeedEx)
    call TriggerAddCondition(st___prototype4[1],Condition(function sa___prototype4_SetUnitMoveSpeedEx))



call ExecuteFunc("s__ModSpeed_Init__onInit")
















    call ExecuteFunc("s__YDWEStringFormula__ItemIdMatrix_onInit")
    call ExecuteFunc("s__YDWEStringFormula__FormulaMatrix_onInit")
endfunction

